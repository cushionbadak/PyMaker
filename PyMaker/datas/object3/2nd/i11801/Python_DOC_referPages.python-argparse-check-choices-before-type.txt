Natural Text
I'm trying to enable a user to pass in a function name.  For some reason it seems that argparse performs the type check/conversion BEFORE it checks the choices.  Is this a bug?  Best thing to do?This throws:
Yes, during parsing the  then  order is clear and intentional (and not just incidental).  When preparing to assign  to the  it calls , which does:where  applies the  function, and  tests For parsing  only has to respond to the  () expression.So  have to reflect values after conversion.  If  is , then  is correct,  is not.There are some (largely unresolved) bug issues over the display of the choices.  Long lists, e.g.  work in parsing, but don't display nicely. And display also requires that  be iterable (e.g. a list, tuple, dictionary).   This display issue affects the usage, the help and the error messages (each formats  slightly differently). is your most powerful tool for replacing an undesirable  list.  I'd have to run a test case to see whether it solves things for all 3 situations.
Apparently so, however you can work around this simply by using  as your choices, e.g.However, if you want to provide this kind of interface (mapping functions to command line arguments) you might want to take a look at click.


Answer URL
https://docs.python.org/3/library/argparse.html#choices
