Natural Text
I'm having trouble importing modules from my pytest functions. I know there's a million questions on this, but I've read through a bunch, and I'm still having trouble understanding.I expected that to work. 'code' is a package, right? A package in Python 3 is any directory with .py files in it. I've also tried it with a relative import -  - and I get the following.I've also tried modifying sys.path as shown here, specifying my PYTHONPATH, and adding init.py files in code and test.Can I get this import to work without using something like setuptools? This is just for experimenting, so I'd rather not deal with the overhead.It may also be important to note that I'm using conda, because it seems to work when I'm using the python 2 pip-installed version of pytest with init.py files. 
Some notes about directories without  files first:Implicit namespace packagesAlthough a directory without an  is a valid import source in Python 3, it is not a regular package, rather being an implicit namespace package (see PEP 420 for the details). Among other properties, implicit namespace packages are second-class citizens when it comes to importing, meaning that when Python has two packages with the same name in , one being a regular package and another being an implicit namespace package, the regular one will be preferred regardless what package comes first. Check it yourself:This will print : although  comes first in ,  from  is imported instead because  is a regular package.Now you know that since your package  is an implicit namespace package, Python will prefer regular imports of  to yours if it encounters one. Unfortunately for you, there is a module  in the stdlib, so it's practically a "reverse name shadowing" problem: you have an import object with the same name as the one from stdlib, but instead of shadowing the stdlib import, it shadows yours.You thus need to do two things in order to make your layout usable:give the  dir a unique name (let it be  for this answer's example)after that, you still need to fix the  when running the tests from the project root dir because it's not in  per se. You have some possibilities:add an empty  file to the root dir (aside the  dir). This will instruct  to add the root dir to  (see here for an explanation). You can now just run  as usual and the imports will be resolved;run the tests via  - invoking interpreter directly adds the current dir to ;add the current dir to  via  env var, e.g. run .


Answer URL
https://docs.python.org/3/library/code.html
