Natural Text
Simple question (and apologies if this is too opinion based):How should I store percentages?When writing a program which includes a large number of analytical calculations, or financial calculations involving percents (return rates, APRs, profit margins etc), which of the three options below are best practice, in terms of performance, readability, good code practice etc.Store percentages as floats in decimal form: ie 20% = , and write a filter to transform this in the UI. (In django this would be a templatetag, which would need to be applied everytime a percentage was dislayed).Store percentages as whole numbers and divide by 100 whenever calculations need to be done in the backend, ie 20.13% is stored as  and used like .Create (or use a library) a datatype for Percent, which can do both, such as having an attribute 'Percent.value' with a property decorated attribute for 'Percent.display' which multiplies by 100 and rounds. In this class I imagine __str__ is set to the display value, whereas all other operations use the raw value.As far as I see, 1 is the most intuitive, but doesn't seem like best practice for encapsulation, and could lead to issues with errors displaying odd values, debugging and etc. 2 seems to be insanely annoying for developers, and could lead to errors because of that. Option 3 seems like an unnecessary memory overhead.Which is the most used in industry, and why?
I suggest something along the lines of your option 1.But instead of  you should use Pythons  library and for example Djangos  to store it in the database.The  object allows for fixed rounding, which will save you from a lot of headaches.I suggest storing the percentages as the value you will be needing for multiplications (example: store  as ). In my opinion it is better to alter the display when needed instead of making transformations in the calculations.And yes, a template tag in Django sounds like a good way to go about displaying these values as percentages.


Answer URL
https://docs.python.org/3/library/decimal.html
