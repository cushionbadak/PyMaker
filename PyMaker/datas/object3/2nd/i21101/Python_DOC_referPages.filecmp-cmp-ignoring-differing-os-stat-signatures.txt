Natural Text
The Python 2 docs for  say:Unless shallow is given and is false, files with identical  signatures are taken to be equal.Which sounds like two files which are identical except for their  signature will be considered unequal, however this does not seem to be the case, as illustrated by running the following code snippet:Output:As you can see the two files' time stamps — , , and — are clearly not the same, yet  indicates that the two are identical.  Am I misunderstanding something or is there a bug in either 's implementation or its documentation?UpdateThe Python 3 documentation has been rephrased and currently says the following, which IMHO is an improvement only in the sense that it better implies that files with different time stamps might still be considered equal even when  is True.If shallow is true, files with identical  signatures are  taken to be equal. Otherwise, the contents of the files are compared.FWIW I think it would have been better to simply have said something like this:If shallow is true, file content is compared only when    signatures are unequal.
You're misunderstanding the documentation.  Line #2 says:Unless shallow is given and is false, files with identical  signatures are taken to be equal.Files with identical  signatures are taken to be equal, but the logical inverse is not true: files with unequal  signatures are not necessarily taken to be unequal.  Rather, they may be unequal, in which case the actual file contents are compared.  Since the file contents are found to be identical,  returns .As per the third clause, once it determines that the files are equal, it will cache that result and not bother re-reading the file contents if you ask it to compare the same files again, so long as those files'  structures don't change.
It seems that 'rolling your own' is indeed what is required to produce a desirable result.  It would simply be nice if the documentation were clear enough to make a casual reader reach that conclusion.Here's the function I am presently using:


Answer URL
https://docs.python.org/3/library/filecmp.html#module-filecmp
https://docs.python.org/3/library/os.html#os.stat
https://docs.python.org/3/library/os.html#os.stat
