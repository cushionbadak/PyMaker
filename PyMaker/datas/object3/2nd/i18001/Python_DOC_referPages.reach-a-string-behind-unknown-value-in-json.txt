Natural Text
I use Wikipedia's API to get information about a page.The API gives me JSON like this:You can see the full JSON response.I want to obtain all entries like:but the number key ("188791") in the  object is the problem. I found Find a value within nested json dictionary in python that explains me how to do enumerate the values.Unfortunately I get the following exception:My code is:It's probably a dumb question but I can't find a way to pass in the page id value.
As long as you're only querying one page at a time, Simeon Visser's answer will work.  However, as a matter of good style, I'd recommend structuring your code so that you iterate over all the returned results, even if you know there should be only one:In particular, by writing your code this way, if you ever find yourself needing to run the query for multiple pages, you can do it efficiently with a single MediaWiki API request.
One solution is to use the  parameter, e.g.: http://fr.wikipedia.org/w/api.php?action=query&titles=Vanit%C3%A9&prop=langlinks&lllimit=500&format=jsonfm&indexpageids. It will add an array of pageids to the response. You can then use that to access the dictionary.
You're using Python 3 and  now returns a  instead of a . This is a view on the values of the dictionary.Hence that's why you're getting that error because indexing fails. Indexing is possible in a list but not a view.To fix it:
If you really want just one page arbitrarily, do that the way Simeon Visser suggested.But I suspect you want all langlinks in all pages, yes?For that, you want a comprehension:But of course that gives you a 2D list. If you want to iterate over each page's links, that's perfect. If you want to iterate over all of the langlinks at once, you want to flatten the list:… or…(The latter gives you an iterator; if you need a list, wrap the whole thing in . Conversely, for the first two, if you don't need a list, just any iterable, use parens instead of square brackets to get a generator expression.)


Answer URL
