Natural Text
On windows, when there are chinese characters in file path, the chinese characters will be garbled in tar.gz and after decompression, they are still garbled.
This is all explained in Unicode issues in the docs.For all tarball formats before PAX—including the default format used by —filenames are stored in a "local filesystem encoding". The compressing program has to take a wild guess at what the decompressing program will want, and vice-versa. If you don't take a guess in your program, Python will do it for you, and guess UTF-8. See , which explains that it uses  if you don't specify anything, and , which explains that it defaults to  on Windows.So, there are three solutions:Use PAX-format tarballs. This is easy; just pass  to the  constructor. (You can also set  to change the default.) As long as the tool you're using to decompress understands PAX, you're set.Figure out which encoding your decompression tool wants, and specify that explicitly by passing, e.g.,  to the  constructor. (You can also set  to change the default.) Again, there's a good chance your tool uses your system's configured OEM charset, but no guarantee of that, and without knowing what tool you're using, I can't give any more details on how to figure it out.Let Python use UTF-8, and convince your decompression tool to read UTF-8 instead of making a wild guess. Without knowing which tool you're using, I can't give any more detail than that.


Answer URL
