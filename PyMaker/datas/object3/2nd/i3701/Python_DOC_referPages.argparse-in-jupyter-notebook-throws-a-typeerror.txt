Natural Text
Using argparse in a Jupyter Notebook throws a TypeError. The same code works fine if I execute the same code as a script. MWE:Result:
Ipython is running some command-line arguments in the background. This interfers with argparse and optparse.See this bug for Spyder (Ipython IDE), where  was being added as a command option and crashing as there was no handler for .You could try checking the arguments currently in play (as they did for the Spyder bug) and putting a dummy handler in place.Run inside Ipython and see what it outputs.On my system, it gives ['/usr/lib/python3.6/site-packages/ipykernel_launcher.py', '-f', '/run/user/1000/jupyter/kernel-7537e4dd-b5e2-407c-9d4c-7023575cfc7c.json']Argparse assumes the first entry is the program name (). In order to fix this, I had to call... and now  works in my notebook.
One solution is to parse an empty list of arguments:Another is to use parse_known_args:
When I run your code in a Notebook, I get an  usage error message:With a  I get, which  parses, contains the values used to launch the Notebook server, which this particular  is not setup to handle.   displays:That extra stuff that your parser can't handle is put in the  list.Run with a custom  list works:It's a good idea to put  code (at least the  line) in a  block, so it is not run when the script is imported. It will still run when the script is run as a script.This script also works when using .  You can even give it arguments as you would with a script:I have no idea what code is producing the  keyword error.  You'll have to give us the traceback if you want help with that.


Answer URL
https://docs.python.org/3/library/argparse.html#prog
