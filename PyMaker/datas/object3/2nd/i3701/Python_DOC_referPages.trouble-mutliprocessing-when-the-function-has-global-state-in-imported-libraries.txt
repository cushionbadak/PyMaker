Natural Text
This is being done on a machine learning example but I don't believe the problem or solution is specifically related to it using keras/tensorflow. file with some gobal state I can't get around...Multiprocessing code I want to get workingNow this works okay if the number of workers for the pool is equal to or greatert than len(x_) but that is unmaintainable. For anyone's interest, the global state that is causing problems in my real code is the loaded tensorflow backend in Keras. I believe the session is closed when the task is done but the next task for some worker still sees the old session...
 internally works by launching python instances and running your function. global state is not shared at all. global code (outside functions) executes all over again as each module is loaded in the new instance. If you need global state in , you have to keep it in the main process and use some form of communication, like a shared memory mapping. See  docs here for more info.


Answer URL
https://docs.python.org/3/library/multiprocessing.html#sharing-state-between-processes
