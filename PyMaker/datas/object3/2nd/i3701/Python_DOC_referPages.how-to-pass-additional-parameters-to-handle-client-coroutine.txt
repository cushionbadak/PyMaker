Natural Text
The recommended way to use asyncio for a socket server is:This works fine, but now I need to receive appropriate client request and then use aiohttp library to fetch data from a 3rd party restful API.This requires creating a session variable as follows:But this also should be inside a coroutine itself, so I'll put it inside main:Now I need to pass the session variable to the aiohttp get coroutine to fetch the rest API data:My question is how can I pass the session variable to handle_client coroutine, if it insists on only having reader,writer parameters, and globals don't help me because sessions must exist inside coroutines?      
You can use a temporary function or a lambda:This works because even though the  is not technically a coroutine, it behaves like one - it is a callable that returns a coroutine object when invoked.For larger programs you might prefer a class-based approach with a class encapsulating the state shared by multiple clients without having to pass it from coroutine to coroutine. For example:


Answer URL
https://docs.python.org/3/library/asyncio-task.html#coroutine
