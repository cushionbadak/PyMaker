Natural Text
I've got a following issue. I'm trying to refactor my code in order to process API calls using multithreading. My core data is simple list of tuples in following format:Function that I use takes lst list and process it through an API which requires a pair of photos. After all a single number is returned for each pair. So far, I'm using a loop to put a tuple into my function and produce mentioned number. I would like to paralellize the whole computation in a way that one process takes a part of my list and calls the function for the tuples inside a batch. To do that I was trying to use pool function for multiprocessing module:However, following error occurs:Something strange is happening here. It tries to treat a single character from my tuple as an argument. Any ideas how to do it properly? Thank You@edit The lack of score_function definition is my bad. Let me update the question: Where findElement is defined as:
Your problem is the for loop. It breaks your tuple to individual strings. Do this and it should work:You probably assumed your  would receive the  variable as a parameter. This does not happen.  needs to be a list as it is in your case, and pool.map automatically splits that to individual elements and feeds exactly one element to  and keeps doing so until the whole list has been processed by your workers.  Each call to a worker receives as a parameter just the one element it is supposed to work on.  Your individual elements are tuples (path1, path2), and when you call  on this tuple, you receive just one single path (string) in your loop and pair[1] is just the second character of this string.Hope this helps. 
Without knowing your score_function and how you define and access it, I guess that you have something likein there. The error indicates your param is not a tuple at all but a string (param[1], if param is a tuple, would be the second element, while param[1], if param is a string, would be the second character, in your case U from /Users...). Putthere and see what it is. Either your lst is all wrong and is missing parentheses, and pool.map flattens it and sends each individual component to your function as a string, or you have one offending entry in your lst that is not a tuple. If for example there is an entry and you have forgotten to put parentheses around it, it would send each individual string as a parameterit would be able to process the first two but the third (and fourth as it is now a separate entry instead of the second component in a tuple) would cause exactly the error you are getting now. Either way, printing out the parameter your  receives should help you figure out where your problem is.  Your use of pool.map is correct and it should work, assuming your input is what you expect it to be. 
You can use the starmap function insted of map like this:


Answer URL
https://docs.python.org/3/library/multiprocessing.html#multiprocessing.pool.Pool.starmap
