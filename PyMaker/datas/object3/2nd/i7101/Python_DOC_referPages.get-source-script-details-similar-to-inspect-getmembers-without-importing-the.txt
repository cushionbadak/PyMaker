Natural Text
I'm trying to get the source, callee list, defaults, keywords, args and varargs of the functions in a python script.Currently, I'm importing the module and using the python  module's  function and passing the  parameter like so:However, this method doesn't work if 's imports aren't available to me (since  has to be imported first).I tried using the python  module to  and  the syntax tree, but getting the function source involved very hacky techniques and/or questionable and far from maintainable third party libraries. I believe I've scoured the documentation and stackoverflow pretty thoroughly and have failed to find a suitable solution. Am I missing something?
So I looked around some more and quickly Frankenstein'd a solution using this dude's answer to get each function's source. It isn't anywhere near perfect yet, but here it is if you're interested:Output:
A possible workaround is to monkeypatch the  function with a custom function that never throws an ImportError and returns a dummy module instead:This would allow you to import  even if its dependencies cannot be imported. Then you can use  as you normally would:A problem with this solution is that it only works around the failing imports. If  tries to access any members of the imported modules, its import will fail:In order to work around this, you can create a dummy class that never throws an AttributeError:(See the data model documentation for a list of dunder methods you may have to implement.)Now if  returns an instance of this class (change  to ), importing  will succeed.


Answer URL
https://docs.python.org/3/reference/datamodel.html#basic-customization
