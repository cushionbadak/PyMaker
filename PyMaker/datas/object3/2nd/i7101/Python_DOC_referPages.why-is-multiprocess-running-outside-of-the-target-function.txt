Natural Text
I have this code:When I run this, it outputs pairs variable(not pairtxt) 3 times, I'm guessing once by itself and twice by the multiprocessing but why is it even running outside the target function?My output I'm getting with pairs.txt containing 2 lines "1" and "2"
Try moving the  and  statements into your  block. I suspect that python is running the full script every time the subprocess is called, as it wants to ensure that all of the dependencies are met (imports and such) for the function that you hand it. By having running code in your script that's outside of your  block, it's running that every time your subprocess is run as well. 
Because Python is a dynamic language. When importing a module, all toplevel statements in that module are executed. The reason you usually don't notice is that many modules only declare things, or at least check if they're the main module before performing actions. In your example, you have a completely unconditional section loading a file and printing its contents before you even define the worker function. This may or may not execute once per process in multiprocessing; it wouldn't on unixlikes where fork is available, because they can simply clone the existing process instead of importing the module anew. This is documented under Safe importing of main module, and is a frequent gotcha of multiprocessing. 


Answer URL
https://docs.python.org/3/library/multiprocessing.html#the-spawn-and-forkserver-start-methods
