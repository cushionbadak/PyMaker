Natural Text
This question already has an answer here:“Least Astonishment” and the Mutable Default Argument                    32 answers                A few days ago I had a nasty bug related to this issue: when my class's constructor has a default argument of an empty dictionary, all instances of that class point to the same dictionary. Here is an example:Ouput:I suspect that when the dictionary is initialized inside the constructor (as in class B), it creates a new reference for each object. When the dictionary is initialized as a default object, even though it is initialized to the empty dictionary, all objects point to the same dictionary. Can someone shed light on this behavior and explain more about the inner workings of it? Thanks
From the Python Language ReferenceDefault parameter values are evaluated when the function definition is executed. This means that the expression is evaluated once, when the function is defined, and that the same “pre-computed” value is used for each call.When the function is defined, an empty dictionary is created, and bound to the function object. The assignment statementassigns the member variable to point to the instance created when the function was defined. Modifying that dictionary will modify the instance bound as the default value.An alternative definition that likely accomplishes your goal would be something like:


Answer URL
