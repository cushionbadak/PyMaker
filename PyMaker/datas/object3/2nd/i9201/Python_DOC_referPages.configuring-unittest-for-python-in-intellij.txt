Natural Text
I have a relatively complicated project that is managed by Gradle. Most modules are Java-based, so I'm using IntelliJ (and not PyCharm) as the IDE. The Python plugin works fine for the one Python module, except that I can't get unit tests to work.The directory structure is roughly like this:The  file is this:There is a specific virtual environment set up for the Python module to run in. This is configured in the  as the Python Interpreter. I'm confident this is working as expected, because when working in the IDE it is properly finding relative files, dependent libraries, etc.In fact, if I'm in  the IDE recognizes the : I can click through to the correct, etc.If I right click on the test class and  I can set all of that up. In this modal it includes  and , so presumably the  and  directories are being found. (Note that  is marked as a source root in the Project Structure modal.) I've tried selecting that specific script as the test, everything in the folder, etc. I've also tried moving the  directory outside the  directory and marking it as a test directory. Again, the IDE can find the classes when editing files, but when I run the test it fails to.Specifically, when I run the tests I get this:What do I need to do to get the IDE test runner to recognize the correct environment and path variables? (Simply switching to PyCharm is not an option.)Outputting the system path () I get the following:This seems to suggest that the  directory is, in fact, being found? So everything in that directory should be available?
The problem is due to namespaces in Python. Since both your test and the file being tested are named 'util.py', Python imports from the first one it comes across in the Python path. Since the tests dir is before the parent directory in that path variable, it will try to import from the test itself, which doesn't have that function defined.Simply renaming the test to "test_util.py" would resolve the namespace issue


Answer URL
https://docs.python.org/3/tutorial/modules.html#packages
