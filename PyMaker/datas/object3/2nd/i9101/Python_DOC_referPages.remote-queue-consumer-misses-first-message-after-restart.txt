Natural Text
I have code like the following:server.pyproducer.pyconsumer.pyIf I run the server and the producer and then start the consumer I see all messages that the producer put in the queue appear at the consumer. However, if I stop the consumer and immediately restart it it always skips a message. To illustrate what I see as output of the consumer.py:Is this just how the python multiprocessing queue is supposed to work, is it a bug or am I doing something wrong?
I think the issue lies in either the way pipes are implemented in python, or it might even be a limitation on the OS. Here's the full stack trace:The value seems to be lost in the  call which is not properly terminated with the . The  gets instantly cancelled, so it's not that python would finish the  call and then lose the value. It looks more like python does not properly cancel the  on the pipe.If you are changing the consumer to this:it will work. But of course it's a workaround and not the real solution.Update:After playing around more with your code I think this is a bug, since:you followed their coding example one by oneno type of queue solves the problem (neither  nor also sending  is not helpingThe bug is happening both on python2 and python3. I suggest you report this as a bug. In the worst case, if it is not a bug, you at least get an explanation why python would behave this way.


Answer URL
https://docs.python.org/3/library/multiprocessing.html#using-a-remote-manager
