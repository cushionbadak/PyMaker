Natural Text
The examples given in the docs all seem to be the cases where the first callable argument in  is a "constant" function, like , , or  etc. I don't know if  is just supposed to take constant functions as its callabe argument, but if not, I want the callable to be dependent on the missing key values I give. For exampleWhat I expect is whenever I give a missing key string, for example , the container can create a new entry with  being the key and its length  being the value. But it doesn't work. Instead, it gives me the following error:I expected  to be this 's argument here, but it was apparently not the case. So what could have gone wrong?
The default factory is never given any arguments, so you can't do it like that. What you can do, though, is subclass  and define the  method:To make it more easily-extendible, you could also take advantage of the , but give it the key as an argument:
From the docs: If default_factory is not None, it is called without arguments to provide a default value for the given key, this value is inserted in the dictionary for the key, and returned.The  simply doesn't work the way you are trying to use it. 


Answer URL
https://docs.python.org/3/library/collections.html#defaultdict-examples
