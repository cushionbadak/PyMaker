Natural Text
I have this piece of code:And I want to test the case a postie.EmailDeliveryException is raised.So I mock out postie.postmail and put the exception as aside effect of its call:The above results in:Now I want to mock out the logger and check that the error function is also called in case of ‘EmailDeliveryException’. So I go:The result will be:So it looks like the assertFalse does no longer succeed, (probably the exception is no longer raised). Anyone has any idea if anything interferes with my side_effect here? Thank you in advance!
You have incorrect order of patch decorators (or stub arguments). Here's an explanation from mock docs:When you nest patch decorators the mocks are passed in to the  decorated function in the same order they applied (the normal python  order that decorators are applied). This means from the bottom up...So it should be:


Answer URL
https://docs.python.org/3/library/unittest.mock.html#quick-guide
