Natural Text
I'm getting a NameError in the __del__ function of a class. I do not understand why 'open' is not accessible inside the function __del__. I am using Python 3.4.0Python Code:Error Message:
's code used to work until Python 3.4. I know because I've just run into the same issue, calling  within .  Apparently built-in functions no longer work, because of a change in when  is run as the interpreter shuts down.UPDATE:See https://docs.python.org/3/library/weakref.html, especially the section on finalizers.  I have several classes that encapsulate access to resources that had  methods to unlock or clean up as soon as the application would exit, for any reason.  Catching all exceptions or exits at the application level and explicitly calling cleanup methods is inconvenient and bug-prone.  I'll try using a local  instead.UPDATE:I'm having better luck with  and , putting the top-level object in a  clause.  It appears at least the  gets called no matter how, so I can call the cleanup methods ('s themselves) of all subordinate objects.  That's working for me.
It is generally not a good idea to rely on  for anything in Python.Better use a normal method and call it,  or whatever name you find best.Related discussion is for example in I don't understand this python __del__ behaviourUPDATE: atexit.register may be what you want, https://docs.python.org/2/library/atexit.html . As featured in this nice article at "Common Mistake #10: Misusing the  method" http://www.toptal.com/python/top-10-mistakes-that-python-programmers-makeAs for the explanation, this discussion tells: "At interpreter shutdown, the module's global variables are set to None before the module itself is released." -- perhaps that applies to builtins too, http://bugs.python.org/issue5099
I think it just a scope problem. I don't know why you should pass MyWindow class as argument when initiating Controller class. Try to change it to:


Answer URL
https://docs.python.org/3/library/weakref.html
