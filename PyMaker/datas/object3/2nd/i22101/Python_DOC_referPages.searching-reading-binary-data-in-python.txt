Natural Text
I'm reading in a binary file (a jpg in this case), and need to find some values in that file. For those interested, the binary file is a jpg and I'm attempting to pick out its dimensions by looking for the binary structure as detailed here. I need to find FFC0 in the binary data, skip ahead some number of bytes, and then read 4 bytes (this should give me the image dimensions).What's a good way of searching for the value in the binary data? Is there an equivalent of 'find', or something like re?
You could actually load the file into a string and search that string for the byte sequence  using the  method. It works for any byte sequence.The code to do this depends on a couple things. If you open the file in binary mode and you're using Python 3 (both of which are probably best practice for this scenario), you'll need to search for a byte string (as opposed to a character string), which means you have to prefix the string with .If you open the file in text mode in Python 3, you'd have to search for a character string:though there's no particular reason to do this. It doesn't get you any advantage over the previous way, and if you're on a platform that treats binary files and text files differently (e.g. Windows), there is a chance this will cause problems.Python 2 doesn't make the distinction between byte strings and character strings, so if you're using that version, it doesn't matter whether you include or exclude the  in . And if your platform treats binary files and text files identically (e.g. Mac or Linux), it doesn't matter whether you use  or  as the file mode either. But I'd still recommend using something like the first code sample above just for forward compatibility - in case you ever do switch to Python 3, it's one less thing to fix.
The bitstring module was designed for pretty much this purpose. For your case the following code (which I haven't tested) should help illustrate:
Instead of reading the entire file into memory, searching it and then writing a new file out to disk you can use the mmap module for this. mmap will not store the entire file in memory and it allows for in-place modification. 
The  module does work with both string and binary data ( in Python 2 and  in Python 3), so you can use it as well as  for your task.
Well, obviously there is PIL The Image module has size as an attribute. If you are wanting to get the size exactly how you suggest and without loading the file you are going to have to go through it line by line. Not the nicest way to do it but it would work.
The  method should be used only if you need to know the position of sub, if not, you can use the  operator, for example:
In Python 3.x you can search a byte string by another byte string like this:
For Python >=3.2:


Answer URL
https://docs.python.org/3/library/stdtypes.html#str.find
