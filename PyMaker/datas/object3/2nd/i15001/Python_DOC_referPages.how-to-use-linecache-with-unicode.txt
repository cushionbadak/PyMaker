Natural Text
I open my file thus:but, when I I get an exceptionThis is because (I think)  returns a str() (which does not have a  method).My script must be able to support unicode, so I can't simply convert the input file to UTF-8. 
 takes a filename, not a file object, as your usage shows.  It has no provision for an encoding.  Also from the documentation:This is used by the traceback module to retrieve source lines for inclusion in the formatted traceback.This implies that it is mainly used for Python source code.  As it turns out, if the file has a Python source file encoding comment, it works:input.txttest.pyOutputSo  probably isn't the solution to your issue.  Instead, open the file as you've shown and perhaps cache the lines yourself:You could also append lines to a list as they are read if you don't want to read the whole file, similar to .


Answer URL
https://docs.python.org/3/library/tokenize.html#tokenize.detect_encoding
