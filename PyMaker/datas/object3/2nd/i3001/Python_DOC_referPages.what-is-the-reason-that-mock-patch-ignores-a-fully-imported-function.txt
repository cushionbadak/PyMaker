Natural Text
Today I realized that it matters for  how I import a function. Depending on the used way a  call worked or was ignored. In Python we typically import a function with:an import statement like  ora  statement like A  works like a charm if I use , but it was ignored if I patch a . Example 1: Using importOutput of example 1Example 2: Using a full function import and from-importWhen I fully import  the  ignores the .Output of example 2In both cases I don't receive an error and  could find  as a valid path. However, in the second case the function is not properly patched. Why  does not patch the function in the second example?Are there any implementation specific reasons why the second patch did not work?
When you do , you get a variable named  pointing to  function. Later, you assign, via patching, a different function to , but  keeps to point to the old function. This is the same reason why the following works:It doesn't happen in the first example, because you reference  before it is mocked. To fix your second example, I'd go with the following:This way you make sure you patch the right reference. This is a rather common pattern. If  function were in a file named , the patch call would look like .


Answer URL
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch.object
