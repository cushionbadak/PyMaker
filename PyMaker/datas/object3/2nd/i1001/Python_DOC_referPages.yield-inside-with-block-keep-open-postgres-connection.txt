Natural Text
When ing from the below generator, is the postgres connection kept active or does the  need to be less indented such that a new connection is made on every ?
Yes, the context manager is kept active.  pauses the function, nothing is exited. doesn't alter the order of execution inside a function. The function is merely 'paused', frozen at the point where the  expression has executed and produced a value. When the generator is later on resumed (by calling  on the iterator), the function continues at that point again. A  statement  method can't be called when a generator is paused, so the context manager can't be exited until the generator is resumed, anyway.You can see this happen if you create a simple context manager with the  decorator (itself relying on a generator for the implementation!):And when you pull values from the generator to print, you'll see this:Note that the context is not exited until we retrieve the 3rd value! After the second  call the code is paused at a point inside of the  block, and only when unpaused can the context be exited, and the  suite of the  function can be run.


Answer URL
https://docs.python.org/3/library/contextlib.html#contextlib.contextmanager
