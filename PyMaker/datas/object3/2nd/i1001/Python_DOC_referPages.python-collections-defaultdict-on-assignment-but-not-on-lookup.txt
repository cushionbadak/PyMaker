Natural Text
I have the following code:which enables me to write any new "path" in the dict as a one liner:which is what I want.But I want to get an exception when running (for any non existing path):I feel I need defaultdict when writing, plain dict when reading...Or, is there a simple nice way to check if a 'path' exists in a defaultdict without modifying its contents...I tried converting the defaultdict back to a dict before the lookup, hoping that:would raise a exception... but it kept creating missing keys...
You can't distingsuish between lookups and writes here, because it is the lookups that create your intermediary structure in the  assignment. Python executes the indexing operations  and then  first, before assigning to the  key. The ,  and  hooks involved to make that work are not given enough context to distinguish between access that then leads to the  assignment from only 'reading'  in your second example.You really only have 3 options here:Don't use . When writing, explicitly create new nested dictionaries with  instead; you can chain these calls as needed:or you can wrap recursive behaviour in a few functions.Create a recursive copy of your  structure to replace it with a  structure once you are done writing:Set all the  attributes to  to disable creating new values for missing keys:
An obvious solution is to just use plain dicts with a function that can "materialize" the intermediate keys:outputs


Answer URL
https://docs.python.org/3/library/stdtypes.html#dict.setdefault
