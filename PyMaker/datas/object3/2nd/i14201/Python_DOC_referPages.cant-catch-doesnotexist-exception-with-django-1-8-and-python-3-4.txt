Natural Text
I have the following view in a Django app:This requires an ID for a photo album in the URL, and if the album does not exist, it should raise a 404 error. I've written the following test to check this behaviour:Unfortunately, it's raising the following error:It looks to me like the exception isn't being caught. I have used this method for catching invalid objects in Django before, but that was in Python 2.7, so I wondered if it was something in Python 3 (this is my first Python 3 Django project). What am I doing wrong?
You're not doing anything wrong in the view. The test result shows it is doing exactly what you want: catching a DoesNotExist, and raising Http404 in response.The issue is in your test. You're calling the view directly, which means you skip all the middleware that usually does things like handle exceptions and translate them into 404/500 responses. Instead of creating a request via the factory, you should use the built-in test client to call the view:


Answer URL
https://docs.python.org/3/reference/simple_stmts.html#the-raise-statement
