Natural Text
Note This question is not about the Python 3  data type, it's just the example I'm using.With PEP 3115 Python 3 added the 1 method to  for the purpose of allowing a custom namespace to be used when creating classes.  For example, the new  data type uses  to return an instance of the private  for use as the new  class' namespace.However, I have seen several examples on SO2 of  being subclassed, creating a new namespace for the class in the metaclass  method, but instead of calling the  method to acquire that new namespace,  is used instead.  Are there any risks to doing it this way?1  The signature for :and for :2  Example using :from this answer
Yes, there are risks.At least two reasons exist for getting the new namespace by calling  instead of doing :When running on Python 2  is a , and the original  never ran to begin with ( is Python 3 only) -- in other words, if  is returning something besides a normal dict,  is not going to get it.Any attributes set by  on the  would not be set when using ; i.e. if  does  then  will not have a  attribute.  Note that these attributes are on the namespace itself for use by the metaclass and are not visible in the namespace.To summarize: there are good reasons to use  to obtain the proper class dictionary, and none for the  shortcut.


Answer URL
https://docs.python.org/3/reference/datamodel.html#preparing-the-class-namespace
