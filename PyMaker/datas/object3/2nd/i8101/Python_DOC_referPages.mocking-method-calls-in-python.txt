Natural Text
I have been searching stack exchange and around the web for how to do this, but I cannot understand how to mock behaviors for methods. I am trying to mock openpyxl behaviors and behaviors for my custom class. Here is my attempt:When I try the final line I get the error "can't assign to function call". Do I need to use ? I am used to mocking in Java with Groovy and it's pretty straightforward.*Edit: wanted to add the finalized version of the test based on the response from @alxwrd Notice that config.get gives multiple returns with the side_effect parameter, so if  is called once in the code it returns  and when  is called a second time it returns .
You can't override a function call, but you can override the function itself.From the docs:So in your case:
You don't have to import the target you want to mock in your unit tests. Use patch to mock the target. Let's assume your code has this import statement: . Patch then can be used in your test as a decorator:Note that you have to add an argument to the test method which will get the mock object.Or as a context manager:


Answer URL
https://docs.python.org/3/library/unittest.mock.html#quick-guide
https://docs.python.org/3/library/unittest.mock.html#patch
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.call_args
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.return_value
