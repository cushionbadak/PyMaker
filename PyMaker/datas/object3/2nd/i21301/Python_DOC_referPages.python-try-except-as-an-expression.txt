Natural Text
I find myself having this sort of pattern over and over:Is there any way to condense this into a single expression? Like with if-else statements you can turn:intoIs there any equivalent thing for try-catch?
Since agf already provided the approach I'd recommend, here's a version of his routine with a couple of minor enhancements:This version:Lets you specify exactly which exceptions will be caught as additional optional arguments. You should always catch the minimum set of exceptions that will do the job and let exceptions you can't handle bubble up to the caller.Supports the use of a plain value as well as a function for the failure value. This saves you having to use a lambda in a lot of cases. (Of course, instead of  you can just use .)
I think the code is self explanatory. It returns the value returned by  unless there is an error, then it returns the value returned by . If  is an expression rather than just a function call, wrap it in a  as well.Edit: @kindall and I improved his version a bit so it's just as fast as mine, can be called exactly the same if you want, has more features, and is the same number of lines. Use it!
Here's a context manager that provides a little bit of a shortcut:Usage:The basic idea here is that the context manager returns whatever default value you pass it, which is then assigned to the variable you specified in the  statement's  clause. Then, inside the context, you execute a statement that tries to assign to that same variable. If it raises an exception, the context manager catches and silently ignores it, but since the assignment didn't happen, the default value remains.Might be particularly useful for multi-line calculations that nevertheless result in a single value.
Unfortunately, no, there is no language construct for it and I do not know any really legible and concise idiom either. I always wanted something like that. Some time ago someone gave me reasons to Python does not have something like  but they were not very convincing and I still miss this language construct :)
Obviously, the latter way of doing it is more succinct and is preferred by many programmers like you. While the language itself doesn't provide a "one-line try-except-catch" for whatever the reasons, all good and necessary, I presume, you can generally accomplish this, by changing the program, a little; like for example:into:and similarly for the DB queries;withand add similar API's to your own programs where possible. try-except is rather "cheap" in Python and is exception based programming is preferred over the "check-first" approach generally suggested in Java like languages because of the expensive nature of the exception handling. So, you should rather wrap this "catching thing" in a method/function and call that every where, like for example the dict and other constructs do.
There is no easy way to simplify a try/catch statement like the if/else example, but I want to point out that python's "with" statement introduced in python2.5 made a lot of interfaces to file/db io try catch statements simpler and exception safe. IO operations tend to be where a lot of try/catch statements are used.instead of


Answer URL
https://docs.python.org/3/glossary.html#term-eafp
https://docs.python.org/3/glossary.html#term-lbyl
