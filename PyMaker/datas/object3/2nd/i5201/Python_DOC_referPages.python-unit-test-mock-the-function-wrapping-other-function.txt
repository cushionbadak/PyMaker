Natural Text
This question already has an answer here:Python Mocking a function from an imported module                    2 answers                Here is what I want to test:test.pyAnd program code:a.pyb.pyWhat I want to do is testing . Problem is though  call  inside. I don't want  to crawl data from web in the test, So I tried mocking this function.When I run the test,  still crawl data from the web in real!The reason that I don't want to mock function2 is that, when I start the test, test framework use virtual database (provided by )!So, What I want to do is make  as a mock when the  call it inside.How can I do that?EDITI followed the solution "Martijn Pietersâ™¦" gave, and implement code like below:a.pyb.pytest1.pyresultIt print out "1", not 10....I tried to change  to  to check whether it import correctly, and  occured error(something like ) so I think  works well Still doesn't work..
You are patching the wrong reference to ; the  module has a direct reference to the function, which patching  won't touch. Patch it in :Also see the Where to patch section of the  module documentation. There is no point in using  in your test, there is little point in testing your mock.


Answer URL
https://docs.python.org/3/library/unittest.mock.html#where-to-patch
