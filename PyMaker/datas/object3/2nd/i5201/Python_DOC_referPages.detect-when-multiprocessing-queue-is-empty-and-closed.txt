Natural Text
Let's say I have two processes: a reader and a writer. How does the writer detect when the reader has finished writing values?The  module has a queue with a close method that seems custom-built for this purpose. But how do you detect when the queue has been closed?This doesn't seem to work, as the writer never exits:Should the reader-writer pair use a sentinel value to signal end of writing? Then what's the point of having the  method?EDIT: While this question asks about the Queue module (now queue), I am asking specifically about  and what the correct use of the  method is.
But how do you detect when the queue has been closed?You don't. That is not the purpose of . Calling  doesn't even guarantee that no more items will be added to the queue; the docs sayIndicate that no more data will be put on this queue by the current process. is intended to shut down the current process's feeder thread for that queue (or at least start shutting it down), not to communicate an end-of-queue to other processes.If you want to signal that no more values will be written to the queue, use standard techniques like enqueueing a sentinel object, like you would with an ordinary .


Answer URL
https://docs.python.org/3/library/multiprocessing.html#multiprocessing.Queue.close
https://docs.python.org/3/library/queue.html
https://docs.python.org/3/library/multiprocessing.html#multiprocessing.Queue.close
