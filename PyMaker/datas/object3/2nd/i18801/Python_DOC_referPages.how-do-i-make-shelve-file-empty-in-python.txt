Natural Text
I have created a shelve file and inserted a dictionary data. Now I want to cleanup that shelve file to reuse as a clean file.
Shelve behaves just like a dictionary, thus:Alternatively, you can always remove the file and let shelve create a new one.
 is the easiest, and should be valid, but seems to not actually clear the shelf files (Python 3.5.2, Windows 7 64-bit). For example, the shelf  file size grows every time I run the following snippet, while I would expect it to always have the same size:Update: , which  uses as its underlying database under Windows, contains this TODO item in its code:reclaim free space (currently, space once occupied by deleted or expanded items is never reused)This explains the ever-growing shelf file problem.So instead of , I'm using  with . Quoting  documentation: The optional flag parameter has the same interpretation as the flag  parameter of dbm.open().And  documentation for :Always create a new, empty database, open for reading and writingIf the shelf is already open, the usage would be:
none of these really work What I ended up doing was creating a function to handle the file deletion.   
I think this is what you're looking for.


Answer URL
https://docs.python.org/3/library/shelve.html#shelve.open
https://docs.python.org/3/library/dbm.html#dbm.open
