Natural Text
Is there an established approach to embed gettext  in a PYZ bundle? Specifically to have Gtks automatic widget translation pick them up from within the ZIP archive.For other embedded resources  or / work well enough. But system and Python gettext APIs depend on  being supplied a plain old ; no resources or strings etc.So I couldn't contrive a workable or even remotely practical workaround:Virtual / pathsNow using  IRIs would be an alternative to read other files directly from a zip. But glibs g_dgettext is still just a thin wrapper around the system lib. And therefore any such URLs can't be used as .Partially extracting the zipThat's how PyInstaller works I think. But it's of course somewhat ridiculous to bundle something as .pyz application, only to have it preextracted on each invocation.Userland gettext / extractionNow reading out the message catalogues manually or just using trivial dicts instead would be an option. But only for in-application strings. That's again no way to have Gtk/GtkBuilder pick them up implicitly.Thus I had to manually traverse the whole widget tree, Labels, text, inner widgets, markup_text, etc. Possible, but meh.FUSE mountingThis would be superflaky. But of course, the zip contents could be accessed  etc. Just seems like a certain memory hog. And I doubt it's gonna stay reliable with e.g. two app instances running, or a previous uncleanly terminated. (Like dunno, due to a system library, like gettext, stumbling over a fragile zip fuse point..)Gtk signal/event for translation(?)I've found squat about this, so I'm somewhat certain there's no alternative mechanism for widget translations in Gtk/PyGtk/GI. Gtk/Builder expects and is tied to gettext.Is there a more dependable approach perhaps? 
This my example Glade/GtkBuilder/Gtk application. I've defined a function  which transparently translates glade xml files and passes to  instance as a string.  I've archived my locale directories into  which is included in the  bundle.This is contents of  To make the locale.zip as a filesystem I use ZipFS from fs.  Fortunately Python  is not GNU gettext.  is pure Python it doesn't use GNU gettext but mimics it.  has two core functions  and . I've redefined these two in a seperate module named  to make them use files from the .   uses  , and  to find files and open them which I replace with the equivalent ones form  module.  This is contents of my application.  Because  files have text, usually a shebang, prepended to it, I skip this line after opening the  file in binary mode. Other modules in the application that want to use the  function, should import  instead from  and make it an alias to .  Here goes .  The following two shouldn't be called because  doesn't use Python .  


Answer URL
https://docs.python.org/3/library/locale.html
