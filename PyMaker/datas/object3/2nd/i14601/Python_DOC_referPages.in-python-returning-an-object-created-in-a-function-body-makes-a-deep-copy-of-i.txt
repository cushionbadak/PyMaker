Natural Text
I'll try to clarify:For example, I make a function that locally creates a list, and return it. How does Python create the returned list that exist outside the function body ? Does it use "deepcopy" (or something similar) ?Here, the returned list  still contains the sublists. And  and  still reference the same sublist (which is normal Python behavior). So the list and its structure were copied.And if I call once again  :A new list  has been created, but  is unaffected, which means it does exist outside the function, and its sublists are its own, not references to sublists that would still exist in the function body.So my question : does Python used deepcopy or something similar to make  ?Not matter what kind of object I return with a function, it will be unaffected by subsequent call to this function ?(as long as the object was created locally in the function)Do not hesitate to tell me if I'm not clear enough.Thanks,
When you run the function the second time, the entire function is rerun - it has no memory along the lines of "last time,  was ".You haven't copied the list . You've created it twice.Note that if you use a caching decorator like , you'll get surprising results:Because in this case, python does have a memory of the previous result, and returns the same object
This might not directly answer this question but should help clarify related concept. If you create a nested object inside a function and return it, the object will continue to exist. It would not go out of scope even though the function ended. Example Code Output A dict, , is assigned to  variable of a Class object . The dict is not created again in memory but a  takes place.  points to the memory location of . When you return object  at the end of this function,  goes out of scope but the memory address used by it, , is still pointed by  in the returned object . So, the dict values  are preserved in memory. 
Variables in Python are pointers to objects. So a function would return a pointer to an object created in the function, obviating the need for copying return values.


Answer URL
https://docs.python.org/3/library/functools.html#functools.lru_cache
