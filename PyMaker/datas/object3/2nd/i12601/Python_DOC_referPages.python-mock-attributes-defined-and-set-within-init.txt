Natural Text
I am trying to write some unit tests for an application and I using python mock. I am familiar with other mocking libraries and haven't had much trouble until now. I am trying to mock a chained call on an attribute set within the init block of the parent class. Here is an example of what I need:I need the chained call to throw an error. I have tried resolving this in the following manner:The last assertion fails so I am pretty sure this isn't the way to do this. I have also tried:That throws the error:I cannot make alterations to the code under test, so my question is how can I mock chained calls made on attributes set under the _init__ function? I have read that this is not possible but surely there must be a work around? Can I perhaps somehow instruct the mock fixture to react to the call itself rather than the attribute object via autospec?
 instance attribute is set by  so the patched static value that you set by  call in  call will  be override by  call.You should patch  instance instead:Another possibility is to patch directly I'm not sure where your objects are and so how you should patch them: take a look at where to patch to understand how you should use  calls.


Answer URL
https://docs.python.org/3/library/unittest.mock.html#where-to-patch
