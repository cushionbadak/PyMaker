Natural Text
How can I send an email with a file attached where the file name contains unicode characters? Up to now, the file will arrive but with the filename "noname". This is the part that works perfectly well for ASCII filenames: First tryAdding a tuple of encoding, language and encoded string and not only the filename.Second try:Setting the charset globally like this:Third tryUsing  Fourth tryUsing  to urlencode the filename. This has the same effect on the filename as the third method. Any ideas?Am I missing something essential about RFC2231 filename character encoding? I use Gmail's SMTP server and python 2.7. 
Instead of telling the server that it's UTF-8 like this:...it works when I just send UTF-8 without telling so: The file name will be properly displayed. This seems to contradict the documentation which states:If the value contains non-ASCII characters, it must be specified as a  three tuple in the format (CHARSET, LANGUAGE, VALUE), where CHARSET is  a string naming the charset to be used to encode the value, LANGUAGE  can usually be set to None or the empty string (see RFC 2231 for other  possibilities), and VALUE is the string value containing non-ASCII  code points.This doesn't work, however the python 3 documentation adds: . If a three tuple is not passed and the value contains non-ASCII  characters, it is automatically encoded in RFC 2231 format using a  CHARSET of utf-8 and a LANGUAGE of None.Only this works, even for python 2.7, though it's not mentioned in the docs. 


Answer URL
https://docs.python.org/3/library/email.message.html
