Natural Text
I'm creating a basic system that allows users to reply to a thread on the website via email. However, most email clients include the text of the previous emails in their reply emails. This text is unwanted on the website.Is there a reliable way in which I can extract only the new message, without prior knowledge about the earlier emails? I'm using the  class of Python.Example message:This is a reply message from gmail, I'm sure other clients might do it differently. A good start would probably be to ignore the lines that start with , but there could also be lines like that in between the new message, and then they probably should be kept. I'll also still have the content-type line and the date line.
The formatting of email replies depend on the clients. There is no realiable way to extract the newest message without the risk of removing too much or not enough.However, a common way to mark quotes is by prefixing them with  so lines starting with that character - especially if there are multiple at the very end or beginning of the email - are likely to be quotes.But the  from your example is hard to extract. A line ending with a  right before a quote might indicate that it belongs to the quote, you cannot know that for sure - it could also be part of the new message and the colon is just a typo'd  (on german keyboards  is ).
I think this should work
The answer @LAMRIN TAWSRAS gave will work for parsing the text before the Gmail date expression only if a match is found, otherwise an error will be thrown. Also, there isn't a need to search the entire message for multiple date expressions, you just need the first one found. Therefore, I would refine his solution to use :


Answer URL
https://docs.python.org/3/library/re.html#re.search
