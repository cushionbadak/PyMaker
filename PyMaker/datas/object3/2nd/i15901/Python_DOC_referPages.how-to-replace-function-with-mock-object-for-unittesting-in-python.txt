Natural Text
How do you replace all references to a function with a mock object in Python?I'm trying to write some unittests for a Fabric script. Specifically, I want to replace  with a mock version that logs the command instead of executing. However, I want to do this in a way so I don't have to rewrite all code that references fabric.I've tried doing:but since I can't guarantee this will run before any other modules import fabric.api, a lot of code is still using the real  function.
If your code uses:you will have to patch the local reference your module has of the run function:If your code uses:you will be able to patch the original copy:See this nice explanation.
use 


Answer URL
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch
