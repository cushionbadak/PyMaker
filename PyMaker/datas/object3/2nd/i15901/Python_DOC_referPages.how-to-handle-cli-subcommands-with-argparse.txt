Natural Text
I need to implement a command line interface in which the program accepts subcommands.For example, if the program is called “foo”, the CLI would look like and  must be used with at least one of their options and the three  arguments are always exclusive.I am trying to use subparsers in argparse, but with no success for the moment. The problem is with , that has no arguments:if I try to add the subparser entry with no arguments, the namespace returned by  will not contain any information telling me that this option was selected (see the example below).if I try to add  as an argument to the  (not the subparser), then argparse will expect that the  argument will be followed by any of the subparsers arguments.Is there a simple way to achieve this with ? The use case should be quite common…Here follows what I have attempted so far that is closer to what I need:
First of all subparsers are never inserted in the namespace. In the example you posted if you try to run the script as:where  contain the code you provided (with the  at the beginning and  at the end).Note that there is no mention to  only to its argument. This is by design.As pointed out in the comments you can add that information passing the  argument to the  call.The usual way to handle these circumstances is to use the  method of the subparsers:Which results in:In general different subparser will, most of the time, handle the arguments in completely different ways. The usual pattern is to have different functions to run the different commands and use  to set a  attribute. When you parse the arguments you simply call that callable:
The subparser identity can be added to the main  if the  command is given a .From the documentation:However, if it is necessary to check the name of the subparser that was invoked, the dest keyword argument to the add_subparsers() call will work:By default the  is , which keeps  from adding the name to the .


Answer URL
https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.add_subparsers
https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.set_defaults
