Natural Text
I have a question posted here, and I got it resolved.My new question has to do with the code at the end that iterates through the modules in the directory and loads them dynmaically:In most of the classes I am reading a PDF from a website, scraping the content and setting the text that is subsequently returned by GetText().In some cases, the PDF is too big and I end up with a Segmentation Fault. Is there a way to monitor the threads to make them time-out after 3 minutes or so? Does anyone have a suggestion as to how I implement this?
The right way to do this is to change the code in those classes that you haven't shown us, so that they don't run forever. If that's possible, you should definitely do that. And if what you're trying to time out is "reading the PDF from a website", it's almost certainly possible.But sometimes, it isn't possible; sometimes you're just, e.g., calling some C function that has no timeout. So, what do you do about that?Well, threads can't be interrupted. So you need to use processes instead.  is very similar to , except that it runs the code in a child process instead of a thread in the same process.This does mean that you can't share any global data with your workers without making it explicit, but that's generally a good thing. However, it does mean that the input data (which in this case doesn't seem to be anything) and the output (which seems to be a big string) have to be picklable, and explicitly passed over queues. This is pretty easy to do; read the Exchanging objects between processes section for details.While we're at it, you may want to consider rethinking your design to think in terms of tasks instead of threads. If you have, say, 200 PDFs to download, you don't really want 200 threads; you want maybe 8 or 12 threads, all servicing a queue of 200 jobs. The  module has support for process pools, but you may find  a better fit for this. Both  and  let you just pass a function and some arguments, and then wait for the results, without having to worry about scheduling or queues or anything else.


Answer URL
https://docs.python.org/3/library/multiprocessing.html#the-process-class
https://docs.python.org/3/library/multiprocessing.html#exchanging-objects-between-processes
https://docs.python.org/3/library/concurrent.futures.html
