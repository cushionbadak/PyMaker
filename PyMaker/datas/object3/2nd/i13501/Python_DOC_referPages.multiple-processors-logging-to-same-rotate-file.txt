Natural Text
I hit a problem with my nginx+uwsgi+django site.I know it's nothing special to django+uwsgi, should be something with logging module itself.Within my site, I use RotatingFileHandler to log special entries, but, when uwsgi running with multiple worker processors,today i find that,multiple log files are changing at the same time. For example, here is file snippet:Actually, I set rotate file to 10M perfile and upto 10 files.I googled a lot and many people hit this before, seems logging module itself cannot support this.And I find someone mentioned ConcurrentLogHandler(https://pypi.python.org/pypi/ConcurrentLogHandler/0.9.1).Anybody uses this guy before? I see it's based on file lock, I don't know if this guy's performance is good enouth.Or anyone has better idea to log multiple uwsig instances to same rotated file ?Thanks.Wesley
Just for the heck of it, here is a complete solution example which uses python StreamHandler, uWSGI "daemonized file logging", and  daemon to log to file with rotation.As you will see, uWSGI logging captures stdout/stderr from your app and redirects it either to stdout/stderr (by default) or to other logger/handlers as defined.Setup Django/uWSGIYour Django Somewhere in your codeRun uWSGI with some logging paramsOutputExcerpt of test.logIn the same dir, after a while:LogrotateAlternatively, to handle rotating the files yourself, omit the  parameter and use a  config file ():Please note, the above values are for example sake, you probably don't want the rotate size at 10k. For more info on the logrotate format, see an example blog post.


Answer URL
https://docs.python.org/3/howto/logging-cookbook.html#logging-to-a-single-file-from-multiple-processes
