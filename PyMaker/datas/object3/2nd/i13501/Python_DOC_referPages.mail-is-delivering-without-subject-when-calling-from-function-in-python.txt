Natural Text
I have a sample code like following:when I am sending the email it is delivering without the subject But if I use the code instead of a function call - then it is delivering fine with subject. Anything I am missing in a function call. Please suggest.
The issue you're having is with the triple-quoted multi-line string. When you put it in your function, you're indenting all of its lines so that they line up with the rest of the code. However, this results in unnecessary (and inappropriate) spaces at the start of each line of the message after the first.Leading spaces in the headers of an SMTP message indicate that the previous header should be continued. This means that all of your first three lines are combined into the  header.You can fix this either by leaving out the leading spaces:Or by using  instead of real newlines in your string:Or finally, you could keep the current code for the generation of the message, but strip out the leading whitespace afterwards:This last option is a bit fragile, as it may strip out desired whitespace from lines in your  string (if it had multiple lines), not only the spaces added due to the multi-line string. It also will break if you're using tabs for indentation, or really anything other than four spaces. I'm not sure I'd actually recommend this approach.A better version of the last approach is to use the  function from the the standard library. It removes any indentation that is present at the start of every line in a string (but only the indentation that is common to all lines). This does require a small change to how you were creating , as you need the first line to have the same leading spaces as all the rest (you'll also need to avoid adding any newlines without indentation in the extra text that comes from ).Here's the code:


Answer URL
https://docs.python.org/3/library/textwrap.html#textwrap.dedent
