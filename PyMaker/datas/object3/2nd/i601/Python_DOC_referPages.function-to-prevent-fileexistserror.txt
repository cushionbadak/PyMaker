Natural Text
I have this function to prevent . It creates a folder, but if there is another folder with the same name, it will add an sequential number to the name of that folder.I am able to make the folder, and if i create another folder with the same name, i will set the name to , but if a create it again it will raise :I think the error is in the  loop but i don't know how to fix it.
The error you are getting is a result of folder_number being set to 1 outside of the exists check. Every time it attempts to prevent the  it tries to solve the problem by creating the folder name with a " (1)" appended to it. If that already exists, then you get the  anyway.As with many things in python, there are many different ways to fix this issue. The easiest way that I could make it work while still resembling your function's logic would be to combine your while loop with your os.path.exists check, so that while the check for the path already existing return True, the while loop increments the number in the parentheses. After the exist check returns False, it will perform the create folder operation. This is an example of the Look Before You Leap (LBYL) principle:There is a also a principle in python that is commonly implemented that could help you out here too called Easier to Ask Forgiveness than Permission (EAFP). Basically, you could wrap the os.makedirs(path) operation inside of try.. except statement.That would look like this:Here the path is modified if a FileExistsError occurs and then the continue statement tells the while loop to "continue" instead of exiting.
The assignment of a new path name with the incremented number should be inside the  loop so that  can be updated, and the condition for the  loop needs only the returning Boolean value  method:
Your code has two issues. The first is that the condition of your  loop doesn't make any sense. You're doing , but the function call returns either  or , neither of which will ever equal the path string. You should just use  as the condition.The second issue is that you're not updating  inside the loop. You need to move the line that updates it to account for the incremented folder number so that you don't keep checking the same  over and over forever.Here's how I'd rewrite that code:I made a few other changes, beyond the ones causing your current error. I got rid of the  statement which was completely unnecessary, since the  loop will not run it's body if the condition is falsey on the first go. That means the  call is unconditional. In addition to indenting the path-updating line, I also rewrote it to just use one formatting operation, rather than also doing some concatenations. I also reordered it relative to the increment step, so that you'll start numbering at , rather than . And finally, I added a  statement to the end, as you're probably going to want to use that folder you just created, and without returning the final path, the calling code will not know what number we had to increment up to.


Answer URL
https://docs.python.org/3/glossary.html?highlight=lbyl
https://docs.python.org/3/glossary.html?highlight=eafp
