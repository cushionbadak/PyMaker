Natural Text
I use gunicorn to run 2 process of my flask app.And I use filerotatingfilehandler to rotate log file.The problem is when one process rotates the log file,the other doesn't know,and later it rotate the file(now named log.txt.1) again(to log.txt.2,and may change log.txt to log.txt.1).Then one process logs in log.txt while the other logs in log.txt.1.I know I could use watchedfilehandler + logrotate to solve the problem.But could I still use rotatingfilehandler and detect the file name change?
You could use a distributed global lock to prevent the double rotation, like this example gist.However, I recommend using WatchedFileHandler like this in your Flask app:Then use a cron script or file watching daemon to rotate your logfiles by renaming them.


Answer URL
https://docs.python.org/3/library/logging.handlers.html#watchedfilehandler
