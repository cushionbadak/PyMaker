Natural Text
I'm using  to query Gmail's IMAP, but some requests are taking more than 60 seconds to return. This is already done in a task, so I have a full 10 minutes to do the request, but my tasks are failing due to the 60 second limit on . I've tried setting , but it doesn't seem to do anything. Here's a stacktrace:
Which kind of DeadlineExceededError?There are three kinds of  in AppEngine.https://developers.google.com/appengine/articles/deadlineexceedederrorsgoogle.appengine.runtime.DeadlineExceededError: raised if the overall request times out, typically after 60 seconds, or 10 minutes  for task queue requests.google.appengine.runtime.apiproxy_errors.DeadlineExceededError: raised if an RPC exceeded its deadline. This is typically 5 seconds,  but it is settable for some APIs using the 'deadline' option.google.appengine.api.urlfetch_errors.DeadlineExceededError: raised if the URLFetch times out.As you can see. The 10mins limit of  only help the. The type of  can be identified via traceback (list below). In this case, it is . Which will raise in 5secs by default. (I will update the post after figure out how to change it)TYPE 1. google.appengine.runtime.DeadlineExceededErrorThe traceback looks likeSolutionThis exception can be solved by using taskqueue (10mins), backend or manual scaling options.https://developers.google.com/appengine/docs/python/modules/#Python_Instance_scaling_and_classTYPE 2. google.appengine.runtime.apiproxy_errors.DeadlineExceededErrorThe traceback looks like     TYPE 3. google.appengine.api.urlfetch_errors.DeadlineExceededErrorThe traceback looks likeSolution:This exception can be solved by extend the deadline.https://developers.google.com/appengine/docs/python/urlfetch/fetchfunction
There's no mentioning of timeout in imaplib sources. So there are several options:IMAP uses socket library to establish the connection, consider usingsocket.setdefaulttimeout(timeoutValue) but if you do so beaware of side-effects.The second option is to create your own IMAP4 class child withtunable timeout, shall we say in open function
From the Google App Engine documentation, it seems like there are manypossible causes for .In your case, it seems that it may be one of the last two (out of three) types of  presented on the page.


Answer URL
