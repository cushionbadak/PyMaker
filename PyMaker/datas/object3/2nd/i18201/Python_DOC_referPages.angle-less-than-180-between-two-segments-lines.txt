Natural Text
I need to find the 'inner' angle in degrees between two segments (lines), the less than 180 degrees that is.Any fast way to do it in python2.7? (Shapely doesnt seem to have a function for this)segment1 is x1,y1,x2,y2segment2 is x3,y3,x4,y4
I originally suggested using the law of cosines in vector form: if your two line segments are given by the vectors b and c, and the angle between them is θ, thenb · c = |b| |c| cos θand soθ = cos−1((b · c) / |b| |c|) But as Alex Wien points out in comments, this gives poor results when θ is close to zero:which is a relative error of getting on for one part in ten thousand. For very small angles you can get 100% relative error:An alternative formula uses the arc tangent instead of the arc cosine:θ = tan−1(|a × b| / (a · b))and this gives a more accurate result for small angles:(The alternative formula follows from the property of the cross product that |a × b| = |a| |b| sin θ. Divide this by the law of cosines to get the result used here.)


Answer URL
