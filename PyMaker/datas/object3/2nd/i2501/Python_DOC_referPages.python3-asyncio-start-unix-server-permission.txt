Natural Text
The software that I run due to special circumstances will be running as a daemon with root privilege. The software will also have API so that normal user can access it without "sudo" everytime ( API is read-only and can only be accessed from localhost ). Then wasting a TCP port with random number TCP port that might be forgotten in the future, I prefer to use a UNIX socket, since it will be run on Linux. I'm using asyncio module to start_unix_server method, but I have trouble with Unix socket file permission since the software starts as root privilege the socket file has "srwxr-xr-x root root" permission and I cannot connect to this file unless I use "sudo".I check that start_unix_server doesn't have any option to change permission, but has sock parameters that accept socket object. So here is what I do and succeeded, but not sure whether this is intended to be done like this
To avoid creating your own socket, you can use the  parameter to  (documented under its lower-level relative ):Another option is to use , but with the caveat that  affects all threads in the process, so if you have background threads that can create files, they could be affected by the  change.


Answer URL
https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.AbstractEventLoop.create_unix_server
https://docs.python.org/3/library/os.html#os.umask
