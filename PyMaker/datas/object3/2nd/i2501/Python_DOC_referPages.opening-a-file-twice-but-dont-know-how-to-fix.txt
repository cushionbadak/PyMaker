Natural Text
When I run this, it gives me the error    I know this is due to me opening the file twice, but I'm not sure how to fix this. Any help is appreciated. ThanksStacktrace
You have a couple of problems here.File object goes out of scopeYour first time calling  on the filename in a  block uses a context manager. Context managers manage the lifecycle of resources and ensure appropriate tidying operations are performed when leaving the block. In the case of a file, the context manager arranges for the  method on the file to be called automatically.The following code:is approximately equivalent, for the purposes of this answer, to:Accordingly, appending the file object  to a list and attempting to use it outside the  block will not work. The file will be closed and any subsequent operations on the stream will not be possible (docs).'s first argument should be a string,1 not a file object1or, more correctly, a path-like object â€“ see belowYour code crashes before encountering the issue identified above because you attempt to pass a file object to the  method. This is incorrect; 's first argument, , is defined in the docs as follows: is a path-like object giving the pathname (absolute or relative to the current working directory) of the file to be opened or an integer file descriptor of the file to be wrapped. (If a file descriptor is given, it is closed when the returned I/O object is closed, unless closefd is set to .)A path-like object is defined thus:An object representing a file system path. A path-like object is either a  or  object representing a path, or an object implementing the  protocol.The simplest value to pass to  is a string denoting the path to a file on your machine. The file object you pass to  is of type , which is not a path-like object, and cannot be used in the call to :Correct approachThere are several ways to fix this; the simplest is simply to open the file once and avoid the double loop, which I see to be of no benefit to you in the example you supplied. For example, the following code should not exhibit this issue:


Answer URL
https://docs.python.org/3/reference/datamodel.html#context-managers
https://docs.python.org/3/library/io.html#io.IOBase.close
https://docs.python.org/3/glossary.html#term-path-like-object
