Natural Text
I'm making a program which deletes certain lines from an existing file. It takes file1 as entry(f1), it looks for a certain pattern and if it finds it, it modifies the line (to make it compatible with the other file) and saves this modification in a variable 'mark'. It opens another file f2, and searches 'mark' in it. If it finds 'mark' in a certain line in f2, I have to delete that line and the three lines after. The thing is that when I run it, the program deletes everything from f2, so I get an empty file as a result. I tried with the next() function as well, but I got the same result and a 'stop iteration' error.
The thing is that when I run it, the program deletes everything from f2, so I get an empty file as a result.Whenever you open a file for writing, everything in it is lost. You have to re-write everything you wish to preserve in the files and exclude what you wanted to delete in the first place.Notice these lines:The problem is that  is opening the same file as  for writing for every loop on the lines of file .Basically, after you add lines, you re-open the file for writing, eliminating what you had previously.First: You should remove the  from within the loop iterating on each line of  (i.e. do this at some other location outside this loop). This is the main issue.Second: Use a temporary file for the process instead and, at the end, rename the temporary file to the one you had.Third: You're not closing the files. Consider using context managers. Your code would look more like this:Fourth: Follow the PEP-8 style standards for your code. Everyone reading your code will thank you.I got [...] a 'stop iteration' error.This is normal; you said you were using the  function. Iterators and  raise  in order to signal that they cannot produce more elements from the collection being iterated and that this iteration process should stop.Quoting the docs:Raised by built-in function  and an iteratorâ€˜s  method to signal that there are no further items produced by the iterator.


Answer URL
https://docs.python.org/3/library/exceptions.html
