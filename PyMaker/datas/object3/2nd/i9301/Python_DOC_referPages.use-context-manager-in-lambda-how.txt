Natural Text
How can I use a context manager in a lambda? Hacks accepted. Defer opinions about this being a bad usage of lambdas.I know I can do this:But I would like to do something like this:
You can't replace the work  does with an expression, no. There are no hacks to get you there either, because there is no way to handle exceptions and finalisation within an expression.That's because you can only use one expression in a lambda.  is a statement, not an expression. You'd have to replace that with exception handling () and calls to the  and  methods (storing the  method first). However, exception handling can only be done with statements, because an exception ends the current expression immediately. See Python Try Catch Block inside lambda.Your only option is to stick to using a proper function instead.
One possible workaround for getting lambdas working with a context manager is to make the context manager a , then both  statements and  expressions will work because a lambda can use the decorator pattern instead.Example


Answer URL
https://docs.python.org/3/reference/datamodel.html#with-statement-context-managers
