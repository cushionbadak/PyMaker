Natural Text
I have put together some code from this link which is nicely colour coded with 4 minor changes to fix some errors. I also used some code from 2 previous forums. What the code is supposed to do is calculate the semantic similarity between consecutive sentences across a whole text then display all the similarity values obtained like this;'the yellow door.', 'The red hammer' 0.65'pink fox in the woods.', 'commander fox is blue.' 0.32Here is the code;THIS IS THE LOOPING PARTWhen I run the code on a text file I get an error code and instead of obtaining a number for the value of similarity between sentences, I get nan;In a previous forum, I understood that this error probably meant that I was dividing by zero so we have a zero vector. I am pretty much stuck there and with limited python experience, I don't know how to fix the program easily and without changing too much.
My guess is that you are passing an empty string. Do you have any blank lines in your text? You don't strip the newline until after checking for empty string, so a string containing only a newline will not be caught.Since you appear to be on Windows, there also might be '\r\n' style newlines, so your  might not work as expected.I'd recommend adding the following modification (also do a print for debugging):Note that the code appears to have a bug, because you are not comparing sentences pairwise. That is, if you had sentences [a, b, c, d], you are only comparing (a, b) and (c, d), but you really want to compare (a, b), (b, c), (c, d).You can clean this up a bit by using the itertools library:


Answer URL
https://docs.python.org/3/library/itertools.html
