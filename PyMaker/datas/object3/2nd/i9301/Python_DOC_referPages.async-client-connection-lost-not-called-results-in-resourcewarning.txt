Natural Text
I am using asyncio client to connect and then disconnect from server. If I connect to server program on the same computer, connection closes fine. Add: When I started writing data to connection, this connection also started giving warnings sometimes. See second code version below.If I connect to device on the local network, I get  for unclosed transport.How do I close the connection correctly?I am using Python 3.6.0 (32-bit) on Windows 7 (64-bit).First attemptRelevant code:Console output:Second attemptI did following changes to the code:Removed  from Write some data to connectionAdded  and   callbacksAdded more debug logsObservations:I tried adding  to , but it will always result in . Note: This probably another problem, so let's ignore this for now, and assume I won't do this.When writing some data to socket, localhost connection also started to give warnings, but not always.When it gives warning,  is not called. Why?Modified code:Output when it succeeds:Output when it fails (note the lack of ):
Either wait for the server to close your connection, or use  to close the transport.  This will also trigger  (Don't call  from !):If you try a little more, you might get some s for your local machine as well.  For example, try adding  before  or make your local server respond slower.
Try running the loop a little more.  Here is an example using  and , assuming echo servers on local and remote machines:


Answer URL
https://docs.python.org/3/library/asyncio-protocol.html#tcp-echo-server-protocol
