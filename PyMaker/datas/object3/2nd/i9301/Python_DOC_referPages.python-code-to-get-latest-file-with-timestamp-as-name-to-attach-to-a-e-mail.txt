Natural Text
I have a BASH script that takes a photo with a webcam.I have a python code to take run the BASH script when recieve a signal from a motion detector and also call a module wich send the e-mail And the mail code:I have just learned how to attach a file to a e-mail.The code works so far. But I would like to get the latest photo taken and attach to the email.I am still just a beginner in Python. The code in here I have mostly copied from various tutorials and changed a little bit to work for me. I have no deep understanding in all of this. In some few parts I may perhaps have intemediate knowledge.I have no idea how to write the code to get python to find the file (photo with jpg format) I want and attach it to the mail.So I am very glad if there is someone who can guide me how to fill in the missing part. I put in wrong code for the mail function. I got a little bit better result with this one:Edit.Hello. I have now added seconds to the filename. If there is no picture in the folder when running glob.glob("/home/pi/.jgp") I got: Traceback (most recent call last):  File "", line 1, in     last_photo_taken = glob.glob("/home/pi/.jpg")[-1]IndexError: list index out of range.  When I take a picture I got a return ('/home/pi/2017-01-16-23:39:46.jpg'). If I then takes another picture the return still is '/home/pi/2017-01-16-23:39:46.jpg'. If I restart the shell I got the next picture as return. Thank you for your help  today. I will write more tomorow.
Here's an example of some code to list all files and folders in a specific folder:And here's one way to take that list and filter for names that match a specific regular expression (I've used filenames of the format YYYYMMDD-HHMM.jpg, but you can change that):Now we need to sort by date/time because the list is in arbitrary order. Note that all my filenames are of the form YYYYMMDD-HHMM.jpg, so we can easily sort it by date/time, as follows:And finally, the newest JPG filename is the last in the list:Hope this gets you started. Note that I've assumed that you may have other JPGs in the same folder so a listing of *.jpg might yield undesirable files,  and that's why I gave a general solution using regular expression matching. If you don't have other JPGs then you could use glob("folder/*.jpg").
the format you chose  has the nice property to have the same sort order alphabetically or date-wise.So since your files are located in  and have the jpg extension, you could compute the last photo like this:Attach the  file to your e-mail.Note: photos taken at the same minute will overlap: last photo overwrites the previous one. You should consider adding seconds to the file name.Note: even if your files weren't conveniently named with the date, you could sort the images by modification date and take the last one:


Answer URL
https://docs.python.org/3/library/glob.html
