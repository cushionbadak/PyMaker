Natural Text
How can I ensure that my static files served during development are using utf-8?I have a static handler like so:But, I've noticed that utf-8 characters show up garbled in the browser during development. The same files show up fine when served via nginx in production.EDIT:The content in question lives in a webpack .js file. I've tested serving this bundle with both nginx and node and the problem goes away. But, to keep development simple, I'd like to use just aiohttp rather than having to spin up a second process.
Content encoding is determined by  header which in turn uses  for finding a type based on file extension.It does nothing with text character encoding. Figuring out plain text encoding is quite expensive procedure (need processing reading file content by tool like ) and not 100% stable (a file can contain multiple encoding).P.S. Static file support in aiohttp is for handling resources like images, not human readable plain texts. HTML should be rendered correctly though.


Answer URL
https://docs.python.org/3/library/mimetypes.html?highlight=guess_type#mimetypes.guess_type
