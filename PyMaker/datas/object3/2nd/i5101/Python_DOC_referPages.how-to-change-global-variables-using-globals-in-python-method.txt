Natural Text
If I have the following Python script foo.py :I can type this in ipython :However, If I remove the foo() at the bottom :And I type this in ipython :I get this error. Why is this the case?
IPython's  defaults to running the file in a new namespace and then copying the results into your namespace.When  contains a  call, that creates , , and  variables in the new namespace that IPython then copies to your namespace.When  doesn't contain a  call, you can call  yourself, but  is still using its original namespace for globals. Calling  creates , , and  variables in 's original namespace, too late for IPython to pick them up and copy them into your namespace.You can use  with the  flag to run the file in your namespace directly, avoiding these issues.
You need to declare  a global variable before assigning it.  Once you have an assign statement anywhere within a function, the variable being assigned is declared on a local scope only, unless otherwise specified.  In your case,  is declared locally due to .See the documentation for more details.To actually reference the global variable:will update the  from the global scope.


Answer URL
https://docs.python.org/3/tutorial/classes.html#scopes-and-namespaces-example
