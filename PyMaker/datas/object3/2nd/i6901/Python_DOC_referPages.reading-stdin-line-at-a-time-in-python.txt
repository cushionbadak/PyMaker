Natural Text
I am trying to test a particular chat program by sending a series of commands and capturing the output. How can I pass:I have tried this:but it just prints the first part while for the second I get nothing. It enters into an endless loop instead.the python program's code is:I should mentioned that this is not the complete program but it is the part where it helps recreate the exact same effect.
Your example goes to loop because after  stdin is closed and  always returns empty.Also you shouldn't use another blocking call with . If you woulduse it on more than one object, you could still be blocked by from the previous event.For reading a line at time from stdin you do not need to use. Possibly the simplest way to achieve that:If you want to use either  or a list of files as arguments toyour program, Python's moduleis out of the box solution.In case you want/need to use  anyways:When an object becomes ready,unblocks. The only object in this case is stdin. With more than oneobject you need to check the return value of  to find outwhich one is ready.  is used to do non-blocking read fromstdin (alternatively:it's possible to use  reading a character at a time). is used for finding newlines, note that it ispossible a single read yields more than one line.
After running  on , I created this:CommandOutputThis solution relies on this fact:If the end of the file has been reached, f.read() will return an empty string ('').See Methods of File Objects.If you need a version that uses :


Answer URL
https://docs.python.org/3/library/fileinput.html
https://docs.python.org/3/library/select.html#select.select
