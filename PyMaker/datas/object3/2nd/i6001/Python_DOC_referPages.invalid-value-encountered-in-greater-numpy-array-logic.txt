Natural Text
The question "Why do I get an invalid value ..." has been discussed a few times already. Here is another variant which I don't quite understand yet - this is why I am opening this thread:(1) in I get the correct result and no error is thrown.(2) However, inthe "Invalid value encountered in greater" warning is shown.This means that the short-circuiting (Python reference) in the boolean and expression does not work if this expression is used with numpy arrays.Digging a bit on stackoverflow (e.g. ref ) and elsewhere it seems that under the hood the array expression is written asThis means that both expressions are first evaluated for all elements before they are combined (indeed, this produces the same warning). Could someone please confirm that this is what is happening? And does anyone have asolution for this problem other than looping over all array elements? The context I am using this expression in is to set additional values in an array to nan if they exceed a threshold, i.e. the actual code has something like
This can do it, with some boolean indexing to avoid the  and a  statement
OK: seems I have found a solution myself:appears to work. Reference: [1]


Answer URL
https://docs.python.org/3/library/stdtypes.html#boolean-operations-and-or-not
