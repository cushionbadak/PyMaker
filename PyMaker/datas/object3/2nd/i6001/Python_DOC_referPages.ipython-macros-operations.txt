Natural Text
I am an engineer and I use a python REPL as an advanced calculator while working. I use the "previous output" feature of the REPL, which is _, often.Something like that.For some reason I find it kind of a chore to type the underscore though. I've used the Haskell REPL, which uses "it" as the previous output variable, which I find easier to type.I learned that iPython lets you define macros that execute some code. So I popped open an iPython shell and defined a %macro called "it" that mimics the "_".I can call "it" like so:However, when I try to do something with "it" like , I get the error .I want "it" to be the type it's returning instead of the type Macro, so that I can use it just like I use "_".
Instead of going the macro route you could also change the code where  gets assigned.  does this and can be changed:The display of these values can be customized by assigning another  one-argument function to sys.displayhook.So we can simply save in  or whatever name you like:This works in the normal python shell, but somehow ipython prevents with tampering with . The code in ipython that handles the displayhook is in  so we can monkey patch that:This is a bit hacky. Things may break, but after testing this for 5 seconds it seems that it works. You probably don't want to type that everytime you start ipython, but we can automate that. This answer says you can simply put a file into  which gets then executed everytime.
When I try that I getThe macro includes the '\n'.  So a stand alone  behaves ok. But it can't be used in-line.


Answer URL
https://docs.python.org/3/library/sys.html#sys.displayhook
