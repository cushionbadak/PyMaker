Natural Text
I have a python script that I want to delete some MongoDB documents when the  key date is over 30 days.My code currently is:This code runs with no errors but does not remove any documents and I believe this to be because the date in the  key has the date in Unix format i.e.  whereas the last_month variable uses a different format.The code which inserts the documents is:An example of the documents inserted is:
result = db.vulnerabilities.delete_many({'Published': last_month})First, the field names are case-sensitive. In your document you have  but in your query is capital  for . Also note that you store the dates in your document as String type, please use Python datetime object as much as possible. See also PyMongo Datetimes and Timezones for more information and examples. i.e. The value of  when you passed into the delete query is . If you were to convert this into String, it would be . As you can see both values are not what you expecting. Another advantage of storing the value as Date object is that you can utilise an expression for any dates passed 30 days i.e. See also datetime.strptime to convert string to datetime for example: Having said all the above, if you were intending to just expire a document past certain timestamp within MongoDB , please see MongoDB TTL Indexes and Tutorial: Expire Data from Collections by Setting TTL. 


Answer URL
https://docs.python.org/3/library/datetime.html
https://docs.python.org/3/library/datetime.html#datetime.datetime.strptime
