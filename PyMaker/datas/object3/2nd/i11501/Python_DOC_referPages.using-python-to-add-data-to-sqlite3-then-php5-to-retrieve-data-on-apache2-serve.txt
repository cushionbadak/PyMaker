Natural Text
*UPDATEDI am try to make a game for my son, it has 2 vibration sensors that represent Balls and Strikes (for baseball). When a sensor is hit I have a loop that adds a tick to either the strike or the ball. When a sensor is hit I want it also to enter into my sqlite db. then I have a php file that reads the sqlite db and displays the balls and strikes as they happen in realtime. I am using php5, sqlite3 and apache2 server. I have the server setup, the python script detects the sensors correctly and updates 2 variables, balls and strikes. I cannot seem to link to py file to the php file so when I navigate to basesloaded.php it execute's sensor.py. If I run the py script in idle first then navigate to the php page it updates correctly just wont run the py script from the php file.Here is my php script to retrieve the sqlite data - 
As mentioned in comments by @Parfait, you need to commit the updates for them to be persistent. Your PHP code is not seeing the updates because they were not committed.You can call  in your code, however, an easy way to guarantee that your updates are committed (or rolled back if there is an error) is to open the database with a context manager, i.e. using a  statement, for example:Now your updates will be automatically committed when the  statement terminates, in this case when the function  returns, or rolled back if an exception occurs.UpdateAs discussed in comments, there seems to be a problem with the event handling. I suspect that your code needs to explicitly keep running otherwise, once the main thread terminates, the whole program will terminate. You can do it like this:You need to have this Python script running all the time. It is independent of the PHP script which is run only in response to HTTP requests via your web server. You can run the Python script as a background process:Also, remove the  call from your PHP script.


Answer URL
https://docs.python.org/3/library/sqlite3.html#using-the-connection-as-a-context-manager
