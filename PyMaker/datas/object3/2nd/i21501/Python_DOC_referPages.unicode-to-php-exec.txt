Natural Text
I have a Python file I'm calling with PHP's  function. Python then outputs a string (apparently Unicode, based on using ), which is echoed by PHP. The problem I'm running into is that if my string has any special characters in it (like the degree symbol), it won't output. I'm sure I need to do something to fiddle with the encoding, but I'm not really sure what to do, and why.EDIT: To get an idea of how I am calling , please see the following code snippet:Python properly outputs the string when I call  by itself.EDIT: It definitely seems to be something either on the Python end, or in transmitting the results. When I run  on the returned values in PHP, I get 0. Can  only accept a certain type of encoding?
On php you can use methods like  or  to solve your problem.
Try setting the  environment variable immediately before executing the Python script per http://php.net/shell-exec#85095:(use of  to (hopefully) make it a little easier to follow the lengthy string)You might also/instead need to do this before calling , per http://php.net/shell-exec#78279:
I have had a similar issue and solved it with the following. I don't understand why it is necessary, since I though all is already processed with UTF-8. Calling my Python script on the command line worked, but not with exec (shell_exec) via PHP and Apache.According to a php forum entry this one is needed when you want to use :It needs to be called before  is executed. Also, it was necessary to set a certain Python environment variable before the exec command (found an unrelated hint here):My Python script evaluated the arguments like this: (Hint: That was required because I use a library to convert some arabic texts.)So finally, I could imagine that the original question could be solved this way:But I cannot tell anything regarding the return value. In my case I could output it to the browser directly without any problems.Spent many, many hours to find that out... One of the situations when I hate my job ;-)


Answer URL
https://docs.python.org/3/using/cmdline.html#envvar-PYTHONIOENCODING
