Natural Text
I need to verify if 'info' is a json file or a python dict. Given the fact that the json file and the python dict has the same structure I wrote this code to parse both and save their content in a variable but I think there is a pythonic and more efficient code. Anyone has more ideias?
First things first, don't just ; that's far too general, be as specific as you can about what has gone wrong. In this case, it's that the user hasn't provided the  parameter. Two problems with that:You should test for  by identity, not truthiness (otherwise e.g.  would be an exception, which may not be what you actually want): .If it's a required parameter, why give it a default value?!Revision 1:(Note minor style guide tweaks.)Next, there's really no need to provide this kind of polymorphism by allowing either a dictionary or a JSON string as the argument. As in the second case you're just parsing it to the first case, make that a class method, which is the common alternate constructor pattern in Python.Revision 2:Which part of:do you expect to raise a ? And why, in the case where it's not an acceptable type of input, would you want to just  something and let the program continue? Note that where you're checking types, it's better to use the ABCs.Revision 3:But actually, you're suggesting that it be loaded from a file, not the JSON string as your current code implies (you provide  not  - it's not clear what you expected  to make of that). So you need to handle that file.Revision 4:Now your examples become:
You need to open a file object at first if you pass a file and it will be better to separate file and string arguments:I would split it into two methods:But actually, it's more pythonic to use ducktyping style. 


Answer URL
https://docs.python.org/3/library/collections.abc.html
