Natural Text
Let's say I have the following string:And and I want to replace all occurances of  with a number that corresponds to the number of the match. So given the above string, the return value would be:I know there are lots of way to accomplish this in code (e.g. by writing a class with a counter that keeps track of the match index) but I'm wondering if this is possible through standard library functions alone.I suppose, more specifically, I'm wondering if you can get this information from the  object passed to the  function used in .
Read the docs for .  (and ) can take a function as the replacement parameter, not just a . If you pass a function (really, any callable) as the , it is called for each match with the match object as the sole argument.While the  object won't tell you how many matches have occurred, you can use the fact that it accepts any  to make your own class that will track it for you. For example:When you call /, you construct and pass  as the ; that initializes a new object with a fresh , and since it defines , it acts like a function with state; each time it matches and replaces, the object state is incremented so it will use the next number on the subsequent replace. When the  finishes, the object is disposed of, and creating another one for a subsequent  restarts the count.


Answer URL
https://docs.python.org/3/library/re.html#re.sub
