Natural Text
I implemented a serial protocol for an embedded device and to debug the code I compiled it on my host machine [Widows 7 MinGW] simply using stdin and stdout to communicate, now I want to hook it up to the controll software using a virtual null modem cable.I thought it could not be to difficult to write a python3 script that does exactly that taking the stdout of a program and forwarding it to a serial link while sending the data coming in serial to the stdin but, i can not get it running. Here is my best try [I replaced my executable with cat]:It does not work probably due to the two active threads accessing the Popen object. When I reduce the problem to only forward data from the serial link to the Popen object it works as intendedIs there a way to get it working?
The  method, when its argument is omitted, blocks until it has read all of the data from the stream, which doesn't happen until the subprocess exits.You should instead be reading as much as the OS will give you at any one time, e.g. with the  method.  That way, if you get a partial read (because the subprocess wrote or the user typed some data without closing the stream), you can immediately forward it, rather than buffering it in memory and waiting until the stream is closed.  For example:Note that in the case of , when reading from the serial port, the  does not have the same behavior of blocking until EOF if the argument is omitted.  Instead, it defaults to 1, and therefore will just try to read one byte for every call.


Answer URL
https://docs.python.org/3/library/io.html#io.BufferedIOBase.read
https://docs.python.org/3/library/io.html#io.BufferedIOBase.read1
