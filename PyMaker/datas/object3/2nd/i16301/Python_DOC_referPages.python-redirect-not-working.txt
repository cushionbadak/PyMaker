Natural Text
I'm trying to redirect the user to my homepage. Its suppose to be as simple as This isn't working for some reason. I'm running CGIHTTPServer on Kali Linux. I'm using Python 2.7.3When I try to run the script it simply prints out I have also tried using 127.0.0.1 instead of localhost. It doesn't work either.Here is the CGI script that I'm trying to run
You have 2 problems here:You always write the  header plus extra newlines at the start. You've now completed all headers and you can no longer add more.Write these headers only when you are not redirecting.A  header is only used for redirects, a status 30x HTTP response. You'll need to add a  header to signal to the web server to respond with a status other than 200.Adjusting your code to address these issues:Note that I altered the code somewhat to use some best practices:NEVER use string interpolation to put user-information into a SQL query. You'll get hammered by a SQL injection attack that way. Use SQL parameters to have the database driver escape the values for you.You can use the connection as a context manager to auto-commit.I used string formatting to produce the HTML output.
As the accepted answer states, you'll need a  or  header along with the  header to do your redirect properly.  Also, the Python built-in CGIHTTPServer "cannot execute redirects (HTTP code 302), because code 200 (script output follows) is sent prior to execution of the CGI script. This pre-empts the status code." (https://docs.python.org/2/library/cgihttpserver.html)Unfortunately this is also the case in Python 3.  (https://docs.python.org/3/library/http.server.html#http.server.CGIHTTPRequestHandler)There's a ticket about it (http://bugs.python.org/issue10487) but as of right now, there's no way to use the Status header.  This shouldn't be a problem with other CGI servers.


Answer URL
https://docs.python.org/3/library/http.server.html#http.server.CGIHTTPRequestHandler
