Natural Text
I'm checking a list of around 3000 telegram chats to get and retrieve the number of chat members in each chat using the  method.At some point I'm hitting a flood limit and getting temporarily banned by Telegram BOT. The  wiki gives a detailed explanation and example on how to avoid flood limits here.However, I'm struggling to implement their solution and I hope someone here has more knowledge of this than myself.I have literally made a copy and paste of their example and can't get it to work no doubt because i'm new to python. I'm guessing I'm missing some definitions but I'm not sure which. Here is the code below and after that the first error I'm receiving. Obviously the TOKEN needs to be replaced with your token.The first error I get is:The second issue I have is how to use wrappers and decorators with . The code I have added to the example is:But nothing happens and I don't get my count of chat members. I'm also not saying which chat I need to count so not surprising I'm getting nothing back but where am I supposed to put the telegram chat id?
You are getting this error because MQBot receives an empty token. For some reason, it does not raise a descriptive exception but instead crashes unexpectedly.So why token is empty? It seems that you are using  incorrectly. The  part is a dictionary and its' method  allows one to access dict's contents safely. According to docs:get(key[, default])Return the value for key if key is in the dictionary, else default. If default is not given, it defaults to None, so that this method never raises a KeyError.According to your question, in this part  you pass token itself as a key. Instead, you should've passed the name of the environmental variable which contains your token.You can fix this either rewriting that part like this  or by setting environmental variable correctly and accessing it from  via correct name.


Answer URL
https://docs.python.org/3/library/stdtypes.html#dict.get
