Natural Text
I get the following error in the line where I call: c.execute(sql)sqlite3.OperationalError: near "/": syntax errorThe url variable is a string which contains a url like: https://www.foo.com/bar.htmlWhat is the error in my code ?
You should not be using string interpolation to write SQL queries. Quite apart from the problem you're having, it leaves you open to SQL injection. Use parameters instead:
The error is that you're not using the db-api the right way. You are building the sql query using string formatting:This leads to two problems. The first one is correct handling of quoting and escaping. In your case you could work around by adding quotes around the format sign ie:but this will still break if  contains quotes.The second and much more important problem is that your code is now opened to sql injection attacks.The correct use of the db-api will solve both problems: just use your dp-api module's placeholder (for sqlite it's a '?') in the sql string and pass arguments to the  call. Your db-api module will then take care of proper quoting / escaping AND will properly sanitize your arguments to prevent sql injections:Note that this doesn't work for table names, only for values passed to a select, insert or delete query, so in your case you'll still have to use string formatting for the table name:Totally unrelated by I noticed you use the  naming convention for your class attributes. This convention triggers a name-mangling mechanism that is mainly intended to prevent accidental override of some attribute. Practically, this is almost never needed (eventually for some implementation detail of a base class in a framework, and even then) and can be really annoying. The convention for "implementation attributes" is to use a single leading underscore, which is understood by all python programmers as "implementation detail, don't mess with this or you're on your own". 


Answer URL
https://docs.python.org/3/library/sqlite3.html
