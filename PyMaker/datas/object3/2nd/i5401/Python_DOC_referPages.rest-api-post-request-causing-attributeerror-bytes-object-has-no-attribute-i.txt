Natural Text
I'm trying to make a POST request to the Coinigy API in Python 3. This is the code I've been running.  I'm getting the following error:With a past POST request I wrote to their API for pulling down account activity info, I found I needed to use urlencode(headers).encode("utf-8") to get it in the right format to pass through the API. But now that doesn't seem to work. https://coinigy.docs.apiary.io/#reference/account-data/activity-log/activityIf I comment out the headers encode into utf-8 line, it seems to get through to Coinigy, but then it returns the following error code:But the urllib.request says that you must pass headers as a dictionary {} so I can't understand what is wrong, it should be the right data structure.  
You should not URL encode your .  expects  to be a dictionary: should be a dictionary, and will be treated as if  was called with each key and value as arguments.These are HTTP headers and when sent over the wire are in the form (newline-separated, colon space between header name and value):So you should pass your  dictionary in without doing  on it.This github repo might also be helpful to you: https://github.com/coinigy/api/blob/master/coinigy_api_rest.py
As an update with Bailey's corrections:1) Passing the values as JSON encoded rather than URL encoded.2) utf-8 encoding the valuesThis is the correct code which works now, thanks!


Answer URL
https://docs.python.org/3/library/urllib.request.html#urllib.request.Request
