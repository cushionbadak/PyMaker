Natural Text
Is any possibility to fake module, which is used(import) by other modules that I use in my tests?Example: This is my test.py:This is module1.py:Based on example: the question is: how can I fake  in test.py
When you do an , if  already exists, the interpreter just returns that instead of doing a fresh import.So, to fake out 's  statement, just get the value filled in before you load . This is a bit hacky, but very simple. For example:mytest.py:module1.py:This will print out something like this:If you need to fake out  more thoroughly (even if it tries to introspect the module), you can create a new module (via ) with the code from  but the name , and any other changes you want.If you need to do this more dynamically than can be accomplished by just renaming modules statically in advance, you can build an import hook, as described in PEP 302. This requires you to reimplement a good chunk of the import mechanism, which is a huge pain in 2.x, but  in 3.1+ makes it a lot easier.Fortunately, usually, you don't need to do either of these.
In python3 I do this:Create simple fake class in a moduleThis is cool, but what you probably want is generate from a config data file.Create fake class in a module from cfg fileOk, now let's try in module1Enjoy!!


Answer URL
