Natural Text
I am trying to write a serverless back-end for an application with AWS Lambda, and am running into the error in the title. The error occurs when testing with API Gateway proxy integration, but the function works fine when tested in the Lambda console.Here is the error:Here is context for where it occurs:Basically proxy integration seems to be reading in the event object as a JSON formatted string, as opposed to a dict, but here's what happens if I adjust my code for that:I can't win. Any help is appreciated.
You've identified the issue. However you're trying to convert a  to .This is what you have:The body part as you have rightly identified is what is getting in as .This is what you should have:One more step is to make it client-agnostic.
This is because  is not a  but a . (I ran into this problem when decoding an SQS triggered event)In case if anyone ran into a problem when a value of  is again not  but , here is a solution that decodes str to dict recursively.Example Usage:This should print "bucketname".
When dealing with json, python provides 2 std functions:https://docs.python.org/3/library/json.html#json.dumpsSerialize obj to a JSON formatted str using this conversion table. The  arguments have the same meaning as in dump().https://docs.python.org/3/library/json.html#json.loadsDeserialize s (a str, bytes or bytearray instance containing a JSON  document) to a Python object using this conversion table.What you need here is the latest: is probably a json str so for accessing itÂ´s values you fist will need to convert it to a python obj via `json.loads


Answer URL
https://docs.python.org/3/library/json.html#json.dumps
https://docs.python.org/3/library/json.html#json.loads
