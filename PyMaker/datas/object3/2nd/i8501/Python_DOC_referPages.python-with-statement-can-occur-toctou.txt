Natural Text
Assume that,  is closed or deleted during the delay between  and . (or it can ?)Then, this situation can occur TOCTOU ? statement sure that atomic until with block or not?
Can this occur?Use case 1: Python itself deletes the file* yes it can happen. I just tested like this:Use Case 2: Other than python deletes the file. Then also, found the behavior to be same. How to avoid it? You can use exclusive lock from fcntl.lockf() Edit: There is one more caveat here. Locking the file may not be straight forward and may be OS dependent like What is the best way to open a file for exclusive access in Python?


Answer URL
https://docs.python.org/3/library/fcntl.html#fcntl.lockf
