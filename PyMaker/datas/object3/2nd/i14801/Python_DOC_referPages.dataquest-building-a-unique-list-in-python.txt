Natural Text
I'm currently doing the tutorials on DataQuest.io.The goal in the following exercise is to loop through a dataset (flight_delays) and create a list of unique carriers.The print(unique_carriers) command returns an empty list while I was expecting a list of unique carriers. Can somebody explain/correct? FYI - I managed to solve the problem by using another approach. I'm still interested to see how I could have fixed this!
The issue in your code is the test. You want to check that the carrier is not yet in  but your test is a bit weird. In any case, you should avoid comparing Boolean values in a test because a test is already a comparison of a Boolean value. The simple expression would be:What you wanted to write was:That would have worked (but is inelegant). You could also write .What is interesting in your question is what actually happens. This is not an issue about operator priority: your code is not interpreted as , that would raise a  exception stating that you cannot use the  operator with a Boolean.No, what happens is that in Python, you can chain comparisons such as , and  and  are both comparisons in that sense. Therefore your statement was interpreted as .You can confirm it with the bytecode. Here I do a simple function to look at what Python will do with it:And then, let's look at bytecode!At  you see the  that duplicates the top of the stack which, at that time, is the list. Then the  rotates the stack such that you end up with:Now you get the first comparison using  () which, if  continues to  and  to compare what remains ( since the other 2 have been popped in the comparison) with . That's it, your test is:
Thank you for your answer. To resume, the following solutions would have worked:The explanation on why my code didn't work kind of got over my head. But I now understand the complexity of the test I created ensuring that I will try to find an elegant solution first.Kind regards


Answer URL
https://docs.python.org/3/reference/expressions.html#not-in
