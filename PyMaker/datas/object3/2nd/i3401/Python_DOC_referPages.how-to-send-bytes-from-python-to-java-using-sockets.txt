Natural Text
I've read a few posts on how to send a picture using sockets in Python, and how to send a picture using sockets in Java, I was wanting to combine the two and send a picture from Python to Java using sockets on both ends. Most of my code is taken from the posts I read but here is the python client: the code for the Java server is:The initial problem comes from sending the size I think. I'm no python expert, nor am I a Java expert, but I think what's happening is Python is sending the size as a string and Java is receiving it as a byte array and converting it to an integer, and there are some differences in the way they are stored in the two languages. Can anyone offer any assistance with this issue? 
Although I would approach your problem slightly differently, the following code works:Python SenderJava ReceiverThe sender opens a socket, reads the file, and sends the receiver the length.  The receiver gets the length, parses the bytes and sends it back.  Upon receipt of the "confirmation", the sender then sends the file contents.  The receiver will then repeatedly read 1024 byte chunks from the socket input stream, inserting the bytes into .  When there are no more bytes expected (or the socket is closed), the receiver will send "OK" to the sender (unconditionally) and exit.  The sender will just print that "OK" (in bytes), and exit.Some of this could be cleaned up with a , but I wanted to get as close to the functionality of your code as possible.
Something is off - you should  be getting some kind of error when trying to send some integer in the socket:Sockets can only send , you have to convert the  object containing the size to  somehow, python won't do it automatically for you. Your code should fail with the error above. In the java code you are using  and  to convert your values, in the python code you just try to send the data without converting, you should get error.Now, to convert the  to , you can use the  module; It will convert to a binary representation used by the C language - I think that's what your java code expectIn the same way, you should use  to convert the bytes back to a integer object. See the documentation for more details and a table of possible conversions.


Answer URL
https://docs.python.org/3/library/struct.html
