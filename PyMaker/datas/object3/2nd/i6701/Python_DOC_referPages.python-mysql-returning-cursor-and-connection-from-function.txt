Natural Text
Previously I've always used something like...To return cnx and cur objects for use. That works fine.I now need to use an SSH connection to a DB.The example below executes the query within the function, but won't return the cnx or cur objects for use afterwards, so I get a print of the result, followed by the errormysql.connector.errors.InterfaceError: 2013: Lost connection to MySQL server during queryI appear to be having the same issue (although a different error returned) to Why won't Python return my mysql-connector cursor from a function?That question deals with why - I'd like to know if there is a solution.
Python calls special method  after  execution, so your connection closes after returning from the context of . Assign the tunnel forvarder to a variable like follow and you`ll be able to use the connection outside the function scopeRead more about compound  statement in the docs.


Answer URL
https://docs.python.org/3/reference/compound_stmts.html#the-with-statement
