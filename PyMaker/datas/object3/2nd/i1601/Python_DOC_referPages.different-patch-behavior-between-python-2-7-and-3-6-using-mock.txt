Natural Text
 does not seem to produce the same behavior under 2.7 and 3.6.Here is my project structure:foo.py:bar.py (imports Foo):lol.py (imports Bar):Since  imports Foo using , I am patching  (according to where to patch docs):test_bar.py:This setup runs correctly in Python 3.6 but fails in 2.7 (Foo does not get patched).However, if I switch my setup to:test_bar.py:It works in 2.7 but fails in 3.6.What is a recommended way to use  to make it produce results consistent between python versions?Note: This problem only appears when I test . If I call  from the unit test, I get consistent results using second setup  and it works in both 2.7 and 3.6.
I cannot replicate the difference using 2.7 vs 3.6 upon adding  files to your  directory, and changing the import of  in :In either case, you should not need to import  in your test - mock is taking care of finding  by parsing the string passed to the  decorator.  I suspect the error you're seeing is due to the fact that Python 3 uses absolute imports (https://www.python.org/dev/peps/pep-0328/)


Answer URL
https://docs.python.org/3/library/unittest.mock.html#where-to-patch
