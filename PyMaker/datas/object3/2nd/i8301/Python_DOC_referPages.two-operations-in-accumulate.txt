Natural Text
I tried to convert the following loop into a  call but i despicably failed:How can I accumulate the values of h including this 0.25 decay factor?Background: I wanted to do this as a just for fun exercise simulating a simultaneous heating and cooling process with functional programming style (the add operation is the heating step, and the subtraction is the cooling step). I want to get the accumulated values to plot the values of the process.
Unless my math or reasoning is incorrect this is how you would achieve this using :Edit: If you only want the last element, aka the total then it becomes:
In short, you don't.  accumulate operates on an existing iterable type, such as a list of daily production quantities, returning the running total thereof.  You have a recurrence relation, not a ready iterable.  The problem is that total depends on a decay operation on the previous values.If you want to make this a one-liner, I suggest that you use reduce, which allows you to specify the reduction function -- i.e. a lambda function of your own design.
 (just  in 2.x) can be made to work. The  takes two args, the current accumulated value and the new value from the sequence, in that order.For your problem, subtracting .25 is the same as multiplying by .75.  Either is done after adding the new value.  This should work.EDIT: I wrote the above not being aware of the addition of  to itertools in 3.2 and of the  argument in 3.3.  The doc does not specify the order of the two arguments to , but it is the same as for the  function: accumulated value, new_value.  This is verified by using an asymmetric update expression such as .


Answer URL
https://docs.python.org/3/library/functools.html#module-functools
