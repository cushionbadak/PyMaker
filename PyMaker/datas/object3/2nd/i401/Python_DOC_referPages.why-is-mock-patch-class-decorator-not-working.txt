Natural Text
I want to mock something for an entire class but the following minimal example is not working:I get this unexpected output: (why did  not raise?)However if I move the  down 1 line so it is decorating the method  instead of the class  then it works as expected:Why does  not work at the class level?
It turns out the class decorator only patches methods beginning with  which defaults to .So renaming the method to  or even  makes the patch start working.Docs:Patch can be used as a  class decorator. It works by decorating each test method in the class. This reduces the boilerplate code when your test methods share a common patchings set. patch() finds tests by looking for method names that start with . By default this is , which matches the way  finds tests. You can specify an alternative prefix by setting .Evidently this behaviour applies to any class whether inheriting from  or not.


Answer URL
https://docs.python.org/3/library/unittest.mock.html#patch
