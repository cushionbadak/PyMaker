Natural Text
I am trying to use the Python/C API to run a Python function which returns a string. I want to store that returned string to a C++ variable, but I can't get it to work. I am using Python 3 and it seems like the  method doesn't work anymore. Here is my code:The python file is called , and the function I am trying to call is called . I am trying to pass in  as an argument. Any ideas what I should do?EDIT 2: I don't need to use std::string as in the code. What else can I use to store the string returned from the function?
It's essential to check the return values of all Python functions. Python returns a  if there was an error. So  works fine in your code. It just segfaults because  is a  you got from . Putting  just after this call prints:You need to pass a tuple of objects as argument, not a single . Instead you might want to use  or .Additionally have a look into . Furthermoreshould not even compile since it returns a  not a .


Answer URL
https://docs.python.org/3/c-api/unicode.html#c.PyUnicode_AsUTF8
https://docs.python.org/3/c-api/unicode.html#c.PyUnicode_FromObject
