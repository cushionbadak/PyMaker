Natural Text
I have a test below using  on Python 2.6.Inside the module I want to test, I haveTwo questions:When inspecting , I see .Why isn't this returning ?Another question is when I change  to  and change  to , I notice that nothing is mocked out. Why is this the case?
When you are calling  in your function-under-test, it is returning a new unconfigured , and then you are calling its  function, which is generating that default .You probably want to set the  of  to be a new  whose  function returns .
Short answer is what you want to do isDefault mock's  attribute is a  object (AFAIK allocated as lazy property). IMHO try to avoid this kind of mock configurations, take your class/function more clear and narrow to avoid object browsing. These kind of test make source and tests tangled and create a solid fence to do refactoring. For your second question I can just point you to Where to Patch must read document. From what you say is impossible to find the root cause by I can bet the answer is always in this documentation's chapter.


Answer URL
https://docs.python.org/3/library/unittest.mock.html#where-to-patch
