Natural Text
I'm trying to write a Python script that installs some packages but unfortunately it's not playing friendly with Ubuntu's .Here's my code:And here is the output:From what I understand, I believe the auto  is due to the blocking nature of the call, so it's not able to wait. Assuming that's true, how can I get around this?Edit: I forgot to mention that I am well aware of the  flag that may be passed to . I'm more interested to know whether it's possible to call a command that requires input and wait for that to complete before returning back to Python.
The problem has nothing to do with "the blocking nature of the call".The  program is waiting for input, a  or .But you've told  to send no input and just close the input pipe as quickly as possible.So,  gets an EOF or a closed-pipe error instead of a  or , and it takes that as you wanting to abort.What you probably want to do here is pass the appropriate arguments to  to tell it to never ask you for confirmation. Usually you want the  flag, which answers yes to anything that's not too dangerous. IIRC, there are also flags that always answer no and answer yes whenever there's a yes answer, but I could be wrong; you can  yourself to find out what it provides and decide which one you want.You almost certainly don't want to just unconditionally pass a  and a newline to the  process. At best, that'll do the same thing as just passing the  flag. But at worst, who knows what it'll do? The  flag is documented to answer "yes" to all safe prompts and abort on anything that can't be safely ignored; sending a  response to the first prompt happens to do the same thing in this one particular case on this one particular version of , but in another case it could very well mean "yes, reinitialize my  database" or "yes, ignore the bad signature and install this malware" or anything else.But if you really do want to do this, it's pretty easy:  takes an  parameter, and it sends whatever you pass it to the child process's input, so:But what if you can't just use  or similar flags because you need to do something more complicated (drive an installation like MySQL's, or access the super cow powers)? Well, there are good ways of doing that—e.g., you can preconfigure the setup with  and then use noninteractive mode to skip the setup screens.If you really do want to try to access the output and prompts provided by both  and individual packages and respond to them, that's doable. But it's not easy. First, you need to capture the output, by adding  to your . Then, instead of calling , you store the  in a variable, say, . Then you can read from , parse the responses, and respond appropriately to each prompt by writing to . And then  at the end. But if you really want to do something like this, you're usually better off using a library like  instead of doing it manually. But the big problem is… what are you going to do with that output? Do you really want to write a parser than understands everything that  in verbose mode prints out? And, even if you do, how are you going to know when to answer  or  or something completely different? If you can do that, you can probably just use multiple  commands in non-interactive mode with a lot less effort.
Try adding -y to your apt-get install command so that manual intervention is not required.This will tell the apt-get install command to automatically presume that you want to continue.


Answer URL
https://docs.python.org/3/library/subprocess.html#subprocess.Popen.communicate
