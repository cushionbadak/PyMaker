Natural Text
I have created a custom class, and I want to use the  operator on a instance for passing it to a function. I have already defined  and , but when I try , I'm getting What are the minimum required methods so that the custom class qualifies as a mapping?
 is not an operator, it is part of the call syntax:If the syntax  appears in the function call, expression must evaluate to a mapping, the contents of which are treated as additional keyword arguments.So if your class implements the  methods, then you should be good to go. You'll need more than just  and  here. A  is a , so must define at least , , and ; in addition most of , , , , , , and  would be expected. If your custom class directly inherits from , you only need to implement the first three.Demo:If you run this under a debugger, you'll see that Python calls the  method, which returns a dictionary view, which then delegates to the custom class  method when the view is iterated over. The values are then retrieved with a series of  calls. So for your specific case, what was missing was the  method.In addition, note that Python may enforce that the keys are strings!
Emulating container typesThe first set of methods is used [...] to emulate a mapping...It is also recommended that mappings provide the methods , , , , , , , , , and  behaving similar to those for Pythonâ€™s standard dictionary objects.It is recommended that [...] mappings [...] implement the  method to allow efficient use of the in operator...It is further recommended that [...] mappings [...] implement the  method to allow efficient iteration through the container


Answer URL
https://docs.python.org/3/reference/expressions.html#calls
https://docs.python.org/3/glossary.html#term-mapping
https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping
https://docs.python.org/3/reference/datamodel.html#emulating-container-types
