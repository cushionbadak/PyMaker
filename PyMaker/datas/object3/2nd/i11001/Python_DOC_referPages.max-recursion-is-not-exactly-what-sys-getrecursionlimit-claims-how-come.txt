Natural Text
I've made a small function that will actually measure the max recursion limit:To know what to expect I've checked:HoweverThe number is not fixed, always around ~970, and slightly changes between different instances of python (e.g. from within spyder to system cmd prompt).Please note that I'm using ipython on python3.What's going on? Why is the actual limit I'm getting lower than the  value?
The recursion limit is not the limit on recursion but the maximum depth of the python interpreter stack.There is something on the stack before your function gets executed. Spyder executes some python stuff before it calls your script, as do other interpreters like ipython.You can inspect the stack via methods in the  module.In CPython for me:In Ipython for me:As knbk pointed out in the comments as soon as you hit the stack limit a RecursionError is thrown and the interpreter raises the stack limit a bit to give you a possibility to handle the error gracefully. If you also exhaust that limit python will crash.
This limit is for stack, not for the function you define. There are other internal things which might push something to stack.And of course it could depend on env in which it was executed. Some can pollute stack more, some less.
I believe the confusion originates from the difference between the stack size you see when the error occurs and the limit. The thing is that the last call, that caused the crash, likely accounts for more than 1 frame on the stack, because it itself makes some function calls. And by the time you catch the exception, the call and its internal calls are already removed from the stack. Nevertheless, you can see them in the traceback. Let's look at this one. We get the traceback (note: there is no need to read it now, so just move forward to the next section).What's with the stack log?Okay, we have 11 missing frames. Now, scroll down the traceback to the last  call, i.e.And here you are, there are exactly 11 function calls (the arrows on the left), that is 11 frames on the stack that were removed when the exception was raised. 


Answer URL
https://docs.python.org/3/library/sys.html#sys.setrecursionlimit
