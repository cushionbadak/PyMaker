Natural Text
I have a pet project with the following logic:If you run it, you'll see:That is good. But what I have to do is to make  coroutine instead:To run it, I have to do something like that:Here is the issue: when sub process is created, it gets the whole Python environment cloned, so event loop is already running there:I tried to destroy it on subprocess side with no luck but I think that the correct way is to prevent its sharing with subprocess though. Is it possible somehow? UPDATE:Here is the full failing code:
First, you should consider using loop.run_in_executor with a ProcessPoolExecutor if you plan to run python subprocesses from within the loop. As for your problem, you can use the event loop policy functions to set a new loop:
You should always add a check to see how you're running the code (the  part. Your subprocess is running everything in the module a 2nd time, giving you grief (couldn't resist).


Answer URL
https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.BaseEventLoop.run_in_executor
https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.Executor
https://docs.python.org/3/library/asyncio-subprocess.html
