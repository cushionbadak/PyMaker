Natural Text
I have the following statement in one of the methods under unit test.I want db_employees to get mock list of employees. I tried to achieve this using:where employees is a list of employee object. But this did not work. When I try to print the value of any attribute, it has a mock value. This is how the code looks:I have query_results as the method under test calls query twice. First the employee table and next the department table.How do I mock this chained function call?
You should patch  method of 's  attribute and configure it to give you the right answer. You can do it in a lot of way, but IMHO the cleaner way is to patch 's  static reference. I don't know from witch module you imported  so I'll patch the local reference.The other aspect is the mock configuration: we will set 's return value that in your case become the object that have  method.
https://docs.python.org/3/library/unittest.mock.html
I found a solution to a similar problem where I needed to mock out a nested set of filtering calls.Given code under test similar to the following:You can setup mocks like the following:


Answer URL
https://docs.python.org/3/library/unittest.mock.html
