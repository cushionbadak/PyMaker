Natural Text
I experienced an "AttributeError" with the following Python code:And the AttributeError was raise on the delattr line immediately after the hasattr test was positive. The panic was pretty rare. I would say once in few hundreds times.SomeFunc() may be called from multiple threads.  Is it possible that another thread get in between the hasattr and delattr to remove the "_Some_Attribute" after the first thread test hasattr positive?
When looking up an attribute on an object, python first looks at  and then at the class namespace. So, instance variables and class variables both pass the  test. Such is not the case when deleting attributes. Class variables will not be deleted.When run, you get your errorEDITWith the revised code, I can no longer reproduce. My test case below works without error.
It is not clear why the problem occurs in your case. The code snippets you gave are not enough for a conclusive analysis.However, there is a solution nevertheless!Instead of:Do this:It is easier to ask for forgiveness than permission.


Answer URL
https://docs.python.org/3/glossary.html#term-eafp
