Natural Text
I'm having a problem understanding why my python program does what it does when reading (first) lines from files and adding the lines into a list. For some reason the first line needs to be empty or it'll not read the first line correctly. If the first line is empty, it's not empty (at least not according to python).The thing is, I have two types of files:First file is in the form:and the second file in the form:Both files are UTF-8 encoded text files. The first line of both files that gets added to a list in my program, is "text" and "text_file.txt" but any code that for example tries to say will not get executed even if the "something" is the same as the "text".So I'm assuming that my problem is that somewhere in the machine code (or something), my computer writes some invisible code in the beginning of the text file and that makes the first line not what it is. Maybe? I have actually found a solution for the problem simply by adding an empty line and an if clause when reading the file line by line:and in the other filetype:Those if clauses work and my program does what it's supposed to (as long as I always add an empty line to the beginning of the file), but I haven't been able to find a real reason for why my program is behaving as it is. Also, I would like to not have to do this kind of a workaround if there's an easier solution that doesn't involve me editing all my files and adding an if clauses to my code.Would appreciate any help understanding what's happening here!Edit: as you people have been asking for my code, here it is:This does not work properly. Also I tried it like mxds said, and this does not work either. It is only a problem in the files in the first character of the first line.Edit2:It seems the problem is having a Byte order mark in the beginning of my text files. After a quick googling I didn't find a solution as to how I could remove it. I'm creating my files with just windows notepad.Final edit: Apparently notepad is not a real text editor. I guess I'll just swap over from notepad to notepad++ to avoid this problem. However, just in case I'll have to handle my files in notepad: If I open a textfile in notepad and add some text in it, will it add a BOM or should it do that only in the creating of the file?
Looks like you've already done the legwork on this, but according to How to make Notepad to save text in UTF-8 without BOM?, the best answer is not to use Notepad (but Notepad++ is ok). :)Alternatively, you can strip the BOM in Python with:See https://docs.python.org/3/library/codecs.html:To increase the reliability with which a UTF-8 encoding can be  detected, Microsoft invented a variant of UTF-8 (that Python 2.5 calls  ) for its Notepad program: Before any of the Unicode  characters is written to the file, a UTF-8 encoded BOM (which looks  like this as a byte sequence: , , ) is written....On decoding  will skip those three bytes if they appear as the first three bytes in the file. In UTF-8, the use of the BOM is discouraged and should generally be avoided.
A classic approach to reading text files in Python is:After which you can process the lines like this:As other comments have hinted, you may want to make sure this works first. It would help if you post your current code for review.


Answer URL
https://docs.python.org/3/library/codecs.html
