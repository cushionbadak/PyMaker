Natural Text
Is there anyway for the warnings.warn() function to be caught be a caller while still executing the rest of the code after the warn() call? The problem I am having is that function b will warnings.warn() if something happens, and then I want the rest of that function to finish its job and return a list of what it actually did. If a warning was thrown, I want to catch it, email it to someone, and continue on when I call that function from another module, but that isn't happening. here is what it looks like in code:
Yes, warnings can warn without exiting out of a function. But the way you're trying to do things just isn't going to work.Using  with the  action means you're explicitly asking Python to raise every warning as an exception. And the Python exception model doesn't have any way to resume from the point where an exception was thrown.You can reorganize your code to provide explicit ways to "do the rest" after each possible warnings, but for non-trivial cases you either end up doing a ton of work, or building a hacky continuation-passing mechanism.The right way to handle your use case is . This way, all warnings go to a logger named  instead of through the normal warning path. You can then configure a log handler that sends these warnings to someone via email, and you're done.And of course once you've built this, you can use the exact same handler to get emails sent from high-severity log messages to other loggers, or to add in runtime configuration so you can turn up and down the email threshold without deploying a whole new build of the server, and so on.If you're not already using , it may be easier to hook warnings manually. As the  introduction explains:The printing of warning messages is done by calling , which may be overridden; the default implementation of this function formats the message by calling , which is also available for use by custom implementations.Yes, Python is encouraging you to monkeypatch a stdlib module. The code to do this looks something like:


Answer URL
https://docs.python.org/3/library/warnings.html#temporarily-suppressing-warnings
https://docs.python.org/3/library/warnings.html#the-warnings-filter
https://docs.python.org/3/library/logging.html#logging.captureWarnings
https://docs.python.org/3/library/warnings.html#module-warnings
