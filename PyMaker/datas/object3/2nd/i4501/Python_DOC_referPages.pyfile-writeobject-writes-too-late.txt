Natural Text
I have more or less this code:What I really would like is to replicate  (the Python 2 version of), and then use the result in  call.  I cannot find a sane API for calling something like this.  So,  was the closest I could find...  However, instead of writing to , it waits until every possible interaction with  finishes in C, and only then it prints whatever it was supposed to...I've looked at what Cython generates for code like  or , and I want to pull my hair out, it's so complex.  All I need, really, is to be able to print out the Python objects for debugging purposes.  I also tried the GDB way, but Python objects are such a mess when you look at them from GDB perspective, it's not really workable either.
However, instead of writing to , [] waits until every possible interaction with You are likely getting bitten by Python-level buffering. A call to  would probably fix the issue.What I really would like is to replicate  (the Python 2 version of), and then use the result in  call.The API you're looking for is  in combination with . This allows things like:That will leak the string returned by  and crash if  raises; the correct version could look like this:


Answer URL
https://docs.python.org/3/c-api/object.html#c.PyObject_Str
https://docs.python.org/3/c-api/unicode.html?highlight=pyunicode_asutf8#c.PyUnicode_AsUTF8
