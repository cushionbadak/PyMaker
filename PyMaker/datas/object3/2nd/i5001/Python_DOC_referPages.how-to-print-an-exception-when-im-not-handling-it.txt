Natural Text
I have the following code:When this code is run and  is of type ,  just prints out  because no exception is currently being handled (the code is not inside an  block). Luckily there appears to be the  method on  that isn't coupled to whatever the current exception being handled is, but in order to call it I need to extract the type, values, and tb from my exception variable. How do I do this?
How is  being produced? If it is being returned from some function without the corresponding stack then it is not possible to produce the correct frames anyway.  On top of that, it is not possible to generate a  object without going deep into , so this is likely not what is desired.If what you are after is actually the stack at where the exception was logged, making use of  and  may produce what you might be after.  However, as mentioned, you will need to get the frames as close to where the error occurred.  Consider this example:Executing this will produce the following output:Note that the stack ends exactly where the call is done, as the return value of the  is bounded to .  This is why the stack should be generated and formatted at where it was produced, and step back one level.  Consider these updated functions:ExecutionNote how the trace ends at the function that produced the exception.


Answer URL
https://docs.python.org/3/library/inspect.html#inspect.currentframe
