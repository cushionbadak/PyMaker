Natural Text
I am trying to copy a directory to a new location. When it arrives in the new location, I want the last modified date for the new directory to be the time that it was copied to the new location.Looking at the documentation (https://docs.python.org/3/library/shutil.html I am using python 3.6), shutil.copytree takes an argument "copy_function" which is "shutil.copy2" by default so as to maintain most metadata (like the modified date). However changing this to "shutil.copy" i.e:appears to still maintain the modified date of the original file. Even though shutil.copy() should not maintain metadata beyond file permissions according to the documentation.Interestingly, watching the destination of the copy, I can see that the directory momentarily has its modified date set to the current time before being reverted to the modified date of the source directory.Thanks in advance for any help.
If you are trying to prevent directories from having their metadata copied, this is unavoidable.  The  is not called for directories in the first place, so changing it has no effect.   always calls  on each directory in the tree, as can be seen in its source code.  Note that this does not happen for files, because the function only recurses on directories (so the only way  will point to a regular file is if you pass a file as the argument).If you're really desperate to make this work, you could monkey patch  to do nothing, but I would hardly consider that a robust solution.  It would be much safer to walk the destination directory structure and use  to reset each directory's modification time manually.If you are trying to prevent files from having their metadata copied, I am unable to reproduce your problem:


Answer URL
https://docs.python.org/3/library/shutil.html
https://docs.python.org/3/library/shutil.html#shutil.copystat
https://docs.python.org/3/library/os.html#os.walk
https://docs.python.org/3/library/os.html#os.utime
