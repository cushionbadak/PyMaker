Natural Text
Good evening everybody, I am trying to create internet robot and I met the problem while migrating my script from python 3.4 to 3.5 or 3.6+. It uses asyncio and works good on 3.4 python but when I start it with python3.5+ I got error: here is the code scheme:The exception raise in  coroutine and it is . I think it is because of changing  mechnics, but I do not understand what is wrong with my code. Here is what I want to do:Here is trace which I get on python3.5.3:Python 3.4.3 results:
This is actually a bug in asyncio in CPython 3.6.0.  There's a PR to fix this, so that 3.6.1 works as expected.As a workaround you can add the following piece of code in your project:
The best solution, if possible, try removing  altogether from your program, and use only one event loop (Optionally using  for  isolated CPU intensive tasks).As of 2017-03-02, there is an open python bug for this issue, effecting non-windows platforms: https://bugs.python.org/issue22087.Here is a shorter program to trigger the same problem:A hackish workaround (Caution! Use at your own risk!) inspired from the fix suggested here https://github.com/python/asyncio/pull/497 is to add this code to a newly created :Example:Other possible workarounds: Create the processes before starting the loop or use  which even allows to communicate with the subprocess via a stream.


Answer URL
https://docs.python.org/3/library/asyncio-subprocess.html#asyncio.create_subprocess_exec
https://docs.python.org/3/library/asyncio-subprocess.html#subprocess-using-streams
