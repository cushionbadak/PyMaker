Natural Text
I'm looking for elegant solutions to this:Basically I want a dictionary where assigning to an existing key throws an error. I currently implement a , but these are slower than the builtins.  but I'm looking for something builtin or at least in the common modules.XY: This is an hash checking for existence, I need O(1) lookup and insertion.NOTEThe dict I want is not immutable (is mutable...). You can add, remove or do what ever to it. The only difference is assigning a value to an existing value throws an error.
You can directly subclass  instead of  if you want.An alternative without exception is to use , although that would just ignore repeated assignments instead of throwing an exception. If your  value is guaranteed not to be already present for any dict key you can do a hack like this:


Answer URL
https://docs.python.org/3/library/stdtypes.html#dict.setdefault
