Natural Text
I have the following code: And this is my wtform field:This is the html generated in my form:Somehow, when I click submit, I keep getting "Not a Valid Choice". Any ideas why?This is my terminal output:When I look at my terminal I see the following:
I think you need to convert the argument passed to  method into an instance of the enum.
This is a lot cleaner than the accepted solution, as you don't need to put the options more than once.By default Python will convert objects to strings using their path, which is why you end up with Company.EnterMedia and so on. In the below solution, I use  to tell python that the name should be used instead, and then use the [] notation to look up the enum object by the name.
WTForm will either pass in strings, , or already coerced data to ; this is a little annoying but easily handled by testing if the data to coerce is already an instance:The  function must otherwise raise a  or  when coercing.You want to use the enum names as the values in the select box; these are always going to be strings. If your enum values are suitable as labels, then that's great, you can use those for the option readable text, but don't confuse those with the option values, which must be unique, enum values do not need to be. classes let you map a string containing an enum name to the  instance by using subscription:See Programmatic access to enumeration members and their attributes in the  module documentation.Next, we could leave conversion of the enum objects to unique strings (for the  attribute of  tags) and to label strings (to show to the users) to standard hook methods on the enum class, such as  and .Together, for your specific setup, use:The above keeps the Enum class implementation separate from the presentation; the  function takes care of mapping s to s. The  pairs provide the value and label for each option;  is used for the  attribute value, and that same string is then used via  to coerce back to enum instances. WTForms 3.0 will start using  for labels, but until then, we can directly provide the same functionality with , which in turn uses  to provide a suitable rendering.If having to remember about what to put in the list comprehension, and to use  is becoming tedious, you can generate the  and  options with a helper function; you could even have it verify that there are suitable  and  methods available:and for your example, then useNote that once WTForm 3.0 is released, you can use a  method on enum objects without having to use , because the project is switching to using MarkupSafe for the label values.
I've just been down the same rabbit hole. Not sure why, but  gets called with  when the form is initialised. After wasting a lot of time, I decided it's not worth coercing, and instead I just used:and to get the value:
So I hacked around and this works. It seems to me that coerce will be applied to both (x,y) for (x,y) in choices. I can't seem to understand why I keep seeing:  though 


Answer URL
https://docs.python.org/3/library/enum.html#programmatic-access-to-enumeration-members-and-their-attributes
https://docs.python.org/3/library/enum.html#programmatic-access-to-enumeration-members-and-their-attributes
https://docs.python.org/3/library/enum.html#programmatic-access-to-enumeration-members-and-their-attributes
