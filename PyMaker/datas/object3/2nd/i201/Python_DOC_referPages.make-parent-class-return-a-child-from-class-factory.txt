Natural Text
I have a parent class, and I want to make it so that I can return its children from a class factory, here's some code:I get the following error:I get that its trying to call 's  method. Is there a way to skip that, or at least preserve the type signature in a way that doesn't cause infinite recursion? (I need to preserve the type signature of both classes).
When I run your code I get a different error, namely:     on the  line.This is because the body of a  statement is executed in its own namespace, so the  in the enclosing namespace isn't in scope as it usually is. Another issue is that your  doesn't call its base class' .Lastly, the call to  is wrong. Calling a class returns an instance of the class (or in this case, an instance of a subclass).To fix all of these problems and get your code to work, you could need to do it like this:Update:Based on your comments, I would suggest using a class decorator instead. — something like this:This doesn't create subclasses, however you could change the name of the decorated class if you wished.
This may work:To avoid the error you need to define your custom  method in , so you can avoid to recursively call 's  method.The type is preserverd in the  class attribute of .With this code, the  does not raise any error.EDIT after commentFixed  and . The rule is that whatever argument signature you have in  must be used also by . For example, if you need  then you should have .


Answer URL
https://docs.python.org/3/glossary.html#term-metaclass
