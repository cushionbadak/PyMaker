Natural Text
How do I test the case of attempting to refresh an expired token? Or the case of trying to exceed ? I'm looking for the most pythonic/djangotacular way to unit test a token refresh endpoint. AFAICT, my endpoint is working fine-it's refreshing the token, and when I test it via python REPL, it does what I expect. But since this is a documented bug I'm fixing, I'd like to end up with the fix under my test harness. Testing the positive case is easy, but I'm unsure of how to proceed from here. I don't want to do some delay loop or something like that, since that would undermine the whole unit test ideology of running quickly and in isolation...my tests are currently using the  style.
I can think of two ways to do what you want, and both involve using mocks. You must learn to use mocks if you want to do serious isolated unit testing. ;)First, mock the  method of the  to raise :A second option is a bit more involved and would imply playing with the current datetime:I prefer the first option since it's easier.


Answer URL
https://docs.python.org/3/library/unittest.mock.html
