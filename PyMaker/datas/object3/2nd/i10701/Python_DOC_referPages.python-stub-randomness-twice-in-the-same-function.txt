Natural Text
How would I stub the output of  function which is being called twice in  function? I want to test both losing and winning cases.For example, I would like to have for the winning case, the first time  is called is given value  to , and second given value  to . I have tried using @Mock.patch, but this works only for doing one call.I have used   but again if i use it twice it will overwrite the return valueHere is the code:The test file is:EDITI ran this test with above code, and I get this stack trace instead of passingDo I need to put the two  elsewhere in the test? Or do I need to need to access this in the  method somehow?
 is the way to go, but instead of  you should specify EDIT #1Pick card was just for demonstration that different cards are picked.In your code you pick both cards and then call  which picks another two cards which are not mocked which raises . Also, since your game object already exists (created in setUp) you should patch this object directly, not create a new game object, hence your  should be:You path object's property  with MagicMock and set it's side effects to 8 and 10 respectively.


Answer URL
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.side_effect
