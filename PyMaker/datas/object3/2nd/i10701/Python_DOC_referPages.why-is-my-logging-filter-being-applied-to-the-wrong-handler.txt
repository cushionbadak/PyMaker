Natural Text
Here's a simple Python filter that does nothing but put "TEST - " in front of a log message.  (The real filter will do more helpful processing later):And here's the config being pulled in from a JSON file and parsed with :The filter itself seems to work - if I create a logger and run , I get the output  on screen.  However I also get that output (including the "TEST") in my  file.  I had thought that by attaching the  only to the  handler, I would get that TEST output only on screen.  Why is also being sent to the  handler and ending up in my log file?
You are changing the message of the log record from a filter. That is causing the issue. Python will apply that filter to your console output alright but when it does, it changes the original log message. So when the log message is  passed to the file handler, the message has changed already and contains that extra input. If you want to change the log format for specific handlers, you should consider using formatters instead. Filtering is for selecting which message gets logged and which one should not. Update: As per the comments, here's a sample code explaining how we can use custom formatter and handle business logic inside it. 


Answer URL
https://docs.python.org/3/howto/logging-cookbook.html#using-filters-to-impart-contextual-information
