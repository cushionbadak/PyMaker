Natural Text
I'm trying to run a (GUI) program in Python (Tkinter) which should work as follows:A loop generates five (or n in general, I'm just trying to do it for n=5 for now) button, and clicking on the i'th button prints out i. Here's what I did:Problem is, clicking on all of the buttons prints 5, so somehow func(5) is assigned to all of the buttons. Surprisingly, doing the following works out.   As I'm trying to do it in general for any number of inputs, there's no other way to do this without looping. Could anyone please help me how to fix that? Thanks!
Like many others, you have fallen victim to the lambda illusion.  Even though you are creating 5 function objects, they are all identical since all 5 have the same body, and the name 'i' in the body is not evaluated until any is called.  Your code is equivalent toHere it is obvious that you are attaching the same command to each button, and that pressing any button would use the final value of i, which is 4.  To get 5 different functions, delete  and replace  with either of the following:I strongly recommend using different parameter names in the different functions, and especially not reusing the loop variable name as the parameter name for the function defined in the loop.  In 3.x, you could delete func and  use
The issue is one of variable scope. The variable  is in your global scope here, so the lambdas are all using that same variable with the value it has at the time of button press (which is 5).The simplest fix would be to replace your lambda with something like .This declares a new variable () which is defined only in the scope of the value and is assigned the value of i+1 at the time the lambda is declared.


Answer URL
https://docs.python.org/3/faq/programming.html#why-do-lambdas-defined-in-a-loop-with-different-values-all-return-the-same-result
