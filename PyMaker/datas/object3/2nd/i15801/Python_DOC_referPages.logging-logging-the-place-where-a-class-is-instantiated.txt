Natural Text
I wnat to log all file write operations across scripts, and I want the info of which method/class made the write operation. For example, I have this code  I want to be able to also log which method made the write operation, when I run code like thisIt should be logged that "file.txt" was written by method 
This is one of those things that you normally shouldn't do… but occasionally it makes sense. I'm not sure whether your case qualifies or not, but I'll show you how to do it.What you're looking for is information about the function that called the current frame. The interpreter stack in the  docs shows how you can get this information:A few things to notice:This gives you the name of the code object, which is the name used as  time, which may not be the same as the name the function was called as. Importantly, in your case, at  time this is just a function, , not a method, , so you're not going to get the latter. (Notice that tracebacks print bare function names the same way—that's because they have the same information you have here.)You can also get things like the filename and line number (again, those will be as of the  statement), and armed with that info the  module can get even more information.In some cases, the "frame record" returned by  might have more "run-time-y" rather than define-time information, but not in general. (Much of the info is pulled straight from the frame attributes, but some of it is overridden by information pulled out of the source, if available. See  for details.) For example, you could look at  to get the source line , which you might find interesting.This requires Python 3.4. If you're using 3.3 or earlier, as long as you only care about CPython,  can effectively replace the first two lines.If your app is multithreaded (or green-threaded), you may want to explicitly  or  the frame objects before calling anything slow/blocking, like .


Answer URL
https://docs.python.org/3/library/inspect.html#the-interpreter-stack
