Natural Text
I discovered a strange error when using  to read from multiple text files.Here is a small reproducible example: and  are arbitrary text files in the  directory.I am getting the following error (basically a process tries to read  variable before it is assigned):If I place  assignment before  block, I don't get this error and the code executes as expected.What is causing this error? Clearly,  is assigned before any asynchronous calls should be made in both cases.
 not available on windows, so python use  to start new process, which will start a fresh python interpreter process, no memory will be shared, but python will try to recreate worker function environment in the new process, that's why module level variable works. See doc for more detail.
 spaws a new Python process, imports the right module and calls the function you provide.As  will only be defined when you run the module, not when you import it, the error is to be expected.Providing the  file descriptor as an argument to  might work, as I believe that processes inherit the file descriptors of their parents. You'd need to check, though.If were to use a  however, your example should work, as the spawned threads share memory.


Answer URL
https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods
