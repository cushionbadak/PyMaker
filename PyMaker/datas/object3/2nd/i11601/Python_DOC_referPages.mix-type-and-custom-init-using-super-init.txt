Natural Text
What I've succeeded to do so far:I've made an  class to represent html elements (, , , , etc.).I'm able to derivate this class like this to make subclasses for each element:And it works pretty well.But I have to write this for each subclass declaration, and that's pretty repetitive and redundant if I want to do every HTML tag type.So I was trying to make a  function that would make my class by taking the corresponding tag name as a string parameter.So instead of the previous class definition, I would simply have something like this:Where I'm stuckThis function should create a class. And the  method from this class should call the  method from the class it inherits from.I tried to make this  function and it looked like this :But when running , then  I get the following error:I guess that it has something to do with the empty  call, so I tried with  instead. But it obviously doesn't work better.How could I achieve this?NB : If I remove the  from the dictionnary in the  call, it works fine but the tag isn't correctly set in my elem. I've also tried to directly pass  to  but it didn't work either.
You can't use the no-argument form of  here, as there is no  statement here to provide the context that that function normally needs.Or rather, you can't unless you provide that context yourself; you need to set the name  as a closure here: automatically will take the  value from the closure. Note that I pass on the value for , not , to the  method; you wouldn't want to lose that value.If that is too magical for you, explicitly name the class and  when calling ; again, the class is going to be taken from the closure:
What's about a more straight-forward solution like inferring the tag for the class ?And then:A bit less magic (controversial), and a bit more explicit. :-)
I think this is a little bit of an XY problem. In that you've asked to how to use  in a dynamically created class, but what you really want is a less verbose way to set various class variables and defaults for your subclasses. Since you don't expect all instances of the same tag class to share the same tag name, you might as well set it as a class variable rather than an instance variable. eg.You can now write very short child classes, and still have your classes explicitly declared. You'll note that I changed a couple of the defaults to . For , this is because having mutable default arguments won't work how you expect -- it'll behave more like it's a shared class variable. Instead, have the default as , if  has not been specified then create a new  for each instance. The second () is so that if  is specified then the instance will have it's  set, but all other instances will rely on the class for the default value.


Answer URL
https://docs.python.org/3/reference/lexical_analysis.html#keywords
