Natural Text
I want to change the  output for my class. Normally, for all other objects, it's done by defining own  method in their class. But if I do this for my class, it's not called.How can I change the  output for class?
That's because  calls the  of the type of the input (equivalent to: ). For instances of a class it will call the classes  but if called on a class it will call the  of the meta-class.So if you want to customize  for your class (not instances of your class) you need to add a metaclass for your :
As @MSeifert already explained,  calls the  attrbiute of the object's class. So  is called, not . Just for those that are interested, here is a look behinds the scenes of what exactly occurs.The implementation of  is in bltinmodule.c:The  function calls the API function . The  function is implemented in object.c: is defined using two helper functions. When an object is passed in - as is the case here - then the  function is called. It is also implemented in object.c:The part were focusing on is:This is where the  special method is looked-up on the object passed in. This is done using .  is defined in typeobject.c: first calls  on the object passed in, before looking-up the attribute using .  is a macro that gets the  member of objects. It's expanded form is:And as you probably guessed, The  attribute is the class (or type) of the object:So, as you can see from above, the  attribute used is indeed the object's class.


Answer URL
https://docs.python.org/3/reference/datamodel.html#special-lookup
