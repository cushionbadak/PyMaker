Natural Text
In my code, I'm using  to evaluate a string expression given by the user.  Is there a way to compile or otherwise speed up this statement?For a quick comparison option ONE takes 2.019 seconds on my machine, while option TWO takes only 0.218 seconds.  Surely Python has a way of doing this without hard-coding the expression.
You can also trick python:And then use it like so:Speed test:As a side note, if  is not a global, you can create the lambda like this:and call it:
You can avoid the overhead by compiling the expression in advance using  for Python 2 or  for Python 3 :Just make sure you do the compiling only once (outside of the loop).  As mentioned in comments, when using  on user submitted strings make sure you are very careful about what you accept.
I think you are optimising the wrong end. If you want to perform the same operation for a lot of numbers you should consider using numpy:To give you an idea about the possible gain I've added a variant using generic python and the lambda trick:Here are the results on my aging machine:The speed-up is not as high as I expected, but still significant.


Answer URL
https://docs.python.org/3/library/functions.html?highlight=compile#compile
