Natural Text
I have the following piece of code from Black Hat Python book, but it does not work and I don't have idea why.The problem is: when I run everything (it should be some client-server app, and this piece should run on server side) and when it comes to executing cliend_handler method it does not call run_cmd method. It prints once 'loop' but it does not print 'command' (I've put these print statements for debugging). Can someone  tell me why?
Here's your problem, or at least a problem that makes this code not work:Assuming this is Python 3,  returns a . Which presumably holds UTF-8-encoded text. Which you need to decode. You do that by calling  on it, not . What  does is just wrong here. For example:You don't want that  or those  characters.And, more importantly, look what it does with newlines:It escapes each newline as a backslash and an n. So when you ask if there's a newline in the buffer over and over, there never is one.If this code was written for Python 2, and didn't originally have that  call in it, porting Python 2 code to Python 3 can be a little trickier than just randomly throwing in  and  calls until you stop getting exceptions. The docs have a chapter on porting Python 2 to 3, although it's really intended more for people who know Python 2 well, so you may want to search for third-party tutorials like The Conservative Python 3 Porting Guide. (I don't know that one particularly well, it's just the first thing that came up in a search, but it looks decent, and at least covers how to use  and , which the official guide didn't, at least last time I looked.)


Answer URL
https://docs.python.org/3/howto/pyporting.html
