Natural Text
I have a class that takes in positional arguments (, , , and ), I have the following methods:The method below is supposed to take in a an array of  and look in a directory and see if it finds files matching a certain formatThe other method is simply supposed to create an etl table from that file. When running it, I'm able to retrieve the filename:But when trying to create the table, I get this error:Is it expecting a full path to the filename or something?
The proximate problem is that you need a full pathname.The  that you're trying to call  on is passed into the function, and ultimately came from . This means it's a path relative to . Unless that happens to also be your current working directory, it's not going to be a valid path relative to the current working directory.To fix that, you'd want to use  instead of just . Like this:Or, alternatively, you'd want to use  objects instead of strings, as you do with the  loop. If  is a  instead of a dumb string, then you can just pass it to  and it'll work.But, if that's what you actually want, you've got a lot of useless code. In fact, the entire  function should just be one line:What you're doing instead is looping over every file in the directory, then ignoring that file and reading , and then returning early after the first one. So, if there's 1 file there, or 20 of them, this is equivalent to the one-liner; if there are no files, it returns . Either way, it doesn't do anything useful except to add complexity, wasted performance, and multiple potential bugs.If, on the other hand, the loop is supposed to do something meaningful, then you should be using  rather than  inside the loop, and you almost certainly shouldn't be doing an unconditional  inside the loop.
with this:you're getting the file names of So when you get a match on the name (when generating your name), you have to read the file by passing the full path (else the routine probably checks for the file in the current directory):Aside: use a  here:so the filename lookup will be much faster than with a And your  method (which I didn't see earlier) should just open the file, instead of scanning the directory again (and returning at first iteration anyway, so it doesn't make sense):Alternately, don't change your main code (except for the  part), and prepend the directory name in  since it's an instance method so you have it handy.


Answer URL
https://docs.python.org/3/library/pathlib.html
