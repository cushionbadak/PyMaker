Natural Text
I have made some changes to a functionality which is breaking the unit tests. Previously i had a common.py containing the function request_url:And this was the test:After the changes in functionality, instead of simply calling requests.request, i have first initiated a session, mounted a TLS Adapter and then called the session's request function like this:Here, i am not sure how to exactly mock session.request since that is available through the session variable. I tried patching requests.session.request but that does not work here.Does anyone have any idea how can this function be mocked?thanks!
I think the reason in . You set , but your  doesn't return data(in your case everytime - ).  The documentation says:If you set autospec=True then the mock will be created with a spec  from the object being replaced. All attributes of the mock will also  have the spec of the corresponding attribute of the object being  replaced. ...Try to call: As you can see  was 'mocked' but doesn't return any data. You can set expected data using  or . Here an example:So, you need just describe expected data. Also you can  API using httpretty.Hope this helps. 


Answer URL
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch
