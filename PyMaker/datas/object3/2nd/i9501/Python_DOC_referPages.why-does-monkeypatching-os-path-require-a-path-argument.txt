Natural Text
pytest has this example in the monkeypatching docs:When I remove the  argument from the  function, I get the errorI don't understand what is providing that positional argument?Also, when I reimplement the same thing for pathlib.Path.home() I cannot have this argument  there, otherwise it won't work. Unfortunately, the documentation does not say anything about that ominous  argument.Any illumination for what magic is happening here would be very helpful!
You're trying to replace  that takes one argument with a mock that doesn't take arguments at all which results to an error when called. Under the hood  uses builtin  so the original version is basically doing following which works since both  and  take single argument:Now if you try to replace  with a method that doesn't take arguments and keep calling it the same way you'll get an error:Note that you'll get exactly the same error if you try to call  directly:


Answer URL
https://docs.python.org/3/library/functions.html#setattr
