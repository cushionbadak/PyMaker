Natural Text
My purpose is create a new process of other program and establish with it  a long-time connection (opportunity to write to its stdin and read a result) i.e. not atomic write-read operation with following killing of created process. I have to use program code only, not any shell command.There is my code:This code returns either empty string (if one transaction was commited) or rises BrokenPipeError (if it was running in loop). Does proc stay alive after the first ? What approach I need to use to get control of stdin/stdout of proc? 
You are checking for .But if you read the documentation of subprocess the returncode is either  or a negative number, but never .Second, if you have long running processes, you should either adjust and handle the , or disable it..Third: You should really really really avoid  in Popen, it is a huge security risk.Here is some example how I normally deal with Popen:This is for short living processes, but I hope you can see how stdin, stdout and stderr handling is done.


Answer URL
https://docs.python.org/3/library/subprocess.html?highlight=popen#subprocess.CompletedProcess.returncode
