Natural Text
imap version:apply_async version:Results:I expected  to be slower because child processes need to pickle the results to the main process and then write to file, whereas each child process in  directly write the results to file. Instead,  is slower than .Why is this so?nb: This was done using Python 3.4.3 on Mac OS X 10.11
A quick glance at your source code shows that the  opens your output file once per process where  opens it once per worker which is 5 times per process due to being inside your  loop. is called 125 times in your async version vs 25 times in your imap version.
My guess is the busy loop is the culprit (besides it being an anti-pattern in its own right).By checking the state yourself, you do redundant work: 's machinery does pretty much the same with the work queue behind the scenes (in  running in a separate thread). On the other hand,  uses  to suspend the main thread's execution until an item is ready (so  runs unhindered - remember that only one thread can run Python code at each moment).Anyway, this is but another guess. The only decisive evidence would be a profiling result.


Answer URL
https://docs.python.org/3/library/profile.html?highlight=profile#instant-user-s-manual
