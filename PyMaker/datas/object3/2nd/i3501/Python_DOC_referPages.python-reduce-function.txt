Natural Text
I'm just learning Python, and do not understand the behavior I am getting from my reduce function. I have seen many examples where you can use reduce to perform an equivalent function to sum when you want to multiply:That gives me the value I expect. But I need to multiply by all the reciprocals instead. I thought I could do this:But it comes out as 1.5 instead of some much smaller decimal answer. What am I doing wrong?
The  on each call is the result of the last call (it's only one of the direct inputs on the very first invocation), so doing  each time takes the reciprocal of the previous result. To fix, you need to change the  to only multiply in the reciprocal of the new number, not the accumulated value. You also need to provide an initial neutral value () so that the first value in  has its reciprocal taken properly (otherwise, it would be the plain value of  multiplied by the reciprocals of ):That said, you can simplify a little more;  is (roughly, given floating point precision issues) equivalent to , so you could simplify further to:or using the  module to push all the work to the C layer (only important if  might be really big):Either way, this gets the expected result:


Answer URL
https://docs.python.org/3/library/operator.html#operator.truediv
