Natural Text
I am trying to take a cpp file that has already been written and add header files to the list of includes using a python script. Currently, I create a string that has all of the includes that I want to add, and then using the re module I replace on of the includes with my string. All of the includes have a "\t" in there name, and this is causing issues; instead of printing the line as expected (), I am getting . When I print my string to the console, it has the expected form which leads me to believe that this is an re.sub issue and not an issue writing to the file. Below is an the code.The output for  is:The (truncated) output for  is:The closest thing to my question that I could find was How to write \t to file using Python, but that is different than my problem, since mine seems to stem from the substitutions done by the regular expression, as shown by the print before the write.
The  function expands meta-characters (escape sequences) in the replacement string too. The  character sequence (consisting of two characters,  and ) in your replacement string interpreted, by the  module, as the escape sequence for a tab character:But if you used a function for the replacement value, then no such expansion takes place. Note that this includes not processing placeholders, you'd have to use the match object passed into the function to create your own placeholder insertion logic. You don't have any placeholders in your code, so a  to create the function should suffice:Demo on the same contrived  sample string from before:The  function, is unfortunately too greedy with adding  backslashes to many more characters than just replacement meta-characters; you'd end up with many more backslashes than you started with.Note that because you don't actually do any pattern matching in your substitution, you may as well just use  to do the job:The  and  characters are no longer a meta character in a regular expression, so they doesn't need escaping either.


Answer URL
https://docs.python.org/3/library/re.html#re.escape
https://docs.python.org/3/library/stdtypes.html#str.replace
