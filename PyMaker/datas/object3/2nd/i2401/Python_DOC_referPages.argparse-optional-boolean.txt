Natural Text
This question already has an answer here:Parsing boolean values with argparse                    13 answers                I am trying to get the following behaviour:python test.py  => store foo=Falsepython test.py --foo => store foo=Truepython test.py --foo bool => store foo=boolIt works when I useHowever it breaks if I add , trying to enforce casting to boolean. In this case Actually ends up storing . What's going on??
Are you sure you need that pattern?  and , together, for a boolean switch, is not a common pattern to use.As for your issue, remember that the command line value is a string and,  means that you want  to be applied. For  that means , producing ; all non-empty strings are true! See Why is argparse not parsing my boolean flag correctly? as well.Instead of supporting  / , I would strongly recommend you use  to mean , drop the argument value, and instead add a  option to explicitly set :The  addition on the  switch ensures that the  value it stores (via ) ends up on the same  attribute.You'd only need a  combination if you have some other configuration mechanism that would set  to  and you needed to override this again with a command-line switch.  is a widely adopted standard to invert a boolean command-line switch.If you don't have a specific need for a  inverted switch (since just omitting  would already mean 'false'), then just stick with the  option. This keeps your command line simple and clear!However, if your use case or other constraints specifically require that your command line must have some king of  support, then add your own converter:the  value is used for  arguments where the argument value is omitted. Here that sets  when  is used. is used when the switch is not used at all. is used to handle the  case.Demo:
You should use the  parameter instead for Boolean arguments:So that the absence of the  option:would result in a  value for the  argument, and the presence of the  option:would result in a  value for the  argument.


Answer URL
https://docs.python.org/3/library/argparse.html#action
