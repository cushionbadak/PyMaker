Natural Text
I am teaching myself about the  function. And I see this snippet at PEP3115My question is at this line:    How could the variable  get a attribute from the  class? I see the  function returns an instance of member_table, but how is the link between  and   generated?Many thanks to all of you!
That is pretty straightforward, as it is exactly what prepare does.3.3.3.3. Preparing the class namespace Once the appropriate metaclass has been identified, then the class namespace is prepared. If the  metaclass has a  attribute, it is called as  (where the additional  keyword arguments, if any, come from the class definition).If the metaclass has no  attribute, then the class  namespace is initialised as an empty ordered mapping.https://docs.python.org/3/reference/datamodel.html#preparing-the-class-namespaceWhich means, the  attribute that is passed into the metaclass  and  methods is exactly the same object that is returned by . That object should be a mapping instance, that is, an object that behaves like a dict and have at least the  method. This  method is called by Python for all variables set inside the the declared class body itself. That is, for an ordinary class, with no custom metaclass, the variables are recorded in a dictionary (an ordered dictionary, as of Python 3.6). That happens as Python runs each statement inside the class body. This is the same object that is returned should one call  inside the class body:The main use case when this feature was first designed probably was exactly the possibility of making the order of declarations inside a class body meaningful. That is, a  method could just return a   instance, and  or  would act upon that order. As of Python 3.6, ordering of class attributes is by default - and the  feature remains so advanced one really has to think up of uses for it.


Answer URL
https://docs.python.org/3/reference/datamodel.html#preparing-the-class-namespace
