Natural Text
The code I have included below throws the following error:at this line: Why does Python not recognize my  class in the  method?
Because when it encounters  (while compiling the class body),  hasn't been defined yet (it is currently compiling, name binding hasn't been performed); Python naturally complains. Since this is such a common scenario (type-hinting a class in the body of that class), you should use a forward reference to it by enclosing it in quotes:Python (and any checkers complying to ) will understand your hint and register it appropriately. Python does recognize this when  are accessed through :This has been changed as of Python 3.7; see abarnert's answer below.
The feature you're asking for is called forward (type) references, and it has been added to Python as of 3.7 (in PEP 563).1 So this is now valid:Notice the  statement. This will be necessary until 4.0.Unfortunately, in Python 3.6 and earlier, this feature is not available, so you have to use string annotations, as explained in Jim Fasarakis Hilliard's answer.Mypy already supports forward declarations, even when run under Python 3.6â€”but it doesn't do you much good if the static type checker says your code is fine but the interpreter raises a  when you try to actually run it.1. This was already discussed as a possible feature in PEP 484, but deferred until later, after people had more experience using forward declarations in annotations. PEP 563/Python 3.7 is that "later".


Answer URL
https://docs.python.org/3/library/typing.html#typing.get_type_hints
