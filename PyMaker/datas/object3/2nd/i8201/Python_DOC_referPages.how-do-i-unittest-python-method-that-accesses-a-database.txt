Natural Text
Here I have a function that populations an  dictionary and inserts the values into a table in a database.  is a helper method from another function that has been there for a while now and makes the call to the oracle database, with most of the database info already hardcoded in that function. How can I unittest this function? I can't mock a database because the helper function is hardcoded to access our production db.
The help function  is not part of the unit you are testing; mock it. The only thing you need to test in , apparently, is that  is called with the appropriate arguments, and that the logger is used if  raises an exception.The fact that , a local variable in , is never used again after  is called suggests that this is not the full function. There may be more to test, but it is impossible to say with the information given.
First make your sql string a global constant preferably in a second file. Then mock the db calls.


Answer URL
https://docs.python.org/3/library/unittest.mock.html
