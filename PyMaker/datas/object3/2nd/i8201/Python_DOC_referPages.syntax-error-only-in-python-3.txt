Natural Text
I have the following code which runs fine on  but throws error on The above code returns "Python 2" in python 2, but throws syntax error on python 3 (For python 2 syntax ).Can anyone tell me why is this happening ? And what is the work around to fix those syntax errors in python 3 ?Note : I am aware of print syntax on Python 3Thanks you!
The problem is that the parser runs before any code is evaluated at runtime. Your check  runs at run time, after the code was already parsed and compiled. So doing such checks, you are able to make changes at runtime, but that does not help you when dealing with syntax changes.The syntax is parsed and compiled before any code is interpreted, that is why you get syntax errors even for code that is never run at runtime.If you are trying to create a polyglot script that is able to run on both Python 3 and Python 2, then you will need to make sure to use a syntax that works on both. For  in particular, you can import the print function in Python 2, so you can use it just like you would in Python 3:Some newer features won’t work that way (for example everything async), but for the most part, you can make it work somehow.If you end up depending on stuff with Python 3 that requires Python 2-incompatible syntax, then you could put that into a separate module and import that module conditionally at runtime. That way it won’t be loaded for Python 2, so the Python 2 parser wouldn’t attempt to load the incompatible syntax.As for why Python 2 does not throw an error, that’s actually very simple:  is valid syntax in Python 2, even with the  statement. That is because you can put parentheses around anything without impacting the value. So what you actually do there is this:That’s also the reason, why the following produces different results in Python 3 and 2:In Python 3, you get  as the output, while Python 2 gives you . That is because the comma inside the parentheses now makes this a tuple, so you pass a tuple to the  statement. – Importing the print function fixes this to give you the same behavior on Python 2 as on Python 3.
Even though the line  will never be executed in Python 3, it will still be compiled to byte code (or at least attempted). That line is a syntax error in Python 3, which requires the printed items to be in parentheses. Look up the documentation for more details: other changes to  were also made.So remove the error. Make the lineinstead. That way it works in both Python 2 and in 3. There are many sites that discuss how to write code that executes in both versions of Python. The parentheses are merely ignored in version 2 but are needed in version 3. This works if you print only one item: more than one gets more complicated.There is another way to do printing in both versions, using  but the way I showed is easier.Note that your attempted comment in the line is also not proper Python syntax. Change the  to  and it works.


Answer URL
https://docs.python.org/3/howto/pyporting.html
