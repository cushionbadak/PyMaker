Natural Text
My application has been failing on OSX when using multiprocessing and tkinter. The minimum example is as easy as follows:When trying to execute this snippet mac fails with the following report:Process:               Python [1453]  Path:                  > /Library/Frameworks/Python.framework/Versions/3.4/Resources/Python.app/Contents/MacOS/Python  Identifier:            Python  Version:               3.4.4 (3.4.4)  Code Type:             X86-64 (Native)  Parent Process:        Python [1452]  Responsible:           Terminal [395]  User ID:               501Date/Time:             2016-01-18 18:33:23.281 +0100  OS Version:            Mac OS X 10.11.2 (15C50)  Report Version:        11  Anonymous UUID:        49081BD5-7C1E-52F6-E5D9-F9F41BA8DFE5Time Awake Since Boot: 6200 secondsSystem Integrity Protection: enabledCrashed Thread:        0  Dispatch queue: com.apple.main-threadException Type:        EXC_BAD_ACCESS (SIGSEGV)  Exception Codes:       KERN_INVALID_ADDRESS at 0x0000000000000110VM Regions Near 0x110:  -->       __TEXT                 0000000100000000-0000000100001000 [    4K] r-x/rwx SM=COW  /Library/Frameworks/Python.framework/Versions/3.4/Resources/Python.app/Contents/MacOS/PythonApplication Specific Information:  * multi-threaded process forked *  crashed on child side of fork pre-execThread 0 Crashed:: Dispatch queue: com.apple.main-thread  0   libdispatch.dylib                 0x00007fff99f0fd69 _dispatch_async_f_slow + 3911   libxpc.dylib                      0x00007fff8fb8daa0 xpc_connection_resume + 1922   com.apple.CoreFoundation          0x00007fff9bbb69d1 _CFPrefsWithDaemonConnection + 353Deleting the Spinbox import (not used in the code) makes everything run. The same problem appears on python 3.4.4 and 2.7 (changing tkinter to Tkinter)Removing the multiprocessing module and making everything run on the same process also makes the problem disappear.My guess is that I'm violating some Tk/Tcl constrain, but I haven't found anything reading the docs about this, also the fact that this only happens with Spinbox and not with Entry or other widgets is suspicious. 
I managed to make it work, for some reason tkinter wants to be imported in the same Thread/Process that its executing from.When extending multiprocess.Proccess the new process code is inside the run() method, the init is executed on the parent process. Therefore changing all the imports to be locally done on the run method fixes the problem.The example code looks as follows:Now my application works on Windows, Linux and Mac.
When I run your code from IDLE editor, on Windows, there is no error, but no tk box either, just the '>>>' prompt in Shell.  When I put the end of the code under an if name clause, as specific in the multiprocessing doca tk box appears. The same is true with only  so protected. Try one or both versions on your Mac. I don't know if this is the only problem on OSX, but it will at least let you start with something that runs on other systems.


Answer URL
https://docs.python.org/3/library/multiprocessing.html#the-process-class
