Natural Text
I'm trying to mock the "self.api.friends.get" method in VKAuth class:from the test module test_views.py:having created instance of VKAuth class during the post call to 'auth-social' above in SNView class-based view:And I get an error:What should I write istead of the current patch.object to reach api.friends.get and mock it? UPD:To be more precise, I want some equivalent of:but mock it the moment before we make request to the django-rest-framework api via self.client.post().Thank you!
You are patching the wrong thing. In :add  attribute to   object. When you callyou are patching the  static attribute of  class and not the object attribute.You should patch  instead. Notes :Use  only if you really know why you need it instead simple . is not mandatory but I strongly encourage to use it.In the  context  will be equal to  because call  is like call ; in other words  is the mock object used to replace the  reference.Take a look to where to patch, you can find it very useful.Now if you want fill your  by some behavior you can configure it in  context:


Answer URL
https://docs.python.org/3/library/unittest.mock.html#patch-object
https://docs.python.org/3/library/unittest.mock.html#autospeccing
https://docs.python.org/3/library/unittest.mock.html#where-to-patch
