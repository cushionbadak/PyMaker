Natural Text
How can I convert nested dictionary to nested defaultdict?
You need to either loop or recurse over the nested dictionary, through all of its levels.Unless it's potentially ridiculously deep (as in hundreds of levels), or so wide that small performance factors make a difference, recursion is probably simplest here:Or if you want it to work with all mappings, not just dicts, you could use  instead of  in your  check.Of course this is assuming you have a pure nested dict. If you've got, say, something you parsed from a typical JSON response, where there might be dicts with list values with dict elements, you have to handle the other possibilities too:But if this actually is coming from JSON, it's probably better to just use your  as an  while the JSON is being parsed, rather than parsing it to a dict and then converting it to a defaultdict later.There's an example in the docs of using an  in place of , but that won't quite work for usâ€”unlike  and ,  can't just take an iterable of pairs as its only argument; it needs the default value factory first. So we can bind that in, using :And so on.


Answer URL
https://docs.python.org/3/library/json.html#json.load
https://docs.python.org/3/library/functools.html#functools.partial
https://docs.python.org/3/library/json.html#encoders-and-decoders
