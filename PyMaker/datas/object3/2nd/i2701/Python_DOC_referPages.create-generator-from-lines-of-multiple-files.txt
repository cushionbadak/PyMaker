Natural Text
I have a master file and a set of subsidiary files, but I don't know the name of the subsidiary files until I look in the master file.The master file contains two columns: some data and a second file name, e.g.,What I want to do is create a generator that yields an element from the first column of the master file, and then a line of data from one of the subsidiary files. For example,The number of lines in the master file is equal to the sum of the number of lines in all the subsidiary files, so once the master file has been traversed, all of the subsidiary files will have been traversed as well.If I only had two files that I wanted to open, and I knew their names in advance, I could do something like.But the dilemma is that until I read a given line of the master file, I don't know what subsidiary file to read. And then there's the added complexity of trying to construct a generator where the lines of multiple different files. 
You want to use an . This is a helper class provided by the  library to allow combining context managers. It can be used to keep multiple files open in a single  statement.ExampleLet's set up a few files for this example.Filesmaster.txthidden1.txthidden2.txtHere is the actual example.CodeOutput
You can keep a "cache" of open files and call  when needed:Used as:This is one of the cases where you have to use files without  unfortunately since you do not know how many files you'll have to deal with.You could write a custom context manager to hold the "cache" to achieve something like:Where  will lookup the cache and maybe open the file and the  method of  will close of the opened files.But if this is the only place where it will be used it does not really make sense.


Answer URL
https://docs.python.org/3/library/contextlib.html#contextlib.ExitStack
