Natural Text
This question already has an answer here:Python's json module, converts int dictionary keys to strings                    8 answers                I would like to save a dictionary that contains both string and integer keys and multiple datatype values.  For example:To save and load it I used  and , however, my integer keys are converted to strings upon loading it.I don't want to change the way the dictionary is created, since it is incredibly convenient for me to keep those keys as integers.How can I save the dictionary to file and then load it again while conserving type?
I suggest using the shelve module for that.Shelve allows you to store a dictionary of arbitrary python objects inside an on-disk file.An example from their docs:It does not answer your case of integer keys, for which you can either create a subclass of shelve that will convert ints to strings or use pickle altogether.Here is a subclass example:Usage:Keep in mind that using pickle instead of shelve to store the dictionary has numerous drawbacks:You need to load the entire dictionary at once, consuming a vast amount of memory in case of large datasets.Changing a single value, requires re-writing the entire dictionary.Shelve has a cleaner interface than using pickles all over the place, and has an internal cache for maximum efficiency.In case the program crashes in the middle, you will loose the DB if you didn't wrap the whole thing with a  clause, whereas in shelve the database is saved on-demand.Remember, disk access is one of the slowest parts of the program so you wish to minimize it.
Thanks for the pointers to the other question etc, though nowhere is the exceedingly simple answer of use picke (Why is that; am I missing a detail?).  


Answer URL
https://docs.python.org/3/library/shelve.html#module-shelve
