Natural Text
My Django app currently serves 7 hard-coded cities and would like to make serve all world cities saved not as one word like "Budapest" but as three levels like "New York, New York, USA".My Google-powered search field returns results like this:How can I extract the values and save them in my model.This is my current City model:This line from my view only adds a new city if it doesn't exist in the database already:I'd like the view to extract City, Region, Country and save them in the model and for the slug to be unique like this: new-york-ny-united-statesFinally, this is my View in full:
You can use  for something like this:You could then  the city result to get the city, state, and country parts.
It's better to extract these components from a well-structured source of data such as the Google Geocoding Service, so you can reliably tell which part of the data maps to an administrative division.If you take the example from https://developers.google.com/maps/documentation/javascript/examples/geocoding-simple you'll get a JSON object with the 3-tiered structure in :But then again, be careful, not all places have 3 tiers... Try some extreme cases and see what you get (e.g. Vatican City, Antarctica, etc.)
It would be great if you provided more URLs as examples. However, from the URL you have provided, I would simply write a few lines to get the desired city and country name: The codes are as follows:I hope you will find it useful. Thanks.


Answer URL
https://docs.python.org/3/library/urllib.parse.html
