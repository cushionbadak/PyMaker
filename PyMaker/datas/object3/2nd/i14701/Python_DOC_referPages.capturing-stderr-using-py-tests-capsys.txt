Natural Text
I am trying to use py.tests  fixture to capture the standard error stream. However, this doesn't seem to work as advertised. Given this simple test:Produces the following output when run with py.test 2.7.0 on Python 3.4.3:The strange thing is that py.test reports the correct contents for the error stream, but  doesn't seem to capture it. Am I doing something wrong? Is this a bug?
The  fixture works by replacing  with it's own virtual file object. In the code given above, this replacement happens only after  the test imports , making it useless. To fix this problem, one can import  inside the test.This problem is better described in the documentation of the  module.


Answer URL
https://docs.python.org/3/library/unittest.mock.html?highlight=mock#where-to-patch
