Natural Text
I want to make thousands of calls to an API which is kind of slow -- tens of seconds to get a response. The only limit is that I can make at most one request per second. What's the best way to do this? I think the following code works, but I feel I should be able to make better use of the threading library somehow. I'm using python 3.3
If you want to run a bunch of jobs using a fixed-size thread pool, you can use , like this:If you want to ensure that you make at most one API call a second, then you need to do this from inside your . You can't do it when submitting the job, because you don't know how long the job will queue up waiting for a thread to become available.If it were me, I'd put the rate limiting code into its own class so that it's reusable: was introduced in Python 3.3; in older versions of Python you could use  but this can jump backwards when the system clock changes, so you would need to ensure that this doesn't cause overlong sleeps:


Answer URL
https://docs.python.org/3/library/time.html#time.monotonic
https://docs.python.org/3/library/time.html#time.time
