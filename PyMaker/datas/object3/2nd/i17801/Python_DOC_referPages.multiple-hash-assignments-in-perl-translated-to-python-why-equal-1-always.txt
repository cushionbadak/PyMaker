Natural Text
If I had the line in perlwhere cds score is a hash, would the best python equivalent beAnd in a more general sense, I am confused why I often see the =1 at the end of hashes in perl. In python, it seems more sense to make these list appending instead of a dict like in the case of  where in python I would write . Is the idea just that in perl storing long lists as a hash is better than as an array, if you are trying to look up arbitrary members?
A dict/hash where all of the values are  (or some other truthy constant) is a standard way to simulate sets in a language that doesn't have them, like perl. (Of course this being perl, it's only one of many standard ways to do it.)Python does have sets, so you can just use them. For example:However, Python doesn't have automatic multilevel/recursive dicts, so if you want that, you need to do it explicitly with  or :This structure—a dict of sets (or a hash of hashes whose values are always 1)—is sometimes known as a "multidict", because it's a value of representing a dictionary mapping a single key to 0 or more values, instead of to 0 or 1 value. Both languages have third-party modules that implement multidicts more directly, but neither language really needs them, because it's so simple to do on your own.What you're doing here:… is not an equivalent to the perl code; you're storing just the last  for each , instead of storing all of them.Finally:In python, it seems more sense to make these list appending instead of a dict No. A list is a way to simulate a set, but it has some significant tradeoffs. In particular, lists allow duplicate entries, and take O(N) instead of O(1) time to search. Those tradeoffs are nearly identical in perl and in python, so if it's not appropriate in perl, it's not appropriate in python either.If you're just keeping a few values and will never have duplicates, go ahead and use a list, in either language. If you're potentially going to have large sets, or may have the same values showing up many times, you need a real set, in either language (which, in perl, you have to fake with a hash).
Is the idea just that in perl storing long lists as a hash is better than as an array, if you are trying to look up arbitrary members?Yes, that's exactly it. Searching an array by value is O(N). Searching an hash by key is O(1).The code for searching is also much more concise when using a HoH instead of an HoA. Where as you can use the following with an HoH:An HoA would require the following:Why equal 1 always?Personally, I useBut many people actually use the following to conserve memory: (16 bytes per entry on a 32-bit build)The check becomes


Answer URL
