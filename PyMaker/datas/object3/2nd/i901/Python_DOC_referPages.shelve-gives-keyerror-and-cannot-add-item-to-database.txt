Natural Text
My following code:gives me the following output:I also noticed the following errors in my logs:How is it possible that shelve returns keys that doesn't seem to exist?
Either the dbm file backing your shelve is corrupted, or you have some kind of incompatibility between your file and the  backend library used for your shelve file. is backed by the  module, and it depends on your OS exactly what specific implementation is used, but generally speaking a  file is an on-disk hash table, a data structure that uses a sparse table structure to efficiently find keys again later on.To show you all the keys in a file, a  library would scan over the table and give you each key as it finds a non-empty slot. But to find the value for a given key, it would hash the key to come to a number between zero and the maximum size of the table, look at the corresponding row in the table and get you the value.Between those two techniques there is a discrepancy; you appear to have keys in the wrong location in the table. How that happened is hard to say, it could be that file corruption changed the bookkeeping and the actual table size differs from what the bookkeeping info states it should be. It could be that you changed machines and the hashing implementation is now wrong. Or something else, but we can't really help there, sorry.


Answer URL
https://docs.python.org/3/library/dbm.html
