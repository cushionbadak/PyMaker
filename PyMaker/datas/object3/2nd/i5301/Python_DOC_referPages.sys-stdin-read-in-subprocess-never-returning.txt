Natural Text
I'm trying to understand subprocess.Popen and subprocess.PIPE. While doing so, I created three small scripts.The goal of this exercise is, to print data with one script, read it from the other and echo this back to the first script.The problem is, that the last sys.stdin.read() prevents the entire code from working properly.test.pyscript1.pyThe last line in script1.py  causes the entire program to get stuck. If I comment it out, everything works fine.Why is that so and why am I not able to communicate any further? I didn't find an answer yet.script2.py
When you do:this tries to read everything  has to say; that is, it reads until the file handle is closed. That doesn't happen, because  is itself waiting to read:Communicating between processes using pipes can be a bit tricky. I'd recommend reading through the documentation for the subprocess module.To solve your immediate problem, I know of two simple solutions. One would be to switch to communicating in lines. In , write a newline:And in script2.py add a newline and switch to  as well:The other approach would be to switch to using  instead of read. It takes an argument for the number of bytes to read, but doesn't wait to receive that much data before returning it.


Answer URL
https://docs.python.org/3/library/subprocess.html#module-subprocess
https://docs.python.org/3/library/io.html?highlight=read1#io.BufferedIOBase.read1
