Natural Text
Python 2.7 unittest works well when run the single script file, but it failed when run the folder in Pycharm Run/Debug Configurations.The unittest case:This works well when I set Python tests script in 'Jetbrains Pycharm Run/Debug Configurations'. All 5 tests passed.But when I setup Python tests folder which contains the 'LogTestCase' script above in 'Run/Debug Configurations'. The 5 tests failed (There are all 10 tests. Another 5 are in another file).Result:All above, thanks.
What I can guess is that in the other test you have again something like thisWhen you run the tests alone you have no problem. But when you run all of them in a test suite like pycharm do, the second one  have no effect (the module is already loaded):  module that I can guess get its configurations by  module still use the ones configured in the previous test.My advice is to take a look to  framework (available by pip in python 2.7) and its  methods: by this way you can have a complete control of context where you would apply your hack changes.You can also try by use  to work around this but I strongly discourage you its hard to maintain test isolation if you start to use these kind of tricks and you will meet some kinds of very odds behavior. Study deeply : you will love it.[EDIT]Without see how  use  I cannot really answer to your question by a real fix. I can just guess that the better place to patch is  module, but how to do it is impossible to say. What log use from  module? How it is imported? What you really need here is a way to configure logger in some way and set path and filename. I guess you can do it both by introduce a new function in  module or by patch but details are really twisted how is  module code. 


Answer URL
https://docs.python.org/3/library/unittest.mock.html
https://docs.python.org/3/library/unittest.mock.html#patch
