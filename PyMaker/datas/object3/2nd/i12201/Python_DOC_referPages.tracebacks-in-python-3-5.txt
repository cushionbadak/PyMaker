Natural Text
To handle the errors in Python 3.5 gracefully, I am using the following code:After adding this code at many places in my program, I am observing weird behavior as in program running long behaving on same data differently than program running short. I cant conclusively say this behavior showed up after adding the code above.But I remember reading somewhere that if I use traceback than I have to deallocate memory manually.Please advice if the module I have above is technically correct or something needs to be done to avoid issues.
The main change in Python 3 regarding exceptions is that it's no longer necessary to use  in order to get the traceback. It's now available as the  attribute on the exception object (this is possible since all exceptions in Python 3 must inherit from the base  class, while older versions of Python 2 allowed anything to be treated as an exception).So, you could replace the first two lines of your  code with  and then use , , and  in the error reporting code, rather than the values you were getting from .Having the traceback as an attribute on the exception can have some adverse consequences though on memory usage. Specifically, it creates a reference cycle between the current frame of execution and the exception. The frame references the exception (if you've bound it to a local variable), the exception references the traceback through its attribute and the traceback references the frame. The cycle means that the memory can't be reclaimed immediately by the reference counting system when it goes out of scope. Instead it has to rely upon the cyclical garbage collector, which might be slow to reclaim the memory, or even never get around to it (you can turn it off completely).To reduce the impact of this issue, Python will automatically delete the exception variable created by a  statement at the end of its block. If you create references to the exception under some other name, you may need to clean them up yourself to avoid the memory sticking around longer than you need it.So, if you really are having exception related memory issues, try adding  at the end of the  block, just before .  Or alternatively, switch to the  syntax I described above, and  (or whatever name you use) will be removed from the local namespace for you automatically.


Answer URL
https://docs.python.org/3/reference/compound_stmts.html#the-try-statement
