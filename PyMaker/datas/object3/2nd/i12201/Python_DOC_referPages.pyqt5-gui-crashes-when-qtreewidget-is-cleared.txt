Natural Text
When the # is removed from the line in the code below, why does the GUI crash when the button is clicked?The line in the code is: self.treeWidget.currentItemChanged.connect(self.current_selection)If anyone can explain to me what is occurring, it'd be greatly appreciated.
To answer the specific question: Why does the GUI crash?This is due to new behaviour which was introduced with PyQt-5.5. To quote from the PyQt5 docs:In PyQt v5.5 an unhandled Python exception will result in a call to  Qtâ€™s qFatal() function. By default this will call abort() and the  application will terminate. Note that an application installed  exception hook will still take precedence.Fortunately, as the final sentence indicates, this new behaviour can be bypassed by installing an , which will allow your program to deal with unhandled exceptions in a more graceful manner.As a bare minimum, the old behaviour of simply printing the traceback to stdout/stderr can be restored like this:But obviously, displaying the error in some kind of message-box would be a far more preferrable way to inform the user that a problem has occurred.
By default, if there is no selection,  is the first item in the tree.When the button is clicked,  is called. All the items are removed from the tree widget, so there is no more a first item: the signal  is emitted.If there is nothing in the tree,  will returns . In ,  is , and that's why you get:AttributeError: 'NoneType' object has no attribute 'text'To fix this, you can test if  is  before proceeding further:


Answer URL
