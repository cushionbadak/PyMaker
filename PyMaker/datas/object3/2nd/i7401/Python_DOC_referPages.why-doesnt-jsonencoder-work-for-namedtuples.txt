Natural Text
I am unable to to dump  as correct JSON.First, consider the official example for using custom JSON serializer:Second, now consider the following example which tells Python how to JSONize a  object:Finally when we try to implement the same thing using namedtuples,  doesn't give any errors but gives the wrong output. Take a look:The output I get is not a dict-like but rather just a list of values i.e. Why?Is the default behavior such that information is lost?Does json.dumps ignore the explicitly passed encoder?Edit: by correctly jsonized namedtuple I mean that json.dumps should return data like exactly , where  is a pre defined namedtuple
As I said in a comment, the  only calls  when it encounters an object type it doesn't already know how to serialize itself. There's a table of them in the  documentation. Here's a screenshot of it for easy reference:Note that  is on the list, and since  is a subclasses of , it applies to them, as well. (i.e  ⇒ ).This is why your code for handling instances of the  class never gets called.Below is one way around the issue—namely by creating a  class whose instances which won't be a type it thinks it already knows how to handle, and then using a custom  to watch for them and does what you want. Here's what I mean:Output:For some additional information and insights, also check out my answer to the question Making object JSON serializable with regular encoder.


Answer URL
https://docs.python.org/3/library/json.html#encoders-and-decoders
