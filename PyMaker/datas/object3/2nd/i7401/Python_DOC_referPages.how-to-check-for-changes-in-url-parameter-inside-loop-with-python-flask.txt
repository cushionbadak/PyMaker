Natural Text
I am trying to start and stop a service running as a Python web app using Flask. The service involves a loop that executes continuously, listening for microphone input and taking some action if the input surpasses a predefined threshold. I can get the program to start execution when the url is passed with a /on parameter, but once it starts, I can't find a way to stop it. I have tried using request.args.get to monitor the status of the url parameter and watch for it to change from /on to /off, but for some reason, the program doesn't register that I have changed the query string to attempt to halt the execution. Is there a better way to execute my code and have it stop when the url parameter is changed from /on to /off? Any help is greatly appreciated!
When an HTTP request is made from the client to the Flask server, the client sends one request and waits for a response from the server. This means when you send the  parameter, there is no way for the client to retroactively change it.There are a few different ways to get your desired behavior.The first that comes to my mind is to use some asynchronous code. You could have code that starts a thread/process when the  is "on" and then finishes the request. This thread would run your audio loop. Then the client could send another request but with the  being "off", which could alert the other process to gracefully stop.Here is some information about multiproccessing; however, there is a lot of information about how to do similar things with Flask using Celery, etc.


Answer URL
https://docs.python.org/3/library/multiprocessing.html
