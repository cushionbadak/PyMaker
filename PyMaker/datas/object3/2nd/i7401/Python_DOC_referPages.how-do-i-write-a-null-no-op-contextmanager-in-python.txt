Natural Text
Sometimes I need a dummy context manager that does nothing. It can then be used as a stand-in for a more useful, but optional, context manager. For example:How do I define such a trivial, empty context manager? Does the Python library offer one off the shelf?How about cases where we want the context to be used with an  clause?
Python 3.7 and above: use , specifically designed for this reason.Before Python 3.7, the standard library does not offer a context manager specifically designed for these use cases, but there are some workarounds.Since Python 3.4,  can be used for that purpose in the first case, i.e. when there is no  clause:Since Python 3.3, a similar work-around is also available, , albeit slower than  (it takes twice as long in my tests).Before Python 3.3, or in case you need an  clause before Python 3.7, developers need to roll their own.Here is one possible implementation (see note at the bottom, but all errors are mine):One can then write:Of course,  will need to support all operations required of the "meaningful" resource. So for example, if the meaningful context manager, on , returns something that is made to  inside the managed block,  will also need to support that, albeit possibly without doing anything at all.Source: A Python feature request. Many thanks to all those who contributed to that discussion. This is my attempt at summarising its outcome in a self-answered question, to save people time reading that long thread. Also see Python documentation's mention of this use of .
Since Python 3.2,  can be use as a no-op context manager. See https://docs.python.org/3/library/stdtypes.html#memoryview.release.ProsNo imports requiredWorks on 3.2+Roughly twice as fast as ConsYou probably want to add a  comment.
I just used  as a dummy context manager. Temporary lock, only used by the context manager.


Answer URL
https://docs.python.org/3/library/contextlib.html#contextlib.suppress
https://docs.python.org/3/library/contextlib.html#contextlib.ExitStack
https://docs.python.org/3/library/contextlib.html#simplifying-support-for-single-optional-context-managers
https://docs.python.org/3/library/stdtypes.html#memoryview.release
https://docs.python.org/3/library/contextlib.html#simplifying-support-for-single-optional-context-managers
