Natural Text
I am using Python 3, and trying to detect if an item is the last in a list, but sometimes there will repeats. This is my code:And I would like this output:But I get this output:I understand why I am getting the output I do not want.I would prefer if I could still use the loop, but I can work around them. (I would like to use this with more complicated code)
Rather than try and detect if you are at the last item, print the comma and newline when printing the next (which only requires detecting if you are at the first):The  function adds a counter to each element (see What does enumerate mean?), and  is true for all values of the counter except  (the first element).Or use  to insert separators:The  value is inserted between each argument ( applies all values in  as separate arguments, see What does ** (double star) and * (star) do for parameters?). This is more efficient than using  as this doesn't need to build a whole new string object first.
If you really just want to join your elements into a comma+newline-separated string then it's easier to use  method:
While these answers may work for the specific case of the OP, I found they were unsatisfactory for broader application.Here are the methods I could think of/saw here and their respective timings.Index MethodNegative Slice MethodEnumerate MethodHere are some timing for some different methods: Note: values <10us rounded to 0As you can see, the index method is always slower, and it only get exponentially worse as the list size increases. I don't see any reason to use it ever. The Negative slice method is the fastest in all cases, but if you have duplicate items in your list, it will give you a false positive. Also, the negative slice method requires that the sequence you are iterating over supports indexing. So, in the case of duplicate items in your list (or not index supporting sequence) use the fast-but-not-fastest enumerate method.Edit: as a commentator noted, calculating the length of the list within the loop isn't ideal. I was able to shave 35% off the enumerate method (not reflected in the table at this moment) using this knowledge.tldr: use negative slice if all elements are unique and sequence supports indexing, otherwise enumerate method
You are not getting the expected output because in your code you say, "Hey python, print a comma if current element is not equal to last element."Second element 9 is equal to last element, hence the comma is not printed.The right way to check for the last element is to check the index of element :(Also, this might throw a value error. You should check for that too.)
If you are just looking to see if the item is last in the (or any item in any list) you could try using a function to check if an item is last in a list.


Answer URL
https://docs.python.org/3/library/stdtypes.html#str.join
