Natural Text
I am running a Python3 app via Gunicorn with two-way SSL configured. This requires a local cert/key to verify the app as well as a ca_certs file to verify the client. Gunicorn relies on the standard  module in Python, particularly the  method.The service starts and responds to curl requests fine when I use self-signed certificates for both server and client authentication. However when I use certificates signed by another CA, I get an error .A working setup, with self-signed certs:With Gunicorn configured as follows:And curling as follows:Produces a successful response:A failing setup, with a different series of certs:With Gunicorn configured as follows:And curling as follows:Produces an error:Any thoughts on whether I am configuring this the wrong way? And why self-signed certs are working but other certs are not?Note this config worked previously when using Stunnel, where I set the  level to 4 ("Ignore the chain and only verify the peer certificate."). If there is something similar in Python I believe that would get me in the right direction.
I don't think that this is be possible as of Gunicorn 19.9.As well as having the complete certificate chain on the server, in order to validate the client/peer certificate, I believe you will need to be able to configure the , and especially be able to set  when in server-mode.Gunicorn 19.9 (and master at the time of writing) does not currently use the -based wrapper on the connection, so this is not possible, see https://github.com/benoitc/gunicorn/issues/1140 .


Answer URL
https://docs.python.org/3/library/ssl.html#verifying-certificates
https://docs.python.org/3/library/ssl.html#ssl.CERT_REQUIRED
