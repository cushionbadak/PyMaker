Natural Text
I am trying to run a routine on two lists, sourced from MySQL queries - one contains CIDR networks and the other contains IP addresses. I am trying to compare entries in the IP list to see whether they are in the networks described by the CIDR list, and act on those that are not.I am trying to use the  module but this doesn't appear to be implemented on Python3 yet?I have also tried to use  but I can't seem to get them to compare correctly. Using ipaddress I have the following code:As things stand the code gives a value error as follows: I have tried converting  to an utf-8 string but this makes no difference.
What you are describing as a list is actually a tuple.First, when I ran your code I did not receive the error you are gettingValueError: b'82.148.47.64' does not appear to be an IPv4 or IPv6 addressInstead I received the followingraise ValueError('%s has host bits set' % self)  ValueError: 1.1.6.0/20 has host bits setIs this the error your are actually receiving? If so, this is how to properly correct it.Referenced from ipaddress module Defining Networks: By default, attempting to create a network object with host bits set will result in ValueError being raised. To request that the additional bits instead be coerced to zero, the flag strict=False can be passed to the constructor:This is because the host bits are set and will need to be coerced to zero, as the documentation states above. Pass the following flag strict=False to the constructor.For example.Also, in your ips contained in your tuple need only to be formatted to a string. For example.OR the following will be presented to you. 'ValueError: b'2.8.4.64' does not appear to be an IPv4 or IPv6 address' The full working code.


Answer URL
https://docs.python.org/3/howto/ipaddress.html#defining-networks
https://docs.python.org/3/library/stdtypes.html#bytes.decode
