Natural Text
This is the code:I get an error:However if I move the  call to inside the start() function, it works. But I don't want to open the file multiple times.
The problem is that  returns a file object, and you're passing the same file object to all  coroutines you are creating at top-level. The coroutine instance that happens to be scheduled first will transfer the file object to  as part of the  parameter, and  will read the file to the end and close the file object. The next  coroutine will try to read from the now-closed object which will raise the exception.To fix the issue without opening the file multiple times, you need to make sure to actually read the data as a bytes object:This will pass the same bytes object to all coroutines, which should work as intended.


Answer URL
https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files
