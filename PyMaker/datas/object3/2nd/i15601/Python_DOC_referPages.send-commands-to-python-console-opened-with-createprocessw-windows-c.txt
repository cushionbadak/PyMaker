Natural Text
I try to redirect in windows the cmd.exe stdout&stdin (with CreateProcess()). It works fine as long as I run simple commands or open GUI apps, but if I try running a software like python, it does not give me it's output anymore (nor getting the input through stdin).Code example:
It's not a bug, it's a feature. :-)From Python Setup & Usage, section 1.1.1, Interface options (emphasis added):The interpreter interface resembles that of the UNIX shell, but provides some additional methods of invocation:When called with standard input connected to a tty device, it prompts for commands and executes them until an EOF (an end-of-file character, you can produce that with Ctrl-D on UNIX or Ctrl-Z, Enter on Windows) is read.When called with a file name argument or with a file as standard input, it reads and executes a script from that file.A pipe is neither a file nor a tty device, but it looks like a file as far as the C standard library (and hence Python) is concerned.  So the second behaviour kicks in, and Python attempts to read to the end of file.  Since we never close our end of the pipe, that never happens.This behaviour isn't particularly sensible in my opinion (or at least not in Windows) and you could file a bug if you wanted.  I would guess that such a proposal would be rejected, since any change would break backwards compatibility, but I could be wrong.You can work around the problem by providing the  option on the command line:That makes Python enter interactive mode, despite the fact that stdin isn't a terminal.Unfortunately, there is no known way to make a pipe that looks like a terminal on Windows.


Answer URL
https://docs.python.org/3/using/cmdline.html#interface-options
