Natural Text
I have a program written in python and used git command in it..For some reason I don't want to use git-python or others instead of subprocess.But I'm currently stuck in getting  output.I've tried some code snippet. Some works fine with commands like , but not the .for exampleusing threador and most common oneall of them works fine with , but not .Is there any way to solve this?Thanks in advance!UPDATE1:In face, I'm just want to get the finished percent of . Log or any log files are not needed.
When not writing to a terminal,  doesn't have any output to either stdout or stderr, except on error.When writing to a terminal, of course, it has lots of output—but that output is progress bars that are continually overwritten. Usually, you don't want that—it's going to be a big mess of control characters and repeated lines.But if you do want it, there are two options.First, you can use a PTY (Pseudo-TTY). You can create a PTY with , then hand the PTY off explicitly to the child process. Or you can use , which handles forking and automatically hooking up the PTY so all you have to do is call one of the  functions. Or you can use the  module. (It's not entirely clear which is more portable;  and  claim that  is more portable, and conceptually it's designed that way… but it's also only really tested on Linux.)Note that  wants the PTY as its stderr, not its stdout.Alternatively, most  commands have a  flag that causes them to write progress to stderr even if it's not a terminal. At least as of the version documented here, this includes , but of course you should check the  for your local version. So, that may be all you need. (Also see the  flag.)However, this may not be as nice. For me, when I provide a PTY with no attached termcaps, I get each line followed by a  without  to overwrite it; when I use the  option,  detects the termcaps of whatever terminal my script happens to be running it, which means I end up getting ANSI color codes as well as s.Of course either way I'm getting hundreds of useless lines that I have no interest in, but I assume that's what you wanted? (Or maybe you want to use  to translate the  to ? That's slightly cheating, because this is self-overwriting Unix terminal output, and you're pretending it's classic-Mac output… but it works.)


Answer URL
https://docs.python.org/3/library/os.html#os.openpty
https://docs.python.org/3/library/os.html#os.forkpty
https://docs.python.org/3/library/os.html#process-management
https://docs.python.org/3/library/pty.html#module-pty
