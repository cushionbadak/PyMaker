Natural Text
I have a problem with inheriting from the  class. I can't understand why the method  works:But exactly the same code with  successor class gives an error:Exception:The documentation and tutorials do not have complex examples (only with 'print' statements) and they works great: https://docs.python.org/3/library/contextlib.htmlI don't understand why method  works, although it returns a generator:Here I write some small and simple code:https://gist.github.com/tranebaer/46f94263030dd8f7c1bfcf72d0e37610
The  method is not supposed to be a generator, unless you want to treat the return value as such in the runtime context. It is called when entering the block governed by the with-statement and its return value is bound to the target(s) specified in the  clause, if any. So the attribute error is the result of calling the method  on the generator inside the block, when you meant it to be the  object. Possible cleanup and exception handling should take place in the  method:Note that you don't need to inherit from  in order to make a context manager. Just implementing  and  is enough. In fact in this case it is a bit pointless, because a function decorated with  has no access to the  object.


Answer URL
https://docs.python.org/3/library/contextlib.html
https://docs.python.org/3/reference/datamodel.html#object.__enter__
https://docs.python.org/3/reference/compound_stmts.html#as
https://docs.python.org/3/reference/datamodel.html#object.__exit__
https://docs.python.org/3/library/contextlib.html#contextlib.ContextDecorator
https://docs.python.org/3/library/contextlib.html#using-a-context-manager-as-a-function-decorator
