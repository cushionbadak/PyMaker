Natural Text
I would like to run ssh with print of python.The followings are my test code.case 1 and case 2 did not work.The outputs are followings,case 1:case 2:Please let me know how it works.
It should work withor equivalentlyExplanationThe outermost quotes and the escaping are for the local Python. So in either case, the local Python string will be .There is no quoting or escaping required for the local shell, as  won't invoke it unless  is passed.Thus the single quotes within the python string are for the remote shell (presumably  or other -compatible shell). The argument passed to the remote Python is thus . (And the double quotes in there are to signify the string literal to print to the remote python.)Can we do without escaping (without )?As there are three levels involved (local Python, remote shell, remote Python), I don't think so.Can we do with a single type of quotes?Yes, with a bit more escaping. Let's build this from behind (or inside-out).We want to printThis needs to be escaped for the remote Python (to form a string literal instead of an identifier):Call this with the  function:Quite familiar so far.Now we want to pass this as an argument to  on a -like shell. To protect the  and  to be interpreted by that, we quote the whole thing. For the already present  not to terminate the quotation, we escape them:You can try this in a terminal:Perfect!Now we have to represent the whole thing in (the local) Python. We wrap another layer of quotes around it, have to escape the four(!) existing quotation marks as well as the two backslashes:(Done. This can also be used as .)Can we do with only single quotes () and escaping?I don't know, but at least not as easily. Why? Because, other than to Python, double and single quotes aren't interchangeable to  and : Within single quotes, these shells assume a raw string without escaping until the closing  occurs.My brain hurts!If literally, go see a doctor. If figuratively, yeah, mine too. And your code's future readers (including yourself) will probably feel the same, when they try to untangle that quoting-escaping-forest.But there's a painless alternative in our beloved Python standard library!This is much easier to understand. The inner quotes (double quotes here, but doesn't really matter:  works just as fine) are for the remote Python. The outer quotes are obviously for the local Python. And all the quoting and escaping beyond that for the remote shell is taken care of by this utility function.
The correct syntax for  2 and 3 is:


Answer URL
https://docs.python.org/3/library/shlex.html#shlex.split
