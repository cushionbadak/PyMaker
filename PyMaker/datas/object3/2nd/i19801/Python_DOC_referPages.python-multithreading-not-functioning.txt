Natural Text
Excuse the unhelpful variable names and unnecessarily bloated code, but I just quickly whipped this together and haven't had time to optimise or tidy up yet.I wrote this program to dump all the images my friend and I had sent to each other using a webcam photo sharing service ( 321cheese.com ) by parsing a message log for the URLs. The problem is that my multithreading doesn't seem to work.At the bottom of my code, you'll see my commented-out non-multithreaded download method, which consistently produces the correct results (which is 121 photos in this case). But when I try to send this action to a new thread, the program sometimes downloads 112 photos, sometimes 90, sometimes 115 photos, etc, but never gives out the correct result.Why would this create a problem? Should I limit the number of simultaneous threads (and how)?
There are multiple issues in your code.The main issue is  global name usage in multiple threads. To fix it, pass the name explicitly as an argument to .The easy way (code-wise) to limit the number of concurrent downloads is to use  (available on Python 2 as ) or :
Did you make sure your parsing is working correctly?Also, you are launching too many threads.And finally... threads in python are FAKE! Use the multiprocessing module if you want real parallelism, but since the images are probably all from the same server, if you open one hundred connections at the same time with the same server, probably its firewall will start dropping your connections.


Answer URL
