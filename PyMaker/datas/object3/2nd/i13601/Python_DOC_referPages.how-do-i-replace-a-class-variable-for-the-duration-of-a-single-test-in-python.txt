Natural Text
I'm trying to test a cache class where old items should be automatically deleted. The amount of items the cache can hold is controlled by a "constant" class variable like this:For testing purposes I would like to change that constant for the duration of a single test case. Using  I could replace the class variable with a  but that's not really what I'm trying to do. I just need to replace it with a different number.Is there an elegant way to do this in Python (like ), or should I just reset the variable myself on ?I'm using Python 3.4.3
patch can do this already. try:Of course you can use  as a decorator as well.
Reading the docs more carefully, it turns out  actually has an optional argument that controls what the variable is replaced by (instead of a mock object), so I can do this:Or, as Dunes pointed out:Which arguably looks prettier.
You could consider providing a class constructor that sets MAX_ITEMS. Something like:This would allow you to set the cache size (during testing or otherwise)


Answer URL
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch
