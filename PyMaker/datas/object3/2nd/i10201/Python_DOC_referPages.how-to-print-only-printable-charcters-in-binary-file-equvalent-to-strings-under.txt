Natural Text
I am undertaking conversion of my python application from python 2 to python 3. One of the functions which I use is to get the printable character out of binary file. I earlier used following function in python 2 and it worked great:Code is actually from Python equivalent of unix "strings" utility. When I run the above code with python 2 it produces the output like this which is absolutely ok for me:However, the function gives weird results under python 3. It produces the error:So I converted the 'int' to 'str' by replacing this with this(I also converted all the places where the same error message is thrown)Now the python 3 gives the following output:I cant see any characters when I use python 3. Any help to get the code working or pointer to the solution is appreciated. All I require is to extract the strings from binary file (very small with few kb) and store it in a variable.
In Python 3, opening a file in binary mode gives you  results. Iterating over a  object gives you integers, not characters, in the range 0 to 255 (inclusive). From the  documentation:While bytes literals and representations are based on ASCII text,  objects actually behave like immutable sequences of integers, with each value in the sequence restricted such that Convert  to a set and test against that:andNext, you want to append to a  object to keep things reasonably performant, and decode from ASCII to produce a  result:Rather than iterate over the bytes one by one, you could instead split on anything that is not printable:I'd explore reading the file in chunks rather than in one go; don't try to fit a large file into memory in one go here:The buffer carries over any incomplete word from one chunk to the next;  produces empty values at the start and end if the input started or ended with non-printable characters, respectively.
I am sure this will work.  As a generator:As a function is to just collect the outputs of the getPrintablesFromBinaryFile() into a iterable.Explanation:Import the needed modulesDefine the functionLoad the modulesCreate the bufferGet a byte from the bufferCheck if it is EOFIf yes, stop the generatorTry to decode using the encoding (like  does not decode using UTF-8)If impossible, it cannot be a printableIf printable, yield itNote:  is the encoding for many text files


Answer URL
https://docs.python.org/3/library/stdtypes.html#bytes
