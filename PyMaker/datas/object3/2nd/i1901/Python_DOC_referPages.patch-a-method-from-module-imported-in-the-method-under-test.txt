Natural Text
I am trying to write a unit test (or call it integration test if you want) for my main module and  method.It looks like this:I have tried to mock/patch the modules in these ways:and and andBut all of these ways do not mock/patch the  method ending up in the real method invoked.When I tried to patch  or  I only got s. I tried these targets after reading the Where to patch part.Honestly I do not really understand where is the problem with the patching, as I am patching before the module  is imported and it's  is called (as this happens only after  part in the test). Any help is highly appreciated!
Patching and mocking only works within the same interpreter, but your call to  runs the the  function in a new interpreter. Instead, you probably want to call the  function directly. That might involve patching some  objects like  and . However, a common practice is to provide an optional  argument to the  function:This way, one can easily inject and test command-line arguments:Also, the pytest.raises context can be used to manage the call to :


Answer URL
https://docs.python.org/3/library/unittest.mock.html#where-to-patch
