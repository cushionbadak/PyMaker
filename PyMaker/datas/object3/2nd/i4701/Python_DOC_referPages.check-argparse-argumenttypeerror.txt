Natural Text
I want to use  to check if the  exception is raised for an incorrect argument:However, running  says  and consequently the test fails. What am I doing wrong?
The problem is that if argument's type converter raises exception   exits with error code 2, and exiting means raising builtin exception . So you have to catch that exception and verify that the original exception is of a proper type:
Here's the  test in the  file (found in the development repository) is a subclass defined at the start of the file, which redefines the  method, so it doesn't exit, and puts the error message on .  That part's a bit complicated.Because of the redirection I described the comment, it can't directly test for .  Instead it has to test for its message.


Answer URL
https://docs.python.org/3/library/argparse.html#invalid-arguments
