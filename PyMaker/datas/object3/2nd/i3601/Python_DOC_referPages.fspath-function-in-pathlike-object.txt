Natural Text
I'm trying to implement a PathLike object and use fspath command to retrieve the o/p from fspath function.What I'm expecting is, if a PathLike object is passed to fspath function, it should return the value of fspath (here it should return the path in bytes). However, it is still returning in str.Can you please let me know where I went wrong and how should I change the code so that it works as expected?
 should be defined asThen used asWhen  is the argument to , the method  will be automatically invoked, and it should return the value of --not directly, but properly encoded as a  object.
The problem is that you’re calling  on  instead of on .While  is a pathlike object, for which  will use the  protocol,  is just a string, so it returns the string unchanged.As the docs say:If  or  is passed in, it is returned unchanged. Otherwise  is called and its value is returned as long as it is a  or  object. In all other cases, is raised.Meanwhile, your  is wrong in two ways. First it’s a method, which should take  and do something with ; as-is, you’re taking that  as a variable named  and trying to use it as a string. Second, you have to call  on your string (with the appropriate encoding—which is usually the fs encoding, although in that case you don’t even need to bother and can just return a string), not pass it to the  constructor.Also, for debugging purposes, it would had been a lot easier to spot the problem if your string and bytes were completely unrelated. If, say,  were  while  returned , it would be pretty clear whether it was ignoring your method or deciding things behind your back.


Answer URL
https://docs.python.org/3/library/os.html#os.PathLike.__fspath__
