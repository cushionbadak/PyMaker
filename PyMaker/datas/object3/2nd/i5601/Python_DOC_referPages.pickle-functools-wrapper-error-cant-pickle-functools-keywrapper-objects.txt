Natural Text
I am trying to pickle a SortedListWithKey for which I am using cmp_to_key() from functools to convert a comparison function to a key function. However, the cmp_to_key() seems to make my object unpickable and I get the following error: TypeError: can't pickle functools.KeyWrapper objectsHow can I fix it? This is a code sample to reproduce the error:Thanks!Note: The pickling works fine without using the cmp_to_key() function, but I need it since my function is not a key function.
The problem seems to be that cmp_tp_key is now written in C, and the class it returns is neither pickleable nor subclassable. However, the original pure python version is still maintained in the source, and is very simple. When this is used with your example, it works correctly. Of course, the obvious downside is that the pure python version is slower - but the difference is not huge.Here is a working version of your example:Output:


Answer URL
https://docs.python.org/3/library/functools.html#functools.cmp_to_key
