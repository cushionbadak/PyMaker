Natural Text
Is it possible to close opened files based only on theirs directories? I would like to close files with specific extension. If it's not possible, I can close all opened files. My code has become so long that I cannot control the closing of files in the other way. I'm preparing application for external users and I developed "reset" button, but I met a problem with accessing to some folder cause by these files are still opened. I'm using psutil to get list of all opened files by my .py script.
You can test the directory and the extension using the builtin os.path library, or the nice path.py. Or, with path.py:
My code has become so long that I cannot control the closing of files in the other way.Then it's time to stop everything and fix your code. Actually, your code SHOULD close each file as soon as it's done with it (the  statement is your friend here), and I have a hard time thinking of any reason for keeping that many files opened at once anyway.In all cases: you need to have a reference to a file to close it, period. If you open a file, don't close it and discard the reference to the file then well... too bad. Ok, there might eventuall be a very ugly workaround which would be to replace all  calls with your own version that stores the opened file in some global list. But really, that's only going to make your code worse, so do the right thing: fix your code to properly close files at the right place.


Answer URL
https://docs.python.org/3/library/os.path.html
