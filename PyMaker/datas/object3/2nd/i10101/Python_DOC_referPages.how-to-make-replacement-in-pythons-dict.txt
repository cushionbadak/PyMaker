Natural Text
The goal I want to achieve is to exchange all items whose form is  to the from  in the dict. I use two  named  and  to test my function. Here is the code:sometimes I can get correct result like:But most of time I get wrong results like that:How could I update my code to achieve my goal?
Your problem is caused by the fact that python dictionaries are unordered. Try using a OrderedDict instead of  and you should be fine. The OrderedDict works just like a normal  but with ordering retained, at a small performance cost.Note that while you could create an OrderedDict from a dict literal (like I did here at first), that dict would be unordered, so the ordering might not be guaranteed. Using a list of  pairs preserves the ordering in all cases.
Try this one. Your problem is due to mutating starting dict. You need to change its copy.


Answer URL
https://docs.python.org/3/reference/datamodel.html#object.__hash__
