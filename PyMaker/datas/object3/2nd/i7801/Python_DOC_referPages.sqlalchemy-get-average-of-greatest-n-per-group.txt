Natural Text
I'm trying to create a Flask app (Postgresql database) that shows the latest score from individual players, including the average scores and goals for the team. So a player can have multiple scores, but on the leaderboard I only want to show her most recent score, and show an average number of goals for the whole team, based on the latest score per player.My Models.pyMy app.py:'Latest score per player' is properly showing the latest entered score per player. But 'Average goals per player' returns an error:AttributeError: 'BaseQuery' object has no attribute 'func'How can I query for the average goals across all players for only the latest entered score per player?Update:I feel I'm closer with:But not really there yet. Struggling to get the func.avg to work together with the distinct and order_by.
If I understood you correctly, then you simply need to use latest scores per player as a subquery and average the results. Since you store the Query object in latest scores per player, you can use that:This will do 2 trips to the DB. You could also just query the results of latest scores per player and calculate the average in Python. With a recent enough version of Python you can use the statistics module:Or do it yourself (add necessary conversions to float, if using Python 2):


Answer URL
https://docs.python.org/3/library/statistics.html#statistics.mean
