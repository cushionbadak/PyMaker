Natural Text
Big file compression with python gives a very nice example on how to use e.g. bz2 to compress a very large set of files (or a big file) purely in Python.pigz says you can do better by exploiting parallel compression.To my knowledge (and Google search) insofar I cannot find a Python equivalent to do so in pure Python code.Is there a parallel Python implementation for  or equivalent?
I don't know of a  interface for Python off-hand, but it might not be that hard to write if you really need it. Python's  module allows compressing arbitrary chunks of bytes, and the  man page describes the system for parallelizing the compression and the output format already.If you really need parallel compression, it should be possible to implement a  equivalent using  to compress chunks wrapped in  ( is the thread-backed version of the  API, so you wouldn't incur massive IPC costs sending chunks to and from the workers) to parallelize the compression. Since  is one of the few built-in modules that releases the GIL during CPU-bound work, you might actually gain a benefit from thread based parallelism.Note that in practice, when the compression level isn't turned up that high, I/O is often of similar (within order of magnitude or so) cost to the actual  compression; if your data source isn't able to actually feed the threads faster than they compress, you won't gain much from parallelizing.
You can use the  operation with  to complete the last deflate block and end it on a byte boundary. You can concatenate those to make a valid deflate stream, so long as the last one you concatenate is flushed with  (which is the default for ).You would also want to compute the CRC-32 in parallel (whether for zip or gzip -- I think you really mean parallel gzip compression). Python does not provide an interface to zlib's  function. However you can copy the code from zlib and convert it to Python. It will be fast enough that way, since it doesn't need to be run often. Also you can pre-build the tables you need to make it faster, or even pre-build a matrix for a fixed block length.


Answer URL
https://docs.python.org/3/library/zlib.html
