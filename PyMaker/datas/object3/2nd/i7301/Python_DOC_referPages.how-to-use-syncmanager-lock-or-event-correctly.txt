Natural Text
I'm having trouble using  correctly. I read the official doc, but it offers no working example. I also have no idea how to use  correctly.Below is the minimal code to illustrate my problem.  and  both need to update a shared object . However, I want  to acquire the lock first, update , and then pass control to . If you run the code below as-is, the  statements are all mixed up.Sample output:
I figured out a workaround. Don't use the builtin  for the following reasons:It's creating a new Lock object every time instead of sharing.It wraps around threading.Lock(), NOT multiprocess.Lock(). Looks like it doesn't work with multiprocessing!Solution is to register your own lock manager:


Answer URL
https://docs.python.org/3/library/multiprocessing.html#multiprocessing.managers.SyncManager.Lock
