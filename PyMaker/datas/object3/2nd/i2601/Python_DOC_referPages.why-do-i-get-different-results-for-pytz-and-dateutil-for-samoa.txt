Natural Text
I was expecting that the following two would give the same result, but they didn't. Why is that the case?Versions:Example 1: pytzprints  (which is correct)Example 2: dateutilprints  (which is wrong)
You have discovered a bug in , which I have now reported and fixed. The bug was caused by an issue with how the "wall time" of transitions were calculated in , which was making some assumptions that do not hold when a time zone's base offset changes during DST. Expanding your example a bit:You can see that  always calculates the date and time correctly, but when  calls , the offset change happens 1 hour early. This is because  calls  under the hood, while  calls .  stores the transition times in both UTC and local time, the  UTC times are used in  and the local times are used in ,  and . This bug involved over-compensating for DST when calculating the "wall time" of the transition during DST->DST transitions (which are exceedingly rare), which is why it didn't affect .Bottom line - you are using both  and  correctly, and this error will be fixed in the next release.Note: This answer was edited after I found the cause of and fix for the bug.


Answer URL
https://docs.python.org/3/library/datetime.html#datetime.tzinfo.fromutc
https://docs.python.org/3/library/datetime.html#datetime.tzinfo.utcoffset
