Natural Text
How do control what files are included in a wheel?  It appears  isn't used by .UPDATE:I was wrong about the difference between installing from a source tarball vs a wheel.  The source distribution includes files specified in , but the installed package only has python files.  Steps are needed to identify additional files that should be installed, whether the install is via source distribution, egg, or wheel.  Namely, package_data is needed for additional package files, and data_files for files outside your package like command line scripts or system config files.Original QuestionI have a project where I've been using  to build my package,  to control the files included and excluded, and pyroma and check-manifest to confirm my settings.I recently converted it to dual Python 2 / 3 code, and added a setup.cfg withI can build a wheel with , and it appears to be a universal wheel as desired.  However, it doesn't include all of the files specified in .  What gets installed?I dug deeper, and now know more about packaging and wheel.  Here's what I learned:I upload two package files to the multigtfs project on PyPi: - the source tar ball, which includes all the files in . - The binary distribution in question.I created two new virtual environments, both with Python 2.7.5, and installed each package ().  The two environments are almost identical.  They have different  files, which are the "compiled" Python files.  There are log files which record the different paths on disk.  The install from the source tar ball includes a folder , detailing the installation, and the wheel install has a  folder, with the details of that process.  However, from the point of view of code using the multigtfs project, there is no difference between the two installation methods.Explicitly, neither has the .zip files used by my test, so the test suite will fail:Specifying additional filesUsing the suggestions from the answers, I added some additional directives to :This installs the zip files (as well as the README) to the folder, and tests now run correctly.  Thanks for the suggestions!
Have you tried using  in your ?  seems targetted for python versions <= 2.6, I'm not sure if higher versions even look at it.After exploring https://github.com/pypa/sampleproject, their  says:which seems to imply this method is outdated. Meanwhile, in  they declare:(I'm not sure why they chose a wildcard in  and a filename in . They refer to the same file)Which, along with being simpler, again seems to imply that the  route is superior to the  method. Well, unless you have to support 2.6 that is, in which case my prayers go out to you.
Before you make any changes in  or  you must remove old output directories. Setuptools is caching some of the data and this can lead to unexpected results.If you don't do this, expect nothing to work correctly.Now that is out of the way.If you are building a source distribution () then you can use any method below.If you are building a wheel (), then  and  are ignored and you must use  and .INCLUDE_PACKAGE_DATAThis is a good option, but  does not honor it.DATA_FILES for non-package dataThis is most flexible option because you can add any file from your repo to a  or PACKAGE_DATA for non-python files inside of the packageSimilar to above, but for a  let's you put your data files inside of the package. It is identical for  but has more limitations than  because files can only source from your package subdir.
You can specify extra files to install using the data_files directive. Is that what you're looking for? Here's a small example:
You can use  and  in  to specify additional files, but they are ridiculously hard to get right (and buggy).An alternative is to use  and add  in  of your  as indicated here.With this directive, the  will be used to specify the files to include not only in source tarball/zip, but also in wheel and win32 installer. This also works with any python version (i tested on a project from py2.6 to py3.6).
I had config/ directory with JSON files in it, which I needed to add to the wheel package. So, I've added these lines to :The following directive to :And nothing worked.Until I've created an empty file called  inside  directory.(Python 3.6.7, wheel 3.6.7, setuptools 39.0.1)
"A wheel is a ZIP-format archive ..." (http://wheel.readthedocs.org/en/latest)So, treat the .whl file just like a .zip file. Add a file with:Python ZipFile objectany archive/zip file utility, like 7-zip, Winzip, Ark, file-roller, etc.


Answer URL
https://docs.python.org/3/library/zipfile.html#zipfile-objects
