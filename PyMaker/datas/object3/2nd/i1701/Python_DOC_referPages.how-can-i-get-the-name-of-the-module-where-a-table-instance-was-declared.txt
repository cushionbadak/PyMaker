Natural Text
I have a sqlalchemy table defined like soI am trying to inspect this instance to get the module where it was created. I have tried using , , and  however, all three return  which is the module where  is defined rather than where  is defined.How can I retrieve the name of the module where I have instantiated ?
You could add the functionality by subclassing . In SQLAlchemy,  specifically overrides  to make it a no-op:The key being that it does not invoke , so that sqlalchemy can take command of instantiation and whatever you do, that needs to be maintained.In this case,  is still blocking the superclass constructor, but it also adds an attribute to the instance which will be the name of the module that the class is instantiated within. I specifically chose an obscure attribute name () that is unlikely to be overwritten by sqlalchemy and using  returns the path of the module (but you can make that anything you want).I tested that inserts and selects still work:And instantiation location:External module:And:Note how it returned the relative file path in the first test and the absolute file path in the external module test. You can read about that here: Python __file__ attribute absolute or relative? but you can make that  attribute return whatever you need to suit your application.EDITThe above solution requires subclassing the  class inside the module where instances are formed, otherwise it will peg the module where the Class is instantiated, not the instances. If you only want to subclass  once in your project you'd need to pass the location to the constructor.This works:...but you get a warning upon instantiation:.To avoid that, you'd have to override sqlalchemy's alternate constructor, , strip out the location parameter and then delegate back up the chain:Import from external module:All above tests still pass.
You can't.  If you refer to the Python documentation index, you see that there are three entries for : one for a class attribute, one for a function attribute, and one for a method attribute.  Only those types of objects have the module in which they were declared recorded.   is none of these; it's just an instance of the  class, so the only  you can find on it is .


Answer URL
https://docs.python.org/3/genindex-_.html
https://docs.python.org/3/reference/datamodel.html#index-48
https://docs.python.org/3/reference/datamodel.html#index-34
https://docs.python.org/3/reference/datamodel.html#index-36
