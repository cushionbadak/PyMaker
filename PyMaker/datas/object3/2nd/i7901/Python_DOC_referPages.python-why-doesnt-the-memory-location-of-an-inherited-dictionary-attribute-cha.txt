Natural Text
So I have a parent class called User_1, and User_1's init method looks like this:I then have a class that inherits from the User_1 class called TrendingUsers, and it's init method looks like this:I create several instances of the TrendingUser class and store them in a dictionary like so:Now when I check the memory address of the various instances of TrendingUser using the id() function, I get different values. However, when I check the memory address of the all inherited attributes of each TrendingUser instance, I get the same value across the instances, except for the comments attribute (the list). A side question: Why is this the case?The real question is that when I edit one of the inherited attributes of a TrendingUser instance, for example updating the bio, the memory address changes, and only that instance's bio has been updated. This is not the case with the uploads attribute, which is a dictionary. When I insert a key-value pair into what I believe is the uploads attribute of a single TrendingUser instance, it adds the key-value pair to all TrendingUser instances' uploads attribute. When I check if the memory address of the uploads attribute changed after inserting the key-value pair, I realize that it hasn't, which explains the behavior. I was wondering why is this the case with dictionaries, but not other variable types (I have tried similar exercises with the various inherited attributes), and how to get around this problem when inheriting from a Parent class that has a dictionary attribute you would like to use? I.e. I only want to update one instance's inherited uploads attribute at a time, not all of them at once.Any help on this matter would be greatly appreciated. Thank you. EDIT:This might help:Before doing anything:After changing the bio of TrendingUser with user_id = 11299389the memory address changedAfter adding a key-value to the uploads attribute of TrendingUser with user_id = 11299389no change, and now all uploads attributes of the thee TrendingUser instances have the inserted key-value pair
In Python, the rule is "once created, an object never moves".That rule refers to the head of the object (the part whose address you see in CPython when calling id()).  Internally, mutable container points to the variable length port of the data.  As you suspected, the location of that data can move around as more data gets added.For an overview of how Python dicts work, see my recent PyCon talk and the related slides.  To better understand the object model, see Ned Batchelder's blog post.A key point is that "python containers don't contain anything", they just have references to existing objects.  In the case of TrendingUser the underlying instance dictionaries point to the same attribute values (constants created when the method definition was built).As you update the values, for instances of TrendingUsers, the memory location will point to the new values you've inserted and they will not be that same addresses as the default values (remember, that once created, those objects will never move).Hope that adds a little clarity :-)See this Pytutor visualization of what is happening with your code. Note that both instances refer to the same underlying data.
The default argument  is the problem.  It actually creates the dict at class definition time and sets that dict as the default, instead of what you want (create a new empty dict if none is specified).  For that, the usual pattern is


Answer URL
https://docs.python.org/3/library/functions.html#id
