Natural Text
How can I set the option  only for the current session in Flask-SQLAlchemy?I can set the option at the inizialization of the  object with:but in this way all sessions created by Flask-SQLAlchemy will have the option set to False, instead i want to set it only for one session.I tried  but it does not seem to have any effect.
 is a parameter to the  class.The preferred method of acquiring a  instance, is through the  class. Instances of  are configured with settings that will be used to create  instances. E.g.:So, calling a  instance returns a  instance.With this configuration, each time we call our  instance, we get a new  instance back each time.A  changes the above behaviour:This is what Flask-SQLAlchemy uses 'under the hood' (and why @CodeLikeBeaker's comment directing you to the Session API was valid). It means that every time you call  when handling a  you are using the same underlying session. Here's the same example as above but using the  extension.Notice that  in this example yields the exact same result as  in the previous example.all sessions created by Flask-SQLAlchemy will have the option set to  False, instead i want to set it only for one session.Given the fact that Flask-SQLAlchemy only creates one session per request, I take this to mean that you sometimes want a session to  and sometimes not, when handling a request.One way that you can achieve that is by using a context manager to temporarily turn  off:And here is my test model:Configure logging to see what  is doing:Create some test data:This is the function I've used for testing:The I run the test function once without the context manager:Here is the stdout:It can be seen that after the commit, sql is reissued to refresh the object attributes. And once using the context manager:And here is stdout with the context manager:


Answer URL
https://docs.python.org/3/reference/datamodel.html#with-statement-context-managers
