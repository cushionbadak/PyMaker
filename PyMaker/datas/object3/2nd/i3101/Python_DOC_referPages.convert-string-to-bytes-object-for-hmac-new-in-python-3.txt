Natural Text
code example from https://www.mimecast.com/developer/documentation/downloading-siem-logs/ shows a script that can be used to download logs from a service in python 2.7.I am working on updating the script to be compatible with python 3 but cannot figure out how to get a string to pass into the hmac.new section for the hash generation here:trying to run this as-is results in "LookupError, 'base64' is not a text encoding; use codecs.decode() to handle arbitrary codecs"I was trying to convert the variable to bytes prior to or inside this function by using the or functions but that results in "TypeError, Unicode-objects must be encoded before hashing" and I'm just not finding a lot of information on how to get a string variable to pass into hmac.new().I am pretty sure this is related to the change between python 2 and 3 where strings are stored as unicode in 3 where it was raw data in 2, but I'm not familiar enough with these encodings to understand how to properly translate them when passing them around
Just think what's  and what's :EDIT: according to the docs for  and the  module,  must also be . is a  -> convert it to  is possibly a  as well -> convert it to  accepts and outputs  -> do nothing accepts  too -> we're already ready returns  -> we want to  it, and  accepts , so we're goodYou want to output a  (although  may be just fine) ->  the result of You may also supply an  argument to your function, if you want to work with an encoding different from the default (utf-8).Code:
The error message is telling you what you need to do:To encode a Unicode object (that is, a ), you just call its  method.You have to decide what encoding you want. Usually, this is UTF-8. If you're on a modern Python 3, UTF-8 is guaranteed to be the default, so you can just write this:If you want a different encoding (or if you want UTF-8 but you're on an older Python), specify it explicitly:


Answer URL
https://docs.python.org/3/library/stdtypes.html?highlight=str%20encode#str.encode
https://docs.python.org/3/library/stdtypes.html#str.encode
https://docs.python.org/3/library/hmac.html
