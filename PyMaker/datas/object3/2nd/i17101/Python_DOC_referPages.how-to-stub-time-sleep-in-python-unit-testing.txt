Natural Text
I want to make a stub to prevent time.sleep(..) to sleep to improve the unit test execution time.What I have is:However, I get the following error on the second code line above (class definition):How to fix the error?
You can use mock library in your tests.
What about:This is working for me. I am inlcuding it at the beginning of the test I want to speed up, at the end I set back the original sleep just in case. Hope it helps
The accepted answer is still valid. However, unittest.mock is since Python 3.3 an official part of the Python standard library.
I'm using pytest and have following fixture to monkey patch :Then in test which I need to "speedup" the sleep, I just use this fixture:So when you run this test, you will see that it completes in much shorter time:
using freezegun package can help you to do this.common demo: please see the freezegun READMEpytest demo: Gist fake sleep function fixture


Answer URL
https://docs.python.org/3/library/unittest.mock.html
