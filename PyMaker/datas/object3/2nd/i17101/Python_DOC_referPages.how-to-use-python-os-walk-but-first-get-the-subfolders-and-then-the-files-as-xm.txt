Natural Text
I'm python beginner and started to work on the below script. It already works, but in the wrong way. Now i get stuck and I would like some help. I use os.walk in order to get an index as a XML file of a filepath in Windows. I also added the current result of the script, and what I need to get out.The difference between the result and what i need, is that the subfolders are before the files.Result of my script :Result needed :
I don't think there's any easy way to do what you want. At least, there isn't if you're writing your XML by hand.The reason is that you need to build your XML document from the root up, starting with the outermost directory, producing the top-most  tag. On the other hand, you want to dive into the subfolders before you write out the files from each folder, so that files in the leaf directories will appear first, and those in the root directory will be last. Those two goals are in tension with each other.I think there are two strategies that you could take to solving the problem.The first is to use a more sophisticated approach to writing your XML file. For instance, if you use a library that lets you dynamically create the elements of the document, rather than just using string manipulations, you may be able to insert the subfolder information above the file information, even though you're process them in the same order you do now (files first). I don't know Python's XML libaries very well, so I don't have any specific suggestions here, but probably the place to start is the documentation on the  package in the standard library (you'll probably just want a submodule like , but I'm not sure if that's the best one for your task, so check the package out and read up on whichever parts look appropriate).The other option would be to change up how you get your data. If you dropped the  argument to , it would start with some deeper folders first, then come back to the higher level ones, which is exactly the order you want to be showing their files. The tricky part about this is that you'd need to build the higher level  tags before you get around to processing the folders they are for. You'll need to deduce the depth you're at based on the paths of the folders, but you're already doing some of this, so it probably won't be too much more complicated. (By the way, you really should be using the functions in the  module for file path manipulations, rather than doing things like .)
After the comments of Blcknght, I removed the "\\" and os specific stuff. The script works now on windows and linux, and the results are good. I completely started over, on the main script. I didn't use the xml package, but therefor I created 2 functions, which uses os.listdir() instead of os.walk. Below you find the script.If you read the script you noticed on the main part there are al lot of "for" loops and "if" statements. Per subfolder the script does the same over-over again. But I can't figure it out, how to put this a "for" loop. I could find out how much subfolders are within the given search folder. But I need some help how to create a loop for the main script. I could use some help here :)


Answer URL
