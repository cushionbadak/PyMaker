Natural Text
i'm quite new to python and mocking generally. So I tried to find a solution to my problem, through reading the documentation:https://docs.python.org/3/library/unittest.mock.html#magic-methods, following article: http://alexmarandon.com/articles/python_mock_gotchas/and lots of stackoverflow-questions. But I couldn't find a solution yet.I try to mock two function, which are creating a database connection and put the data into a pandas dataFrame. They are used in the post-function (overwrites the django post-function):In the testing environment,  should return nothing and  should return a pandas dataframe defined before.My testing class looks like this:I get the following error-message:The replacing of the original functions through the mocks doesn't seam to work.Thanks for your help.
When you call the mocks above, they return another new mock. By assigning to the same name, you are loosing the references to the patched mocks. You will be unable to configure or inspect them.Edit:From what I understand, you already see the mocks at work from pdb. To make the tests work as you like, you need to patch every test function that uses those two functions for example with patch decorators. Then you have to setup the mocks inside the patched test functions. Also usually you assert in the tests but not in the setUp. I understand you made it here just for convenience as you were with some doubts about the running code.If you were thinking in setting up the mocks in setUp for other test functions to use (you can't do it just like that, you would have to store them in self and then manage them again in the test functions), maybe you are interested in this example from Mock documentation:An alternative way of managing patches is to use the patch methods:  start and stop. These allow you to move the patching into your setUp  and tearDown methods.


Answer URL
https://docs.python.org/3/library/unittest.mock.html#magic-methods
