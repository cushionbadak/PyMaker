Natural Text
I have some python 2.3.4 scripts to migrate to python 2.7.5  and  I found a strange issue in the behavior of strptime.The Script Sample convert a string in (week number, day, year) format to a datetime:The output in python 2.3.4:The output in python 2.7.5:The behavior is different beginning from the second week number of the year (dw='2 0 18').Is it a known issue of strptime or have I missed something? 
There are two common week numbering systems, and  has two directives, to handle both ISO week numbers (: weeks begin on Monday) and the week number system used in North America (: weeks begin on Sunday).I'm not very familiar with the latter system, but I reckoned that Excel 2016 is, and when I checked I found that it agrees that in that system the Sunday in week 51 2018 is 16 December. Wikipedia gives the method for determining week 1 in the North American system as follows: Week 1 begins on a Sunday and contains both 1 January and the first Saturday. Or, put another way, week 1 ends on the first Saturday in January.So, up to 6 days of week 1 can actually fall in the previous year, and those days also count as being in week 53 of the previous year.This table shows, for 7 years, the date of the first Sunday of the year, and to its left, the date of the preceding Sunday. So column 2 is 7 days after column 1. Excel 2016's  function reports all the dates in column 2 as week 2:If I ask Python 2.7 or 3.7 for the Sunday in week 1 of these years, like this:I getSo, for the Python standard library's  directive, week 1 begins on the first Sunday in January, rather than ending on the first Saturday. That is a reasonable approach, just a different one. The difference means that  week numbers agree with Excel week numbers only in years where 1 January is a Sunday. In all other years, including 2018 as you report,  will give a week number that is one less.I reported this as a bug on bugs.python.org, issue 35535. The consensus there appears to be that the current behaviour is consistent with the documentation. That Python 2.3 agrees with Excel and Wikipedia, and Python 2.7 does not, seems to be regarded as unpersuasive.So, if it wasn't before, it is a known issue now.


Answer URL
https://docs.python.org/3/library/time.html#module-time
