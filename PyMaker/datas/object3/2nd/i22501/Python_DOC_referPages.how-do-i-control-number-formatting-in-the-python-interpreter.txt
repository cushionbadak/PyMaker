Natural Text
I often use the python interpreter for doing quick numerical calculations and would like all numerical results to be automatically printed using, e.g., exponential notation.  Is there a way to set this for the entire session?For example, I want:not:
Create a Python script called whatever you want (say ) and then set an environment variable  to the path of this script. Python will then load this script on startup of an interactive session (but not when running scripts). In this script, define a function similar to this:Then, in an interactive session:Of course, you can define the function to be called whaetver you want and to work exactly however you want.Even better than this would be to use IPython. It's great, and you can set the number formatting how you want by using  (see the IPython site or search for more details on how to use this).
Hm... It's not a 100% solution, but this have come to my mind...How about defining a subclass of float which would have an overridden  method (to print with the exp notation). And then you would have to wrap all the expressions with object construction of this class).It would be a bit shorter than Dave's solution, you would define the class once and then write something like:
As you know you can use the  operator or  to format strings:For example:I was wondering if you could monkey patch the built-in  class to change the formatting but it seems that Python won't let you:So the only other thing I can think of is to write your own file-like object which captures output, reformats it and sends it to the standard output.  You'd then redirect standard output of the interpreter to this object:
Building on Dave Webb's hint above. You can of course set the precision if you like ("%.3e") and perhaps override writelines if needed.and usage:
When using IPython/Jupyter-console, the "magic" command  will change the display of raw floats in exponential notation. https://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-precisionFor more formatting control, a formatter can be registered:https://ipython.readthedocs.io/en/stable/api/generated/IPython.core.formatters.html#IPython.core.formatters.PlainTextFormatter
Sorry for necroposting, but this topic shows up in related google searches and I believe a satisfactory answer is missing here.I believe the right way is to use . For example, you could add code like this in your  file:This will display large enough values using the exp syntax. Feel free to modify the threshold as you see fit.Alternatively you can have the answer printed in both formats for large numbers:Or you can define yourself another answer variable besides the default , such as  (such creativity, I know):... and then display the exp-formatted answer by typing just .


Answer URL
https://docs.python.org/3/library/sys.html#sys.displayhook
