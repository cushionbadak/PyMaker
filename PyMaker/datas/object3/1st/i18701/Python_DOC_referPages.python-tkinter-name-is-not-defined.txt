Natural Text
Code:Error:I'm attempting to create multiple tkinter buttons with a loop. I can create the buttons fine but i can't seem to create callbacks for them. When ever i try, it tells me that the variables that i use for the buttons are not defined. I tried adding "exec("global " + alphabet[i])" above where i defined the buttons but that didn't change anything.
Using exec is almost always the wrong way to do it, no matter what "it" is.And creating variables dynamically is almost always the wrong thing to do.And your problems getting this to work are a perfect illustration of why.Just create a dict mapping names to buttons:If you really want to dump the dict into locals() (or, similarly, self.__dict__ or globals() or …), that's trivial. But you don't. The only place you need to use the variable is in your letterAction function. So:But notice that this does the wrong thing. command = letterAction(letter)—whether you run it directly, or via exec—is going to call letterAction(letter) now, destroying the button before you even create it, and returning None, which you'll then set as the command. You need lambda: letterAction(letter) or partial(letterAction, letter) to fix this.Plus, you can't write code to pass the button variable itself to letter, either now or later, because the variable doesn't exist yet. You have to pass the letter, as a string, as I did above.But really, if you think about it, you don't need these button variables at all—whether in a dict or otherwise. You just need a way to bind each button as its own callback's target, right? There are a number of ways to do this, but the obvious one is a class, either inheriting or delegating to Button (or, in this case, neither, since you don't need to use it as a button, or even remember it, after creation).While we're at it, let's remove some extraneous parens and such that just make things harder to read and fix the problem that 17 seems to belong in two different groups…It might be even clearer with if 'J' <= letter <= 'R', because it's the letters rather than the numbers that you're going to see while debugging it.
The string in your first call to exec evaluates to:You are therefore referencing A (the name) before having defined it. I'm guessing you forgot the single quotes around the second alphabet[i]:Note this would call letterAction('A'), i.e. 'A'.destroy(), which will throw an AttributeError since strings have no destroy() method. What is letterAction supposed to achieve?


Answer URL
