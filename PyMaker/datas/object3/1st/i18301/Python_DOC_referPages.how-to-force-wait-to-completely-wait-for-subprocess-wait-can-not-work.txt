Natural Text
I want to process the command1 by popen(python) and then run another command2 when the first one is finished. when I use wait() to make it work but it did not work.why? Does any one can help me?
There are several problems with your code, and it is no suprise it doesn't run.You do not have to call .wait() when using subprocess.call(). That function takes care of the Process.wait() call for you.Instead, subprocess.call() returns the exit code directly. Quoting the subprocess.call() documentation:Run the command described by args. Wait for command to complete, then return the returncode attribute.Emphasis mine.Moreover, your ant_debug() function doesn't return anything (let alone a command to run). Instead it runs the ant command using os.system()! Remove that call all together. Use subprocess.call() instead of os.system().Rewriting your code to use just subprocess.call() would be:where we pass in the command to run plus its arguments as a list of strings.I've removed the cmd /k prefix; just run ant directly; no shell is needed here. The /k switch even prevents the cmd shell from closing. The return value of cmd is not necessarily the same as what ant returned.
In addition to Martijn's comments on subprocess.call, "cmd /k" means to run a command and then continue - so this won't terminate until you tell cmd to exit. There is probably no need to run the ant command using cmd in the first place, so just remove those first two items from the call list. If you do mean to run a command through a shell such as cmd, you can pass the argument shell=True (but learn why first, there are risks). 


Answer URL
