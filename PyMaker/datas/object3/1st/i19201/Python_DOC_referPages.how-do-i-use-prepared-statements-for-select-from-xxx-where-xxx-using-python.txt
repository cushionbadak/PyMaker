Natural Text
I have use a dict to store the condition, the number of keys and value in not fixed, such asMy sql format is  select * from tablename where v1 = 'abc' and v2 = 123 and ... vn = xxxI have tried to turn the sql like this first:sql = "select * from tablename where v1 = %s and v2 = %s and ... vn = %s"The format below can avoid sql injection, the question is that I dont know the number of values, how to write this  prepared statements. Thanks in advance.cursor.execute(sql, dict[v1], dict[v2], ..., dict[vn])
The following should work:Make sure you don't make any modifications to the dict between creating the sql string and executing the statement, since the ordering could change if you do.Note that I renamed your dict to data, you shouldn't use dict as a variable name because it will mask the built-in type.I'm not completely sure if the conversion to a tuple is necessary.
Perhaps overkill, but you could use the excellent SqlAlchemy library:It may be worth it if you plan on doing a lot of SQL in your Python.http://docs.sqlalchemy.org/en/latest/core/tutorial.html
I would use something like following to paramerise the execute function:Above is a simple example to illustrate what is happening in the print_test function. I am assuming that you would like some kind of sorting, therefore an OrderedDict would be a good fit for you. Then, you can simply export the values and the order will be consistent. Cast them as a tuple and the execute function will unroll what it needs.


Answer URL
