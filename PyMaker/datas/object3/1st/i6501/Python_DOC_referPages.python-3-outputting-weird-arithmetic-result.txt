Natural Text
I was writing a calculator in Python and was working with handling exponentiation. I came across something very strange when dealing with exponents that are decimals, so I tried reproducing the problem in the console. This is what I got:Any pointers on how to avoid the first output and get the second one? I'm not entirely sure what the first output even represents.
The first output correct. It is an complex number, since you have decimal power of a negative number.You can't reproduce it because, in the last line, you should write (-3.0)**2.5. What you have written is equivalent to -(3.0**2.5), since exponentiation has higher priority than the unary operator -.
The different output is simply due to the different order of the operations due to operator precedence, use parantheses () to ensure the correct order is applied:
Your problem is not Python but maths:As you may know, negative numbers don't have real squareroots. They have complex squareroots represented by the j.When you are writting it directly to the console he is understanding another thing:The correct form to write it directly to the console would be:
Try this can see if it work.
Your second example:actually has higher precedence on the ** operation, calculating something different:What you are trying to calculate however is:which indeed results in (4.772588574262081e-15+15.588457268119896j). That's a complex number, which looks like this after some rounding and simplification: 0 + 15.6j.If you don't understand why the result is a complex number, let's do it manually:First, you can split -3^2.5 into two parts: -1^2.5 * 3^2.5. The right side is roughly 15.6, the number you saw above. -1^2.5 can be expanded to (-1^0.5)^5. This is the same as sqrt(-1)^5. Simplify some more:Hence the whole thing is 15.6i. Note that in mathematics i is used for the imaginary part of a complex number, but in programming it's usually substituted with j, but they mean the same thing.


Answer URL
https://docs.python.org/3/reference/expressions.html#operator-precedence
