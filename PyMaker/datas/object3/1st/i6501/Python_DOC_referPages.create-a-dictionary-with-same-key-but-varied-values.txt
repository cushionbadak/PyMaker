Natural Text
I'm studying GridSearch method to adjust the parameters of Desicion tree model or random forest model. After reading the example of boston housing price, I found I can't run the code of the example. The following code is the GridSearch code of the example. The problem is ValueError: Parameter values for parameter (max_depth) need to be a sequence. I searched certain examples, however, the variable params in these examples are almost defined in the same format which can lead to this error. I think the writer want to create a dictionary with key is always is "max_depth" but the value will vary from 1 to 10. I have no clue to solve this problem. Could someone can help me?
My theory is: the grid-search module has been designed for python 2 where:range generates a listso there ain't no range type to check againstSo passing a range from Python 3 is a cornercase that doesn't work, with a confusing message.I think I found the reason (and the fix) by looking at the source code, around line 348:in python 3, range is a sequence but since it doesn't generate a list anymore, it is not accepted by grid-search because the code tests for object types explicity (so the error message is slightly off if you ask me :)). Also, I'm pretty sure that if the code also included range in the type test, the rest of the code would work very well, since range emulates very closely a list, without generating any.A fix would be to force iteration, for instance like:(tuple or numpy array would work as well)To fix grid-search, one could do: for k in (list, tuple, np.ndarray, range) (but that may break in python 2, and there may exist some python 2/3 compatibility requirements here)The other fixes would be:don't perform any check, let Python decide when using the methods (better ask forgiveness than permission)just use if isinstance(k,(list, tuple, np.ndarray, range)): as isinstance already accepts a tuple, no need for the complex construct with the list comprehension generating booleans.


Answer URL
https://docs.python.org/3/library/stdtypes.html#typesseq
https://docs.python.org/3/library/stdtypes.html#typesseq
