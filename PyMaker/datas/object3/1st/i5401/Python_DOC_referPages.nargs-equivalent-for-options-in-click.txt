Natural Text
Is there an equivalent to argparse's nargs='*' functionality for optional arguments in Click?I am writing a command line script, and one of the options needs to be able to take an unlimited number of arguments, like:So users would be ['alice', 'bob', 'charlie'] and bar would be 'baz'.In argparse, I can specify multiple optional arguments to collect all of the arguments that follow them by setting nargs='*'.I know Click allows you to specify an argument to accept unlimited inputs by setting nargs=-1, but when I try to set an optional argument's nargs to -1, I get:TypeError: Options cannot have nargs < 0Is there a way to make Click accept an unspecified number of arguments for an option?Update:I need to be able to specify options after the option that takes unlimited arguments.
One way to approach what you are after is to inherit from click.Option, and customize the parser.Custom Class:Using Custom Class:To use the custom class, pass the cls parameter to @click.option() decorator like:or if it is desired that the option will eat the entire rest of the command line, not respecting other options:How does this work?This works because click is a well designed OO framework. The @click.option() decorator usually instantiates aclick.Option object but allows this behavior to be over ridden with the cls parameter. So it is a relativelyeasy matter to inherit from click.Option in our own class and over ride the desired methods.In this case we over ride click.Option.add_to_parser() and the monkey patch the parser so that we caneat more than one token if desired.Test Code:Test Results:
You can use this trick.Add fake 'option' with a needed name and none arguments 'nargs=0', then add 'argument' with the unlimited args 'nargs=-1'.But be careful with the further options:


Answer URL
https://docs.python.org/3/library/argparse.html#nargs
