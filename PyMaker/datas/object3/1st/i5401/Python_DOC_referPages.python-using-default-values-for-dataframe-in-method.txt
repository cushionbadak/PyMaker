Natural Text
let's say I have the following codeIn the following scenario, df1 outputs ['a'] when test() is called with no params. df1/df2 will print when they are passed in as paramsCan someone please explain why the default value defined in the test method does not work?
What is happening here is a result of three tricky Python attributes that can be hard to remember: names are references to objects, but independent of the objects themselvesmutable and immutable objects handle chained references differently [1]"the global namespace for a module is created when the module definition is read in". [2] When test() is defined, my_df is bound to the current global object referenced by df1, which in your case is ['a']. When some_method() is called, it changes the reference for the global name df1 to your dataframe, but my_df has already been bound to the object behind the previous df1 (['a']). It is not bound to the df1 reference itself.An illustration to simplify:kbball suggests re-arranging, which works, because it defines some_method() and runs it before test() is defined, which means that during the test() definition, the global df1 now references the dataframe. As before, my_df=df1 points to the object behind the df1 reference, but now that has changed to the dataframe, so test() will print that.To see this in action, use your current code as posted but add to your test:Your solution then is to re-arrange your code to define test() after some_method() is called (you don't need the return that kbball includes), or, you can ensure that df1 within test refers to the current global name df1 each time it runs:I know that's a long explanation, but I hope it clears it up for you. It's a wonky issue.[1] https://jeffknupp.com/blog/2012/11/13/is-python-callbyvalue-or-callbyreference-neither/[2] https://docs.python.org/3/tutorial/classes.html
I think you just need to do some re-arranging:


Answer URL
https://docs.python.org/3/tutorial/classes.html
https://docs.python.org/3/tutorial/controlflow.html#more-on-defining-functions
