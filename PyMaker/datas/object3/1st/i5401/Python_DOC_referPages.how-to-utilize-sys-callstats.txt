Natural Text
I just stumbled over callstats in the sys module after PyCharm'sautocomplete suggested it. Else I probably would never have discovered itbecause it doesn't get even mentioned in the docshelp(sys.callstats) gives this:Now I'm curious why it doesn't get mentioned anywhere and if there is a possibility to use it in an Anaconda build for Python.It returns None when I call sys.callstats() so I assume the answer for the latter will be no.However I'd still be interested in seeing how an actual output of this would look like for Python buildswhere this works.Edit:In the Issue28799 linked from the comments below the accepted answer we find the reason why callstats will be removed with Python 3.7. The stats probably wouldn't be right after an upcoming feature will be implemented:My problem is that with my work on FASTCALL, it became harder to track where the functions are called in practice. It maybe out of the Python/ceval.c file. I'm not sure that statistics are still computed correctly after my FASTCALL changes, and I don't know how to check it.Python has already sys.setprofile(), cProfile and profile modules. There is also sys.settrace(). Do we still need CALL_PROFILE?Attached patch removes the feature:Calling the the untested and undocumented sys.callstats() function now emits a DeprecationWarning warningRemove the PyEval_GetCallStats() function and its documentation
Don't. It's undocumented, untested, and disabled in Python 3.7. If you want to do profiling, use cProfile, profile, or sys.setprofile.For now, if you compile Python 3.6 or 2.7 from source with CALL_PROFILE defined, then sys.callstats does exactly what the docstring says it does with CALL_PROFILE defined: it returns an 11-element tuple containing counts of various internal call types. The stats are only tracked in Python/ceval.c, so it'll miss calls that don't go through there.
I am curious about sys.callstats too, so I compiled a binary of Python 2.7.12 with CALL_PROFILE flag. With zero user code but only python bootstrap routines, the result of sys.callstats() is:


Answer URL
https://docs.python.org/3/library/sys.html
https://docs.python.org/3/library/profile.html
https://docs.python.org/3/library/sys.html#sys.setprofile
