Natural Text
I am trying to write a simple Python program. It's supposed to return a a closure that returns successive fibonacci numbers:I get this error at run time:UnboundLocalError: local variable 'n_1' referenced before assignmentEDIT: In my original post, I had not included n = 1 in the definition of fibGen but it was actually a typo. I would still get the same error anyway.
Python determines the scope of variables at compile time, based on binding behaviour. If you assign to a name, or use it as an import target (and a few other ways) you are binding the name in a scope.You are binding to n_1 and n_2 in the fib() function; both are being assigned to. This makes those two names local in fib(), and Python won't even look at the surrounding scope.You'll need to override this behaviour, and you can do this by using the nonlocal statement:nonlocal tells the compiler explicitly that you don't want it to look at binding behaviour but instead treat the names as closures.Next, you are using n in the first branch of the if test, but you haven't defined it anywhere outside of the else branch. You should just return 1 there anyway:Last but not least, you can swap two variables by using tuple assignment, no intermediaries needed:
You can't modified enclosing variables, n_1, n_2 is in enclosing space not in space of function that's why you can't cahnge the variables.Use nonlocal keyword


Answer URL
https://docs.python.org/3/reference/simple_stmts.html#the-nonlocal-statement
