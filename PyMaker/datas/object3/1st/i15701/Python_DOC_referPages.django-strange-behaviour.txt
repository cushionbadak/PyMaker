Natural Text
I have a view in Django which calls external library/class. The problem is that for some reason Django keeps caching results coming from previous calls of that class.Please consider the following simple example:Django view:Demo class:You expect result to be [1, 2, 3], right ?WRONG!The first time a page is loaded you'll get the correct result. But on all following requests it will keep incrementing: [1, 2, 3, 1, 2, 3]... [1, 2, 3, 1, 2, 3, 1, 2, 3] ...So my question is obvious - what is going on here ?How do i receive [1, 2, 3] every time i call a class inside Django view ?Django 1.7 / MacOS X.
Define result in __init__ as an instance attribute.If you print result in your code then you will get that result is assigning just once,result is a mutable object, whenever you made an instance of the class it refer result to the same reference.In case of Immutable object:-Output:-
Why don't you try initializing the result=[] inside your do_something method something like this ?
See more about static Class variable Here


Answer URL
https://docs.python.org/3/tutorial/classes.html#class-and-instance-variables
