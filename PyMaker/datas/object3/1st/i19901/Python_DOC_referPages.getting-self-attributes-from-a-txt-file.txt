Natural Text
I'm making a combat helper for D&D. I plan to make it get the stats of each monster from a .txt file in this format:I'm using a class called Monster, and __init__ iterates through the .txt file. It iterates fine, my problem is that I can't get the variables to have self. before it. Monsterfind() simply finds the path to the monster .txt file, and I know that is not the problem, as the variables are printing fine.It just says: self.AC = 5 SyntaxError: invalid syntax @ the equals signIf there is any problem with my class or my __init__, even if it is unimportant, please tell me as this is the first time I'm using classes.Thank you in advance
You don't need eval() (or exec) here (they should pretty much never be used) - Python has setattr(), which does what you want.Note that it might be easier to use a data format that already exists, such as JSON, to avoid manually parsing it.As another note, when working with files, it's best to use a context manager, as it reads nicely, and ensures a file is closed, even if there is an exception:Obviously, you would need to do some real parsing here.
as mentioned by @Lattyware, you really should be using setattr for this.  I'll simply discuss why the code raises a error.  The reason eval doesn't work is because it evaluates expressions and assignment isn't an expression.  In other words, what you pass to eval should only be the right hand side of the equation:This fails just like your code.You could change from using eval to exec:But again this is ill advised.


Answer URL
