Natural Text
I am attempting to write a unit test for a function that calls the open method on a pathlib.Path.  I am able to successfully mock the open method without issue, but verifying the function is having the correct behavior is difficult.  See the sample code below:When I introspect mock_open and review the _mock_mock_calls list, I am unable to find the string path of the file that is being written to.  The call history looks like this:Is there a way to test what path is being opened when Path.open is called?
You replaced a method with a mock object. The issue with using a mock object here is that it won't be bound to the Path() instance. It'll be called, but there is no path back to the Path() instance (no pun intended).Use a function to mock out open(), one that returns a mock_open() object to track further 'open file' use, functions will be bound when accessed on instances of Path:Now any Path().open() call will call the opener mock, recording all file interactions and the Path() object on which it was called:


Answer URL
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.mock_open
