Natural Text
I've recently started learning how to use python and i'm having some trouble with a graphQL api call. I'm trying to set up a loop to grab all the information using pagination, and my first request is working just fine.but the second call using the end cursor as a variable isn't working for me. I assume that it's because i'm not understanding how to properly escape the string of the variable. But for the life of me I'm unable to understand how it should be done.Here's what I've got for it so far...the second one as it loops just returns a 400 bad request.Any help would be greatly appreciated.
As a general rule you should avoid building up queries using string manipulation like this.In the GraphQL query itself, GraphQL allows variables that can be placeholders in the query for values you will plug in later.  You need to declare the variables at the top of the query, and then can reference them anywhere inside the query.  The query itself, without the JSON wrapper, would look something likeTo actually supply the variable values, they get passed as an ordinary dictionaryThe actual request body is a straightforward JSON structure.  You can construct this as a dictionary too:Now you can use the standard json module to format it to a stringor pass it along to something like the requests package that can directly accept the object and encode it for you.


Answer URL
https://docs.python.org/3/library/json.html
