Natural Text
I have a ctypes field that is a POINTER(c_char) (it had to be, per the documentation, c_char_p didn't work for my application: https://docs.python.org/3.7/library/ctypes.html#ctypes.c_char_p)For a general character pointer that may also point to binary data, POINTER(c_char) must be used.However, this usage recommended by ctypes itself seems to have the downside that, it claims to be a pointer to a single character, however, it isn't, it's a pointer to an array of bytes. How can I read the array returned by the ctypes fucntion (I know the length) in Python? Trying to index it like foo[0:len] where foo is a POINTER(c_char) blows up with TypeError: 'c_char' object is not subscriptableI can print the first character of the bytestring using either print(foo) or print(foo[0])I was thinking that ctypes.cast might work, however I don't know how to pass it the length of the cast (as in interpret the first N bytes from address foo as a bytes object)EDIT: some code.So I have a structure:And I have another function that returns a POINTER(foo)I call f, which returns a POINTER(foo):And then I was trying to access ptrf.payload. The following code works:So I do I was wondering whether the get_payload function would be written more easily. 
As [Python 3]: ctypes - A foreign function library for Python states, you must not use c_char_p with binary data. Of course that can be ignored, but then surprises (string silently truncated) may occur.Although it could be exemplified in ~5 lines of code, pasting the whole thing:dll.c:code.py:Output:
If you truly have a POINTER(c_char) type, it is subscriptable.  In the future provide code that reproduces your issue:


Answer URL
https://docs.python.org/3/library/ctypes.html#module-ctypes
