Natural Text
I'm trying to pull data from aws that is base64 encoded. I need to pipe the output through base64 -D to make it readable. When I run the code without the piped base64 argument it returns the output no problem, however, the output is not readable: However, when I add the | base64 -D argument as so: I get the following error: To see help text, you can run:Also as a side note when I run the command straight from the command line I get the results I want: It seems as though the '|' is throwing something off. 
To make the pipe work, you need to pass shell=True to the subprocess.check_output() call: docs.Alternatively, you could do your own base64 decoding: https://docs.python.org/2/library/base64.html
I/O-redirection is a shell feature.  While it's nice and secure to provide a sequence of arguments for execution to subprocess.check_output(), you want something else here.  So don't split your command line and let the shell do what it's supposed to do like:proc_read = subprocess.check_output("aws iam get-credential-report --query 'Content' --output text | base64 -D", shell=True)
If it's Linux , at least, I think there are security problems with shell=True.  anyways, here's another link to help you make this work out: https://docs.python.org/3/library/subprocess.html#replacing-shell-pipeline


Answer URL
https://docs.python.org/3/library/subprocess.html#replacing-shell-pipeline
