Natural Text
working on a python project, I tried to separate source code and unit tests; here is the project structure:And here is the setup.py file:Then, when I run command python3 setup.py sdist, it fails with the following output:The resulting top_level.txt file looks fine:but it looks like the setuptools is not starting from source folder to find modules to be packaged.Do I have to move setup.py and MANIFEST.in files into source folder?But then, what is this where argument for in setuptools.find_packages function?
You are one step away from a working solution. Addto the setup() arguments:More info on packages remapping can be found in Listing whole packages section.However, it looks like you made the source dir to a python package by placing an __init__.py in it. Was that intentional? Do you have import statements likeor similar, using source as package name? Then beware that the imports will fail once you install your built package because source is omitted when including sources on build. I see two ways:either remove source/__init__.py, use package_dir like described above to make my_project to the top level package, omit source in imports (should you get any errors, just remove myproject-1.0.0.egg_info dir and recreate it with python setup.py egg_info), oruse source as top level package: don't use package_dir, look for packages in the project root dir (packages=find_packages() without explicitly stating where).


Answer URL
https://docs.python.org/3/distutils/setupscript.html#listing-whole-packages
https://docs.python.org/3/distutils/setupscript.html#listing-whole-packages
