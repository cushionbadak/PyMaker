Natural Text
Trying to parse optional positional arguments I ran into following issue:Example:Output:Why is the third program invocation not accepted? Is this a restriction of argparse?
This is a limitation of argparse—but one that's partially lifted in 3.7.Unix tools generally don't claim to support intermixing of options and arguments, even though they often do. The problem is that combining it with some other features, like subcommands, leads to ambiguity. So, typically, libraries that support any of those features punt on the problem and don't allow intermixing. Or they do something kind of hacky—allowing options at the end, at the start, and in certain hard-to-predict cases but not others in the middle.That's what argparse originally did. But 3.7 adds Intermixed parsing.You have to manually call parse_intermixed_args instead of parse_args.And if you try to use this with any of the features it doesn't go well with, you'll get an exception (even if there's no ambiguity for the particular set of args you pass—which should make it easier to debug).But otherwise, it'll work as expected: options (together with their values, of course) can be freely mixed with positional arguments anywhere in the command line.Unfortunately, I don't know of a drop-in backport on PyPI to get 3.7 argparse in earlier versions; the semi-official argparse backport is mainly for pre-2.7/3.2 versions that don't have it at all, and only backports the 3.4 version.


Answer URL
https://docs.python.org/3/library/argparse.html#intermixed-parsing
