Natural Text
I've set up a Web2Py environment on a hosted server and inside models\db.py added the line:but when I navigate to serveraddress.com/testapp/default/testpage.json I get:{"testlist": ["PolarBear", "Badger", "MonkeyFootball", "WonkyWilly"]}which is what I'm returning from the function.Honestly, the line:makes no sense to me. It looks like a list comprehension statement that should be inside [ ] to get turned into a list but I suppose that's another topic. Mainly I'm concerned with disabling the generic views at this point.I got the line for disabling generic views from the Web2Py manual.
First, generic views are disabled by default. The following code:does not disable generic views but rather enables them for local requests only. To completely disable generic views, simply delete that line.Second, if your testpage function is directly returning JSON (i.e., an actual string), then generic views are not the issue, as views are only called when a controller function returns a dictionary. If your function is returning a JSON string, then the string will be returned directly, regardless of the extension in the URL, and regardless of your response.generic_patterns setting.However, if testpage is returning a dictionary and you are getting back a JSON response via the generic.json view, then likely you are behind a proxy, which will cause web2py to see all requests as local. In that case, do not rely on request.is_local to distinguish between local and external requests.Finally, the ['*'] if request.is_local else [] syntax is simply a Python conditional expression (also known as a ternary operator).
Trace / debug your way through the logic of request.is_local.  You may be initiating the request from a different machine, but if the request is somehow handled or repeated by a local component (proxy server? SSL daemon?) the request as seen by web2py could be local.This is a common issue when using different kinds of proxies.  The usual solution is to use existing proxy-forwarding headers or add new HTTP headers and customize is_local a bit.


Answer URL
https://docs.python.org/3/reference/expressions.html#conditional-expressions
