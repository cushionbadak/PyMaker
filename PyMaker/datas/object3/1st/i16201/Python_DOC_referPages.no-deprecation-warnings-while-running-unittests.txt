Natural Text
When running unittests I would like to see deprecation warnings. It appears that since Python 2.7 deprecation warnings are silenced. I'll quote from the page:For Python 2.7, a policy decision was made to silence warnings only of interest to developers by default. DeprecationWarning and its descendants are now ignored unless otherwise requested, preventing users from seeing warnings triggered by an application. This change was also made in the branch that became Python 3.2. (Discussed on stdlib-sig and carried out in issue 7319.)Later it appears as though I should see deprecation warnings while running unittests:The unittest module also automatically reenables deprecation warnings when running tests.Well.. simply put, it doesn't work for me, so I must be doing something wrong. I've tested with the following code:Then I run the code (saved in spam.py):And this gives me the following output:No deprecation warning. So the question is; what am I doing wrong here?
It looks like the documentation is wrong - in 2.7 unittest does not reenable deprecation warnings.... and there is nothing in unittest.py that I saw which reenables DeprecationWarning.You can of course enable them yourself:Or on the command line:Or with a decorator applied to each of your unittest.TestCase functions so that DeprecationWarning is enabled only for testing:The command line option is probably the best for unit testing as it requires no code changes.
Since I use Eclipse for Python development I decided to use a different solution than suggested. It is also possible to enable warnings using an environment variable. If the environment variable PYTHONWARNINGS is set to default deprecation warnings are shown.In Eclipse (PyDev) the interpreter can be modified to include the environment variable. This way it is only enabled for projects using that interpreter.


Answer URL
https://docs.python.org/3/library/unittest.html#unittest.TextTestRunner
