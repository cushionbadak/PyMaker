Natural Text
I've been trying to get this to work for hours now. None of the solutions on other questions are working.What I'm trying to do is get my list of orders on Amazon. To do this, I am making a call to Amazon MWS. However, this is the error message I am getting:To find out what was wrong, I went onto Amazon MWS Scratchpad and used the same values, even the timestamp (I think you have 15 minutes until it expires), and compared the signatures. They were the same. However, my program still got the same error while the scratchpad worked perfectly.Here is all the code:Here's a print of sig_data in calc_signature():Here's a print of url:I am completely out of ideas at this point. I have triple checked that my secret key, access key, seller ID and marketplace ID are correct.Any help would be massively, massively appreciated!
I know this is a few months late but I had the exact same issue despite knowing my signature was correct and found out it was in fact the POST execution that was the problem and not the signature.  If Amazon can't understand your params, it will throw an HTTP 403 error and tell you your signature is wrong even though it's not.  I can't tell you why it works this way but try skipping the requests library and doing the following using urllib.request after building your url instead which worked for me:If that doesn't do it, take a second look at how you encoded everything and maybe dabble with urllib.parse.Happy Amazoning!
Inside your calc_signature function, your safe parameter isn't allowing + and / which are allowed in the base64 output character set. As a result, it is percent-encoding them, and then those percents get further perecnt-encoded as %25s in the query string.I made some additional changes, so here's all the code:


Answer URL
