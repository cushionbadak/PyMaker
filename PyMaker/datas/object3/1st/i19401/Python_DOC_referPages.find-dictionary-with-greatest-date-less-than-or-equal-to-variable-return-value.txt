Natural Text
I installed the python package fred, using pip install fred, to obtain real time data from the FRED / ALFRED API.  My task now is to match an assessment date to the data -- so to extract values associated with the greatest realtime_date that's less than or equal to what i'm calling the assessment date (aDate).  The data itself is returned in a python dictionary, which contains lists, with each observation stored in a dictionary along with some meta-data -- each observation dict contains: a reference date (date), the realtime period that the request covered (realtime_end, realtime_start) and the value (value). I can see how to match the data to an assessment date when there is an exact match, but in the real world these are the exception.  I am looking for help to generalise this to an inequality. (note below i am using a variable fredKey -- whereas you must supply your own FRED API key to access FRED). For this example, I chose an annual benchmark revision date, to be sure to get something back.  In practice, I am usually going to be updating the simulation on dates where noting happened -- in which case my method returns nothing.  The solution seems to be to match to the greatest date (a realtime_start value) that's less than or equal to the assessment date (say aDate == "2008-02-14").  How might i match to the greatest realtime_date that's less than or equal to aDate? thanks
One way would be to identify the candidates by filtering out all items in CPIobvs['observations']['observation'] where 'realtime_start' > aDate.I would do this as a generator expression:If you want to see the details, you could form a list comprehension in your interpreter:Once these candidates are identified, then use the in-built max() function, providing a lambda for the key, which uses the value of 'realtime_start' to sort the candidate dicts:The details you require are now in last_ob['date'] and last_ob['value'].


Answer URL
