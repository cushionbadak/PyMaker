Natural Text
Can I do more complex if expressions than strict a = b if c else d. Can I string together serial expressions, or nest an if expression inside another if expression?  I cannot find an answer in the docs or online.CONTEXT (some of it is only relevant to explain why I am seeking this, rather than another solution):     I have two scalar variables (a and c) that either have an actual value or are set to -1. If they have a value this is always true c - a = 2 (they are list indexes, for specific items in a list, but the items are not always present. If either a or c has a value other than -1 , then I want to create a third scalar variable b that has a specific value (the value between a and c).if neither a nor c has a value, then I want to set b = -1so would ideally write something like this: b = a+1 if a != -1 else c-1 if c != -1 else -1 I cannot figure out if this is allowed - legal. And if it is legal, does it get evaluated sequentially? An alternative specification would be hierarchical:b = (a+1 if a != -1 else c-1) if (c != -1 or a != -1) else -1 Is either of these legal? Advisable? Thanks.
According to the documentation, the part after the else in a conditional can be any expression, explicitely including another conditional expression.So the following is a valid Python expression:its value is as expected:a+1 if a!=-1 (whatever value for b)b-1 if a == -1 and b != -1-1 if a== -1 and b == -1But as readability is a major concern in Python, please do not abuse of those nexted conditional expressions...
Just don't.... you should make sure your code is readable and maintainable over making it all fit on one line. So separate it out into multiple different if statements as required or look into refactoring the logic involved.Above all, when you introduce real variable names you'll have trouble trying to make it conform to pep8 standards.


Answer URL
https://docs.python.org/3/reference/expressions.html#conditional-expressions
