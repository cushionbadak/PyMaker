Natural Text
I tried to find the solution but did not find any on any post.I am trying to create a file sharing system between two sockets but as my client connects to server, on first send by server I get broken pipe error.Is there something I have to do to keep the socket listening or any other way I can do this transfer?I am also running a central server that makes these two of its clients a server-client pair on the same ip as one of the socket. could that cause this problem(i put it on sleep after it creates the temporary pair)here is the server code:this is the client code:
The problem is that in your server program, you're trying to send data on the wrong socket.sock is the server (or the master, if you will) socket. That is only used to listen for incoming connections.[Python]: socket.accept() documentation states:Accept a connection. The socket must be bound to an address and listening for connections. The return value is a pair (conn, address) where conn is a new socket object usable to send and receive data on the connection, and address is the address bound to the socket on the other end of the connection.Change your line (and all the other lines that have sock.send) from:to:The lines:should be moved inside the while loop (indented), and perhaps you could add a conn.close() at the end of the loop.In your client program:The try / except clause is useless, since the server doesn't listen on port 12346If the file contains an "ENDED" string, you won't receive the complete content. I'd suggest to make your end tag more complex (so there are as least chances as possible for it to be present in the file), or better:Send the file size first, and then on the client, expect exactly that number of bytes (might wanna check [SO]: multiple send from server to client python (@CristiFati's answer))


Answer URL
https://docs.python.org/3/library/socket.html#socket.socket.accept
