Natural Text
My Django webapp uses oAuth2 to get authenticated in Strava.I have a link in my webpage that sends a request to Strava indicating a redirect url amongst other arguments. In this example case http://127.0.0.1:8000/token_exchangeStrava then makes a request to that url with the code to exchange for the access token. I have a view that does that exchange in that url.Everything works fine.My problem is that I am trying to build an automated test. But when I launch the tests (with python manage.py test) the server does not run in port 8000 but in a different port.Is there a best practice way to manage that redirect url so that it has production domain in production but uses the test server address when running the tests?Thanks!!!
The goal of unit testing is to isolate each part of the program and show that the individual parts are correct.https://en.wikipedia.org/wiki/Unit_testing#AdvantagesIf you're writing unit tests and not complex integration tests, the best practice would be just mocking this behavior.There is a wonderful guide at Python docs about unittest.mock library on how to monkey patch all the behavior you're not testing in the particular case:https://docs.python.org/3/library/unittest.mock-examples.htmlAlso, you should definitely check out responses library, it's really useful when you're trying to test parts which rely on third-party services:https://github.com/getsentry/responses


Answer URL
https://docs.python.org/3/library/unittest.mock-examples.html
