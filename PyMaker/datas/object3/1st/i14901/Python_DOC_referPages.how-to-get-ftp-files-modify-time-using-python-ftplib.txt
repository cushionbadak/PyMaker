Natural Text
I'm trying to load a CSV file to Amazon S3 with Python. I need to know CSV file's modification time. I'm using ftplib to connect FTP with Python (2.7).
MLST or MDTMWhile you can retrieve a timestamp of an individual file over FTP with MLST or MDTM commands, neither is supported by ftplib.Of course you can implement the MLST or MDTM on your own using FTP.voidcmd.See:3. File Modification Time (MDTM)7. Listings for Machine Processing (MLST and MLSD)A simple example for MDTM:MLSDThe only command explicitly supported by the ftplib library that can return standardized file timestamp is MLSD via FTP.mlsd method. Though its use makes sense only if you want to retrieve timestamps for more files.Retrieve a complete directory listing using MLSDSearch the returned collection for the file(s) you wantRetrieve modify factParse it according to the specification, YYYYMMDDHHMMSS[.sss]For details, refer to RFC 3659, particularly the:7.5.3. The modify Fact section2.3. Times sectionNote that times returned by MLST, MLSD and MDTM are in UTC (unless the server is broken). So you may need to correct them for your local timezone. Again, refer to RFC 3659 2.3. Times section:Time values are always represented in UTC (GMT), and in the Gregorian  calendar regardless of what calendar may have been in use at the date  and time indicated at the location of the server-PI.LISTIf the FTP server does not support any of MLST, MLSD and MDTM, all you can do is to use an obsolete LIST command. That involves parsing a proprietary listing it returns.A common *nix listing is like:With a listing like this, this code will do:Finding the latest fileSee also Python FTP get the most recent file by date. 
When I want to change the file modification time, I use an FTP client on the console.Log on to a remote FTP ftp ftp.dic.comcd commands go to the correct directorySITE command to move the extended command modeUTIME somefile.txt 20050101123000 20050101123000 20050101123000 UTC change the access time, modification time, it's time to create a directory on 2005-01-01 12:30:00 somefile.txtComplete example:site UTIME somefile.txt 20150331122000 20150331122000 20150331122000 UTCPlease feel free to sit back and wish you a pleasant journey in time :)


Answer URL
https://docs.python.org/3/library/ftplib.html#ftplib.FTP.voidcmd
https://docs.python.org/3/library/ftplib.html#ftplib.FTP.mlsd
