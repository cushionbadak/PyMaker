Natural Text
So I am trying to keep my project as simple as possible, therefore I have decided to use a CGI with my Python scripts in order to run a program that does something.So here is my current setup:In CMD, I run:python -m http.server --cgi 8000This start a server for me. I can access it via localhost:8000. Next, I am trying to find my directory with the script by typing in the actual address where it is located: localhost:8000/test/cgi-bin/test.pyThis is giving me the output of the actual file, not actually reading it properly. I have tried 2 different ways to output data on the Python file, for example:and Both of which result in the actual code being displayed in my browser.A few questions:How do I get my server to automatically take me to the location of the file I am trying to run? How do I get the python script to output the proper stuff? Am I setting this up correctly?I am trying to avoid installing any new dependencies and keep it as minimal as possible. I am running on Python3, Windows7. I am trying to avoid downloading more pip packages and dependencies because my work is very tech precautious. Any help is greatly appreciated.
First, I want to say that writing plain CGI-scripts in 2017 is a way of a brave person. Your life will be much easier if you would use bottle or flask.But if you want, here is the way you can start.python -m http.server --cgi assumes that the cgi-bin is in the current directory. That is you should go to the test directory and start the command from there. And then call http://localhost:8000/cgi-bin/test.py.Your cgi-script is not correct. The script should be executable. I am not sure if it needs a shebang line in Windows when you run the http.server, but is is required when you run CGI-scripts with Apache web server under Windows. The shebang line starts with #! and then contains the full path to python3 interpreter, and the line should end with \n and not \r\n, otherwise it won't work.After that you should output all the HTTP-headers, print a blank line, and output your content. All HTTP-headers should be separated by '\r\n' and not '\n'.Here is an example CGI-script that works on OS X:
I think the first line of the script needs to specify the interpreter path. Some examples are:See if it helps.
According to the http.server documentation:This defaults to ['/cgi-bin', '/htbin'] and describes directories to treat as containing CGI scripts.So, http.server is expecting to find CGI scripts in a subfolder named /cgi-bin ot /htbin in your python.exe folder. If you really want to use the test folder, then change the cgi-directories variable in the http/server.py script.


Answer URL
https://docs.python.org/3/library/http.server.html#http.server.CGIHTTPRequestHandler
