Natural Text
When I try to do what question is about using:...I get this error:All I really want is to run a function named func (specified as argument type above) when this flag is used on commandline like so:Is that possible somehow? Please let me know if I need to be more detailed with my question.
You can call your function after parsing argumentsparser.add_argument("--blah", help="Whatever", action='store_true')args = parser.parse_args()and then check for flag value and call function appropriately
The type parameter is meant to be a function that is tests and/or converts the commandline argument into something that will be stored in the args namespace.will convert ['--foo','123'] into Namespace(foo=123), as opposed to foo='123'.But action='store_true' creates a True/False argument.  It doesn't take an argument after the flag.  So it's meaningless to give it a type parameter.    Admittedly the error message could be clearer, but this sort of error doesn't come up that often.  And it's a development problem, not a runtime one.As others have pointed out, you can use the True/False value of args.blah to conditionally run your func after parsing. When do you want func to be run?  After it's parsed all of the commandline?  Or while it is still parsing?  I prefer to separate parsing from running.  Use argparse to figure out what your user wants; use your own code to perform the action(s) after.

Here is one way to do that:This way it gets stored after the cleanup execution


Answer URL
https://docs.python.org/3/library/argparse.html#type
