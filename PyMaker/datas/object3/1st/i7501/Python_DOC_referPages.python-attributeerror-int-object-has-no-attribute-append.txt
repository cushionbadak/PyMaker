Natural Text
I have a dict of int, list. What I'm trying to do is loop through `something' and if the key is present in the dict add the item to the lsit or else create a new list and add the item.This is my code.My question is two-fold.1. I get the following error,Line 27: AttributeError: 'int' object has no attribute 'append'Line 27 is the line marked with ***What am I missing that's leading to the error.How can I run this algorithm of checking key and adding to a list in a dict more pythonically.
You set a list first, then replace that list with the value:Drop that last line, it breaks your code.Instead of using if...else, you could use the dict.setdefault() method to assign an empty list when the key is missing, and at the same time return the value for the key:This one line replaces your 6 if: ... else ... lines.You could also use a collections.defaultdict() object:andFor missing keys a list object is automatically added. This has a downside: later code with a bug in it that accidentally uses a non-existing key will get you an empty list, making matters confusing when debugging that error.


Answer URL
https://docs.python.org/3/library/stdtypes.html#dict.setdefault
https://docs.python.org/3/library/collections.html#collections.defaultdict
