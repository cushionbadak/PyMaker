Natural Text
I know that dicts and sets aren't ordered, so equal sets or dicts may print differently (all tests with Python 3.6.1):And I just realized that pprint (“pretty-print”) sorts dicts but not sets:It's documentation also says "Dictionaries are sorted by key before the display is computed". But why doesn't it also sort sets? Doesn't seem pretty to me. And is there a way to make it sort sets? Also inside nested structures, as that's a main purpose of pprint.
This was raised in issue 27495 and it is a bug, rather than just a design choice, but apparently has not yet been resolved.Here is another example from the issue that illustrates perhaps more obviously the behavior you identify in Python 3:The same applies for frozenset() too, but note that multi-line pprint outputs are sorted in Python 3, for example:However, in Python 2, the output from the same original code is sorted:I think it is the inconsistency between Python 3 and Python 2, and between the single-line multi-line behavior, that makes this a bug. For dicts, a similar example, illustrates as you note, that the output is sorted in either Python 3 or 2, as it should be:However, for Python 3.6, it could be considered surprising that pprint sorts dicts since they are ordered now. However, since this is just an implementation detail (for now) I guess there is no obligation for pprint to maintain the insertion order (yet), and doing so would break pprint's own consistency across Python versions of always sorting dicts.


Answer URL
https://docs.python.org/3/library/pprint.html
