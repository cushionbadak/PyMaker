Natural Text
There are 1000 over html files.I want to do:read file.trim the specific line.over write the file (not appending).following code worked. but I thought using 'open' twice was wasteful. Can I write more simply?I tried:'r+': this is addition.'w+': read() method returned ''.
Yes, open the file in 'r+' mode, and 'rewind' (seek back to start) after reading:I added a file.truncate() call as well, because you are removing data from the file. Without that call, you would not replace all data in the file, you'd still have len(removed_data) bytes at the end.Your attempts failed because you did not seek back to the start when using 'r+' (so writing started at the point where reading stopped, i.e. the end of the file), and 'w+' truncates the file first (so sets the length to 0, dropping the contents).The alternative would be to use the fileinput module; it lets you replace file contents in-place with a somewhat simpler approach:With inplace=True, the old file is moved aside to a <filename>.bak backup for you, and printing directs output to a new file opened in the original location.


Answer URL
https://docs.python.org/3/library/io.html#io.IOBase.seek
https://docs.python.org/3/library/io.html#io.IOBase.truncate
https://docs.python.org/3/library/fileinput.html
https://docs.python.org/3/library/fileinput.html#fileinput.hook_encoded
