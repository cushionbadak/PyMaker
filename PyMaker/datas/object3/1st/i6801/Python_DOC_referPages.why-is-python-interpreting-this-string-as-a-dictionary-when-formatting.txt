Natural Text
This question already has an answer here:How can I print literal curly-brace characters in python string and also use .format on it?                    9 answers                Format: KeyError when using curly brackets in strings                    3 answers                I am having problems using format with a string which looks like a Python dictionary.I want to generate the following string: {"one":1}If I try to do it as:the interpreter throws a KeyError:I understand that the issue probably revolves around the fact that the string contains {, which can be confused with format's {}. Why is this happening exactly and how can it be solved?I know of percentage formatting, but I'd like to find a solution that doesn't involve ditching format().
The formatting of '{"one": {}}' is using an identifier as the field_name and will essentially try to look for a keyword argument that's been supplied to .format and has the name '"one"'.As the docs state:The field_name itself begins with an arg_name that is either a number or a keyword. If it’s a number, it refers to a positional argument, and if it’s a keyword, it refers to a named keyword argument.(emphasis mine)That's why you get the KeyError exception; it tries to look for a key in the mapping of keyword arguments provided to format. (which, in this case, is empty, hence the error).As a solution, just escape the outer curly braces:The same remedy applies if you decide on using f-strings in the future:
You need doubled curly braces {{ }} to escape curly braces in string formatting.from doc:Format strings contain “replacement fields” surrounded by curly braces  {}. Anything that is not contained in braces is considered literal  text, which is copied unchanged to the output. If you need to include  a brace character in the literal text, it can be escaped by doubling:  {{ and }}.If you do not escape braces, str.format() will look for the value of key '"one"' to format the string. For example:
Braces can be escaped by using double braces, use:


Answer URL
https://docs.python.org/3/library/string.html#grammar-token-field_name
https://docs.python.org/3/library/string.html#format-string-syntax
