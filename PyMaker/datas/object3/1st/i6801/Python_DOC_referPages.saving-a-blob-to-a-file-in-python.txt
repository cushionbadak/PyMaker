Natural Text
I am trying to save a blob sent via ajax, as a file in python. Had been through this before Python: How do I convert from binary to base 64 and back? It results in error: bad char in struct formatSimply using this vid.write(video_stream.decode('base64')) without usingstruct.pack saves the file but when I open the video it results in could not determine type of stream. The ajax call goes like this but it looks fine I guess.Any help with it will be appreciated. Any suggestions about any flaws or possible causes are welcome.  
You could using Python's base64 library to encode and decode data in your SaveBlob class:Giving you back the original video_stream:For this simple example, the saved file would appear as:
The first argument to struct.pack is a format string that specifies the layout of the struct.  You are only passing the bytes that you want to pack, so this is interpreted as an invalid format:Constructing a valid format string fixes this (but note the you need to construct the format string based on your data and platform):It's unlikely to be necessary to pack* or base64-encode the data if it's just being written to disk; just write the bytes to file directly:Your video player should be able to read the binary file and interpret it correctly.Base64 encoding is really for transferring binary data when the transfer mechanism expects ascii-encoded data, so there's no benefit in applying this encoding just to write to a file.  If you really need to base64-encode your data, use the python's base64 package as Martin Evans recommends in his answer..* It may be necessary to pack the data if it's being moved between platforms with different endianness.
The other solutions were helpful where it would write the file to the disk still it would say incorrect file format or unable to play the file because of missing plugins. It was something to do with JavaScript (which I'm not much comfortable with) where I had to have all meta data in FormData I guess. I'm not sure why this works. Had searched somewhere and found this which worked.Would be great to know what went wrong above. Would accept any other answer explaining this. Javascript


Answer URL
https://docs.python.org/3/library/struct.html#format-strings
https://docs.python.org/3/library/base64.html
