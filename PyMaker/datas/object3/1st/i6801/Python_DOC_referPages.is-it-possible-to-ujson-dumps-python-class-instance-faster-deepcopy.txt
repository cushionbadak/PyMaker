Natural Text
I am trying to make a fast copy of a class instance. cPickle.loads(cPickle.dumps(),-1) works fine, almost 5 times faster than copy.deepcopy, but I read that ujson is much faster than cPickle. I could not get ujson to work with a custom class, is it possible to do so?example:
An idea is to define your own protocole, base of the concept described for pickle.Define a __getstate__ and __setsatte__ instance in your class:Then, you can define a save() and a load()function like this:Simple usage (using a StringIO here instead of a classic file):
ujson isn't serializing the object; it's just encoding its attribute dict as a JSON object. There isn't enough information there to reproduce the original object in it entirety; the most obvious indication is that nothing in the output of ujson.dumps records what class a was an instance of.The reason usjon is so much faster than cPickle is that cPickle has to do a lot more.


Answer URL
https://docs.python.org/3/library/pickle.html#pickling-class-instances
