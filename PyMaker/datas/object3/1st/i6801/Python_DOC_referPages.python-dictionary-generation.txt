Natural Text
I am trying to make a dictionary of array values in python but since I am new to python I seem to be missing something simple. Someone kick me in the butt please.So a data likeshould becomeButGives foo.I can see the rows if I print them so data is there.
Your condition if not datasets[row['col1']]: is wrong. This would get the element of that key from the dict and check whether it's "truthy", but the dict might not have that key yet, thus raising an exception. Instead, it should probably be if row['col1'] not in datasets::Alternatively, you could use dict.setdefault to set and return a default value in case the key is not yet in the dict.
Your original code should not run without raising an exception because you try to access non-existent keys on the datasets dict.Using a defaultdictFor your use case this is my preferred method.You can simplify a lot using the defaultdict convenience collection.Using EAFP (easier to ask forgiveness than permission)Here we rely on catching the KeyError thrown when accessing a non-existent key in a dictionary, and then initializing that value in the dict when that happens. If it already exists, just append to the list we've already created.Using key existence checkHere we check if row[0] in datasets. The logic is similar to the previous example.
Close!This should fix it.


Answer URL
https://docs.python.org/3/library/collections.html#collections.defaultdict
