Natural Text
I use context manager in python. In want to get some logs back from my __exit__ method. So my code logs something like this:So how could I access my_results which is returned from __exit__ after (or at the end) of my with block. Is this even legit to return something other the True in the __exit__ method?
Is this even legit to return something other the True in the __exit__ method?No, not really, but Python will just test for the truth value, so you can get away with it. In other words, if you return a truthy object here, any exceptions will be suppressed. If there was no exception, returning a truthy value is just a no-op. how could I access my_results which is returned from __exit__ after (or at the end) of my with block.You can't. The with expression machinery consumed it. You should make it available in some other way; set it as an attribute on the context manager object itself:The manager name is available after the with block has completed.This is how the unittest.TestCase.assertRaises() context manager shares the captured exception, for example.


Answer URL
https://docs.python.org/3/library/stdtypes.html#truth-value-testing
https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertRaises
