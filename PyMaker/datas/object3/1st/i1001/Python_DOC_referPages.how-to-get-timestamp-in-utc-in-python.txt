Natural Text
I'm using an API that has an endpoint that can be filtered by date. The date needs to be in timestamp in seconds since epoch and it must be in UTC so that the API can be properly filtered This is what I've tried as of todayThis is my outputAnd then when I take the gotten timestamp 1546318800 for the first day of January and then I go to https://www.epochconverter.com/ and paste it to human date I get the following:GMT: Tuesday, January 1, 2019 5:00:00 AMYour time zone: Tuesday, January 1, 2019 12:00:00 AM GMT-05:00 I want the GMT time to be January 1, 2019 12:00:00 AMHow can I accomplish this?
You are working with naive datetime objects. For a naive datetime object, the time is assumed to be in local time, and so your local system timezone offset is first applied. From the `datetime.timestamp() documentation:Naive datetime instances are assumed to represent local time and this method relies on the platform C mktime() function to perform the conversion.and further on:Note: There is no method to obtain the POSIX timestamp directly from a naive datetime instance representing UTC time. If your application uses this convention and your system timezone is not set to UTC, you can obtain the POSIX timestamp by supplying tzinfo=timezone.utc:Note that you can make your date calculation logic much easier by working with daetime.date objects and using datetime.combine(); this method also accepts a new timezone value, so you can pass in the timezone.utc timezone at this stage:The above calculates the last day of the month by first adding 31 days (guaranteed to reach the next month whatever the current), then dropping that new date down to the first day of the month and then subtracting one day.Demo:Note that midnight on the 31st of January leaves another 24 hours of the month left uncovered. You may want to remove the - timedelta(days=1) subtraction off of the last_day calculation above to switch to February 1st midnight (1548979200), or use time.max to shift the timestamp to 23:23:59 (1 second before midnight) on the 31st (1548979199).


Answer URL
https://docs.python.org/3/library/datetime.html#datetime.datetime.timestamp
https://docs.python.org/3/library/datetime.html#datetime.datetime.combine
