Natural Text
I am trying to use argparse in my python code to set 5 different variables equal certain values based on command line. And if these variables are not entered, it will be set to default which was already defined in my code.So if i run the code:It will set the CSV = "/Home/data/file.csv", length = 1, cluster = 7, dim = 5 and fnumber = 8.But if instead i run the code:It will set the CSV = "/Home/data/file.csv", length = 4, cluster = 7, dim = 9 and fnumber = 8 because the length was already pre-defined in my code to be 7 and dim was pre-defined to be 9.Whatever i type in the command line should replace the already defined value in my code belowThe difficult part is that i have to type out the string like "length = 1" in the command line instead of just the value 1. This is because i want the user-interface to be clearer as some variables can be left blank if i have to use spaces to replace those empty arguments and it will look bad. So i am required to type out the declaration of variables value in command line
Here's something simple showing how it could be done with argparse and allow you to define the default values. To use it you will need to follow its argument-passed conventions/style, which doesn't have the spaces around the = and requires each argument to start with a - (or --, see the docs).It's possible to get fancy and, for example, allow an argument to be specified in more than one way. For that and many other options, I suggest you consult the module's documentation.Note that the values shown being passed in the parse_args() calsl are what might be in sys.argv for a command-line composed of all of them joined together and separated by spaces.Output:
Input all the command line arguments without spaces around the equal signs (length=1 instead of length = 1) since it's a command line convention anyways. Then, iterate through all the command line arguments and call the built in Python function exec (more information here) to set all the configuration variables. Note this should come after all the defaults are set.Please note it is usually not advisable to use exec because it will run anything in the input. If you are planning to ever publish this code, you should think about creating a filter for the command line arguments. To do that, first split the string of the command line argument by the equals sign and check if the first part of the split is in your set of configurable variables and if the second part is actually a number (if that's what you want).
Try this:Explanation: if word is not in args, then index would generate an ValueError exeption. If args.index(word) + 2 is larger than the length of args, you'd get an IndexError.A test in IPython:Adding the defaults makes it slightly more complicated:


Answer URL
https://docs.python.org/3/library/argparse.html#module-argparse
https://docs.python.org/3/library/functions.html#exec
