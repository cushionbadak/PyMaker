Natural Text
I have a recursive directory. Both subdirectory and files names have illegal characters. I have a function to clean up the names, such as it replaces a space with an underscore in the name. There must be an easier way but I couldn't find a way to both rename folders and files. So, I want to rename the folders first.When I check my real folder and it contents I see that only the first subfolder name is corrected. I can see the reason because os.chdir(path) changes the cwd then it doesn't change back before for loop starts to second path. I thought after the os.rename I could rechange the cwd but I am sure there is a more elegant way to do this. If I remove the os.chdir line it gives filenotfound error.I see that renaming subdirectories has been asked about before, but they are in command line. 
You should use os.walk(root, topdown=False) instead; otherwise once the top folder gets renamed, os.walk won't have access to the subfolders because it can no longer find their parent folders.Excerpt from the documentation:If optional argument topdown is True or not specified, the triple for  a directory is generated before the triples for any of its  subdirectories (directories are generated top-down). If topdown is  False, the triple for a directory is generated after the triples for  all of its subdirectories (directories are generated bottom-up). No  matter the value of topdown, the list of subdirectories is retrieved  before the tuples for the directory and its subdirectories are  generated.Note that you do not need to call os.chdir at all because all the paths passed to os.rename are absolute.


Answer URL
https://docs.python.org/3/library/os.html#os.walk
