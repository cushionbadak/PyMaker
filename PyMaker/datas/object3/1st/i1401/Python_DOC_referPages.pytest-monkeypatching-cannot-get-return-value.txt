Natural Text
I am trying to mock a return value for a function that I am calling, with the help of pytest and monkeypatching.I set up the fixture for my mock class, and I am trying to "overwrite" one of the methods in said class.However, I might be missing something, because calling assert_called_with throws an error:Is there something in my monkeypatching logic that I am misplacing?
Follow up from my comments. You are basically trying to make a mock that behaves like a mock (so that assert_called_with is available) and also executes your get_mock_cookie (a function).This is what the wraps argument does. Documented here: https://docs.python.org/3/library/unittest.mock.html#unittest.mock.MockYou can try something like this:The error that you are getting is basically telling you that you were trying to call assert_called_with on a function object (your get_mock_cookie).


Answer URL
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.MagicMock
