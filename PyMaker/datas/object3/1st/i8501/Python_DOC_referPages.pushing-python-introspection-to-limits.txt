Natural Text
Simple question â€“ can I print the source code of this if?Please don't ask me why I need it, nor give me advice on how to write user help. I want to know it because I'm curious.
Yeah, that's doable. Here's a quick sketch of how you could do it and what tools would be involved:Retrieve the stack frame of print_source_of_block's caller with inspect.currentframe().f_back.Determine the caller's source file and line number within that source file with inspect.getframeinfo.Open the source file.EitherUse ast.parse to parse the file, orUse tokenize.tokenize to tokenize it.Using either the abstract syntax tree or the token stream, determine where the requested source block begins and ends.Print the block.
Might want to look at the inspect module (https://docs.python.org/2/library/inspect.html).  Specifically, the inspect.getsource(object) method.


Answer URL
https://docs.python.org/3/library/inspect.html#inspect.currentframe
https://docs.python.org/3/library/inspect.html#inspect.getframeinfo
https://docs.python.org/3/library/ast.html#ast.parse
https://docs.python.org/3/library/tokenize.html#tokenize.tokenize
