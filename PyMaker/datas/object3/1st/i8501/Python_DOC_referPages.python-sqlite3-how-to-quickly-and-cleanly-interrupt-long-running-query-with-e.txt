Natural Text
Using the sqlite3 module in Python a long running query is not quickly interrupted/canceled when a SIGINT (e.g. Control-C) is received.  There is an interrupt() method provided by sqlite3, but there are no examples of how to use it.Is there a simple way to interrupt/cancel a long running query running via Python/sqlite3?To illustrate, first generate a test database & table:Then execute a long running Python/sqlite3 script in a terminal and try to interrupt it with Control-C:Running the above script in a terminal and then pressing Control-C (or sending SIGINT some other way) will eventually cancel the query and script but it can take quite a bit of time, many minutes.  The exact same query running in the sqlite3 command line tool is near-instantly canceled when Control-C is pressed.Thanks in advance! 
Your answer covers it, but (after letting it slip my mind yesterday - sorry!) I remembered I'd promised to write an answer, so here's another version that demonstrates you can do this without globals. I've also used a threading.Event here instead of a signal to demonstrate there's a few different ways of signalling a thread that it's time to do something (but for your purposes, stick with signal because that's perfect for reacting to a Ctrl+C):
Answering my own question since I think I've worked it out.  Below is what I've come up with, any comments on this code would be greatly appreciated.


Answer URL
https://docs.python.org/3/library/sqlite3.html#module-sqlite3
https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection.interrupt
https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection.interrupt
