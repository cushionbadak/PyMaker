Natural Text
I'm trying to save a date in my sessions. I always receive the error Object of type 'datetime' is not JSON serializable. I found this here in the Django documentation: stored as seconds since epoch since datetimes are not serializable in JSON.How can I save my expiry_date as seconds instead of datetime?
Either write your own session serialiser to allow you to serialise datetime objects directly, or store the datetime value in some other form.If you want to save it as seconds, then use the datetime.timestamp() method:Your own SESSION_SERIALIZER class only needs to provide loads and dumps methods, directly analogous to json.loads() and json.dumps() (which is how the standard JSON serializer is implemented).If you want to encode datetime objects and be able to transparently turn those back into datetime objects again, I'd use a nested object format to flag such values as special:and set SESSION_SERIALIZER to the full qualified name of the above module (path.to.module.JSONDateTimeSerializer).The above uses the datetime.fromisoformat() method, new in Python 3.7.


Answer URL
https://docs.python.org/3/library/datetime.html#datetime.datetime.timestamp
https://docs.python.org/3/library/datetime.html#datetime.datetime.fromisoformat
