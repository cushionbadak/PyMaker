Natural Text
Hello I want to implement for myself a little library access control in my copy of python and I want to know if there is some way to create a Hook on the import system so my programm Can check on a file every time an import is made if that programm has the permission to import that library.I saw something about the sys library and pep 302 (https://www.python.org/dev/peps/pep-0302/) but I didn't understood. 
You can change the import of modules by implementing you own custom import loader object. A starting point in the documentation can be found here: https://docs.python.org/3/library/importlib.htmlWhat you need to do is to create a loader that will act on the packages you want to check on, and then either load them, or raise a desired exception. In the case of modules what are not in your access control list, you should return None, this makes the import machinery load them normally. I have create a minimal example of this type of functionality that you can start from and extend to build your desired functionality.Note that the loader removes itself from sys.meta_path when loading the package. This is to avoid an infinite loop where it keeps calling itself every time it tries to load the module "for real".


Answer URL
https://docs.python.org/3/library/importlib.html
