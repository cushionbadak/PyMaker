Natural Text
We have a C++ QT application, we embedded python in it. We provided two interfaces to the user      1. Execute file      2. Stop execution.We execute a python file in a non GUI thread, using PyRun_FileExFlags.We would like to interrupt python file execution (assume python file has an infinite loop, it never completes execution).How to interrupt?We tried following1. In main thread set trace using PyEval_SetTrace2. (if user click on Stop execution) In the trace call back function we set error "PyErr_SetString"1:setting trace function2:trace function Python execution is not interrupted.I expect python execution to interrupt.
PyEval_SetTrace affects the current thread only.You want PyErr_SetInterrupt.  It interrupts (what Python considers to be) the main thread, regardless of the calling thread (which need not bother with the GIL).


Answer URL
https://docs.python.org/3/c-api/exceptions.html?highlight=pyerr_setinterrupt#c.PyErr_SetInterrupt
https://docs.python.org/3/c-api/init.html?highlight=pythreadstate_setasyncexc#c.PyThreadState_SetAsyncExc
