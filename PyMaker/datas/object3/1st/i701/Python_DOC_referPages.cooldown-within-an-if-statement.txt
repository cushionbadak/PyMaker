Natural Text
I'm coding a pretty simple Twitch Chatbot in Python and I have all my "commands" running in if statements (basically if the chatbot sees something in chat it activates). However, I want to add a cooldown of about 3 seconds or really an amount of time per command (or if statement), so that I can customize it depending. To do that I tried this (pseudo code)but that didn't work because obviously it does not detect the (previoustimestamp) on the first run since it's not declared yet, but when you declare it, it declares it every time the command is run. So is there a way to make a declaration only once at the beginning of an if statement and then ignore it subsequently every other time? Or any other ideas? I'm still a pretty novice programmer so I apologize. Here's an example code that I would want the cooldown for, something quite simple
I'd use a dictionary for the timestamps, accessing it like previous_timestamp = command_timestamps.get('!redb match', 0). This will give you the stored timestamp if it's in the dictionary, and 0 (Jan 1 of 1970 if you're using time.time() for your timestamps, which is hopefully far enough in the past that it won't foul up any of your cooldowns).
You could write a decorator for a function that stores the last time it was called, and return None if that was too close to nowThe arguments to cooldown are sent to timedelta, so you should read the documentation more on those objects
You could use time.sleep(3) to wait 3 seconds if a certain condition triggers for example. This will pause the execution for 3 seconds.Edit: Since you want these if statements to have their own cooldowns you could try putting this within a control loop which is a bit more complex


Answer URL
https://docs.python.org/3/library/datetime.html#timedelta-objects
