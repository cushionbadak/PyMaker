Natural Text
I wanted to define a class that returns None for unknown attributes with __getattr__ method.After doing that, I am trying to dump an object of that class to a Pickle.However, I got the errorWithout defining __getattr__, it works fine, but I would like to keep this function.Here is my code: how to make it work with __getattr__?Thanks
The problem is that pickle tries to check if your object has a __getstate__ method, which can be used to customize how objects are pickled. Because your class doesn't define a __getstate__ method, your __getattr__ method ends up being called and it returns None. Pickle tries to call this None value and that produces the exception you got.There are two ways to fix this:Define a __getstate__ and corresponding __setstate__ method in your class:Rewrite your __getattr__ method to handle dunder-attributes better (i.e. throwing an AttributeError instead of returning a nonsense value):
If you override __getattr__, you have tell how exactly your object can be pickled by implementing the __getstate__ and __setstate__ methodsHave a look at here for more info


Answer URL
https://docs.python.org/3/library/pickle.html#object.__getstate__
https://docs.python.org/3/library/pickle.html
