Natural Text
I have a .txt file that is UTF-8 formatted and have problems to read it into Python. I have a large number of files and a conversion would be cumbersome. So if I read the file in viaI get the following error:I guess x.decode("utf-8") wouldn't work since the error occurs before the line is even read in.
There are two choices.Specify the encoding when opening the file, instead of using the default.Open the file in binary mode, and explicitly decode from bytes to str.The first is obviously the simpler one. You don't show how you're opening the file, but assuming your code looks like this:Do this:That's it.As the docs explain, if you don't specify an encoding in text mode:The default encoding is platform dependent (whatever locale.getpreferredencoding() returns), but any encoding supported by Python can be used.In some cases (e.g., any OS X, or linux with an appropriate configuration), locale.getpreferredencoding() will always be 'UTF-8'. But it'll obviously never be "automatically whatever's right for any file I might open". So if you know a file is UTF-8, you should specify it explicitly.
For Python 2 and 3 solution, use codecs:Otherwise -- Python 3 -- use abarnert's solution


Answer URL
