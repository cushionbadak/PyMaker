Natural Text
How do I 'unpack' a dictionary from a text file with values as lists? I've used this code I have found on the internet:but it gives me this errorsave.txt
There are some few problems with your initial codeYour save.txt file is weird, because all the keys are the same if you will convert this file into a dictionary, the last one with key test is the only one that will be the final result of the iteration.d[int(key)] = val the expected key here is a string which is test so int(key) is pointless and will result into a ValueError.( key, val) = line.split() You are splitting without specifying a delimiter so you are receiving the error ValueError: too many values to unpack (expected 2) because split is trying to use all delimiter like spaces, coma... Again here d[int(key)] = val the val here is still a string and not a listHere's a sample code that will work on your requirementYour save.txtYour python codeHere is some explanation, (key, val) = line.split(maxsplit=1)we only want to split the first space that is the reason of maxsplit here, you can also do it like(key, val) = line.split(' ', maxsplit=1)to explicitly say that you want to split only the first space.import astandd[key] = ast.literal_eval(val)AST is a python package that you can use to evaluate a literal and convert it into a list. You can learn more about this here AST DocumentationHere's my output of this code{'test1': ['0', '0', '0', '0'], 'test2': ['0', '0', '0', '0'], 'test3': ['1', '0', '1', '0']}
You should split a line into two parts and then convert the second part into a list with literal_eval():For your reference, there will be only one entry in the dictionary constructed from your file, because all three keys are identical.
Warning: this is a simple and quick way to solve your problem. But it may be dangerous if you are not sure if there is some dangerous code in the file.
The code snippet you supplied works if your file in formatted as follows:for line in f: will go through the file line by line, so line will first contain the string "key1 value1"line.split() by default spilits on a space (" "), so when this is executed on line, it results in an array like so: ["key1", "value1"]To use Python's unpacking, the number of variables needs to match. The error you are getting (ValueError) explains that "too many values to unpack". As you are splitting on a " ", I suspect that you have more than one space per line, which yields more variables to unpack.The contents of save.txt would be useful to further assist you.
Key in records is string, can not be typecasted to int. 


Answer URL
https://docs.python.org/3/library/ast.html
