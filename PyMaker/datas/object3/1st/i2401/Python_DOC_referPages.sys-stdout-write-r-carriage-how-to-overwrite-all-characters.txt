Natural Text
I'm playing with itertools.cycle and I'm using a simple list as input. Then I write a while loop and I want to basically overwrite my output with each color as I iterate through them. The sys.stdout.write('\r' + colors) line does not overwrite all characters, only the length of the string of the next color. Lastly, I have a .5 second delay between each iteration.When I get to 'yellow' in my loop, I am left with 'w' or 'low' when the shorter 'green' and 'red' strings are printed. My output looks like this (after the first loop when 'yellow' is printed).Can I completely overwrite the output with the '\r' carriage?
You can calculate the maximum width of the color strings and then use str.ljust to pad the output with enough spaces to fill to the maximum width:
The carriage return '\r' will send the cursor to the beginning of the line, where it can overwrite the existing text. You can combine this with the sequence CSI K, which erases from the current cursor to the end of the line.Just replace \r with \r\x1b[K. See ANSI escape code.Try out these additional escape sequences:Note the limitations of this technique... if the terminal is short enough that your text wraps, the program will move forward one line every time you print. If you need something more robust, curses gives you more power but it doesn't work out of the box on Windows.
Create a format string that left justifies to the max width.Prior to 3.6 use fmt = '\r{{:<{}}}'.format(max(map(len, colors))).Alternatively use the .ljust() string method:


Answer URL
https://docs.python.org/3/library/curses.html
