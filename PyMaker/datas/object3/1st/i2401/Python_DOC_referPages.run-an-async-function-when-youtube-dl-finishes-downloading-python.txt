Natural Text
I've been writing a music bot for python using the discord.py rewrite. It downloads videos via youtube-dl and plays them back in a voice chat. I've been working hard on a music extension, and recently realized I've completely overlooked something. The progress hooks option of youtube-dl is synchronous, while discord.py is async. youtube-dl spawns a subprocess when downloading a video rather than running it on the current thread, so it does not hang the program. The function I need to run on the completion of a download is a coroutine, as it is part of discord.pyTL;DR I need to run a coroutine when a youtube-dl download finishesI know this is possible, I've seen it done before, but don't quite understand it.Here's what I have so far: 
The easiest way to schedule asynchronous execution of a coroutine from blocking code is loop.create_task. Since callback inherits the scope of the enclosing play method, we can use self.bot.loop directly:


Answer URL
https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.create_task
https://docs.python.org/3/library/asyncio-task.html#asyncio.Task.result
