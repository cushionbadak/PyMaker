Natural Text
According to docs, the send() function: "Resumes the execution and “sends” a value into the generator function. The value argument becomes the result of the current yield expression. The send() method returns the next value yielded by the generator, or raises StopIteration if the generator exits without yielding another value. When send() is called to start the generator, it must be called with None as the argument, because there is no yield expression that could receive the value."But i can't understand, why "The value argument becomes the result of the current yield expression" is not happened in the following example:So why x variable stays 'None' dispite i send 100 to it by c.send(100)? It seems, that yield expression in right hand side works in two steps: first it return the value to generator's caller and the second it returns argument of send function inside generator. And if add extra next(c) before send(42) i'll get expected behavior and programm prints '100'. It's not clear for me from documentation, why these two steps should not happen simultaneously when i call send().
I think I've figured it out.You create a genertor in the c variable, there none of the generator's code is executed.Then you use the next() function, the next function go to the next yield statement who is yield 1 here.So this yield returns 1 and stops the generator's execution to try to catch a value.The next line isc.send(100), so the yield 1 was waiting for a value and you provided it, but this value isn't saved.The send method also execute the rest of the generator until the next yield statement who is:So the yield here return 42 and stops the generator program to try to catch a value. But after that you callAnd you didn't provided a value so x is None now. Then the rest of the code is executed (until the next yield statement, don't forget)So it prints x who is None and then the yield returns 2 and try to catch a value.Try to write thisAnd it will work (understand why !)
So why x variable stays 'None' dispite i send 100 to it by  c.send(100)?Because the current yield is not the one you think it is, it's the one before. When you send 100, the generator is still stopped at yield 1, not yet at yield 42, hence 100 will be the result of yield 1, not of yield 42.To see this clearer, if you modify the generator in order to retrieve the content of yield 1 in a z variable, you'll see that z does contain 100:And that's the reason why an extra next() will print 100. Back to your code:


Answer URL
https://docs.python.org/3/reference/expressions.html#generator.send
