Natural Text
I'm not a C++ developer so i don't really know what I'm doing. Unfortunately I have to debug the following code but I'm not making any progress.Here is the python that calls that code:This code creates a nasty memory leak. In fact, when I run this code, it kills my memory within 20 minutes.I looked at the code but can't find the problem in the C++. How can I prevent rogue C++ code from killing my Python code? Is there a way to flag C++ code from within python to be recycled regardless whether the C++ created a memory leak?Is there a way I can force the memory to be garbage collected in C++. How can I find the exact leak in C++ by running python?My biggest issue is understanding Py_XDECREF and Py_XINCREF and the rest of the reference counting macros. I'm reading the docs but obviously I'm missing some context because I can't figure out where and when to use these. I have loads of respect for C++ developers. Their jobs seem unnecessarily difficult :(
It turns out the solution was to Py_XDECREF the reference count for al the created objects. I still don't know exactly how, why and were as many of this still doesn't make sense to me.I found this page that points out some of the pitfalls of these macros.https://wingware.com/psupport/python-manual/2.3/ext/node22.htmlThere is the documentation but that wasn't very helpful.https://docs.python.org/3/c-api/refcounting.htmlMaybe someone can share something else that is easier to consume for us non C++ peoplez?


Answer URL
https://docs.python.org/3/c-api/refcounting.html
