Natural Text
I encounter a surprising behaviour of the side_effect parameter in patch.object where the function replacing the original does not receive selfThis give:If I change the loud function to  I get the following output:Is there a way to replace a function from an object and still receive self?
self is only supplied for bound methods (because functions are descriptors). A Mock object is not such a method, and the side_effect function is not bound, so self is indeed not going to be passed in.If you must have access the instance in a side_effect object, you'll have to patch the function on the class with an actual function:Now make_noise is replaced by the loud function on the Animal class, so it'll be bound:The alternative is to set autospec=True, at which point mock will use a real function to mock out make_noise():Also see the Mocking Unbound Methods section in the mock getting started section.


Answer URL
https://docs.python.org/3/howto/descriptor.html
https://docs.python.org/3/library/unittest.mock-examples.html#mocking-unbound-methods
