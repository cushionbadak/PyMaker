Natural Text
In a Python test fixture, is it possible to count how many local variables a function declares in its body?Alternatively, is there a way to see if a function declares any variables at all?The use case I'm thinking of has to do with validating user-submitted code.
Yes, the associated code object accounts for all local names in the co_nlocals attribute:Demo:See the Datamodel documentation:User-defined functions[...]__code__   The code object representing the compiled function body. Code objects[...]Special read-only attributes: [...] co_nlocals is the number of local variables used by the function (including arguments); [...]
To elaborate somewhat on @Martijn excellent answer, if you read the documentation for the inspect â€” Inspect live objects module, you can see that it allows for introspection of a wealth of data, including (as @Martijn noted) in the code type, the following attributes:


Answer URL
https://docs.python.org/3/reference/datamodel.html
https://docs.python.org/3/library/inspect.html
