Natural Text
I'm new to python and trying a program to do the following:Open all folder and subfolders in a directory pathIdentify the HTML filesLoad the HTML in BeautifulSoupFind the first body tagIf the body tag is immediately followed by < Google Tag Manager> then continueIf not then add < Google Tag Manager> code and save the file.I'm not able to scan all subfolders within each folder.I'm not able to set seen() if < Google Tag Manager> appears immediately after the body tag.Any help to perform the above tasks is appreciated.My code attempt is as follows:
So you can install the iglob library for python. With iglob you can recursively traverse the main directory you specify and the sub-directories and list all the files with a given extension. Then open up the HTML file, read all the lines, traverse through the lines manually until you find "" for the tag as some users who may use a frame work might have other content inside the body tag. Either way, loop through the lines looking for the start of the body tag, then check the next line, if the text as you specified "Google Tag Manager" is not in the next line, write it out. Please keep in mind I wrote this in the event you will always have the Google Tag Manager tags right after the body tag. Please keep in mind that:In the event the Google Tag Manager text is not directly after the body tag, this code will add it anyways, so if Google Tag manager is somewhere in the Two body tags, and works, this could break the functionality of your Google Tag Manager.I am using Python 3.x for this, so if you are using Python 2, you might have to translate this to that version of python. Replace the 'Path.html' with the variable path so that it rewrite the file it is looking at with the modifications. I put  in 'path.html' so that i could see the output and compare to original while I was writing the script.Here is the code:
My take on it, might have some bugs:edited to add: I have since realized that this code does not ensure <!-- Google Tag Manager --> is the first tag after <body>, instead it ensures it is the first comment after <body>. Which is not what the question asked for.


Answer URL
https://docs.python.org/3/library/glob.html
