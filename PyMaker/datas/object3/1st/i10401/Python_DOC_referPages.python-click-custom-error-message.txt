Natural Text
I use the excellent Python Click library for handling command line options in my tool. Here's a simplified version of my code (full script here):If someone runs the command without any flags, they get the default click error message:This is nice, but I'd quite like to tell (very) novice users that more help is available by using the help flag. In other words, add a custom sentence to the error message when the command is invalid telling people to try mytool --help for more information.Is there an easy way to do this? I know I could remove the required attribute and handle this logic in the main function, but that feels kind of hacky for such a minor addition.
Message construction for most errors in python-click is handled by the show method of the UsageError class: click.exceptions.UsageError.show. So, if you redefine this method, you will be able to create your own customized error message. Below is an example of a customization which appends the help menu to any error message which answers this SO question:Once you define your main command, you can then run the modifier script:I have not explored whether there are runtime invocations of ClickException other than usage errors. If there are, then you might need to modify your custom error handler to first check that ctx is an attribute before you add the line click.exceptions.ClickException.show = show since it does not appear that ClickException is fed ctx at initialization.


Answer URL
https://docs.python.org/3/library/functions.html#setattr
