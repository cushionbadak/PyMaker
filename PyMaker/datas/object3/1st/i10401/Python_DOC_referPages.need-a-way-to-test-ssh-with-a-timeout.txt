Natural Text
This is my current code to test if a host is SSH-able. It works just fine when the host is up with or without SSH service running. However, it seems to just hang when the host crashes, which is the unique usecase that I need to depend on it giving me a quick True/False response. Due to OS and other dependencies, we need to keep the Python version to 2.6 for now. So I need a way to get this function to work and with a timeout of 1-2s.
You need to determine if it is actually a connect timeout, or if it can connect, but the server is accepting the connection and doesn't send anything.If you were to use telnet to manually test, telnet  22 and see if you get a response from the server at all, you should see something like this if it connects:If it connects and you don't get any response, then I think you will have to try a test using sockets in python. You can find info here: https://docs.python.org/3/library/socket.html
If you want to be sure that an SSH connection (including authentication) can be established correctly, the best way probably is to connect in batch mode with a small timeout (-o BatchMode=yes -o ConnectTimeout=2).
you could wrap your call to ssh into timelimit so it gets cancelled after a certain timeout if it does not finish on time.homepage: http://devel.ringlet.net/sysutils/timelimit/manpage: http://manpages.ubuntu.com/manpages/xenial/man1/timelimit.1.html


Answer URL
https://docs.python.org/3/library/socket.html
