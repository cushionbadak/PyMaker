Natural Text
This question already has an answer here:Are global variables thread safe in flask? How do I share data between requests?                    2 answers                I have a python function that gets called everytime i text a specific number. (Postback function, that runs on flask, and listens for incoming sms.I also have a function that has a set schedule to run every 5minutes and read from a list and remove some entries.Now the only problem is both these functions read from the same list. I'm worried that right when the scheduled function (every 5min) is called to be run, the postback function that handles sms, is called too. What i they both run at the exact same time, and both try to read from the array at the same time. Or if function a reads from the list WHILE function b is writing to the list. Is this an accurate worry of mine? Can these 2 functions be called at the EXACT same time? Or will it never happen that they simultaneously read from same list at same time.I looked into async requests with celery, but that doesnt solve the problem. The function that runs every 5 min, could still be called the exact same time as the celery function is called, thus corrupting the list. Thanks, im just confused 
The worries you have are reasonable and should be handled in code.In general lists are thread safe in python, but that still can cause issues if the data inside your list is not, see this answer:Are lists thread-safe?The type of problem you describe is very common and depending on your needs can be solved in several ways:1) use locks to protect the list:Python threading. How do I lock a thread?2) rethink the approach and put all your logic that access this particular list into the timer only. Then whenever a text message comes in, you push the info into a queue and read from that queue into the timer. This decouples the two threads. Example from another question (the question tackles another interesting point, but you can just look at the queue usage itself): Threading in python using queue


Answer URL
https://docs.python.org/3/library/queue.html
