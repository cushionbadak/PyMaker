Natural Text
I'm trying to extend libhydrogen (open source found here: https://github.com/jedisct1/libhydrogen/) to support calls to the underlying library in Python. However, I ran into a strange issue.Specifically I have the following code:Which is able to successfully parse the length of ctx, however, when it gets to the key it gets thrown the error, Any ideas on why I'm unable to successfully parse the key length?
You've specified the length as a size_t. The s# format does not take a size_t. It takes an int or Py_ssize_t, depending on whether the PY_SSIZE_T_CLEAN macro was #defined before including Python.h.Note: For all # variants of formats (s#, y#, etc.), the type of the length argument (int or Py_ssize_t) is controlled by defining the macro PY_SSIZE_T_CLEAN before including Python.h. If the macro was defined, length is a Py_ssize_t rather than an int. This behavior will change in a future Python version to only support Py_ssize_t and drop int support. It is best to always define PY_SSIZE_T_CLEAN.


Answer URL
https://docs.python.org/3/c-api/arg.html#strings-and-buffers
