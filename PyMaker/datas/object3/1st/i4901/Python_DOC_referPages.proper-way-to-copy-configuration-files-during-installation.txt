Natural Text
I am trying to distribute a mplstyle I wrote such that I can share it easily. It boils down to copying a text file to the proper configuration direction (which is known for any architecture) during installation. I want to be able to install using either python setup.py install or pip install .... Currently I do not seem to get either of the two ways robust (see current approach below).Installing with pip install ... does not seem to invoke the copying at all.Installing with python setup.py install works well on my machine, but ReadTheDocs gives me the following error:What is the proper way to copy configuration files during installation in a robust way? Current approachFile structuresetup.pygoosempl/__init__.pyUpload to PyPi
First of all, based on the project structure you've provided, you're not specifying the package_data correctly. If goosempl is a package and stylelib a directory inside it containing the mplstyle files (what I assume from your code), then your package_data configuration line should be:As described in Building and Distributing Packages with Setuptools:The package_data argument is a dictionary that maps from package names to lists of glob patterns. The globs may include subdirectory names, if the data files are contained in a subdirectory of the package.So your package is goosempl and stylelib/goose.mplstyle is the file to be included in package data for goosempl.Your second issue (No such file or directory) is simple: in the copy_style() function, you never check if the parent directory of the file exists before writing the file. You should be able to reproduce this locally by removing the directory /home/<user>/.config/matplotlib/stylelib/ (or moving it temporarily).The fix is also quite simple, actually there are lots of them. Use whatever you want to create missing directories.distutils.dir_util.mkpath is suitable for both python2 and python3:My preferred one is using pathlib, but it is available only since Python 3.4:


Answer URL
https://docs.python.org/3/library/pathlib.html
