Natural Text
I am using qrcode to generate qrcode. When a ticket is bought, or when bought is true, I would like to generate a qrcode image and make some changes using PIL. Finally save the modified canvas into the Image field of the model.But this throws an error:AttributeError: 'Image' object has no attribute '_committed'How can I save a generated PIL image into an ImageField in django?
You can use a BytesIO to save the Pillow file to an in-memory blob. Then create a File object and pass that to your model instance ImageField's save method.Check out the django documentation for the File object.https://docs.djangoproject.com/en/2.0/ref/files/file/#the-file-objectYou have to use save=False, since the default save=True means that the parent model's save method would be called after the image is saved. You don't want recursion here, since you would typically end up in an infinite loop.
Change your code and use Django File as below:You can save canvas on the media_root and upload_to path, or in temporary directory or use BytesIO object.


Answer URL
https://docs.python.org/3/library/tempfile.html#tempfile.NamedTemporaryFile
