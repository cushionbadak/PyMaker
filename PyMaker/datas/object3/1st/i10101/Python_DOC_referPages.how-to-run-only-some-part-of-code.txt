Natural Text
I am trying to do unit testing using pytest. I import source code in my unit test code and test it. But while doing unit test I want to not execute or comment out some part of code in source code. But I cant make changes in source code. So is there any way to comment some block of code in my source code during execution only.
What you are trying to do strongly suggests that the source code should be refactored, if for any reason unit test cannot be run on it. Whatever solution you will come up with, it will be very fragile. That being said, as @user7056566 pointed out, you can just load it as a string, modify it (e.g. with regex) and then call exec. Personally I would ignore the fact that "part of code which I want to ignore is being tested in automated testing". Accept the "performance penalty" and do not modify the source code. That's MUCH worse than a simple overhead. You can never be sure that what you are testing is the legitimate code. Besides, the moment someone modifies the source code, there's a good chance it will break your tests - also in unexpected way (it won't catch the problem).
You may 'mock' specific portions of code in your test-case without modifying the source code (that you are importing).There are plenty of mocking tools available in python - mocking http calls (REST APIs, etc.). Here's a good starter: https://blog.fugue.co/2016-02-11-python-mocking-101.html


Answer URL
https://docs.python.org/3/library/functions.html#exec
