Natural Text
OK, I didn't know how to explain it in the title, but here is what I am trying to do (Python):I have a list of initialized functions, say [foo, bar], and for every input, I have an associated index of which function to use. Now given an array of inputs X, index array I, I need to generate output array y assuming the conditions above.My solution:My question is there a more efficient way of doing that -- the problem is that if X has thousands of elements, and functions in f are really complex, I will have create too many objects
You can certainly simplify the logic by changing to the following:Note that if the length of X and I are different, it will truncate to the shortest length.The zip function returns an iterator, which will likely make this more memory-efficient. If you expect the same expensive function to be run on the same values multiple times, you can also implement caching, for instance by decorating the functions with functools.lru_cache.If you plan to loop through these values and don't need them all at the same time, you can make this a generator expression by placing it in parentheses instead of brackets: this will only calculate each value as you need it.


Answer URL
https://docs.python.org/3/library/functools.html#functools.lru_cache
