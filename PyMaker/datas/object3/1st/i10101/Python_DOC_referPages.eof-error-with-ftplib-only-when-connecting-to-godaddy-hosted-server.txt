Natural Text
I'm having problems with FTP_TLS (ftplib) in Python 2.7.3.Summary of findings (all connection attempts performed over the internet):FileZilla to home web server - worksFileZilla to GoDaddy shared hosting server - worksPython to home web server - worksPython to GoDaddy shared hosting server - fails (see stack trace below)The following code shows how I reproduce the problem. When connecting to my home server, this code generates an identical log on my personal FTP as FileZilla. (Only when connecting to the GoDaddy site does it result in an EOF exception).I read that the EOF error is given when the server closes the pipe. It's also similar to what happens if you change to prot_p and then try to issue a plain text command (although as far as I can tell, this isn't the case here).I don't understand what's different between my code and FileZilla. The fact that all attempts are performed over the internet reassures me that it isn't related to firewalls. Furthermore, FileZilla works, so from a technical perspective the connection is possible, I'm just having a hard time achieving it with Python.My code works with the GoDaddy FTP if I don't issue the prot_p switch.Additional information:GoDaddy doesn't provide technical FTP logs (only usage logs)My code has been working flawlessly for over a year, this just started happening two months ago.The GoDaddy FTP server identifies as "Pure-FTPd [privsep] [TLS]"Typical FileZilla Server Log after running my code.
As I came to find out, this issue happens because the GoDaddy FTP server insists on FTP Session Resumption. It's a real pain, but I can forgive them because it is a necessary security feature.At the moment, Python3 doesn't support SSL session resumption out of the box (although you'll notice SSLContext has been added since 2.7 so I think it will come. https://docs.python.org/3/library/ssl.html#ssl.SSLContext).There is a bug thread about this issue here: https://bugs.python.org/issue19500
I think you need to set the FTP mode to passive, here's a similar error but in PerlThe difference is explained in what-is-the-difference-between-active-and-passive-ftp


Answer URL
https://docs.python.org/3/library/ssl.html#ssl.SSLContext
