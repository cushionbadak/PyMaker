Natural Text
I'm looking for a way, in plain python (no extra libraries) to kick off a background process that will run after the web page returns.In the shell, this script below exits, and then prints "Hello World". However, in the browser, it blocks until two.py is finished.
I'm not 100% sure, but I think this is because Apache is not waiting on your process, but on your whole process group.When you fork a new process, it inherits your process group. And exec doesn't change that. If you want to force it to detach, you have to do so explicitly, e.g., by using setpgrp:Depending on your platform, this may also mean it gets a new session, meaning it no longer has a controlling terminal, but I don't think you care about that.However, it might be a better design to rewrite two.py using the daemon library. Then, no matter how you spawn it, it'll take care of daemonizing itself. Run it your script or directly, from Apache, or the shell, in the background, whatever, it will never make anyone wait for it, get tangled up with a terminal, zombify, etc.


Answer URL
https://docs.python.org/3/library/os.html#os.setpgrp
