Natural Text
I am trying to connect two devices to my pc and run some commands on them using python and adb.when I run the command from the command prompt, it goes through fine, but when i put those in the python script, they give me errors.this is causing the errors all the time:The error message I get is this:When I try the same code without the grep command, it worksIt gives me the right output.When I try the same in windows command prompt, It works fine (I am replacing grep with FINDSTR  because i'm using it in windows, and I have tried doing the same in the python script as well, with 'shell = True' and also without.)eg:This gives me an ouptut without any problems.The output I get is 123ab6ef               device product:xxxxxxxxx model:xxxxxxxxx device:xxxxxxxxxbd00051a4     device product:yyyyyyyyyy model:yyyyyyyyyy device:yyyyyyyyyI am trying to understand where I am going wrong here, but can't figure it out.So far I have checked the docs: https://docs.python.org/3/library/subprocess.htmlhttps://docs.python.org/3/library/subprocess.html#subprocess.CalledProcessErrorThese just give me the error codes.I have also looked at these answers:Python, adb and shell execution queryI took some error checking from here and added to my code.Python subprocess.check_output(args) fails, while args executed via Windows command line work OKpython check_output fails with exit status 1 but Popen works for same commandI think i am close but just can't put my finger on it.Any help would be appreciated.
Firstcertainly requires shell=True, but even with that it's not equivalent to When using check_output, you're passing "model" as grep argument literally but you should pass just model. "model" is not in your output (with quotes) so grep fails to find it, and returns exitcode 1 which is not really an error for grep but makes check_output trigger an exception because it expects 0.So I would to this as a quickfix:And as a longfix I'd perform the grep command directly with python.


Answer URL
https://docs.python.org/3/library/subprocess.html
https://docs.python.org/3/library/subprocess.html#subprocess.CalledProcessError
