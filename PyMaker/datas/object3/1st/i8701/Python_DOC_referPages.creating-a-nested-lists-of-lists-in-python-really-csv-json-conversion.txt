Natural Text
I've just been pounding at this problem which should be easy -- I'm just very new to Python which is required in this case.I'm readying in a .csv file and trying to created a nested structure so that json.dumps gives me a pretty nice nested .json file.The result json is actually six levels deep but I thought if I could get the bottom two working the rest would be the same.  The input is working just great as I've ended up with job['fieldname'] for building the structure.  The problem is getting the result to nest. Ultimately I want:However, with the code below, which only deals with the "details section", I end up with a stack of all addresses, followed by all of the customer information. So, the loop is processing all the csv records and appending the addresses, and then looping csv records and appending the info.What I am trying to understand is how to fix this loop and get the description and project type to appear in the right place AND setup the data structure so that the bottom flags are also properly structure for the final json dump.This is largely due to my lack of experience with Python but unfortunately, its a requirement -- otherwise, I could have had it done hours ago using gawk!  Requested CSV follows:Sure... took me a while to dummy it up as the above is an abbreviated snippet.
You're not far off.You first need to initialise details as a dict:Then add the elements you want:Then for the nested ones:For more details on how to use dict: https://docs.python.org/3/library/stdtypes.html?highlight=dict#dict.Then you can get the JSON with JSON.dumps(details) (documentation here: https://docs.python.org/3/library/json.html?highlight=json#json.dumps).Or you can first gather all the details in a list, and then turn the list into a JSON string:
You can create the details dict as a literal vs. create and key assignment:
I think all you need for your puzzle is to know a few basic things about dictionaries:Initial assignment:Writing key/value pairs to an already initialized dict:Reading:Looping keys:Looping both key and value:Looping values only:If all you want is a JSON compatible dict, then you won't need much else than this, without me going into defaultdicts, tuple keys and so on - just know that it's worth reading up on that once you've figured out basic dicts, lists, tuples and sets.Edit: One more thing: Even when new I think it's worth trying Jupyter notebook to explore your ideas in Python. I find it to be much faster to try things out and get the results back immediately, since you don't have to switch between editor and console.


Answer URL
https://docs.python.org/3/library/stdtypes.html?highlight=dict#dict
https://docs.python.org/3/library/json.html?highlight=json#json.dumps
