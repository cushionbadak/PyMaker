Natural Text
I've got this codeWhere "prog" is the name of an executable c file,"-4" is a command line argument used by "prog" and '\tab \t cd\n', ' \t ab cd \n', '\ta\b\b\b\tb\n' is the input text for the file "prog"My run function is...I want to add another parameter inside my run function, called timeout.Basically, I want it so that if my run function is taking longer than 5 seconds, i'll call Sys.exit(1) and end it there.The proper call of my run function, with the added timeout parameter, would be r = x.run("prog", ["-4"], ['\tab \t cd\n', ' \t ab cd \n', '\ta\b\b\b\tb\n'], 5) The general idea of my complete code, all of it is not here, is to compile and  execute a C file and check if its output is what it should be.I was recommended to See section 17.5.1 of the Python3 library documentation for information on how to implement a timeout, but was not able to understand how to. And I tried some solutions to similar questions, but it didn't work out.Any help?EDIT:More info on the run function..run(self, prog,args=[],input=[])The prog argument is a string which specified the name of the executable file in the temporary directory. The args argument contains a list of strings which are to be used as command line arguments for the program named by prog. The run method executes the program, supplying the command line arguments. If the program, while running, reads from its standard input then that standard input is taken from the argument named input. The input argument is a list of strings; each string represents one line of text input to be read by the program.When the run method returns, the result is either None (for an apparently successful completion) or a string (which specifies a reason for the pro- gram not executing or not completing successfully). Whatever is returned by the function call, both the standard output stream and the standard error output stream should be checked.CompileAndExecute is the class name that run is found in..UPDATE:After some help, I'm getting syntax error For the line of code in the above chunk, except subprocess.TimeoutExpired:
For Python 3+ , you can use the timeout argument for subprocess.call , passing in the timeout you want to specify , and then if the timeout expires before the child process got terminated, subprocess would terminate the child process and raise subprocess.TimeoutExpired exception, which you can catch, and then call sys.exit(1) .So in your code, you would do -Also, the subprocess.call function returns the returncode, not the process itself, so trying to do p.kill() inside the except: does not do anything.Demo - Where a.py is a python script, that loops 100000 time.


Answer URL
https://docs.python.org/3/library/subprocess.html#subprocess.call
