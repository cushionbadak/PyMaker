Natural Text
I am writing unit tests for my Python and Fabric based code. I have following method which in turn calls sudo method of Fabric API multiple times with different arguments. I would like to know how to call assert on mock sudo object. Can anyone please help me here?I have written test file as below :Above test fails because mocked object remembers only last call. that is, if I write mock_sudo.assert_called_with(cp + file_path + ' ' + dest_dir)  then test fails.Can anyone please tell how can I assert both the calls to sudo?
Try assert_any_call which asserts whether there has been any call, not just the most recent one.Or, you can use call_args_list to get the list of args the mock has been called with.
assert_has_calls will do the job for you.assert_has_calls : assert the mock has been called with the specified calls. The mock_calls list is checked for the calls.  If any_order is true then the calls can be in any order, but they must all appear in mock_calls.


Answer URL
https://docs.python.org/3/library/unittest.mock.html
