Natural Text
In Python 2 I could do the following:In Python 3 it does not work anymore:How do I get the old behaviour (converting the map results to numpy array)?Edit: As @jonrsharpe pointed out in his answer this could be fixed if I converted seq to a list first:but I would prefer to avoid the extra call to list.
One more alternative, other than the valid solutions @jonrsharpe already pointed out is to use np.fromiter:
Although you refer to it as seq, the map object in Python 3 is not a sequence (it's an iterator, see what's new in Python 3). numpy.array needs a sequence so the len can be determined and the appropriate amount of memory reserved; it won't consume an iterator. For example, the range object, which does support most sequence operations, can be passed directly;To restore the previous behaviour, as you're aware, you can explicitly convert the map object back to a sequence (e.g. list or tuple):However, as the documentation puts it:a quick fix is to wrap map() in list(), e.g. list(map(...)), but a better fix is often to use a list comprehension (especially when the original code uses lambda)So another option would be:or just:Alternatively, actually use numpy from the start:


Answer URL
https://docs.python.org/3/whatsnew/3.0.html#views-and-iterators-instead-of-lists
https://docs.python.org/3/whatsnew/3.0.html#views-and-iterators-instead-of-lists
