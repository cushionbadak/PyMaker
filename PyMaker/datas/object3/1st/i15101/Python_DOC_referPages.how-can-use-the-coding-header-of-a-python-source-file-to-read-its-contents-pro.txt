Natural Text
Python source files often come with a coding header similar to the followingHow can I this line to properly parse the contents of such a file? Is there a better way than manually opening the file in binary mode, reading one line, and checking if it contains the header? Is there a library that does this?Background: this comes in the context of fixing this bug, which crashes elpy when used in conjunction with python3 and importmagic. The code that I'm trying to fix usesand crashes on non-utf-8 files. Ideally I would like to keep changes to a minimum.
There is tokenize.open() that does exactly that: it opens a Python source file using the character encoding specified in the coding header (encoding declaration).You could decode on-the-fly remote Python files too.


Answer URL
https://docs.python.org/3/library/tokenize.html#tokenize.detect_encoding
