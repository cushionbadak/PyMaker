Natural Text
I was using the below python code:The last part throws the following error:Can anyone explain what the error is in the above code as print self.__dict__ clearly shows that both a and b have been inserted into the object's dictionary.My use case is to have an object for which attributes can be dynamically added as and when required. Like I should be able to use:Also, is there any other way to achieve my goal?Update: Found the error, __getattr__ should return a value.Correct code
__getattr__ is called when an attribute is requested for get but is not available from the asked object.Assuming that x hasn't an a, a call likeresult = x.ais functionally equivalent toresult = getattr(x, "a")which is functionally equivalent toresult = type(x).__getattr__(x, "a")which is normally the same asresult = x.__getattr__("a")Last two variants only differ if the __getattr__ is bound to the object instead of the class (which may not work)As you can see here, __getattr__ should return the value that a is meant to have.It can also set the attribute directly so that further get requests do not call __getattr__ again but are handled by Python directly. It depends on the particular use case if this makes sense (in your use case it does).x.b.c = 2 translates here normally to something likesetattr(x.__getattr__("b"), "c", 2)Again, __getattr__ must return here the object on which attribute c is set.


Answer URL
https://docs.python.org/3/reference/datamodel.html#special-method-lookup
