Natural Text
I have directory containing multiple subdirectories of different scraper. How would you go about writing script that will cd into each of the subdirectories and run the scraper, cd out then continue to the next one what would be the best way to do this if it possible? Example of the how the directory looks:all the scrapers have main function 
One way of doing this is to walk through your directories and programmactically import the modules you need.Assuming that the Scraper X folders are in the same subdirectory scrapers and you have the batch_run.py script in the directory containing scrapers (hence, at the same path level), the following script will do the trick:EDITIf the script is inside the base_subdir path, the code can be adapted by changing a bit how the import_module() is called.EDIT 2Some explanations:How import_module() is being used?The import_module() line, is what is actually doing the job. Roughly speaking, when it is used with only one argument, i.e.it is equivalent to:Instead, when used with two argumens, i.e.it is equivalent to:This second form is very convenient for relative imports (i.e. imports using . or .. special directories).What is if not subdir.startswith('__'): doing?When you import a module, Python will generate some bytecode to be interpreted and it will cache the result as .pyc files under the __cache__ directory. The aforementioned line will avoid that, when walking through the directories, __cache__ (actually, any directory starting with __) will be processed as if it would contain modules to import. Other kind of filtering may be equally valid.
You may want to check os.walk function that traverses the directory tree and at each directory run the script (or the main function that you can wrap the contents of the script into).An example code would be:


Answer URL
https://docs.python.org/3/library/importlib.html#importlib.import_module
https://docs.python.org/3/library/os.html#os.walk
