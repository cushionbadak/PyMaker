Natural Text
I am trying to create a python 3 IDE and text editor in python to learn more about tkinter. In it (because it is an IDE) I am attempting to run code entered by the user. The best way that I could find was to use exec(). This works, as show in the IDLE below:Yet, the exec() function knows about its surroundings.This is not what I want. I want no connection to the main program, other then values I put in. (for example, changing the sys.stdin, sys.stdout, and sys.stderr values to a tkinter GUI)My idea was to use the extended use of the exec() function (brought to you be help()):I tried to use a empty dict for globals, and I left locals blank. This seems to work at a first look.However, the program the code was run by is seen in exceptions:How do I prevent this from happening and remove any connection to the program as seen from the code that is entered by the user. I would still like some control in the program however, like changing the values of sys.stdin, sys.stdout, and sys.stderr. Is exec(source, blank_dict) the way to go, or is there a better way to do it?
After a lot of digging around, I found the answer to my question.The answer is in the code module. As the python documentation on the code module states:The code module provides facilities to implement read-eval-print loops in Python.Basically tools to simulate code running. The function that the code module gives doesn't only just help with a read-eval-print loop, but it can also run code without a connection to the main program. Take this program called runcode.py for a example:Which outputs the following:If you are reading from a real file, replace '<FAKE MEANINGLESS FILE NAME>' with the absolute path to the file. This will give you a more advanced traceback (error message will include what was on the line)The great thing is that this works with a setup and end scripts, like so:And that's it!


Answer URL
https://docs.python.org/3/library/code.html
