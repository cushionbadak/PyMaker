Natural Text
Python 3.4.0a1Windows 8.1Class Created:  Command entered in IDLE __main__ with the following results:Expected output:I expected a.bankrupt to change to True when I changed b.bankrupt since the variable bankrupt is defined for the entire class and not for a single instance (with self.bankrupt) Why is this not happening?
You assigned to a new attribute to the instance instead. To change a class attribute, assign directly to the class.When looking up an attribute on an instance, look-up 'falls through' to the class, then to the base classes. This is how all class attributes, including methods, are found.But when assigning, this happens directly on the instance. Otherwise you could never assign per-instance values, you'd only ever assign back to the class. Assigning to a.bankrupt or b.bankrupt will add an attribute to the instance, if it wasn't already there to begin with. To Python, there is no difference between using self.bankrupt = True in a method, or to using a.bankrupt = True from the 'outside' to assign to an attribute.Just assign to the class attribute directly (from a method or from 'outside'):Note that the same fall-through on read, assignment on write rules apply to base classes; looking up an attribute on a class looks to the base classes if the attribute is not found on the class directly, but setting an attribute on a class do so directly, and not affect attributes on the bases.For the nitty gritty details, see the Custom classes and Class instances sections of the Python datamodel.
With b.bankrupt = True you create an instance variable that shadows the class-level variable.If you want to change the class variable use
After assignment to instance variable it is created if it was not before. And next time You try to access it You got it from instance __dict__. This is why You have different values for a.foo and b.fooMeanwhile If You modify variable (not reassign it) You will got result which You have described.In this case instance variable was not created.


Answer URL
https://docs.python.org/3/reference/datamodel.html
