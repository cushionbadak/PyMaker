Natural Text
I need help to understand why this piece of code didn't work as expect.My directory structure looks like this:The script - tryWalkDir.py is intented to search all the .cpp files. I don't know why [TryCPP/tryHashMap/tryHashMap.cpp,TryCPP/tryHashMap/tryHashMap.cpp] collect 2 times?tryWalkDir.py
The error is happening because you are calling os.walk multiple times without realizing it. os.walk recurses for you into subdirectories. However, you then call self.collect_files(cur+'/'+s,depth+1) for each subdirectory in your current directory. This will actually cause a file at depth N to appear N times in your output array.To fix your code, simply remove the loopAs an aside, you should probably use os.path.join instead of manually concatenating slashes throughout your code. For example, self.fl.append(cur+'/'+f) could read self.fl.append(join(cur, f)). This is the way suggested by the os.walk documentation:To get a full path (which begins with top) to a file or directory in dirpath, do os.path.join(dirpath, name).


Answer URL
https://docs.python.org/3/library/os.html#os.walk
https://docs.python.org/3/library/os.path.html#os.path.join
