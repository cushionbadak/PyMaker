Natural Text
I'm trying to make a desktop notifier, and for that I'm scraping news from a site. When I run the program, I get the following error.How do I resolve it? I'm completely new to this. I tried searching for solutions, but none of them worked for me.Here is my code:
You're trying to convert a str to bytes, and then store those bytes in a dictionary.The problem is that the object you're doing this to is anxml.etree.ElementTree.Element,not a str.You probably meant to get the text from within or around that element, and then encode() that.The docssuggests using theitertext()method:This will evaluate to a str, which you can then encode().Note that thetext and tail attributesmight not contain text(emphasis added):Their values are usually strings but may be any application-specific object.If you want to use those attributes, you'll have to handle None or non-string values:Even this is not really enough.If text or tail contain bytes objects of some unexpected(or plain wrong)encoding, this will raise a UnicodeEncodeError.Strings versus BytesI suggest leaving the text as a str, and not encoding it at all.Encoding text to a bytes object is intended as the last step before writing it to a binary file, a network socket, or some other hardware.For more on the difference between bytes and characters, see Ned Batchelder's"Pragmatic Unicode, or, How Do I Stop the Pain?"(36 minute video from PyCon US 2012).He covers both Python 2 and 3.Example OutputUsing the child.itertext() method, and not encoding the strings, I got a reasonable-looking list-of-dictionaries from topStories():


Answer URL
https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element
https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.itertext
https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.text
https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element
