Natural Text
There is a list of dictionaries I need to iterate through and filter in dictionaries which meet criterion and then return only values under key1. I'm using filter, as follows:the iterator works alright returning only those results which meet criterion. But it returns the whole dictionary rather than only x["key1"].I'm thinking it's something to do with filter but have no clue. Q1: Can someone explain why it returns whole dict rather then only value under key1?Q2: is there a workaround to make filter to return only value under key1?P.S. there is no problem to do it through list comprehension like that:But I was just curious why filter doesn't return i["key1"].
Filtering is not the same thing as mapping. Filtering selects based on your criteria, a yes/no decision on wether or not to include one of your values. In fact, you are filtering on both key2 and the truth value of key1; if the value for key1 is ever set to None or 0 or another false value, you'd also drop that specific dictionary, which I don't think you really wanted.You want to filter and map, so extract the right key from dictionaries that passed the filter. That's actually best done with a list comprehension instead:You can still do it using filter(), if you must, but then you need to add a map() call to this to actually do the mapping:But as you notice, that gets verbose and unreadale really quickly. You could use operator.itemgetter() objects to replace the lambdas:but readability doesn't improve much with that. 
A filter simply filters: it takes as input an iterable, and produces an interable with the items that satisfy the criterion.What you want is an additional mapping:Mind that you do not need to use x['key1'] if ... else False in the criterion: the filter(..) will simply evaluate the function, and inspect the truthiness of the result. If it is True, it will emit the item, otherwise it will ignore the item.


Answer URL
https://docs.python.org/3/library/stdtypes.html#truth-value-testing
https://docs.python.org/3/library/operator.html#operator.itemgetter
