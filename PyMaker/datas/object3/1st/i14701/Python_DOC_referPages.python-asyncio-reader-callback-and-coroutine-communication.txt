Natural Text
I am trying to implement a simple idea of passing a data from stdin to a coroutine:This code works fine, however a simplified version of it with a variable instead of an Event object works too:My questions are: is the approach with Event correct? Or is there a better way with another asyncio objects to handle this kind of problem? Then, if the approach with Event is fine, is using a variable is fine as well? Thank you. 
I think asyncio.Queue is much better suited for this kind of producer/consumer relationship:There's less logic involved than with an Event, which you need to make sure you set/unset properly, and there's no need for a sleep, wakeup, check, go back to sleep, loop, like with the global variable. So the the Queue approach is simpler, smaller, and blocks the event loop less than your other possible solutions. The other solutions are technically correct, in that they will function properly (as long as you don't introduce any yield from calls inside if if event.is_set() and if data is not None: blocks). They're just a bit clunky.
If you want to wait for an event, you should probably be using Event.wait instead of polling is_set.


Answer URL
https://docs.python.org/3/library/asyncio-queue.html#asyncio.Queue
https://docs.python.org/3/library/asyncio-sync.html#asyncio.Event.wait
