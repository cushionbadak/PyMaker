Natural Text
I have this code:And I get an UnicodeDecodeError in the line output, error = p.communicate():How can I fix this? 
univeral_newlines=True enables text mode. The subprocess output (bytes) is decoded using locale.getpreferredencoding(False) character encoding as @cdosborn mentioned.If it doesn't work, provide the actual encoding that is used by command. And/or specify the error handler such as 'ignore','surrogateescape', etc  as errors parameter:
The universal_newlines=true setting results in an additional encoding that is the source of your error.universal_newlines=true results in an encoding based on the output of:python -c 'import locale; print locale.getpreferredencoding()' Python threw an error when it expected your input to match the encoding above, but instead processed a byte clearly in a different encoding.More info about python 3.4 universal_newlines here.
If you're using Python 3.6 or later, you can fix the error by changing this line:to this:I used UTF-8 above, but you can substitute it with whatever encoding you need.


Answer URL
https://docs.python.org/3/library/codecs.html#error-handlers
https://docs.python.org/3/library/subprocess.html#frequently-used-arguments
