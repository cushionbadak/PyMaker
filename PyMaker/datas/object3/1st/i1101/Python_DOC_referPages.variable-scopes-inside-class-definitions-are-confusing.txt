Natural Text
For some reasons python gets variable from global namespace when situations like this occurs:Please look at this code:In accordance with PEP 227A class definition is an executable statement that may contain uses and definitions of names. These references follow the normal rules for name resolution. The namespace of the class definition becomes the attribute dictionary of the class.but it doesn't look like "following the normal rules" at all to me. What am I missing?Both Py2 and Py3 operates this way.
That's documented in Execution model - Resolution of names:Class definition blocks [...] are special  in the context of name resolution. A class definition is an executable  statement that may use and define names. These references follow the  normal rules for name resolution with an exception that unbound localvariables are looked up in the global namespace.(emphasis mine)


Answer URL
https://docs.python.org/3/reference/executionmodel.html#resolution-of-names
