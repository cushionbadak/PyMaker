Natural Text
I'm using assertRaises in a loop like this:And the problem is that whenever test fails, the output looks like this:How to make it print out the value of i when test fails? Like this:
This is the ideal situation for the subTests context manager. However, this is only available in python 3. I think the best solution would be to create your own version of subTests. The benefits being it's easy to setup a basic mimicry of subTests, and if subTests is ever back ported to python 2 then it will be easy to switch.Which produces the following output:
One solution is to use assertRaises() as a context manager.The print statement will only execute when the my_method() line passes successfully, so it will appear as the output when your test fails. Bit of a hack, but it works (unless my_method() throws some error that is not a ValidationError).


Answer URL
https://docs.python.org/3/library/unittest.html#distinguishing-test-iterations-using-subtests
