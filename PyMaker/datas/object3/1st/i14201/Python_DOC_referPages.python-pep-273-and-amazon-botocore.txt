Natural Text
On a small embedded Linux device with limited space, I am trying to place the large [10 Mb] Amazon (AWS) BotoCore library (https://github.com/boto/botocore) in a zip file to compress it and then import it in my Python Scripts using zipimport as described in PEP273 (https://www.python.org/dev/peps/pep-0273/).I modified my script to have the following lines at the beginning:The site-packages zip file only has botocore in it and site-packages directory itself has the other modules I use, but excluding botocore, in it.Here is a listing of that directory:And here are the contents of that zipfile:My problem is that I can import boto3 and import botocore just find, but when I try to use some API methods contained therein, I get exceptions like this:or If I remove the zip file after uncompressing it in the site-packages directory and reboot - my script works fine.How can I leverage zipfile imports to compress this huge library? Thanks!
Unfortunately, this just isn't going to work.PEP 273 requires library authors to follow certain rules, which this package does not.  In particular, it makes use of __file__ rather than pkgutil.get_data() or an equivalent API.  As a result, the files must actually exist in the filesystem.You might try using FUSE to mount the .zip file in the filesystem, so it appears to Python as if it's uncompressed, without actually taking up all that disk space.  Just looking through Google, I came up with fuse-zip, which looks like it could be suitable.  You'll want to run some benchmarks to ensure it performs well on your system.


Answer URL
https://docs.python.org/3/library/pkgutil.html#pkgutil.get_data
