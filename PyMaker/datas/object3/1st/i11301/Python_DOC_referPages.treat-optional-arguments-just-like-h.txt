Natural Text
How can I tell argparse to treat optional arguments just like -h, --help?test.py# python test.py -h# python test.py -t# python test.py -t test# python test.py testI want, that if -t, --test is specified, argparse stop here, just like it does with -h, --help.
Exiting funcitonality of help is defined in argparse._HelpAction __call__ method.You either have to use help action:Or create custom argparse action.For details on creating a custom action you may refer to docs.
The parameters of the last positional argument is not initialized correctly to achieve what you want.Please have a look to Python documentation for further details. But basically, the nargs='?' provides the possibility to have optional positional arguments. But you need to provide a default value.#python test.py  -tZ.
A simpler solution, define nargs:? means 0 or more. And then exit after runing your test:The complete code:This outputs:update, without sys.exitIf you remove sys.exit(), then the output is like your wished behavior. 


Answer URL
https://docs.python.org/3/library/argparse.html#action
https://docs.python.org/3/library/argparse.html#nargs
