Natural Text
Whenever a user doesn't provide suitable parameters to arguments in my script, I raise argparse.ArgumentTypeError with the error string I provided. My problem is that argparse also prints the usage, while it seems irrelevant to me to tell the user how to use my script when he just got a parameter wrong.Is there a way for certain cases of raising argparse.ArgumentTypeError to suppress the usage printout? Will I need to use a custom usage function? Or maybe I shouldn't be using this exception at all?
Where are you raising the ArgumentTypeError?  In a type function?The definition of ArgumentTypeError is just pass; it doesn't do anything except subclass Exception.It is referenced in _get_value, which calls the type function on your argument string.  That method treats TypeError and ValueError in the same way.  It recasts the error as ArgumentError, which adds the argument dest (name) to the message.  parse_known_args ends up converting that to a call to parser.error.It's the parser.error method that adds the print_usage.So simply changing that method might be the solution to your problem.https://docs.python.org/3/library/argparse.html#exiting-methodsI'm not sure what happens if your type function returns some other error - it might bubble all the way to the top.The formal way to change the parser.error method is to subclass ArgumentParser, but you can kludge a one time change with:This just showed the message, and did not exit.  If I'd stuck closer to the original it would have exited as well.


Answer URL
https://docs.python.org/3/library/argparse.html#exiting-methods
