Natural Text
I have a .js file with the following content:I have a Python3 script which produce one of the above lines every now and then. Usually I add lines to .csv file. For this I use the following code:As .csv don't contain functions the code works as expected.I need to start adding the same lines into the .js file. For this reason I modified my script. The new line looks like this:I tried to use the same codebut as expected new line is added at the end of the file:Any suggestions on how to modify my code on how to start adding the line where it needs to be is appreciated.UPDATEIn order to define my script output as data I modified the code like this:This is the output of print (zz)The problem now is the code canot see it as a single line but as separate symbols. Thereby it append it like this:I try to fix it by using but with no success.
As I mentioned in the comments, you probably should be using JSON for this. It's really not good practice to embed large amounts of data into program source. But anyway...As Moses Koledoye suggests, the way to do this (without using JSON) is to read the lines of your .js file into a list, modify that list, and save it back to the .js file. We need to append the new data before the last two lines of the .js file. A simple way to do that is to break the list of lines into two lists, a body and a tail append the new data strings to the body listwrite the new body plus tail to the file.The following code works on Python 2.7 and Python 3.UpdateFrom your comments and the update to your question it appears that you will only ever be adding a single line at a time to your .js file. So here's a simplified version of my earlier function to do that task. Please take note of how I'm passing the data to it.
Although your implementation does not look like a very good idea for a javascript file, you may want to look at file.seek with the file opened in binary mode to allow seeking from the end of the file with a negative offset. But finding the correct offset in bytes is hard enough.I'll suggest you read the entire content of the file into python, modify and then rewrite.


Answer URL
https://docs.python.org/3/library/json.html
