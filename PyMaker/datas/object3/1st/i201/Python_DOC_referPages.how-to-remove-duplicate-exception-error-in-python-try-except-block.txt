Natural Text
I am a new python programmer and have been making a file sort function to take a file name and neatly arrange it in a file structure being year/month/day. The following code works but looks ugly and there is a lot of duplicate exception errors which I would like to remove. Would love to see how to improve the efficiency of this code as it will be run frequently. Thanks in advance
os.makedirs() already creates the directories leading to the given path, so it should be enough to doThis is a bit of an improvement to your original version.BTW, os.path.join() is your friend:Even better would be to use all the capabilities of os.makedirs() if your Python is new enough:
First of all: use makedirs with only the innermost directory:Then notice that you should probably use os.path.join to form the path instead, hence:And... in Python 3 (3.2+) there is a parameter exists_ok that can be set to True so that no exception is thrown if the leaf child directory exists, so we getFinally do note that shutil.move might - or might not - throw a FileExistsError if the target exists...
You could define your own function to shorten the code and it's also good for re-usability:


Answer URL
https://docs.python.org/3/library/os.html#os.makedirs
