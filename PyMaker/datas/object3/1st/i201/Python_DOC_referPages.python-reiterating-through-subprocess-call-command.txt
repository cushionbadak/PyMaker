Natural Text
I have the following code to re-iterate through a IP address list to find the SNMP string:INPUT:OUTPUT: ... = STRING: "11/15/2017"This code works fine, but I need to replace os.system with subprocess.call as os.system is very limited and can not be stored in a variable.I tried to plug in subprocess.call in but i keep getting the error: Any help would be much appreciated, thanks!
erm, you're chaining os.system call with subprocess.call call. This is completely wrong. And the cryptic message root cause is that you're passing the return code of os.system which is an integer, when subprocess.call tries to iterate on the argument.Switching to subprocess is a great idea because os.system is deprecated and is prone to security issues. That is, if you consider dropping shell=True.And to drop shell=True, you have to pass a list of arguments, not composing your arg string yourself.My proposal:this runs your command in a safe, simple way, gets the output and puts each output line in a list of strings (trying to assign the output didn't work either with call or os.system since it returns the exit code, not the program output. Since your command can return a nonzero return code you cannot use check_output but you can use run is what you need (but you need python 3.5, else you'll have to use a Popen solution, described here: Running shell command and capturing the output):
import osimport subprocessip_list = ['10.10.10.10','10.10.10.11']snmp = ["snmpget","-v1","-c","public"]   # list of argumentsoutputs = []for x in ip_list:     cp = subprocess.run(snmp + [x],check=False)     outputs.append(cp.stdout.decode())


Answer URL
https://docs.python.org/3/library/subprocess.html#subprocess.check_output
https://docs.python.org/3/library/subprocess.html#subprocess.run
