Natural Text
Our product imports the library winreg.I am writing a test which I would like to mock the entire library.I do not want to mock specific functions, nor enumerate through all of the functions and mock them. I would like to mock the entire library, such that any instance of the library being imported or used instead uses the mock.Is this possible?
Have you tried patch?It is not necessarily intuitive to setup though, Python doc example:
This is a tricky problem.  I think you're best bet is to have your real library "winreg" in one folder location and your mock library in another location and do some sneaky PYTHONPATH manipulation when you run the unit tests.   Folder structure and assuming winreg is a python module but could still work if a folder.When you execute your unit tests if on a Linux system:When you run the normal code flip the PYTHONPATH back to the "real" library.  You'll just have to make sure that the real library isn't picked up in your PYTHONPATH when running the unit tests which could be tricky depending on your set up.


Answer URL
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch
https://docs.python.org/3/library/unittest.mock-examples.html#applying-the-same-patch-to-every-test-method
