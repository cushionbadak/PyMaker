Natural Text
I'm working on a tool to visualize Python profile traces, and to do that, it would be useful to know what line a function is called from.Suppose I have the following simple program:If I run cProfile on it (python -m cProfile -o a.data a.py), I get a marshaled file containing the following data structure:Essentially, this says that my_sleep() is called twice by main() on line 6, and this adds up to slightly over 3 seconds.Is there any way to find out what line it's being called from, and not just what function? So in this case, my_sleep() is called on line 7 for 1 second, and line 8 for 2 seconds.
You may use sys._getframe(1) in order to know the caller like so:Keep in mind doing things like that are usually not encouraged but if it's just temporary that's fine I guess.


Answer URL
https://docs.python.org/3/library/sys.html#sys._getframe
