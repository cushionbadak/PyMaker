Natural Text
I am new to Python and am hoping that someone could please explain to me what the error message means. To be specific, I have some code of Python and SPSS combined together saved in Atom, which was created by a former colleague. Now since the former colleague is not here anymore, I need to run the code now. What I did was I ran the code below from SPSS22. Then I got the following from the output.I know there are similar questions on this site, but the questions and answers were too hard for me to comprehend. If someone could please help me, I'd really appreciate it!Thank you in advance!
It's hard to be sure about what is going on here as there is a lot of code off stage, but the error message is telling you that there is an invalid character in the input stream.  Code x81 is undefined in code page 1252, which is the code page in effect.  That's the western Europe/US default code page.  The program is trying to convert a presumed code-page string to Unicode, so that fails.My guess is that the input is actually not encoded with cp 1252.  Something is messed up in in the Statistics current code page or with Unicode mode.  You might need to set the SPSS Statistics locale to something different or to turn Unicode mode on or off.  See SET LOCALE and SET UNICODE in the Command Syntax Reference on how to do this.If you can say more about your locale and what this code is doing, we might be able to provide more information.
First, here is a minimal example reproducing your error on Windows:To my understanding, the problem is this (I put together some information and examples which I have found, but am not certain everything is correct. I welcome corrections.)The 端 character is code point 252 = 0xfc in Unicode, https://unicode-table.com/en/00FC/).Python correct passes the 端 character to the console, as you can test using this example (be sure to save the file as UTF-8):I am not sure why this is working in the first place. (This answer may be why: https://stackoverflow.com/a/32176732/880783)The console uses something else than Unicode internally. For example, in the ASCII table, the 端 character is at position 129 = 0x81 (sounds familiar?).So when the console returns that character, Python thinks its a Unicode codepoint, but 0x81 is not defined. Hence the error.The key is to make Python understand that how what it gets from the process is encoded. In my example (Windows console), I have tried a couple of encodings (see the list here) like this:'ascii' fails with an ordinal not in range(128) error (probably does not cover extended ASCII).'cp1252' fails with character maps to <undefined>'latin_1' works, but outputs a box character (``) on my debug console in VS Code.'cp850' seem to works, outputting a 端 character.So I will stick with 'cp850' for now and see how it goes.


Answer URL
https://docs.python.org/3/library/codecs.html
