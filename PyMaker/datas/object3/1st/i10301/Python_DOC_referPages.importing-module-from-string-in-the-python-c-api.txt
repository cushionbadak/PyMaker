Natural Text
Importing Python modules from files is relatively easy with the Python C API with PyImport_Import() however I would need to use functions stored in strings. Is there a way to import python modules from strings (to clarify: there is no file; the code is in a string) or will I have to save the strings as temp files?
If my understanding is correct, you could use PyImport_ImportModule which takes a const char* name to specify the module to be imported.Since my understanding was incorrect:It would generally be better to dump the contents to a .py file and then execute them with PyRun_File but, if you have strings and want to work with those I guess you could use Py_CompileString to compile it to a code object and then feed it to PyEval_EvalCode for evaluation.
No need to use temp files. Use this code:This is code taken from a real commercial application (I've slightly modified it by removing error handling and other non-needed details).Just set the wanted module name in MyModuleName and the Python code in MyModuleCode and you are done!


Answer URL
https://docs.python.org/3/c-api/import.html#c.PyImport_ImportModule
https://docs.python.org/3/c-api/veryhigh.html?highlight=compile#c.PyRun_File
https://docs.python.org/3/c-api/veryhigh.html?highlight=compile#c.Py_CompileString
https://docs.python.org/3/c-api/veryhigh.html?highlight=compile#c.PyEval_EvalCode
