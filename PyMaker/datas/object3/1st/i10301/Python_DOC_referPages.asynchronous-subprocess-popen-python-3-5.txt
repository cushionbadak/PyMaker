Natural Text
I am trying to asynchronously run the Popen command from subprocess, so that I can run other stuff in the background.I have tried to understand https://docs.python.org/3/library/asyncio-subprocess.html but i am not sure what a protocol factory is.
When I came to this question, I expected the answer to really use asyncio for interprocess communication.I have found the following resource useful:https://github.com/python/asyncio/blob/master/examples/child_process.pyand below is my simplified example (using 3.5+ async/await syntax), which reads lines and outputs them sorted:NB: without taking special measures, the amount of data to be written into the pipe is limited. In my system it was possible to write just over 700000 bytes before using up pipe buffers.There are also other examples there, using create_subprocess_shell.I have not yet used asyncio in real projects, so improvements' suggestions in the comments are welcome.
Tested with python 3.5. Just ask if you have questions.
This one is much simpler, I found it after the other reply that could, anyway, be interesting... so I left it.The asynchronism is evident from the fact that the python script prints the counter value on the stdout while the background process runs the sleep command. The fact that the python script exit after ~5sec printing the output of the bash time command printing the counter in the meanwhile is an evidence that the script works.
I eventually found the answer to my question, which utilizes async.http://pastebin.com/Zj8SK1CG


Answer URL
https://docs.python.org/3/library/asyncio-subprocess.html
https://docs.python.org/3/library/asyncio-subprocess.html
