Natural Text
I have a sql statement that returns no hits. For example, 'select * from TAB where 1 = 2'.I want to check how many rows are returned, Here I get already exception: "(0, 'No result set')" How can I prevend this exception, check whether the result set is empty?
cursor.rowcount will usually be set to 0.If, however, you are running a statement that would never return a result set (such as INSERT without RETURNING, or SELECT ... INTO), then you do not need to call .fetchall(); there won't be a result set for such statements. Calling .execute() is enough to run the statement.Note that database adapters are also allowed to set the rowcount to -1 if the database adapter can't determine the exact affected count. See the PEP 249 Cursor.rowcount specification:The attribute is -1 in case no .execute*() has been performed on the cursor or the rowcount of the last operation is cannot be determined by the interface.The sqlite3 library is prone to doing this. In all such cases, if you must know the affected rowcount up front, execute a COUNT() select in the same transaction first.
MySQLdb will not raise an exception if the result set is empty. Additionally cursor.execute() function will return a long value which is number of rows in the fetched result set. So if you want to check for empty results, your code can be re-written as
I had issues with rowcount always returning -1 no matter what solution I tried.I found the following a good replacement to check for a null result.
Notice: This is for MySQLdb module in Python.For a SELECT statement, there shouldn't be an exception for an empty recordset. Just an empty list ([]) for cursor.fetchall() and None for cursor.fetchone().For any other statement, e.g. INSERT or UPDATE, that doesn't return a recordset, you can neither call fetchall() nor fetchone() on the cursor. Otherwise, an exception will be raised.There's one way to distinguish between the above two types of cursors:
if you're connecting to a postgres database, the following works:
You can do like this :Thanks :)


Answer URL
https://docs.python.org/3/library/sqlite3.html#sqlite3.Cursor.rowcount
