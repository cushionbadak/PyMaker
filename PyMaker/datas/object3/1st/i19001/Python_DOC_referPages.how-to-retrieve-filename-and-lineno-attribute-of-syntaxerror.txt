Natural Text
I have embedded python interpreter in my application. I use it to run python scripts using PyRun_String() API. I can fetch error information using PyErr_Fetch() if an error/exception encounters. This gives me exception type, exception value and exception traceback. I then find line number of the originated error from traceback. However, i dont get any kind of traceback in case of Syntax Error. Do anybody know how to retrieve line number without traceback..? Is there any way to retreive it using exception type or exception value..? Python documentation stated that:Instances of this class have attributes filename, lineno, offset and text for easier access to the details. str() of the exception instance returns only the message.How do I retrieve filename and lineno attribute of SyntaxError in embedded python..?Any help will be appreciated. Thanks in advance.Thanks for your suggestion Brett.But I already tried it by using PyObject_GetAttr().Please see below sample code that I used for testing purpose.I have intentionally inserted a syntax error in script_source.I am unable to retrieve actual file name and line number from file_name and line_no objects.I tried to debug file_name and line_no objects and the content's looks like below."member filename of Syntax Error Objects" and "member lineno of Syntax Error Objects"These objects are not callable so I can't use PyObject_Call() variant's over these.Is there any way so that I can get actual file name and line number from these object's..?In this file name will be  as I am using PyRun_String().
I resolved it in following way.I used PyErr_NormalizeException() after PyErr_Fetch() and code is working fine now.
The attributes are set on the the PySyntaxErrorObject struct, but be aware that the struct is not exposed if you are adhering to Python's stable ABI. Otherwise you should be able to use a PyObject_GetAttr* function to get at the attributes.


Answer URL
