Natural Text
I am trying to make Scrapy output colorized logs. I am not so familiar with Python logging, but my understanding is that I must make my own Formatter and make it use by Scrapy. I succeeded in making a Formatter to colorized the output using Clint.My problem is that I can't make it work within Scrapy correctly. I would have expected the logger object in my spider to have a handler, then I would have switched the formatter of that handler. When I looks what is inside spider.logger.logger, I see that handler is an empty list. I tried to add my formatter in a new stream handler doing.crawler.spider.logger.logger.addHandler(sh) where sh is a handler using my color formatter.This add for effect to make scrappy output each messages twice. First message is colorized but doesn't have Scrapy formatting. The second one has Scrapy formatting with no colors.How can I make Scrapy output colorized logs keeping the same format that can be set in settings.pyThanks
If you mean to colorize LogRecord only, you can customize LOG_FORMAT in settings.py with ANSI escape codes.Example: If you also want to colorize different log levels with different colors, you can override scrapy.utils.log._get_handler(source code).Put this near the top of your settings.pyWhat it  does is reset the formatter after calling the original _get_handler, and then reattach it to scrapy.utils.log.This is a hacky solution and might not be the best practice, but it just works.A more proper way to achieve this is to override logging.StreamHandler. There is a bunch of discussion on SO which can lead you to the right direction.Here I provide my full working codes used in my projects (a third-party package colorlog is in use).settings.py


Answer URL
https://docs.python.org/3/library/logging.html#logrecord-attributes
