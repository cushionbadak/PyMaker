Natural Text
Given the list of filenames filenames = [...].Is it possibly rewrite the next list comprehension for I/O-safety: [do_smth(open(filename, 'rb').read()) for filename in filenames]? Using with statement, .close method or something else.Another problem formulation: is it possibly to write I/O-safe list comprehension for the next code?
You can put the with statement/block to a function and call that in the list comprehension:
You can use the ExitStack introduced in Python 3.3 for this purpose:Note that this opens all the files at once, which is not necessary for this use case, and might not be a good idea if you have a big number of files.


Answer URL
https://docs.python.org/3/library/contextlib.html#contextlib.ExitStack
