Natural Text
All of the examples I've seen have used psql with something like COPY COMMAND | gzip > 'filename'.  I'd prefer to use a solution with psycopg2 if possible, and I was thinking that it might be nice to write it out to a string buffer type object which processes the data and then writes out a compressed gzip file.How can I do this?
The documentation for psycopg says that copy_to accepts any file-like object. Thus you could simply use the gzip.open to open a writable gzip file-like object:Alternatively, if you prefer to write text in certain encoding, and on Python 3.3+, you can use mode 'wt' and add encoding='UTF-8' or similar to the gzip.open.


Answer URL
https://docs.python.org/3/library/gzip.html
