Natural Text
I'm trying to find the continued fractions of any non-square number (until it repeats).For example: input: 23 = [4; 1,3,1,8]my code works for many numbers (even though it's very clumsy).It works for 23 where it outputs: (Ignore the extra 1, 3, 1)But when i input 61 it never stops... here a line of the output:After 14 it doesn't repeat like it should (4, 5 instead of 3, 4 and 6900 are out of place)I'm a bit of a noob when it comes to coding, so it would help alot if someone could tell my why it doesn't work and how i should fix itHere's my code: Edit: not 63, meant 61
What you have is a precision error.  These calculations are extremely precise, meaning they require many binary digits to represent.  The finite floating point precision that your computer uses is sometimes not enough to do this accurately.  Somewhere along the line, the behavior of how this inaccuracy is handled in your machine is breaking your calculations.  I used the decimal module to handle this large precision.This gives me the output[7, 1, 4, 3, 1, 2, 2, 1, 3, 4, 1, 14, 1, 4, 3, 1, 2, 2, 1, 3, 4, 1]for input 61.  The default number of places for the Decimal class is 28.  If necessary, you can set the Decimal objects to use higher precision like so getcontext().prec = xHere's a the Wikipedia page to review floating point precision.  If you'd like I would be happy to give you some suggestions on making your code cleaner as well.  


Answer URL
https://docs.python.org/3/library/decimal.html#decimal.Decimal
