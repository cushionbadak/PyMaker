Natural Text
I'm trying to use str.format style templating in my logging.  Can't seem to get it working properly.Actual output:Expected output:What am I missing in this setup?I'm not interested to see workarounds that format the string before it's logged, or Python 2 solutions which use old %-style templating.  
Apparently the style argument only applies to information about messages (such as a timestamp, severity, etc.) and not to actual messages.From the docstring of logger.warning:It seems that the msg is always formatted using old-style formatting, so the style argument of the logger is not even considered.The logging HOWTO contains a bit more information:... you cannot directly make logging calls using str.format() or  string.Template syntax, because internally the logging package uses  %-formatting to merge the format string and the variable arguments.  There would no changing this while preserving backward compatibility,  since all logging calls which are out there in existing code will be  using %-format strings.
"I'm not interested to see workarounds that format the string before it's logged" Why not? The old style formats it before it's logged also... You can put the line to do the formatting inside the logger.warning call and it changes nothing functionally. If {foo:42} is just one member of a much larger dictionary you can do something like this:Whether or not this is sufficient is dependent on what you actually are trying to do.


Answer URL
https://docs.python.org/3/howto/logging-cookbook.html#using-particular-formatting-styles-throughout-your-application
