Natural Text
What is the proper and fail-safe way to open non py file from not current directory?To be more specific, I have a method, which validates API response with JSON schema, contained in file schema.json:And got the following project structure:My goal is to run tests not only from the directory project-pytest\tests\ by exectuting command python -m pytest file_with_tests.py, but also from parent directory, by executing runner_01.cmd, with command python -m pytest -v .\tests\file_with_tests.py inside.  Now the second way fails with FileNotFoundError: [Errno 2] No such file or directory: './schema/schema.json'.I tried using import os:but in this case absolute path ignores schema.json parent directory - FileNotFoundError: [Errno 2] No such file or directory: 'D:\\Git\\testarea-pytest\\schema.json'.How should I open my schema.json placed in different sub-directory and be able to run commands:python -m pytest -v .\tests\file_with_tests.py from project-pytest folderandpython -m pytest -v file_with_tests.py from project-pytest\tests\ folderwithout failing test because of FileNotFoundError.
If you are happy in making your project a package, pkgutil.get_data() can help abstracting from the resource location in the filesystem.See here.
Fixed problem to achieve my goals from the other side - I changed my runner_01.cmd from this:  to this:  Now tests can be runned from project folder and also from the tests folder by simple cmd script runners. Can't definetely say is this a kludge or not, but users are happy.


Answer URL
https://docs.python.org/3/library/pkgutil.html?highlight=pkgutil%20get_data#pkgutil.get_data
