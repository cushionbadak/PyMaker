Natural Text
I wrote a script to scrape the titles of a YouTube playlist page  Everything works fine, according to print statements, until I try to write the titles into a text file, at which point I get "UnicodeEncodeError: 'charmap' codec can't encode characters in position..."I've tried adding "encoding='utf8'" when I open the file, and while that fixes the error, all the Chinese characters are replaced by random, gibberish charactersI also tried encoding the output string with 'replace', then decoding it, but that also just replaces all the special characters with question marksHere is my code:And here is the sample playlist I've been using to test:https://www.youtube.com/playlist?list=PL3oW2tjiIxvSk0WKXaEiDY78KKbKghOOo
The documentation is clear about file encoding:encoding is the name of the encoding used to decode or encode the  file. This should only be used in text mode. The default encoding is  platform dependent (whatever locale.getpreferredencoding() returns),  but any text encoding supported by Python can be used. See the codecs  module for the list of supported encodings.To answer questions from your last comment.You can find out what's the preferred encoding on Windows withIf playListNames.txt was created with open('playListNames.txt', 'w') then the value returned by locale.getpreferredencoding() was used for encoding.If the file was created manually then the encoding depends on the editor's default/preferred encoding.Refer to How to convert a file to utf-8 in Python? or How do I convert an ANSI encoded file to UTF-8 with Notepad++? [closed].
Using an encoding will fix your problem.  Windows defaults to an ANSI encoding that on US Windows is Windows-1252.  It doesn't support Chinese.  You should use utf8 or utf-8-sig as the encoding.  Some Windows editors prefer the latter and assume ANSI otherwise.


Answer URL
https://docs.python.org/3/library/functions.html#open
