Natural Text
I have a function that reads in files, groups them with some data and then puts them on a message queue to be sent over a socket by a thread:My thread's run function:I've run tests to confirm that the fileQueue is being filled and it seems to be getting filled with the correct number of elements, but it seems that only a few elements are actually pulled off of the queue and sent and whats worse is that some files are being repeated in the queue. For example, the last file in the set that I'm reading in seems to be pushed to the queue multiple times. What am I doing wrong?
In the first place I would put a new dict object for each file onto the queue, rather than reusing the same dict instance over and over. Also, you need to signal that no more items will be put onto the queue, e.g. by putting None:Second, I can't see any loop in your consumer thread method. You are just getting a single item. Is your code snippet missing something? Have a look at this example to see how elements can be consumed from a Queue. It breaks down to a loop and a blocking call to get(): 


Answer URL
https://docs.python.org/3/library/queue.html#queue.Queue.join
