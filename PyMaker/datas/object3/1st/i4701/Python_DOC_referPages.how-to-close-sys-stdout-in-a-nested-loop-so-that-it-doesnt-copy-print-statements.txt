Natural Text
I am new to python 3 and I'm working on sentiment analysis of tweets. My code begins with a for loop that takes in 50 tweets, which i clean and pre-process. After this (still inside the for loop) i want to save each tweet in a text file(every tweet on a new line)Here's how the code goes:After running this its showing error: I/O operation on closed file on line 71 (the first print statement after if loop)My question is, is there any way I can temporarily close and then open sys.stdout and have it active only inside the if loop?
I'm not sure if this is exactly what you want to do but you can change thistoalternatively, you can get the original value of sys.stdout from sys.__stdout__, so your code becomes
You do not need to assign to sys.stdout at all. Just tell print() to write to the file instead, using the file argument:There is no need to assign anything to sys.stdout now, because now print() writes directly to your file instead.You also want to use the file object as a context manager, so it is closed or you:You never needed to close the sys.stdout reference anyway, you wanted to close filename instead, and restore sys.stdout to it's former state.If you did want need to replace sys.stdout, you have a few options, from most correct to least:Use contextlib.redirect_stdout():At the end of the block stdout is fixed up for you.Manually store sys.stdout first:Use the sys.__stdout__ copy; this is set on start-up:You need to take into account that sys.stdout may have been replaced by something else before your code runs, and restoring it back to sys.__stdout__ might be the wrong thing to do.
You're confusing two different kinds of writing to file.sys.stdout pipes your output to the console/terminal. This can be written to file but it's very roundabout.Writing to file is different. In python you should look at the csv module if you're writing lists of values of all the same length (and maybe even if you're not, it's very easy to use).Open your file outside the loop. In the loop, write to file line by line. Close the file outside the loop. This is automatically done for you if you use the following "with" syntax:Alternatively, loop through and save tokenized-tweets to a list-of-lists. Then, outside and after the loop, write the entire thing to a file:


Answer URL
https://docs.python.org/3/library/contextlib.html#contextlib.redirect_stdout
https://docs.python.org/3/library/sys.html#sys.__stdout__
https://docs.python.org/3/library/csv.html
https://docs.python.org/3/library/sys.html#sys.__stdin__
