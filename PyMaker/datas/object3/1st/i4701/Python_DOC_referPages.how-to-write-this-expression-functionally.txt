Natural Text
I want to rewrite the following python code functionally:This is my attempt, but is incorrect:The error I get is lambda cannot contain assignment.Using list comprehension, the solution is:
I do prefer the list comprehension in your own answer, but if I were to do it with more of a functional touch, I think I would use a lambda function and a map:Note that map is a lazy iterator in Python 3. If you want an evaluated list you have to enclose the line in an explicit list(...) constructor:
The list comprehension method is probably better, but if you're looking for functional how about this:By using enumerate(lst) as the iterable for map(), we get both the index and the value. In this case, we yield 0 if i is in {2, 5}. Otherwise we keep the value x.If you're using python3, you have to wrap the call to map() with list(). However, that approach is not recommended as it wastefully creates a list.
Another way you can do this is with generic function unfoldunfold can be used in interesting waysPython's lambda syntax is really rigid its awkward ternary syntax make functional expressions painful to write. In the example below, we pre-define a function gen using some imperative syntaxes to help readability, then we pass it to unfold - this program also shows that state can be a complex valueOf course all of this pain exists for a reason - it's a signal indicating that we're doing something wrong. A seasoned python programmer would never write main, alphabet, or fib like we did above. So it's not pythonic (as they say), but it's functional, and hopefully that answers your question.Below, we dramatically simplify unfold - instead of passing next and done helpers to the user lambda, we ask the user to return a tuple that encodes their choice: (value, None) says value is the last value in the sequence, (value, nextState) will produce the next value and continue with the next state.The trade-off here is the unfold is a little less complicated, but it requires the user to know the special tuple signalling to write their program. Before, next and done kept this worry out of the user's mind. Either way is fine, I share this just to give another alternative


Answer URL
https://docs.python.org/3/whatsnew/3.0.html#views-and-iterators-instead-of-lists
