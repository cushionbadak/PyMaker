Natural Text
I have a function that uses the len function on one of it's parameters and iterates over the parameter. Now I can choose whether to annotate the type with Iterable or with Sized, but both gives errors in mypy.GivesWhileGivesSince there is no Intersection as discussed in this issue I need to have some kind of mixed class.This gives an error when using foo with a list.This is not too surprising since:So I defined a __subclasshook__ (see docs).Then the subclass check works:But mypy still complains about my list.How can I use type hints when using both the len function and iterate over my parameter? I think casting foo(cast(SizedIterable, ['a', 'b', 'c'])) is not a good solution.
In the future Protocols will be introduced. They are already available through typing_extensions. See also PEP 544. Using Protocol the code above would be:mypy takes that code without complaining. But PyCharm is saying Expected type 'SizedIterable', got 'List[str]'about the last line.
Starting from Python3.6 there's a new type called Collection. See here.


Answer URL
https://docs.python.org/3/library/abc.html#abc.ABCMeta.__subclasshook__
https://docs.python.org/3/library/collections.abc.html#collections.abc.Collection
https://docs.python.org/3/library/collections.abc.html#collections-abstract-base-classes
