Natural Text
I'm working on a Rails 4 / mongoid application which needs to expose APIs for other applications and scripts. I need to be able to update documents in one of the models through an API with Python 3 script. I'm a bit fresh with Python hence asking for help here.I already found out how to query Rails APIs with Python 3 and urllib but struggling with updates. I was trying to go through Python 3.5 docs for urllib2 but struggling to apply this to my script.What goes to data and how to add authentication token to headers, which in curl would look something like thisI would greatly appreciate if somebody explained how to, for example, update status based on name (name is not unique yet but will be). My biggest challenge is the Python side. Once I have the data in params on Rails side I think I can handle it. I think.I included my model and update action from the controller below.app/models/experiment.rbapp/controllers/api/v1/experiments_controller.rb
I figured out who to  send a PATCH request with Python 3 and update the the record's status by name.Thanks to this post found out about requests module. I used requests.patch to update the record and it works great.python codeThere are two problems remaining:How to add headers to this request which would allow me to go through token based authentication. At the moment it's disabled. request.patch only takes 2 parameters, it doesn't take headers parameter.How to access the JSON which is sent in response by Rails API.   


Answer URL
https://docs.python.org/3/howto/urllib2.html
