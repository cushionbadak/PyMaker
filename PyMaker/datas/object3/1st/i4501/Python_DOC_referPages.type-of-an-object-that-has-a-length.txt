Natural Text
How do I type hint a parameter or isinstance check an object that must be iterable and works with len? I assume that pretty much all objects with a length are iterable, so this is really about what type, if any, represents objects that implement __len__.It is not typing.Iterable or collections.Iterable because those are true for things that don't have length, like zip. It is not typing.Sequence or collections.Sequence, because those are false for things that have length, like dictionary keys and numpy arrays.It's not iterable or iter because those are not types. It is not list or tuple because those are much too narrow.
There is collections.Sized for that:Or for your case, since you want it to have __len__ and to be iterable: Sadly, as the comments bellow mentioned, there is no typing.Intersection as of yet to guarantee the presence of both.
You can use typing.Collection if you don't including __contains__ as a requirement:If you do, a SizedIterable would be trivial to implement yourself, by just removing the check for __contains__


Answer URL
https://docs.python.org/3/library/collections.abc.html#collections.abc.Sized
