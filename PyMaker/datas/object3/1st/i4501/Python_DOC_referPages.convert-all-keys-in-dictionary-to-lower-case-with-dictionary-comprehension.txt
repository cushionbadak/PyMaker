Natural Text
I wrote a function to convert all keys in a dictionary to lowercase:So far so good. Then I thought, hm, this would be more elegant in a dictionary comprehension, so this is what I came up with:This only works if all keys are strings. I there are numeric keys, they get dropped:So my question is: is it possible to write this function as a dictionary comprehension?
The correct translation of your code to a comprehension is:using a conditional expression to determine the key for each key-value pair.Using if after the for loop filters on elements; those elements that don't pass the if test are not included in the output.You also want to avoid using type(...) is, use isinstance() instead; subclasses of str will support the lower() method too:
If you expect your keys to ordinarily be strings, a more appropriate solution would be to use a try / except clause.Here we catch AttributeError, which will occur only for non-string elements.Unfortunately, this will not work with a dictionary comprehension, since statements are not permitted in comprehensions and PEP-463 was rejected.


Answer URL
https://docs.python.org/3/reference/expressions.html#conditional-expressions
