Natural Text
I am trying to print an integer in Python 2.6.1 with commas as thousands separators. For example, I want to show the number 1234567 as 1,234,567. How would I go about doing this? I have seen many examples on Google, but I am looking for the simplest practical way.It does not need to be locale-specific to decide between periods and commas. I would prefer something as simple as reasonably possible.
For Python ≥ 2.7:Per Format Specification Mini-Language,The ',' option signals the use of a comma for a thousands separator. For a locale aware separator, use the 'n' integer presentation type instead.
I got this to work:Sure, you don't need internationalization support, but it's clear, concise, and uses a built-in library.P.S. That "%d" is the usual %-style formatter.  You can have only one formatter, but it can be whatever you need in terms of field width and precision settings.P.P.S. If you can't get locale to work, I'd suggest a modified version of Mark's answer:Recursion is useful for the negative case, but one recursion per comma seems a bit excessive to me.
For inefficiency and unreadability it's hard to beat:
Here is the locale grouping code after removing irrelevant parts and cleaning it up a little:(The following only works for integers)There are already some good answers in here. I just want to add this for future reference. In python 2.7 there is going to be a format specifier for thousands separator. According to python docs it works like thisIn python3.1 you can do the same thing like this:
I'm surprised that no one has mentioned that you can do this with f-strings in Python 3.6 as easy as this:... where the part after the colon is the format specifier. The comma is the separator character you want, so f"{num:_d}" uses underscores instead of a comma.This is equivalent of using format(num, ",d") for older versions of python 3.
Here's a one-line regex replacement:Works only for inegral outputs:Or for floats with less than 4 digits, change the format specifier to %.3f:NB: Doesn't work correctly with more than three decimal digits as it will attempt to group the decimal part:How it worksLet's break it down:
This is what I do for floats.  Although, honestly, I'm not sure which versions it works for - I'm using 2.7:Returns: 4,385,893.38Update: I recently had an issue with this format (couldn't tell you the exact reason), but was able to fix it by dropping the 0:
You can also use '{:n}'.format( value ) for a locale representation. I think this is the simpliest way for a locale solution.For more information, search for thousands in Python DOC.For currency, you can use locale.currency, setting the flag grouping:CodeOutput
I'm sure there must be a standard library function for this, but it was fun to try to write it myself using recursion so here's what I came up with:Having said that, if someone else does find a standard way to do it, you should use that instead.
From the comments to activestate recipe 498181 I reworked this:It uses the regular expressions feature: lookahead i.e. (?=\d) to make sure only groups of three digits that have a digit 'after' them get a comma. I say 'after' because the string is reverse at this point.[::-1] just reverses a string.
Slightly expanding the answer of Ian Schneider:If you want to use a custom thousands separator, the simplest solution is:ExamplesIf you want the German representation like this, it gets a bit more complicated:
Python 3--Integers (without decimal):"{:,d}".format(1234567)--Floats (with decimal):"{:,.2f}".format(1234567)where the number before f specifies the number of decimal places.--BonusQuick-and-dirty starter function for the Indian lakhs/crores numbering system (12,34,567):https://stackoverflow.com/a/44832241/4928578
The accepted answer is fine, but I actually prefer format(number,','). Easier for me to interpret and remember. https://docs.python.org/3/library/functions.html#format
from Python version 2.6 you can do this:For Python versions < 2.6 and just for your information, here are 2 manual solutions, they turn floats to ints but negative numbers work correctly:few things to notice here:this line: string = '%d' % number beautifully converts a number to a string, it supports negatives and it drops fractions from floats, making them ints;this slice indexes[::-3] returns each third item starting fromthe end, so I used another slice [1:] to remove the very last itemcuz I don't need a comma after the last number;this conditional if l[index] != '-' is being used to support negative numbers, do not insert a comma after the minus sign.And a more hardcore version:
Here's one that works for floats too:Usage Example:
One liner for Python 2.5+ and Python 3 (positive int only):
I am a Python beginner, but an experienced programmer. I have Python 3.5, so I can just use the comma, but this is nonetheless an interesting programming exercise. Consider the case of an unsigned integer. The most readable Python program for adding thousands separators appears to be:It is also possible to use a list comprehension:This is shorter, and could be a one liner, but you will have to do some mental gymnastics to understand why it works. In both cases we get:The first version is the more sensible choice, if you want the program to be understood.
This does money along with the commas
I have a python 2 and python 3 version of this code. I know that the question was asked for python 2 but now (8 years later lol) people will probably be using python 3. Python 3 Code:Python 2 Code:  (Edit. The python 2 code isn't working. I am thinking that the syntax is different).    
I'm using python 2.5 so I don't have access to the built-in formatting.I looked at the Django code intcomma (intcomma_recurs in code below) and realized it's inefficient, because it's recursive and also compiling the regex on every run is not a good thing either.  This is not necessary an 'issue' as django isn't really THAT focused on this kind of low-level performance.  Also, I was expecting a factor of 10 difference in performance, but it's only 3 times slower.Out of curiosity I implemented a few versions of intcomma to see what the performance advantages are when using regex.  My test data concludes a slight advantage for this task, but surprisingly not much at all.I also was pleased to see what I suspected: using the reverse xrange approach is unnecessary in the no-regex case, but it does make the code look slightly better at the cost of ~10% performance.Also, I assume what you're passing in is a string and looks somewhat like a number.  Results undetermined otherwise.And here are the test results:
Just subclass long (or float, or whatever). This is highly practical, because this way you can still use your numbers in math ops (and therefore existing code), but they will all print nicely in your terminal. 
Italian numbers: thousand separator is a '.'I solved it this way... for a dictonaryout: le immobilizzazioni valgono 419.168 €. i debiti per TFR sono pari a 13.255 €. l’attivo circolante è di 195.443 euro. il fondo rischi ed oneri ha un importo pari a 13.374 euro. i debiti sono 180.947 €. i ratei e risconti attivi sono pari a 2.271 euro. i ratei e risconti passivi sono pari a 1.864 euro. I crediti verso i soci sono pari a 17.630 euro.
Here is another variant using a generator function that works for integers:And here's a test:
this is baked into python per PEP -> https://www.python.org/dev/peps/pep-0378/just use format(1000, ',d') to show an integer with thousands separatorthere are more formats described in the PEP, have at it
I prefer the locale-based solution for real projects, but I think the approach with the use of slice assignment should be mentioned here:Gist with doctests is here - https://gist.github.com/ei-grad/b290dc761ae253af69438bbb94d82683
For floats:For ints:
If you don't want to depend on any external libraries:This works only for non-negative integers.


Answer URL
https://docs.python.org/3/library/functions.html#format
