Natural Text
Is there a way to do this in python 3.6+?I just want a single python command that both:(1) loads the module for the first time, and (2) forces a reload of the module if it already loaded without barfing.(This is not a duplicate question because I'm asking for something different.  What I want is a single function call that will do Items (1) and (2) above as the same function call.  I don't want to make a coding decision manually about if I could issue "import" or "imp.reload".  I just want python code for a single function "def" that can detect which case is appropriate and proceed automatically to make the decision for me about how to import it it, (1) or (2).I'm thinking that it something like this:Except, I can't figure out how to pass a module name as a parameter.  Just gives me an error no such module named 'm'
There is one missing step that you semi-corrected in your new answer, which is that you need to assign the new module in every scope that uses it. The easiest way is to return the module object and bind it to the name you want outside your function. Your original implementation was 90% correct:Now you can use this function from the command line to replace import, e.g.:Any time you find yourself using exec to perform a task for which there is so much well defined machinery already available, you have code smell. There is also no reason to re-import sys and importlib every time.
This function should do what you want:An alternative approach is to write your own import hooks, which I won't describe.However please note that this is an anti-pattern and I would discourage the practice of reloading modules at every import.If this is for debugging purposes, then I would suggest using one of the many auto-reloader solutions available online: they watch your Python files for changes, and when you make modifications they automatically re-import the modules.The reasons why your function didn't work are two:The import keyword does not resolve variables, so import m does not mean "import the module which name is in the variable m", but rather it means "import the module named m".importlib.reload wants a module object, not a module name.

It's possible! but a little bit tricky to code correctly the first time...If you have a module file in your current directory call "mymodule.py", then use it like this:Version 2.0:


Answer URL
https://docs.python.org/3/reference/import.html#replacing-the-standard-import-system
https://docs.python.org/3/library/importlib.html#importlib.reload
