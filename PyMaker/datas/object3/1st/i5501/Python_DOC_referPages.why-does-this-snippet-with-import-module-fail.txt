Natural Text
The following code creates a Python package a.b.c, then tries to import it. It fails, but works fine if I comment out the line import_module('a.b') inside the try/except!When i run it on my Mac (official Python 3.6 installation), I get:This issue only happens on my Mac, not my Windows Python 3.6.It seems that on Mac, the import_module is adding a to sys.modules; I think this could be connected to why the later import fails.
It would appear that importlib caches the result of your failed import of a.b. When you try to import a.b.c it already thinks a.b doesn't exist, even though you created it. You would have to call invalidate_caches() from the importlib package before trying to import again.Reference: https://docs.python.org/3/library/importlib.html#importlib.import_moduleIf you are dynamically importing a module that was created since the   interpreter began execution (e.g., created a Python source file), you   may need to call invalidate_caches() in order for the new module to be  noticed by the import system.


Answer URL
https://docs.python.org/3/library/importlib.html#importlib.import_module
