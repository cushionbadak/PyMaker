Natural Text
I'm trying to extract the sequential 'NN' elements (including 'NNP') from a list and append to a new list given 'IN' or 'TO' are encountered before 'NN'. How can I do it?I tried the following code. But unable to capture the  other similar instances.But I want to improve the code to give the below output:Each output chunk has either 'IN' or 'TO' occurred before them.Actually, the above list (new) is underlying parts of speech for this list :          How can I map the results back to this list so that I will get 
Your not too far away. One way to make this easier is to obtain all the indexes of 'IN' and 'TO':Which gives:Then you just need to iterate though these indexes, specifically new[i+1:], and take elements that are 'NN' or 'NNP'. When you reach an element that is not one of these, break out of the loop.Here is an example:Which in the end outputs:Another shorter way, as @schwobaseggl suggested, is to use itertools.takewhile to make the extraction of 'NN' elements easier. This function basically keeps extracting elements until the first argument predicate returns false.Here is what it can look like:UPDATE:If you want to map the words and speeches together, you can do this:Which Outputs:
You can use two handy itertools for this: groupby and takewhile:This chunks the initial list in chunks based on the items being TO or IN. From each of the chunks except the first (to avoid any initial NNs), this takes elements while they start with NN. Finally, it filters out non-truthy (empty) lists.
There is another nice answer posted while I was typing this out -- this is a simple implementation without imports.


Answer URL
https://docs.python.org/3/library/itertools.html#itertools.takewhile
https://docs.python.org/3/library/itertools.html
https://docs.python.org/3/library/itertools.html#itertools.groupby
https://docs.python.org/3/library/itertools.html#itertools.takewhile
https://docs.python.org/3/library/functions.html#filter
