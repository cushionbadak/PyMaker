Natural Text
I am using Python3.2 that ships with Debian on the latest Raspberry Pi:The server doesn't reply in time, so the script times out, and raises the Exception.  However the client then leaves the connection lingering open.I would like the connection to close after a timeout occurs?I understand the concept at the TCP protocol level, however I don't see any documentation online for how to do something as simple as this in python-requests.
I'm assuming you're seeing these connections in something like tcpdump.TCP connections linger (in the kernel) by design, for a period of time. There's really nothing you can do about it.
Wrap it in a with statement, then move the s.close() to a finally: after the except:The s.close() will run every time, whether it succeeds or fails. the with statement should provide the extra insurance since the whole thing will run in that context


Answer URL
https://docs.python.org/3/reference/compound_stmts.html#the-with-statement
