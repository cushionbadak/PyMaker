Natural Text
I'm trying to test the read() method in the following class:As I understand it, I should be mocking the file.read() method (in self.__channel.read(), or maybe the os.open() method, but none of the examples I've found have the call to os.open() or file.read() deep inside a class.I already tried __builtin__.read = MagicMock(return_value="something"), and many variations thereof, but not one of them even make sense. I'm kind of lost as to how to even start this.Is this even the right way?
Mock the open function; you can use the mock_open() utility function to provide a suitable mock:The patch() call creates a new global open object in your your_module namespace, so when the Channel.__open() method runs it'll find that object rather than the open() built-in function.By passing in a read_data argument to mock_open(), you can dictate what is returned by the self.__channel.read() call.


Answer URL
https://docs.python.org/3/library/unittest.mock.html#mock-open
