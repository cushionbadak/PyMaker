Natural Text
Is it possible to automatically remove build products that are generated by a setup.py script based on setuptools?I've just started with a new Python project and it's the first time I'm using setuptools as a developer, so I may be getting something wrong. when I build the project using python setup.py bdist, three directories, build, dist and one ending in .egg-info are created. When I then run python setup.py clean it doesn't seem to be doing anything and just prints this:I've tried adding --all to the clean command and while it does remove some files in the build directory, it doesn't remove the directory itself or any of the files in the other two directories.I'm assuming that this should be possible very easily and that I'm just looking in the wrong place. I'm used to this functionality e.g. from virtually any project using make where make clean or make distclean will remove any build products.
Standard approach:From Cleaning build directory in setup.py and the documentation:This command removes the temporary files created by build and its subcommands, like intermediary compiled object files. With the --all option, the complete build directory will be removed.Another way to do it:This may not be the best solution:It seems from the comment below this answer that python setup.py clean --all sometimes fails to remove everything (Numpy in the example in the comment).  It seems not all setup.py scripts support clean. Example: NumPy â€“ kevinarpe Jun 15 '16 at 7:14You could use the remove_tree() command in your setup script:Or in a setup script:Another way I solved it was to remove everything manually manually (using shutil and glob):Adding it to the setup script was harder but using this answer, it should look something like this:cmdclass = {'install'} allows this class to run after the installation.  See this answer for more details.What gave me the idea to use shutil?The idea to use shutil came from the old documentation:Some of this could be replaced with the shutil module?


Answer URL
https://docs.python.org/3/distutils/apiref.html#module-distutils.command.clean
https://docs.python.org/3/library/shutil.html
https://docs.python.org/3/library/glob.html
