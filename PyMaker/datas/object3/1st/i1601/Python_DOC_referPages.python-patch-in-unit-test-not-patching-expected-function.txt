Natural Text
I've created a simplified project directory with the following structure:where the __init__.py files are all empty. Basically, the venmo_tests directory follows the 'structure' of venmo.The communications/push.py module containsThe send_push_to_user() is, in turn, invoked in the notify_user() function in venmo/communication/services/notification_service.py:I am trying to test this with the following unit test in venmo_tests/communication/services/test_notification_service.py:However, if I run this test from the command line, I get an error because the patch was not called:Although I'm using Python 2.7 in which mock is a separate package, as far as I can tell from the current documentation (https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch), this should be the correct way to use the patch() decorator.Any ideas what is wrong with this example?
Any ideas what is wrong with this example?Hum...a) Why do you duplicate the folder structure. You've made a package, just put a tests sub-package in it, then in your tests import the relevant parts of the outer package to exercise in tests, patch what you want, and that's it.b) Having communications and communication names is asking for trouble.c) Other modules (and yet using other modules) don't see the patch you've made in your module. You are patching a string that your module doesn't use.


Answer URL
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch
