Natural Text
In the future, I'll need to add many identical tests with different parameters. Now I am making a sample test suite:It gets discovered by VS Code:When I run the tests, I don't receive the parameter:If I run this file directly, everything works as expected (note param = 42 part)So it looks like VS Code is running the tests on its own just by using the discovered classes and ignoring TestSuite completely?What am I doing wrong?Thanks.
The problem is your code is in a if __name__ == "__main__" block which is only executed when you point Python directly at the file. So when the extension asks unittest to get all the tests and then run them for us it doesn't run the code in your if __name__ == "__main__" block (which is why it can find it but it doesn't do anything magical).If you can get it to work using unittest's command-line interface then the extension should run it as you want it to.
The key is to implement the load_tests function:The documentation says:If load_tests exists then discovery does not recurse into the package, load_tests is responsible for loading all tests in the package.Now my tests run as expected.P.S. Thanks to Brett Cannon for pointing me to Unit testing framework documentation


Answer URL
https://docs.python.org/3/library/unittest.html#command-line-interface
