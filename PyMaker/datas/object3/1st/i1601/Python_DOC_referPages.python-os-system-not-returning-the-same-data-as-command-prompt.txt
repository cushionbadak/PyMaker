Natural Text
I'm trying to write a script that will use netstat to check ephemeral ports on a windows machine.  When I test this script in the IDLE on Windows, it returns with a 0.Here is my code that I'm testing: Here is what happens when I try to run that in Python:]1Here's the output however when I run the same thing in command prompt.So why is Python outputting a 0 when there are clearly about 311 established connections on the Windows host?  What am I missing?
The os.system function returns the exit status of the command.Not the output of the command. You should be using the subprocess module instead. Then you can capture the output.
The return value from an executable process is not the same as its output. By convention a process returns 0 to indicate success and anything else to indicate failure. When you run a command from the command line, thbe return value is not typically printed. To capture the output, you need to redirect stdout.
The following code gave me exactly the output I was intending.I'm not sure the difference exactly between check_output and Popen, but Popen and .communicate()[0].decode('utf-8').strip()) were the keys.


Answer URL
https://docs.python.org/3/library/os.html#os.system
https://docs.python.org/3/library/subprocess.html#replacing-os-system
