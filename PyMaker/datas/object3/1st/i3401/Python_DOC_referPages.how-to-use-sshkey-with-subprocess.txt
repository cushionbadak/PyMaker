Natural Text
I'm trying to connect to a router over ssh and write a command to the shell.I think the connection works, because I get an empty output and not an error message. I know that I have to use a keyfile to connect really on the device. Maybe that's the reason why the output is empty.This is my code:Where should I integrate the keyfile?I feel like checked every page google let me find and even in the subprocess python doc I couldn't find anything. Is this even possible? I'm using Python 3. 
Some pointers:First of all port is not given after :, It it given with -p optionIf key is required then you have to specify it using -i option. Make sure permissions on the key are 0400.You are giving remote command as a list and also giving shell=True these are in a way mutually exclusive options. If you want use shell=True then you give command as a single string.If want to collect output of a remote command simply use subprocess.check_output. It uses popen() function inernally but gives you simpler interface. Don't forget try/except around the function as it raises exception if something went wrong with ssh itself or the remote command's exit status is non-zero.Your code may look like:Look at my implementation of executing remote commands if you want to see some of the good practices for executing remote commands.PS: There are two different ways of using subprocess functions: one which require a shell to execute your command for eg if the remote command has a wildcard(ls *.txt) OR your remote command does not require the shell for eg executing uname -a. Please look at the subprocess documentation link above.
Use the -i flag to specify an identity file. See the ssh manual under identity_file In your example, that would beThere are also high level SSH libraries available for Python.
Try:Popen expects an array of arguments formatted in a certain way.The easiest way to get a proper arg table is to do it like this:


Answer URL
https://docs.python.org/3/library/subprocess.html#subprocess.check_output
