Natural Text
I have some fairly hairy unicode strings with numbers in them that I'd like to test the value of.  Normally, I'd just use str.isnumeric to test for whether it could be converted via int() but I'm encountering cases where isnumeric returns True but int() raises an exception.Here's an example program:Unicode is always full of surprises, so I'm happy to just be robust to this case and use a try/except block to catch unusual numbers.  However, I'd be happier if I could still convert them to integers.  Is there a consistent way to do this?
If you want to test if a string can be passed to int, use str.isdecimal. Both str.isnumeric and str.isdigit include decimal-like characters that aren't compatible with int.And as @abarnert has mentioned in the comments, the most guaranteed way to test if a string can be passed to int is to simply do it in a try block.On the other hand, '‚íç' can be converted to an actual digit with the help of the unicodedata module, e.g.would output 6.
I don't know how much luck you'll have, but unicodedata may handle some cases (python 3 code):Slightly better. As to testing, if you want an int you could just int() it and catch the exception.
The best way to find out if a string can be converted to int is to just try it:Sure, you can try to figure out the right way to test the string in advance, but why? If the rule you want is "whatever int accepts", just use int.If you want to convert something that is a digit, but isn't a decimal, use the unicodedata module:The DIGIT SIX FULL STOP character's entry in the database has Digit and Numeric values, despite being a Number, Other rather than a Number, Decimal Digit (and therefore not being compatible with int).


Answer URL
https://docs.python.org/3/library/unicodedata.html#unicodedata.decimal
