Natural Text
I am trying to plot a seaborn histogram on a Kaggle notebook in this way:but I get this error:Thi is the Kaggle notebook: https://www.kaggle.com/asindico/slice-indices-must-be-integers-or-none/here is the series head:
As @ryankdwyer pointed out, it was an issue in the underlying statsmodels implementation which is no longer existent in the 0.8.0 release.Since kaggle won't allow you to access the internet from any kernel/script, upgrading the package is not an option. You basically have the following two alternatives:Use sns.distplot(myseries, bins=50, kde=False). This will of course not print the kde.Manually patch the statsmodels implementation with the code from version 0.8.0. Admittedly, this is a bit hacky, but you will get the kde plot.Here is an example (and a proof on kaggle):Why does it work? Well, it relates to the way Python loads modules. From the Python docs:5.3.1. The module cacheThe first place checked during import search is sys.modules. This mapping serves as a cache of all modules that have been previously imported, including the intermediate paths. So if foo.bar.baz was previously imported, sys.modules will contain entries for foo, foo.bar, and foo.bar.baz. Each key will have as its value the corresponding module object.Therefore, the from statsmodels.nonparametric import kdetools is inside this module cache. The next time seaborn acquires it, the cached version will be returned by the Python module loader. Since this cached version is the module that we have adapted, our patch of the revrt function is used. By the way, this practice is very handy when writing unit tests and is called mocking. 
This error appears to be a known issue. https://github.com/mwaskom/seaborn/issues/1092Potential Solution -> update your statsmodels package to 0.8.0 pip install -U statsmodels
From the seaborn issue from @ryankdwyer, it sounds like a bug in the kde. Try turning it off with kde=False.


Answer URL
https://docs.python.org/3/reference/import.html#the-module-cache
