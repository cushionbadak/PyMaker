Natural Text
This is a follow-on question to this question.I would like to automate the import of classes from a django models.py file and then register each with admin.site.register().  Here is my code:This code throws a TypeError: 'type' object is not iterable.  The OP marked this question as answered and I've found several other examples where this code is presented.  I've also reviewed the documentation here and didn't see anything that would indicate that this is wrong.Full Traceback:After runserver a second time there is a new warning - but that wasn't part of the original error.  I included everything for reference.  The p_item is a class object in models.pyFinal EditThe warning noted above was a result of a sloppy cut/paste that duplicated a class.  It is irrelevant to the original question or the answer below.
At a guess, there are not only django.db.models.Model classes imported. Probably, your local models module contains a few more items, including other classes (which makes the if inspect.isclass pass). You may want to perform an additional issubclass(obj, django.models.Model) or similar check.The fact that it works in the linked question, suggests you have additional code in your local models.py module, possibly through from imports (making it hard to notice). But an additional check to see that obj is an actual Django model (as mentioned above), is probably safer than trying to remove that extra code.All in all, try the following (untested):


Answer URL
https://docs.python.org/3/library/inspect.html
