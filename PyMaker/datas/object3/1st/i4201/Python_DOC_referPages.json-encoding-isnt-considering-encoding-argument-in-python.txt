Natural Text
Trying to encode a json file using the utf catalog (utf-8-sig), with this codeBut it appears that the encoding argument is being ignored throwing this errorEdit: the datatype of the file data.json is <class '_io.TextIOWrapper'>, and here's the full stack:Edit2:Binary sample of the file using print(open("data.json"), "rb").read(180)b'{"abandoned industrial site": ["Site that cannot be used for any  purpose, being contaminated b y pollutants."], "abandoned vehicle":  ["A vehicle that has been discarded in the envir'
As @tdelaney pointed out in comments, you are looking the wrong problem:The error in not on open, nor in json.read, not in the data.items() iteractor, so it is not a decoding problem, between utf-8-sig and unicode string.But the problem is in print. The problem is encoding, so it means that the error is between unicode string in python and a resulting binary encoding. In this case, the unicode string is converted into ascii, but ascii cannot represent all original characters.There are two solutions:you can allow your terminal to accept UTF-8 characters. This could by done by setting e.g. LANG=C.UTF-8 (supported only on few systems) or LANG=en_US.UTF-8 or other locales (check on your system what locales support UTF-8).you force print to print only ascii, as proposed by @tdelaney print(k.encode('ascii', 'replace'), v.encode('ascii', 'replace')). You may want to change replace with backslashreplace or ignore. (see https://docs.python.org/3/library/codecs.html#codec-base-classes).There are also hybrid solution (but not really safe and portable on all systems) (like forcing python to output in a particular encoding), and many hacks, but it will make your code complex, so I do not recommend it (and you should wrap them in a new function).


Answer URL
https://docs.python.org/3/library/codecs.html#codec-base-classes
