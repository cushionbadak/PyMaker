Natural Text
I implemented the Server-Client example in Python 3.5 from https://docs.python.org/3.5/library/socketserver.html. The Example works for the first message in the loop but the server sends always a FIN-Flag and i don't understand why.server:client:Wireshark:
It all lies in socketserver.py ([Python]: socketserver â€” A framework for network servers) and few other places: I'm going to use version 3.5.4 as a reference (doc quotes will be version 3 specific):BaseServer.serve_forever(self, poll_interval=0.5)(#215) calls _handle_request_noblock(#234):BaseServer._handle_request_noblock(self)(#306) calls process_request(#313):BaseServer.process_request(self, request, client_address)(#335) calls shutdown_request(#342):TCPServer extends BaseServer(#370):TCPServer overrides shutdown_request(#489):request.shutdown(socket.SHUT_WR)request is a socket.socket ([Python]: Socket Objects) instancesocket.socket.shutdown is defined in ${PYTHON_SRC_DIR}/Modules/socketmodule.c(#3986):As seen, it calls native shutdown API:Ux: [man]: SHUTDOWN(2)Win: [MSDN]: shutdown functionAccording to the MSDN link above (didn't find official Ux related doc, but I can't say I tried very hard searching):If the how parameter is SD_SEND, subsequent calls to the send function are disallowed. For TCP sockets, a FIN will be sent after all data is sent and acknowledged by the receiver.Note (Ux <-> Win conversion): SHUT_* and SD_* corresponding constants have the same values (e.g. SHUT_WR = SD_SEND = 1)


Answer URL
https://docs.python.org/3/library/socketserver.html
