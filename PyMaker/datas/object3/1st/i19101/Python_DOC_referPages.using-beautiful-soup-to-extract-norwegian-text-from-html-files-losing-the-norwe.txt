Natural Text
I have a Python script that uses Beautiful Soup to extract the text from HTML files in a directory. However, I'm having trouble getting the encoding to work properly. At first I though there may be a problem with the HTML files themselves. However, when I view the source of an HTML file in Notepad.exe, I for instance see this: Vi er her for deg, og du må gjerne ta kontakt med oss på 815 32 000 eller på Facebook om du har noen spørsmål.However, when I view the same HTML file in Internet Explorer, I see this: Vi er her for deg, og du mÃ¥ gjerne ta kontakt med oss pÃ¥ 815 32 000 eller pÃ¥ Facebook om du har noen spÃ¸rsmÃ¥l.And, the Internet Explorer text is the same text that my Python script appends into my text file. So, obviously the encoding is detectable, and it's no surprise that IE doesn't understand it, but I can't seem to figure out why Python can't handle it. The encoding should be latin-1, which I thought wouldn't be a problem. Here's the code I have:Being as that seems to break the encoding, I thought I could pass latin-1 encoding, like so:But that gives me the error:
.prettify() already returns bytes, so you just write that directly to the file, but you have to open that file in binary mode (note the 'ab' mode used below):There is no need to call myfile.close(); the with statement already takes care of that.To save only the text, open the file in text mode ('a') and specify the encoding to use on save:Now Python will automatically encode the unicode text to latin-1 for you.When you see something like Ã¥ instead of å, then you are interpreting UTF-8 bytes as Latin-1.You may want to read up on Python and Unicode:The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!) by Joel SpolskyThe Python Unicode HOWTOPragmatic Unicode by Ned Batchelder


Answer URL
