Natural Text
I'm trying to make a script that gets data out from an sqlite3 database, but I have run in to a problem.The field in the database is of type text and the contains a html formated text. see the text belowand the python code that try to extract the data is as follows.Does anybody have any idea of how to print/write this to a file. Yes I know that this is printed to stdout, but I get the same UnicodeEncodeError when I try to write to a file. I tried both write method of a file object and print(r['body'], file=f).
When you open the file you want to write to, open it with a specific encoding that can handle all the characters.
Maybe a little late to reply. I happen to run into the same problem today. I find that on Windows you can change the console encoder to utf-8 or other encoder that can represent your data. Then you can print it to sys.stdout.First, run following code in the console:Then, start python do anything you want.
While Python 3 deals in Unicode, the Windows console or POSIX tty that you're running inside does not. So, whenever you print, or otherwise send Unicode strings to stdout, and it's attached to a console/tty, Python has to encode it.The error message indirectly tells you what character set Python was trying to use:This means the charset is cp850.You can test or yourself that this charset doesn't have the appropriate character just by doing '\u2013'.encode('cp850'). Or you can look up cp850 online (e.g., at Wikipedia).It's possible that Python is guessing wrong, and your console is really set for, say UTF-8. (In that case, just manually set sys.stdout.encoding='utf-8'.) It's also possible that you intended your console to be set for UTF-8 but did something wrong. (In that case, you probably want to follow up at superuser.com.)But if nothing is wrong, you just can't print that character. You will have to manually encode it with one of the non-strict error-handlers. For example:So, how do you print a string that won't print on your console?You can replace every print function with something like this:… but that's going to get pretty tedious pretty fast.The simple thing to do is to just set the error handler on sys.stdout:For printing to a file, things are pretty much the same, except that you don't have to set f.errors after the fact, you can set it at construction time. Instead of this:Do this:… Or, of course, if you can use UTF-8 files, just do that, as Mark Ransom's answer shows:


Answer URL
