Natural Text
I'm attempting to:load dictionaryupdate/change the dictionarysave(repeat)Problem:  I want to work with just 1 dictionary (players_scores) but the defaultdict expression creates a completely seperate dictionary.How do I load, update, and save to one dictionary? Code:
You are wiping your changes; instead of writing out your file, you read it anew and the result is used to replace your players_scores dictionary. Your defaultdict worked just fine before that, even if you can't really use defaultdict here (ast.literal_eval() does not support collections.defaultdict, only standard python literal dict notation).You can simplify your code by using the json module here:You don't need defaultdict here at all; you are only creating new dictionary for every player name anyway.
I think one problem is that to index the data structure the way you want, something like a defaultdict(defaultdict(dict)) is what's really needed â€” but which unfortunately it's impossible to specify one directly like that. However, to workaround that, all you need to do is define a simple intermediary factory function to pass to the upper-level defaultdict:Then you can use players_scores = defaultdict(defaultdict_factory) to create one.However ast.literal_eval() won't work with one that's been converted to string representation because it's not one of the simple literal data types the function supports. Instead I would suggest you consider using Python's venerable pickle module which can handle most of Python's built-in data types as well custom classes like I'm describing. Here's an example of applying it to your code (in conjunction with the code above):


Answer URL
