Natural Text
I have a recursive nested defaultdict class defined assitting in a nested_dict.py file.When I try to pickle it, e.g.I get TypeError: __init__() takes 1 positional argument but 2 were given.What's exactly happening here? 
The defaultdict class implements a object.__reduce__() method where the second element of the returned tuple (the arguments for the constructor) is always going to be the factory object:That argument is then passed to the NestedDict() call to re-build the object. The exception is thrown because the NestedDict class doesnâ€™t accept an argument. You can override the __reduce__ method in your subclass:The above produces the exact same elements defaultdict.__reduce__() returns, except that the second element is now an empty tuple.You could also just accept and ignore a single argument:The _ name is commonly used to mean I am ignoring this value.An alternative implementation could just subclass dict and provide a custom __missing__ method; this method is called for keys not in the dictionary:This works exactly like your version, but doesn't need additional pickle support methods:


Answer URL
https://docs.python.org/3/library/pickle.html#object.__reduce__
https://docs.python.org/3/reference/datamodel.html#object.__missing__
