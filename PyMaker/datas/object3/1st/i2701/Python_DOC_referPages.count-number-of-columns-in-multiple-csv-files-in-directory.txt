Natural Text
I have a directory that contains a large number of CSV files (more than 1000). I am using python pandas library to count the number of columns in each CSV file.But the problem is that the separator used in some of CSV file is not  only"," but "|" and ";"How to tackle this problem:I am storing it as a dictionary.I am getting an error like: Error could possibly be due to quotes being ignored when a multi-char delimiter is usedI have used sep=None, but that didn't work. Edit  :One of the csv is like this :Number|CommentText|CreationDate|Detail|EventDate|ProfileLocale_ISO|Event_Number|Message_Number|ProfileInformation_Number|Substitute_UserNo|User_UserNoSecond one is like:Number,DescriptionI can't reveal the data. I have just given the column name as the data is sensitive. UpdateAfter a little bit of tweaking and using print status to figure out using the code of andrey-portnoy, I came to know that csv sniffer was identifying the delimiter for "|" as "e" so using an if statement I changed it back to "|". Now it is giving me correct output.Also in place of read() , I used readline() . in following line of code in Andrey's answer : dialect = csv.Sniffer().sniff(csvfile.read(1024))But the problem remains unsolved. I was able to figure out this after a lot of inspection but every time I may not be correct to guess and this can lead to error.  Any help will be awaited.
By specifying the separator as sep=",|;|\|", you make that whole string a separator. Instead, you want to use the Sniffer from the csv module to detect the CSV dialect used in each file, in particular the delimiter.For example, for a single file example.csv:Don't enable the Python engine by default, as it is much slower.


Answer URL
https://docs.python.org/3/library/csv.html#csv.Sniffer
