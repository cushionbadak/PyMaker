Natural Text
I am wanting to unittest a component of my application. The code looks a little like below.The problem I am having is that I cannot mock the open() functionality within a for loop.What I am aiming for is a unittest like this: (I know this code is not right but its just an example of what I am trying to do):
You can mock open() to return StringIO object.mymodule.py:Note that I've used with statement there.test_mymodule.py:Works for python3.4.At first I tried to use mock.mock_open(read_data='1\n2\n3\n') but iteration support seems to be broken.
There are two easy options available:Change read_content_generator to take a file, not a file name, and mock that with an io.StringIO.Make a temporary file. There are good modules for this.


Answer URL
https://docs.python.org/3/library/tempfile.html#tempfile-examples
