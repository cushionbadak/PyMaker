Natural Text
It appears that shutil.rmtree is not synchronous on Windows, as I've had the second line in the following code raise an error that the directory already existsWe see a similar issue in .NET on windows - see this question . Are there any good options to deal with this in python other than polling to see if the folder really is gone?
If you're okay with the folder still existing, and you're on Python 3, you can do pass exist_ok=True to os.makedirs, and it will ignore the case where you try to make a directory that already exists:Failing that, you're stuck polling. Run your code in a loop (ideally with a small sleep to avoid hammering the disk), and don't end the loop until the makedirs finishes without error:On Python 3.3+, you can probably change:to just:as there is a specific exception type for "file exists" which you can catch directly (and let all other OSError/WindowsError exceptions propagate without interruption).


Answer URL
https://docs.python.org/3/library/os.html#os.makedirs
