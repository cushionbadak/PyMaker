Natural Text
While writing some debugging python, I seem to have created a bit of ugly code that I would like to clean up.Here is the function in its entirety:I specifically despise my try-except statement, because not only am I repeating code, but if I run into another dictionary class (like CaseInsensitiveDict from requests' headers) that I would like to print nicely during debugging output I would have to nest try-except statements.  Is there a way that I could check if type(variable) is like *dict* or *list* then add it when creating the tuple for use in isinstance?
You want to look at the @functools.singledispatch() construct; this lets you delegate to specific functions to handle your debugging, keyed on types:singledispatch knows how to delegate for subclasses that don't have specific handlers; so OrderedDict is handled by the _as_json handler because it is a subclass of dict.


Answer URL
https://docs.python.org/3/library/functools.html#functools.singledispatch
