Natural Text
See the following ipython session:What is going on here? Why does defining __new__ in foo prevent the __init__ from running in bar?
You are returning an invalid value from __new__.  Quoting the documentation:If __new__() returns an instance of cls, then the new instance’s __init__() method will be invoked ... If __new__() does not return an instance of cls, then the new instance’s __init__() method will not be invoked.Note that the first argument to __new__ is a class, not an object. __new__'s job is to allocate the object, often by calling super().__new__.Try this:
From the datamodel documentation:If __new__() does not return an instance of cls, then the new instance’s __init__() method will not be invoked.So, try again like this:
Your __new__ function signature implies you don't quite understand what is going on. The first argument to __new__ will be the class, calling it self which is conventionally used for the instance should be a warning: __new__ is a constructor, the instance doesn't exist yet. So what happens is you are returning an object that isn't the same type as the class, (it is the class in fact, so it is of type type) thus, __init__ is skipped! You want something like this:


Answer URL
https://docs.python.org/3/reference/datamodel.html#object.__new__
https://docs.python.org/3/reference/datamodel.html#object.__new__
