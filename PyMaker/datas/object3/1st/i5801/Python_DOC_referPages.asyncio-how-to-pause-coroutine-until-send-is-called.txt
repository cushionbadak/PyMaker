Natural Text
Lets say that I have a bus that receives messages from somewhere. Every message has target and msg, and I want to implement subscription mecahnism, so other coroutines can subscribe to specific target My question is regarding the wait_for_messages, Even though sleep kind of works (the code is for presentation only), How can I await for the send command without sleeping and awaking constantly.
Subscription mechanism is from callback world and asyncio.Future - is some sort of bridge from callback-based to coroutine-based world: with it you can await of something happened. Use set_result on msg coming and await for Future to recieve msg inside coroutine.For example:Output:


Answer URL
https://docs.python.org/3/library/asyncio-task.html#asyncio.Future
