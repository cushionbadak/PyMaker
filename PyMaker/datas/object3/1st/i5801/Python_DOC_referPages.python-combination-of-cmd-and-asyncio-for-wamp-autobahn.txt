Natural Text
OverviewI am trying to implement a simple command-line interface for a WAMP application.For the WAMP implementation, the autobahn python package is used.I would like to have an interactive shell so I decided to use the cmd module to parse the input. Unfortunately, I have not been able to combine the asyncio nature of autobahn with the cmd loop.CodeSo in general what I would like to have is something similar to this:This obviously can not work since the result is not ready when result() is called on the future, but I can not use await since the Shell is not async itself.Solution AttemptsI have found asynccmd but I could not work out how to use it with autobahn and I am in general still a bit overwhelmed by the internals of asyncio.Using a simple loopinside the onJoin function works perfectly fine, so I feel like there has to be a simple and lean solution for my problem as well.Any suggestions would be much appreciated!
It turns out that there already is a solution for this problem.autobahn has two versions, one using aysncio and one using asynchronous callbacks from twisted.The package crochet allows the usage of twisted-callbacks from a synchronous context and therefore offers a solution.Simple SolutionThe package autobahn-sync is a crochet-wrapper for autobahn and makes calling an RCP from within cmd.Cmd (or anywhere else) trivial:


Answer URL
https://docs.python.org/3/library/cmd.html
