Natural Text
I want to make an @pure decorator for Python, part of this is being able to selectively disallow access to the global scope of the function.Is there a way to programmatically change which dictionary thing serves as a function's global/external scope?So for instance in the following I want to be able to intercept the access to f in h and throw an error, but I want to allow access to g because it's a pure function.
You would have to create a new function object from the old one:Here, cleaned_globals is a dictionary that is to be used as the global namespace for the newly created function object. All other arguments echo the original function's.cleaned_globals could be based on a copy of h.__globals__, of course.Demo:


Answer URL
