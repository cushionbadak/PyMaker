Natural Text
I'm writing a script that creates an html file, and then will need to host it, visit the local host, and take a screenshot. I can get it to do all of those things, but the only problem is that it won't try to take the screenshot until it gets a return from the command that starts the server. Meaning that the server will be closed already. I've tried solving this using asyncio, but it still doesn't seem to work. Here's the part of the code I'm having trouble with:await doesn't seem to work on the command to start the server. I have also tried using subprocess.call('python -m http.server', creationflags=0x00000008) as well as subprocess.call('python -m http.server', creationflags=0x00000010) to detach the server hosting process to another shell, but python still waits for it to return before continuing. (As a side note be careful if you decide to test those because 0x00000008 will be hidden when it runs and it's easy to forget about).Does anyone know if there's a way to have one script do this, or will I have to create a second application to run the server while the screenshot is taken?
Consider using threads to run both functions at the same time, that way the server function won't block the screenshot one:The above printed:You may also need to delay the screenshot function call to allow for the server to start up which you could do crudely with a time delay, for example.
I think what you want to get a snapshot as connecting own your url. arn't you?I run the following code in 3.6 python. not 2.7 python.Because I think, your code wrote in 2.7 python.I hope to help for your problem.


Answer URL
https://docs.python.org/3/library/asyncio-subprocess.html#asyncio.create_subprocess_shell
