Natural Text
I just begin to learn python now. Below is some code I tried to test.My question is:Now, these code has an error:name student2dict is not defined, when running to std_data line.Can somebody help me figure it out and how to fix it? thanks a lot.
The problem with your existing code is that you don't have a global function (or anything else) named student2dict, because you indented it under the class Student definition.Just dedent it, and it will work:However, it seems like you wanted it to be a method, not a plain function:before I tried to use default=s.student2dict instead of dedault=student2dictA normal method needs a self parameter. That's how it knows which instance you're calling it on. The error you got was presumably about calling student2dict with two arguments (the s from s.student2dict, and the same s again passed in by json.dumps) when it only wanted one (std).You could fix this:And now you could pass default=s.student2dict and it would work.But this really isn't a very good design. If you're not actually using self for anything, you're not really writing an instance method.(You could make it a static method, because they neither get nor need a self, but I don't see any point to doing that here. If that's what you want, a global function probably makes more sense.)Butâ€¦ what if you got rid of std, and used self instead?Now, you don't want to pass s.student2dict, because that's a bound method, owned by the instance s. It can't be called with an argument, because the argument is already bound in. You're going to get the same error about two arguments instead of one.What you want is an unbound method, which you get by referencing it on the class, rather than the instance, so that it can be called later with any instance. like this:This works, because Student.student2dict(s) does the same thing as s.student2dict(). So, if you pass that Student.student2dict to the json.dumps, when it calls that on s, you get exactly what you wanted.


Answer URL
https://docs.python.org/3/library/functions.html#staticmethod
