Natural Text
I'm just learning Python, and do not understand the behavior I am getting from my reduce function. I have seen many examples where you can use reduce to perform an equivalent function to sum when you want to multiply:That gives me the value I expect. But I need to multiply by all the reciprocals instead. I thought I could do this:But it comes out as 1.5 instead of some much smaller decimal answer. What am I doing wrong?
The x on each call is the result of the last call (it's only one of the direct inputs on the very first invocation), so doing 1 / x each time takes the reciprocal of the previous result. To fix, you need to change the lambda to only multiply in the reciprocal of the new number, not the accumulated value. You also need to provide an initial neutral value (1) so that the first value in f has its reciprocal taken properly (otherwise, it would be the plain value of f[0] multiplied by the reciprocals of f[1:]):That said, you can simplify a little more; x * (1 / y) is (roughly, given floating point precision issues) equivalent to x / y, so you could simplify further to:or using the operator module to push all the work to the C layer (only important if f might be really big):Either way, this gets the expected result:


Answer URL
https://docs.python.org/3/library/operator.html#operator.truediv
