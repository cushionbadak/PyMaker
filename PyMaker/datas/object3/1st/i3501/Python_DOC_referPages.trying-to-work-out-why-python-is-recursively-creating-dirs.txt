Natural Text
I have a directory containing many subdirectories. Here is my code:It creates the directory inside each subdirectory okay, but then in the first subdirectory in the list it keeps making xml dirs inside xml dirs recursively until:
The dirs value yielded from os.walk represents the list of directories that are traversed in the following iterations (see this for an example of why that's useful). Each time you create a new xml folder in a directory from dirs, os.walk later enters your new directory and creates more xml folders since the ones you created are empty.Try making the check at the root level instead. For example:Another way to get around this is to prune dirs by removing all directories that you've already created xml folders in. Like this:
Directories are traversed from top down by default.  Since you create directories in subdirectories, you keep finding more directories.  Search bottom-up instead with:Since the search will start in the deepest directories, adding a deeper xml directory won't affect the iteration.Quote from the documentation:If optional argument topdown is True or not specified, the triple for  a directory is generated before the triples for any of its  subdirectories (directories are generated top-down). If topdown is  False, the triple for a directory is generated after the triples for  all of its subdirectories (directories are generated bottom-up). No  matter the value of topdown, the list of subdirectories is retrieved  before the tuples for the directory and its subdirectories are  generated.When topdown is True, the caller can modify the dirnames list in-place  (perhaps using del or slice assignment), and walk() will only recurse  into the subdirectories whose names remain in dirnames; this can be  used to prune the search, impose a specific order of visiting, or even  to inform walk() about directories the caller creates or renames  before it resumes walk() again. Modifying dirnames when topdown is  False has no effect on the behavior of the walk, because in bottom-up  mode the directories in dirnames are generated before dirpath itself  is generated.Also FYI, os.path.join() is a cleaner way to join directories together, e.g. os.path.join(root,dirname,'xml').


Answer URL
https://docs.python.org/3/library/os.html#os.walk
