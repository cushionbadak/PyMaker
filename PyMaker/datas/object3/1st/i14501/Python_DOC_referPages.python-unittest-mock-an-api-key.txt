Natural Text
I'm writing unit tests for the Client class of client.py, which queries an API. Each test instantiates the client with c = client.Client("apikey"). Running one test at a time works fine, but running them all (e.g. with py.test) I get a 401: "Exception: Response 401: Unauthorized Access. Requests must contain a valid api-key."I have a valid API key but this should not be included in the unit tests. I would appreciate an explanation of why "apikey" works for only one query. More specifically, how can I mock out the calls to the API? Below is an example unit test:
Separate out the tests for API calls and for the Client.getContext() method. For explicitly testing the API calls, patch a request object...And for testing getContext(), mock out the HTTP with httpretty...


Answer URL
https://docs.python.org/3/library/unittest.mock.html
