Natural Text
Why is my client timing out at code line:response = yield from asyncio.wait_for(reader.read(), timeout=3.0)instead of getting a message back?The server piece only registers it got a message from this client after the client times out and I actually issue a ctrl + d to kill the Python interpreterclient.py
The problem is likely that you're calling reader.read() on the server-side (and also on the client-side), which will block until an EOF is sent from the server. But presumably you're not doing that - you're just sending some bytes over and keeping the connection open.Instead, you need either to call readline() and make sure to append b'\n' to your mess payloads, call read with some size to limit the number of bytes you wait for, or call writer.write_eof() after writing your message payload, assuming you don't plan to use the writer anymore. Using readline() or write_eof are probably your safest options. Here's a complete example demonstrating using readline():client.pyserver.pyAnd here are the changes to use write_eof():client.pyserver.py


Answer URL
https://docs.python.org/3/library/asyncio-stream.html#asyncio.StreamWriter.write_eof
