Natural Text
python: 3.6.6python-telegram-bot: 10.0.2I have this problem: I have defined a python logger with a SMTPHandler, a TimedRotatingFileHandler and a StreamHandler. The StreamHandler works fine, but when I try to use it from a python-telegram-bot handler, the line is being printed twice on the standard output with two different formats and I can't find out how to avoid one and get the another one (the timed one) to remain.I have discovered the cause. When adding a ConversationHandler with a CallbackQueryHandler, this message is shown when starting.And then the unwished log line appears every time.The code is here below as log_config.py . I have added also the sample code for testing my_main_file.py and the current output as a multiline comment.config/log_config.py:my_main_file.py:
telegram.ext.ConversationHandler includes several logging calls that use logging.warning instead of the self.logger logger they probably should use, such as this call:logging.warning and the other module-level logging convenience functions call logging.basicConfig, which adds a handler to the root logger if no handlers on the root logger are present. This handler is the one responsible for the unwantedlogging output.The use of logging.warning instead of self.logger.warning should probably be considered a python-telegram-bot bug. I don't see an open issue for it on their issue tracker, so you might want to file a bug report.In the meantime, or if the python-telegram-bot developers decide the behavior is fine, you can add a null handler to the root logger to prevent basicConfig from adding its own handler. This must be done before the ConversationHandler is created, to preempt the basicConfig:


Answer URL
https://docs.python.org/3/library/logging.html#logging.log
