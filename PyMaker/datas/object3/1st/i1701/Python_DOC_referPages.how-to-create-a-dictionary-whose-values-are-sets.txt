Natural Text
I'm working on an exercise that requires me to build two dictionaries, one whose keys are country names, and the values are the GDP. This part works fine.The second dictionary is where I'm lost, as the keys are supposed to be the letters A‚ÄêZ and the values are sets of country names. I tried using a for loop, which I've commented on below, where the issue lies.If the user enters a string with only one letter (like A), the program should print all the countries that begin with that letter. When you run the program, however, it only prints out one country for each letter.The text file contains 228 lines. ie:And here's my code.this for loop should spit out 248 values (one for each country), where the key is the initial and the value is the country name. However, it only spits out 26 values (one country for each letter in the alphabet)I'd appreciate any input leading me in the right direction.
Use defaultdict to make sure each value of your initials dict is a set, and then use the add method. If you just use = you'll be overwriting the initial keys value each time, defaultdict is an easier way of using an expression like:See the full working example below, and also note that i'm using enumerate instead of range(0,len(countries)), which i'd also recommend:Result:see: https://docs.python.org/3/library/collections.html#collections.defaultdict
The values for dictionary2 should be such that they can contain a list of countries. One option is to use a list as the values in your dictionary. In your code, you are overwriting the values for each key whenever a new country with the same initial is to be added as the value.Moreover, you can use the setdefault method of the dictionary type. This code:should be enough to create the second dictionary elegantly.setdefault, either returns the value for the key (in this case the key is set to the first letter of the country name) if it already exists, or inserts a new key (again, the first letter of the country) into the dictionary with a value that is an empty set []. editif you want your values to be set (for faster lookup/membership test), you can use the following lines:
Here's a link to a live functioning version of the OP's code online.The keys in Python dict objects are unique. There can only ever be one 'L' key a single dict. What happens in your code is that first the key/value pair 'L':'Liechtenstein' is inserted into dictionary_2. However, in a subsequent iteration of the for loop, 'L':'Liechtenstein' is overwritten by 'L':Luxembourg. This kind of overwriting is sometimes referred to as "clobbering".FixOne way to get the result that you seem to be after would be to rewrite that for loop:Also, you have to rewrite the related elif statement beneath that:ExplanationHere's a complete explanation of the dictionary_2[initials[i]] = dictionary_2.get(initials[i], set()) | {countries[i]} line above:dictionary_2.get(initials[i], set())If initials[i] is a key in dictionary_2, this will return the associated value. If initials[i] is not in the dictionary, it will return the empty set set() instead.{countries[i]}This creates a new set with a single member in it, countries[i].dictionary_2.get(initials[i], set()) | {countries[i]}The | operator adds all of the members of two sets together and returns the result.dictionary_2[initials[i]] = ...The right hand side of the line either creates a new set, or adds to an existing one. This bit of code assigns that newly created/expanded set back to dictionary_2.NotesThe above code sets the values of dictionary_2 as sets. If you want to use list values, use this version of the for loop instead:
You're very close to what you're looking for, You could populate your dictionaries respectively while looping over the contents of the file raw.txt that you're reading. You can also read the contents of the file first and then perform the necessary operations to populate the dictionaries. You could achieve your requirement with nice oneliners in python using dict comprehensions and groupby. Here's an example:You now have a list of all lines in the keywordFile as follows:As you loop over the items, you can split(':') and use the [1] and [2] index values as required.You could use dictionary comprehension as follows:Which results in:Similarly using groupby from itertools you can obtain:Which results in the required dictionary of initial : [list of countries]A complete example is as follows:Explanation:The line:loops over the following list['1:Qatar:98900', '2:Liechtenstein:89400', '3:Luxembourg:80600', '4:Bermuda:69900', '5:Singapore:59700', '6:Jersey:57000', '7:Libya:1000', '8:Sri Lanka:5000'] and splits each entry in the list by :It then takes the value at index [1] and [2] which are the country names and the per capita value and makes them into a dictionary.This line, extracts the name of all the countries from the dictionary created before into a list and sorts them alphabetically for groupby to work correctly.This lambda expression takes the input as the list of countries and groups together the names of countries where each x starts with x[0] into list(g).


Answer URL
https://docs.python.org/3/library/collections.html#collections.defaultdict
