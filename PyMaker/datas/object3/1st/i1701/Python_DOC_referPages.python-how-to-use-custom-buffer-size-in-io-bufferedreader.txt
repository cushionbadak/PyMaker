Natural Text
From what I understand, the buffer_size argument to io.BufferedReader is supposed to control the read buffer size passed to the underlying reader.However, I'm not seeing that behavior. Instead, when I reader.read() the entire file, io.DEFAULT_BUFFER_SIZE is used and buffer_size is ignored. When I reader.read(length), length is used as buffer size, and the buffer_size argument is again ignored.Minimal example:Outputs:Am I misunderstanding how the BufferedReader is supposed to work?
The point of BufferedIOReader is to keep an internal buffer, and you set the size of that buffer. That buffer is used to satisfy smaller reads, to avoid many read calls on a slower I/O device.The buffer does not try to limit the size of reads, however!From the io.BufferedIOReader documentation:When reading data from this object, a larger amount of data may be requested from the underlying raw stream, and kept in an internal buffer. The buffered data can then be returned directly on subsequent reads.The object inherits from io.BufferedIOBase, which states:The main difference with RawIOBase is that methods read(), readinto() and write() will try (respectively) to read as much input as requested or to consume all given output, at the expense of making perhaps more than one system call.Because you called .read() on the object, larger blocks are read from the wrapped object to read all data to the end. The internal buffer that the BufferedIOReader() instance holds doesn't come into play here, you asked for all the data after all.The buffer would come into play if you read in smaller blocks:


Answer URL
https://docs.python.org/3/library/io.html#io.BufferedReader
https://docs.python.org/3/library/io.html#io.BufferedIOBase
