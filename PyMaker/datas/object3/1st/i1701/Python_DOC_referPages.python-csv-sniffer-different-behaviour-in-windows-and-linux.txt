Natural Text
Within a wxpython application, I am using the following code to detect the 'dialect' of a csv file:The first lines of the csv file I am using this on are:The delimiter is supposed to be ';' and the quote char '"'I am aware that there are lots of commas, semicolons and quote chars to confuse the sniffer, but when running this code with python 3.6 on windows, it works perfectly.  Running it on Linux (also with python 3.6) invariably raises the csv.Error (also on other csv files with the same delimiters and quote chars). I have tried this with read(1024), with other values and also with readline, but always get the same results.Any explanation for this different behaviour ?
The default end-of-record delimiter is different between windows and linux. Commonly, records will be terminated with a CR-LF "pair" on windows, while on *nix, a single LF is the norm. It may be the case that your sniffer might be fixing itself in windows-mode, and needs assistance in deciding what the real line-terminator should be. From the docs it seems that sniffer defaults to /r/n which I think is windows-flavoured. It should cope with alternate line-terminators, but perhaps something is being forced somewhere. If your record-lengths in your data file are longer than 1024, or there's not enough to sample a line-terminator enough times to correctly guess the format, that might have something to do with it. 
Finally found the cause of this error.  It is not related to the newline endings.  I am using Python 3.6.4, and have discovered that csv.py has a bug in this version: the regex on line 220 says:but it should be: as of python 3.6.5. the bug seems to be fixed


Answer URL
https://docs.python.org/3/library/csv.html#csv.Dialect.lineterminator
