Natural Text
I am brand new to python frame introspection and I am trying to set a profiler or a tracer in order to keep track of str function calls.  I have setup tracers in various ways but think I am missing some key understandings around frame introspection and how to get builtin function names (ie str)When I run test_trace() I see no mention of any str calls in any of the profiled events.  I would expect to see some mention of str or <string> in some of the call stacks but only see the random calls:I've seen string calls in the python builtin profiles so I tried to look at how they get the c function names, in case that str was delegating to a c call.I tried to get the c function calls by inspecting arg (both with setprofile and settrace but it didn't show any string calls eitherIs anyone familiar with how to trace the python str or built in calls.
When I run test_trace() I see no mention of any str calls in any of the profiled events.That's because str() is a type object defined entirely in C. Only function calls are traced, not type calls, so no c_call event is issued.You could work around this by replacing the str built-in; you can alter Python's builtins via the builtins module:You can now see traceable_str calls be passed to the profiling function.However, note that only calls from Python code to str() will be traced! Anything implemented in C, like the print() function, doesn't even call the str() builtin, it just uses the C API to achieve the same results.


Answer URL
https://docs.python.org/3/library/builtins.html
