Natural Text
I'm trying to make my WSGI server implementation compatible with both Python 2 and Python 3. I had this code:...with the relevant part being:Python 3 doesn't support that syntax anymore so it must be translated to:Problem: the Python 2 syntax generates a parse error in Python 3. How do I write code that can be parsed by both Python 2 and Python 3? I've tried the following, but that doesn't work:
You could do something creative.Have a check at the start of your code - your constructor or whatever, check what version of python you are using, since your normal version checker is not working, try this instead:Then the rest of your code can easily just reference this to know what to use.As for the parse errors, you can use exec in a function, like so:In your function you would write this:A bit messy, untested, but it should work, at least you understand the idea.
Can you use six? It exists to solve this very problem.See: https://pythonhosted.org/six/index.html#six.reraise


Answer URL
