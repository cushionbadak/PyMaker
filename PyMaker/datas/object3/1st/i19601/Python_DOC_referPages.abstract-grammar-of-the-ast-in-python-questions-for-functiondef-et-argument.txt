Natural Text
I'm trying to use the ast module in Python 3 to parse some Python code.For now I'm only coding a simple node visitor that will output the original code.I have difficulties to convert some nodes of the AST to actual code.On the grammar at http://docs.python.org/3.2/library/ast.html#abstract-grammar I do not understand what the expr? returns should beLooking at the full Python grammar ( http://docs.python.org/3.2/reference/grammar.html ) did not help me to understand what the optional element might be.Likewise for the argument of a function (or lambda function) declaration : I can identify :arg* args and expr* defaults : "basic" arguments and their default valuesidentifier? vararg and expr? varargannotation: used for the capture of a variable number of arguments (+annotation), such as def f(first, *others : 'annotation'):identifier? kwarg and expr? kwargannotation : same thing for named parametersbut I can't figure out what are arg* kwonlyargs and expr* kw_defaultsI'm looking for some sample code that would use these three features so I can understand their meaning/use.Thanks.
Old question, but still open. So:expr? returns is used for the return type hint of functions. E.g.results in an ast.Name instance with id = 'str' in the result field of the FunctionDef object. For more info on type hints see the documentation and PEP 484.As mentioned in a comment, arg* kwonlyargs are keyword-only arguments, i.e. keyword arguments that appear after the varargs. (The reasoning behind this is that you may want to define a function that accepts both a variable amount of arguments and optional keyword arguments at the same time. Kwargs appearing before the varargs cannot be optional as you have to explicitly specify all of them on the calling site before appending varargs.)expr* kw_defaults is a list of default values for each kwonlyarg. If a kwonlyarg has no default, it is represented by None in the list.


Answer URL
https://docs.python.org/3/library/typing.html
