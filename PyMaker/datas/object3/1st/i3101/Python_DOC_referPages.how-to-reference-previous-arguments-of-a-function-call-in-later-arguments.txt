Natural Text
This is in micropythonI'm creating an API to control some hardware. The API will be implemented in C with an interface in micropython.One example of my API is:I'd like to be able to achieve the same functionality but shorten the second path by somehow implicitly referencing the first argument:Is there anyway to do this?The only way to do something like this now would be and then put an upward pointing C-pointer on both the ON C-object and state C-object so that I know which entry in curr_chan is being referenced.The micropython runtime - and I assume CPython one - doesn't keep the entire object "tree" available to the developer in memory.
You could have special values for the second (state) argument which tell the function implementation to derive the state from the first argument.  You could also introduce a completely separate function which has this behavior.Or you could have a helper function which determines the state and passes it down to the set function, something like this:Here, state_ON would return a tuple (curr_chan.BipolarRange, curr_chan.BipolarRange.state.ON).In any case, there is no direct support for what you are trying to do in Python itself.
Pass the name of the attribute you want as the second argument. Call getattr (or PObject_GetAttr repeatedly to get each element of the .-separated string:


Answer URL
https://docs.python.org/3/library/functions.html#getattr
https://docs.python.org/3/c-api/object.html#c.PyObject_GetAttr
