Natural Text
I know i feel like an idiot asking this. But it looks like my virtual environment might have some issue or maybe i am missing something very basic.I am creating a new python project and unable to import any packages within the project.I have used following commands:This gives me following project structure. I don't think i have missed anything. I do have other projects in the same virtual environment and they are working fine.I have tried to append this path to PYTHONPATH sys.path as well. Neither did that work and i don't think i should be added the path at all.I have tried to do the same using pycharm as well and am getting same error.Am i missing something.If i use relative import then i get ValueError: Attempted relative import in non-packageI would be grateful for any help. Sorry i know it must be something stupid, its just i have spent alot of time without any success.Update: I am using Python 2.7
Your problem is that you're trying to run code from the middle of a package, while still trying to use it as part of a package. You can't do that.In Python, when you start the interpreter, the path to the script you're running, or the current working directory, gets added to sys.path.This means ~/Development/test_proj/test_package2/ is on your path, but ~/Development/test_proj/ is not. And of course there is nothing named test_package in ~/Development/test_proj/test_package2/, therefore there is no package named test_package and no module named test_package.test.If you really need to run a file out of a package, run it as a module, not as a script:Now, ~/Development/test_proj/ is on your path, and it contains a directory test_package, so you have a package named test_package and a package named test_package.test.If you want a script that's runnable as a script, write a wrapper script at the top level, which will from test_package2 import test2 and then call some function like test_package2.main() on it.Then you just run that wrapper script:Because it's in test_proj, not test_proj/test_package2, again, your path is exactly what you want.If you're building your package around setuptools so it can be distributable with pip, etc., you may want to specify entry points in setup.py and let it generate the entry-point scripts for you, instead of doing it manually. This way it can do the same thing at install time, and make sure the scripts end up placed somewhere accessible, rather than possibly in the middle of a .zip or .egg archive, and that they have a proper shbang line for the system they're installed on, and so on.I have tried to append this path to PYTHONPATH sys.path as well. If you add ~/Development/test_proj/ to PYTHONPATH, or manually add it to sys.path, it will work. My guess is that you either added the wrong thing, or forgot to tilde-expand it, but without seeing what you tried, that's just a guess; all I can say for sure is that you did something wrong.But at any rate, that's not the solution you want here. Because now the same file test2.py is (in addition to being the top-level script __main__) both the top-level module test2 and the packaged module test_package2.test2.It is illegal to put a package directory and its parent directory on sys.path. Practically speaking, no Python implementation actually tests for thatâ€”but it causes a whole world of confusion for no benefits, so you still don't want to do it.If i use relative import then i get  ValueError: Attempted relative import in non-packageYes, because the way you're running things, test2.py is the top-level script __main__, not the packaged module test_package2.test2. It's not in a package, so .. is illegal.But, after either of the fixes above, a relative path will work.


Answer URL
https://docs.python.org/3/library/sys.html#sys.path
