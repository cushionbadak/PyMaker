Natural Text
I am trying to teach myself Python's async functionality. To do so I have built an async web scraper. I would like to limit the total number of connections I have open at once to be a good citizen on servers. I know that semaphore's are a good solution, and the asyncio library has a semaphore class built in. My issue is that Python complains when using yield from in an async function as you are combining yield and await syntax. Below is the exact syntax I am using...Raising this Exception:Some possible solution I can think of...Just use the @asyncio.coroutine decoratorUse threading.Semaphore? This seems like it may cause other issuesTry this in the beta of Python 3.6 for this reason.I am very new to Python's async functionality so I could be missing something obvious.
You can use the async with statement to get an asynchronous context manager:Example taken from here. The page is also a good primer for asyncio and aiohttp in general.
OK, so this is really silly but I just replaces yield from with await in the semaphore context manager and it is working perfectly.


Answer URL
https://docs.python.org/3/library/asyncio-sync.html#semaphores
