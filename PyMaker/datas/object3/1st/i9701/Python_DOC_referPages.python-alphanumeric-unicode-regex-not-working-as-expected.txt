Natural Text
Trying to write a python regex that will validate a string comprised ofAny unicode alphanumeric character (including combining characters)Any number of space charactersAny number of underscoresAny number of dashesAny number of periodsMy test strings:or as string literals produced with ascii():These look identical but aren't, one is normalized and the other uses the combining characters for the inflections.Here's my first stab:If I remove the positional qualifiers and use findall instead of search I get lists like this ['9 Melodi', 'a.de_la-montan', 'a'] or ['9 Melod', 'a.de_la-monta', 'a'].I've even tried re.compile("^[\w\.\- ]+$", re.IGNORECASE | re.UNICODE) although that should be unnecessary in python 3 right?In searching for an answer I've found this question and this one and this one and this one but they are all old, deal with python 2, and seem to suggest that the regex I wrote should work. The python 3.5 regex docs mention that \w should match unicode but offer no actual examples involving non-ASCII text.How do I match the desired strings?
Your first sample, str1, matches just fine; \w includes all Unicode word characters, including Latin characters with accents.You can normalise your strings to the combined form with unicodedata.normalize(), use the NFC form:Note that the re.IGNORECASE flag is not needed, \w doesn't care about case.


Answer URL
https://docs.python.org/3/library/unicodedata.html#unicodedata.normalize
