Natural Text
I need a lot of small objects in my applications. They must be immutable and return a new instance when I set a new attribute.I found a lot of ways to disable the obj.prop = newValue behavior, now I need this:Currently I do this:Is this good in terms of perfomance? Are there any faster ways to return a clone of the object with some attributes changed?I use __slots__. My object has predefined properties. I have no generic .set(prop, value) methods(Python 3.5+ is welcome)
To gain true immutability, I would rather subclass collections.namedtuple and use the method _replace():I've benchmarked the performance of the swap() method in both classes, and the class derived from namedtuple is about 3-4 times faster in python 3. Here's the benchmark code:Results:
You can get a significant performance boost by defining a custom copy method for your objects:Test:Results:


Answer URL
https://docs.python.org/3/library/collections.html#collections.namedtuple
