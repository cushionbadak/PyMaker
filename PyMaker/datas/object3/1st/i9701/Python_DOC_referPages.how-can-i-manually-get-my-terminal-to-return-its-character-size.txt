Natural Text
Programs like resize ask the terminal about its size. And ultimately they will send some (ANSI) escape sequences to stdout and expect the terminal to react on those by itself returning some bytes.The effect of the mechanism is visible with this interactive Python snippet:Gnome-terminal will insert visibly something related to the window title on stdin.Which script snippet will provoke the terminal to write it’s size (in characters)? If the size is returned invisible, some simple transformation should be done to see something. Shell, Python, Perl, whatever language is fine. As this will be terminal specific, any common terminal emulator is fine (e.g. xterm, gnome-terminal, terminator, ...).Clarification: I don’t care about programs which tell me the size. I know about TIOCGWINSZ, which does not work over serial lines. I want to see code which uses escape sequences, which actually works over serial lines.
The following program saves the current cursor position; moves the cursor to 999,999; queries the terminal for the current position; and restores the cursor position.Assuming that your terminal is smaller than 999x999, this effectively queries the size of the terminal.Resources:https://en.wikipedia.org/wiki/ANSI_escape_codeVT100 ANSI escape sequences: getting screen size, conditional ANSI
I lifted this technique from the GNU source of stty(1) at http://code.metager.de/source/xref/gnu/coreutils/src/stty.c#1739.  I tested it on OS X, and I could not guarantee it would work elsewhere, but its worth a try.on my machine gives:Edit:  The source code for os.get_terminal_size is in Modules/posixmodule.c with a function called get_terminal_size.  One of the mechanisms is that shown above, but there are others depending on macros TERMSIZE_USE_IOCTL and TERMSIZE_USE_CONIO, the CONIO route is used for Windows. 


Answer URL
https://docs.python.org/3/library/os.html#os.get_terminal_size
