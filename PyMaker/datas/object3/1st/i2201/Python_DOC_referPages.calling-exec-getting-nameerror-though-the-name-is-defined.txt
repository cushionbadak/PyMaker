Natural Text
I have a file named file.py containing the following script:And I have another file named caller.py, which contains this script:When I run it, I get the expected output:However, if I change caller.py to this:I get the following error:How is function b() getting lost?  It looks to me like I'm not violating any scope rules.  I need to make something similar to the second version of caller.py work.
exec(text) executes text in the current scope, but modifying that scope (as def b does via the implied assignment) is undefined.The fix is simple:This causes text to run in an empty global scope (augmented with the default __builtins object), the same way as in a regular Python file.For details, see the exec documentation.  It also warns that modifying the default local scope (which is implied when not specifying any arguments besides text) is unsound:The default locals act as described for function locals() below: modifications to the default locals dictionary should not be attempted. Pass an explicit locals dictionary if you need to see effects of the code on locals after function exec() returns.
Would it work for you if you imported and called the function instead?myfile.pycaller.py


Answer URL
https://docs.python.org/3/library/functions.html#exec
