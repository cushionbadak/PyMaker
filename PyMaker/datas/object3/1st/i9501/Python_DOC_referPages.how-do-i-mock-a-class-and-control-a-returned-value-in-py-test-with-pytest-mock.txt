Natural Text
I'm trying to use py.test to test some code that does various LDAP searches, and modifications.I'm using pytest-mock, but I'm having trouble understanding how to mock out the creation of the an LDAP object, and control what it returns when a search_s() is called on the mocked object.I thought this would do what I wanted, but the test fails, the count shows the generator function find_users() never yields anything.
You can just use patch directly (and something was off about your structure): 
I think you may be getting confused between https://docs.python.org/3/library/unittest.mock.html and pytest mockey patch. I don't think both behave in the same way. You can make it work using mock patch(https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch) 


Answer URL
https://docs.python.org/3/library/unittest.mock.html
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch
https://docs.python.org/3/library/unittest.mock.html#nesting-patch-decorators
