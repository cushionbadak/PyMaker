Natural Text
I could send mail using the following code According to the doc:When DEBUG is False, Django will email the users listed in the ADMINS  setting whenever your code raises an unhandled exception and results  in an internal server error (HTTP status code 500). This gives the  administrators immediate notification of any errors. The ADMINS will  get a description of the error, a complete Python traceback, and  details about the HTTP request that caused the error.but in my case, Django doesn't email reporting an internal server error (HTTP status code 500)what's the problem? please help fix the problemsettings.pythe start of views.py
First, it doesn't matter if you were able to send the mail using the console, but if you received the mail. I assume you did.Second, it's best to try with exactly the same email address in the console as the one set in the ADMINS, just to be sure.Finally, the sender address might also matter. The default is "root@localhost", and while "root" is OK, "localhost" is not, and some mail servers may refuse the email. Specify another sender email address by setting the SERVER_EMAIL Django setting.
Djano sends admin emails on error using logging system.As I can see from your views.py you are changing logging settings.This can be the cause of the problem as you cleared that django admin handler mail_admins.For more information check django documentation
The Django doc says: In order to send email, EMAIL_HOST, EMAIL_HOST_USER and EMAIL_HOST_PASSWORD are at the very least needed, but  as I tested, we should also specify SERVER_EMAIL, and only when  SERVER_EMAIL is equal to EMAIL_HOST_USER so can send the email, e.g.Django uses AdminEmailHandler to  send an email to the site admins for each log message it receives.Besides Django,   we could also use Python's logging.handlers.SMTPHandler(mailhost, fromaddr, toaddrs, subject, credentials=None, secure=None, timeout=1.0)to do the same.For example, put the following code in views.py(do change to your account), it will email reporting unhandled exceptions and results in an internal server error (HTTP status code 500).Comparing AdminEmailHandler  and SMTPHandler, I advocate to use SMTPHandler whenever possible.First, AdminEmailHandler is Django specific, while you can use  SMTPHandler in any Python program, one thing you should care is when using  SMTPHandler in client side software,  some  anti-virus software may treat the software as spyware, so you should inform users when your software is about to send email.Second,  I found email sending by AdminEmailHandler  has a bunch  of Information while SMTPHandler just send the Python exception Information which makes debugging a bit clear! Third , If you configure your email within  settings.py in Django , there is no exception throw out even If you have made something wrong with the email confirmation ,  while SMTPHandler always throw out exception on what's wrong in using . cite from http://redstoneleo.blogspot.com/2016/12/email-reporting-exceptions-and-errors_30.html


Answer URL
https://docs.python.org/3/library/logging.handlers.html#smtphandler
