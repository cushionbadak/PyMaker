Natural Text
This function in python downloads a file to AWS S3 bucket. I have a problem with the code that I want to not nest the three "If" so that the code can be more clear and readable :How to do that ? thank you
You can always invert a test and use continue to skip the iteration:We can pull out the double download_file() call; skip keys that end in / early. You only need to create directories once, outside the loop (I'd rename file to directory here too). I'd use str.rpartition() here instead of str.rsplit():
I would like to suggest using some features of the standard library. Like Martijn Pieters said, you should have renamed your file variable to target_directory or something like that because it could confuse the reader of you code if you don't:The features used are:os.path.split() instead of str.rsplit() or str.rpartition() because it looks like you wanted to retrieve a filename at the end of a filepath when you tried to do fileinfo['Key'].rsplit('/', 1)exist_ok argument of os.makedirs() so you don't have to worry about the existence of directory before you need to create it.


Answer URL
https://docs.python.org/3/library/os.path.html#os.path.split
https://docs.python.org/3/library/os.html#os.makedirs
