Natural Text
I'm trying to set up uWSGI to run a simple Flask application. I followed along with this tutorial, which worked fine, but when implementing the same concepts on my project it didn't work.Here's my directory structure:When I'm in the /project directory, the python command python bin/wsgi.py works fine. However, the uwsgi command uwsgi --socket 0.0.0.0:8000 --protocol=http --wsgi-file bin/wsgi.py doesn't. Here's server.py:Here's wsgi.py:And here's the error I get:Thanks!
Why python bin/mod.py had worked?Because Python sets sys.path to include your bin directory, based on the directory mod.py (the command-line argument) was in:As initialized upon program startup, the first item of this list, path[0], is the directory containing the script that was used to invoke the Python interpreter.You can check this out by adding import sys and print(sys.path) to your wsgi.py. The very first element would be your bin directory (full absolute path).Why uwsgi --wsgi-file bin/wsgi.py hadn't worked?Because interpreter didn't knew where to find server.py. uWSGI hadn't took the path of bin/wsgi.py and haven't added it tothe embedded interpreter's sys.path (via Py_SetProgramName internal API call, PySys_SetPath or otherwise) - it had just initialized the interpreter and loaded the file.Basically, uWSGI is not a Python interpreter, it just hosts it, embedded.If the script directory is not available (e.g. if the interpreter is invoked interactively or if the script is read from standard input), path[0] is the empty string, which directs Python to search modules in the current directory first.Why --pythonpath $(pwd)/bin fixed things?Because you told Python interpreter where to look for imported modules. :-)


Answer URL
https://docs.python.org/3/library/sys.html#sys.path
