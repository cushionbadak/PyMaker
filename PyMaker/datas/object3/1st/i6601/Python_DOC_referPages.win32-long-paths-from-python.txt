Natural Text
Note: this question is about the newly supported win32 long paths (available since Windows 10 Version 1607, Build 14352) and not about extended UNC paths starting with \\?\.I enabled long path support via a group policy and rebooted my PC. I checked in the registry that both HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Control\FileSystem\LongPathsEnabled and HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem\LongPathsEnabled are set to 1. Then I opened a Python REPL and tried to create a directory that will exceed the 260-char limit, but failed:I'm assuming that the long path support somehow didn't take effect here. Why is this and how can I properly enable it so that it works from Python scripts?Update: I also tried directly calling a Win32 API function via pywin32 that claims in its documentation that it should support long paths, but failed again:Update 2: Also tried creating via individual components:(os.makedirs also won't work in this case)Update 3: The following batch script will not fail:So I'm assuming that this is somehow related to Python then.
The solution is both simple and somewhat disappointing: Python versions prior to 3.6 are not able to take advantage of long paths. 3.6 changelist.Windows historically has limited path lengths to 260 characters. This meant that paths longer than this would not resolve and errors would result.In the latest versions of Windows, this limitation can be expanded to approximately 32,000 characters. Your administrator will need to activate the “Enable Win32 long paths” group policy, or set the registry value HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem@LongPathsEnabled to 1.This allows the open() function, the os module and most other path functionality to accept and return paths longer than 260 characters when using strings. (Use of bytes as paths is deprecated on Windows, and this feature is not available when using bytes.)After changing the above option, no further configuration is required.Changed in version 3.6: Support for long paths was enabled in Python.To prove that it works, I did the following:The first makedirs call fails because individual components are still limited to 255 characters.


Answer URL
https://docs.python.org/3/using/windows.html#removing-the-max-path-limitation
