Natural Text
I have a python script at /home/pi/update_rrd_data.py that's supposed to store logs in the folder /home/pi/logs_rrd.This is how I've implemented it:When I run the script manually, it works fine and this is what I get in the log file at /home/pi/logs_rrd/update_rrd_data_201709271426.log:Current Folder: /home/piLog Folder:     /home/pi/logs_rrdLog File:       /home/pi/logs_rrd/update_rrd_data_201709271426.logHowever, when I run it as a cron job, the log files are created in the same folder as the script instead of the logs_rrd folder. This is what I get in the log file at /home/pi/update_rrd_data_201709271445.log:Current Folder: /home/piLog Folder:     /home/pi/logs_rrdLog File:       /home/pi/update_rrd_data_201709271445.log  I can't figure out why the log folder value is ok but then the log file removes the logs_rrd part of log folder.This is how I run the cron:All the folders and files are owned by root so there shouldn't be any write permission issues.
in the case where it doesn't work, __file__ is probably an absolute path, so has no effect, (it retuns file_name) and the original script directory is kept.Instead of __file__[:-3], just do:to get rid of the extension (which may not be .py in some cases BTW) and of the script file path in all cases, so the next os.path.join command works properly.Alternate solution using pathlib and a Path object (requires Python 3):that removes the directory & the file extension amounting to the same result.


Answer URL
https://docs.python.org/3/library/pathlib.html
