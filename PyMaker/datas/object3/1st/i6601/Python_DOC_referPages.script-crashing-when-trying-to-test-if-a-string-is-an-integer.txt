Natural Text
I'm making a python script for a twitch bot which basically acts as a slot machine. Disclaimer- I'm totally new to python, so please don't kill me.At the start of the script, I have this code to check if the correct command was typed, check if the first argument is an integer, and check if the user has enough points. The idea is to let them choose an amount to gamble, so the cost line will be changed once i get it working.The input from the chat is always in a string form, even if it's only a number. I'm able to convert that to an int with int(), but if there's nothing or if there's something there other than numbers it crashes the script entirely. How can I keep the script from crashing and instead alert the user they need to input an integer? Thanks!
You write:There are two problems with this fragment:you call the int(..) constructor, and that can fail (error) if you provide it a non-integer (like "foobar18"); andin case the constructor succeeds, then it is guaranteed that the outcome is an int, so the check is useless.So now the question is what to do. We can construct an advanced check to inspect if a string is indeed an integer, but the problem is that we have to cover multiple cases, and it is easy to forget one.Python is a language with the idea: EAFP: Easier to Ask for Forgiveness than Permission. It means that the philosophy of Python is to encourage trying something, and in exceptional cases, handle it, than first check if something is an integer.So wen can write it as:You better always specify the error you expect to see (ValueError) since if for instance data.GetParam(1) raises another error, you do not per se want to handle it there: it does not mean that data.GetParam(1).lower() is not an integer, it means that data.GetParam(1) has made some (other) error.
The line isinstance((int(data.GetParam(1).lower())), int) will raise a ValueError exception if data.GetParam(1) is not an integer.As user8153 suggested, wrap the conversion with try, except block:Alternatively, you may use data.GetParam(1).isdigit()
After doing a bit of research I think you can use a try/except block to make sure the value given by the user is actually a number.  I got the answer here: Converting String to Int using try/except in Python
To check if a string can be casted to an int, simply use:


Answer URL
https://docs.python.org/3/tutorial/errors.html#handling-exceptions
