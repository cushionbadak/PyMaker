Natural Text
The snippet above will block itself at r.wait(). But if changing it tothe content of a will be printed immediately. So why is the r in the first snippet never ready? (Python version: Python 3.6.2 :: Anaconda custom (64-bit), under Linux)
The problem is that you're waiting outside of the with block. As soon as you exit the with block, the Pool is terminated, which prevents any of your tasks from completing. From the javadocs:Pool objects now support the context management protocol â€“ see Context Manager Types. __enter__() returns the pool object, and __exit__() calls terminate()....terminate() Stops the worker processes immediately without completing  outstanding work. When the pool object is garbage collected  terminate() will be called immediately.Moving the call to r.wait() inside the with block fixes the issue.


Answer URL
https://docs.python.org/3/library/multiprocessing.html#multiprocessing.pool.Pool.terminate
