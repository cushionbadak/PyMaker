Natural Text
I'm trying to read the log file in Linux /var/log/messages for a line having special pattern of strings which I have given below. From this line pattern I'm looking at the e-mail address for the user, like rajeshm@noi-rajeshm.fox.com and using the str.partition() method I'm separating it into two parts as a list index, and taking the first one further getting that split into a list for the ease of taking last index value, which is the user ID and that's working fine.Saying that I'm able to get the list of users and total count but I need to count the occurrence of each user and print the user_name: Count, so the key and value.Nov 28 09:00:08 foxopt210 rshd[6157]: pam_rhosts(rsh:auth): allowed  access to rajeshm@noi-rajeshm.fox.com as rajeshmThe current code is working as below:While googling around I get the idea of using dictionary for thispurpose and it's working as expected:And my output is as desired:I'm just looking if there is a better way around for this exercise.
When counting things, it's easier to use the collections.Counter() class. I'd encapsulate parsing the lines into a generator here:and pass this to the Counter() object:This uses the Counter.most_common() method to provide sorted output (most common to least).
You can try with the regular expression and can do this:Just for fun one line logic:


Answer URL
https://docs.python.org/3/library/collections.html#collections.Counter
https://docs.python.org/3/library/collections.html#collections.Counter.most_common
