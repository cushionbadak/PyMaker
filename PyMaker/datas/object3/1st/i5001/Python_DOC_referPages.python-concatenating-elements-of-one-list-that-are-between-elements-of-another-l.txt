Natural Text
I have two lists: a and b.  I want to concatenate all of the elements of the b that are between elements of a. All of the elements of a are in b, but b also has some extra elements that are extraneous. I would like to take the first instance of every element of a in b and concatenate it with the extraneous elements that follow it in b until we find another element of a in b. The following example should make it more clear.  What I have thought of is something like this:This however will not catch the last item in the list (which I am not quite sure how to fit into my list comprehension anyways) and it seems quite ugly. My question is, is there a neater way of doing this (perhaps in itertools)?
I think your example wrong_list_fixed is incorrect.Here's a solution that walks the lists. It can be optimized further:Here are the correct lists (modified to be easier to visually parse):
Let's simplify the visual a bit:This will be semantically identical to what you have, but I think it is easier to see without all the extra nested brackets.You could use itertools.groupby, if you could only come up with a clever key. Luckily, the mapping of key_list to wrong_list givs you exactly what you want:The key maps elements of wrong_list to key_list using index. For missing indices, it just returns the last one successfully found, ensuring that groups are not split until a new index is found. By starting the search from the next available index, you can ensure that duplicate entries in key_list get handled correctly.[IDEOne Link]
I get slightly different result from yours, but give it a try. If this is not what you want, I will delete my answer.


Answer URL
https://docs.python.org/3/library/itertools.html#itertools.groupby
https://docs.python.org/3/tutorial/datastructures.html#more-on-lists
