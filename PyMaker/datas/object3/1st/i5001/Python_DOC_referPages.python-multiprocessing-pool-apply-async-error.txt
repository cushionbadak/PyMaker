Natural Text
I'm trying to evaluate a number of processes in a multiprocessing pool but keep running into errors and I can't work out why...  There's a simplified version of the code below:This returns the following error:When I call the following:    correlations[0].successful()I get the following error:Is this because the process isn't actually finished before the .get() is called?  The function being evaluated just returns a dictionary which should definitely be pickle-able...Cheers,
The error is occurring because pickling a function nested in another function is not supported, and multiprocessing.Pool needs to pickle the function you pass as an argument to apply_async in order to execute it in a worker process. You have to move the function to the top level of the module, or make it an instance method of the class. Keep in mind that if you make it an instance method, the instance of the class itself must also be picklable.And yes, the assertion error when calling successful() occurs because you're calling it before a result is ready. From the docs:successful()Return whether the call completed without raising an exception. Will raise AssertionError if the result is not ready.


Answer URL
https://docs.python.org/3/library/pickle.html#what-can-be-pickled-and-unpickled
https://docs.python.org/3/library/pickle.html#what-can-be-pickled-and-unpickled
