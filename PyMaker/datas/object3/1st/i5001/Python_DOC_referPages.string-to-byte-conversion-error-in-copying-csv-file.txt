Natural Text
I wrote the following code in Python 3.6.4 to read a .csv file "Data.csv" in my directory and to copy the contents to a NamedTemporaryFile "temp_file"Executing the above code gave an error in the iterator line(for row in reader):The error said:I searched for a solution and found this answerBut this did not solve my problem as, when I changed "rb" to "rt", I started getting another error on the line This error said: I think this problem occurs only in Python 3 does not affect Python 2I have already tried methods like encode(), decode() function to convert String to bytes and also some library functions like json.dumps(). 
You opened your file in binary mode:Don't do that. The error message tells you you should not do that, it specifically reminds you to open the file in text mode instead:Remove the b from the file mode.The NamedTemporaryFile() class also defaults to binary mode with 'w+b', you need to tell it to open the file in text mode instead; use either 'w+' or 'w'.Corrected code:In Python 2, the csv module could only handle data in binary mode, partly because Python did not have strong Unicode support when the module was first created, and because in Python 2, text mode files on certain platforms translate line endings in a manner incompatible with the CSV standards.In Python 3, it is strongly recommended you switch off line ending translation by adding newline='' when opening files:I'd also strongly consider setting the encoding explicitly, rather than rely on the system defaults.As a side note, there is no need to spell out all the column names when copying dictionaries across, nor do you have to even create a new dictionary for each row as the DictReader() and DictWriter fieldnames lists match. You can just pass the reader directly to the DictWriter.writerows() method:at which point I do wonder if you didn't just want to use shutil.copyfileob() and just avoid parsing into dictionaries and then serialising back to CSV.


Answer URL
https://docs.python.org/3/library/tempfile.html#tempfile.NamedTemporaryFile
https://docs.python.org/3/library/csv.html#id3
https://docs.python.org/3/library/shutil.html#shutil.copyfileobj
