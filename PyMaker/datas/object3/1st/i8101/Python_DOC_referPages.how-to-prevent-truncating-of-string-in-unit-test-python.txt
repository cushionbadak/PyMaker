Natural Text
I am doing a unit test in python for my program and I would like to do an assertEquals test.My code looks something like this:However, as my string is too long, i got something like testing[471 chars]0 != testing[473 chars]. I wanna see what is the exact difference between both the strings instead of seeing the truncated ones. Anyone has an idea how to counter this problem ?
So, I landed on this question because I had an issue where I was using assertEqual() and 'self.maxDiff = None' wouldn't cause the full output to be displayed. Tracing through, it turned out that because the types of the two objects were different (one was a list, one was a generator), the code path that would make use of 'self.maxDiff' wasn't used. So, if you run into the issue where you need the full diff and 'self.maxDiff' isn't working, ensure the types of your two compared objects are the same.
unittest.TestCase.assertEquals tries to give you the actual difference in the string while at the same time making the text fit in your screen.To do this it truncates the common sections, so sections that have no differences are truncated by replacing them with [<count> chars] chunks:In the above example, the two strings share a long prefix, which has been shortened by replacing 291 characters with [291 chars] in both prefixes. They also share a long postfix, again shortened in both locations by replacing text with [255 chars].The actual difference is still being displayed, right in the middle.Of course, when you make that difference too long, then even the difference is truncated:Here, the common postfix is starting to differ, but the start of the difference is still visible, and should help you figure out where the text went wrong.If this is still not enough, you can either increase or eliminate the diff limits. Set the TestCase.maxDiff attribute to a higher number (the default is 8 * 80, 80 lines of text), or set it to None to eliminate altogether:Note that unless your string contains newlines that the diff is likely to be unreadable:AssertionError: 'foof[231  chars]oofoofoofoofoofoofoofoofoofoofoofoofoofoofoofo[315 chars]ofoo'  != 'foof[231 chars]oofoobarbarbarbarbarbarbarbarbarbarbarbarbarba[285  chars]ofoo'  - foofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoo  ?  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^  + foofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoobarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarbarfoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoofoo  ?  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^In that case it may be more useful to wrap your input and output texts:just so you get better and more readable diff output:


Answer URL
https://docs.python.org/3/library/unittest.html#unittest.TestCase.maxDiff
