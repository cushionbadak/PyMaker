Natural Text
does not show the vim editor in my console. Setting _bg=False kwarg makes no change (since that's already the default value)If instead I use the subprocess module, it works:
The problem is that vim expects its stdin to be a TTY, but the pipe created by sh is not a TTY, it's a pipe.The solution is to not try to intercept vim's standard I/O with pipes. Since intercepting stdio with pipes is the entire purpose of sh, rather than trying to find a way to fight against it, you're better off not using it. Just use the stdlib's subprocess module, which only intercepts stdio if you go out of your way to ask it to:But notice the TTYs section in the sh docs:Some applications behave differently depending on whether their standard file descriptors are attached to a TTY or not. For example, git will disable features intended for humans such as colored and paged output when STDOUT is not attached to a TTY. Other programs may disable interactive input if a TTY is not attached to STDIN. Still other programs, such as SSH (without -n), expect their input to come from a TTY/terminal.By default, sh emulates a TTY for STDOUT but not for STDIN. You can change the default behavior by passing in extra special keyword arguments…So, if you pass _tty_in=True, then vim's input will be an emulated TTY instead of a pipe.But that still isn't going to do much good. It'll allow vim to run, but it'll run using the fake TTY created by sh for its input and output, which I'm pretty sure is not what you want. (If you were looking to send it control sequences and capture and process the control sequences it sends back, it would almost certainly be simpler to just script ed—or, better, sed—instead…)So why aren't you getting some kind of error message or other sane behavior?Really, that's down to vim. If you try the same thing with emacs, or any app that uses curses, and many other TTY apps, they'll write an error message to stderr and exit with 1, so you'll see something like this:


Answer URL
https://docs.python.org/3/library/subprocess.html
