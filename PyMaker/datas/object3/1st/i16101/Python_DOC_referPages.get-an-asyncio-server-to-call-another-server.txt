Natural Text
So I have modified the example of asyncio client and server (found here: https://docs.python.org/3/library/asyncio-protocol.html#protocol-example-tcp-echo-server-and-client) and all I want is for client.py to call serverone.py, and in turn for it to call servertwo.py.client.pyserverone.pyservertwo.pyI launch servertwo.py and serverone.py in a terminal, then call client.py. Things partially work; the client does call serverone which does call servertwo, but then serverone fails with this error:The documentation doesn't cover a lot of odd use cases, so I'm a bit stuck. Should I be using asyncio.async to make the call? Am I approaching the problem correctly?How do I fix or avoid the RuntimeError?
You can use asyncio.async to schedule the coroutine returned by create_connection to be run by the event loop, and then use the add_done_callback method of the asyncio.Future (more specifically, an asyncio.Task) that async returns to shut down the loop once the coroutine is done:


Answer URL
https://docs.python.org/3/library/asyncio-protocol.html#protocol-example-tcp-echo-server-and-client
https://docs.python.org/3/library/asyncio-task.html#asyncio.async
https://docs.python.org/3/library/asyncio-task.html#asyncio.Task
