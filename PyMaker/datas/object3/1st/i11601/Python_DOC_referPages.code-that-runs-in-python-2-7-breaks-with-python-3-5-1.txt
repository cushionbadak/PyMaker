Natural Text
I have Python Code that runs fine with Python 2.7 but when i run it with Python 3 it doesn't work properly:in the console i got:How can i change the code so that it runs with Python 3, too?
The line:is incorrect and should be:This is throwing an error which your exception eating code is eating. This is why a general except: that simply continues regardless is a bad idea, especially in a case such as yours where this potentially leaves the program in a bad state.Why this works on 2.7 I do not know but I have suspicion it may not be doing what you think it is doing.Also since hashlib in 3.x reseeds the hash when it it created you would be better off creating a single instance with known hash.
Your 'f1' list is longer than your 'h1' list.How it reached that state is hard to tell from the code. My guess is that some point after calling file_list.append(), you hit an exception before calling hash_list.append. Possibly in the 'f = open(...)' line.Refactor the create_MD5 code to ensure no exceptions happen between the two appends and it should be fixed.EditAs to the reason this works in 2.7 and not 3.5. My guess is it's related to the following from the Python 3 'Whatsnew' Files opened as text files (still the default mode for open()) always use an encoding to map between strings (in memory) and bytes (on disk). Binary files (opened with a b in the mode argument) always use bytes in memory. This means that if a file is opened using an incorrect mode or encoding, I/O will likely fail loudly, instead of silently producing incorrect dataOr, more likely - see Jack's answer.


Answer URL
https://docs.python.org/3/whatsnew/3.0.html
