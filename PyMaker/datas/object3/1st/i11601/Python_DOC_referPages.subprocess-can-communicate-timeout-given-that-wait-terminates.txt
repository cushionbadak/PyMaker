Natural Text
Is it possible for Popen.communicate(timeout=2) to raise TimeoutExpired, even though I am asserting that Popen.poll() is not None and Popen.wait(2) does not throw an exception?Edit: The docs suggest to use the following snippet:but this will just raise ProcessLookupError: [Errno 3] No such process. Which makes sense because I've already terminated the process via poll and wait.
Yes. It is possible if the child spawns its own subprocesses. Popen.communicate() may return much later than Popen.wait() which waits only for the child. See Python subprocess' check_call() vs check_output().Note: proc.kill() might not kill the whole process tree. See How to terminate a python subprocess launched with shell=True.


Answer URL
https://docs.python.org/3/library/subprocess.html#subprocess.Popen.communicate
