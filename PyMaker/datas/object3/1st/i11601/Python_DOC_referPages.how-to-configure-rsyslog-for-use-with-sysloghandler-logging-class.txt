Natural Text
In order to write log messages of "myapp" into /var/log/local5.log, I use SysLogHandler.problem"myapp" runs well, no error, but nothing gets logged, /var/log/local5.log remains empty.logging configurationRelevant parts of the logging configuration file:logging testHere is how I try to write a log in the main script of "myapp":I have added some sys.stderr.write() to /usr/lib/python3.4/logging/handlers.py to see what's happening and I get:rsyslog configuration/etc/rsyslog.conf (relevant parts; TCP and UDP syslog receptions are disabled):/etc/rsyslog.d/40-local.conf:rsyslog testAccording to lsof output, it looks like rsyslogd is listening to /dev/log (or am I wrong?):I don't put the whole rsyslogd -N1 output since it's a bit long, but the mentionning"local" lines:I don't understand what I am missing. rsyslog's documentation matching the version I use (7.4.4) seems outdated and I can't find my way in it. Not sure that's the place to find how to fix my problem.EDITS:It's not possible to define a "personal" facility, like "myapp" (even if it's defined in rsyslog.conf, so I changed to use the 'local5' one.
Cause of the problemI finally found out that I previously created /var/log/local5.log with inappropriate owner and group (root:root). They were inappropriate because /etc/rsyslog.conf tells explicitely owner and group should be syslog:syslog:Unfortunately, the other log files rsyslog should take care of (like auth.log) were also root:root, so, seen from ls -lah, mine was not different from others... (what are also empty, I wonder why such a non-functional configuration is installed by default).Unfortunately, rsyslog does not log any error (or at least I haven't found where).Some more details that could be useful to finish rsyslog configurationAs a side note, rsyslog expects a special format for the messages it gets, and if it doesn't, it adds some informations, by default (timestamp hostname). It's possible to modify them. Anyway, from my python script, I decided to only send the message to log and let rsyslog format the output. So finally, the relevant parts of my logging configuration file are:And I added a customized template in /etc/rsyslog.conf:and accordingly modified /etc/rsyslog.d/40-local.conf:I also want to mention that the documentation provided by the matching package (rsyslog-doc for ubuntu) matches the installed version, of course, and provides hints I hadn't found in the online documentation.


Answer URL
https://docs.python.org/3/library/logging.handlers.html#sysloghandler
