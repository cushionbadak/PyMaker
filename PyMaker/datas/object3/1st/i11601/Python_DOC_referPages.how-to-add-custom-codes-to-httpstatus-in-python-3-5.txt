Natural Text
My HTTP client uses the Python requests library to access an API proxied by CloudFlare. The client converts the numerical response status code to an HTTPStatus enum instance. Simplified ...The CloudFlare proxy service can return some unofficial 5xx HTTP status codes: https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#CloudFlare. These cause HTTPStatus to raise a ValueError because codes such as 522 (Connection Timed Out) are not members of the HTTPStatus enum defined in Python's lib/http/__init__.py.How can I add the unoffical CloudFlare status codes to the HTTPStatus enum? Or, how can I load the HTTPStatus enum members into some other enum along with the unoffical CloudFlare status codes?The Python 3.5 Enum documentation, https://docs.python.org/3/library/enum.html, describes restrictions that have thwarted me thus far.Section 8.13.9: Subclassing an enumeration is allowed only if the  enumeration does not define any members.Section 8.13.14.2: The most interesting thing about Enum members is  that they are singletons. EnumMeta creates them all while it is  creating the Enum class itself, and then puts a custom __new__()  in place to ensure that no new ones are ever instantiated by returning  only the existing member instances.
The new aenum library1 has an extend_enum function that is capable of adding new members to an existing enumeration.Example usage:1 The aenum library is from the author/coauthor of the enum34 backport and the Python 3.4 Enum data type.


Answer URL
https://docs.python.org/3/library/enum.html
