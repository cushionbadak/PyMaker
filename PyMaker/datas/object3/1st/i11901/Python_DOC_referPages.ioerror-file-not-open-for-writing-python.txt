Natural Text
I am opening a file and if a particular condition is met, opening another file and transferring the records from the first file to the second, then deleting them from the first. The code below works, except for the line f.truncate(), which is causing the error in this post's title. Can anyone tell me what I need to amend to make this work?
You have to open the first file as "r+" in order to read and write, like so:I have also made the code more efficient as it should iterate over the lines instead of copying them to the side. An even more efficient approach would be this:That way you don't reopen the file every iteration, and since you're not using the split values, you can just count the commas (,) and compare to 27 instead of 28.Removing only the copied linesIf you wish to remove only the copied lines and not empty the file, you have no way other than copying the entire file to the memory or using a tempfile.That's the way to do it by copying to memory:Please make sure to specify an encoding if you're using Python 3.X.
Think of it as reading file1, splitting it in two, and writing the parts to file1 and file2. I wouldn't even bother with truncate() since opening a file for writing truncates it:


Answer URL
https://docs.python.org/3/library/tempfile.html
