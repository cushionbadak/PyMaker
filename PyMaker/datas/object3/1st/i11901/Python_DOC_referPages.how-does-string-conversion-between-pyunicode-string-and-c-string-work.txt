Natural Text
I have a PyUnicode object I'm trying to convert back to a C string (char *).The way I am trying to do it does not seem to be working. Here is my code:Is there another/better way I should be doing this?
If UTF-8 encoded char * is OK, you should definitely use PyUnicode_AsUTF8AndSize (which requires Python 3.3):Also, do understand that is mandatory to check the return value of each and every Py* function call that you ever execute in your code. Here the PyTuple_GetItem will return NULL if compTuple is not a tuple, or 0 causes IndexError. PyUnicode_AsUTF8AndSize will return NULL if objectCompName is not a str object. Ignore the return value and CPython crashes with SIGSEGV when the conditions are right.
You need to first convert your python PyUnicode to a non-unicode python string (read more here: https://docs.python.org/2/c-api/unicode.html#ascii-codecs) , then you can easily convert the result into char* . Below is a pseudo code to help you proceed: 


Answer URL
https://docs.python.org/3/c-api/unicode.html#c.PyUnicode_AsUTF8AndSize
