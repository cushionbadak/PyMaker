Natural Text
I have decorated methods that send timings to a hosted graphite instance they look like what is belowviews.pyI have a util file that defines the decoratorutil.pyI have some unit teststest.pyNow the problem is that call to login_user. It invokes the send_timing decorator which in turn makes a network connection. This makes my tests volatile and non-deterministic. Is there an easy way (python 3.3) to patch send_timing with a dummy or mock globally for all my tests?
You want to use @functools.wraps() decorator factory in your decorator:This adds an attribute on the returned wrapper function, letting you access the original unwrapped function:You can use the unwrapped value here to mock login_user, or use it directly in your unit tests.


Answer URL
