Natural Text
I'm trying to merge list items with previous items if they don't contain a certain prefix, and adding a \n between said list items when doing so. I tried something likebut always get the list index out of range error.My apologies if this is badly worded, or seems like an obvious fix, I'm fairly new to python/programming.Edit:I had managed to get it to work with but your answers seem so much neater and efficient. Much thanks everyone
I propose to create a new list, as you showed in your problem specification:The result is:
Here's a one liner solution using itertools.groupby and itertools.accumulate:This looks like a two liner because I wanted to make it semi-legible, but that's not always necessary:cumsum provides the number of elements starting with ! found so far. This makes for a nice key to groupby. It works by accumulating the booleans returned by str.startswith into an integer.The final result uses cumsum as the key, but joins the grouped elements of x with newlines.Here's an IDEOne Link to play with.
You can do it with list comprehension "also".
A solution that is a bit longer, but that can easily be generalized to other situations, using itertools.groupby:As we have an iterator, we also don't have to create the whole output list at once, we can generate each output on-the-fly:A bit of explanation :groupby(iterable) starts a new group each time it gets a different item from iterable. groupby(iterable, key) starts a new group everytime the return value of the key function changes. Our condition function alternates its output between True and False each time the item starts with the prefix. 


Answer URL
https://docs.python.org/3/library/itertools.html#itertools.groupby
