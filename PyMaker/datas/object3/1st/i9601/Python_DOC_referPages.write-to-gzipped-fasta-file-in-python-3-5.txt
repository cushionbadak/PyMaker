Natural Text
I have just migrated all modules in my tool from python 2 to python 3. I run into a problem I just could not solve - I don't know how to write to gzipped fasta file.This code works in python 2 but it does not work in python 3, it raises:TypeError: memoryview: a bytes-like object is required, not 'str'How should I fix the problem?
The gzip.open function, unlike the regular open function, defaults to binary mode, not text mode. You have to explicitly pass a t as part of the mode string to open in text mode (which accepts/expects str):To avoid line ending conversion, you may also want to pass newline='' (the empty string) so that, on a system like Windows, it doesn't convert \n to \r\n when it writes.
Try converting the string which is returned from SeqRecord to a bytes object.record.format('') returns the record as a string..encode() converts the string to a byte object.


Answer URL
https://docs.python.org/3/library/gzip.html#gzip.open
https://docs.python.org/3/library/io.html#io.TextIOWrapper
