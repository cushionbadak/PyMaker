Natural Text
If I have:Is there a way to find the 'x' binding that f2 will use? I looked at inspect but could not tell if some of the 'frame' stuff would apply. In other words, could I define a closedVars() below:
You don't have to use the inspect module here.works in Python 2.7
You can get the cell contents by checking out f.func_closure (works in Python 2.7.5):Python 3.3 has an inspect.getclosurevars function:Get the mapping of external name references in a Python function or method func to their current values. A named tuple ClosureVars(nonlocals, globals, builtins, unbound) is returned. nonlocals maps referenced names to lexical closure variables, globals to the functionâ€™s module globals and builtins to the builtins visible from the function body. unbound is the set of names referenced in the function that could not be resolved at all given the current module globals and builtins.I'm not yet sure if you can get the closed-over variable names pre-Python 3.3.
Python 3 Update - Feb 2019Purposely, writing this out long-hand:What I am less clear on, and this applies to the answer marked correct above also, is whether the ordering between the tuple of (non-local closure) variable names (__code__.co_freevars) and the ordering of the variable values (f2.__closure__) are guaranteed to match (which the zip operation depends upon). In the simple example used to ask the question, we are only dealing with a single variable x so the above would suffice for that specific case. Be good if anyone can confirm the general case rather than just assume it to be so? 


Answer URL
