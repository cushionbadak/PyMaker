Natural Text
I've been writing a MUD in python, using asyncio.Protocol, however I have a problem with when users close their client (typically a terminal, since you connect via telnet) without disconnecting properly.  The server doesn't recognize the user as disconnected, and they remain in the game.  The problem only occurs when the client is connected remotely (for some reason, maybe someone can explain...) it doesn't happen when connecting from the localhost.  Is there a neat way to check a user is still actually connected (without additional software client-side), or on failing that how do I incorporate a timeout?  My Protocol looks something like this currently:  Note: I've chopped a lot of superfluous stuff out. If you want the full code, it's here.
You may schedule a new timeout handler on every data_received() call (with cancelling previous timeout handler, sure). I found the approach too cumbersome.Or, as an option, switch to asyncio streams -- you may use asyncio.wait_for or brand new not released yet asyncio.timeout.


Answer URL
https://docs.python.org/3/library/asyncio-stream.html
