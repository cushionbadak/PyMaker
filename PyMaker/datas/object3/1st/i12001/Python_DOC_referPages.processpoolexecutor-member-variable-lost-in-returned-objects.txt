Natural Text
I've a class like this based on defaultdict, which also has a member variable that is a defaultdict (my guess: this is where the problem lies?):I'm using concurrent.futures to create different instances of A like this:The problem is after the futures have completed and returned their results, the B member variable contains nothing. To check, I make sure that B is non-empty and can even print its elements at the end of the methodA, but once back in the main process, suddenly B seems to be gone.Should B be initialized separately? What is the right way to do this?
I think what's happening here is that the ProcessPoolExecutor is using pickle to serialize and deserialize your class instances, and the contents of the  defaultdict that is the 'B' attribute of your instances are not preserved.  You can verify this by creating and updating instances of your class in the interpreter, pickling and unpickling them and examining the results.If you create a container class to hold both defaultdicts they both survive pickling and with their contents intact, so this is probably the best approach.  For example (assuming python3):


Answer URL
https://docs.python.org/3/library/pickle.html
