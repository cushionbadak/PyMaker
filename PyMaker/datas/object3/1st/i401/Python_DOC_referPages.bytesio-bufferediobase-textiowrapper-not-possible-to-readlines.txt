Natural Text
I am trying to read lines from bytes like object. Here is a very simple example. I know it can be done in a different way but it's important to keep that flow (BytesIO -> BufferedIOBase -> TextIOWrapper).This end up with an error:Python version 3.6.5
io.BufferedIOBase should not be instantiated, it isn't even supposed to have a public constructor. You certainly don't need it here, it is a base class there to document the methods that buffered I/O objects must implement, with default implementations that inheriting classes can build upon. From the io.BufferedIOBase documentation:Base class for binary streams that support some kind of buffering. It inherits IOBase. There is no public constructor.You only need to use BytesIO, it inherits from BufferedIOBase, it is itself already implementing the methods required to be a buffered I/O object. From the io.BytesIO documenation:It inherits BufferedIOBase. [...][...]BytesIO provides or overrides these methods in addition to those from BufferedIOBase and IOBase: [...]Wrap your BytesIO object directly in a TextIOWrapper() object here:Where the TextIOWrapper documentation tells you that the first argument is expected to be a BufferedIOBase binary stream, the goal is to tell you you need a subclass of BufferedIOBase, something that implements that interface. BytesIO is such an object, and so are io.BufferedIOReader(), io.BufferedIOWriter(), io.BufferedRandom(), and io.BufferedRWPair().In general, you wouldn't create instances of any of the ABCs listed in the Class Hierarchy section of the documentation. They are there to provide documentation, something to test for when you need to check types, and to be a solid base from which to derive custom implementations.


Answer URL
https://docs.python.org/3/library/io.html#io.BufferedIOBase
https://docs.python.org/3/library/io.html#io.BytesIO
https://docs.python.org/3/library/io.html#io.BufferedReader
https://docs.python.org/3/library/io.html#io.BufferedWriter
https://docs.python.org/3/library/io.html#io.BufferedRandom
https://docs.python.org/3/library/io.html#io.BufferedRWPair
https://docs.python.org/3/library/io.html#class-hierarchy
