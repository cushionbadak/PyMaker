Natural Text
I'm trying to build a function to do internal metric conversion on a wavelength to frequency conversion program and have been having a hard time getting it to behave properly. It is super slow and will not assign the correct labels to the output. If anyone can help with either a different method of computing this or a reason on why this is happening and any fixes that I cond do that would be amazing!
You are using range() in a way that is close to how it is used in natural language, to express a contiguous segment of the real number line, as in in the range 4.5 to 5.25. But range() doesn't mean that in Python. It means a bunch of integers. So your floating-point values, even if they are in the range you specify, will not occur in the bunch of integers that the range() function generates. Your first test is and I am guessing you wrote it like this because what you actually wanted was range(1e-12, 9e-11) but you got TypeError: 'float' object cannot be interpreted as an integer.But if you do this at the interpreter prompt you will see it means something quite different to what you obviously expect.To test if a floating-point number falls in a given range do
You don't need ranges and your logic will be more robust if you base it on fixed threshold points that delimit the unit magnitude.  This would typically be a unit of one in the given scale.Here's a generalized approach to all unit scale determination:Each unit array must be in order of smallest to largest multiplier.
EDIT: Actually, range is a function which is generally used in itaration to generate numbers. So, when you write if n in range(min_value, max_value), this function generates all integers until it finds a match or reach the max_value.The range type represents an immutable sequence of numbers and is commonly used for looping a specific number of times in for loops.Instead of writing:you should write:Also keep in mind that range only works on integers, not float.More EDIT:For your specific use case, you can define dictionary of *(value, symbol) pairs, like below:The use the bisect.bisect function to find the "insertion" point of your value in that ordered collection. This insertion point can be used to get the simplified value and the SI symbol to use.For instance:Demonstration:You get:You can adapt this function to your needsâ€¦


Answer URL
https://docs.python.org/3/library/stdtypes.html#typesseq-range
https://docs.python.org/3/library/bisect.html#bisect.bisect
