Natural Text
I want to refer to an element (mem[0]) of a list (mem) with a different name (fetch):And I tried that with the with statement:But I got an error:I thought this would be the way because that's how it's done with file objects:I read the docs for the with statement and it says that the __exit()__ and __enter()__ methods are loaded. According to what I understood after reading that and from the AttributeError, my guess is that sequence elements (mem[0]) do not have an __enter()__ method.
as the comments already mentioned, mem[0] is a literal integer, which doesn't have __enter__ and __exit__ which are required for the as keyword to work and it would be indeed simpler if you just used mem[0] but that would be too easy, what you CAN do (as an exercise don't actually do this)is extend the int class and add __enter__ and __exit__ like so:this is neat but fetch is an alias to a LITERAL! if you change fetch, mem[0] will not change!
You seem to want a mutable object which functions as an alias for a specific location in a list. I could see some utility in that (since explicit indices are somewhat ugly in Python). You could create such a class. Here is a proof of concept, implementing the three things that you tried to do with fetch in your code:For example,The last line shows that there is a limit to what you could achieve here. To make this really useful, you would want to implement many more magic methods (beyond __iadd__ etc.). Whether or not all this is useful just to avoid [0], you be the judge.


Answer URL
https://docs.python.org/3/reference/compound_stmts.html#grammar-token-with-stmt
https://docs.python.org/3/library/contextlib.html#
