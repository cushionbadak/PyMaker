Natural Text
I'm not sure if this title is good..Hope someone could help to change it.I'm trying to define an molecule class, and hope it can iterate over its atoms.I searched how people define an iterable class, and it may look like this:It works well:However, I found it cannot work in two iterators, if they exist simultaneously.This is not a surprise because the two iterators share a same self.__pointer, so defining a new iterator will renew the pointer to zero.I had a look at this page How to make class iterable?, and most of them use a self.__pointer within the class, which raises my question.I guess if the pointer be an attribute of the iterator(ite or ite2) but not of the iterated object itself (molecule), then this problem could be solved.Hope someone can give some help:) Thanks.
Make __iter__ to return new iterator object every time when it's called.Or, you can use yield statement which does not require you to define __next__. Because __iter__() will return a new generator iterator:DEMO: https://ideone.com/TK78Ml


Answer URL
https://docs.python.org/3/reference/simple_stmts.html#the-yield-statement
