Natural Text
I was under the impression that the first value was what determined a values position in the heap, however that doesn't seem to be the case.This gives me an output ofHowever I was expecting an output like
The condition on heapq is not a "sort guarantee" over the provided list. Instead, it guarantees q[k] <= q[2*k+1] and q[k] <= q[2*k+2] (using q as in your example).This is due that it is managed internally as a binary tree.If you simply expect to use the sorted list, you can use the heappop as shown here. In your specific example you could:and the result, as you expected, will be:The theory is explained here in the docs. Relevant is the following line:The interesting property of a heap is that a[0] is always its smallest element.Which is a direct result of the condition q[k] <= q[2*k+1] and q[k] <= q[2*k+2], which is a condition of the heap.However, there are no further guarantees about the order on the rest of the array. And, in fact, both following trees are valid heaps:andWhich are stored, respectively, asand


Answer URL
https://docs.python.org/3/library/heapq.html?highlight=heap#basic-examples
https://docs.python.org/3/library/heapq.html?highlight=heap#theory
