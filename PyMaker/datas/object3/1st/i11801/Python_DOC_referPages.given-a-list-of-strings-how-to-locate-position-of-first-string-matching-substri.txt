Natural Text
I have the body of an email parsed into a list of strings (each line is a string). Emails that are replies will have a section along the bottom that is repeating the prior email and begin with " > ", like this....I'd like to run some text analytics on the message using NLP, but would like to drop the junk at the bottom first. I imagine what I want to use is the re module, find the following line via regex:And once I have the location, slice the list to that position. But I'm having trouble locating the position of that line. There's probably sexier ways to write this, but here's what I have so far:I presume my issue is in my regex pattern (which does appear valid and does match the line in places like https://www.regex101.com/, but I'm stuck there as indices is returning an empty set []. In the example text provided above, I'd like it to return 4 (the 5th line).
enumerate(text) is an iterator over characters of text. Since you want to find the line number, you'll have to iterate over lines. For example, you could split text into individual lines using str.split('\n').Considering that you only need to find the first matching line, it's possible to use next and a generator expression like this:To get the rest of the text you could concatenate the "remainder" of the iterator:or alter the regular expression to match the whole line:You'd avoid using regex, especially if all you need to find is the position of the > character.
I would tackle this problem different. Iterate over all the lines. Start with junk_begins = -1When you see a line starting with > (no need for a regex, just use startsWith), set junk_begins to the current line if junk_begins == -1.When you see a line starting WITHOUT >, set junk_begins back to -1After looping through all the lines, you will have junk_begins pointing to the line number of the first line where every line afterwards starts with >
No regex required. Before you make the list(consume the iterator, I mean) filter it,See if it woks.


Answer URL
https://docs.python.org/3/library/functions.html#next
