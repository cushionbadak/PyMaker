Natural Text
I've got a python script that's being run from the if-up script that's called by the ppp program on Linux when the PPP connection is established. The python script basically calls a command line program, parses the result and returns it:Although this code works 100% fine when I run the python script manually from the command line (e.g. python script.py), it doesn't work at all when it's run by PPP from if-up. An exception is raised when subprocess.check_output is called: [Errno 2] No such file or directory: 'fw_printenv'.I can only get it to work if I change the code to:Why?
From the subprocess documentation:If shell is True, the specified command will be executed through the shell. This can be useful if you are using Python primarily for the enhanced control flow it offers over most system shells and still want convenient access to other shell features such as shell pipes, filename wildcards, environment variable expansion, and expansion of ~ to a userâ€™s home directory. However, note that Python itself offers implementations of many shell-like features (in particular, glob, fnmatch, os.walk(), os.path.expandvars(), os.path.expanduser(), and shutil).Environment variables are necessary in order to get paths to binaries (notabily the PATH, containing possible paths, including /usr/bin/ under unix systems).Else, fw_printenv could be accessed by absolute path.
Use absolute paths:The same goes for stuff you run via cron and web servers.shell=True obviously opens a shell but, less obviously, it also sets all the environment variables (such as PATH) - as if you were running the script manually in your terminal. Removing shell=True and using absolute paths instead is probably the best/safest choice if it works (which I think it will). 


Answer URL
https://docs.python.org/3/library/subprocess.html
