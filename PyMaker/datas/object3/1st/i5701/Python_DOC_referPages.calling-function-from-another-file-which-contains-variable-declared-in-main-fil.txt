Natural Text
I'm creating simple notepad program in Tkinter. I decided to put functions in separate file. Is it possible if the functions are operating on variables declared in main file?This is snippet of the code:main.pynow I have otherfile.pyOnce I run it I'll get:Exception in Tkinter callbackSo I guess otherfile.py does not understand main_text which is defined in main.py. Is there a way to bypass it and allow me to put all the functions in different py file?
cut is trying to use a global variable from another file. Even if you found a way to get around circular imports, it's a messy way to go about things. It's better to write functions that operate independent of global variables. For one thing, it makes them much easier to modify and test. When you need to deal with assigning command=function and function takes variables, functools.partial is your friend. and then in main file, first declare main_text and then use functools.partial to create a callable that takes no arguments.
It is possible. You should import main in otherfile or modify otherfile.cut method to accept main_text as method argument. Second option depends on that if menu_edit.add_command allows passing arguments to command.I think you have two problems.Circular imports which are a real pain.Everything which is declared on module level is called during module import.I believe below example is moreover situation you have.a.py:b.py:Above snippet works as expected when running with python a.py.But when you skip if __name__ == '__main__': you will observe similar situation. Script fails because when you import a in b, add_command(b.b_cmd) in a is called, but b was not imported yet.
It is a bad practice and tons of headache to use global variables. May I suggest to modify cut() to take a parameter:Then in the main module, call it as such:This way, you don't have to deal with troubles later. Besides, you can now use function cut() for other text boxes if you want.


Answer URL
https://docs.python.org/3/library/functools.html#functools.partial
