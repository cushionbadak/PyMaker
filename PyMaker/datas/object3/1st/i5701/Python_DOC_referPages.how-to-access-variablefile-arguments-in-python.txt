Natural Text
In a shell script I have:     inside variables.py how can I access var1 and var2 arguments? I have tried: it seems like this doesn't work. 
For you to access the variables, your variable file must define the function get_variables, which will be given the arguments passed from the command line. This function needs to return a dictionary where the keys are the robot variable names.For example:If your variable file is based on a class, the class needs to have the get_variables method.For example:When you do the above, your test will have two variables set: ${var1} and ${var2} which will have the values that were passed via the --variablefile argument.Here is a test that can be used to verify the above:Here is how to run the test in order for it to pass:Of course, var1 and var2 are completely arbitrary. You can pass raw strings, too:Passing arguments is described in the user guide section titled Getting variables from a special function
sys reads the arguments fron the command line, as they appears to it:sys.argv[0] contains the script namesys.argv[1], the first argument (whatever it is)sys.argv[2], the second, and so on.You should use argparse, it helps to build comprehensive CLIs. A nice tutorial exists on the Python website.
You seem to make assumptions about how the arguments are parsed which are not true.  Here's how these arguments are passed from the shell to Python:sys.argv[0] is /usr/local/bin/pybotsys.argv[1] is --variablefilesys.argv[2] is variables.py:$var1:$var2 where the values of the shell variables var1 and var2 are substituted.sys.argv[n] is test_cases.tsvThe last one is [n] because without quotes around the argument, sys.argv[2] might actually be split into multiple values.  For example, if var1 contains = foo * bar= then actuallysys.argv[2] is variables.py:=sys.argv[3] is foosys.argv[4..n-2] is a list of files in the current directory, andsys.argv[n-1] is =bar:$var2 where similar further processing for the value of var2 may take place.There are Python argument parsing modules which assign further semantics e.g. to arguments which start with a dash (these will be interpreted as options) but by itself, Python does no such thing.  If that's what you want, maybe look at argparse or one of its replacements; but you still need to understand how the basic mechanics work.  A common arrangement is to avoid internal structure in arguments, and instead require the user to pass each value as a separate argument -- so perhapswith quoting to prevent the shell from attempting to perform whitespace tokenization and wildcard expansion on the variable values, and then probably in your script an argparse definition which says to merge multiple option arguments into a list.


Answer URL
https://docs.python.org/3/library/argparse.html
