Natural Text
I wrote a Telegram bot in Python, which is running on my Raspberry Pi (Raspbian). I eventually see an error after the bot has been running for a few hours.Before I post the complete code, could someone please help me understand the error? I would like to run the bot indefinitely, or at least for multiple days, before I need to restart it.The error is as follows:Edit:Following code is used:Might this code solve the problem?
Error says there is no text key inside msg dict. Maybe it's some special telegram message that has no text or there is a bug in you code that delete text key in some cases. You could useTo get None when there is no text. OrTo get empty string (i.e. '') when there is no text.You could also check that there is a text inside msg or not with in operator:If you want to your service to be always up you should add some mechanism for automatic restart. like in Python to restart after any error:I also suggest to log errors in a file or services such as Sentry to investigate why there is no text afterwards.
A KeyError is raised when a value is requested from a dict but the key does not exist in the dictionary.So, in your case, the msg dictionary does not have the key text.You should inspect your code to ensure that the msg dictionary contains a value associated with the key text. Or, if you expect that msg will sometimes not contain the key text, you should instead access the dictionary with the get method, which never raises a KeyError. See the docs for more information.


Answer URL
https://docs.python.org/3/library/stdtypes.html#dict.get
