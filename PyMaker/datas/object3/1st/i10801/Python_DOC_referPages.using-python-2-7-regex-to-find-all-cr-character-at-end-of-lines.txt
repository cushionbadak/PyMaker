Natural Text
I have a folder with about 50,000 text files in it, and I need to see if any of them have lines that end in the CR character only (not CR/LF, or LF) - hex 0x0D.The following code doesn't return any results, and takes a LONG time to process.Thanks in advance for any insight anyone can provide.  I know there's at least one file in the folder that has line breaks as the 0x0D character only.
This line is wrong:Should be:If all the files are in one folder, as you said, it is easier to use os.listdir You don't need all the power of os.walk that gives you the whole tree under the root dir, including sub dirs, and files.Now, as for using regex to detect the newline characters, the problem is that when Python opens the file in 'r' mode, read or readline change the newlines all to be \n.The option would be to open the file in 'rb' mode:*nix systems have the file command to determine the file type. file can detect the file type based on "magic number", extension, etc. so that determining the type of text file is a very trivial task for fileWhat kept me waddling for a while is when I tested a text file created on a mac using nano. I got \n instead of the expected \r, until I found out that MacOS changed to \n in order to be Unix compliant, leaving the \r to legacy text files.Hope this helps a bit.\nEOF


Answer URL
https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files
