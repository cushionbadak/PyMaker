Natural Text
I need to implement an atexit Python function that would get the last error object and check for it's type. If the type of python error corresponds to PHP's E_ERROR I should save the error's output to a file. The PHP code I'm porting looks like so:My code snap are as follows:I would be glad if somebody explained me how can I get the necessary functionality with python.
I would use sys.last_value for this:You may choose to use getattr(sys, 'last_value', None) in place of the EAFP approach above. It returns None if sys.last_value isn't available.Alternatively, if there's just one function you want to run only when the interpreter shutdown is caused by an exception, you could use sys.excepthook:
When an exception is raised and uncaught, the interpreter calls sys.excepthook with info about the exception. The default function prints out a given traceback and exception to sys.stderr. You can replace this function with a function which save this data. Later you can use this data in your atexit handler:


Answer URL
https://docs.python.org/3/library/sys.html#sys.last_value
https://docs.python.org/3/library/sys.html#sys.excepthook
https://docs.python.org/3/library/sys.html#sys.excepthook
