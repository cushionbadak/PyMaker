Natural Text
I am trying to find the path to the MATLAB executable using Python when it is not in PATH. I am using subprocess.Popen to execute locate and grepping the result, however this creates a Resource Unavailable error:The result variable is empty and err variable is :
I have tried your code on linux with python 3.5.2 and 3.6.1 and it does work:For the records: locate find gives 1619 lines.For completeness I have also tried locate fdafad (gibberish) and it also works.It does also work when the code is in a script.edit:Try to use communicate to interact between to two processess:NOTE: the second part of the answer has been written before the asker updated the question with information about the PATHHowever there is a much better ways to find executables using python:If you insist in using shell functions, why don't use something like which.
Adding just a little bit more information on why this error occurred. This looks to be a problem with eventlet using "green" threads and non-blocking IO and locate not generating output fast enough. That is, eventlet assumes that the stdout is to be used by python. Eventlet uses non-blocking IO to assist in cooperative threading. This means the file descriptor behind locate.stdout that you pass to grep has already been set to non-blocking. If grep tries to read from stdin when it is empty then you will get that error.An easy solution would be to do both commands in a single shell (so Python doesn't get to mess with the pipe between the two sub-processes).eg.


Answer URL
https://docs.python.org/3/library/subprocess.html#subprocess.call
