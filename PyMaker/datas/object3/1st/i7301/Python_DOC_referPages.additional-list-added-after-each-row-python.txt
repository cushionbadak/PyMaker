Natural Text
There is a discrepancy in execution of code in repl.it (which works fine, presumably because the bugs in Python have been fixed/updated), and IDLE, in which the code does not work correctly. I have consulted the documentation, and previous stack overflow answers to add the "newline", but the problem persists. You'll notice the repl it, here: (works perfectly)https://repl.it/Jbv6/0However, in IDLE on pasting the file contents (without a line break) it works fine but on pasting the file contents into the txt file as it should be (with each record on a new line) as so:the error on output is as follows (produces a new list after each line):The code is here:I have tried, as the documentation, and previous answers on stackoverflow suggests, adding this: (the newline)Unfortunately the error persists. Any suggestions/solutions with an explanation would be appreciated.Update, I also tried this:again, it works perfectly in replithttps://repl.it/Jbv6/2but this error in IDLEThis is a huge issue for students who need to be able to have consistency across both repl.it and IDLE which is what they are working on between their school and home environments.Any answer that shows code that allows it to work on both is what I'm after.
The answer that is easiest is the following:But your original code should work - I've run it, but on linux rather than windows. If I could ask you to do more work:This will produce a list of ,s but interspersed with either 13,10 or 10, but possibly even something like 10,13,10. These are the \r\n and \n that were talked about, but I'm wondering if you've managed to get that third option somehow?If so, I think you'll need to rewrite that text file to get normal line endings.-- (update in response to comment)The only advice I have regarding the 10,13,10 is to only edit the text file in one application (say, notepad), and never edit it in another.The actual problem comes from editing the file in two applications, which each have a different interpretation of what the line endings should be (windows applications should be \r\n, "repl.it" is \n. I've come across it before, but never worked out the sequence of actions required.
Try use codecs and explicitly specify the encoding of file to UTF-8.
Using a filter may help:
Pasting strings into a text editor and saving the file will not produce byte-identical files on different platforms. (Even different editors on the same platform are inconsistent!)However, the CSV format accepted by the csv module is specified in terms of a byte-exact representation. The behavior can be customized by using a dialect (either a built-in dialect or implementing a new one) -- see the Python documentation for details. The default dialect is excel which requires Windows-style line endings (CR/LF). If you save the file in a different format it will not be parsed correctly.


Answer URL
https://docs.python.org/3/library/csv.html
