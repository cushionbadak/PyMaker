Natural Text
I have written a Python class that cannot possibly support pickling. Still, every now and then a user tries to pickle instances of this class, which leads to confusing errors. Therefore I wish to throw a custom, informative error message whenever any attempts to pickle instances of my class are made.How do I best go about doing this?I am particularly interested in solutions that have a broad coverage, i.e., do not only work for the standard-library pickle but also for alternatives to it.As to what I’ve found so far, I’ll write a self-answer, but I am not sure whether that’s the best way.
From reading the documentation, I gathered that if the class has a __getstate__ method, it will be called when a pickling attempt is made. Therefore, a solution is to overwrite this method to raise an exception, for example:This appears to work:


Answer URL
https://docs.python.org/3/library/pickle.html#object.__getstate__
https://docs.python.org/3/library/pickle.html#object.__reduce__
https://docs.python.org/3/library/copy.html#copy.copy
https://docs.python.org/3/library/copy.html
