Natural Text
I'm trying to perform sqlite3_exec from python to extract line by line the contents of a database. According to the C API, I need a Callback function which will perform the iteration. I have coded the following with a lot of help from internet:UPDATED with @eryksun pi√®ces of adviceBefore moving on to the python callback function I have some doubts:Is "SELECT * FROM *" a possible SQL statement to avoid providing the name of a table (because I do not know it)?Is the first argument of both functions sqlite3_open_v2 and sqlite3_exec the path to the database?If all that is ok we can move on to the callback function. According to what I found on the net, the C callback function should be somewhat similar to:That is why I coded the CFUNCTYPE you see on my code. How can I code a python function which matches the callback needed to maybe fill a list with the database contents?I have added the proposed changes on the code, the callback function just prints the value to verify the output. But It wont work I get an error:Many thanks in advance!FINAL WORKING EDITION (@eryksun comments and @MarkTolonen solution)This is working, however, I will look into argtypes and the opaque type.Thank you all!
Tested in Python 2.7 and Python 3.6 (if you change the DLL path) using the following database:Code:Output:I also recommend setting argtypes because it helps catch type errors and for some parameter types (like c_double) it is required.


Answer URL
https://docs.python.org/3/library/sqlite3.html
