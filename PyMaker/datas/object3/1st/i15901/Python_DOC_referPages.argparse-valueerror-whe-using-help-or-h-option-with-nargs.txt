Natural Text
Whe using argparse I get this weird ValueError for help option.All other options work fine. Only the help option is not working, which is weird.Here is the error message:Here is my codeNow I can't find out why this ValueError comes and that too only for --help option.
Quoting the documentation:Note that the program name, whether determined from sys.argv[0] or from the prog= argument, is available to help messages using the %(prog)s format specifier.Try usage = "%(prog)s [-f credential_file]"
The issue is that when argparse attempts to interpolate your usage string Python sees the following character sequence: %p.  Since p is not a valid conversion flag, Python raises the ValueError.You can generate this error yourself at the REPL:The reason this is happening is because you use %prog rather than the correct %(prog)s (note the parenthesis around the key in %s).  Change usage = "%prog [-f credential_file]" to usage = "%(prog)s [-f credential_file]" as Rob suggests and everything will work.Why does argparse use this formatting syntax?argparse provides metadata like the program's name via named format arguments to allow the arguments to appear in any order, and to allow for repetition.  Positional arguments cannot be re-used and must appear in the same order as they are provided:while named arguments can be repeated and used in any order:


Answer URL
https://docs.python.org/3/library/argparse.html#prog
