Natural Text
I'm trying to make the below generator to be able to set an upper limit on the numbers returned.Calling list(it.takewhile(lambda x: x < 100, get_primes())) returns a list of all primes under 100 as expected but list(get_primes(100)) (which should return the same list in the same way) just returns with an empty list.Obviously, I could include an if n and candidate>=n: break in the for loop but I'm mostly interested in why the if n: return construct doesn't work like I'm expecting it should. Shouldn't it just return the same takewhile iterator that works above? What am I overlooking here?
Here:Since this is a generator, it needs to yield these values instead of returning them. Depending on your Python version, you might be able to use the yield from syntax.The following might be useful as background reading: Return in generator together with yield in Python 3.3
The problem is with the line Since it's a generator, returning something stops the execution, and raises StopIteration(). You need to return the values in generator


Answer URL
https://docs.python.org/3/whatsnew/3.3.html#pep-380
