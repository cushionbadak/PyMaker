Natural Text
I am successfully communicating with a simple device over serial, with a specific request packet, and a fixed format return packet is received. Im starting with python so I can use this on multiple devices, I'm only really used to PHP/C. For example, I send the following as hex:and in return I getI know how the packet is constructed, the first 5 bytes is the data that was sent. The next 3 bytes are an ID, the packet length, and a response code. Its commented in my code here:To keep it simple for now, I was just trying to read the first two bytes of the actual response (ResponseData), which should give me the hex 0318. I then want to output that as a decimal =792. The program is meant to run in a continuous loop.Some of the variables in the packet are one byte, some are two bytes. Although, up to now I'm just getting an error:I'm guessing this is due to the format of the data/variables I have set, so not sure if I'm even going about this the right way. I just want to read the returned HEX data in byte form and be able to access them on an individual level, so I can format/output them as required.Is there a better way to do this? Many thanks.
As your code stands now, you send binary (not hex) data over the wire, and receive binary (not hex) data back from the device. Then you convert the binary data to hex, only to convert it again to Python variables.Let's skip the extra conversion step by using struct.unpack:
I recommend using the struct module to read binary data, instead of recoding it using string functions to hex and trying to parse the hex strings.


Answer URL
https://docs.python.org/3/library/struct.html
