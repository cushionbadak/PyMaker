Natural Text
Currently, we are building a robot with a raspberry pi and the AX-12 dynamixel Servo's. We found a python2 library we a currently porting to python3, we pinpointed the problem in a specific method that gives an error in python3.The Python 2 version actually works like a charmWhat we have tried is adjust this variable:Now the script runs, sadly the Servo won't work anymore.We also tried to place the bytes in a byte arrayThe script runs but the servo won't run.My believe is that the operations done to outData is different in python3 then in python2. I can't find out what should be adjusted or different.Anybody sees what I am currently doing wrong?
Your bytes are not UTF-8 data; for any of your chr() values you create outside the range 0 - 127, encoding to UTF-8 produces two bytes.You were creating Unicode codepoints from integer values; these create Latin-1 codepoints if you limited those to integers between 0 and 255; in principle you could encode to 'latin1' to get the bytes again, but it is much easier to just create bytes in the first place.In Python 3, use the bytes type, created from a list of integers:Your own attempt did not include the id value and you used AX_REG_WRITE rather than AX_WRITE_DATA.You could also use a bytearray() object, which would let you append additional bytes; you could use that to calculate the checksum by referencing the bytes produced so far, avoiding having to repeat yourself (a common source of errors):You could use concatenation too of course (outData = bytes([...]), outData += bytes([checksum])) but bytearray is also available in Python 2, so the above version is compatible with both major Python versions.


Answer URL
https://docs.python.org/3/library/functions.html#bytearray
