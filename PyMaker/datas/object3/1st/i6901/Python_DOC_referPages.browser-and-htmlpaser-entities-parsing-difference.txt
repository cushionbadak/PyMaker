Natural Text
I have the following character &#151; from the HTML of a webpage. And it renders like "—" (EM DASH) on the webpage (via Google Chrome browser if it is matter). No matter how I play with file encoding ("utf-8", "cp1251", "cp866") it is always "—" on the webpage. But when I run the following python code:it outputs some control symbol which is "End of Guarded Area" in unicode table.What python code should I use to get "—" from the &#151; string/unicode string. I use python2.7
The numeric value in the character reference (151 in your case) refers to Unicode codepoint 151 (0x97), which is in the Latin-1 Supplement where it represents a control character.Most likely the invalid value 151 is being used because it corresponds to the dash character in Windows code page 1252. That it is rendered as em dash by browsers is probably an attempt to handle this common error.The correct character reference for em dash is &#8212.While Python 2 struggles with this, in Python 3 the html.unescape() function explicitly handles invalid character references as specified in the HTML 5 spec. You might solve your problem by using Python 3, if possible:If you can't use Python 3 you could copy the code from the Python 3 html module (see the __init__.py file) and pass the HTML code through it before handing off to HTMLParser.


Answer URL
https://docs.python.org/3/library/html.html#html.unescape
