Natural Text
I'm receiving an error of AttributeError: __exit__ in the code below after finishing the with section. The Element object has is being returned in the with and it has __exit__ defined, so I'm baffled.
The value of expression after with keyword must be a valid context manager. That means the value of the expresion must have attributes __enter__ and __exit__ and these must accept parameters described in docs With Statement Context Managers. You can easily verify that the part aa.feed would be acceptable, but the value of whole expression is None and it has no necessary attribute. A difference between Python 3.5 and 3.6 is that one fails on missing __exit__ and the latter on missing __enter__. Nothing unexpected.You also forgot self in the line def __call__(self, *args, **kargs): that would be a problem if you will use args and it is a pythonic pattern also with unused args.


Answer URL
https://docs.python.org/3/reference/datamodel.html#context-managers
