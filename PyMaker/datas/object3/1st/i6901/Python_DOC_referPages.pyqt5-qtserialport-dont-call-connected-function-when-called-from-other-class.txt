Natural Text
I have strange (for me) problem about calling PyQt5.QtSerialPort from other class:This is serial code class implementation I'd like to call from other dialog or class:When I execute this code alone I got result from rcvData_signal(self,bms) function which print bms number.So I'd like to use this class as general serial data source from com port.I wrote this code just to test Com_port class:In this case I cant' get any data from Com_port instance :(But when I uncoment this line #ComPortApp = Com_port(port="COM5",baudrate=115200) at the bottom of the code (and comment all lines about com port in class bms_singe), I got all data from Com_port instance. What is wrong with calling Com_port class from bms_single class ?
According to the documentation:'__main__' is the name of the scope in which top-level code executes.  A moduleâ€™s __name__ is set equal to '__main__' when read from standard input, a script, or from an interactive prompt.[..]From the above we conclude that only an if __name__ ==" __main__ "is executed:". If this same expression exists in other files, they will be omitted. So you should not use the variable ComPortApp since it does not exist, the correct thing is to use the variable ser, in your case it changes:to:The other problem is that the object ser is being eliminated by the garbage collector, there are 2 options:Making the variable ser class member for it changes to being in self.ser in the bms_single class. Passing the parent attribute to the Com_port class, you have to change the following:and I also recommend changing QWidget.__init__(self, parent) to QMainWindow.__init__(self, parent)Lastly do not forget to create and display an instance of bms_single in the main.


Answer URL
https://docs.python.org/3/library/__main__.html
