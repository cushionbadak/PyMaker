Natural Text
I've a list that can have mixed str and unicode strings:I need to convert every list item in unicode if the item is a str. To convert a str to unicode I use:The problem is that if the string is already unicode and contains a non-ascii character, if I try to decode it I get UnicodeEncodeError: 'ascii' codec can't encode character ...so I thought something like:But this actually deletes from the list the unicode strings.
You are filtering (removing non-matching elements); you need to use a conditional expression instead:The <true> if <condition> else <false> expression here produces an output, always. Here that is the decoded string, or the original object unchanged if it is not a str object.
Try this:
While you could use a ternary expression in your list comprehension to correctly convert elements, in my opinion it would be cleaner to extract the logic to a separate helper function:Then you can simply call the function on each element of your list:


Answer URL
https://docs.python.org/3/reference/expressions.html#conditional-expressions
