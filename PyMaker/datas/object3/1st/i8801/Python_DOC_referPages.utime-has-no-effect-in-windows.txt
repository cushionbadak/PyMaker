Natural Text
I have a python script which is supposed to loop through all files in a directory and set the date of each file to the current time. It seems to have no effect, i.e. the Date column in the file explorer shows no change. I see the code looping through all files, it just appears that the call to utime has no effect.The problem is not this because most of the dates are months old.  Edit:In case anyone reads this in the future, it is also important to note the the file explorer can display more than 1 kind of date
You've got three issues:You're using the file name, not the full path, when touching, so all the touching occurs in the working directoryYou're stripping the file extension too, so the touched files lack extensionsYou're touching files to which you have an open file handle, and on Windows, on Python 2.7, this is a problem, because os.utime opens the files with no sharing allowed, which is incompatible with existing open file handlesTo fix #3, change your touch method to:To fix #1 and #2, change your main method to call touch like so:which uses the original name and joins it with the root directory being traversed, where touch(filename) was touching a file without the extension, in the program's working directory (because you used an unqualified name). If you find your program's working directory (print os.getcmd() will tell you where to look), you'll find a bunch of random empty files there corresponding to the files found in the tree you were traversing, stripped of paths and file extensions.Side-note: If you can move to Python 3 (it's been a while, and there are a lot of improvements), you can make a slightly safer (race-free) and faster touch thanks to file descriptor support in os.utime:Not all systems will support file descriptors, so if you need to handle such systems, define touch based on testing for file descriptor support via os.supports_fd.
os.utime does work on Windows but probably you are looking at the wrong date in explorer. os.utime does not modify the creation date (which it looks like is what is used in the date field in explorer). It does update the "Date modified" field. You can see this if you right click on the category bar and check the "date modified" box. Alternatively start a command line and type "dir". The date shown there should reflect the change.I tested os.utime on python 2.7 where you have to give two arguments:and on Python 3 where the second argument defaults to None:


Answer URL
https://docs.python.org/3/library/os.html#os.supports_fd
