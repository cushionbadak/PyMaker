Natural Text
I have a piece of code that takes in data from a LabJack and a proximity sensor. It runs on an infinite loop recording voltage values until the user stops it. However, I have been noticing something weird where my list of x-axis time values seem to have a lot more numbers than the resolution of my plots is showing. Namely, my x-axis time values seem to plot a point only every 10 milliseconds, but my program is collecting 5000 data points every 3.8 seconds, which should equate to a data point less than every 1 millisecond.Then I looked at my data and I saw the problem. Below are the first couple dozen numbers in my list of x-axis values.[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.04999999999999716, 0.04999999999999716,... etc.For some reason, the code is repeating each time value 10 or more times before increasing the value by 10 milliseconds and doing the same thing. Below is the code loop that records the voltage and time. The relevant lines are the ones where I define self.t0, tcurr and t.Any help is appreciated!
It just looks like each of your loop is being completed in less than minimum resolution of datetime.datetime. I wrote simple script to see if sub-millisecond resolution is recorded. It looks like it is. Also, since you're only measuring time elapsed and don't need advanced formatting, timezones etc, using time.time() will give you better time resolution than datetime module.TEST 1TEST 2even with a very small BIG_NUM, the times recorded in lst1 were increasing but there were repeated entries in lst2. But if you remove the inner loop altogether, it was possible to have some repeated entries, simply because the operation completed in smaller than the resolution provided by the time.time()TL;DR: Use time.time(). If there are still repeating entries, the operations inside are happening faster than highest resolution time available to you.


Answer URL
https://docs.python.org/3/library/time.html#time.perf_counter
