Natural Text
I'm asking how to mock a class property in a unit test using Python3. I've tried the following, which makes sense for me following the docs, but it doesn't work:foo.py:I've installed pytest and pytest_mock and run the test like this:I got the following error:My expectation would be that the test runs without an error.
The property mechanism depends relies on the property attribute being defined on the object's class. You can't create a "property like" method or attribute on a single instance of a class (for a better understanding, read about Python's descriptor protocol) Therefore you have to apply the patch to your class - you can use the with statement so that the class is properly restored after your test:
You are missing a @bar.setter.


Answer URL
https://docs.python.org/3/reference/datamodel.html#implementing-descriptors
