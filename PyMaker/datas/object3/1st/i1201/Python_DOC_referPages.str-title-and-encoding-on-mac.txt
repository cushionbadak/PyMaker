Natural Text
Let's say I have 3 folders named "Grégory MM", "Loïc RR" and "Danièle RR" (spaces and accented letters). Then I use the following code to get all the names with only the first letter capitalized:If the folders were created with mkdir from a Terminal I have the expected result:If the folders were created from the Finder, I get:The first letter after each accented letter is capitalized. Is that a known behavior? How can I avoid it?Python version 3.7.0System: macOS Mojave 10.14.1and sys.getfilesystemencoding() returns 'utf-8'
This is most likely a matter of whether the accented letters use combining accent characters or single accented code points. I don't know what file names you actually have on your system, but putting the names in NFC form (with single accented code points):we get no capital after the accent, while in NFD form (with combining accent characters):we get the capital.It looks like title() thinks the combining character marks a word boundary. NFC normalization can help somewhat, but not for weird accent combinations for which a dedicated code point doesn't exist. For more robust handling, you may want to look for a more powerful Unicode handling library than Python's built-in string methods.
We actually have two different strings:\xc3\xaf is ï and \xcc\x88 is ̈, \xcc\x88 is recognized as punctuation, so that's the reason why title() capitalizes your letter.You can normalize your string with unicodedata.normalize():


Answer URL
https://docs.python.org/3/library/unicodedata.html#module-unicodedata
