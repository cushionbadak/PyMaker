Natural Text
I'm writing a Python 3.6 program on Windows to record all the input to a subprocess for backup. (I cannot modify the subprocess code as the real program is a commercial product (exe file) and I don't have the source code.) I tried the following code, and it doesn't work. The text only shows in the terminal, and the txt files used for logging are empty.Main.py:Hello.py:Expected result:In terminal:stdin.txt:stdout.txt:I've asked a more general question before (Capture inputs to subprocess.run()), but there aren't any practical answer.
subprocess will very likely bypass this because it uses the fileno directly.Use stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE.However, it is not totally straightforward how to forward everything then. Maybe the easiest way is to have 3 threads, one for each stdin, stdout, and stderr, where you read from the source (e.g. sys.stdin, or process.stdout) and then write it to the file and to the target (process.stdin, or sys.stdout).See also here for some other options.


Answer URL
https://docs.python.org/3/library/asyncio-subprocess.html
