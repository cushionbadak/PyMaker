Natural Text
By using os.walk() to traverse the folder like this:There will throw a exception: UnicodeDecodeError, I want to ignore the exception and continue, and I tried this:as the comment says, the continue in exception part is a syntax error. Is there a way to ignore the exception and continue to traverse?The exception is thrown from os.walk(), so put the try/except within for can not catch the exception. The os.walk() will return a python generator, How to catch the exception within it?
Update:I originally thought that the error was being raised by the do something... code.  Since it is actually being raised by os.walk, you will need to do something a little different:Basically, this is taking advantage of the fact that os.walk returns a generator object.  This allows us to call next on it and thereby have control over the iteration during each step.The subdir, dirs, files = next(walker) line attempts to advance the iteration.  If a UnicodeDecodeError is raised, it is logged and we continue on to the next step.  If a StopIteration exception is raised, it means that we are done walking the directory tree.  So, we break the loop.Since continue needs to be inside the loop, you will need to move the try/except block in there as well:Also, doing:has been deprecated.  You should be using the as keyword in place of ,:While you're at it, you should replace the generic Exception with the specific UnicodeDecodeError:You should always try to catch the most specific exception that you can.  Otherwise, you run the risk of accidentally catching an exception that you did not mean to handle.
I had a similar situation while iterating over links using Beautiful Soup. This is the code I wrote for that:An example:You can fix your code by using above code:Above code can be extended more to have callbacks per skipped exception types if needed, but it may be more pythonic to use iCodez's answer in such a case.



Answer URL
https://docs.python.org/3/glossary.html#term-generator
https://docs.python.org/3/library/functions.html#next
