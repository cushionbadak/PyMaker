Natural Text
I am making a library that deals with Python modules.  Without getting into details, I need a list of the common Python module extensions.Obviously, I want .py, but I'd also like to include ones such as .pyw, .pyd, etc.  In other words, I want anything that you can import.Is there a tool in the standard library which will make this list for me?  Or do I have to make it myself (and hardcode all of the values)?
This functionality can be found in the importlib.machinery module. Inside, there are numerous constants which relate to the various Python module extensions:So, you could very easily join these into a global set1:You might also be interested in the all_suffixes function:Note however that this function will replace .pyc with .pyo if Python is launched with either the -O or -OO options.  To avoid this, you can do:This will ensure that both .pyc and .pyo are in the set.Finally, you should be wary of importlib.machinery.BYTECODE_SUFFIXES.  As @MartijnPieters noted in the comments, it will always be equal to either OPTIMIZED_BYTECODE_SUFFIXES or DEBUG_BYTECODE_SUFFIXES.  This means that if you add it to the collection, you will get either a duplicated .pyc or a duplicated .pyo value (unless you use a set of course).From the docs:importlib.machinery.BYTECODE_SUFFIXESA list of strings representing the recognized file suffixes for bytecode modules. Set to either DEBUG_BYTECODE_SUFFIXES or  OPTIMIZED_BYTECODE_SUFFIXES based on whether __debug__ is true.I didn't bother using this constant however because I want both OPTIMIZED_BYTECODE_SUFFIXES and DEBUG_BYTECODE_SUFFIXES in the collection.  So, there is no reason to add it.1I decided to use a set because they have a faster lookup time than lists.  Meaning, they are better suited for a global collection of values that will not change and which needs no particular order.  In addition, they will ensure that we do not accidentally add duplicate extensions to the collection.


Answer URL
https://docs.python.org/3/library/importlib.html#module-importlib.machinery
https://docs.python.org/3/library/importlib.html#importlib.machinery.all_suffixes
https://docs.python.org/3/using/cmdline.html#miscellaneous-options
https://docs.python.org/3/library/importlib.html#importlib.machinery.BYTECODE_SUFFIXES
https://docs.python.org/3/library/importlib.html#importlib.machinery.BYTECODE_SUFFIXES
