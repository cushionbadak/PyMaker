Natural Text
I am trying to setup logging between multiple processes using the QueueHandler.  I am seeing the same log in the log file printed multiple times.  Using this as a template (https://docs.python.org/3/howto/logging-cookbook.html#logging-to-a-single-file-from-multiple-processes)EDITmulti processing file:test file:The issue I see is that the test.log file contains multiple lines for the same entry.  The program stops now and doesn't run indefinite but still seeing multiple linesI removed test.log before the run to rule out the append onto an existing log file, but still seeing multiple logs.Thanks
Your problem is caused by the fact that you're checking for a None to break out of the loop, but that will never come because a QueueHandler always writes a LogRecord to a queue, never None. If you want to write None to the queue, you need to write it directly rather than by doing po.logger.info(None). For example, store the queue as an attribute named queue of your MulitProcessQueueLogger instance and then do po.queue.put(None) in worker().


Answer URL
https://docs.python.org/3/howto/logging-cookbook.html#logging-to-a-single-file-from-multiple-processes
