Natural Text
I am using this wrapper here:https://github.com/mondeja/bittrex_v2and I use this code here:The print (ba) puts out this:https://pastebin.com/x5AVLDXH (it's very long)how do i convert that into JSON? I know it needs double quote instead of single quote and the Decimal('#') is not right...Or how would I edit the wrapper to make it print it in to JSON?Thanks !
It looks like you printed out a dict, not a string. If so, you definitely don't want to convert it that dict to its string representation, and then try to convert that string representation to a JSON string. You just want to encode the dict to JSON directly.The only obvious tricky bit is converting Decimal values to something JSON can handle. You have to decide what you wantâ€”maybe just convert to float, maybe convert to float but also verify that you're not losing any precision in doing so, maybe convert to string, or maybe even convert to some special pickle-ish thing like {'type': 'decimal.Decimal', 'args': ['0E-8']}. Which one you want depends entirely on how you're planning to use the JSON later.Once you've decided what you want to do, it's pretty easy. The docs for json.Encoder have an example showing how to support arbitrary iterators by converting them to lists, which is pretty easy to adapt to, say, support Decimals by converting them to floats:I haven't tested against your dict, or laboriously scanned through to see if there are any other weird types. But if there are, you handle them the same way as Decimal.


Answer URL
https://docs.python.org/3/library/json.html#json.JSONEncoder.default
