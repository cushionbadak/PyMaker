Natural Text
I want to run a pyCUDA code on a flask server. The file runs correctly directly using python3 but fails when the corresponding function is called using flask.Here is the relevant code:cudaFlask.py:server.py (only the part which calls the function):On running python cudaFlask.py I get the output done as expected but on starting the server and doing POST request at website/bundle I get the following error on the flask console:on the line mod = SourceModule...Where am I going wrong?There is a similar question out there but it has not been answered yet.
Solved the issue with lazy loading in flask and making the context manually (i.e. without pycuda.autoinit in PyCUDA.Refer this for lazy loading in flask.My views.py file:
PyCUDA may not be compatible with WSGI web server contexts.You could possibly make it work if you use some kind of message queue like Celery, where the HTTP request places a job on the queue and the worker on the other side of the queue runs the CUDA program.Edit: A quick and easy way would be to use Python Subprocess check_output functionIn the web request:subprocess.check_output(['python', 'cudaFlask.py'])


Answer URL
https://docs.python.org/3/library/subprocess.html#subprocess.check_output
