Natural Text
I am currently facing a problem to make my cvs data into dictionary.I have 3 columns that I'd like to use in the file:I would like to make the result look like this:That is to say,I would like to make my data structure look like:but I have a lot of data to be processed.I'd like to get the result with loop, but i have tried for 2 hours and failed..---the following codes may confuse you---My result look like this now:the value of the dict is a list rather a dictionarythe user "U1000" appears multiple times but in my result theres only one timeI think my code has many mistakes.. if you don't mind please take a look:how can I improve the codes?I have looked through stackoverflow but due to personal lacking in ability,can anyone please kindly help me with this? Many thanks!!
This should do what you want:defaultdict is a convenience utility that provides default values whenever you try to access a key that is not in the dictionary. If you don't like it (for example because you want sample['non-existent-user-id] to fail with KeyError), use this:
The expected output in the example is impossible, since {'1333': 2} would not be associated with a key. You could get {'U1000': {'12222': 3, '1333': 2}, 'U1001': {'13333': 4}} though, with a dict of dicts:Alternatively, using collections.defaultdict(dict) to avoid the need for setdefault (or alternate approaches that involve a try/except KeyError or if userID in sample: that sacrifice the atomicity of setdefault in exchange for not creating empty dicts unnecessarily):The conversion back to plain dict ensures future lookups don't auto-vivify keys, raising KeyError as normal, and it looks like a normal dict if you print it.If the included_cols is important (because names or column indices might change), you can use operator.itemgetter to speed up and simplify extracting all the desired columns at once:


Answer URL
https://docs.python.org/3/library/collections.html#defaultdict-objects
https://docs.python.org/3/library/collections.html#collections.defaultdict
https://docs.python.org/3/library/stdtypes.html#dict.setdefault
