Natural Text
I have a class or extension type written in cython like this:I created a python module from this cython file (which its name is som.pyx) using distutils , then I import this in python and used it to create and train a model , but when I want to save my model using pickle it gives me this err :TypeError: can't pickle som.Self_Organized_Map objectswhat is wrong with pickle or my code ? does pickle cant save extension object ?
Since Cython 0.26 (released July 2017), cdef classes can automatically be pickled, as long as they do not contain pointers or unions. For classes containing structs, automatic pickling can be enabled with the @cython.auto_pickle(True) decorator. It is disabled by default due to high code overhead an other reasons.More information can be found in the changelog and on the website of Stefan Behnel.
Cython classes aren't pickleable by default, so you need to implement the Pickle interface yourself. There's a number of different levels you can do this on but __getstate__ and __setstate__ is the most user-friendly level so it's a good place to start unless you have good reasons otherwise.Where the contents of the class are pickleable it's as easy as returning a tuple of them in __getstate__ and the reverse operation in __setstate__. Memoryviews themselves aren't pickleable, but have a base attribute that may be.If your class holds a C or C++ object then it's much more complicated. For simple types good places to start are just copy the memory into a bytearray or to take advantage of Cython's default struct<->dict interconversion. However if the class contains pointers then this won't work and you need to implement a reliable load/save mechanism for it in C/C++.


Answer URL
https://docs.python.org/3/library/pickle.html#pickle-inst
https://docs.python.org/3/library/pickle.html#what-can-be-pickled-and-unpickled
