Natural Text
I'm trying to catch an exception in a thread and re-raise it in the main thread:This basically works and yields the following output:However, the source of the exception points to line 16, where the re-raise occurred. The original exception comes from line 7. How do I have to modify the main thread so that the output reads:
In Python 2 you need to use all three arguments to raise:passing the traceback object in as the third argument preserves the stack.From help('raise'):If a third object is present and not None, it must be a traceback  object (see section The standard type hierarchy), and it is  substituted instead of the current location as the place where the  exception occurred.  If the third object is present and not a  traceback object or None, a TypeError exception is raised. The  three-expression form of raise is useful to re-raise an exception  transparently in an except clause, but raise with no expressions  should be preferred if the exception to be re-raised was the most  recently active exception in the current scope.In this particular case you cannot use the no expression version.For Python 3 (as per the comments):or you can simply chain the exceptions using raise ... from ... but that raises a chained exception with the original context attached in the cause attribute and that may or may not be what you want.
This code snippet works in both python 2 & 3:
Could you write it somewhat like this:and then use the stacktrace from the exception?


Answer URL
