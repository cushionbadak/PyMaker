Natural Text
I am using some pretty standard code:I remove the directory and the check at 1 drops through to 2. I one-step beyond that and hit the error message at 3. However, when I check, the directory was created successfully. What am I missing??
os.makedirs does not indicate whether it succeeded through its return value: it always returns None.None is False-y, therefore, not os.makedirs(args.outputDirectory, 0o666) is always True, which triggers your sys.exit code path.Fortunately, you don't need any of that. If os.makedirs fails, it'll throw an OSError.You should catch the exception, not check the return value:If no OSError is thrown, that means the directory was successfully created.
You don't need to call os.path.exists() (or os.path.isdir()); os.makedirs() has exist_ok parameter.And as @Thomas Orozco mentioned, you shouldn't check os.makedirs()' return value because os.makedirs() indicates errors by raising an exception instead:Note: Unlike os.path.exist()-based solution; it raises an error if the path exists but it is not a directory (or a symlink to a directory).There could be issues with the mode parameter, see the note for versions of Python before 3.4.1


Answer URL
https://docs.python.org/3/library/os.html#os.makedirs
