Natural Text
weird.py:Python session:Why does "toplevel" print before "f"?This doesn't happen if the end = '' or the file = sys.stderr are removed.
Because stdout and stderr are line buffered. They buffer characters and only flush when you have a complete line.By setting end='' you ensure there is no complete line and the buffer isn't flushed until later when the Python interactive interpreter outputs >>> and flushes the buffer explicitly.If you remove file=sys.stderr you output to sys.stdout again, and you printed toplevel\n as print() adds a newline, thus flushing the sys.stdout buffer.You can explicitly force a flush by setting the flush=True argument to the print() function (Python 3.3 and up) or by calling sys.stdout.flush().


Answer URL
https://docs.python.org/3/using/cmdline.html#cmdoption-u
