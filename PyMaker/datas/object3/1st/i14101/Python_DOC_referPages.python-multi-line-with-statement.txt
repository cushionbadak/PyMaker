Natural Text
What is a clean way to create a multi-line with in python? I want to open up several files inside a single with, but it's far enough to the right that I want it on multiple lines. Like this:Unfortunately, that is a SyntaxError. So I tried this:Also a syntax error. However, this worked:But what if I wanted to place a comment? This does not work:Nor does any obvious variation on the placement of the \s.Is there a clean way to create a multi-line with statement that allows comments inside it?
Given that you've tagged this Python 3, if you need to intersperse comments with your context managers, I would use a contextlib.ExitStack:This is equivalent toThis has the benefit that you can generate your context managers in a loop instead of needing to separately list each one. The documentation gives the example that if you want to open a bunch of files, and you have the filenames in a list, you can doIf your context managers take so much screen space that you want to put comments between them, you probably have enough to want to use some sort of loop.As Mr. Deathless mentions in the comments, there's a contextlib backport on PyPI under the name contextlib2. If you're on Python 2, you can use the backport's implementation of ExitStack.
This seems tidiest to me:
This isn't exactly clean, but you could do this:There are no syntax errors, but it's not the cleanest. You could also do this:Consider finding a way of doing this without using the comments in the middle of the with.


Answer URL
https://docs.python.org/3/library/contextlib.html#contextlib.ExitStack
