Natural Text
I'm looking to add a decorator that runs a video recorder on certain tests like so:I'm having trouble passing the self variable into the decorator as it is need for some attributes. How can I do this?
theodox answer is generally good, but for decorators you should use functools.wraps function, like in an example below:It will persist original docstrings, original function name (and more). You can read more about it in Python docs.Then, assuming that previous code is in decorators module, you should use it as follows:Note that in the code example it's just @decorators.enable_video, not @decorators.enable_video(self). As like in jonrsharpe's comment to your question, reference to a self is not present at a decoration time.
Are you sure you need the self reference at all?  More commonly you'd do something like thisAnd you'd apply it like this:If for some reason the decorator actually needed the self reference, you can see where you'd grab it.  This version doesn't include configuring the video recorder in any way, to that you'd use a class rather than a function decorator and pass the configuration as arguments.


Answer URL
https://docs.python.org/3/library/functools.html#functools.wraps
