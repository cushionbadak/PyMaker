Natural Text
I have a large directory with many subdirectories that I am trying to sort, I am trying to copy specific file types to a new folder, but I want to maintain the original subdirectories.This is the code I am using now, but it just copies the files without copying the subdirectories they were originally in, so they are completely unorganized in the new folder.This is the new code using copytree, however now the specific files will not copy, only the subdirectories do.
You can do what you want with the shutil.copytree() function by using its optional ignore keyword argument. The tricky part is that, if given, it must be a callable that returns what, in each directory, should not be copied, rather than what should be.However it possible to write a factory function similar to shutil.ignore_patterns() that creates a function that does what's needed, and use that as the ignore keyword argument's value.The function returned first determines what files to keep via the fnmatch.filter() function, then removes them from the list of everything which is in the given directory, unless they're a sub-directory name, in which case they're left in for later [recursive] processing. (This is what makes it copy the whole tree and what was probably wrong with your attempt to write your own copytree() function).


Answer URL
https://docs.python.org/3/library/shutil.html#shutil.copytree
https://docs.python.org/3/library/shutil.html#shutil.ignore_patterns
https://docs.python.org/3/library/fnmatch.html#fnmatch.filter
