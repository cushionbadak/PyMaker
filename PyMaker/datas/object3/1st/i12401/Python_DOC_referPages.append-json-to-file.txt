Natural Text
I am trying to append values to a json file. How can i append the data? I have been trying so many ways but none are working ?Code:How can I append data to json file when this function is called?
I suspect you left out that you're getting a TypeError in the blocks where you're trying to write the file. Here's where you're trying to write:There's a couple of problems here. First, you're passing a file object to the json.loads command, which expects a string. You probably meant to use json.load.Second, you're opening the file in append mode, which places the pointer at the end of the file. When you run the json.load, you're not going to get anything because it's reading at the end of the file. You would need to seek to 0 before loading (edit: this would fail anyway, as append mode is not readable).Third, when you json.dump the new data to the file, it's going to append it to the file in addition to the old data. From the structure, it appears you want to replace the contents of the file (as the new data contains the old data already).You probably want to use r+ mode, seeking back to the start of the file between the read and write, and truncateing at the end just in case the size of the data structure ever shrinks.Alternatively, you can open the file twice:
This is a different approach, I just wanted to append without reloading all the data. Running on a raspberry pi so want to look after memory. The test code - 


Answer URL
https://docs.python.org/3/library/functions.html#all
