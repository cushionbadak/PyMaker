Natural Text
I am trying to run shell code from a python file to submit another python file to a computing cluster. The shell code is as follows:But when I run it from python like the following I can't get it to work:Is there something I'm doing wrong here?
If I understand correctly, all the #BSUB stuff is text that should be fed to the bsub command as input; bsub is run locally, then runs those commands for you on the compute node.In that case, you can't just do:That's interpreted by the shell as "run bsub -n 1 and read from a file named OH CRAP A COMMENT STARTED AND NOW WE DON'T HAVE A FILE TO READ!"You could fix this with MOAR HACKERY (using echo or here strings taking further unnecessary dependencies on shell execution). But if you want to feed stdin input, the best solution is to use a more powerful tool for the task, the subprocess module:This avoids a shell launch entirely (removing the issue with needing to deal with comment characters at all, along with all the other issues with handling shell metacharacters), and is significantly more explicit about what is being run locally (bsub -n 1) and what is commands being run in the bsub session (the stdin).
The #BSUB directives are parsed by the bsub binary, which doesn't support ; as a delimiter.  You need to use newlines.  This worked for me.*** So obviously I got the python code from @ShadowRanger.  +1 his answer.  I would have posted this as a comment to his answer if SO supported python code in a comment.


Answer URL
https://docs.python.org/3/library/subprocess.html
