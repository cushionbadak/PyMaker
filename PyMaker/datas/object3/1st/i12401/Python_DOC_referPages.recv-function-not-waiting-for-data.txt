Natural Text
I've got a client-server app I'm making and I'm having a bit of trouble when the server wait for data from the client.After my the client connects to the server socket, the server open him new thread and get data from the client (in JSON format).So far, my code works for a single message. When I added while loop, that always accept messages I got a problem. After some tests I found that the recv() function not waiting for new data and continues to the next line, and this is what creates the problem.I will be happy if you can help me fix the problem. my receive data loop (The first iteration of the loop works but Receive data in the second iteration not wait for data and make problem because the next line not get any data)-
If recv() is returning an empty string, it means that the connection has been closed.The socket may be closed either by the client, or by the server. In this case, looking at the server code you posted, I'm almost sure that the client is closing the connection, perhaps because it's exiting.In general, your server code should look like this:Bonus tip: a long JSON message may require more than one call to recv(). Similarly, more than one JSON message may be returned by recv().Be sure to implement buffering appropriately. Consider wrapping your socket into a file-like object and reading your messages line-by-line (assuming that your messages are delimited by newline characters).


Answer URL
https://docs.python.org/3/library/socket.html#socket.socket.makefile
