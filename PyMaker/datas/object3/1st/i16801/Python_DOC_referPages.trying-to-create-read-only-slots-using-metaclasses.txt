Natural Text
I wrote some code based on what I read here, here, and here.Executing the above gives:The slots and read-only behaviour work fine, but apparently there is some problem with the property getters, since while __repr__ which uses _lat and _lon directly is giving the correct values, the attribute accesses using place.lat and place.lon are instead giving the value of place.alt.Please advise me on what is wrong with my code and how to fix it.
The lambda here creates an anonymous function:That function references propname, which is a local variable of the function in which it was defined.  Unfortunately, it's not copying the propname value at that momentâ€”it's keeping a reference to that propname variable, and once you get around to actually using that function, the for loop has completed and propname is left with the last value in roprops; namely, alt.To fix this, you can use a somewhat-hacky-but-widely-recognized way of capturing it by value rather than by reference: create a parameter that shadows the other variable, but with a default value with the value you want:As Karl Knechtel mentions in the comments, you can also use operator.attrgetter, which eliminates the hacky bits altogether:Lastly, as your question was originally posted on Code Review, I'd note that you should probably run your code through pep8.


Answer URL
https://docs.python.org/3/library/operator.html#operator.attrgetter
