Natural Text
I need to change the name and extension of a series of files. The names are currently 'tmax.##.txt', but I need it to be 'tmax_##.txt'. Then, I want to change the .txt extension to .asc. I've tried the below code and the first loop works as expected to produce 'tmax_01'. The second loop runs, but produces unexpected results, 't'.Any suggestions?
Because you're talking of files it may be worth using os.path as it's likely that the next part of your code will be to manipulate these or other files. (just guessing)Gives
You are just assigning new values to a variable in each iteration of the loop. What you want to do is create a new list from the modified elements of an existing list, which is best done with a list comprehension:Note that you can do this, as in my example, in one step - there is no reason to iterate over the list twice, and produce an intermediate list, which is inefficient.You could also do i.replace(".", "_", 1) to only replace the first ., and avoid having to do the awkward hack with the file extension. However, I would personally use i[:-4].replace(".", "_") + ".asc" - that is, cut off the existing extension with a slice, replace the .s, and then add the new extension.If the extensions are likely to vary in length, you may want to look into the os.path module, as suggested by sotapme.
In the first loop: -Your list_conv contains a str object. And it will contain the last element in the list with the appropriate replacement.Then in your 2nd loop: -You are just iterating over string sequence, which will give you 1 character at a time. And list_final will contain the last character with the appropriate replacement done.Since the last character in tmax_03_txt is t, that is why you got t.If you want to do the replacement on each element of the list, then you can use list comprehension, and chaning of method invocation: -
Alternately you could use the string method rsplit.Where ext is the new extension.  The 1 in rsplit() indicates that only the rightmost '.' will act as split point.


Answer URL
