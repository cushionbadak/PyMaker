Natural Text
I need to read the lines of a file in such way that will behave as a shift register with two cell.For example:It can be done with open(file, 'r') but it does not guarantee that the file will be closed as the script may stopdue to of a "do something" before the last iteration.Any elegant way to do it?
Sure:
Tim's answer is a good one. A "fancier" solution is to use the pairwise recipe using itertools.tee shown in the itertoos docs:tee is a pretty neat function. It can be used any time you want to iterate over the same iterable more than once. If you're consuming all of the iterators more or less in parallel (rather than running one iteration to completion, then doing the next, etc.), it can be more space efficient than dumping the whole iterable into a list or some other container that can be iterated over and over.Basically, you pass it one iterable object and it returns a number of independent iterators (by default, two). The original iterable is only advanced as far as is necessary to handle the furthest ahead of the returned iterators.Here's a tee demo with a generator that prints a message before yielding a value:
Tim's answer and Blckknght's answer are good. To add to the pool of solutions, you can also do this using a deque:More generally, you can create a generator that yields from a deque:Note that the above implementation will yield an empty generator if there are fewer values in iterable than n.


Answer URL
https://docs.python.org/3/library/itertools.html#itertools-recipes
