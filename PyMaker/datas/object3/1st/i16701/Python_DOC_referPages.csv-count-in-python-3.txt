Natural Text
I'm switching over my python script into python 3 and I'm having trouble porting a portion of my csv evaluation code.In python 2.7.5, this segment of code worked just fine:Now I've since changed the Order.next() line to next(Order) so it'll work w/ python 3, although I can't seem to find the python 3 equivalent of if (first.count("Web ID") == 1):I've looked through the CSV module documentation for Python 3 and I may have missed something and I am not doing the greatest trying to figure it out. The portion I'm trying to evaulate is this (changed numbers to maintain privacy):The current error is this:any ideas?
The method count is implemented by strings or lists. In your case, you are calling it on a string, which you retrieve from the file object by calling its next method. On Python 3, when you open a file in binary mode, you get an iterable of bytestrings, not strings. Type bytes also implements count, but you can only count occurrences of bytestrings in a bytestring, otherwise you get a TypeError:You are probably going to have to open the file in text mode for CSV parsing anyway, becausethe csv.reader documentation says:csv.reader(csvfile, dialect='excel', **fmtparams)Return a reader  object which will iterate over lines in the given csvfile. csvfile can  be any object which supports the iterator protocol and returns a  string each time its __next__() method is called â€” file objects and  list objects are both suitable.Note the emphasis on the word "string" that I added.  You should open the file in text mode, and preferably, with newline='', as suggested at the linked page.As an aside, you can probably change first = next(order) to first = next(reader). This way you'll have a list of strings (a row), and counting the occurrences of a certain string in it may be more robust.
According to the python documentation of the csv module (https://docs.python.org/3.4/library/csv.html?highlight=csv#csv), in order to translate that method in Python 3 you should use the next() function on your CSV reader object:I hope that this will help youCheers
The problem is in opening the file with mode='rb'. I found that if you open with mode 'r', then it should work:When openning with 'rb', Python3 interpret the file as a series of bytes and read the contents as such. With mod 'r', Python3 reads the file as strings.


Answer URL
https://docs.python.org/3/library/csv.html#csv.reader
