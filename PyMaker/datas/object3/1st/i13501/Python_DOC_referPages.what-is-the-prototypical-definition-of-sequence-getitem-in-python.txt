Natural Text
Right now, I'm doing this:Is this the prototypical __getitem__ for a sequence?  How should it be written?
As correctly given in the comments by @Cristian, the only standard pattern I know of is from documentation -object.__getitem__(self, key)Called to implement evaluation of self[key]. For sequence types, the accepted keys should be integers and slice objects. Note that the special interpretation of negative indexes (if the class wishes to emulate a sequence type) is up to the __getitem__() method. If key is of an inappropriate type, TypeError may be raised; if of a value outside the set of indexes for the sequence (after any special interpretation of negative values), IndexError should be raised. For mapping types, if key is missing (not in the container), KeyError should be raised.But there is another issue I see with your implementation , For each valid call to __getitem__() , that is for something like object[index] . You are creating a new Edge object everytime.So everytime you call object[index] , you would receive a new Edge object (though the contents of that edge object may be identical) , but the object itself would be new.So things like - object[index] is object[index] would most probably fail (would result False) .Unless this is something you intended , you should try caching the Edge objects (and returning from cache if found) . I would suggest using a dictionary to cache the objects (since you seem to be creating objects on the fly , only when accessed) , though you can also use a list, you would just need to initialize the list to have size as self.size .


Answer URL
https://docs.python.org/3/library/functools.html#functools.lru_cache
https://docs.python.org/3/library/weakref.html
