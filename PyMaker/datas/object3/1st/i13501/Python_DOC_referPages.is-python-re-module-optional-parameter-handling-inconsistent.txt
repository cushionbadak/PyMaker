Natural Text
I'm experimenting with the regex RE module in Python 2.7. Documentation states that in the re.sub() function the count parameter is optional. If it's missing or set to 0, all matches will be substituted. But that's not quite the case. Notice in particular the difference in handling when 're.I' or 're.M' are present but group parameter missing:Is this expected behaviour in Python generally? If so, doesn't that mean that the code is unreliable?
Note the declaration of re.sub:The first optional parameter is count, then flag. Both re.M and re.I are integers (with values 8 and 2, respectively), so if you call re.sub(r'o\w','au',a,re.I) then the re.I is interpreted as count=2, not as a flag.Since those are just integers, and evaluated as such before they are passed to the function, there is no way for the Python interpreter to distinguish them from "regular" integers. To the interpreter, re.sub(r'o\w','au',a,re.I) is indistinguishable from re.sub(r'o\w','au',a,2).If you do re.sub(r'o\w','au',a,flags=re.I), on the other hand, then you are explicitly passing it as the flag parameter, leaving count with the default.


Answer URL
https://docs.python.org/3/library/re.html#re.sub
