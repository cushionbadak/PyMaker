Natural Text
I'm using argparse to manage command line options, and I want manage two options, --check and --nocheck.I'm actually doing something like this in mybadscript.py:The problem is that if launch the script this way:python mybadscript.py --nocheck --checkcheck will be set to False. This is incorrect, since the last option is --check.How can I correctly manage them?PS: I know you can easily avoid it using only one option, but I would know how I can manage option precedence with argparse, since you can encounter it in more complicated scenarios.PPS: the suggested answer does incidentally answer my question, but the related question is not the same one.
See the argparse documentation. Here's an example of what you might want. I've included several options you may not need—I thought that was better than leaving them off and you needing them.You may not want the mutually exclusive part—in that case delete the second line and replace group with parser.  If you do so you may wish to add this line:
You have two arguments that independently set two different Namespace attributes, args.check and args.nocheck.  With --nocheck --check input line, both are set.  In:you test nocheck last, so that one overrides check.argparse tries to handle optionals (flagged arguments) in an order independent manner.  If they write to the same 'dest', it's the last one that you will end up seeing.  One way to see what was entered, and in what order, is to use an 'append' action:I could have made the default []The paired 'store_true' and 'store_false' in the other answer is simpler.Better yet, choose one as the default choice, and just provide an option for the other.  As long as the default is clear, there really isn't a need for both arguments.


Answer URL
https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.add_mutually_exclusive_group
