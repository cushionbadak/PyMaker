Natural Text
I am writing a variety of unittest test cases along these lines:Unfortunately they all return an IndexError that the index is out of range. This makes sense, because nothing was passed on the command line. How can I prime sys.argv arguments in order to test methods which take them through a parser, from sys.argv?
You can, by just changing the argv variablebut this is not the recommended way. Rather change the signature of program so that it accepts a list so that you can easily control how it is called.
What you likely got was not simply an index out of range but more specifically:Unlike dict, a list isn't simply something you can assign arbitrary indexes with items, you have append an individual item or extend a list of items.Also, your usage of unittest.TestCase is wrong.  You have to define test methods and not just write your tests under a class declaration.  It should look something like this:Also, you most certainly don't want to dirty up sys.argv like so, you want to make use of setUp and tearDown to clean up the data, so you might have something like this within your test case class:By convention, these two methods should be the first two defined within your test class to make it clear and easy to see for future readers of your test cases.Also, as you can see, you can just simply assign a new list to sys.argv such as the entire list of arguments you want to test against.


Answer URL
https://docs.python.org/3/library/unittest.html#unittest.TestCase
