Natural Text
I want to know whether a generated sequence has fewer than 2 entries.My inefficient method is to create a list, and measure its length:Obviously, this consumes the whole generator.In my real case the generator could be traversing a large network. I want to do the check without consuming the whole generator, or building a large list.There's a recipe in the itertools documentation:This only builds a list of max length n, which is better.So I could say:Is there an even more pythonic, efficient way to do it?
As of Python 3.4, generators can implement a length hint. If a generator implements this it'll be exposed through the object.__length_hint__() method.You can test for it with the operator.length_hint() function.If it is not available, your only option is to consume elements, and your use of the take() recipe is the most efficient way to do that:
The solution using take uses islice, builds a list and takes the length of it:To avoid creating the list we can use sum:This takes about 70% of the time:Wrapping it up:


Answer URL
https://docs.python.org/3/reference/datamodel.html#object.__length_hint__
https://docs.python.org/3/library/operator.html#operator.length_hint
