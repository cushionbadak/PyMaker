Natural Text
I have the following function, which includes a function inside it:However, I don't have access to previously_parsed_tv_urls. How would I access that from within the _get_all_related function?Here is the error I currently get:
If you want to reference an earlier defined name, even in a "higher" scope, Python is generally fine with it. This grants you all sorts of power, especially when you're just messing around in an interpreter.However, Python is also pretty generous at trying to stop you from doing things that can bite you or cause nasty, difficult to debug problems. This is where UnboundLocalError comes in.As soon as you redefine a name in a particular scope, Python marks it as local to that scope (only), and will not look higher to provide a value. This keeps you from accidentally mucking up higher scopes without explicitly requesting it.As Andrea Corbellini mentioned, Python 3 adds the nonlocal keyword to permit you to make just such an explicit request. PEP 3104 pretty exhaustively describes the change in scoping rules this permits, comparing both to Python without nonlocal as well as other common languages of its kind.
You're assigning to previously_parsed_tv_urls inside the inner function. When you do that, Python always makes it a local name throughout the function; so your earlier access of the value will fail with the error you see.However in this case there doesn't seem to be any reason to reassign the name. Instead, you can update the existing set:


Answer URL
https://docs.python.org/3/reference/simple_stmts.html#the-nonlocal-statement
