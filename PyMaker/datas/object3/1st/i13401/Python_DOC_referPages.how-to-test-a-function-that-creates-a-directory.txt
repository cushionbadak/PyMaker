Natural Text
How to test a function in Python which creates a directory? Can you give an example make_directory_test() function?
A good practice here would be to learn how to use testing frameworks like mock or flexmockFurthermore, you should use Python's unittest Framework.Your objective here is not necessarily to make sure that something gets created, but rather that it gets called. So what you would want to do is mock out the external calls to help test the proper flow of your method. So in this case you should mock exists and makedirs. Then ensure that it gets called. That would be an acceptable unit test. You would do something like this: Let us assume your main code is being housed in a module called my_module.py. So you would want to create a test file, let's call it test.py to keep it simple and do something like this in your unit test:So, what's happening here is that you are telling the mock that you want to mock out the makedirs and exists. You are making exists return with a True as specified with the mock_exists.return_value. Then you are making your actual call, your mocks will take effect in that method call. The last line with mock_make_dirs.assert_called_with will ensure that your method for making the dir will actually be called.If you want to still test that something does actually get createdWhat you can do in this case, is maybe venture down the path of using a context manager and create a temporary folder to test in, do your work to test your method and anything else you have to do, and once you are done your work, the context manager will destroy itself. For information on context managers, check out contextlib
Just test that directory existsAnd do ensure that any directories created in unit tests are deleted after each tests in tearDown or setUp, to ensure independency of tests


Answer URL
https://docs.python.org/3/library/unittest.mock.html#where-to-patch
