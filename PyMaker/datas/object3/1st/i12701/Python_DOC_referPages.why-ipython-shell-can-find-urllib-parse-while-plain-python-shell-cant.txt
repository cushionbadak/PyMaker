Natural Text
I have observed the following behavior in python 3.4.2, and I am unableto explain it. Hopefully someone could shed some light on the matter:In IPython:I've imported a module, and printed one of its attributes. Everything works as expected. So far, life is good.Now, I do the same thing from the command line:Say what?! that's not how that's supposed to work.Ok, maybe this is a python-wide behavior; maybe modules are not immediately imported when using the -c flag. Let's try another module:What?! How does it work for datetime and not for urllib? I'm using the same version of python in both places (3.4.2)Does anyone have any thoughts on this?EDIT:Per one of the comments:And
When you run import urllib, it creates the module object of the urllib module (which is actually a package) without importing its submodules (parse, request etc.). You need the parent module object (urllib) to be in your namespace if you want to access its submodule using attribute access. In addition to that, that submodule must already be loaded (imported). From the documentation:if package spam has a submodule foo, after importing  spam.foo, spam will have an attribute foo which is bound to the  submodule. [...] The invariant holding is that if you have  sys.modules['spam'] and sys.modules['spam.foo'] (as you would  after the above import), the latter must appear as the foo attribute  of the former.There is only one instance of each module, thus any changes made to the urllib module object (stored in sys.modules['urllib']) get reflected everywhere.You don't import urllib.parse, but IPython does. To prove this I'm going to create a startup file:and launch ipythonIt is the side effect of importing pydoc during the startup of IPython (which ipython is /usr/local/bin/ipython):This explains why the below code fails - you only import urllib and nothing seems to import urllib.parse:On the other hand, the following command works because datetime.datetime is not a module. It's a class that gets imported during import datetime.
urllib.parse is available from Python 3 onwards. I think you might need to import urllib.parse, not import urllib. Not sure if (when) submodule import is implicit.I would guess IPython imports urllib.parse on startup and that is why it is available.parse is a module not an attribute:


Answer URL
https://docs.python.org/3/glossary.html#term-package
https://docs.python.org/3/reference/import.html#submodules
https://docs.python.org/3/library/sys.html#sys.modules
