Natural Text
When I receive a message from a client I want to run multiple RethinkDB queries in parallel and send the results the client immediately. The blocking way is below. A count can take minutes. I would like the other queries that would return faster to not be held up by the count query. I suspect I need a combination of https://rethinkdb.com/blog/async-drivers/ and http://www.tornadoweb.org/en/stable/guide/async.htmlI'm thinking maybe the answer is to make those two lines something like:My run-query would be:
tornado.gen doc reveals solution:You can also yield a list or dict of Futures, which will be started at  the same time and run in parallel; a list or dict of results will be  returned when they are all finished.Yielding list or dict directly has important behaviour - if any of Futures  has failed, yield will return immediately and will re-raise exception regardless of whether the other Futures are completed. To bypass it you can instead use Mulit or multi_future.Note: I really don't know if RethinkDB requires separate connections, but I want to show concept.


Answer URL
https://docs.python.org/3/library/asyncio.html
