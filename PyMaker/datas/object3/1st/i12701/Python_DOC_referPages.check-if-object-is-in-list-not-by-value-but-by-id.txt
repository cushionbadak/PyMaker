Natural Text
Consider the following code:So, in seems to use __eq__ to determine whether or not something is in a container.Where can one find documentation on this behavior?Is it possible to make in use object identity, a.k.a. a in somelist if the object a is in somelist, and not some other object that compares equal to a?
Use the any() function and a generator expression:The behaviour of in is documented in the Common Sequence Operators section:x in sTrue if an item of s is equal to x, else FalseBold emphasis mine.If you must use in, use a wrapper object with a custom __eq__ method that uses is, or build your own container where a custom __contains__ method uses is to test against each contained element.The wrapper could look like this:Demo:The container could just use the same any() function outlined above:Demo:
If you do not want to change A behaviour, you may prepare thin wrapper for used container. To change how in operator behaves, magic method __contains__ needs to get overridden. Quoting docs:Called to implement membership test operators. Should return true if  item is in self, false otherwise. For mapping objects, this should  consider the keys of the mapping rather than the values or the  key-item pairs.Sample code:


Answer URL
https://docs.python.org/3/library/functions.html#any
https://docs.python.org/3/library/stdtypes.html#common-sequence-operations
https://docs.python.org/3/reference/datamodel.html#object.__contains__
