Natural Text
I want to run a python 3 script giving it a file via stdin or manually typing data.E.g. let's suppose I want to print the contents of an input with one line. The script, called app.py would look something like this:Then, I could run it in both of the following ways:1. Passing a file as stdin2. Prompt the user for the inputMy problem is that in both cases, after reading stdin I would like to prompt the user for some extra data. Following the before mentioned example it would be:The commented line above works perfectly for case 2, but for case 1 it throws an EOFError: EOF when reading a line error because it tries to read from the file.I would like to know if before that line I could do something likeWhere SOMETHING represents the Windows Console input. I think that if I could do that, then both cases would work properly.
You could consider both cases to be the same (ignore the difference). Your script just reads two lines from stdin. stdin may be redirected from a file or it can be attached to the console, your script can work the same in many cases:See executable code example.Q: What I wanted was to read some inputs from a file OR from the console (depending on the parameters used when the app was ran). Some other lines I wanted them to be always read from the console. To read from the console directly regardless whether stdin is redirected from a file or not, you could use msvcrt.getwch(). See example usage in getpass.win_getpass().If you have issues with accepting Unicode input; install win_unicode_console package. You can enable it globally for your python installation or for a specific user or for a script as a whole or temporarily using win_unicode_console.enable()/.disable(). To force it to use console, you could set sys.stdin=None temporarily if stdin is redirected or call ReadConsoleW() yourself (cumbersome).


Answer URL
https://docs.python.org/3/library/msvcrt.html#msvcrt.getwch
