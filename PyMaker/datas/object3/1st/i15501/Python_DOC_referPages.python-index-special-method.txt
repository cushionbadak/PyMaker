Natural Text
How does thing know to represent itself as 1 when accessed by a list, but not by a dict?  Don't both magic methods go through __getitem__?  The usage shown for lists could go through __int__ instead so what is the raison d'être for __index__ anyway?
Dict and List does not implement __getitem__ the same way. Dict objects uses a comparison (__eq__) on __hash__ of objects as key to use in __getitem__.To make Thing usable for dict you have to implement both hash and eq.
@BenoîtLatinier was correct when he said:Dict and List does not implement __getitem__ the same way.However, I'd like to add a little more information. According to the documentation:object.__index__(self)Called to implement operator.index(), and whenever Python needs to losslessly convert the numeric object to an integer object (such as  in slicing, or in the built-in bin(), hex() and oct()  functions). Presence of this method indicates that the numeric object  is an integer type. Must return an integer.The part I bolded is important.   Indexing and slicing on a list are both handled by the same method (namely, __getitem__).  So, if Thing.__index__ is called for slicing, it will likewise be called for indexing since we are using the same method.  This means that:is roughly equivalent to:For the dictionary however, Thing.__index__ is not being called (there is no reason to call it since you cannot slice a dictionary).  Instead, doing dict_[thing] is telling Python to find a key in the dictionary that is the thing instance itself.  Since this doesn't exist, a KeyError is raised.Perhaps a demonstration will be helpful:As for why __index__ exists in the first place, the reason is thoroughly listed in PEP 0375.  I won't repeat all of it here, but basically it is so that you can allow arbitrary objects to serve as integers, which is needed in slicing as well as a few other applications.
Another example to understand it further, here _MolsToGridSVG takes a list argument. I wanted to limit the list to some length. Now here for python list, slice indices have to be used. The following implementation solved it. Basically here index is getting used for Python List.Also one needs to remember that imagesInOneFile has to be integer.


Answer URL
https://docs.python.org/3/reference/datamodel.html#object.__index__
