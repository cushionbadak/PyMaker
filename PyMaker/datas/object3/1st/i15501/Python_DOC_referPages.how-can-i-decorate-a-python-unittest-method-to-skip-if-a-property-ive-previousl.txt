Natural Text
I'm writing a TestCase in Python using unittest, that looks something like this:However, this doesn't seem to work, I assume because @skipIf cannot use self outside the body of the function declaration. I know I can check the value of self.isOnline inside the test_xyz function and use skipTest instead, but this is less elegant. Are there any other options?
You could write your own decorator to which you pass the name of the flag:Then in your class you would define the test method like this:Whether this is better than just checking in the method depends on the situation.  If you are doing this with many methods, it could be better than writing the check in every one.  On the other hand, if you're doing that, you might want to group them together and do one check to skip the entire suite.
If you can move the isOnline test outside of your setUp method, then that's a solution:Another (more elegant option) would then be:However if this isn't possible for you, then there isn't a more elegant solution than to somehow use skipTest(). skipIf and skipUnless are evaluated at class declaration time (they set a __unittest_skip__ attribute on your method to indicate it shouldn't run, which is later looked at prior to running the test). Your setUp method just hasn't run yet at that point.
I would add to the answer by BrenBarn that if you're using nosetests that you'll need to decorate the wrapper function with @wraps. Without this, the test function would technically be wrapper and this would not be invoked by nosetests, as by default test methods need to start with test_.


Answer URL
https://docs.python.org/3/library/unittest.html
