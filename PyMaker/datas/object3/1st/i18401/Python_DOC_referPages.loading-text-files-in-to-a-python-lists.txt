Natural Text
I'm very very new to Python so no doubt there are several very basic mistakes, although I have looked through several Python tutorials and everything seems ok.I'm trying to import two text files in to my list.The username.txt looks like thisuser1  user2  user3  and the password.txt looks like thispass1  pass2  pass3  when I run everything the debugger doesn't give me any errors but when I try a user/password combination it says that it isn't correct.Can you see anything wrong, or know anything that might help?This is what I am running:
That’s actually a mean issue you have here, because it’s not really obvious at all. As a tip, you can easily print some additional information throughout your code to give you an idea of what’s going wrong.In this case, I put a print(username) at the beginning of the login function and saw that only nathan is a valid user, although I clicked the load button before.So what’s happening?The variables username and password are both defined at the root of the module (the script); this makes them global variables. Global variables can be accessed from anywhere within the module—unless they are hidden by local variables of the same name. Now, while they can be accessed from anywhere, changing them is not possible by default.So within your load function, you have this:This will declare a local variable within your function, hiding the global variable. When the function ends, that local variable is thrown away; but your global variable is unchanged.To change this behaviour, you can define that you want to use the global variables username and password. To do that, add a global statement for them at the beginning of the function:If you do that, the global variables are correctly changed and all usernames are available from the login function.However, readlines will include line breaks after each line. So the usernames will actually be user1\n, user2\n and user3 (same with the passwords). To fix that, you might want to strip() those values before comparing them (removing all leading and trailing whitespace).Finally, it is generally recommmended to use the with statement when opening files. This will make sure that the handles are correctly closed (you don’t need to call close() explicitely—which you aren’t doing in the save method btw!):
At first glance, the code looks correct. A good way to solve problems like this is adding logging to make sure the code does what you expect when you run it. Think of logging as a protocol that allows you to debug a problem afterwards. It's a very useful skill to have.In your case, you should add logging after loading user names and passwords (print how many you loaded). If the two numbers disagree or both are 1, you already know that something is wrong.Later, when searching users and passwords, print the index and the expected password.Note: For security reasons, you shouldn't print passwords during logging. Log files are often only weakly protected.


Answer URL
