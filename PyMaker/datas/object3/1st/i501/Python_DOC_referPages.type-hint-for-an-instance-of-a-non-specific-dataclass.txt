Natural Text
I have a function that accepts an instance of any dataclass.what would be an appropriate type hint for it ?haven't found something official in the python documentation this is what I have been doing, but i don't think it's correctanother idea is to use a Protocol with these class attributes __dataclass_fields__, __dataclass_params__.
Despite its name, dataclasses.dataclass doesn't expose a class interface. It just allows you to declare a custom class in a convenient way that makes it obvious that it is going to be used as a data container. So, in theory, there is little opportunity to write something that only works on dataclasses, because dataclasses really are just ordinary classes.In practice, there a couple of reasons why you would want to declare dataclass-only functions anyway, and I see two ways to go about it.The right way, using a static type checker and writing a ProtocolThis approach is also what you alluded to in your question, but it has three downsides:You need a third party library such as mypy to do the static type checking for youYou need to install typing_extensions as well, since Protocol is not part of the core typing module as of yetLast but not least, using protocols for dataclasses in this way doesn't work right nowSomething slightly more EAFP-inspired that actually worksIn this approach, the behavior is still very clear to a maintainer or user of this code thanks to the documentation. But the downside is that you don't get a static analysis of your code (including type hints by your IDE), not now and not ever.


Answer URL
https://docs.python.org/3/library/dataclasses.html#dataclasses.astuple
