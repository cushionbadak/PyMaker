Natural Text
I'm getting an error when trying to use autospec=True when mocking an object's method. I'll write down a simple example showing how to reproduce the error I'm getting. Suppose I have a very simple class like the following  one:Now, in a different part of my system I have a function that interacts with a SimpleClass instance by doing print(obj.target_method(a, b)) and I have to unitary test this function. I'd like to test it by mocking target_method with autospec=True to ensure the method signature and to check if it was called as expected. This when I get the error as described bellow:If I'm getting it right, mock is executing itself as a stand-alone function and, by doing so, it requires the self parameter to be passed explicitly.So, my question is if there is a way to use autospec when patching an object's method without getting this exception.
You should call the method of the instantiated object:as described in https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch.object


Answer URL
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch.object
