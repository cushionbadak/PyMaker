Natural Text
I have lists like this.How can I convert this list to a list like this:list2[0][1] and list2[1][1] are the average values from first list with spesific people (6.00 is coming from (list[0][1]+list[1][1]+list[3][1])/3I should use iteration like this:or.. something like that? Because I'm importing list from SQLite and list is always changing.
Since you say you're importing the list from sqlite, you may be interested in using an existing data processing package rather than rolling your own function by function.  For example, in pandas, you could load the data into a DataFrame:Now using pandas would be significant overkill for the problem in isolation, but if you're pulling data from a database you're probably going to want to do multiple things with the data.
This works for any number of values you are summing (in your case two):Python 3Python 2Replace items() with iteritems(), add float around the sum(x), use print with a space, not parens, and change the for loop to(Python 3 is sure nice.)ExplanationThe defaultdict and for loop create a map from name to a list of the value.k, v in d.items() iterates over each name and list of lists.zip(*v) takes something like [[5, 7], [6, 9], [7, 4]] and turns it into [[5, 6, 7], [7, 9, 4]]. We then sum these and divide by the number of original lists.We append [k] and this list of averages to get a list like ['Joe', 6.0, 6.67].BTW, if this is coming from a database, have you considered doing the aggregation there?
Something like this:Now d contains:The Ordered of unique keys ever seen is preserved here as we used an OrderedDict here.Now we can iterate over this dictionary and get the average of columns for each key. zip with * allows us to get a transpose of a list very easily:Final list comprehension:You can remove the float call in Python3. And if order of the names 'Joe', 'Mike' doesn't matter in the output list, then you can simply use a normal dict with dict.setdefault or use collections.defaultdict.
Using itertools.groupby:
An alternate solution .Its a bit complicated but a one liner without imports.


Answer URL
