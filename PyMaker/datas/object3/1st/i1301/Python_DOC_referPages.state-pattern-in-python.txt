Natural Text
I am having some issues wrapping my head around on implementing the state design pattern in Python. I am new to Python and wrote some code to try and answer this question that was presented to me:Write the code for a simple ATM that allows a user to insert their card, enter their PIN, request cash and eject card.Use the following object model for the system that shows the use of the State Pattern.  You will need to figure what state to change to for each action.Please see the below UML diagram for more info:ATM DiagramHere is my attempt below...The biggest point of confusion for me is how do I implement it using classes? I was able to get the correct logic in place but I am struggling with the implementation using the state design pattern. Any guidance would be greatly appreciated. 
Atm shouldn't inherit from AtmState but from nothing (or from object, doesn't matter). It should only contain: state variable, change method to change state and for each method in AtmState a method which calls the same named method in the current state with an additional parameter named e.g. atm containing the calling Atm object (the context). AtmState should only contain the methods without implementation (and no variables) as it is an interface in the original pattern. For Python you should make it an abstract class with abstract methods, see module abc how to do that. The concrete classes derived from AtmState should now implement the methods. Usually only one or two methods are really needed per class, the rest should just print an error. E.g. the NoCard.ejectCard() method just shows an error that a non-existing card can't be ejected.Switching between states happens by calling from one of the methods the atm.change() method (atm was the additional parameter added by Atm class).
Here is a quick and dirty implementation in python3 of a simplyfied version of your problem. State is an abstract class using (abc package described by Mickeal) It acts as an interface (derived classes must implements abstract methods). Actual state receives the request and implements the function and performs the states transition this is why i pass the atm object as argument methods


Answer URL
https://docs.python.org/3/library/abc.html
