Natural Text
I am setting up a MagicMock instance, calling the same method twice with different arguments, and setting my assertion to only validate for one set of arguments.Python: 3.5.2I would expect this to pass. Why does it ignore the arguments?
We have discovered that assert_called_with is actually what we want.It seems confusing and I think it should be called assert_called_only_once_with.
From the unittest.mock docs:assert_called_once_with(*args, **kwargs)Assert that the mock was called exactly once and that that call was with the specified arguments.Since you are calling the method twice, this should fail.In this specific case, you might use:Which will assert the expected calls have been used in the order specified in expected_calls


Answer URL
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.assert_called_once_with
