Natural Text
When I create an python3 virtual-env, tab-completion (default with python3) does not work any more. Why is that?Without --system-site-packages it has the same problem: no tab-completion. If I run python3 without any virtual-env activated, tab-completion works.
Quoting Carl Meyer on this GitHub comment,Yes, one of the uglier aspects of virtualenv's implementation is that it has to have its own copy of the site module, which is used for all virtualenvs regardless of which version of Python they are created with.The problem is in the $VIRTUAL_ENV/lib/python3.4/site.py file, which does not setup tab completion. It does not provide the enablerlcompleter function. Compare it with the site.py file distributed with Python 3.If you're using Python 3.3 or newer, I advise pyvenv instead of virtualenv.Another thing you could do is roll your own Python startup script and refer to it in the PYTHONSTARTUP environment variable. Put tab completion and other startup tweaks in there. See Mike Covington's answer for an example of such script.
This is how I got my tab-completion back:Added the following to ~/.pythonrc.py:Added the following to ~/.bash_profile:
Sticking with virtualenv (Python 3.6 installed with brew on Mac OS X High Sierra)...In my virtualenv I did pip install readlineI tried to add the ~/.pythonrc to my ~/.bash_profile but it was not the issue. .virtualenvs/py3cv4/lib/python3.6/readline.so was looking for /usr/local/opt/readline/lib/libreadline.7.dylib but for some reason I had 8. I created the linkln -s /usr/local/opt/readline/lib/libreadline.8.dylib /usr/local/opt/readline/lib/libreadline.7.dylibNo need to add anything to ~/.bash_profile
I got into similar situation. It might be caused by a different reason. But I just want to keep it here so that other people would not spent another one day to debug through this. I am using Ubuntu 16.04 LTS, Python 3.5.2 with pyvenv, Virtualenv 15.1.0. I kept getting "tab & then terminal disappear" problem. In some of batch files that I did "source ", I had "set -e". Apparently, when you do "set -e" in that terminal session, the autocomplete will terminate that terminal window. Remove the "set -e" from those batch files, the issue was resolved.
The previously mentioned solutions didn't work for me (Python 3.6 installed with brew on Mac OS X High Sierra).So I had to slightly change my ~/.pythonrc.py file:And of course, you still need this line in your ~/.bash_profile:On Ubuntu, rather use:


Answer URL
https://docs.python.org/3/library/venv.html
