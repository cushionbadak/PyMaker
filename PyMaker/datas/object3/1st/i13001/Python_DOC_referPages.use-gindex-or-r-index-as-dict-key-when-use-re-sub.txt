Natural Text
This question already has an answer here:Python Regex Sub - Use Match as Dict Key in Substitution                    1 answer                For example, I have the following string:Now I want to use re.sub() to replace @name and @id. I know that I can use group to catch some string and then use '\g<index>' or r'\index' to use  it. But now I need use it as a dict key, I have this dict:And I wish I can get this:Also I tried:
You need to use the function form for re.sub in this case. For your basic use case, it could be a simple as:If the logic is more complicated, a top-level def is the way to go. Basically, you pass a callable instead of a str, per the re.sub docs:If repl is a function, it is called for every non-overlapping occurrence of pattern. The function takes a single match object argument, and returns the replacement string.
Python provides a string.Template class (see also PEP 292) which can format strings very similar to kind you are working with. By default the string.Template class recognizes $ as the placeholder. If you change it to @ (by subclassing string.Template) then you can perform the substitutions by calling the substitute or safe_substitute method:prints
If formatting your string differently is an option, you can do it this way:


Answer URL
https://docs.python.org/3/library/re.html#re.sub
https://docs.python.org/3/library/string.html#template-strings
https://docs.python.org/3/library/string.html#string.Template.substitute
https://docs.python.org/3/library/string.html#string.Template.safe_substitute
https://docs.python.org/3/library/re.html#re.sub
