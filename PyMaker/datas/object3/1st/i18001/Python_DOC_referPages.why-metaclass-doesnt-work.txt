Natural Text
After reading parts of Django source code, I want to do some test and write codes below to watch how metaclass works:It always complains:And I add modify it as below:and it works.I also read this What is a metaclass in Python?.But still feel confused.Thanks in advance !
with_metaclass was first introduced in the six library (if I recall correctly), that eases transition from Python 2 to Python 3. It's a clever trick to make code compatible with both of them.Python 2 has the following syntax for declaring use of metaclass:Python 3, has a different one:What with_metaclass(meta) does: it creates an intermediate temporary class using meta metaclass' constructor directly, and you derive your class from it. So both Pythons -- 2 and 3 are happy.You should also read Python documentation on this topic: http://docs.python.org/3/reference/datamodel.html#metaclassesIn your specific case, when you write class Test(MyMeta): you're just declaring a metaclass Test that is derived from MyMeta. To make a class, you need to write eitherordepending on what python version you have.  Or, if you are not sure if you need to support Python 2 or not, you can simply use with_metaclass, it's also OK.


Answer URL
