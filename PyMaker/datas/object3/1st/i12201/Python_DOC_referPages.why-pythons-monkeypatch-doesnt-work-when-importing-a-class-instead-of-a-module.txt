Natural Text
I was having issues while using the code of the accepted answer here.The code works depending on how I do the import of datetime. Why is that? Is it possible to mock it so it works both ways?I am using Python 3.4. The following code illustrates the problem:
Even if you aren't using mock framework you should take a look to where to patch chapter. By writingYou are creating a new reference to datetime.datetime in your test module and call it datetime. That is the reference that you use in test_doesnt_work() test.By writingYou are patching datetime's absolute reference in datetime module: the one used in test_works().
@Michele d'Amico's answer explains why it doesn't work. This is how to make it work if you want to use "from datetime import datetime" instead of just "import datetime"


Answer URL
https://docs.python.org/3/library/unittest.mock.html
https://docs.python.org/3/library/unittest.mock.html#where-to-patch
