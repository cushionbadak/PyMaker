Natural Text
Windows 10, Python 3.5.1 x64 here.This is weird... Let's say I have this script, called do.py. Please note the import string statement:I want to run it from a "launcher script", in a subthread, like this (launcher.py):It dies with the following error:That is, the exec'ed code is not importing string properly or something like that, and within main() the string module is not visible.This is not the full code of my project, which is too big to post here, but the bare minimum I've created which mimics the problem.Just in case someone is curious, I'm rewriting an old program of mine which imported the main() function of a script and ran that function with the standard output streams redirected to a tkinter text box. Instead of importing a function from the script, I want to load the script and run it. I don't want to use subprocess for a whole variety of reasons, I prefer to run the "redirected" code in a thread and communicate with the main thread which is the one handling the GUI. And that part works perfectly, the only problem I have is this and I can't understand why is happening!My best bet: I should be passing something in globals or locals dictionaries to exec, but I'm at a lost here...Thanks a lot in advance!
exec(thing) is equivalent to exec(thing, globals(), locals()).Thus,the local symbol table of do.py is the local symbol table of the run functionthe global symbol table of do.py is the global symbol table of launcher.py import string imports the module and binds it to the variable in the local space, which is the local space of the run function. You can verify this:main has a separate local scope, but it shares the global symbol table with do.py and, consequently, with launcher.py.Python tried to find the variable named string inside both local (it's empty) and global symbol tables of main, but failed, and raised the NameError.Pass one empty dictionary in a call to exec:


Answer URL
https://docs.python.org/3/library/functions.html#exec
