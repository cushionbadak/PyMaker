Natural Text
I have looked at many similar sources to this question but can't seem to find an answer that solves my problem. I am using python3.7.1 and sqlite3 to essentially create quizzes. I have an array of questions which I have inserted into a table, with a 'Class_name' and 'quizNumber' using this code example:This code works fine and the table(set_questionsTbl) looks like this:I also have an array of answers:The problem that occurs is when trying to update the table with the answers so it looks like this:The code I tried was this:This didn't work as with every loop the previous inputted answer got overwritten leaving me with this:I have also tried joining the loops together but that doesn't work, table looks like:I have tried to correct this many times and searched many different examples but couldn't seem to find a solution. So how do I loop through each question and update the answer with each answer in quizAnswers?I am new to stack overflow so I may have missed a question similar to this, if so please link it. 
The point you are missing is, that you instruct your database to update all records with the answer in the current iteration of the loop.Your example:basically does:Your database does not understand the meaning of the data you put into the tables. For the DB, the questions you inserted into the Question column of your set_questionsTbl are just sequences of characters. It has no means of evaluating the equation in Question in order to set a value in Answer only if that value is the result of the equation.You need to tell your DB which answer to set for which question(s).You need to give your query criteria, that a record must meet for the update operation to be applied to it. That's what WHERE clauses are for.Following your example, you'll want to create a correlation between questions and their respective answers. The below is one way to do that.First, create a list of tuples. Each tuple contains an answer in the first element, the second element holds the corresponding question (this needs to be the exact value you inserted into the Question column).Then you can iterate over that list of tuples to execute the UPDATE query in your cursor:This will update the answer in all records that have the specific equation in Question. Records with different Class_name and/or QuizNumber - a record like this for example:- will be updated as well, because the only criteria, the Question equaling 1 + 1 =, is met for this record also.If you want the answers to be set only for questions of quiz number 1 for class 6D, you'll have to add more restrictive criteria to your query, e.g.:With this particular solution (using a list of tuples with the query parameters in the correct order) you can also use executemany to let the cursor do the loop over the list of parameter tuples for you:Here's some further reading on WHERE clauses specifically for SQLite.
You should have a unique ID for at least one of the fields in your table. That way when you execute the answer update, you could add a WHERE clause, e.g:and that way not all of your records will be updated.


Answer URL
https://docs.python.org/3/library/sqlite3.html#sqlite3.Cursor.executemany
