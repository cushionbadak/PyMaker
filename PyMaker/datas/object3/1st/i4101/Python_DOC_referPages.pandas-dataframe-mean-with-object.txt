Natural Text
I have a dataframe with 2 column nbr and tag. Nbr contain integer and tag contain Tag object. And I want to get the mean of all the tag object (using value attribute, and the result is a new Tag with that value).For dataframe.add I had the add a the __add__ method to the Tag class.Example:But for frame.tag.mean() I get this error TypeError: Could not convert <__main__.Tag object at 0x7f375ac460d0> to numeric.Pandas first try to convert the object to float: float(x), then if it fail it try this: x = complex(x). My question is their a way to make float(tag_object) or complex(tag_object) return the value attribute by adding a method to my Tag class like I did with __add__? Thanks in advance.
Looking at the source code, it seems like Pandas's mean coerces the results to a numeric type. You can get close by adding the special __float__ method to Tag:Once you do so, you getNote that this doesn't do exactly what you wanted (it doesn't create a Tag with value 5.0 - Pandas wants the result to be a numeric type).


Answer URL
https://docs.python.org/3/reference/datamodel.html
