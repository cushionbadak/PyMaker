Natural Text
My question is similar toPython dict how to create key or append an element to key?I want to create the following dictionary of dictionaries:I currently accomplish this using the following:Is there a way to do this using dict.setdefault() ?
Is there a way to do this using dict.setdefault() ?Of course! There's nothing magic about setdefault; it just returns my_dict[name] if it exists, or sets my_dict[name] = default and returns default if not.Either way, what it returns is the (potentially new) dict in my_dict[name], so all you have to do is update it:Or, if you really like using update instead of just [] =:For example:More generally, you could obviously rewrite your existing code to this:Whenever you can do that, you can use setdefault. (But notice that we're calling a mutating method or assigning to a key/index/member of my_dict[name] here, not just assigning a new value to my_dict[name]. That's the key to it being useful.)Of course almost any time you can use setdefault, you can also use defaultdict (as demonstrated in CoryKramer's answer) (and vice-versa). If you want defaulting behavior all the time, use defaultdict. Only use setdefault if you want defaulting behavior just this once (e.g., you want defaulting while building the dict up, but you want KeyErrors later when using it).
You can use collections.defaultdictThen you don't need the if statement, you can directly call update, and if no dict yet exists for that name a new one will be created before calling update


Answer URL
https://docs.python.org/3/library/collections.html#collections.defaultdict
