Natural Text
Say I create a recursive nested list in Python like this:Some properties:len(a) is 3a[2] is a is TrueWhat happens when you print out a? This appears:Similarly:Why? How does Python "know" the recursion within the list? How is the recursion detected?
When Python constructs the repr of a builtin object such as a list it uses two internal functions: Py_ReprEnter(PyObject *), and Py_ReprLeave(PyObject *).The first of these functions checks we are already handling the repr for the specified object (i.e. looks to see whether it is currently remembering that object). If not it remembers the object and returns 0. In that case the repr code prints the object then calls Py_ReprLeave which removes the object from the set that are currently being tracked.If Py_ReprEnter is already tracking the object it returns non 0 and in that case the list repr code prints [...].


Answer URL
https://docs.python.org/3/library/reprlib.html#reprlib.recursive_repr
