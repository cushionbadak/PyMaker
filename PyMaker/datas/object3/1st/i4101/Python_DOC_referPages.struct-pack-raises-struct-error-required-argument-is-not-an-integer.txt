Natural Text
I am trying to make a network proxy which will forward packets to another IP. I can sniff a packet, unpack it, and view, print, and manipulate its contents. But when I want to pack the bytes to forward it to some other IP, it gives this error:struct.error: required argument is not an integerThe error is raised on this line of code:Here is the code. Bold stuff in code are comments in my code.
Both the B and H formats require integer arguments (or non-integer objects that implement the __index__ method) (see Format Characters).The checksum argument is now of type bytes because you set it here before packing:  And bytes objects do not implement the __index__ method.You can check this using dir(checksum).That's why you're getting the struct.error exception. When packing a value x using one of the integer formats ('b', 'B',  'h', 'H', 'i', 'I', 'l', 'L', 'q', 'Q'), if x is outside the valid  range for that format then struct.error is raised.Either:Use a different variable for the bytes(str(checksum),"utf-8") outputPass an int type object for the checksum value


Answer URL
https://docs.python.org/3/library/struct.html#format-characters
https://docs.python.org/3/library/struct.html#format-characters
