Natural Text
I have a json file that contains about 100,000 lines in the following format:I am trying to delete all the items that do not have a gsis_name property. So far I have this python code, but it does not delete any values (note: I do not want to overwrite the original file)
You're deleting x, but x is a copy of the original element in json_data; deleting x won't actually delete it from the object that it was drawn from.In Python, if you want to filter some items out of a collection your best bet is to copy the items you do want into a new collection.and then write clean_data to a file with json.dump.
When you say del x, you are unassigning the name x from your current scope (in this case, global scope, since the delete is not in a class or function).You need to delete it from the object json_data. json.load returns a dict because your main object is an associative array / map / Javascript object. When you iterate a dict, you are iterating over the keys, so x is a key (e.g. "00-0000108"). This is a bug: You want to check whether the value has the key gsis_name.The documentation for dict shows you how to delete from a dict using the key: https://docs.python.org/3/library/stdtypes.html#mapping-types-dictdel d[key]Remove d[key] from d. Raises a KeyError if key is not in the map.But as the other answers say, it's better to create a new dict with the objects you want, rather than removing the objects you don't want.
Just create new dict without unwanted elements:Since Python 2.7 you could use a dict comprehension.


Answer URL
https://docs.python.org/3/library/json.html#json.load
https://docs.python.org/3/library/stdtypes.html#mapping-types-dict
