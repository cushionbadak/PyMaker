Natural Text
I'm trying to port an extension module from 2.7 to 3.5.  The extension module uses PyEval_EvalCode.  It does this with some code similar to the following:In Python 2.7 this works fine.  In Python 3.5 I get a compilation failure, because PyNode_Compile returns a PyCodeObject, but in Python 3.5 PyEval_EvalCode accepts a PyObject*.  What do I need to do to convert this into a PyObject that I can pass to PyEval_EvalCode?
For the vast majority of Python types, PyObject is the "parent" struct of the type. Try casting the argument: (PyObject*)compiled_code.The Code Objects docs make it clear that PyObject* can be PyCodeObject* (otherwise PyCode_Check wouldn't exist), so if you know it's a code object, the cast is safe.


Answer URL
https://docs.python.org/3/c-api/code.html
