Natural Text
I have a list of lists:The position is meaningful. I want to return a list that contains the mean per position, excluding -1. That is, I want:which is actually:How can I do this in a pythonic way?EDIT:I am working with Python 2.7, and I am not looking for the mean of each list; instead, I'm looking for the mean of 'all list elements at position 0 excluding -1', and the mean of 'all list elements at position 1 excluding -1', etc.The reason I had:is that values in position 0 are -1, -1, 0.54, and 0.2, and I want to exclude -1; position 1 has 0.67, 0.24, and 0.85; position 3 has 0.23, -1, and 0.8, etc.
Here is a vectorised numpy-based solution.
A solution without third-party libraries:It uses itertools.zip_longest with fillvalue set to -1 to "transpose" the list and set missing values to -1 (will be ignored at the next step). Then, a generator expression and statistics.mean are used to filter out -1s and get the average.
You can use pandas module to process.Code would like this :


Answer URL
https://docs.python.org/3/library/itertools.html#itertools.zip_longest
https://docs.python.org/3/library/statistics.html#statistics.mean
