Natural Text
I have several threads doing several tasks. One thread listens to data from a UDP socket. Another thread processes the data into JSON objects and queues the data. Another thread sends the information.What Im trying to work out at the moment, is how a queue works on empty data? While most routines does a I need to find out how to process the queue in the while loop when there is data on the queue.I guess I could put a while True loop in and sleep(1). But the trouble is, if the data hits the queue quicker than the sleep time. If I take the sleep(1) out, then my usually understanding, is that the while loop will just eat CPU.So I guess I need some way of telling the thread that there's data on the queue and therefore to run a processing routine?
You can use conditional variable used in classical synchronization problem, to avoid busy waiting.You can read more about "Producer consumer" problem.In this case, the producer threads will add one or more items to the queue, whereas a consumer would be a thread waiting for an item in the queue.Look at threading.Condition class for usage and more details.Ref: https://docs.python.org/3/library/threading.html#threading.ConditionEdit:If you use Queue class from queue module then you don't have to implement nitty-gritty of thread lock and condition management w.r.t Queue.Ref: https://docs.python.org/3.8/library/queue.htmlIn the above example, the worker thread is waiting for the item in the queue. If an item is made available then Queue object will notify the waiting threads and one of them will get the item from the queue.


Answer URL
https://docs.python.org/3/library/threading.html#threading.Condition
https://docs.python.org/3/library/queue.html#module-queue
