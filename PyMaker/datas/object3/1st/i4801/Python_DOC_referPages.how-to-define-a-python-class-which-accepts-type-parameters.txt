Natural Text
Python 3.5 introduced type hints which allow one to write the following:documentation: https://docs.python.org/3/library/typing.html#typing.UnionI think I understand the naive meaning of the above code. In particular, it means that the variable answer has been given a type hint, which says that it is supposed to be of the Union type with type parameters int and str, which in turn means that it is supposed to be either int or str.What I do not understand, however, are the formal Python language rules around defining and using classes with type parameters in square brackets.Can someone explain it?
Like any other use of square brackets, Union[int, str] is implemented by Union.__getitem__((int, str)). In this case, Union is an instance of the class _Union which defines __getitem__. You don't really need to know those details to use the class.
Where you use [] it is calling the __getitem__ method. The metaclass of the Union type has a __getitem__ method. When you call Union[int, str] you are calling that __getitem__ method passing a tuple, containing int and str. You can see this in the typing.py file in the Python library.


Answer URL
https://docs.python.org/3/library/typing.html#typing.Union
