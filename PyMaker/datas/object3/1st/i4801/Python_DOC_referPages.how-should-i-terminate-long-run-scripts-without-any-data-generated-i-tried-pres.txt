Natural Text
This is really interesting.I have following scripts on my linux machine:sleep.pyloop.pyI can terminate them directly by ctrl+c if I login through PuTTY or git-bash.But when I trying to run the Python scripts on Windows console:test.pyWhen I press ctrl+c , the loop.py terminated immediately, but the sleep.py waits until the time.sleep(20) is finished and then terminate the execution.How can I terminate the sleep.py immediately?Note I did try to use get_pty=True in my exec_command method in my function, but it didn't help.I guess it should have something to do with the signal sent by Paramiko, but not sure where to dig in...
Ctrl+C signals an interrupt. Python interpreter checks for the interrupt regularly, and raises KeyboardInterrupt exception, when it detects one.When Paramiko is waiting for an incoming data on a socket, the checking for interrupts is probably suspended (just guessing). So if a remote command is not producing any output, you cannot break the local script. Your loop.py produces an output using print(i), so your local Python script can be interrupted at the moment it's processing the output.In any case, it's not the remote script that cannot be interrupted, it's the local script. So it has probably nothing to do with time.sleep as such.See also:Stopping python using ctrl+chttps://docs.python.org/3/library/exceptions.html#KeyboardInterruptIf you actually do not want to wait for the command to finish, your question is not really about Python (nor Paramiko), but about Linux. See Execute remote commands, completely detaching from the ssh connection.


Answer URL
https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt
