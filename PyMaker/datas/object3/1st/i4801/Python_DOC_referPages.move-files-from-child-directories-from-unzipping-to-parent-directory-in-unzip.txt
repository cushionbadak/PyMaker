Natural Text
I've got a specific problem: I am downloading some large sets of data using requests. Each request provides me with a compressed file, containing a manifest of the download, and folders, each containing 1 file.I can unzip the archive + remove archive, and afterwards extract all files from subdirectories + remove subdirectories.Is there a way to combine this? Since I'm new to both actions, I studied some tutorials and stack overflow questions on both topics. I'm glad it is working, but I'd like to refine my code and possibly combine these two steps - I didn't encounter it while I was browsing other information.So for each set of parameters, I perform a request which ends up with:And then for the next step I wrote a function that:Is there an action I can perform during the unzip step?
You can extract the files individually rather than using extractall.With appropriate credit to this SO question and the tarfile docs.getmembers() will provide a list what is inside the archive (as objects); you could use listnames() but then you'd have to devise you own test as to whether or not each entry is a file or directory.isfile() - if it's not a file, you don't want it.member.name = os.path.basename(member.name) resets the subdirectory depth - the extractor things everything is at the top level.


Answer URL
https://docs.python.org/3/library/tarfile.html
