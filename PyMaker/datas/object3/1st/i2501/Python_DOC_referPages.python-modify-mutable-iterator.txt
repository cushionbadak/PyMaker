Natural Text
The code is like following:When I doIt will print line by line of file.But when I modified the test.txt file and saved it, the next(file) still printed the original file content.Does iterator store the complete file in the memory?If not why the content of the file didn't get updated?
No, as an iterator the file object stores only a look-ahead buffer, not the complete file, in memory. This makes it efficient for large files.Since there is this look-ahead buffer, changes made to the file won't be reflected to the next method. However, you can use the seek method to clear this buffer so the next call to the next method will return the updated content:
Let's suppose open() reads 2 letters at a time. (Actual value is io.DEFAULT_BUFFER_SIZE)You've created a file object, _io.TextIOWrapper which, oversimplified, is like [{read from 0 to io.DEFAULT_BUFFER_SIZE of test.txt}, ...}You've created a iterator of _io.TextIOWrapper with data like this: [{read from 0 to 1}, ... {read from n-1 to n}]next() has went through the first item of file, read it, and printed it.Let's learn from an example.Reading normallytest.txtWe will open the file, iter(), and list() to open and iter through all of it and make a list.Just as expected.File changes after open()We've opened the file.We will now append hello open() to test.txt.test.txtand then iter() and list() it.The changed contents are seen. We can see that open() does not actually read the file.File changes after iter()We've opened the file and iter()d.We will now append hello iter()test.txtand then  list() it.The changed contents are seen. We can also see that iter() does not actually read the file.


Answer URL
https://docs.python.org/3/library/functions.html#open
https://docs.python.org/3/library/io.html#io.DEFAULT_BUFFER_SIZE
https://docs.python.org/3/library/functions.html#next
