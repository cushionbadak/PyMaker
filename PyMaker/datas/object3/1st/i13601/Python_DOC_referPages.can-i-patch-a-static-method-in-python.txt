Natural Text
I've a class in python that contains a static method. I want to mock.patch it in order to see if it was called. When trying to do it I get an error:AttributeError: path.to.A does not have the attribute 'foo'My setup can be simplified to:Now the test code that fails with error:
You can always use patch as a decorator, my preferred way of patching things:EDIT: Your error seems to hint that you have a problem elsewhere in your code. Possibly some signal or trigger that requires this method that is failing?
I was getting that same error message when trying to patch a method using the @patch decorator. Here is the full error I got.What I ended up doing to fix this was changing the patch decorator I used from@patch('py-repo.models.Device.get_device_from_db') to @patch.object(DeviceModel, 'get_device_from_db')I really wish I could explain further why that was the issue but I'm still pretty new to Python myself. The patch documentation was especially helpful in figuring out what was available to work with. I should not that get_device_from_db uses the @staticmethod decorator which may be changing things. Hope it helps though.


Answer URL
https://docs.python.org/3/library/unittest.mock-examples.html#patch-decorators
