Natural Text
Full (non-working) code belowFull (working, w/o threading) code here: http://pastebin.com/KUYzNtT2I've written a small script that does the following:Pull network information from a databasePing each IP in a cidr (ie - 192.168.0.0/24); if it's up, test to see if a certain port is openDisplay the resultsThis is working fine, but I'd like to implement threading to make the script run faster; as is I have thousands of IPs to scan and it takes forever.I've played around with threading tutorials but can't seem to grasp how to implement it in my script.Any thoughts or suggestions are appreciated. EDIT: I went in a different direction based on this guide: http://chriskiehl.com/article/parallelism-in-one-line/Now I run the program and get: File "port_test.py", line 39, in display_results    for (client, location, cidr) in results:ValueError: too many values to unpack (expected 3)and I don't understand why. Thoughts?**EDIT: I think I figured out why it failed, looks like pool.map expects only one data point. If I only query the DB for CIDRs instead of the other two columns, the program starts spitting out data (MUCH faster than before). So now I need to figure out how to add the other two columns to the results, then sort the results to they make sense (there's no order to the results, which I suppose makes sense)
Grab all the data initially and store it in a Queue. Create a function that runs continuously until the Queue is empty (i.e. while my_queue.empty() is False.Grab the first object in the Queue with Queue's get() method.Then process it.Initialize as many threads as you want, they will execute until the Queue is empty.


Answer URL
https://docs.python.org/3/library/concurrent.futures.html
