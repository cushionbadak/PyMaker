Natural Text
I'm stuck on something that might be very simple, but I can't find a solution. I'm using Python since few days and I need to use regex to get part of a file.I put the result of a git log -p into a file, and now I want to extract some informations. The only thing I can't extract is the comment block.This block is between : a date line AND (a diff line OR the end of the list).So I tried to do this :Problems are :the length of the date line can change. It can be Date:.{32} if the date is between the 1st to 9th or Date:.{33} if the date is 2 numbers long.I don't know how to say : "the comment block stops when a line starts by diff OR when it's the end of the list (or the file)".P.S. I'm working on Python 3.x and I almost finished my script so I don't really wanna use a specific tool like GitPython (that only works on 2.x)
Here's one way to do it:A few notes:I don't think you need to worry about the length of the Date line.Capture the part you care about. This has two implications. (1) To ignore the Date line, just consume (non-greedily) everything through the first newlines. (2) You don't need a lookahead assertion; a non-capturing group (?:...) will work fine.It's probably a good idea to make the captured wildcard non-greedy as well: .+?.You can indicate the end of a string in a regex with \Z. Thus, the non-capturing group means: (a) a line beginning with "diff " or (b) end of string.More details on regex features can be found in the excellent Python docs.
Though the date may change in length, it is definitely terminated by a new-line, so why limit the number of characters at all?Anyway, you should be able to do something like {32,33} to capture the range.
Give this a try:This should return a list of comment entries, assuming that all of the log entries follow the same pattern you have laid out here.


Answer URL
