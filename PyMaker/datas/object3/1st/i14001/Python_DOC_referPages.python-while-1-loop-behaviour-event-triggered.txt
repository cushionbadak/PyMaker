Natural Text
I'm new to python and wanted to know sockets more.I have 2 test scripts:and: The behaviour of a loop i'm used to is that it would spam Boom! string endlessly. But it's not the case! While loop seems more like event triggered?Boom! and hello world! is printed on the connection moment only.How does it work?When I leave onlyIt behaves "normally" (to what I know)Can I and how can I control loop behavior?
socket.accept blocks until a new connection is made. If you'd like to see 'Boom' repeatedly printed, you need to update your client code to repeatedly connect, send, and close. Otherwise, your server will block on the second iteration as it waits for a new connection.Do something like this:
The reason you won’t be spammed with “Boom!” lines is that sockets are blocking by default. That means that socket.recv() will halt the execution until something has been received. So while you are using a while loop, the loop isn’t bein repeated over and over because the recv() line stops it.You can control this behavior using socket.setblocking, and it’s also possible to set up the socket so blocking methods will timeout, so they won’t block forever. You would want to do the latter if you were dependent on something else running in parallel, but if your program is only there to consume the socket, blocking it forever is just fine, and in fact a good way to keep your processor free.


Answer URL
https://docs.python.org/3/library/socket.html#socket.socket.setblocking
