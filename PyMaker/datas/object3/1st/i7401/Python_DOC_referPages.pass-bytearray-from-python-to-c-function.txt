Natural Text
I would like to pass a ByteArray variable from my Python program to my DLL written in C in order to accelerate some specific processing which is too slow in Python. I have gone through the Web, tried Ctypes with combinations of byref, cast, memoryviews, addressof, but nothing works. Is there any simple way to achieve this without copying my ByteArray into something else that will pass ?Here is what I am trying to do:But I get a type error when passing the first parameter (MyData) to the C function.Is there any solution that doesn't require too much overhead that would waste the benefits of my C function ?Olivier
I'll assume that ByteArray is supposed to be bytearray. We can use create_string_buffer to create a mutable character buffer which is a ctypes array of c_char. But create_string_buffer will not accept a bytearray, we need to pass it a bytes object to initialize it; fortunately, casting between bytes and bytearray is fast and efficient.I don't have your DLL, so to test that the array behaves correctly I'll use the libc.strfry function to shuffle its chars. typical output


Answer URL
https://docs.python.org/3/library/ctypes.html#ctypes.create_string_buffer
https://docs.python.org/3/library/ctypes.html#ctypes._CData.from_buffer
