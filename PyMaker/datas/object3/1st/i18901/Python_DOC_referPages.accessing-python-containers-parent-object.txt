Natural Text
I need to create a containers that can access its children but also its parent. Here is a simple example of how I was thinking to do that :But, with that I have a memory issue when I try to delete a Node (note that the attribute mem_tracer is just here to be able to see if the object has been removed from the memory or not)This code shows the problem (the memory state at each line is given) :The garbage collector is not able to collect the deleted object as a reference to it still exists in its children (while they are not referenced anywhere anymore).We can see at the last line, that an explicit call to gc.collect solves the problem but I would prefer to get rid of it as it is very time consuming!So is there an other way to access the parent container than storing it into an attribute?Thanks in advance.
You have two choices:manually delete obj.parentuse weakref to keep a pseudo-reference to the parent.See the docs for more info on weakref.


Answer URL
https://docs.python.org/3/library/weakref.html#module-weakref
