Natural Text
I keep getting the following error when trying to parse some json:How do I make sure that I check my JSON output for a key before assigning it to a variable? If a key isn’t found, then I just want to assign a default value. Code below:
How do I make sure that I check my JSON outputAt this point your "JSON output" is just a plain native Python dictfor a key before assigning it to a variable? If a key isn’t found, then I just want to assign a default valueNow you know you have a dict, browsing the official documention for dict methods should answer the question:https://docs.python.org/3/library/stdtypes.html#dict.getget(key[, default])Return the value for key if key is in the dictionary, else default. If default is not given, it defaults to None, so that this method never raises a KeyError.so the general case is:Now if you have deeply nested dicts/lists where any key or index could be missing, catching KeyErrors and IndexErrors can be simpler:As a side note: your code snippet is filled with repeated channel_info_response_data['items'][0]['statistics'] and channel_info_response_data['items'][0]['snippet'] expressions. Using intermediate variables will make your code more readable, easier to maintain, AND a bit faster too:You may also want to learn about string formatting (contatenating strings is quite error prone and barely readable), and how to pass arguments to requests.get() 
You can either wrap all your assignment in something like or, let say, use .has_key(...). IMHO In your case first solution is preferable
suppose you have a dict, you have two options to handle the key-not-exist situation:1) get the key with default value, likeval will be 10 since there is not a key named k2) try-exceptThis way is far more flexible since you can do anything in the except block, even ignore the error with a pass statement if you really don't care about it.


Answer URL
https://docs.python.org/3/library/stdtypes.html#dict.get
