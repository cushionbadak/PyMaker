Natural Text
I am currently testing a Click CLI application and get result.exit_code == 2. Why does that happen?
This appears to indicate a usage error:An internal exception that signals a usage error. This typically aborts any further handling.This is consistent with Click's own tests, e.g.https://github.com/pallets/click/blob/123dd717439d8620d8d6be5574d2c9f007952326/tests/test_arguments.py#L82https://github.com/pallets/click/blob/123dd717439d8620d8d6be5574d2c9f007952326/tests/test_arguments.py#L190https://github.com/pallets/click/blob/123dd717439d8620d8d6be5574d2c9f007952326/tests/test_arguments.py#L201https://github.com/pallets/click/blob/123dd717439d8620d8d6be5574d2c9f007952326/tests/test_formatting.py#L157https://github.com/pallets/click/blob/123dd717439d8620d8d6be5574d2c9f007952326/tests/test_formatting.py#L177https://github.com/pallets/click/blob/123dd717439d8620d8d6be5574d2c9f007952326/tests/test_formatting.py#L193
I raninstead ofSo you need to specify the flag as entered via CLI, not only pass the parameters consumed by the function if you use @click.option.Additionally, the I made a typo for one of the flags.How to debugLook at the parameters you pass to runner.invoke (simplest: print it)Execute it via CLI (e.g. cli(['--debug', 'sync']))In my case this gave me the message


Answer URL
https://docs.python.org/3/library/os.html#os.EX_DATAERR
