Natural Text
I'd like to create an application with embedded python interpreter and basic debugging capabilities.Now I'm searching the API for functions which I could use to run code step-by-step and get the number of the current line of code which is being (or is about to be) executed.Official Python docs seem a little underdone for me when comes it to tracing and profiling.There is, for example, no information about the meaning of the return value of Py_tracefunc.So far I've assembled the following:However, the compiler outputs the following error:I'm operating on ManjaroLinux and using the following to compile the above:I've found that I can replace PyFrameObject with struct _frame and then program compiles but everyone knows it's a dirty hack, not a solution.The executable outputs the following:But I'd like the traces to follow the execution flow of the script (that is: start from line 3, then 4, 5 and then, due to the function call, 2).I could not find anything about step-by-step execution.Could you recommend some other sources about Python C API with more information and some introduction to the topic?I awarded the answer with bounty since it would expire anyway. However, I'm still looking and would be grateful for answers for other questions from above.
This error means that PyFrameObject has not been declared.  I did a Google search which showed me frameobject.h in the Python source tree is where that structure is declared.I expect that you can add the lineto resolve this.
The pyFrameObject has afield. You can use it. But apparently, it is not always storing the correct value. So, you should probably use the function:then, you can use to get the current file nameto get the current function nameand to get one level down in the call stack.                                        .
PyFrameObject is just a _frame struct. Just replace PyFrameObject by _frame in your function signature and you won't have to include any additional python headers.


Answer URL
https://docs.python.org/3/library/sys.html#sys.settrace
