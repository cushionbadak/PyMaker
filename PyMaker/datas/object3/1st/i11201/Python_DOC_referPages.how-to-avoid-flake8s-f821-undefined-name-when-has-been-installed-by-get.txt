Natural Text
Problem overview:In my project's main script, gettext installs the function _() that is used in other modules for translations (like in print(_('Something to translate'))).As stated by the doc:the _() function [is] installed in Pythonâ€™s builtins namespace, so it is easily accessible in all modules of your application.So, everything runs fine.Only problem: flake8 shows errors (actually returned by PyFlakes):This is normal, as _ is indeed not defined in main_script.py nor lib.py.Simple structure that reproduces the problem:Where lib.py contains this:and main_script.py this:and myapp.po contains:(was compiled by poedit to produce the mo file).As stated above, the main script does work:Important note: I'm looking for a solution working both for the script where gettext.install() is called and all other modules that do not need to call gettext.install(). Otherwise, the structure could be even more simple, because calling _() from main_script.py is enough to trigger F821.Solutions to solve the situation that look bad (or worse):add a # noqa comment at the end of each line using _()--ignore F821 (don't want to do that because this is useful in other situations)
You could specify the --builtins="_" which is more specific than --ignore F821.You should be able to specify this in a configuration file as well if you don't like command line arguments.


Answer URL
https://docs.python.org/3/library/gettext.html#gettext.install
