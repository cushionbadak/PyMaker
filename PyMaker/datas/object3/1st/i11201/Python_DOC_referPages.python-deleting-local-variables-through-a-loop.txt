Natural Text
I wrote the following code in middle of a function to delete all variables except few.But it doesn't delete any variables even though it goes to the del locals()[vi] statementEdit1: I am running out of memory in middle of the function. So, I thought about removing the 100's of variables I have locally in the function. I wrote the snippet above only to show what I am seeking on doing.Edit2: can someone explain why negative votes on this question. Is there an obvious solution that I am missing.Edit3: I am not able to create another function in middle of what I am doing. So, I want to try the delete variables option
locals() is a view on the locals, mutating it is not recommended and provides no guarantees as to whether the "real" values are changed or not., per the note from the docs:Note: The contents of this dictionary should not be modified; changes may not affect the values of local and free variables used by the interpreter.The correct solution is usually to refactor your function, so all the stuff you want to delete are local variables in a separate function, and the stuff you want to keep is returned by that function. Python will clean the locals for you when the subfunction returns, so only the return values are kept; if there are reference cycles in that local scope that must be freed immediately, you can explicitly call gc.collect() after the function returns to force a full cycle collection, but that's usually not necessary.


Answer URL
https://docs.python.org/3/library/functions.html#locals
https://docs.python.org/3/library/gc.html#gc.collect
