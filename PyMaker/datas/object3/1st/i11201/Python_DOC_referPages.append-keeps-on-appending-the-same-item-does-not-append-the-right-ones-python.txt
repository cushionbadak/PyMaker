Natural Text
This is what I have imported:Here I define the function matrix(p,m)Here I define MHops which basically takes the dimensions of the matrix, the matrix and the vector ct and gives me a new matrix mm and a new vector ctNow what I wanna do is iterating this process, but I wanna be able to visualize every step in a list. In short what I am doing is:1. creating a matrix representing a lattice, where 0 means there is no particle in that slot and 1 means there is a particle there.2. create a function MHops which simulate a random walk of one step and gives me the new matrix and a vector ct which shows the times at which the particles move.Now I want to have a vector or an array where I have 2*n objects, i.e. the matrix mm and the vector ct for n iterations. I want the in a array, list or something like this cause I need to use them later on.Here starts my problem:I create an empty list, I use append to append items at every iteration of the while loop. However the result that I get is a list d with n equal objects coming from the last iteration!Hence my function for the iteration is the following:However it doesn't work, I don't understand why. What I am doing is using MHops, then I want to set the new matrix and the new vector as those in the output of MHops and doing this again. However if you run this code, you will see that v works, i.e. the vector of the times increases and the matrix of the lattice change, however when I append this to d, d is basically a list of n equal objects, where the object are the last iteration.What is my mistake?Furthermore if you have any coding advice for this code, they would be more than welcome, I am not sure this is an efficient way.Just to let you understand better, I would like to use the final vector d in another function where first of all I pick a random time T, then  I would basically check every odd entry (every ct) and hence check every entry of every ct and see if these numbers are less than or equal to T. If this happens, then the movement of the particle happened, otherwise it didn't. From this then I will try to visualize with matpotlibt the result with an histogram or something similar.Is there anyone who knows how to run this kind of simulation in matlab? Do you think it would be easier?
You're passing and storing by references not copies, so on the next iteration of your loop MHops alters your previously stored version in d. Use import copy; d.append(copy.deepcopy(mat)) to instead store a copy which won't be altered later.Why? Python is passing the list by reference, and every loop you're storing a reference to the same matrix object in d.I had a look through python docs, and the only mention I can find is "how do i write a function with output parameters (call by reference)".Here's a simpler example of your code:When run gives:Python only passes mutable objects (such as lists) by reference. An integer isn't a mutable object, here's a slightly modified version of the above example which operates on a single integer:When run gives:which is the behaviour you were expecting.This SO answer How do I pass a variable by reference? explains it very well.


Answer URL
https://docs.python.org/3/faq/programming.html#how-do-i-write-a-function-with-output-parameters-call-by-reference
