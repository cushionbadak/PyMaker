Natural Text
Is there an easy and more or less standard way to dump all the variables into a file, something like stacktrace but with the variables names and values? The ones that are in locals(), globals() and maybe dir().I can't find an easy way, here's my code for "locals()" which doesn't work because the keys can be of different types:And without filtering, when trying to dump the variables I get an error:I think there must be something better that doing it manually.
To start, in your non-working example, you don't exactly filter the keys (which should normally only be strings even if it's not technically required); locals()[x] is the values.But even if you did filter the keys in some way, you don't generally know that all of the remaining values are JSON serialisable. Therefore, you either need to filter the values to keep only types that can be mapped to JSON, or you need a default serialiser implementation that applies some sensible serialisation to any value. The simplest thing would be to just use the built-in string representation as a fall-back:By the way, there's also a more direct and efficient way of dumping JSON to a file (note the difference between dump and dumps):


Answer URL
https://docs.python.org/3/library/gc.html#gc.get_objects
