Natural Text
I am reading JSON into my script and building a list consisting of dictionaries.My JSON:My code:The problem is that the values in userinfo_list get overwritten as soon as my JSON has two sub-keys (table*).This is the output I get, which doesn't make sense:
You are re-appending the same single dictionary each iteration:Appending does not create a copy, so you get multiple references to the same dictionary, and you'll only see the last change reflected. You make the same mistake with the userinfo dictionary.Create a new dictionary in the loop:You can just specify the key-value pairs directly when creating the dictionary:and this can be simplified with a list comprehension to:Note that you don't need to call dict.keys() to loop over a dictionary. You can loop directly over the dictionary with the exact same results. You probably want to loop over .items() instead and avoid having to look up the value for the key each time, and use .values() when you don't actually need the key at all:The creation of dictionaries per table per company can also be replaced by a list comprehension, but at this point sticking to nested for loops is probably going to be easier to comprehend for future readers.The above now produces:from your sample data (and my own definition of generate_password()).


Answer URL
https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions
