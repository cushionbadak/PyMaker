Natural Text
I have a Celery task whose job is to download files to a local directory, and then upload to a S3 bucket when download is complete.My issue is that with a recent update of the workers, I'm getting permission denied errors when accessing the folder to upload.  The code was fundamentally unchanged other than from going to script-method to class based implementation.I made a task just to create the directories, with a single method call:and it creates the directory with permissions 300This is despite in the config.According to the docs, the last option allows celery to create a directory owned byt the user/group specified above.  That much is happening, but nothing is said about permissions.Is there any way around this?
The CELERY_CREATE_DIR only tells celery create its operational directories:Always create directories (log directory and pid file directory). Default is to only create directories when no custom logfile/pidfile set.I believe your problem is with the os.mkdirs. According to the os.mkdir doc, mode may be ignored on your system and you need to use os.chmod to change the mode.


Answer URL
https://docs.python.org/3/library/os.html#os.mkdir
