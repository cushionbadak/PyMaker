Natural Text
I need to test a instance method that calls open.  In the first test case, I set mock.mock_open to return a string, as expected.  This works wonderfully.However, I also need to test the case in which an IOError is thrown from this function.  How can I make mock.mock_open raise an arbitrary exception?This is my approach so far:
Assign the exception to mock.mock_open.side_effect:From the mock.Mock.side_effect documentation:This can either be a function to be called when the mock is called, or an exception (class or instance) to be raised.Demo:When using patch() as a context manager, a new mock object is produced; assign to that mock object:
I found Martijn's answer a little hard to generalize, so here is what I hope is a simpler answer less tied to the OPs initial code:


Answer URL
https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.side_effect
