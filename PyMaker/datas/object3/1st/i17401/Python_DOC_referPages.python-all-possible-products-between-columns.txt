Natural Text
I have a numpy matrix X and I would like to add to this matrix as new variables all the possible products between 2 columns.Is there an elegant way to do that?I think a combination of numpy and itertools should workEDIT:Very good answers but are they considering that X is a matrix? So x1,x1,.. x3 can eventually be arrays?EDIT:A Real example 
Itertools should be the answer here.Result:
I think Samy's solution is pretty good. If you need to use numpy, you could transform it a little like this:Gives the same output as Samy's solution:
If your arrays are small, then Samy's pure-Python solution using itertools.combinations should be fine:But if your arrays are large, then you'll get a substantial speedup by fully vectorizing the computation, using numpy.triu_indices, like this:Let's compare these:The solution using numpy.triu_indices also works for multi-dimensional data:If you want to operate on columns rather than rows, use:For example:


Answer URL
