Natural Text
I have an example:Does requests.get use the same structure as this example?Can you give me examples where with statement is required?
As explained in the documentation, the Session() can be used as a context manager to be able to close it and all the underlying used adapters in a clean fashion:Sessions can also be used as context managers:This will make sure the session is closed as soon as the with block is  exited, even if unhandled exceptions occurred.The Session can and is supposed to be shared across multiple requests persisting cookies and other parameters and reusing the same TCP connection, but the requests.get() on the other hand is just a single call that would produce a single Response instance - there is no point in context manager for it.Please read the following to get a better understanding of Context Managers:PEP 343Introduction to Context Managers in PythonWith Statement Context Managers
If you read the documentation for requests.SessionSessions can also be used as context managers:This will make sure the session is closed as soon as the with block is exited, even if unhandled exceptions occurred.Making use of the with statement is a common idiom in Python to handle context management:The with statement is used to wrap the execution of a block with methods defined by a context manager (see section With Statement Context Managers). This allows common try...except...finally usage patterns to be encapsulated for convenient reuse.


Answer URL
https://docs.python.org/3/reference/compound_stmts.html#the-with-statement
