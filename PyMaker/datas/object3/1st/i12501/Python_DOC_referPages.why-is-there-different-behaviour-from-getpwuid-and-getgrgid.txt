Natural Text
In Python 2.7, 3.4 and 3.5, grp.getgrgid is capable of accepting a string:However, pwd.getpwuid can't do the same:This is because inside Modules/pwdmodule.c, getpwuid uses PyNumber_ParseTuple with a converter that uses PyNumber_Index to get a Python integer, and that raises an exception on failure. However, in Modules/grpmodule.c, grp_getgrgid uses PyNumber_Long  (Or PyNumber_Int for an old enough Python) as a conversion first, and as the documentation says at https://docs.python.org/3/c-api/number.html, this is the equivalent of running int(o), which can convert a string to an integer. Only then is it given to PyNumber_Index, by way of a helper function _Py_Gid_ConverterWhat is the reason for this difference? Is it a deliberate choice based on some history?The behaviour of getgrgid seems more helpful, and it's odd that it doesn't apply to both functions. Is this undesirable behaviour in getgrgid or getpwuid? 
The short answer is because humans are fallible and mistakes happen.  Some are doozies and get noticed quickly, others are minor and can go years without detection.Thank you for helping make Python better!


Answer URL
https://docs.python.org/3/c-api/number.html
