Natural Text
I am trying to connect to an ActiveMQ message broker which uses SSL. I am getting the error: Example code taken from stompest documentation: I only changed server, user and pass:I believe Stompest can handle SSL, but I can't find any reference in the documentation.Thanks
Your StompConfig has to be provided with an SSLContext with a configuration of the SSL connection. Exactly how this one should look will depend on the specifics of your setup, so let us have a look at some of the options.For more information on how to set up ActiveMQ to use SSL in general, see this Apache guide, and this StackOverflow question which addresses the same issue but for stomp.py.No validationIf all you need is a quick and dirty connection with no validation of broker or client -- that is, a connection which would be susceptible to MITM attacks from an active attacker -- then you can supply an SSLContext with validation disabled:With this, all you need to do is to provide sslContext to your StompConfig:Broker certificate validationThe first improvement over this would be to verify the certificate provided by the server. Assuming that you are using a self-signed certificate (as opposed to one signed by a certificate authority), you can simply provide your SSLContext with the certificate directly:First, on the broker, export the certificate from its keystore, which we will assume is stored in a file called broker.ks by using the Java keytool throughNow, move broker.pem to the Python client and change the sslContext configuration as follows:Client certificate validationActiveMQ servers can also be set up to only allow connections from clients with predefined certificates. Assuming that you have a PEM encoded client certificate in client.pem, have stored the private key in client.key (cf. e.g. the first part of this answer), and set up ApacheMQ to validate that certificate (cf. the third part of the same answer), then all you need to do to have stompest use that pair for the connection is to callas part of the configuration.


Answer URL
https://docs.python.org/3/library/ssl.html#ssl.SSLContext
