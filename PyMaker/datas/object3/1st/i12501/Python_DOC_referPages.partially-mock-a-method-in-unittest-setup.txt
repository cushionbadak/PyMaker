Natural Text
I am trying to understand the mock/patch framework, but have a problem. Here are my simplified codes:Essentially I want to mock only B.g inside the test, but not B.h. I got some idea from https://docs.python.org/3/library/unittest.mock-examples.html#partial-mocking, but B.g is still not mocked. Thank you!
In the example that you linked the key problem is Unfortunately datetime.date is written in CThat is why you need to mock the module and wrap what you don't want to mock (You cannot patch C methods directly).Is all other cases (patch python objects) you can use just :Anyway take care that your patch will be active just in the with context, out of it you will find the original reference. To have a better control of the context it you can use also decorators, start() and stop().I strongly encourage you read carefully patch and where to patch.


Answer URL
https://docs.python.org/3/library/unittest.mock-examples.html#partial-mocking
https://docs.python.org/3/library/unittest.mock.html#the-patchers
https://docs.python.org/3/library/unittest.mock.html#where-to-patch
