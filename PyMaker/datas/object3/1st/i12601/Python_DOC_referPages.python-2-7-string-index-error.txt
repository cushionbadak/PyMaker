Natural Text
I'm writing a program to choose a random line from a text file using a while loop as a counter and then another variable to choose the random line:However, I get the following error when trying to run the program:
You need readlines() not readline(); but actually you can highly simplify your code:Or, if you prefer the readlines() version:
You're overwriting fortunes on each iteration of the while loop. At the EOF .readline() returns an empty string, therefore fortunes[rand_line] raises the IndexError. You could use .readlines() instead (or just use the file object as an iterator):
The problem is here:You just re-defined the variable, so after that while loop end, fortunes actually is the last line in your file.You can simply use io.IOBase.readlines() to read the file into a list line-by-line, and use random.choice() to choose an element in a list randomly. You don't need a counter and slice the list yourself.For example:However, if you also want to know how to fix your code, just put the output of io.IOBase.readline() into a list like below:Note that if you don't want use .readlines() and random.choice(), you still don't need that counter, you can also use len(fortunes) to get the length of your list instead of write a useless counter yourself.


Answer URL
https://docs.python.org/3/library/io.html#io.IOBase.readlines
https://docs.python.org/3/library/random.html#random.choice
https://docs.python.org/3/library/io.html#io.IOBase.readline
https://docs.python.org/3/library/functions.html#len
