Natural Text
Working with currency data in Python Pandas/Numpy, I am experiencing "unexpected" rounding behavior due to the float representation of decimals. For exampleCalculating in decimals as I learned in school, the result is 17.955 so I would expect rounding to 17.96.How can I represent numbers in Python Pandas to achieve "decimal style" rounding? I have seen the Decimal module and the currency package, but I'm not sure how to efficiently use them with Pandas data frames.SOLUTION:In case anybody else is interested, this is how I solved the problem:Also, I ended up using the cdecimal implementation, which uses the same syntax but is some 10x faster.
You can use the Decimal type in pandas dataframes. Everything should work as expected since the Decimal type implements it's own versions of addition and multiplication, which pandas will happily use behind the scenes for sum, cumsum, etc.It won't be as fast as floating points, but using precise decimal representations is never as fast as using floating points.I wouldn't worry about efficiency unless you actually run into performance problems in your program.http://rhodesmill.org/brandon/2014/pandas-payroll/


Answer URL
https://docs.python.org/3/tutorial/floatingpoint.html
