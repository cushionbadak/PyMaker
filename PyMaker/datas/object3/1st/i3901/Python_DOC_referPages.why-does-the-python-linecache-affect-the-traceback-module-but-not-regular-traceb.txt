Natural Text
Consider the following Python program:I am dynamically defining a function that raises an exception and adding it to the linecache. The output of the code isIf I then get a traceback from that function using the traceback module, the line of code from the function is shown (the 1/0 part of the first traceback). But if I just let the code raise an exception and get the regular traceback from the interpreter, it doesn't show the code. Why doesn't the regular interpreter traceback use the linecache? Is there a way to make the code appear in regular tracebacks? 
The default sys.excepthook uses a separate, C-level implementation of traceback printing, not the traceback module. (Perhaps this is so it still works even if the system is too borked to use traceback.py.) The C implementation doesn't try to use linecache. You can see the code it uses to retrieve source lines in _Py_DisplaySourceLine.If you want tracebacks to use the traceback module's implementation, you could replace sys.excepthook with traceback.print_exception:


Answer URL
https://docs.python.org/3/library/sys.html#sys.excepthook
https://docs.python.org/3/library/traceback.html#traceback.print_exception
