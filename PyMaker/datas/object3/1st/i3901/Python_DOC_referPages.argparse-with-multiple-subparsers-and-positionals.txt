Natural Text
Let's say I have a script, select_libs.py, which enables you to choose which libraries to include in some build process. When running this script I want to be able to specify the library name, branch and version. Here are some use cases.select_libs.pyUse script defaults when positionals are not defined.select_libs.py opencv stable 3.4.1select_libs.py opencv stable 3.4.1 boost development 1.67.0So I imagine something as simple as this:The first two use cases both work, but the third:produces this error:In my head, this should work since each parser have exactly two positional arguments, so it should know that boost is not an argument to opencv and trigger the boost parser accordingly. Clearly I'm wrong, but what have I missed and how can I make it work as intended (if possible)?My current Python version is 3.5.2.
Argparse is not suited for this kind of thing. add_subparsers assumes that exactly 1 of the sub-commands will be used, so it throws an error if you try to set both opencv and boost. And other than that, argparse has no concept of arguments being associated with other arguments.Option 1If you don't mind using keyword options instead of positional options, you can use the solution from this answer:Option 2Use the nargs argument to make it a mix of positional and named arguments:Option 3Parse the arguments manually:


Answer URL
https://docs.python.org/3/library/argparse.html#nargs
