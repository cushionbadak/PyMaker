Natural Text
I am trying to download a CSV file (in-memory) from SFTP using Paramiko and import it into a pandas dataframe.The code below fails, telling me: OSError: File is not open for readingI assume that I need some kind of buffer or file like object for fl instead, since open needs a file. I am relatively new to all of this, so I would be happy it if someone could help.
A simple solution that still allows you to use progress callback is:Use BytesIO file-like object to store a downloaded file to memory;You have to seek file pointer back to file start after downloading it, before you start reading it.Though with this solution, you will end up having the file loaded to memory twice.Better solution is to implement a file-like object. It will even allow you to download and parse the file at the same time.And use it like:
What I ended up doing was a simple version of that, unfortunately without a callback for the progress, I also needed rb for reading:Anyway, Martin's answer is what I was looking for!


Answer URL
https://docs.python.org/3/library/io.html#io.BytesIO
