Natural Text
Hi I'm a beginner in programming but have some basic understanding.I'm trying to do a python script which given a cpp file like this:Should output this:And here's the problem, the script below output this:And.. really I'm not able how to figure it outThanks you for your time, I hope to have written the question good!Here is my script:
Ignoring the code errors made when you were adapting your example for SO (e.g. mgraffeopenline instead of mbracketopenline, functionCount() not returning a result etc.) at one point you have:Effectively setting both mbracketcloseline and mbracketopenline to the same new list and whenever you modify each of them you're modifying the same list. That's primarily what causes your issue, but there are others to consider.Also, as I've stated in my comment, having multiple braces on the same line is perfectly valid and you need to account for them (including their positions) so you actually need to go through your code character by character and pick up every occurrence, something like:Which for your file produces:But if you were to change the keyInput function to:It will still produce a valid result:And if you want it printed as in your example (I find having actual line indexes separated far more useful) just replace the line:With:However, this doesn't address the issue zvone mentioned where you can have braces in comments, macros, strings... and all of these will be picked up as valid starts/end of functions. There's far more to a code parser than simple character matching.If you really want to dig into parsing C code, there is a very useful module pycparser designed to do just that. It might take a bit longer to set up, but it will give you far more code insight than this sort of a stab-in-the-dark parsing. Of course, it all depends on what's your actual use case...


Answer URL
https://docs.python.org/3/reference/executionmodel.html#binding-of-names
