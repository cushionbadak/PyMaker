Natural Text
I am trying to create a GUI in tkinter. The Gui is basically for Mcp23017. I am trying to configure the input and output pins so that the user could change them according to their choice.. There is also an option to make the inputs/outputs high or low..Now I am trying to read a pin using 'i2cget'(using a seperate function).. I need to display the output of this subprocess call into a label on the gui.. This is what my code looks like:When this function excutes(by pressing a button), however it prints a value '1' on the python shell alternatly when I press the button... I dont know how to redirect the output to the label.. Could somebody suggest something?Update:: On executing the suggested commands:I printed the 'output' and 'process' and they gave me the follwing respectivley:Since nothing is connected to the pin I expect it to return a value of '0'.. I don't know what is the b'' it is giving me ...Any advice is really appreciated..Kind Regards,Namita.
What you have is the return code, not the output.From subprocess.call docs:Run the command described by args. Wait for command to complete, then return the returncode attribute.Instead, use subprocess.Popen to open a process, subprocess.PIPE to pipe the output to you, and Popen.communicate get the output:
There are multiple things wrong in your code. You should split your problem into tiny tiny subtasks and complete each task independently.1. Get output from a subprocess as a string variable in Pythonsubprocess.call() returns an integer (exit status), not string (the output) -- start Python REPL and try to run any command via subprocess and see for yourself: it should help you to understand what is happening in addition to reading the linked documentation.You could use subprocess.check_output(), to get the output if you don't mind blocking your GUI thread -- nothing will respond until the subprocess returns. Otherwise (if i2cget does not return in an instant, always), you could do it asynchroniously using threads or .createfilehandler() method.2. Learn why x = print(output) is useless in PythonIt is SyntaxError in Python 2 by default. Otherwise print() function always returns None i.e., you could have written x = None (except that output is printed to stdout as a side-effect).3. Update text in a Labelcreate a label only once instead of creating a new label every 5 secondspass StringVar() as a textvariable parameteruse .set(new_text) to update the text


Answer URL
https://docs.python.org/3/library/subprocess.html#subprocess.call
https://docs.python.org/3/tutorial/
