Natural Text
I need to process bulk of CSV files,The files are from China, so I guess the encoding is non-utf8However the files even can not read in Python 3.How can I read those files and write into new files with Python 3.Here's the snippetsAnd I got the error UnicodeDecodeError: 'utf-8' codec can't decode byte 0xb8 in position 3: invalid start byteHere are the XLS file and  sample pyhton scripthttps://github.com/poc7667/sucks_encoding_problem
The file seems to be encoded as GB2312. Specify the encoding option to open() like this:I determined the encoding using the chardet module:It is worth noting that several codecs (encodings) work for this file:gb2312, gbk, and gb18030 all produce the same result.big5hkscs works too but produces a different result to the other three codecs. I don't know for sure which one is correct, or if any of them is correct.BTW, the file does not seem to be a normal CSV file.
You need to specify the correct codec when opening the file. What the correct codec is we can only guess at; the GitHub sample you uploaded decodes fine when using one of the Chinese GB* codecs, but those codecs are quite eager (text not encoded with one of those can also be decoded, just with the wrong results).You'll need to ask the source of those CSV files if a codec is known. That could be in the documentation, or in the HTTP Content-Type header (look for a charset= parameter), or by some other metadata means.To specify the codec when opening the file, use the encoding argument:See the Standard Encodings table for what codecs Python 3 can handle out of the box; there are various Chinese codecs to chose from there.


Answer URL
https://docs.python.org/3/library/codecs.html#standard-encodings
