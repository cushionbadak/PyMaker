Natural Text
This is small script to monitor temperatures in Python, using smartmontools and lm-sensors. But when i try to run it i have a errorBut when i try this command manually in terminal they work great.Some info: Linux LME 4.0.0-040000-generic #201504121935 SMP Sun Apr 12 23:36:33 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
A CalledProcessError will be raised if any non-zero exit code is returned by your called process.  On the command line, you should echo $? to get the last return code and see if it really does return 2.  I suspect it will.If that is okay in your python code, you can except the CalledProcessError and get any information from within its attributes especially the output attribute. (Look up this error in the python docs for more information.)Example:
Return code of 2 from smartctl means it failed to open the device.  Make sure that the user who is running the Python code has permission to open all of the disks you want it to check.From the RETURN VALUES section of smartctl's man page:Bit 1: Device open failed, or device did not return an IDENTIFY  DEVICE structureSo I suspect this is really a permissions problem.  I verified this on my system.  If I run subprocess.check_output( [ 'smartctl', '-A', '/dev/sda2' ] ) I get the error with it returning 2, but if I run subprocess.check_output( [ 'sudo', 'smartctl', '-A', '/dev/sda2' ] ) it works and I see the output of the command.


Answer URL
https://docs.python.org/3/library/subprocess.html
