Natural Text
I'm writing a Python script to search a folder (passed as a command line argument) for files that have the same MD5 checksum (meaning that these files are equal) and print them on screen.I have used the os.walk() function to scan the folder and wrote a function to calculate the MD5 sum. But now I can't figure out how to search for the files with the same MD5 checksum. Could you please help me with this?Now I want to search for and print the elements that have the same MD5 checksum.
You were nearly there. The key is that you have to invert the structure of your dictionary: In order to easily search for files with the same checksum, you can use the MD5 sum as the key, and a list of paths that have that checksum as the value:The check then simply comes down to: Does a particular checksum have more than one entry in its list of paths? If yes, those files have the same checksum.In this code I used a defaultdict that defaults to a list to avoid having to check whether a checksum is already in the dictionary.Example Output:A couple notes:Your shebang was wrong. It should start with #!/ instead of #/The indentation in your md5checksums() function was wrong. Indentation is very important in Python, make sure you pay close attention to it.Use os.path.join to join file paths.Try to follow the PEP8 style guide, it makes your code much more readable 
You need to keep track of the colliding filenames for each hash (i.e. a mapping from hashes to filenames of files with that hash). Easiest way to do that is usinga a defaultdict.The following code gives you a dictionary hashes, which contains as keys the MD5 checksums, and as values a list of files with that checksum. You can then easily filter the values for list with more than one item (i.e. two or more files with the same hash).


Answer URL
https://docs.python.org/3/library/collections.html#collections.defaultdict
https://docs.python.org/3/library/os.path.html#os.path.join
