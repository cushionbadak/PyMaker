Natural Text
I'm testing a function which uses Python Wand. When I test it with an invalid input it throws a BlobError which is a custom error from the Wand library. However, it seems that there's another TypeError happening within Wand at some point when I do so, which results in a big ugly Exception ignored in... error message under the Pytest results stdout.I'm checking if Pytest raises the BlobError and that's fine, but I can't also check if it raises the TypeError, or just mute that message. So here's the Pytest test output:And my test is simply:So the test is working the way I want, but how do I deal with the extra Wand TypeError?
That message indicates an exception raised inside __del__, doc says:Due to the precarious circumstances under which del() methods are invoked, exceptions that occur during their execution are ignored, and a warning is printed to sys.stderr instead. ...most likely, this happened when the python interpreter is exiting, to my knowledge, there is no simple way to mute this message with pytest. But with the line-no of traceback, I guess you are using a buggy version of wand, someone has reported a similar issue on github, you could try an upgrade and report issue back there.


Answer URL
https://docs.python.org/3/reference/datamodel.html#object.__del__
