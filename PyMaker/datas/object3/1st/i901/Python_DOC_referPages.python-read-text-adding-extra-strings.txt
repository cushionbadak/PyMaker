Natural Text
I've created a function that takes in a file with dynamic SQL (and parameters) then returns the end SQL result. It seems to be adding extra strings because my unit test is failing and it shows extra strings.My function:My unit test:select_all_from_{table}.py:Unit test failure message:
There are two reasons your unit test is failing:Your sql string is in mixed cases ("SELECT" and "FROM" are upper cases) whereas your comparison string is in all lower cases.The text within select_all_from_{table}.py are in double quotes but your comparison string doesn't have the double quotes.Since read_text() reads the file content as str you don't need the double quotes.  Remove the double quotes from your file and for good practice, do a case insensitive test:Or just sql.lower() == 'select * from sandbox.test_table' will suffice in this particular case.For unit tests it is best you be vigilant about your input and output and make sure your tests are exact.


Answer URL
https://docs.python.org/3/library/pathlib.html#pathlib.Path.read_text
