Natural Text
This is the method I want to test. In this test method (test_get_all_products), I want to pass in a list of products and a mocked response for the DB call which is identified by dal.  This is my testBut when I assert the products[0]['termMonths'] == 1 which comes from the mocked object, it fails because the termMonths is actually the Mock object itself, not the return value(product_sku_cost) I was expecting.Please help me figure out what I am doing incorrectly above.
It is just a TYPO error: try to change SKUCost to skucost where you configured dal. So configuration line become:Anyway there is some other issues in your test: You don't need to patch anything in your test because you're passing dal object and nothing use model.dal reference. I don't know what model.dal but if what you want to do is to have the same signature/properties you can use create_autospec to build it.Your test can be:If model.dal is a class use instance=True when you create autospec.


Answer URL
https://docs.python.org/3/library/unittest.mock.html#create-autospec
