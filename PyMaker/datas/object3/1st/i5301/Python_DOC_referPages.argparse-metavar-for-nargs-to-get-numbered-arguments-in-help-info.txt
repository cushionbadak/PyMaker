Natural Text
In the argparse document, there is an example using nargs='+':The corresponding help information is Is it possible to set the metavar such that the help info looks like this?
metavar can be tuple, as inBut that only works for optionals (flagged arguments), not positionals. I'm not exactly sure why, though I may have dug into this issue before.https://docs.python.org/3/library/argparse.html#metavarWith the positional, the error stack includes:A positional doesn't have option_strings (or its empty), so it's using the metavar, = ... unpacking idiom to ask for just one string.  Hence the error: ValueError: too many values to unpack (expected 1).So expecting only one metavar variable is quite intentional, but I'm not sure about the rational.  Maybe it's because it would be harder to tell where one positional ends and the next starts in the usage:I looked at this a couple of years ago, https://bugs.python.org/issue14074.  Looks like there can be problems with the usage, help-lines and error message.Actually the problem isn't in the usage, it's in formatting the help lines:The normal help line for a positional just shows one symbol, not the N [N ...] of the usage:
I would make a custom HelpFormatter and use that.  Below is a quick hack.


Answer URL
https://docs.python.org/3/library/argparse.html
https://docs.python.org/3/library/argparse.html#metavar
