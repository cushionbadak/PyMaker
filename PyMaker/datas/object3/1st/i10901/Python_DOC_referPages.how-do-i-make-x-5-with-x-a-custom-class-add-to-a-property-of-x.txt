Natural Text
I have a class like this:I would like to be able to do something like:And have b the same, but with 7 added to b.a. However, if I actually run this, it turns b into a NoneType object. I assume this is because C.__iadd__ does not return anything.Do I have to make C.__iadd__ return a copy of self with self.a modified? Is there a way to implement this kind of addition without copying the entire object and returning that?
You forgot to return self from the __iadd__ method:From the object.__iadd__() documentation:These methods should attempt to do the operation in-place (modifying self) and return the result (which could be, but does not have to be, self). Without an explicit return statement, a function returns None as a default, so b += 7 produced None which is the result of the assignment.


Answer URL
https://docs.python.org/3/whatsnew/2.0.html#augmented-assignment
