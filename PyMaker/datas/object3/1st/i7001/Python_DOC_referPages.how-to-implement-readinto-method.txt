Natural Text
I would like to implement a class which inherits from RawIOBase. I'm struggling to implement the readinto method. Basically, I don't know how to alter the content of the bytearray object passed as a parameter.I've tried following (naive) approach:But this, as I suspect, will assign new bytearray object to local variable b and it does not change content of the original bytearray.
from the docs of RawIOBase.readinto: Read bytes into a pre-allocated, writable bytes-like object b, and return the number of bytes read. If the object is in non-blocking mode and no bytes are available, None is returned.its a bit confusing but you need to write into the bytes-like object b (not read)Example UsageTake a look at CPython implementation of BytesIO.readinto.basically its does memcpy from the object's buffer to the function input buffer.
You want to mutate the object b. Looking at the docs of bytearray, something like this should work:


Answer URL
https://docs.python.org/3/library/io.html#io.RawIOBase
https://docs.python.org/3/glossary.html#term-bytes-like-object
