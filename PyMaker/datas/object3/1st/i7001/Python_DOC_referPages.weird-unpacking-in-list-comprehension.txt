Natural Text
This question already has an answer here:asterisk in tuple, list and set definitions, double asterisk in dict definition                    1 answer                What does ** (double star/asterisk) and * (star/asterisk) do for parameters?                    18 answers                I was watching a lecture from David Beazley. At minute 23:20 he does some "magic" with unpacking that I am having hard time understanding.The "magic line" is I have searched for similar examples but I couldn't find any. Can you explain what is going on in this code? Can you point me to some similar examples?
The snippet is unpacking an already existing mapping row in a dictionary literal while adding a new element. A simplified example demonstrating this:This unpacking is only available in Pythons >= 3.5 as introduced with PEP 448; in previous versions it is a SyntaxError.
The {**row} just unpacks the dictionary (which is allowed in literals in python-3.5+):Essentially this just makes a copy of row because you unpack a dictionary into a dictionary.The second part is normal dictionary literal syntax:The "magic" bit is that dictionaries map unique keys to some value, so this is essentially a copy the row dictionary and replaces the 'DBA Name' key with the new value. That works because literals are interpreted from left to right:Normally you would just create a copy of the dictionary and replace the key:But that doesn't work in comprehensions (assignment inside comprehensions is a SyntaxError) so you need some "magic" (or invoke special methods). But you could also do it with a nested comprehension (it's slower but maybe less magic):The indentation may seem a bit off but I find it easier to visualize this way, you could also use just one line:


Answer URL
https://docs.python.org/3/reference/expressions.html#dictionary-displays
