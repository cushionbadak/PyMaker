Natural Text
I got a list of strings from an REST API. I know from the documentation that  the item at index 0 and 2 are integers and item at 1 and 3 are floats.To do any sort of computation with the data I need to cast it to the proper type. While it's possible to cast the values each time they're used I rather prefer to cast the list to correct type before starting the computations to keep the equations cleaner. The code below is working but is very ugly:As I'm working with integers and floats in this particular example one possible solution is to cast each item to float. float_response = map(float, rest_response). Then I can simply unpack the list to name the values accordingly in the equations.That is my current solution (but with better names) but while figuring that one out I became curious if there's any good pythonic solution to this kind of problem?
Define a second list that matches your type casts, zip it with your list of values.
this is a solution using itertools.cycle in order to cycle through the cast functions:
The existing answer is perfect if you know the types you expect to be given. If however you don't know beforehand if your values are int or floats, then you can use the AST module to parse the string safely into the appropriate type:Then, you call:
If your list is in that pattern of every other, you can use modulo:Or, if you want to take advantage of tuple assignment to named variables, you can slice and map by desired type:
I think it is reasonably Pythonic to try to convert to an int, if this fails then use a float,
yep, given that all are strings, just write a regex that checks, if the string has a '.' in it and if yes, cast it to float. Otherwise to intedit: regex is redundant, simple in string is sufficient.here is what I would do:Simpler function:But I'm happy to hear simpler and more straightforward solution
Of all of the solutions offered, the one you provide in your question is the best. It has speed and clarity.If you wanted to shorten the solution you provided, you could shorten it to one line:I don't know all of the possible formats to the incoming data, but if the float values will always have a decimal, then another solution would be:


Answer URL
https://docs.python.org/3/library/itertools.html?#itertools.cycle
