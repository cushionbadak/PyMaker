Natural Text
I am trying to set default values on an instance of configparser.ConfigParser after its instantiation.While inspecting the instance I found the method ConfigParser.setdefault():While this is not very helpful at all, the official documentation does not even mention this public method.So I started just to try-and-error:But I could not figure out how to initialize a default section 'asd' with a default key 'foo' with value 'bar'.So my questions are:What is the method ConfigParser.setdefault() for?How can I set defaults on my ConfigParser's instance after its initialization?UpdateAfter some further investigation it turned out that ConfigParser.setdefault() is inherited from _collections_abc.MutableMapping.
ConfigParser.setdefault has nothing to do with setting the ConfigParser's defaults. If you want to set defaults, use the DEFAULT section, which provides defaults for other sections:or if you configured a different default_section, use whatever you configured.As described in the docs,configparser objects behave as close to actual dictionaries as possible. The mapping interface is complete and adheres to the MutableMapping ABC. However, there are a few differences that should be taken into account:[list of differences, none of which involve setdefault]setdefault is one of the operations specified by MutableMapping. cp.setdefault('asd', 'foo') attempts to set cp['asd'] = 'foo' if there is no entry for cp['asd'], then returns cp['asd'].In a ConfigParser, an entry for cp['asd'] would be an 'asd' section, and it is not legal to set cp['asd'] = 'foo'. It is legal to set cp['asd'] to a mapping, but you already had a cp['asd'] section, so your cp.setdefault('asd', {'foo': 'bar'}) call didn't do anything either.


Answer URL
https://docs.python.org/3/library/configparser.html
https://docs.python.org/3/library/configparser.html#mapping-protocol-access
