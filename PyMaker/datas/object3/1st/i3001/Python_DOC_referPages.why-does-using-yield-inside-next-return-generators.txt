Natural Text
I am using yield to return the next value in the next function in my class. But its does not return the next value, it returns the generator object.I am trying to better understand iterators and yield. I might be doing it in the wrong way. Please have a look.This returns:generator object __next__ at 0x032C05A0
next pretty much just calls __next__() in this case.  Calling __next__ on your object will start the generator and return it (no magic is done at this point).In this case, you might be able to get away with not defining __next__ at all:If you wanted to use __iter__ and __next__ (to define an iterator rather than simply making an iterable), you'd probably want to do something like this:
Let's take a look at the purpose of the __next__ method. From the docs:iterator.__next__()Return the next item from the container. If there are no further items, raise the StopIteration exception.Now let's see what the yield statement does. Another excerpt from the docs:Using a yield expression in a functionâ€™s body causes that function to  be a generatorAndWhen a generator function is called, it returns an iterator known as a  generator.Now compare __next__ and yield: __next__ returns the next item from the container. But a function containing the yield keyword returns an iterator. Consequently, using yield in a __next__ method results in an iterator that yields iterators.If you want to use yield to make your class iterable, do it in the __iter__ method:The __iter__ method is supposed to return an iterator - and the yield keyword makes it do exactly that.For completeness, here is how you would implement an iterator with a __next__ method. You have to keep track of the state of the iteration, and return the corresponding value. The easiest solution is probably to increment an index every time __next__ is called:


Answer URL
https://docs.python.org/3/glossary.html#term-iterator
https://docs.python.org/3/glossary.html#term-iterable
https://docs.python.org/3/library/stdtypes.html#iterator.__next__
https://docs.python.org/3/reference/expressions.html#yieldexpr
https://docs.python.org/3/reference/datamodel.html#object.__iter__
https://docs.python.org/3/library/stdtypes.html#iterator.__next__
