Natural Text
back again with another question.Preface: built a GUI with Qt Designer, a search button, parsing csv data, and building my TableWidget with the found data.I have a file that has two results that are similar, for instance, one location is labeled Reddit (North) and Reddit (South). If I search for Reddit, only the first result shows, but when I press the Search button again, it only shows the first find, not the second.Question: How do I stop the csv reader at the first match, fill in the table with the data it found from the first hit, then hit the search button again to clear the first hit and display the second hit?
You can externalize your CSV reading/searching and make it a generator so it remembers where it left off, i.e.:You can now use this as a search iterator to go over the search results. The actual utilization may depend on how you're implementing the rest of your system - the best would be to just keep a reference to your current search iterator if available (and the search string didn't change), or to create a new if not. For example, an in-place change to your search() method to enable it would be:It essentially checks if there is already a _search_gen dictionary on your current instance and if it contains the same search string as what's in the self.lineedit_locsearch - if yes, then it uses the existing generator to continue searching the CSV, and if not it creates a new one. Either way, the generator is used to fetch the (next) result and then just fills up the table. And as a bonus, we ensure that the result have at least 6 fields so that the table can be properly populated even if the found CSV row didn't have all 6 of them.I'm not sure, tho, if you need to reconfigure the table all the time - maybe you can create it when you create your search results window/panel/frame/whatever and then just continue to call the search() method to update the results.Finally, when you want to close your search, make sure you invalidate the generator with delattr(self, "_search_gen"). Beware also that the passed file (data/loc.csv) will remain open in read mode for the duration of the search until there are no more results found or you invalidated the search generator as aforementioned.
To break out of the loop try this


Answer URL
https://docs.python.org/3/library/functions.html#getattr
https://docs.python.org/3/library/functions.html#setattr
