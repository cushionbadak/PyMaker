Natural Text
I want to sum two different variables in one function, but I want these to be summed based on multiple other items. If I have the following list of dicts x:Then i can use the following function to sum an individual variable ('var3'), based on two other variables ('var1' and 'var2'):However, I want to sum multiple variables ('var3' and 'var4'), across multiple categories ('var1' and 'var2'), so that the output looks like this:How do I sum multiple variables at once using this method?
You can use collections.defaultdict for an O(n) solution. As opposed to itertools.groupby, this does not require sorting beforehand.The idea is to group by pre-defined group_keys. Then use a list comprehension to combine keys and values of your defaultdict. The syntax {**d1, **d2} is used to combine two dictionaries.
A straightforward extension of your approach, provide the grouper keys and value keys as arguments:In the repl:Here is an alternative approach that groups using a dictionary (a default dict of Counter dicts...)
You can use Pandas for an efficient, vectorised solution.The disadvantages of itertools.groupby here are it requires sorting [additional complexity] and does not implement vectorised calculations [inefficient summing].If you want to go down the loopy route, I recommend collections.defaultdict to make sure you still have O(n) complexity.
Output:


Answer URL
https://docs.python.org/3/library/collections.html#collections.defaultdict
