Natural Text
I have a variable that points to a specific class instance's method.Lets say there is a class called Client that implements a method get.A single instance called client is created for Client, and a variable get_func is assigned with client's get.For example, lets assume I have the following simplified code:I have little actual control over get_func and how it's used, I cannot change that.I would now want to make sure get_func has the Client.get.The trivial test get_func == Client.get does not work, as get_func is a bound method of a specific Client instance.I also cannot get the client instance directly (but a way to get the self of a bound method is a valid option, if only I knew how to do that)
Client.get is either a function object (Python 3), or an unbound method (Python 2). Client().get on the other hand, is a bound method. Methods are wrappers around a function object, recording the instance they are bound to (if there is an instance) to pass in as the self argument. See the Python descriptor How-to as to how Python produces methods from functions.You can unwrap both a bound method and an unbound method to get the underlying function object that they wrap, and test that, with the __func__ attribute:If you need to make your code compatible with both Python 2 and 3, you could create a simple helper function:and use that:


Answer URL
https://docs.python.org/3/howto/descriptor.html
