Natural Text
I get the following error:For the code:The variable is not written until it is assigned. And the code seems to work.Is the syntax message a false alarm, or should a global be declared before being read? (instead of only declaring before being written)The code:Gets rid of the SyntaxWarning. But it seems wrong to make the global deceleration for a value that is only being read and not written.Should I ignore the syntax alarm?
No, you can't ignore it and, as of Python 3.6 this will cease to be a SyntaxWarning and instead be updated to an error (SyntaxError). So you better fix it now or face it the prospect of it not executing in future versions (>= 3.6) . See the docs on the global statement:Names listed in a global statement must not be used in the same code block textually preceding that global statement.As you noticed, this isn't a warning that is generated at run-time, it is generated when Python compiles your function object and notices a global statement containing a name (primeRan) that has already been found as local.You should add the global statement before referencing primeRan here and also do the same for primeList which falls victim to the same issue. For primeList, though, you can be sneaky and take advantage of the fact that global must be parsed first. In short, switch the condition over so Python parses the global statement for it before the assignment statement:Since global is a directive for the parser, this yields the same behavior w/o the warning.Of course, using globals is not a good practice. I can't see any reason why you'd require using them to be honest, you're always better off (and from a conceptual point of view and execution speed wise) to drop the usage of globals and instead communicate with your function using arguments and return values.


Answer URL
https://docs.python.org/3/whatsnew/3.6.html#other-language-changes
https://docs.python.org/3/reference/simple_stmts.html#the-global-statement
