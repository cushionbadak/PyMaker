Natural Text
I need to decode a UTF-8 sequence, which is stored in a bytearray, to a string.The UTF-8 sequence might contain erroneous parts. In this case I need to decode as much as possible and (optionally?) substitute invalid parts by something like "?".What's the best way to achieve this in Python 3?
There are several builtin error-handling schemes for encoding and decoding str to and from bytes and bytearray with e.g. bytearray.decode(). For example:In addition, you can write your own error handler and register it:All of these error handling schemes can also be used with the str() constructor as in your question:... although it's more idiomatic to use str.decode() explicitly.


Answer URL
https://docs.python.org/3/library/codecs.html#error-handlers
https://docs.python.org/3/library/stdtypes.html#bytearray.decode
https://docs.python.org/3/library/codecs.html#codecs.register_error
