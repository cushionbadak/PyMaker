Natural Text
During an interactive session in IPython, when you get an error in MySQL (e.g. IntegrityError: (1062, "Duplicate entry 'CM' for key 'PRIMARY'")) , and then modify some code in your file and rerun %run main.py, you are going to be hung up since the last error still opens the connection in MySQL.In order to successfully run the program again, you first terminate the program you just rerun via Ctrl+C, and then re-rerun the program again.I find it pretty bothersome. Is it feasible to kill the connection just before running %run main.py again?Example:UPDATESorry for forgetting to note it, but if I close the connection in the code, isn't it that, if I understand it correctly, I cannot debug the error since the connection is gone now, right? That is definitely not what I want, so I asked "kill the connection just before running %run main.py again"...
what about a finally will always be executed, no matter what happens inside.
You can use contextlib.closing to close the connection automatically as soon as leave the indentation: This also closes it in the case of an exception.


Answer URL
https://docs.python.org/3/library/contextlib.html#contextlib.closing
