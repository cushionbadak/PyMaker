Natural Text
Let's say for example that I have code like the one below:Let's also say that I can only handle JSON files within example() and that the callback will happen many times. It is my understanding that multiple json.dump() calls cannot happen for the same file, so I figured out that if I deserialize the file, update the resulting dictionary and serialize again (although extremely inefficient), it could work. It didn't so I got errors like:and also ValueError: No JSON object could be decoded,ValueError: Extra data: line, all regarding temp = json.load(fp).I've searched for alternative modules that handle JSON (ijson, demjson, etc) but I haven't found a helpful way to use them for the problem above.Let's assume that the JSON file structure looks like this:Any ideas? Assume that list_test and dict_test have 100k values each and the callback happens 10k times. Would that JSON encoding/decoding work?
file.json contains the example json data:As its not quite clear what output is expected, I've modified the two functions so that data gets updated. However, the file is overwritten every time the w file mode is used. I've added the output at the bottom, if this is what you're expecting.The callback function may not be necessary unless you call the example function directly. Here's a hypothetical code that makes 10k calls and produces a similar output albeit random.


Answer URL
https://docs.python.org/3/library/threading.html
