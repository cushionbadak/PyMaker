Natural Text
Decimal numbers are by default rounded very unexpectedly, in order to make it work normally, it is needed to use ROUND_HALF_UP option.My question is - where in the Django application I have to set rounding option, so that it would work globally in the project? By saying globally I mean templates (floatformat template tag), views, model decimal field and so on.
Decimal doesn't have anything to do with Django, they are part of the standard python library. The getcontext function returns the context of the current thread, so if you're not doing anything funky, every request will be executed in one thread. That basically mean that setting the option in the settings.py file should be enough.
Worked in 1.9.5 (based on comment from @ark):In myapp/apps.pyIn settings.py
Actually it doesn't work like Viktor suggested (although in django 1.5).My solution is create and using a middleware like this:and then in settings.py:
For django project can work setting decimal.DefaultContext (py3, py2).This context is most useful in multi-threaded environments. This is my code from settings.py:Worked in 1.10. Based on my answer in this question.


Answer URL
https://docs.python.org/3/library/decimal.html#decimal.DefaultContext
