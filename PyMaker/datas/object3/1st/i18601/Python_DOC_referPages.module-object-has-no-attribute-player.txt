Natural Text
I'm trying to make a simple game, which has multiple files that need to import each other. My mob module needs to import my player module and do player = player.Player() to create a new class instance. The class is in the player.py file, but it's apparently not being recognized.I did world = world.World() in my mob file, and that worked perfectly, so I'm confused as to why my player file won't work.This is what I have at the beginning of mob.py:player.py:world.py:Not sure if this will help, but this is the main function in main.py:
The problem here is a circular import.Since you haven't given us enough of the code to actually test this, it's impossible to give the exact details. If you want to see it for yourself, just add a print before and after each import, and you can see the sequence of events. But it's going to be something like this:player depends on main. main depends on mob. So, when you try to import player, before it can run any of its top-level code, all of mob's top-level code has to run. But mob tries to create a player.Player object at top level. Since player is still waiting for import main to finish, it hasn't yet run the code to define that class. Hence the error.The official FAQ has a nice answer on different ways to fix this. In your case, I think there's a simple answer:Split main.py into two separate modules. Take the shared code that everyone else needs to import, and put it into, say, utils.py. Leave the top-level program code that needs to import everyone else in main.py. Change each import main to import utils. And that's it; no more circular imports. (This is effectively Matthias Ulrichs's recommendation from the FAQ, but more specific to your situationâ€”and, as it happens, very common among projects created by novices to Python, especially those who are very skilled at languages that have separate import and implementation files.)If this isn't doable in your case, consider moving some of the global initialization to initialization functions, which you can call after all the imports are done. (This is effectively Guido's recommendation from the FAQ.)


Answer URL
