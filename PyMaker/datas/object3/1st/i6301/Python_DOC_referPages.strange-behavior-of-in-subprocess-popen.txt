Natural Text
I've noticed that the "&>" operator within a subprocess.Popen() call immediately provides a return code, even in scenarios where it intuitively shouldn't be. To illustrate:I'm running this on Python 3.5.2. My machine runs bash by default. Does anyone know why subprocess isn't supporting the correct "&>" behavior here?
That's because &> is a bashism, and Popen by default uses /bin/sh when shell=True.From the subprocess.Popen docs:The executable argument specifies a replacement program to execute. It is very seldom needed. When shell=False, executable replaces the program to execute specified by args. However, the original args is still passed to the program. Most programs treat the program specified by args as the command name, which can then be different from the program actually executed. On POSIX, the args name becomes the display name for the executable in utilities such as ps. If shell=True, on POSIX the executable argument specifies a replacement shell for the default /bin/sh.The fix is to specify the executable parameter explicitly, like:
Your default login shell is bash. subprocess.Popen, though, uses the system default shell /bin/sh, which does not recognize the &> operator. If you want to force it to use bash, use the executable option:Alternatively, you can handle the redirection yourself in Python:


Answer URL
https://docs.python.org/3/library/subprocess.html#popen-constructor
https://docs.python.org/3/library/subprocess.html#popen-constructor
