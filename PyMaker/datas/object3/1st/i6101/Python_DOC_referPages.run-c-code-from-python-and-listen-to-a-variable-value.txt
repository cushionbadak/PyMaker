Natural Text
I have a C code (SDK of a sensor) that when I run it it initiate a connection to sensor through USB, then with a callback listens to the sensor outputs and print it (I also write on a text file). Every 50msec a sample is printed in this call back. Now I want to run this C code from Python (because I need to analyze the data in real time in python) and whenever a callback function in C generated a new output (a 16*1 array of integers) I need to pass them to the python code.I've seen few methods to run C code such as Swig, but these methods I think are used when you call C code and you get the return values of them.But in my case, the C code is in a infinite loop and doesn't return anything in main code.  I don't also have this option to read samples one by one from sensor because every time I run the C code I should connect to sensor though USB and then be able to read values, Connecting to sensor takes time and I can not do this all the time.This is the SDK (C code) I'm using to connect to sensor and read values. https://www.dropbox.com/s/s5rrrdy4mzrv54f/Main.c?dl=0I'm not a software engineer so I might not be good in advance coding.Can anyone help me with that?Thanks.
You could do a "callback" to Python with ctypes or other binding code, but that means your Python code would "get in the way" of your C code - whenever you are running Python code, you are not checking values from the sensor.Sometimes, simpler is better:  you could just write your values to a file, which you could read lazily from a separate Python process.If you don't want the file to grow, you could make use of a named Pipe, if you are on Unix. Or maybe just use redis to put the values in a queue. Otherwise, just add the relevant PythonAPI code to your C program so that you can make use of a Python multiprocessing.Queue object and put your values there, then use multiprocessing to start the process to run your C code.  https://docs.python.org/3/library/multiprocessing.html#pipes-and-queuesThis will require your C code to be written so that it is callable from Python, and getting the queue as a parameter. then, your C code can just go along pooling the sensor, while the Python side consumes the values. (TL;DR: Checking your C sample, it looks like you are on Linux. So my first suggestion is just the simplest thing for you - use a NamedPipe and a separate Python program to process the values. On the C side, you need to thange nothng - just create the Named Pipe where the file it would record the read data is sent to   http://www.tldp.org/LDP/lpg/node15.html )


Answer URL
https://docs.python.org/3/library/multiprocessing.html#pipes-and-queues
