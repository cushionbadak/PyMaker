Natural Text
The following code is written in the morph.py file:The idea is that the morph.py file will be rewritten, and the text "Worked" will be printed. This is not the case, I think it has to do with how Python interpreter loads the files. The only thing that makes sense is that the whole file is loaded, and then run.Can somebody shed some light? Is it even possible to have self morphing code in python?Partially related question:Self decompressing and executing code in python
Not in the way you're trying to do it.Before Python starts executing any piece of code, it compiles it into a bytecode representation, which is much faster to execute than reading line-by-line. This means that after Python has compiled the file, no changes to the file will be reflected in currently-running code.However, you can manually load code from strings by using compile, exec, or eval. You can use this to create a program that is passed its own source code, alters and returns it, and executes the modified source code.
When I run the file the first time it outputs:When I run it a second time it outputs:Any subsequent times it will give an error:When you run python on a file, it will load the file, then convert it to bytecode, then execute the bytecode. The file has already undergone conversion when you change the file, so you see no effect.


Answer URL
https://docs.python.org/3/library/os.html#os.lseek
https://docs.python.org/3/library/imp.html#imp.reload
