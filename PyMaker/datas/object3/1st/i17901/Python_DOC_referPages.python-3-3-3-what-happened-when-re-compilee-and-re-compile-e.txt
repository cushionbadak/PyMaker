Natural Text
Update 1:Above shows that Python literal parser treats '\e' as two literals \ and e. Am I right?  If so,re.compile('\e') should also follow this rule first. i.e., It should match two lierals \ and e. Like this:If I am wrong, Why?original question:For convenience I use rer to indicate the mechanism of python standard lib re module.  I have read related articles in python doc. I know the warning "it’s highly recommended that you use raw strings for all but the simplest expressions". But I just want to know if I don't use raw strings , how will the re.compile work. just take a look at this:As you can see, there is nothing different between A and B when performing searching. Then:Why '\e' can match string literal 'e'?Can you find a string literals that will make differences?Another question is why re.compile('\\') will raise errors. Note, this is a question about the re mechanism rather than how the re source code is written. Because I think:Obviously \\ means a literal backslash, why rer doesn't know this?  Why we need a pattern \\\\ to match a literal backslash? Just look at this:Perfectly works. However when you change n to \, rer raises erros. This is really hard for me to understand.What will happen to rer if rer allow \\ to match a literal backslash? Is it something like the basis of re doesn't exist? If so, can you give an example?Thanks in advance. It has confused me for a long time.
\e and e are the same for the regular expressions. A \ in a regular expression is used to indicate that the character following has a special meaning. You can find the list of valid special sequences here, and \e is not one of them. So, \ in front e is ignored.When you say \\ in your code, you actually say \ in regular expression. We know that, \ gives special meaning to the character following that. But when we say \\, there is no character following that. That's why it gives that error message. To actually match \, you need to escape the \ like this \\\\. Or you can use raw string notation like thisQuoting from http://docs.python.org/3/library/re.htmlRegular expressions use the backslash character ('\') to indicate  special forms or to allow special characters to be used without  invoking their special meaning. This collides with Python’s usage of  the same character for the same purpose in string literals; for  example, to match a literal backslash, one might have to write '\\'  as the pattern string, because the regular expression must be \, and  each backslash must be expressed as \ inside a regular Python string  literal.The solution is to use Python’s raw string notation for regular  expression patterns; backslashes are not handled in any special way in  a string literal prefixed with 'r'. So r"\n" is a two-character string  containing '\' and 'n', while "\n" is a one-character string  containing a newline. Usually patterns will be expressed in Python  code using this raw string notation.
There are two layers here: first, there's Python string literal syntax, and then there's the regular expression syntax.\e doesn't have any special meaning in a Python string literal, so both characters get passed verbatim to the regular expression engine, where they match an e because that's what \ means in that context: it removes any special meaning from the following character. (The fact that e doesn't have any special meaning in regexen to begin with doesn't mattter).


Answer URL
