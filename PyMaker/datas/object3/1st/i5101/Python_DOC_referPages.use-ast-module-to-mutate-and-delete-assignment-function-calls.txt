Natural Text
For example if I wanted to change greater than to less than or equal to I have successfully executed:How would I visit/detect an assignment operation (=) and a function call () and simply delete them? I'm reading through the AST documentation and I can't find a way to visit the assignment or function call classes and then return nothing.An example of what I'm seeking for assignment operations:Becomes:And an example of what I'm seeking for deleting function calls:Becomes
You can use a ast.NodeTransformer() subclass to mutate an existing AST tree:The above class removes None to completely remove the node from the input tree. The Assign and AugAssign nodes contain the whole assignment statement, so the expression producing the result, and the target list (1 or more names to assign the result to).This means that the above will turnintoIf you need to make more fine-grained decisions, look at the child nodes of the assignment, either directly, or by passing the child nodes to self.visit() to have the transformer further call visit_* hooks for them if they exist:Here, we only return None if the value side of the assignment (the expression on the right-hand side) is a Call node that is applied to a straight-forward Name node.  Returning the original node object passed in means that it'll not be replaced.To replace top-level function calls (so those without an assignment or further expressions), look at Expr nodes; these are expression statements, not just expressions that are part of some other construct. If you have a Expr node with a Call, you can remove it:Also see the excellent Green Tree Snakes documentation, which covers working on the AST tree with further examples.


Answer URL
https://docs.python.org/3/library/ast.html#ast.NodeTransformer
