Natural Text
Why does Python-2.7 on Windows truncate a file? The problem is well known with shutil.copyfile but I don't understand how to avoid it when I'm changing the first line. File size is unknown and could be huge.Reference below but I'd prefer better exception handling with something like the following code:Reference: change first line of a file in python
You need to create the new version of the file as a NamedTemporaryFile.  After you finish constructing it, you then rename it on top of the old file.Code:Test Code:Before:After:


Answer URL
https://docs.python.org/3/library/tempfile.html#tempfile.NamedTemporaryFile
