Natural Text
I have a subclass of multiprocessing.Process and I want to terminate it correctly.I want to close self.db_session (which is an SQLAlchemy Session) when the process is terminated. But as the Python documentation says "exit handlers and finally clauses, etc., will not be executed". How can I correctly terminate a process and close the things it uses?
I found a nice solution, by using multiprocessing.Event(). I added an Event object to the constructor of my MyProcess class, and the process loop looks like that now:Instead of calling terminate() when I need to terminate my processes, I just call stop_event.set(), which will break the loop and close everything gracefully.


Answer URL
https://docs.python.org/3/library/multiprocessing.html#multiprocessing.Process.terminate
https://docs.python.org/3/library/multiprocessing.html#
