Natural Text
It seems asyncio.Queue only can be pushed by the same thread reading it? For instance:only printsand then hangs. What am I missing?
You can't call asyncio methods from another thread directly.Either use loop.call_soon_threadsafe:Or asyncio.run_coroutine_threadsafe:where loop is the loop returned by asyncio.get_event_loop() in your main thread.
You could take a look on janusThe library provides a queue with two faces: one for async event loop and other for classic threaded code.I believe README describes the library pretty well.


Answer URL
https://docs.python.org/3/library/asyncio-dev.html#concurrency-and-multithreading
https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.AbstractEventLoop.call_soon_threadsafe
https://docs.python.org/3/library/asyncio-task.html#asyncio.run_coroutine_threadsafe
