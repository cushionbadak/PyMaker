Natural Text
in python3.3:in python3.3 why the resuls like this:anyone can tell me why exec('x=2') in not equal x=2what's the difference between 'x=2' and exec('x=2')?3x
Locals in functions are highly optimized and determined at compile time, stored in an array on the frame. Each local name is merely an index in the byte code, indexing into that array.exec() on the other hand tries to treat locals as a writable dictionary, but inside a function the dictionary returned by locals() is not connected to the actual locals array of a function. You cannot set locals with exec().Quoting the locals() function documentation:Note: The contents of this dictionary should not be modified; changes may not affect the values of local and free variables used by the interpreter.and from the exec() function:Note: The default locals act as described for function locals() below: modifications to the default locals dictionary should not be attempted. Pass an explicit locals dictionary if you need to see effects of the code on locals after function exec() returns.When you add the line x = 2 inside the function, then x is determined to be a local by the compiler.


Answer URL
