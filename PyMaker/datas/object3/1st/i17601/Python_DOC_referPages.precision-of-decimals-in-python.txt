Natural Text
I don't mean precision as in how many numbers are displayed after the decimal. I mean precision as in the decimal I am trying to use in this pictograph function keeps coming up one tenth shy of what it should be. I have tried using multiple different strategies including importing the decimal module. Here is the function I am trying to use.using get_digits(277.9), yields {'tens': 27, 'ones': 2, 'tenths': 8, 'fives': 1}I need for it to say {'tens': 27, 'ones': 2, 'tenths': 9, 'fives': 1}Fixing it by adding 1 to the tenths after the dictionary is populated does not work, because not every decimal comes out imprecisely.get_digits(277.6) returns {'fives': 1, 'tenths': 6, 'tens': 27, 'ones': 2}I've been scouring the forums for an answer, but nothing quite gets it. Any assistance would be greatly appreciated.
As I tried to explain in comments, the problem is that you're using floating point numbers.For more information on floating point, see 1, 2.The issue is that 277.9 is not actually stored as 277.9, but rather something "very close":The solution isn't to use some arbitrary heuristic to tell whether the math is slightly off and try to correct for it.  We know the math is slightly off -- that's the gift and curse given to us by floating point.The real solution is to use fixed point math, for example, with Python's decimal module.Edit


Answer URL
