Natural Text
I am extracting emails from Gmail using the following:However, some emails I get are nigh impossible for me to extract dates (using regex) from as encoding-related chars such as '=', randomly land in the middle of various text fields. Here's an example where it occurs in a date range I want to extract:Name:  KIRSTI   Email:   kirsti@blah.blah   Phone #:  + 999  99995192   Total in party:  4 total, 0  children   Arrival/Departure:  Oct 9=  ,  2010 - Oct 13, 2010 - Oct 13, 2010Is there a way to remove these encoding characters?
You could/should use the email.parser module to decode mail messages, for example (quick and dirty example!):Using the "decode" parameter of Message.get_payload, the module automatically decodes the content, depending on its encoding (e.g. quoted printables as in your question).
That's known as quoted-printable encoding. You probably want to use something like quopri.decodestring - http://docs.python.org/library/quopri.html
If you are using Python3.6 or later, you can use the email.message.Message.get_content() method to decode the text automatically.  This method supersedes get_payload(), though get_payload() is still available.Say you have a string s containing this email message (based on the examples in the docs):Non-ascii characters in the string have been encoded with the quoted-printable encoding, as specified in the Content-Transfer-Encoding header.Create an email object:Setting the policy is required here; otherwise policy.compat32 is used, which returns a legacy Message instance that doesn't have the get_content method.  policy.default will eventually become the default policy, but as of Python3.7 it's still policy.compat32.The get_content() method handles decoding automatically:If you have a multipart message, get_content() needs to be called on the individual parts, like this:


Answer URL
https://docs.python.org/3/library/email.message.html#email.message.EmailMessage.get_content
https://docs.python.org/3/library/email.policy.html#email.policy.Compat32
https://docs.python.org/3/library/email.policy.html#email.policy.default
