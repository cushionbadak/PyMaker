Natural Text
I was trying to dynamically create test functions when I notice a weird behavior that I do not understand. I have reduced the code to this for simple understanding. I am running it on python 3.6.7Code:Output: As you can see, the test function test_x is being run twice and the last print statement is not executed So my questions are: why does the test function run twice?why is the print statement print('test end') not executed?
1. why does the test function run twice?Because the unittest code finds two objects in the module's namespace that are unittest.TestCase classes, MyTestCase and x.  It doesn't check that these are actually the same object.  (Well, it has some awareness of this, in that it doesn't treat x as a new class to be tested, so it doesn't call setUpClass again; see "Class and Module Fixtures".)2. why is the print statement print('test end') not executed?By default, unittest.main() calls sys.exit() after running the tests.  You can disable this by adding the argument exit=False:


Answer URL
https://docs.python.org/3/library/unittest.html#class-and-module-fixtures
