Natural Text
Good afternoon, I have a multiple list of IP and MAC, list of arbitrary lengthI want to check if this MAC is in the oui file:If the MAC from the list is in the file, write the name of the manufacturer as 3 list items. I'm trying to do so and it turns out to check only the first element, the remaining ones are not checked, how can I do this please tell me?And get an answer:
The ProblemConsider the "shape" of your code:Your two loops are doing this:Except that the first time you told it to "read all lines remaining" it would do so. So, unless you have some way to put more lines into f (which can happen with async files like stdin!) you are going to get one "good" pass through the file, and then every subsequent pass the file object will point to the end of the file, so you'll get nothing.A SolutionWhen you are dealing with a file, you want to only process it one time. File I/O is expensive compared to other operations. So you can choose to either (a) read the entire file into memory, and do whatever you want since it's not a file any more; or (b) scan through it only one time.If you choose to scan through it only once, the easy solution is just to invert the two for loops. Instead of doing this:Do this instead:And presto! You are now only reading the file one time.Other ConsiderationsIf I look at your code, and your examples, it seems like you are trying for an exact match on a particular key. You trim down the MAC addresses in your list to check them against the manufacturer ids. This suggests to me that you might well have many, many more list values (source MAC addresses) than you have manufacturers. So perhaps you should consider reading the contents of the tile into memory, rather than processing it one line at a time.Once you have the file in memory, consider building a proper dictionary. You have a key (MAC prefix) and a value (manufacturer). So build something like:Then you can make one pass through the source addresses and use the dict's O(1) lookup to your advantage:
The problem is you got the order of the loops reversed.  Usually this isn't that big of a problem, but when working objects that are consumed (like the IO file object) the contents will no longer produce once it's been iterated over.You'll need to iterate the lines first, and then within each lines iterate through A to check the values:Notice I changed your file opening to use the with context manager instead, where once your code exists the with block it will automatically close() the file for you.  It is recommended over manually opening the file as you might forget to close() it after.


Answer URL
https://docs.python.org/3/reference/compound_stmts.html#the-with-statement
