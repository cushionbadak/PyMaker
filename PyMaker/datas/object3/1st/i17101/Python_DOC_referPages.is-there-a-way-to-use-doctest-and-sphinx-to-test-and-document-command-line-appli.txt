Natural Text
I have a Python module for which I'm writing a tutorial using Sphinx including doctests. This module comes with a few helper programs. I would like to include those helper programs in the documentation and have doctest check that the standard output is in sync between the current program version and the documentation. I suppose I can use the sh module, or popen to check the standard output of a given program but I prefer that those tricks do not show up into the docs, or else non-programmers users will be certainly lost. Is there a way to achieve that?
The doctest module only checks statements than can be run from the python interactive prompt.Command-line tools can be invoked from the python interactive prompt using the subprocess module:There are likely some ways to hack doctest or sphinx to get what you want more directly, but this technique uses the advertised APIs for doctest, sphinx, and subprocess in exactly the ways they were designed to be used (doctest is designed to replay interactive prompt sessions found in docstrings, and subprocess is designed to run command-line tools directly from python and capture their output).I suppose I can use the sh module, or popen to check the standard  output of a given program but I prefer that those tricks do not show  up into the docs, or else non-programmers users will be certainly  lost.Two thoughts:  First, the details of those calls can mostly be hidden in a helper function to minimize distraction.  Second, if you need to invoke command-line programs from Python, it isn't a trick to use popen or subprocess since those are the tools designed specifically for making those calls from Python.


Answer URL
https://docs.python.org/3/library/doctest.html#module-doctest
https://docs.python.org/3/library/subprocess.html#module-subprocess
