Natural Text
I need help to exit a test without getting error. I have this code:If that condition is true, the test should end. The point is that, having it like that, i get this error:But the test is OK, so, how can I make a proper "test exit" so that i donÂ´t get this error?.Thank you very much!
sys.exit() raises a SystemExit exception, which you can test with:Now your test should succeed.
I'm not sure if sys defined higher up in your code but that could be why the test is having issues. To close a Selenium browser test (which I believe you are using, inferring from the selenium-webdriver tag), normally a .close() or .quit() tag is used. Assuming sys is the browser, at the end of the your if statement, you would use sys.close or sys.quit to close the browser.  .close() will close a tab within a testing browser. .quit() will close the browser window. If you need more help, check out Selenium Python Bindings Documentation. It's always been a big help for me when writing python/selenium tests. 
If you really want to stop the tests, then one of the ways is using force stop -f available in unittest-f, --fail: fast Stop the test run on the first error or failure.try running the module using -f option:But, it won't mark the test as PASS and you should remove sys.exit() from try..except... blockIf you have control on tests to run, then you can do as follows:set shouldStop = True in the method you want to exit (refer here.check after test method runs (each test method returns TestResult object to its caller), whether it is True or False, if it is True, call STOP() method. (refer here)ORAnother option is pytest framework which provides the facility to exit the run. Add the following line wherever you want to exit:Reference:How to stop all tests from inside a test or setUp using unittest?Old Answer:replace sys.exit() as follows:sys.exit() returns SystemExit exception.I assume you are using unittest framework. A test is markd as PASS only when there is no Failure/Exception in the test method. as sys.exit() throwing exception, unittest marks it as FAIL.What we do is, handle the exception in the test method itself, so no exception/failure is thrown, which makes unittest to mark that test method as PASS.


Answer URL
https://docs.python.org/3/library/unittest.html#unittest.TestResult.shouldStop
https://docs.python.org/3/library/unittest.html#unittest.TestResult.stop
