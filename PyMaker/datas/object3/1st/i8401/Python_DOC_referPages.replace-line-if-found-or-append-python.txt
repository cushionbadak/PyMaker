Natural Text
I have text that is key-value pairs separated by '='. I would like to replace the line if the key matches. if not, i would like to append it at the bottom. I've tried several ways, including:I know the above is just to replace text, but it deletes the text in the file, and I can't see why. Could someone point me in the right direction?ThanksUpdate:I'm almost there, but some of my lines have similar keys, so mutiple lines are matching when only 1 should. I've tried to incorporate a regex boundary in my loop with no luck. My code is below. Does anyone have a suggestion?There is some text in the file that isn't key-value, so I would like to skip that.I think I got it. See code below.I spoke too soon. It stops at the key-value I provide. So, it only writes one line, and doesn't write the lines that don't match.Can anyone see the issue?
Because when you open file for writingyou just erase it content. Try to write in different file and after all work done replace old file with new one. Or read all data into memory and then process it and write to file.
first of all you are reading an writing the same file ...you could first read it all and the write line by line
I strongly recommend reading python's documentation on how to read and write files.If you open an existing file in write-mode open(path, 'w'), its content will be erased:mode can be (...) 'w' for only writing (an existing file with the same name will be erased)To replace a line in python you can have a look at this: Search and replace a line in a file in PythonHere is one the solutions provided there adapted to your context (tested for python3):Note that with the code above every line that matches key (key=blob or blob=key) will be replaced.


Answer URL
https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files
