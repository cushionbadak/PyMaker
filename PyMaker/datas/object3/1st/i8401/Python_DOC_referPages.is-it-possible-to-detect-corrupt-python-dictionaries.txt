Natural Text
I have a data file saved using the shelve module in python 2.7 which is somehow corrupt. I can load it with db = shelve.open('file.db') but when I call len(db) or even bool(db) it hangs, and I have to kill the process.However, I am able to loop through the entire thing and create a new non-corrupt file: The question is, how can I test the dict and avoid the hang?BTW, I still have the original file, and it exhibits the same behaviour when copied to other machines, in case someone also wants to help me get to the bottom of what's actually wrong with the file in the first place!
I'm unaware of any inspection methods other than dbm.whichdb(). For debugging a possible pickle protocol mismatch in a manner that allows you to timeout long running tests maybe try:


Answer URL
https://docs.python.org/3/library/dbm.html#dbm.whichdb
