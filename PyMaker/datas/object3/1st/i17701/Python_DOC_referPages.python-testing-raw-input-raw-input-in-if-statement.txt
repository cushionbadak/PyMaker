Natural Text
I'm currently testing my python code and have a question about raw_input. This is my function:I'm testing the first if statement this way:But how do I check the no statement ? How do I make mock inside a mock ?
Using side_effect:According to mock documentation:If side_effect is an iterable then each call to the mock will return the next value from the iterable.  The side_effect can also be any iterable object. Repeated calls to the mock will return values from the iterable (until the iterable is exhausted and a StopIteration is raised):
Using side effect should do the trick, I find the following quite clear and avoid multiple with-block:
If you just mock raw_input to return 'no', it will return 'no' both times, meaning you can assert that the function returns 'no':If you want to test what happens if, say, the first input is 'no' and the second one is 'maybe', you have to mock it with a function that returns different things the first time it's called and the second time it's called, and then you can assert that it returns 'maybe'. Something like this (not tested because I don't have mock installed hereâ€¦ but it should give you the idea):


Answer URL
