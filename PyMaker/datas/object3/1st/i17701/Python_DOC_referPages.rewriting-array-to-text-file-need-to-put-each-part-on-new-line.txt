Natural Text
I have a stock system.The data is written into the file like this: (product code, name, costprice, price, quantity)The code below is for updating the quantity of the stock:The code changes the quantity correctly but when I rewrite the array to the file, it looks like this:In this case, the quantity of the table was changed to 30. How do I get the data written back to the file like it was originally?
You are writing the str() output of the whole list instead of re-formatting the lines back to the original format.Rejoin the lines with commas, adding a newline after every line:If you are not too fussed about the spaces after the comma, you could also use the csv module to write the list in one go:I'd certainly use the csv module to read your file:That reads the whole file into a list of lists in one go.You read the file twice; there is no need really, not when you already have all lines in a list:Here we alter row directly; writing out items to a csv file again will include the changed quantity.
Opening the same file more than once isn't needed in this case. You could just do it all in one go. If you don't want any standard library imports, and if readability counts for you then you could refactor it a bit:


Answer URL
