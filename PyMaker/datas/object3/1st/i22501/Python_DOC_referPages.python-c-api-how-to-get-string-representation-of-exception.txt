Natural Text
If I do (e.g.)in Python (and the file does not exist), I get a traceback and the messageI would like to get the above string with Python's C API (i.e., a Python interpreter embedded in a C program). I need it as a string, not output to the console.With PyErr_Fetch() I can get the type object of the exception and the value. For the above example, the value is a tuple:Is there an easy way from the information I get from PyErr_Fetch() to the string the Python interpreter shows? (One that does not involve to construct such strings for each exception type yourself.)
I think that Python exceptions are printed by running "str()" on the exception instance, which will return the formatted string you're interested in. You can get this from C by calling the PyObject_Str() method described here:https://docs.python.org/c-api/object.htmlGood luck!Update: I'm a bit confused why the second element being returned to you by PyErr_Fetch() is a string. My guess is that you are receiving an "unnormalized exception" and need to call PyErr_NormalizeException() to turn that tuple into a "real" Exception that can format itself as a string like you want it to.


Answer URL
https://docs.python.org/3/c-api/object.html#c.PyObject_Str
