Natural Text
I have the following code piece:I get the error KeyError: 655 at this line of my code:However, there is no other detail about the error.If I correctly understand the error, it means that the key product or p2 do not exist in ranks, right? How can I add the value score2*weights[1] to ranks[product][p2] if product or p2 do not yet exist in ranks?
You alter product via product = int(product) between and So the new integer product is no longer guaranteed to be a key in ranks. Move that conversion line all the way up to the beginning of the loop:In the second loop you take no measures to check if those products are even present in ranks. Generally, you could ease your life using a defaultdict and a function in order to avoid repeating yourself:


Answer URL
https://docs.python.org/3/library/collections.html#collections.defaultdict
