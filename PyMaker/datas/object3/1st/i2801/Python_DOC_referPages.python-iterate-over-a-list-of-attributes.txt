Natural Text
I have a feature in my data set that is a pandas timestamp object. It has (among many others) the following attributes: year, hour, dayofweek, month.I can create new features based on these attributes using some brute force methods:. . .However, I want to iterate over a list:I get the following AttributeError: 'Timestamp' object has no attribute 'i', and I get it and understand why I am having this error. How can I get the quoted string to unquote so that I can pass it as an attribute?
You just need getattr():
Don't use .apply here, pandas has various built-in utilities for handling datetime objects, use the dt attribute on the series objects:Or, dynamically as you wanted using getattr:And if you must use a one-liner, go with:
operator.attrgetterYou can extract attributes in a loop:Here's a complete example:Your code will not work because you are attempting to pass a string rather than extracting an attribute by name. Yet this isn't what's happening: the syntax does not feed the string but tries to access i directly, as demonstrated in your first example.Getting rid of the for loopYou might ask if there's any way to extract all attributes from a datetime object in one go rather than sequentially. The benefit of attrgetter is you can specify multiple attributes directly to avoid a for loop altogether:Using dt accessor instead of applyBut pd.Series.apply is just a thinly veiled loop. Often, it's not necessary. Borrowing @juanpa.arrivillaga's idea, you an access attributes directly via the pd.Series.dt accessor:


Answer URL
https://docs.python.org/3/library/operator.html#operator.itemgetter
