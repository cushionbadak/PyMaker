Natural Text
There are many posts about relative/absolute imports issues, and most of them are about Python 2 and/or importing submodules. This is not my case: I am using Python 3, so absolute import is the default;(I have also reproduced this issue with Python 2);I am not trying to import a submodule from within another submodule, or any other complicated situation. I am just trying to import numpy in a script.My problem is simple:where a.py just contains import nupmy, and math.py contains x++ (intentionally invalid).In that case, running python3 foo/a.py causes an error, due to NumPy seemingly not being able to import the standard math module:I am relatively inexperienced with Python, but this looks like a bug to me. I thought statements like import math in Python 3 behaved as absolute imports; how can a local file conflict with a standard module? Am I doing something wrong?To clarify, what I find surprising is that NumPy is unable to load the standard math module with import math, because I have a file in my local folder named math.py. Note that I never try to import that module myself.EDITThis seems to be an issue specific to conda (reproduced with both Anaconda and Miniconda). I am using Anaconda 5.2.0 (on OSX 10.13.6), and people in comments have been able to reproduce with different versions of python/anaconda, and different systems.I was able to reproduce this issue with:Anaconda3 v5.2.0, using python 3.4, 3.5, 3.6 and 3.7, within a conda environment, or simply using the default binaries (ie /path/to/anaconda3/bin).Miniconda2, and Miniconda3 (manual install of numpy required), again either within or outside a conda environment.A clean Homebrew install brew install python.In all cases, it looks like the builtin-modules might be incomplete:REPRODUCE THIS ISSUEMake sure you have a version of Python that can import numpy. Open a terminal and type:
"Absolute import" does not mean "standard library import". It means that import math always tries to import the math module, rather than the old behavior of trying currentpackage.math first if the import occurs inside a package. It does not mean that Python will skip non-stdlib entries on sys.path when figuring out where the math module is. In your situation, by the rules of the Python import system, your math.py is the math module.The tutorial link you found with the lineWhen a module named spam is imported, the interpreter first searches for a built-in module with that name.is referring to modules that are directly compiled into the Python executable, like sys. Such modules say built-in in their repr:You can see the names of all such modules in sys.builtin_module_names. For me, those names aremath isn't built-in in that sense.


Answer URL
https://docs.python.org/3/library/sys.html#sys.builtin_module_names
https://docs.python.org/3/tutorial/modules.html#the-module-search-path
