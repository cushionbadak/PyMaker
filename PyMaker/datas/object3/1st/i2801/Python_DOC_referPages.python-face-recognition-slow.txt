Natural Text
I'm trying to build a software that uses face recognition library to detect faces in real time. I tried it using a webcam with promising results and a decently stable frame rate, but when I switched to an .mp4 video, the result was very poor in term of fps. I'm using Python 3.6 with OpenCV and this is the code I'm using:The function "get_faces" is called inside a while loop for every frame, and I'm getting performance around 0.5 fps.If someone has suggestions in order to get better fps in output please let me know, thanks.EDIT:I used the following example (adapting it to my needs) and everything worked better: linkFINAL CODE:
To determine which parts of your script are taking the longest to run, use a profiler. This will output the time to execute for each of your calls, so you can gain a better insight into what parts of your function are suboptimal. See The Python Profilers for examples on how to profile your code.From the documentation:SPEEDING UP FACE RECOGNITIONFace recognition can be done in parallel if you have a computer with  multiple CPU cores. For example if your system has 4 CPU cores, you  can process about 4 times as many images in the same amount of time by  using all your CPU cores in parallel. If you are using Python 3.4 or  newer, pass in a --cpus  parameter:face_recognition --cpus 4 ./pictures_of_people_i_know/ ./unknown_pictures/You can also pass in --cpus -1 to use all CPU cores in your system.Test the operation on your computer using one and then the maximum number of cores. If this significantly improves execution time, your best course of action is to implement multiprocessing into your own script.


Answer URL
https://docs.python.org/3/library/profile.html
