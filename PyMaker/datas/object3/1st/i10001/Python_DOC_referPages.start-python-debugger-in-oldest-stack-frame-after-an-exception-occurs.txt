Natural Text
I use the --pdb command with ipython, so when I'm debugging code and an error occurs it shows a stack trace.  A lot of these errors come from calling numpy or pandas functions with bad inputs.  the stack trace starts at the newest frame, in code from these libraries. 5-10 repetitions of the up command later I can actually see what I did wrong, which will be immediately obvious 90% of the time (eg, calling with a list instead of an array).Is there any way to specify which stack frame the debugger initially starts in?  Either the oldest stack frame, or the newest stack frame in the python file initially run, or similar.  This would be much more productive for debugging.Here's a simple exampleResulting traceback, (A), (B), (C) added for clarityNow ideally, I would like the debugger to start in the second oldest frame at (B), or even at (A).  But definitely not at (C) where it goes by default.
Long answer to document the process for myself. Semi-working solution at the bottom:Failed attempt here:Pdb skip documentation:The skip argument, if given, must be an iterable of glob-style module name patterns. The debugger will not step into frames that originate in a module that matches one of these patterns. Pdb source code:Bdb source code:It is clear that the skip list is not used for post-mortems. To fix this I created a custom class which overrides the setup method.If you use this as:you are dropped into the right frame. Now you just need to figure out how ipython is calling their pdb pm/post_mortem function, and create a similar script. Which appears to be hard, so I pretty much give up here.Also this is NOT a very great implementation. It assumes that the frames you want to skip are at the top of your stack, and will produce weird results else. E.g. an error in the input function to df.apply will produce something super weird.TLDR: Not supported by the stdlib, but you can create your own debugger class, but it's nontrivial to get that working with IPythons debugger.


Answer URL
https://docs.python.org/3/library/pdb.html#pdb.Pdb
