Natural Text
This is my code:I suppose the output value should be 10 (__getattr__ modifies returned value). However output is 5.If I remove initialization of value:It works as expected (returns 10).Why?
__getattr__ is only used for missing attributes. See the documentation:Called when an attribute lookup has not found the attribute in the usual places (i.e. it is not an instance attribute nor is it found in the class tree for self).In your first example, 'value' is not a missing attribute; it was set in __init__. Note that it doesn't matter where it was set, only that it exists.If you must intercept all attribute access, you need to implement the __getattribute__ hook instead.


Answer URL
https://docs.python.org/3/reference/datamodel.html#object.__getattr__
https://docs.python.org/3/reference/datamodel.html#object.__getattribute__
https://docs.python.org/3/reference/datamodel.html#special-method-lookup
