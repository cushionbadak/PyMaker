Natural Text
I have the following timeout creation decorator function:And another decorator:When I try to apply both to a function I don;t get the function code to be called:the output of this is:withHostAndToken:     testDecorators  timeout:  withHostAndToken  timeout wrapper:  withHostAndTokenProcess finished with exit code 0
You problem does not lies there, and the chaining of decorators works fine.Here is an example code demonstrating it with your decorators:So the function is correctly interupted after about 2 seconds as expected.But in your use case, you used time.sleep inside the most inner function. And in Linux and other Unix, sleep is implemented through... SIGALRM!So here is what happens:external decorators asks an alarm to be raised in 10 secondsinner decorator passes additional parameter to the functionthe function is called and calls sleep(20)the sleep function call resets the alarm timeout to 20 seconds!That's the reason why the function actually lasts 20 seconds instead of 10...


Answer URL
https://docs.python.org/3/library/functools.html#functools.wraps
