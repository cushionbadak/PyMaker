<div class="post-text" itemprop="text">
<p>in <code>ipython</code>, I can use <code>%hist</code> or <code>%history</code> to print recent history, but this only prints history from current session.</p>
<p>I would like to print all history, similar as bash <code>history</code>command does. </p>
<p>What I am trying to do is to get complete history, so that I can then search with regex, see what commands followed after specified commands, and so on</p>
<p>Speaking of history, can it also print timecodes?</p>
<p><strong>SIDE NOTE</strong>:
In bash, I have written a simple script which prints history and I can grep it for keywords. I see times when certain commands were executed. I can specify <code>-A n</code> or <code>-B n</code>, where <code>n</code> is a number of lines <code>AFTER</code> or <code>BEFORE</code> a given command.
This is very handy, because I can easily find what I did when, and what followed, ...</p>
<p>I am looking for something similar for <code>ipython</code></p>
</div>
<div class="post-text" itemprop="text">
<p>In <code>ipython</code> enter:</p>
<pre><code>%history -g
</code></pre>
<p>It does not print time codes but it does print session/line number.</p>
</div>
<div class="post-text" itemprop="text">
<p>First use <code>%hist -o -g -f ipython_history.md</code> to output the history (input and output) to a text file. (<a href="http://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-history" rel="nofollow noreferrer">http://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-history</a>)</p>
<p>Then you can use the the <code>get_session_info</code> function to retreive the date and time for the session you are interested in.(<a href="http://ipython.readthedocs.io/en/stable/api/generated/IPython.core.history.html?highlight=hist#IPython.core.history.HistoryAccessor.get_session_info" rel="nofollow noreferrer">http://ipython.readthedocs.io/en/stable/api/generated/IPython.core.history.html?highlight=hist#IPython.core.history.HistoryAccessor.get_session_info</a>)</p>
<pre><code>profile_hist=IPython.core.history.HistoryAccessor(profile='default')
profile_hist.get_session_info(100)
</code></pre>
<p>This will print out something like </p>
<pre><code>(100, datetime.datetime(2018, 2, 13, 19, 8, 30, 40691), None, None, '')
</code></pre>
<p>This means that the session 100 started on the 13th of Feb 2018 19:08:30.</p>
</div>
<span class="comment-copy">IPython saves its history in a history.sqlite file in <code>~/.ipython/profile_default/</code>. In there you'll find the tables: <code>sessions</code> (with timestamps), <code>history</code> and <code>output_history</code>.</span>
<span class="comment-copy">@user3557327 - how can I access it from within <code>ipython</code> ?</span>
<span class="comment-copy">I don't know if ipython shows an interface to it, but you can always access it directly with the <a href="https://docs.python.org/3/library/sqlite3.html" rel="nofollow noreferrer">sqlite3 module</a>.</span>
<span class="comment-copy"><code>%history -g</code> will show you all of it. <code>-g</code> searches the history, and if you give it no pattern, you get everything.</span>
<span class="comment-copy"><code>%history -g -f filename</code> to save it to file.</span>
