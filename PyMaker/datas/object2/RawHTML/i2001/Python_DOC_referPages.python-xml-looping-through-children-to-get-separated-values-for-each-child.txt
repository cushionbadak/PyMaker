<div class="post-text" itemprop="text">
<p>I have this xml file:</p>
<pre><code>&lt;SESSION_INFO&gt;
&lt;start_time&gt;2018-10-16 22:44:38.36 -0500&lt;/start_time&gt;
&lt;/SESSION_INFO&gt;
&lt;ALL_INSTANCES&gt;
&lt;instance&gt;
&lt;ID&gt;1&lt;/ID&gt;
&lt;start&gt;4.3974745990&lt;/start&gt;
&lt;end&gt;13.6332131403&lt;/end&gt;
&lt;code&gt;Button 013&lt;/code&gt;
&lt;label&gt;
&lt;text&gt;1,2&lt;/text&gt;
&lt;/label&gt;
&lt;label&gt;
&lt;text&gt;0,4&lt;/text&gt;
&lt;/label&gt;
&lt;label&gt;
&lt;text&gt;2,3&lt;/text&gt;
&lt;/label&gt;
&lt;/instance&gt;
&lt;instance&gt;
&lt;ID&gt;2&lt;/ID&gt;
&lt;start&gt;513.0491021980&lt;/start&gt;
&lt;end&gt;524.9834182373&lt;/end&gt;
&lt;code&gt;Button 013&lt;/code&gt;
&lt;label&gt;
&lt;text&gt;1,2&lt;/text&gt;
&lt;/label&gt;
&lt;label&gt;
&lt;text&gt;1,4&lt;/text&gt;
&lt;/label&gt;
&lt;label&gt;
&lt;text&gt;1,3&lt;/text&gt;
&lt;/label&gt;
&lt;label&gt;
&lt;text&gt;0,1&lt;/text&gt;
&lt;/label&gt;
&lt;label&gt;
&lt;text&gt;1,3&lt;/text&gt;
&lt;/label&gt;
&lt;label&gt;
&lt;text&gt;0,4&lt;/text&gt;
&lt;/label&gt;
&lt;/instance&gt;
&lt;/ALL_INSTANCES&gt;
</code></pre>
<p>I wrote a code to extract all the data from /label/text and put it in a list:</p>
<pre><code>import xml.etree.ElementTree as ET
tree= ET.parse('/Desktop/XML Edit list.xml')
root = tree.getroot()

labels = []
for each in root.findall('.//ALL_INSTANCES/instance/label'):

    rating = each.find('.//text');
    print 'Empity' if rating is None else labels.append(rating.text);

print(labels)
</code></pre>
<p>Next step, where I can't get my head around it, is to create a list for all the  in each instance (2 in this example). Now, I feel like I need to use a for loop to go into each , pull out the data and write into a list that will be appended to labels[].
However, I cannot go through each instance separately; the <a href="https://docs.python.org/3/library/xml.etree.elementtree.html" rel="nofollow noreferrer">.find and .get</a> loop did not get me any far... and it was my best shot.</p>
<p>Thank you in advance for your help,
Cronos</p>
<p><strong>EDIT 1</strong>
Adding ideal output as per request:</p>
<pre><code>[['1,2', '0,4', '2,3'], ['1,2', '1,4', '1,3', '0,1', '1,3', '0,4']]
</code></pre>
<p><strong>EDIT 2</strong>
Before, I have achieved this adding another list inside the loop that will first append to all_lables and then it resets in order to get the other values for the next instance. Something like:</p>
<pre><code>all_labels = []
result = []
for child in root.iter():
    for instance in child.findall('instance'):
        for label in instance.findall('label'):
            all_labels = []
            for val in label.findall('text'):
                all_labels.append(val.text)
                result.append(all_labels)
</code></pre>
<p>But I canont make it work</p>
<p><strong><em>EDIT 3</em></strong>
Almost got it, thanks to LeKhan9 who showed a simpler approach; based on his idea, I created another list that will save the result of each loop; the output contains an empty value so it is not "clean":</p>
<pre><code>all_labels = []
result = []
for child in root.iter():    
    for instance in child.findall('instance'):        
        result.append(all_labels)    
        all_labels = []
        for label in instance.findall('label'):            
            for val in label.findall('text'):
                all_labels.append(val.text)

result.append(all_labels)

print result
[[], ['1,2', '0,4', '2,3'], ['1,2', '1,4', '1,3', '0,1', '1,3', '0,4']]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can always take a deliberate approach and parse each level of the tree as such:</p>
<pre><code>from xml.etree import ElementTree as ET


tree = ET.parse('test.xml')
root = tree.getroot()

all_labels = []
for child in root.iter():
    for instance in child.findall('instance'):
        for label in instance.findall('label'):
            for val in label.findall('text'):
                all_labels.append(val.text)

print all_labels
</code></pre>
<p>output:</p>
<pre><code>['1,2', '0,4', '2,3', '1,2', '1,4', '1,3', '0,1', '1,3', '0,4']
</code></pre>
<hr/>
<p>Updating based on OPs expected output:</p>
<pre><code>from xml.etree import ElementTree as ET


tree = ET.parse('test.xml')
root = tree.getroot()

result = []
for child in root.iter():
    for instance in child.findall('instance'):
        current_labels = []
        for label in instance.findall('label'):
            for val in label.findall('text'):
                current_labels.append(val.text)
        result.append(current_labels)

print result
</code></pre>
<p>Output:</p>
<pre><code>[['1,2', '0,4', '2,3'], ['1,2', '1,4', '1,3', '0,1', '1,3', '0,4']]
</code></pre>
</div>
<span class="comment-copy">Please can you add an expected output for labels ? Thank you.</span>
<span class="comment-copy">I do apologize, I should have mentioned my desired outcome (now, it is in the main post); plus, I have added what I have tried so far</span>
<span class="comment-copy">No worries! I added an update that should give you your expected result.</span>
<span class="comment-copy">Of course I have to put the result.append(current_labels) there! Nice one man :)</span>
