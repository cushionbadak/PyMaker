<div class="post-text" itemprop="text">
<p>I have a function <code>scalar_func(*args)</code> that takes a variable number scalar numbers. It preforms some math with them and outputs a scalar. As a trivial example, we'll assume <code>scalar_func</code> multiplies each number:</p>
<pre><code>def scalar_func(*args):
    out = 1    
    for arg in args:
        out *= arg
    return out
</code></pre>
<p>I would like to have <code>scalar_func</code> work with lists. To do so, I made another function <code>list_func(*args)</code>. It takes in a variable number of lists and makes a new one like so:</p>
<pre><code>def list_func(*args):
    out = []
    for i in range(len(arg[0])):
         out.append(scalar_func(arg[0][i], arg[1][i], arg[2][i]...)
    return out
</code></pre>
<p>Obviously, this function is just pseudocode. How can I implement <code>list_func</code>?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/functions.html#zip" rel="nofollow noreferrer"><code>zip</code></a> here:</p>
<pre><code>def scalar_func(*values):
    return sum(values)

def list_func(*args):
    out = []
    L = list(zip(*args))
    for i in range(len(args[0])):
         out.append(scalar_func(*L[i]))
    return out

list_func([0, 1, 2], [3, 4, 5])  # [3, 5, 7]
</code></pre>
<p>If you have large lists, you may wish to create an iterator and use <code>next</code> to reduce memory consumption:</p>
<pre><code>def list_func(*args):
    out = []
    L = iter(zip(*args))
    for i in range(len(args[0])):
         out.append(scalar_func(*next(L)))
    return out
</code></pre>
<p>This may also be rewritten for greater efficiency:</p>
<pre><code>def list_func(*args):
    return [scalar_func(*i) for i in zip(*args)]
</code></pre>
<p>Alternatively, you can <a href="https://docs.python.org/3/library/itertools.html#itertools.starmap" rel="nofollow noreferrer"><code>itertools.starmap</code></a> for the functional equivalent:</p>
<pre><code>from itertools import starmap

def list_func(*args):
    return list(starmap(scalar_func, zip(*args)))
</code></pre>
</div>
