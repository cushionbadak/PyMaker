<div class="post-text" itemprop="text">
<p>I am very new to python development and having trouble while understanding one method used in one sample, the method is:</p>
<pre><code>def dict_factory(cursor, row):

    d={}
    for idx, col in enumerate(cursor.description):
        d[col[0]] = row[idx]

    return d
</code></pre>
<p>and it is being called from:</p>
<pre><code>conn = sqlite3.connect("books.db")
conn.row_factory = dict_factory
cur = conn.cursor()
</code></pre>
<p>Now the 2 questions are:</p>
<ol>
<li><p>How dict_factory(cursor, col) is being called from dict_factory without params?</p></li>
<li><p>How dict_factory() is actually working? Does enumerate breaks the DB into the format of (c0,r0),(c0,r1) and so on?</p></li>
</ol>
<p>The converted DB by dict_factory is:</p>
<pre><code>[
  {
    "author": "Ann Leckie ", 
    "first_sentence": "The body lay naked and facedown, a deathly gray, spatters of blood staining the snow around it.", 
    "id": null, 
    "published": 2014, 
    "title": "Ancillary Justice"
  }, 
  {
    "author": "John Scalzi", 
    "first_sentence": "From the top of the large boulder he sat on, Ensign Tom Davis looked across the expanse of the cave, toward Captain Lucius Abernathy, Science Officer Q\u2019eeng and Chief Engineer Paul West perched on a second, larger boulder, and thought, Well, this sucks.", 
    "id": null, 
    "published": 2013, 
    "title": "Redshirts"
  }
]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<ol>
<li>In the code you showed, <code>dict_factory</code> is not being called. <code>conn.row_factory = dict_factory</code> simply assigns that function to the attribute <code>row_factory</code>. That means you just told your database connection in which way to treat rows (as dictionaries).</li>
<li><a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow noreferrer"><code>enumerate</code></a> augments the "normal" iteration by the index of the element (it returns tuples <code>(index, element)</code>). If you did <code>for col in cursor.description:</code> then <code>col</code> simply holds the name of each column. Doing <code>for idx, col in enumerate(cursor.description):</code> instead provides tuples where the first element is the iteration index (starting at 0), i.e. <code>(0, col0), (1, col1), ...</code>. Now the function <code>dict_factory</code> converts a <code>row</code> to a <code>dict</code>. It does so by iterating over the various columns and adding key-value pairs <code>col_name: row_value_for_that_column</code> to the dictionary.</li>
</ol>
</div>
<span class="comment-copy"><code>enumerate</code> is <a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow noreferrer">a built-in function</a>, also <code>sqlite3</code> module is from standard library, i.e. you can find documentation about <a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection.row_factory" rel="nofollow noreferrer"><code>Connection.row_factory</code> field</a></span>
<span class="comment-copy">Thanks i got it :)</span>
