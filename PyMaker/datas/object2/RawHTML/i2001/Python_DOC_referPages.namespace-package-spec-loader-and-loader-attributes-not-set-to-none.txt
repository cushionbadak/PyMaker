<div class="post-text" itemprop="text">
<p>The <a href="https://docs.python.org/3/reference/import.html#path-entry-finder-protocol" rel="nofollow noreferrer">Python Language Reference</a> states:</p>
<blockquote>
<p>To indicate to the import machinery that the spec represents a
  namespace portion. the path entry finder sets “loader” on the spec to
  <code>None</code> and “submodule_search_locations” to a list containing the
  portion.</p>
</blockquote>
<p>The <a href="https://docs.python.org/3/library/importlib.html#importlib.machinery.ModuleSpec.loader" rel="nofollow noreferrer">Python Library Reference</a> states:</p>
<blockquote>
<p>The loader to use for loading. For namespace packages this should be
  set to <code>None</code>.</p>
</blockquote>
<p>Yet creating a namespace package whose portions are located in two different paths <code>a/</code> and <code>b/</code> on the file system:</p>
<pre><code>a/
  namespace_package/
    module_1.py
    module_2.py
b/
  namespace_package/
    module_3.py
</code></pre>
<p>then adding these paths to the <code>PYTHONPATH</code> environment variable:</p>
<pre><code>export PYTHONPATH="a:b"
</code></pre>
<p>and finally importing the namespace package and printing its <code>__spec__.loader</code> and <code>__loader__</code> attributes with the CPython 3.7 interpreter:</p>
<pre><code>python3 -c "import namespace_package; print(namespace_package.__spec__.loader); print(namespace_package.__loader__)"
</code></pre>
<p>shows that they are <em>not</em> <code>None</code>:</p>
<blockquote>
<p>&lt;_frozen_importlib_external._NamespaceLoader object at 0x104b04128&gt;
  &lt;_frozen_importlib_external._NamespaceLoader object at 0x104b04128&gt;</p>
</blockquote>
<p>Is it a documentation error, an implementation error or my misinterpretation?</p>
</div>
<div class="post-text" itemprop="text">
<p>Looks like <a href="https://github.com/python/cpython/commit/b523f8433a8982e10eb41a3e2b37ee0e6d6a6e00" rel="nofollow noreferrer">it was right</a> but <a href="https://bugs.python.org/issue32303" rel="nofollow noreferrer">has been changed</a>.</p>
<p>Opened an issue to track it: <a href="https://bugs.python.org/issue35181" rel="nofollow noreferrer">https://bugs.python.org/issue35181</a></p>
</div>
<div class="post-text" itemprop="text">
<p>I would guess that it was once <code>None</code>, but is no longer, due to changes in Python. Is it causing you a problem? If so, then I would raise an issue, but the resolution might well be to have the documentation updated. Can you check what results you get with Python 3.6 and/or 3.5? Also might be worth checking the Python release notes to see what updates there have been in this area.  </p>
</div>
<div class="post-text" itemprop="text">
<p>In this case, <code>mod.__spec__.loader</code> is not the same thing as <code>mod.__loader__</code>.  The spec's loader should still be <code>None</code>.  The module's loader is set by the import machinery to an instance of the internal <code>_NamespaceLoader</code>, partly for the sake of reloading.  Perhaps the docs aren't clear enough on this.</p>
</div>
<span class="comment-copy">I checked on Python 3.3.0 (the version where <a href="https://docs.python.org/3/whatsnew/3.3.html#pep-420-implicit-namespace-packages" rel="nofollow noreferrer">implicit namespace packages</a> were introduced) and the <code>__loader__</code> attribute was <i>not</i> <code>None</code> from the beginning!</span>
<span class="comment-copy">But this is not the case: both <code>__loader__</code> and <code>__spec__.loader</code> attributes are <i>not</i> <code>None</code> but the same <code>_frozen_importlib_external._NamespaceLoader</code> object. I have updated my question to reflect that. So I think we have a problem here.</span>
<span class="comment-copy">This is because the implementation of PEP 420 was changed in February 2018 here: <a href="https://github.com/python/cpython/pull/5481" rel="nofollow noreferrer">github.com/python/cpython/pull/5481</a></span>
