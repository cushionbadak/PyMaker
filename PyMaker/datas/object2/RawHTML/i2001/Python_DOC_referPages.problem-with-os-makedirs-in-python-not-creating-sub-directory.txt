<div class="post-text" itemprop="text">
<p>I have a script that runs hourly.</p>
<p>The output folder structure should be /todaysdate/hour/</p>
<p>So, at 00:00, the script will run &amp; it should create both the todaysdate folder and a subfolder called 00.</p>
<p>At 01:00, the script will run - the todaysdate directory exists, so it should only create the subdirectory.</p>
<p>I've tried the below, but that doesn't work - how would I approach this?</p>
<pre><code>file_path = 'Desktop/%s/%s' %(today_date, hour)
directory = os.path.dirname(file_path)
if not os.path.exists(directory):
    os.makedirs(directory)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You stated that you want to create directories for each hour. So you don't need to get the dirname. This should do it:</p>
<pre><code>file_path = 'Desktop/%s/%s' %(today_date, hour)
if not os.path.exists(file_path):
    os.makedirs(file_path)
</code></pre>
<p>See docs for <a href="https://docs.python.org/3/library/os.path.html#os.path.dirname" rel="nofollow noreferrer"><code>os.path.dirname</code></a>.   This gives you the directory that contains <code>file_path</code>, e.g. </p>
<pre><code>file_path = "Desktop/22-10-2018/00"
print(os.path.dirname(file_path))
&gt;&gt;&gt; "Desktop/22-10-2018/"
</code></pre>
</div>
<span class="comment-copy">What's the output of <code>print(os.getcwd())</code>? Is that where your Desktop is?</span>
<span class="comment-copy">Also see the <code>exists_ok</code> flag, for python &gt;3.2. <a href="https://stackoverflow.com/a/14364249/1643946">stackoverflow.com/a/14364249/1643946</a>. You can save yourself the os.path.exists test in this case</span>
