<div class="post-text" itemprop="text">
<p>I'm trying to download specific file from ftp but I get error while trying to connect </p>
<pre><code>import ftplib
url = 'ftp://ftp.ensemblgenomes.org/pub/release-41/bacteria//fasta/bacteria_176_collection/_bacillus_aminovorans/cdna/'
ftp = ftplib.FTP(url)
</code></pre>
<p>error that I get: <code>UnicodeError: encoding with 'idna' codec failed (UnicodeError: label too long)</code></p>
</div>
<div class="post-text" itemprop="text">
<pre><code>url = 'ftp://ftp.ensemblgenomes.org/pub/release-41/bacteria//fasta/bacteria_176_collection/_bacillus_aminovorans/cdna/'
ftp = ftplib.FTP(url)
</code></pre>
<p>From <a href="https://docs.python.org/3/library/ftplib.html#ftplib.FTP" rel="nofollow noreferrer">the documentation of ftplib</a>:</p>
<blockquote>
<p>class ftplib.FTP(host='', user='', passwd='', acct='', timeout=None, source_address=None)<br/>
      Return a new instance of the FTP class. When host is given, the method call connect(host) is made. </p>
</blockquote>
<p>In other words: the first argument is expected to be a hostname only, not a URL with <code>protocol://host/path</code>. If you want to connect to the server and make the server change to a specific path you need to do this in steps instead:</p>
<pre><code>ftp = ftplib.FTP('ftp.ensemblgenomes.org','ftp','user@example.com')
ftp.cwd('/pub/release-41/bacteria//fasta/bacteria_176_collection/_bacillus_aminovorans/cdna/')
</code></pre>
</div>
<span class="comment-copy">My guess is that this is caused by the specific url you use but don't show.</span>
<span class="comment-copy">@SteffenUllrich edited</span>
