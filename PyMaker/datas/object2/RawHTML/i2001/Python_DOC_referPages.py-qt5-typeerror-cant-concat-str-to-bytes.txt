<div class="post-text" itemprop="text">
<p>so i made a sign up window with QtDesigner that store the user's infomation in a DataFrame.
but for the password, i want it to be Hashed.
Now, when the program reaches the <strong><em>HPW Line</em></strong> it raises this Error :</p>
<pre><code>File "c:/Users/pc/Desktop/qt_test_auth/su_win.py", line 225, in confirmFunc
HPW = hashlib.sha512(PW.encode('utf-8') + salt).hexdigest()

TypeError: can't concat str to bytes
</code></pre>
<p>i tried debugging it on my own but i couldn't.
Thank you very much!</p>
<p>-Head-</p>
<pre><code>import sys
import hashlib, uuid
from PyQt5 import QtCore, QtGui, QtWidgets
import pandas as pd
</code></pre>
<p>-Body-</p>
<pre><code>class sign_up(QtWidgets.QMainWindow):
    def __init__(self):...

    def setupUi(self, sign_up):...

    def cancelFunc(self):...

    def clearFunc(self):...

    def confirmLockOn(self):...

    def confirmLockOff(self):...        

    **def confirmFunc(self):**
        FN  = self.FN_lineEdit.text()
        LN  = self.LN_lineEdit.text()
        EA  = self.EA_lineEdit.text()
        CEA = self.CEA_lineEdit.text()
        UN  = self.SU_UN_lineEdit.text()
        PW  = self.SU_PW_lineEdit.text()
        CPW = self.SU_CPW_lineEdit.text()

        self.buttonReply = QtWidgets.QMessageBox.question(
            self,
            'ConfirmInputs()',
            "First name : %s \nLast name: %s \nEmail Adress: %s \nEmail confirmation: %s \nUsername: %s \nPassword: %s \nPassword confirmation: %s" %(FN, LN, EA, CEA, UN, PW, CPW),
            QtWidgets.QMessageBox.Yes| QtWidgets.QMessageBox.No, QtWidgets.QMessageBox.No)

        if self.buttonReply == QtWidgets.QMessageBox.Yes :
            salt = uuid.uuid4().hex
            HPW = hashlib.sha512(PW.encode('utf-8') + salt).hexdigest()
            userinput = {}
            userinput['First name'] = [FN]
            userinput['Last name'] = [LN]
            userinput['Email'] = [EA]
            userinput['Username'] = [UN]
            userinput['Hashed Password']=[HPW]
            df = pd.DataFrame(data = userinput, columns= ['First name', 'Last name', 'Email Adress', 'Username', 'Hashed Password'])
            print(df)
        else:
            self.close()
        self.show()

def main():
    app = QtWidgets.QApplication(sys.argv)
    main = sign_up()
    main.show()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main()  
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The problem is simple: salt is a string as indicated by the <a href="https://docs.python.org/3/library/uuid.html#uuid.UUID.hex" rel="nofollow noreferrer">docs</a>:</p>
<blockquote>
<p><strong>UUID.hex</strong></p>
<p>The UUID as a 32-character hexadecimal string.</p>
</blockquote>
<p>So if you want to concatenate you must convert into bytes as shown below:</p>
<pre><code>HPW = hashlib.sha512(PW.encode('utf-8') + salt.encode('utf-8')).hexdigest()
</code></pre>
</div>
<span class="comment-copy">Yooooooo !!!!! thank you sooo much !!!! it worked !</span>
