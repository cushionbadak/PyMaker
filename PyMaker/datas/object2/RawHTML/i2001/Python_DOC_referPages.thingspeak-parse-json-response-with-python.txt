<div class="post-text" itemprop="text">
<p>I would like to create an Alexa skill using Python to use data uploaded by sensors to Thingspeak. The cases where I only use one specific value is quite easy, the response from Thingspeak is the value only. When I want to use several values, in my case to sum up the athmospheric pressure to determine tendencies, teh response is a json object like this:</p>
<pre><code>{"channel":{"id":293367,"name":"Weather Station","description":"My first attempt to build a weather station based on an ESP8266 and some common sensors.","latitude":"51.473509","longitude":"7.355569","field1":"humidity","field2":"pressure","field3":"lux","field4":"rssi","field5":"temp","field6":"uv","field7":"voltage","field8":"radiation","created_at":"2017-06-25T07:35:37Z","updated_at":"2018-08-04T12:11:22Z","elevation":"121","last_entry_id":1812},"feeds":
[{"created_at":"2018-10-21T18:11:45Z","entry_id":1713,"field2":"1025.62"}, 
 {"created_at":"2018-10-21T18:12:05Z","entry_id":1714,"field2":"1025.58"}, 
 {"created_at":"2018-10-21T18:12:25Z","entry_id":1715,"field2":"1025.56"}, 
 {"created_at":"2018-10-21T18:12:45Z","entry_id":1716,"field2":"1025.65"}, 
 {"created_at":"2018-10-21T18:13:05Z","entry_id":1717,"field2":"1025.58"}, 
 {"created_at":"2018-10-21T18:13:25Z","entry_id":1718,"field2":"1025.63"}]
</code></pre>
<p>I now started with </p>
<pre><code>f = urllib.urlopen(link) # Get your data
json_object = json.load(f)

for entry in json_object[0]
  print entry["field2"]
</code></pre>
<p>The json object is a bit recursive, it is a list containing a list with an element with an array as the value.
Now I am not quite sure how to iterate over the values of the key "field2" in the array. I am quite new to Python and also json. Perhaps anyone can help me out?</p>
<p>Thanks in advance!</p>
</div>
<div class="post-text" itemprop="text">
<p>This has nothing to do with json - once the json string parsed by <code>json.load()</code>, what you get is a plain python object (usually a dict, sometimes a list, rarely - but this would be legal - a string, int, float, boolean or <code>None</code>).</p>
<blockquote>
<p>it is a list containing a list with an element with an array as the value.</p>
</blockquote>
<p>Actually it's a <code>dict</code> with two keys <code>"channel"</code> and <code>"feeds"</code>. The first one has another dict for value, and the second a <code>list</code> of <code>dict</code>s. How to use dicts and lists is extensively documented FWIW</p>
<ul>
<li><a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries" rel="nofollow noreferrer">https://docs.python.org/3/tutorial/datastructures.html#dictionaries</a></li>
<li><a href="https://docs.python.org/3/library/stdtypes.html#mapping-types-dict" rel="nofollow noreferrer">https://docs.python.org/3/library/stdtypes.html#mapping-types-dict</a></li>
<li><a href="https://docs.python.org/3/tutorial/introduction.html#lists" rel="nofollow noreferrer">https://docs.python.org/3/tutorial/introduction.html#lists</a></li>
<li><a href="https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range" rel="nofollow noreferrer">https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range</a></li>
</ul>
<p>Here the values you're looking for are stored under the "field2" keys of the dicts in the "feeds" key, so what you want is:</p>
<pre><code># get the list stored under the "feeds" key
feeds = json_object["feeds"]

# iterate over the list:
for feed in feeds:
    # get the value for the "field2" key
    print feed["field2"]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You have a dictionary. Use key to access the value</p>
<p><strong>Ex:</strong></p>
<pre><code>json_object = {"channel":{"id":293367,"name":"Weather Station","description":"My first attempt to build a weather station based on an ESP8266 and some common sensors.","latitude":"51.473509","longitude":"7.355569","field1":"humidity","field2":"pressure","field3":"lux","field4":"rssi","field5":"temp","field6":"uv","field7":"voltage","field8":"radiation","created_at":"2017-06-25T07:35:37Z","updated_at":"2018-08-04T12:11:22Z","elevation":"121","last_entry_id":1812},"feeds":
[{"created_at":"2018-10-21T18:11:45Z","entry_id":1713,"field2":"1025.62"}, 
 {"created_at":"2018-10-21T18:12:05Z","entry_id":1714,"field2":"1025.58"}, 
 {"created_at":"2018-10-21T18:12:25Z","entry_id":1715,"field2":"1025.56"}, 
 {"created_at":"2018-10-21T18:12:45Z","entry_id":1716,"field2":"1025.65"}, 
 {"created_at":"2018-10-21T18:13:05Z","entry_id":1717,"field2":"1025.58"}, 
 {"created_at":"2018-10-21T18:13:25Z","entry_id":1718,"field2":"1025.63"}]}

for entry in json_object["feeds"]:
    print entry["field2"]
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>1025.62
1025.58
1025.56
1025.65
1025.58
1025.63
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I just figured it out, it was just like expected.
You have to get the <code>entries</code> array from the dict and than iterate over the list of items and print the value to the key <code>field2</code>.</p>
<pre><code># Get entries from the response
entries = json_object["feeds"]

# Iterate through each measurement and print value
for entry in entries:
  print entry['field2']
</code></pre>
</div>
<span class="comment-copy">Thank you for the explanation, I just figured it out by myself. This is exactly how it works. :-)</span>
<span class="comment-copy">Thank you for the answer, it was just like expected.</span>
