<div class="post-text" itemprop="text">
<p>I'm trying to understand how <code>multiprocessing</code> works in python and having some issues.
This is the example:</p>
<pre><code>import multiprocessing

def func():
    return 1

p = multiprocessing.Pool()
result = p.apply_async(func).get()
</code></pre>
<p>When <code>.get()</code> function is called, the code is just stuck. What am I doing wrong?</p>
</div>
<div class="post-text" itemprop="text">
<p>You need to add these 2 lines inside <code>if __name__ == "__main__":</code> </p>
<p>so now your code must look like </p>
<pre><code>import multiprocessing

def func():
    return 1

if __name__ == "__main__":
    p = multiprocessing.Pool()
    result = p.apply_async(func).get()
</code></pre>
<p>If this is being called as an import, it will cause an infinite sequence of new processes. And adding them inside the <code>if</code> block works because <code>if</code> statement won't execute during import.</p>
</div>
<div class="post-text" itemprop="text">
<p>i do not have enough details to know exactly what is the problem.
but i have real strong guess that putting those lines:</p>
<pre><code>p = multiprocessing.Pool()
result = p.apply_async(func).get()
</code></pre>
<p>inside a function will fix your problem.</p>
<p>try this:</p>
<pre><code>import multiprocessing

def func():
    return 1

def main():
    p = multiprocessing.Pool()
    result = p.apply_async(func).get()
    print(result)

if __name__ == '__main__':
    main()
</code></pre>
<p>tell me if it worked :)</p>
</div>
<span class="comment-copy">What OS are you using?</span>
<span class="comment-copy">See <b>Safe importing of main module</b> in the multiprocessing <a href="https://docs.python.org/3/library/multiprocessing.html?highlight=process#programming-guidelines" rel="nofollow noreferrer">programming guidlelines</a></span>
<span class="comment-copy">What do you need the get() for? Try to remove it and see if it works</span>
<span class="comment-copy">You only need this if the OS is Windows, which is why I asked them what OS they were on</span>
