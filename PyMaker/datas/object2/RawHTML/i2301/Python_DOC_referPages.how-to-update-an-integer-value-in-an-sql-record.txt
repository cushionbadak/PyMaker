<div class="post-text" itemprop="text">
<p>I'm pretty new to SQL and the Sqlite3 module and I want to edit the timestamps of all the records in my DB randomly.</p>
<pre><code>import sqlite3
from time import time
import random

conn = sqlite3.connect('database.db')
c = sqlite3.Cursor(conn)

ts_new = round(time())
ts_old = 1537828957
difference = ts_new - ts_old

for i in range(1,309):

    #getting a new, random timestamp
    new_ts = ts_old + random.randint(0, difference)

    t = (new_ts, i)
    c.executemany("UPDATE questions SET timestamp = (?) WHERE rowid = (?)", t)

#conn.commit()
</code></pre>
<p>When run, I get a  <code>ValueError: parameters are of unsupported type</code>.</p>
<p>To add the <code>timestamp</code> value originally I set <code>t</code> to a tuple and the current UNIX timestamp as the first value of a it e.g <code>(1537828957, )</code>. Is this error displaying because I've used two <code>(?)</code> unlike the single one I used in the statement to add the timestamps to begin with?</p>
</div>
<div class="post-text" itemprop="text">
<p>You're using <a href="https://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor.executemany" rel="nofollow noreferrer"><code>executemany</code></a> instead of <a href="https://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor.execute" rel="nofollow noreferrer"><code>execute</code></a>. <code>executemany</code> takes an iterator of tuples and executes the query for each tuple.</p>
<p>You want to use <code>execute</code> instead, it executes the query once using your <code>tuple</code>.</p>
<pre><code>c.execute('UPDATE questions SET timestamp = (?) where rowid = (?)', t)
</code></pre>
</div>
<span class="comment-copy">What line is the error from?</span>
<span class="comment-copy">And what type is <code>timestamp</code>? Can you show us <code>.schema questions</code>?</span>
<span class="comment-copy">from <a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Cursor.executemany" rel="nofollow noreferrer">docs</a>: <code>seq_of_parameters</code> -- parameter sequences or mappings, i.e. in your case you should pass <code>[t]</code> instead of just <code>t</code> or use <code>sqlite3.Cursor.execute</code> method</span>
