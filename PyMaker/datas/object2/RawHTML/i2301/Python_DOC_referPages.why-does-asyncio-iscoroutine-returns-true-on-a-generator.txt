<div class="post-text" itemprop="text">
<p>Please consider the following function:</p>
<pre><code>def test(): yield 1
</code></pre>
<p>The <code>asyncio.iscoroutine()</code> method will return <code>True</code> for the method <code>test()</code>. Another thing to notice is that <code>inspect.iscoroutine()</code> will return <code>False</code>. </p>
<p>Any reason why <code>asyncio</code> thinks it's a coroutine ? In any case, it seems that one of them got it wrong. </p>
</div>
<div class="post-text" itemprop="text">
<p>This looks like a docs error in the new Python 3.7 asyncio docs. At the time of the question and this answer, the <a href="https://docs.python.org/3.7/library/asyncio-task.html#asyncio.iscoroutine" rel="nofollow noreferrer">new docs</a> said</p>
<blockquote>
<p>Return True if obj is a coroutine object.</p>
<p>This method is different from inspect.iscoroutine() because it returns
  True for generator-based coroutines decorated with @coroutine.</p>
</blockquote>
<p>while the <a href="https://docs.python.org/3.6/library/asyncio-task.html#asyncio.iscoroutine" rel="nofollow noreferrer">old docs</a> said</p>
<blockquote>
<p>Return True if obj is a coroutine object, which may be based on a
  generator or an async def coroutine.</p>
</blockquote>
<p>The old docs are correct; <code>asyncio.iscoroutine</code> considers any generator object to be a coroutine, not just ones created by <code>@coroutine</code>-decorated generator functions.</p>
<hr/>
<p>Following the questioner's <a href="https://bugs.python.org/issue34802" rel="nofollow noreferrer">issue report</a>, the docs have been <a href="https://github.com/python/cpython/commit/59ee5b12938efbf534f2a19300a847bf6b23a77d" rel="nofollow noreferrer">updated</a> to remove "decorated with @coroutine" from the asyncio.iscoroutine docs. I would post an archive.org link showing the old text, but archive.org doesn't have that version archived. You can still see the old text in the github revision history or in the commit I just linked, though.</p>
</div>
<span class="comment-copy">The docs explains this : <code>This method is different from inspect.iscoroutine() because it returns True for generator-based coroutines decorated with @coroutine.</code> <a href="https://docs.python.org/3/library/asyncio-task.html#asyncio.iscoroutine" rel="nofollow noreferrer">source</a></span>
<span class="comment-copy">Though I didn't decorate it ? Or am I missing something ?</span>
<span class="comment-copy">Sorry I linked the wrong section <code>Return True if obj is a coroutine object, which may be based on a generator or an async def coroutine.</code> Forgot I had it on 3.7 docs see User's answer</span>
<span class="comment-copy">So there's an issue in the doc ?</span>
<span class="comment-copy">@Gefn: Looks like it.</span>
<span class="comment-copy">Thanks, I opened an issue ;)</span>
