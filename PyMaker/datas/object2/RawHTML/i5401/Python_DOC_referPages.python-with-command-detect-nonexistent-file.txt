<div class="post-text" itemprop="text">
<p>If I want to use the "with" command in python to open a file, how can I detect a file being nonexistent and handle that case accordingly? (for example, if the filename is inputted by user, and the program needs to check if a file with the filename exists)
Also, How do I handle failures to open a file, for example a permission error or an error due to a corrupted file, using a python "With" statement?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can either wrap the whole block in a <code>try</code> block and catch <code>OSError</code> (the parent of all I/O and permission related errors in Python 3), or if you need to be absolutely sure it came from the <code>open</code>, and not another call in the block, <code>open</code> outside the <code>with</code> block, and immediately <code>with</code> it after verifying success.</p>
<p>Approach number 1:</p>
<pre><code>try:
    with open(...) as f:
        ...
except OSError:
    ... handle error ...
</code></pre>
<p>or to only catch from the <code>open</code>:</p>
<pre><code>try:
    f = open(...)
except OSError:
    ... handle error ...
else:
    # When the open succeeds, this is the very next thing executed, so
    # race window for stuff like Ctrl-C interrupting is tiny
    with f:
        ...
</code></pre>
<p>If you only want to catch a subset of <a href="https://docs.python.org/3/library/exceptions.html#exception-hierarchy" rel="nofollow noreferrer"><code>OSError</code> subclasses</a>, you can explicitly catch them one by one, or for uniform handling, catch a <code>tuple</code> of all recognized errors, e.g., to only catch non-existent file, is a directory, or permission related errors, while allowing other errors to bubble up, you could change:</p>
<pre><code>except OSError:
</code></pre>
<p>to:</p>
<pre><code>except (FileNotFoundError, IsADirectoryError, PermissionError):
</code></pre>
</div>
<span class="comment-copy">what have you tried? Please see <a href="https://stackoverflow.com/help/mcve">mvce</a>. You can't expect us to do your work for you.</span>
<span class="comment-copy">Wrap it in a <code>try</code> block and catch the <code>FileNotFoundError</code>: <a href="https://docs.python.org/3/tutorial/errors.html" rel="nofollow noreferrer">docs.python.org/3/tutorial/errors.html</a></span>
