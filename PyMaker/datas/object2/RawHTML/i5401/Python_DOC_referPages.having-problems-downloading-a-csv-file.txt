<div class="post-text" itemprop="text">
<p>So I was trying to make a function that downloads a csv file using the csv download link and then basically prints it dividing it in lines but I'm having problems when I have to save </p>
<pre><code>def download_data(csv_url):
    response = request.urlopen(csv_url)
    csv = response.read()
    csv_str = str(csv)
    lines = csv_str.split("\\n")
    dest_url = r'data.csv'
    fx = open(dest_url, 'r')
    for line in lines:
      fx.write(line + '/n')
    fx.close()
</code></pre>
<p>when I give it the csv link , it tells me it can't find file/directory "data.csv" even though I should've downloaded it.
Running Mac os</p>
</div>
<div class="post-text" itemprop="text">
<p>You're reading the file. Change the <code>'r'</code> in <code>fx = open(dest_url, 'r')</code>  to <code>'w'</code>.</p>
<pre><code>fx = open(dest_url, 'w')
</code></pre>
<p>As a side note you really should be using a <a href="https://docs.python.org/3/reference/compound_stmts.html#the-with-statement" rel="nofollow noreferrer"><code>with</code> statement</a>. <code>with</code> will make the file object close the connection once the code leaves the the <code>with</code>'s scope. This way you don't have to worry about closing the connection.</p>
<pre><code>def download_data(csv_url):
    response = request.urlopen(csv_url)
    with open('data.csv', 'w') as f:
        f.write(str(response.read()))
</code></pre>
<p>Though really there isn't any need to save the file at all if you're just going to read it and display the contents on the screen. Just have <code>download_data</code> return <code>csv_str</code>.</p>
<p>Finally take a look at the builtin <a href="https://docs.python.org/2/library/csv.html" rel="nofollow noreferrer">csv module</a>. It makes life easy.</p>
<pre><code>import csv
from io import StringIO
import requests


def download_data(csv_url):
    return csv.reader(
        StringIO(
            requests.get(csv_url)
                    .text
        ), delimiter=','
    )

for row in download_data('https://people.sc.fsu.edu/~jburkardt/data/csv/addresses.csv'):
    print("| {} |".format(str(' | '.join(row))))

# Prints:
#
# | John | Doe | 120 jefferson st. | Riverside |  NJ |  08075 |
# | Jack | McGinnis | 220 hobo Av. | Phila |  PA | 09119 |
# | John "Da Man" | Repici | 120 Jefferson St. | Riverside |  NJ | 08075 |
# | Stephen | Tyler | 7452 Terrace "At the Plaza" road | SomeTown | SD |  91234 |
# |  | Blankman |  | SomeTown |  SD |  00298 |
# | Joan "the bone", Anne | Jet | 9th, at Terrace plc | Desert City | CO | 00123 |
</code></pre>
</div>
