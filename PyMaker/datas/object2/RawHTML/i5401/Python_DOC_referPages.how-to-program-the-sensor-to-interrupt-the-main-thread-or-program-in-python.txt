<div class="post-text" itemprop="text">
<p>my idea is that i want to make car with sensors for obstacle avoidance using raspberry pi and Python as programming language.</p>
<p>Thus i want to make a separate thread for sensor in way to keep monitoring the sensor and when it detect obstacle it should directly interrupt the main program( which give the movement command to the motor), and let the car stop</p>
<p>Ä°f you can give me code example or just simulation with virtual sensor.</p>
<p>Or if there is a better practice please advice.</p>
</div>
<div class="post-text" itemprop="text">
<p>since no one was able to help me, and I could not find tutorials that explain this concept.
finally I figured a way to do that and I will share it so that others can make use of it hopefully, or suggest me a better practice if there is a one.</p>
<pre><code>import time
from threading import Thread, current_thread



def monitorSensorThread(arg1):
    print "started sensor  montiring"

    while True:
        if(thereisobstacle):
            current_thread().interrupt()


def thereisobstacle():
    ## just virtual sensor to tell if there is an obstacles
    time.sleep(5)
    return True

def stopMovmentAndLookfornewdirection():
    ##the interrupt fuction
    ## in this function i will write somthing to stop the motor and look for another way
    print "stoped"


sensorThread = Thread(target=monitorSensorThread, args=(1,))
sensorThread.daemon=True
sensorThread.start()

try:

    moveforward()

except KeyboardInterrupt:
    print "the main thread interrupted"
</code></pre>
</div>
<span class="comment-copy">please add some initial code which you have written</span>
<span class="comment-copy">If your "main program" is just another thread in Python then probably you need threading.Event for communication between threads - <a href="https://docs.python.org/3/library/threading.html#event-objects" rel="nofollow noreferrer">docs.python.org/3/library/threading.html#event-objects</a></span>
<span class="comment-copy">actually, I still did decide the code  I will write which is why I am asking how to do it.However, I think it might be something like this code :</span>
<span class="comment-copy"><a href="https://gist.github.com/nohhem/ae9ab7c78e0e6c4e539fb98a3b1d9104" rel="nofollow noreferrer">gist.github.com/nohhem/ae9ab7c78e0e6c4e539fb98a3b1d9104</a></span>
