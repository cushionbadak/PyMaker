<div class="post-text" itemprop="text">
<p>I have written a code in python using Beautiful Soup for extracting user name and their rating from IMDB. But there are many user who did not gave rating for their reviews. Its become difficult to map exactly ratings with their reviews. So how can i do this part?
    <a href="http://www.imdb.com/title/tt2866360/reviews?ref_=tt_ov_rt" rel="nofollow noreferrer">http://www.imdb.com/title/tt2866360/reviews?ref_=tt_ov_rt</a>
In this url reviews are not assign rating. </p>
<pre><code>url1 ="http://www.imdb.com/title/tt2866360/reviews?ref_=tt_ov_rt"

response = requests.get(url1, headers=headers)

page=response.content

soup=BeautifulSoup(page)

for k in soup.findAll('div',{"class":"load-more-data"}):

    if k.name == 'span' and m['class'] == "rating-other-user-rating":
        print blah()
    else:
        print blah 1()
</code></pre>
<p>This is the code to check whether rating part exist in review part or not but it did not returning any thing?</p>
</div>
<div class="post-text" itemprop="text">
<p>The information you're looking for (username, rating) is located in 'div.review-container' tags.<br/>
About the tags that have no rating, you can just ignore them.  </p>
<pre><code>for k in soup.find_all('div',{"class":"review-container"}):
    rating = k.find('span', class_='rating-other-user-rating')
    if rating:
        rating = ''.join(i.text for i in rating.find_all('span')[-2:])
    name = k.find('span', class_='display-name-link').text
    print name, rating
</code></pre>
<p>The information  that shows when you press the Load More button is loaded via XHR requests.<br/>
You'll find the all data you need in order to preform the request in a 'div.load-more-data' tag.  </p>
<pre><code>load_more = soup.find('div', class_='load-more-data')
url = 'http://www.imdb.com{}?paginationKey={}'.format(
    load_more['data-ajaxurl'], load_more['data-key']
    )
r = requests.get(url)
soup = BeautifulSoup(r.content, 'html.parser')
</code></pre>
<p>Just repeat the above process untill you have all the info.  </p>
<hr/>
<pre><code>import requests
from bs4 import BeautifulSoup

url = "http://www.imdb.com/title/tt2866360/reviews?ref_=tt_ov_rt"
ajax_url = url.split('?')[0] + "/_ajax?paginationKey={}"
reviews = []

while True:
    r = requests.get(url)
    soup = BeautifulSoup(r.content, 'html.parser')

    for k in soup.find_all('div',{"class":"review-container"}):
        rating = k.find('span', class_='rating-other-user-rating')
        if rating:
            rating = ''.join(i.text for i in rating.find_all('span')[-2:])
        name = k.find('span', class_='display-name-link').text
        reviews.append([name, rating])
        print name, rating

    load_more = soup.find('div', class_='load-more-data')
    if not load_more:
        break
    url = ajax_url.format(load_more['data-key'])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I suggest you should try to console the content from <code>&lt;div class="review-container" ...</code> of every review. Then select the specific data you want to retrieve.</p>
</div>
<span class="comment-copy">What is <code>print blah 1()</code> in the context of this problem? It's invalid syntax.</span>
<span class="comment-copy">if condition is true then print rating, else print none or 0.</span>
<span class="comment-copy">Your solution is always the great @sir t.m.adam. +1 for this.</span>
<span class="comment-copy">Thanks @Shahin, i really appreciate it!</span>
<span class="comment-copy">your solution is extremely good....but the loop is not terminated automatically we need to close it.</span>
<span class="comment-copy">cant we put loop condtion based on the total reviews</span>
<span class="comment-copy">I am sorry its absolutely fine...got it...thank you very much.</span>
<span class="comment-copy">can you please provide a code snippet for this?</span>
<span class="comment-copy">I can provide to you this <a href="https://docs.python.org/3/howto/logging.html" rel="nofollow noreferrer">link</a>. It's a good guide for logging data in Python.</span>
