<div class="post-text" itemprop="text">
<p>Hello there i'm new to python and I'm trying to do speed testing using python getting data from (speedtest.net). I have been looking through git hub and found the speedtest-cli. But it has a lot of features I don't need. I just want to make a simple script that will run 3 times. I found some API but I'm not sure how to modify it to loop three times. Any help will be appreciated. Thanks in advance</p>
<pre><code>import speedtest

servers = []
# If you want to test against a specific server
# servers = [1234]
x=0
for x in range(0, 2):
    s = speedtest.Speedtest()
    s.get_servers(servers)
    s.get_best_server()
    s.download()
    s.upload()
    s.results.share()
    results_dict = s.results.dict()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>import speedtest


def test():
    s = speedtest.Speedtest()
    s.get_servers()
    s.get_best_server()
    s.download()
    s.upload()
    res = s.results.dict()
    return res["download"], res["upload"], res["ping"]


def main():
    # write to csv
    with open('file.csv', 'w') as f:
        f.write('download,upload,ping\n')
        for i in range(3):
            print('Making test #{}'.format(i+1))
            d, u, p = test()
            f.write('{},{},{}\n'.format(d, u, p))
    # pretty write to txt file
    with open('file.txt', 'w') as f:
        for i in range(3):
            print('Making test #{}'.format(i+1))
            d, u, p = test()
            f.write('Test #{}\n'.format(i+1))
            f.write('Download: {:.2f} Kb/s\n'.format(d / 1024))
            f.write('Upload: {:.2f} Kb/s\n'.format(u / 1024))
            f.write('Ping: {}\n'.format(p))
    # simply print in needed format if you want to use pipe-style: python script.py &gt; file
    for i in range(3):
        d, u, p = test()
        print('Test #{}\n'.format(i+1))
        print('Download: {:.2f} Kb/s\n'.format(d / 1024))
        print('Upload: {:.2f} Kb/s\n'.format(u / 1024))
        print('Ping: {}\n'.format(p))


if __name__ == '__main__':
    main()
</code></pre>
</div>
<span class="comment-copy">Try <code>for x in range(0,3)</code></span>
<span class="comment-copy">or just <code>for x in range(3)</code>. <code>range(start, end, step)</code> - <code>start</code> inclusively and <code>end</code> exclusively. check the <a href="https://docs.python.org/3/library/stdtypes.html#typesseq-range" rel="nofollow noreferrer">docs</a></span>
<span class="comment-copy">I have already tried that, the problem is that it doesnt loop at all. It outputs the result once and thats it.</span>
<span class="comment-copy">we can't help if we don't know what is going on... in your question you only said <code>make a simple script that will run 3 times</code>. At least show us what kind of error you've got if range is not real problem</span>
<span class="comment-copy">I think the issue is that you are looking at the <code>results_dict</code> value which gets reset in each loop. You have to either add the result to a variable outside the for loop scope or print off the results each loop like @Aiven answer below.</span>
<span class="comment-copy">Alright let me give it a shot</span>
<span class="comment-copy">Ok now it works, but it's giving me a lot of extra info. I just wanted the download, upload, and ping lol. How can I fix that.</span>
<span class="comment-copy">just pick needed info from <code>results_dict</code>: <code>results_dict['download']</code></span>
<span class="comment-copy">holy cow dude, thanks. How did you know what to print? instead of all the  extra stuff.</span>
<span class="comment-copy">how can I turn it into a txt/csv file i tried using open() and write etc but none worked</span>
