<div class="post-text" itemprop="text">
<p>Let's say, I have this piece of code:</p>
<pre><code>class BaseModel(object):
    pass

class AppleModel(BaseModel):
    pass

class OrangeModel(BaseModel):
    pass

def get_record(model, pk):
    try:
        result = model.objects.get(pk=pk)

        # Some code working with BaseModel..

        return result
    except model.DoesNotExist:
        return None
</code></pre>
<p>Now, I want to use it like in this example with proper type annotation...</p>
<pre><code>myApple = get_record(AppleModel, 12)
myApple. # type hints for AppleModel

myOrange = get_record(OrangeModel, 433)
myOrange. # type hints for OrangeModel
</code></pre>
<p>How should I annotate the <code>get_record</code> function? I tried something like</p>
<pre><code>def get_record(model: Type[BaseModel], id: int) -&gt; Optional[BaseModel]:
    # ...
</code></pre>
<p>But then, I lose info about subclasses. I tried to use <a href="https://docs.python.org/3/library/typing.html#typing.Generic" rel="nofollow noreferrer">Generic</a>, but without success.</p>
</div>
<div class="post-text" itemprop="text">
<p>I'm assuming what you want to do is have <code>get_record</code> accept the type of some subclass of <code>BaseModel</code>, and return an instance of the corresponding class.</p>
<p>In that case, you'll probably want to use <a href="https://docs.python.org/3/library/typing.html#typing.TypeVar" rel="nofollow noreferrer">TypeVars</a> -- in particular, <a href="http://mypy.readthedocs.io/en/latest/generics.html#type-variables-with-upper-bounds" rel="nofollow noreferrer">TypeVars with an upper bound restriction</a>.</p>
<p>That would look roughly like this:</p>
<pre><code>from typing import Type, Optional, TypeVar

# ...snip...

T = TypeVar('T', bound=BaseModel)

def get_record(model: Type[T], id: int) -&gt; Optional[T]:
    # ...
</code></pre>
</div>
<span class="comment-copy">I think you would need to annotate the variables <code>myApple</code> and <code>myOrange</code>.</span>
<span class="comment-copy">That's exactly what I need. Thanks a lot! :-)</span>
