<div class="post-text" itemprop="text">
<p>I am trying to process the results of this API in Python:</p>
<p><a href="https://www.cryptopia.co.nz/api/GetMarkets/BTC/12" rel="nofollow noreferrer">https://www.cryptopia.co.nz/api/GetMarkets/BTC/12</a></p>
<p>When I assign the results of the API call to a variable I cannot seem to iterate over it or even call objects in it. When I do something like <code>response[0]</code> I'm only getting single characters. I need to be able to get to the "Data" object in there and iterate over it.</p>
<p>I'm stuck so any help would be greatly appreciated.</p>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>I am not sure how you are retrieving the data from the API, but I would reccomend using the Python <a href="http://docs.python-requests.org/en/master/" rel="nofollow noreferrer"><code>requests</code></a> library.</p>
<p>You would send off the request:</p>
<pre><code>import requests
r = requests.get('https://www.cryptopia.co.nz/api/GetMarkets/BTC/12')
</code></pre>
<p>From there you want JSON data back, so convert the data to JSON like so:</p>
<p><code>data = r.json()</code></p>
<p>Then you can just parse the attributes you want from the API. If you wanted the <code>label</code> attribute for the 1st object in the <code>Data</code> array, you would do something like this:</p>
<pre><code>&gt;&gt;&gt; data['Data'][0]['Label']
&gt;&gt;&gt; '$$$/BTC'
</code></pre>
<p>Hope that helps</p>
</div>
<div class="post-text" itemprop="text">
<p>You haven't provided much detail, however, you probably need to decode the JSON response. Use the <a href="https://docs.python.org/3/library/json.html#module-json" rel="nofollow noreferrer"><code>json</code></a> module for that. Something like this should help, but it depends on what the actual response is:</p>
<pre><code>import json

data = json.loads(response)
print(data['Data'][0])
</code></pre>
<p><strong>Output</strong></p>
<pre>
{'TradePairId': 1261, 'Label': '$$$/BTC', 'AskPrice': 7.5e-07, 'BidPrice': 7.2e-07, 'Low': 7.1e-07, 'High': 7.5e-07, 'Volume': 92820.5864058, 'LastPrice': 7.3e-07, 'BuyVolume': 52598028.48552139, 'SellVolume': 7797125.25042393, 'Change': 2.82, 'Open': 7.1e-07, 'Close': 7.3e-07, 'BaseVolume': 0.06782329, 'BuyBaseVolume': 1.87597261, 'SellBaseVolume': 173448022.5864104}
</pre>
<p>In this case <code>json.loads()</code> returns a dictionary, and the actual data is the value of the <code>Data</code> key which is a list of dictionaries. To iterate over the dictionaries:</p>
<pre><code>for d in data['Data']:
    print(d)
</code></pre>
<p>If you are using the <code>requests</code> module to retrieve the data you can simply use the <code>json</code> method of the response to access the decoded data.</p>
</div>
<span class="comment-copy">I've never used Python but it seems like you're accessing the string instead of a JSON object, have you checked the Python docs, <a href="https://docs.python.org/2/library/json.html" rel="nofollow noreferrer">docs.python.org/2/library/json.html</a>, on decoding JSON responses?</span>
<span class="comment-copy">This worked. I was trying it with json.loads() and it was not working. Using r.json() worked and now I can maneuver around. Thanks for the help!</span>
<span class="comment-copy">@Sequenzia okay great, glad it worked out.</span>
<span class="comment-copy">@Sequenzia: You should call <code>json.loads()</code> on the response content, not the response object. <code>json.loads(r.content)</code> should also work, but <code>r.json()</code> is clearly better.</span>
<span class="comment-copy">Thanks @mhawke that makes sense also.</span>
