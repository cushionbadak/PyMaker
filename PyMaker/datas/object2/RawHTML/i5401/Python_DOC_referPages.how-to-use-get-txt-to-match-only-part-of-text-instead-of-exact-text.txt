<div class="post-text" itemprop="text">
<p>I'm using <code>partnumber = get_txt(soup, 'Part Number')</code> however occasionally <strong>Part Number</strong> is in the plural <strong>Part Numbers</strong> which breaks my script. How can I get around this so that if the text <strong>Part Number</strong> is matched then I can <code>get_txt</code> ?</p>
<pre><code>headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36'}
r = requests.get(urldet, headers=headers)
soup = BeautifulSoup(r.content, "lxml")
partnumber = get_txt(soup, 'Part Number')
</code></pre>
<p>and here is the error when</p>
<pre><code>Traceback (most recent call last):
  in get_txt
    key_tag = soup.find('span', text=key).parent
AttributeError: 'NoneType' object has no attribute 'parent'
</code></pre>
<p>It makes sense that I get an error since the is no text <strong>Part number</strong> but instead, the text <strong>Part numbers</strong> so to solve it I manually change the text I'm looking for but I would like to avoid having to do it manually.</p>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<p>How to use get_txt to match only part of text instead of exact text</p>
</blockquote>
<p>The answer to this is <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">regex</a>.  </p>
<p>You can add regex search for text in your <code>get_txt</code> function.  </p>
<pre><code>def get_txt(soup, key):
    key_tag = soup.find('span', text=re.compile(key)).parent
    return key_tag.find_all('span')[1].text
</code></pre>
<p>You can see that I've changed <code>text=key</code> to <code>text=re.compile(key)</code>. This will match <code>Part Number</code> with <code>Part Numbers</code> or any other text that has <code>Part Number</code> in it.  </p>
</div>
<span class="comment-copy">what is the value of <code>soup</code>?</span>
<span class="comment-copy">the value of soup is an html page</span>
<span class="comment-copy">maybe no "Part Numbers" exist in <code>soup</code></span>
<span class="comment-copy">What is get_txt? What error happens when your script breaks?</span>
<span class="comment-copy">You need to add the <code>get_txt</code> function in the question.</span>
<span class="comment-copy">For others who are wondering where that <code>get_txt</code> function came from, have a look at <a href="https://stackoverflow.com/questions/48200341/search-for-text-inside-a-tag-using-beautifulsoup-and-returning-the-text-in-the-t">this question</a>. I guess this is a continuation of <a href="https://stackoverflow.com/a/48200476/7832176">my answer</a> to that question.</span>
<span class="comment-copy">Also, don't forget to <code>import re</code> for using regex.</span>
