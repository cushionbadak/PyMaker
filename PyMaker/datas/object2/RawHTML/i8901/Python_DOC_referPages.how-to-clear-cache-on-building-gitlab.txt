<div class="post-text" itemprop="text">
<p>Gitlab can't clean my cache on building.
How to fix this problem?</p>
<p>Executor: shell   </p>
<pre><code>Fetching changes...
warning: failed to remove config/__pycache__/__init__.cpython-36.pyc
warning: failed to remove config/settings/__pycache__/local.cpython-36.pyc
warning: failed to remove config/settings/__pycache__/__init__.cpython-36.pyc
warning: failed to remove config/settings/__pycache__/common.cpython-36.pyc
warning: failed to remove config/settings/__pycache__/test.cpython-36.pyc
warning: failed to remove docs/__pycache__/__init__.cpython-36.pyc
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Luckily I was having the exact same issue as you (I think).</p>
<p><strong>A little background:</strong></p>
<blockquote>
<p>I was using gitlab ci to build using a remote runner (shell) that
  would build a docker image and then run some tests.</p>
</blockquote>
<p><strong>Cause:</strong></p>
<blockquote>
<p>I was mounting a local directory inside the container by passing the -v flag to <code>docker run</code> (there are other ways to do this with compose yml for example).</p>
<p>Because the docker container runs as root the generated __pycache__ directories and files are owned by root on the local filesystem; This means that docker-runner does not have permission to delete them on the next build.</p>
</blockquote>
<p><strong>The solution:</strong></p>
<blockquote>
<p><strong>Remove the mount and copy the files instead.</strong></p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>I workaround by not let python create <code>*.pyc</code> files</p>
<p><a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONDONTWRITEBYTECODE" rel="nofollow noreferrer">https://docs.python.org/3/using/cmdline.html#envvar-PYTHONDONTWRITEBYTECODE</a></p>
</div>
<span class="comment-copy">You need to give more details on your setup. You tagged it with <code>docker</code> and <code>docker-compose</code> - is there anything running with Docker?</span>
<span class="comment-copy">Project based on <a href="https://github.com/pydanny/cookiecutter-django" rel="nofollow noreferrer">github.com/pydanny/cookiecutter-django</a></span>
<span class="comment-copy">I am facing this exact issue, looking into it now...</span>
