<div class="post-text" itemprop="text">
<p>I'm working with django 1.6.5 and python 2.7.
I have import feature in my app and I get error:</p>
<pre><code>OSError: [Errno 18] Invalid cross-device link
</code></pre>
<p>I have problem with this part of code:</p>
<pre><code>os.rename(db_temp, settings.DATABASES['bookmat']['NAME'])
</code></pre>
<p>code in settings:</p>
<pre><code>'bookmat': {
    'ENGINE': 'django.db.backends.sqlite3',
    'NAME': '/my_projects/book/db/bookmat.sqlite3',
},
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><code>os.rename</code> only works if source and destination are on the same file system. You should use <code>shutil.move</code> instead.</p>
</div>
<div class="post-text" itemprop="text">
<p>I think rename only works when the source and target names are on the same file system. You probably have different mounts. Otherwise you get that error. You can implement the same effect with a copy and a delete.</p>
<p>Hope it helps</p>
</div>
<span class="comment-copy">What is db_temp value</span>
<span class="comment-copy"><code>db_temp = settings.DATABASES[db_temp_name]['NAME']</code> @iklinac</span>
<span class="comment-copy">initial db_temp value as string</span>
<span class="comment-copy">I stumbled over this when I tried to move something from folder within a Docker container to a volume.</span>
<span class="comment-copy">My version if shutil.move() is actually implemented in terms of os.rename(). Is there another alternative to use?</span>
<span class="comment-copy">I'm using <code>shutil.move</code> and still getting this error</span>
<span class="comment-copy">As Kilian says <code>shutil.move()</code> with different file systems gives the same error as <code>os.rename()</code>. Easiest to use <code>shutil.copy()</code> and <code>os.remove()</code> instead.</span>
<span class="comment-copy"><code>shutil.move</code> in Python 3 handles the foreign filesystem correctly by using copy and delete, per <a href="https://docs.python.org/3/library/shutil.html#shutil.move" rel="nofollow noreferrer">documentation</a>.</span>
<span class="comment-copy">@kravietz it doesn't handle it properly in my case, at least on python3 with a regular ext4 and a folder mounted with <code>rclone mount</code>.</span>
