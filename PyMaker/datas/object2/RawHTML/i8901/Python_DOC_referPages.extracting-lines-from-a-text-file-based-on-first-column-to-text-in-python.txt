<div class="post-text" itemprop="text">
<p>I'm using Windows 7.0 and have Python 3.4 installed. I'm very new to Python. Here is my list. It is a price file. I have thousands of these, but have been trying to get it to work on just one for now.</p>
<p>I am trying to extract only the lines that begin with hfus,ious, or oaus.</p>
<pre><code>caus    123456  99.872300000        2
gous    1234567 99.364200000        2
oaus    891011  97.224300000        2
ious    121314  96.172800000        2
hfus    151617  99081.00            2
hfus    181920  1.000000000         2
</code></pre>
<p>Here is the desired result.</p>
<pre><code>oaus    891011  97.224300000        2
ious    121314  96.172800000        2
hfus    151617  99081.00            2
hfus    181920  1.000000000         2
</code></pre>
<p>Here is what I wrote so far but it's not working. I also would like if it would loop through each file and overwrite the existing file with the truncated list saving it with it's original name. The file 033117.txt represents a date. Every file is saved as mmddyy.txt. Getting it to work on all files would be ideal, but for now if I can get it to work on even one file that'd be nice.</p>
<pre><code>inFile = open("033117.txt")
outFile = open("result.txt", "w")
buffer = []
keepCurrentSet = True
for line in inFile:
    buffer.append(line)
    if line.startswith("hfus"):
        if line.startswith("oaus"):
            if line.startswith("ious"):
        if keepCurrentSet:
            outFile.write("".join(buffer))
        keepCurrentSet = True
        buffer = []
    elif line.startswith(""):
        keepCurrentSet = False
inFile.close()
outFile.close()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I suggest to use the <a href="https://docs.python.org/3.4/reference/compound_stmts.html#with" rel="nofollow noreferrer"><code>with</code></a> statement when you open file objects so you do not need to explicitly close the file, it will be closed automatically for you when the indented block is exited.<br/>
Reading and filtering from a file and write the results to another file (not overwriting the same file) could be accomplished by using a <a href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions" rel="nofollow noreferrer">list comprehension</a> and selecting the appropriate lines that gives a more concise way to accomplish the task:</p>
<pre><code>with open("033117.txt", 'rt') as inputf, open("result.txt", 'wt') as outputf:    
    lines_to_write = [line for line in inputf if line.split()[0] in ("hfus", "ious", "oaus")]
    outputf.writelines(lines_to_write)
</code></pre>
<hr/>
<p>If you want to overwrite the file instead of opening a new additional file and write to it, do the following:</p>
<pre><code>with open('033117.txt', 'r+') as the_file: 
    lines_to_write = [line for line in the_file if line.split()[0] in ("hfus", "ious", "oaus")] 
    the_file.seek(0)  # just to be sure you start from the beginning (but it should without this...)  
    the_file.writelines(lines_to_write)
    the_file.truncate()
</code></pre>
<p>See <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer">open, modes</a> for open modes.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>with open('033117.txt') as inFile, open('result.txt', 'w') as outFile:
    for line in inFile:
        if line.split()[0] in ('hfus', 'ious', 'oaus'):
            outFile.write(line)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Try this query:</p>
<pre><code>inFile = open("033117.txt")
outFile = open("result.txt", "w")
for line in inFile.readlines():
    if line.startswith("hfus"):
        outFile.write(line)
    if line.startswith("oaus"):
        outFile.write(line)
    if line.startswith("ious"):
        outFile.write(line)
inFile.close()
outFile.close()
</code></pre>
<p>Even am new to python so there might be many better solutions but this should work. </p>
</div>
<div class="post-text" itemprop="text">
<p>For this kind of data processing I suggest using <code>pandas</code></p>
<pre><code>import pandas as pd
df = pd.read_csv("033117.txt", header=None, names=['foo','bar','foobar','barfoo'])
df = df[df.foo.isin(['hfus','oaus'])]
df.to_csv("result.txt")
</code></pre>
<p>Of course, you want to use more meaningful header values ;-)</p>
</div>
<div class="post-text" itemprop="text">
<p>Try using a <code>with</code> statement to open your file instead of <code>outFile = open()</code>. This should help create less errors :)</p>
<pre><code>with open('033117.txt') as inFile, open('result.txt', 'w') as outFile:
    for line in inFile:
        if line.split()[0] in ('hfus', 'ious', 'oaus'):
            outFile.write(line)
</code></pre>
</div>
<span class="comment-copy">in the loop, try <code>beginning_line = line.split()[0]</code> and then you can do the check with <code>if 'oaus' in beginning_line</code>.... Plus I suggest to open the files using <code>with</code></span>
<span class="comment-copy"><code>if line.split()[0] in ('hfus', 'ious', 'oaus'): #do stuff</code></span>
<span class="comment-copy">Your first example is working, but the overwrite examles are not.         File "read.py", line 3, in &lt;module&gt;     begin_line = line.split()[0] NameError: name 'line' is not defined PS I:\py&gt;</span>
<span class="comment-copy">Fixed. The list comprehension examples work now. In particular I tested the second snippet to overwrite the file and it gives me the output file you expect. I suggest to use those as they're are concise.</span>
<span class="comment-copy">I'm having trouble figuring out which snippet you're talking about. I tried them all and am getting different errors. I think I'm not piecing it all together if it's not in one block.</span>
<span class="comment-copy">Hope it's clear now, I removed some stuff. I'm able to run with no problems. The first snippet is for opening a file for reading, selecting appropriate lines and writing to a different output file. The second snippet is if you want to overwrite the same file with the selected lines.</span>
<span class="comment-copy">I always get this error with the second one NameError: name 'file' is not defined</span>
<span class="comment-copy">This does work, but my real goal is to overwrite the original file.</span>
