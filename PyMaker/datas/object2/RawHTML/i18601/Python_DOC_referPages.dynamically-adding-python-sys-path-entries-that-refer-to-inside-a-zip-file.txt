<div class="post-text" itemprop="text">
<p>I have a Python program which adds something dynamically to <code>sys.path</code>. It works fine, but I'd like to distribute my Python program as a .zip file where <code>__main__.py</code> runs. </p>
<p>Can I add entries to <code>sys.path</code> from the zip file? After searching around a bit, I found the <a href="http://docs.python.org/2/library/pkgutil.html" rel="nofollow"><code>pkgutil</code> documentation</a> but I can't figure out what will work.</p>
<p><strong>note:</strong> the stuff I need to add in <code>sys.path</code> includes <code>.pyd</code> and <code>.dll</code> files for Windows.</p>
</div>
<div class="post-text" itemprop="text">
<p>I'm not entirely sure I understand your question, but I'll have a crack at answering it anyway ...</p>
<p>Unfortunately, while you can import from a zipfile by adding it to <code>sys.path</code>:</p>
<blockquote>
<p><a href="http://docs.python.org/3/library/sys.html#sys.path" rel="nofollow"><code>sys.path</code></a> contains a list of strings providing search locations for
  modules and packages. It is initialized from the PYTHONPATH
  environment variable and various other installation- and
  implementation-specific defaults. <strong>Entries in <a href="http://docs.python.org/3/library/sys.html#sys.path" rel="nofollow"><code>sys.path</code></a> can name
  directories on the file system, zip files,</strong> and potentially other
  “locations” (see the <a href="http://docs.python.org/3/library/site.html#module-site" rel="nofollow"><code>site</code></a> module) that should be searched for modules,
  such as URLs, or database queries. Only strings and bytes should be
  present on <a href="http://docs.python.org/3/library/sys.html#sys.path" rel="nofollow"><code>sys.path</code></a>; all other data types are ignored. The encoding of
  bytes entries is determined by the individual <a href="http://docs.python.org/3/glossary.html#term-path-entry-finder" rel="nofollow"><em>path entry finders</em></a>.</p>
<p><em>source: <a href="http://docs.python.org/3/reference/import.html#path-entry-finders" rel="nofollow">http://docs.python.org/3/reference/import.html#path-entry-finders</a></em></p>
</blockquote>
<p>... that doesn't extend to <code>.pyd</code> and <code>.dll</code> files:</p>
<blockquote>
<p>Any files may be present in the ZIP archive, but only files <code>.py</code> and
  <code>.py[co]</code> are available for import. <strong>ZIP import of dynamic modules (<code>.pyd</code>,
  <code>.so</code>) is disallowed.</strong></p>
<p><em>source: <a href="http://docs.python.org/3/library/zipimport.html" rel="nofollow">http://docs.python.org/3/library/zipimport.html</a></em></p>
</blockquote>
<p>I'm not aware of any way of working around this restriction.</p>
</div>
<span class="comment-copy">you cant execute a zip file... I dont understand the question I think</span>
<span class="comment-copy">I thought you don't know what you're talking about until I saw your reputation.</span>
<span class="comment-copy">You <i>can</i> execute a zip file: <a href="http://bugs.python.org/issue1739468" rel="nofollow noreferrer">bugs.python.org/issue1739468</a></span>
<span class="comment-copy">is there a good workaround? e.g. if I unzip the .pyd and .dll files somewhere and add them to sys.path, where is a good place to do this? I don't want to modify the default Python installation, and if I run the .zip file 100 times I don't want it to generate 100 temporary directories.</span>
<span class="comment-copy">@JasonS I've never developed specifically for Windows (nor am I a Windows user), but it looks like <a href="http://ginstrom.com/code/winpaths.html" rel="nofollow noreferrer">winpaths</a> might be helpful - presumably you'd want one of the "App Data" variants. Found <a href="http://stackoverflow.com/q/626796/1014938">here</a>, by the way.</span>
