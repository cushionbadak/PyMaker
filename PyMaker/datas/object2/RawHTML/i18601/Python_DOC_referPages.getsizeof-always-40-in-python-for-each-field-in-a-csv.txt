<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/17574076/what-is-the-difference-between-len-and-sys-getsizeof-methods-in-python">What is the difference between len() and sys.getsizeof() methods in python?</a>
<span class="question-originals-answer-count">
                    1 answer
                </span>
</li>
</ul>
</div>
<p>So I am reading a csv file row by row. Inside each row I go field by field and try to get the size of each field in bytes suing .getsizeof. The code is below :</p>
<pre><code>for row in reader:
        temp1 = []
        temp2 = []
        if type(row[0]) is IntType:
            feed = feed + 1
            print feed
            # Total number of columns in a feed should be 61.
            # 61st column account for the last , after 60th column, it would always be blank.
            #if len(row) == 61:
            # Total number of columns in a feed should be 61
            for field in row:
                if type(field) == 'int':
                    field.encode('ascii', 'ignore')
                    temp1.append(sys.getsizeof(field))
                    temp2.append(str(field))

                else:
                    field = [unicode(field)]
                    #field = field.encode('ascii', 'ignore')
                    temp1.append(sys.getsizeof(field))
                    temp2.append(str(field))
</code></pre>
<p>For some reason the size foe every field accross all rows is coming out 40. Any idea why ? </p>
</div>
<div class="post-text" itemprop="text">
<p>First, this:</p>
<pre><code>field.encode('ascii', 'ignore')
</code></pre>
<p>… doesn't actually do anything useful. It doesn't change <code>field</code>; it just returns a new <code>bytes</code> holding an ASCII-encoded version of your <code>field</code>, which you don't store anywhere.</p>
<p>On top of that, you only call it when your <code>field</code> is an <code>int</code>, in which case you'll get an <code>AttributeError</code>, because <code>int</code> objects don't have an <code>encode</code> method.</p>
<p>So, clearly, you're only hitting the <code>else</code> case. And what does that do?</p>
<p>Well, it makes a 1-element list. You're not asking the size of that element, but the size of the list. So, they'll all be the same size.</p>
<p>As <a href="http://docs.python.org/3/library/sys.html#sys.getsizeof" rel="nofollow">the docs</a> explain:</p>
<blockquote>
<p>Only the memory consumption directly attributed to the object is accounted for, not the memory consumption of objects it refers to.</p>
</blockquote>
<p>So, what if you want to know the size of the list, plus all 1 of its elements? A couple paragraphs down there's a general-purpose solution:</p>
<blockquote>
<p>See <a href="http://code.activestate.com/recipes/577504" rel="nofollow">recursive sizeof recipe</a> for an example of using <code>getsizeof()</code> recursively to find the size of containers and all their contents.</p>
</blockquote>
<p>However, in your case, there's a much simpler solution: <code>sys.getsizeof(field) + sys.getsizeof(field[0])</code> will do.</p>
<p>But note that this may not be what you wanted anyway. For example, if you have 1000 rows, and 900 of them have the value <code>'0'</code>, you're going to count <code>u'0'</code> 900 times… but really, you're probably only actually storing one copy of <code>u'0'</code>, with 900 references to it.</p>
</div>
<div class="post-text" itemprop="text">
<p>It is probably because you are only getting the size of the reference instead of the size of the actually string field.</p>
</div>
<span class="comment-copy">You misunderstand what <code>sys.getsizeof()</code> <i>does</i>.</span>
<span class="comment-copy"><code>sys.getsizeof</code> is shallow; it doesn't look into a list's contents, or an object's properties, etc, since it's hard to tell what's "part of the object" and what's just a reference to something that shouldn't be considered part of the object.</span>
<span class="comment-copy">This smells like an <a href="http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem">XY question</a>. Why do you want the sizes? What do you expect them to be, and what are you hoping to use that information for?</span>
