<div class="post-text" itemprop="text">
<p>Tried to find an answer to this question but couldn't find it anywhere.</p>
<p>I'm working my way through this tutorial: <a href="https://docs.python.org/3/howto/argparse.html" rel="nofollow">https://docs.python.org/3/howto/argparse.html</a> and I understand the differences between positional arguments and optional arguments, but what I don't understand is how does argparse decide what argument is positional and what argument is optional?</p>
<p>So, for example, from the tutorial I linked to from above: </p>
<pre><code>import argparse
parser = argparse.ArgumentParser()
parser.add_argument("square", type=int,
                    help="display a square of a given number")
parser.add_argument("-v", "--verbosity", type=int, choices=[0, 1, 2],
                    help="increase output verbosity")
args = parser.parse_args()
answer = args.square**2
if args.verbosity == 2:
    print("the square of {} equals {}".format(args.square, answer))
elif args.verbosity == 1:
    print("{}^2 == {}".format(args.square, answer))
else:
    print(answer)
</code></pre>
<p>Why is the "square" argument positional and the "--verbosity" argument optional?</p>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://docs.python.org/3/library/argparse.html#prefix-chars" rel="nofollow"><code>prefix_chars</code></a> (defaulting to <code>-</code>), define the argument as a <em>flag</em> and thus optional.  If the <code>prefix_chars</code> are not present, it's determined to be positional.</p>
<p>The <code>prefix_chars</code> can be set on parser instantiation, <code>parser = argparse.ArgumentParser(prog='PROG', prefix_chars='-+')</code></p>
<p>Refer to '<a href="https://docs.python.org/3/library/argparse.html#name-or-flags" rel="nofollow">name or flags</a>' in the documentation.</p>
<p><a href="https://docs.python.org/3/library/argparse.html#name-or-flags" rel="nofollow">https://docs.python.org/3/library/argparse.html#name-or-flags</a></p>
</div>
<span class="comment-copy">...and the <code>reason</code> that <code>-</code> and <code>--</code> indicate optional args is that they're the default <a href="https://docs.python.org/3/library/argparse.html#prefix-chars" rel="nofollow noreferrer">prefix chars</a></span>
<span class="comment-copy">Thanks!  I didn't realize that was configurable.</span>
<span class="comment-copy">Literally realized this soon after I posted the question. At least if anyone else has the same brainfart they'll be able to find an answer.</span>
<span class="comment-copy">It should be noted that calling them optional, while convention, is a little misleading as 'positional' arguments can be optional with the <code>nargs=?</code></span>
<span class="comment-copy">Another difference is that 'positional' arguments must given in the order they are defined.  Even if <code>nargs=?</code> order matters.  'optionals' can be in any order because their presence is indicated by the flag string.  'optionals' may even be repeated, or omitted (though what happens in those cases depends on the <code>action</code> and <code>required</code> parameters).</span>
