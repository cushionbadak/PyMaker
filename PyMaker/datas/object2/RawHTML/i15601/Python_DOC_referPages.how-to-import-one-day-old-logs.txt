<div class="post-text" itemprop="text">
<p>I am new to Python and need some help in being able to import done day old logs.  Below is the script I have come up with, but not sure if it is working or if there is a better way to do this.</p>
<pre><code>def fileCreation(path):  
    now = time.time()  
    oneday_ago = now - (24*60*60) ## seconds in 1 day  
    if fileCreation &lt; oneday_ago:  
        print f  
        getAuditRecords(f)  
</code></pre>
<p>I have a script that does import the whole database from mid June 2014 but only need to get day old logs.</p>
<p>Here is a sample of the logs I am trying to import</p>
<blockquote>
<p>/mnt/hcp1/R1P/R1P_ora_982_2.xml.201409070400<br/>
  /mnt/hcp1/R1P/R1P_ora_20_1.xml.201409070400<br/>
  /mnt/hcp1/R1P/R1P_ora_29962_1.xml.201409070400<br/>
  /mnt/hcp1/R1P/R1P_ora_15593_2.xml.201409070400<br/>
  /mnt/hcp1/R1P/R1P_ora_9946_1.xml.201409070400<br/>
  /mnt/hcp1/R1P/R1P_ora_10746_1.xml.201409070400<br/>
  /mnt/hcp1/R1P/R1P_ora_6508_1.xml.201409070400<br/>
  /mnt/hcp1/R1P/R1P_ora_17340_2.xml.201409070400<br/>
  /mnt/hcp1/SCC/SCC_ora_18881_2.xml.201407090400  </p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>In order to compare the file creation time to one day ago, you need to actually <em>get</em> the file creation time. Your code is using <code>fileCreation</code>, the function; it doesn't mean anything useful to ask whether that function is less than some time.</p>
<hr/>
<p>Unfortunately, "file creation time" is not a portable concept. If you really want that, you need to write different code for different platforms, which I won't explain.</p>
<p>Usually, you're happy with "file modification time". This is set when the file is created, and updated only when you overwrite or append to the file. You can use <a href="https://docs.python.org/3/library/os.path.html#os.path.getmtime" rel="nofollow"><code>getmtime</code></a> to read this. So:</p>
<pre><code>def fileCreation(path):
    now = time.time()
    oneday_ago = now - (24*60*60) ## seconds in 1 day
    mtime = os.path.getmtime(path)
    if mtime &lt; oneday_ago:
        print f
        getAuditRecords(f)
</code></pre>
<hr/>
<p>However, it looks like there's a timestamp attached to each filename. If <code>/mnt/hcp1/R1P/R1P_ora_982_2.xml.201409070400</code> means that the file was created on 7 September 2014 at 04:00 (and if the timezones, etc. aren't an issue), you may want to consider parsing those strings instead of <code>stat</code>ting the file. </p>
<p>And once you're parsing date strings, you might as well use the simpler and higher-level <a href="https://docs.python.org/3/library/datetime.html" rel="nofollow"><code>datetime</code></a> library instead of the lower-level <code>time</code>. (You could do this with the previous version too, but since <code>getmtime</code> returns a <code>time</code>-style timestamp, you'd have to convert it manually to use it as a <code>datetime</code>, so there's less advantage.)</p>
<p>So:</p>
<pre><code>def fileCreation(path):
    now = datetime.datetime.now()
    oneday_ago = now - datetime.timedelta(days=1)
    fileext = os.path.splitext(path)[1][1:]
    filetime = datetime.datetime.strptime(fileext, '%Y%m%d%H%M')
    if filetime &lt; oneday_ago:
        print f
        getAuditRecords(f)
</code></pre>
<hr/>
<p>(Also, I'm not sure what that <code>f</code> is. Maybe you meant <code>path</code>?)</p>
</div>
<div class="post-text" itemprop="text">
<p>Regarding the "two days ago" part, you should use <code>datetime.datetime</code> and <code>datetime.timedelta</code></p>
<p>E.g.</p>
<pre><code>import datetime

now = datetime.datetime.now()
two_days = datetime.timedelta(days=2)
two_days_ago = now - two_days
</code></pre>
</div>
<span class="comment-copy">We need to see a sample of your log data</span>
<span class="comment-copy">... and the definition of <code>f</code>.</span>
<span class="comment-copy">First, you're comparing <code>fileCreation</code>, which is your function object, to the time two days ago. That obviously isn't going to work. You have to compare the file creation time, not your function object.</span>
<span class="comment-copy">Second, looking for files created before than now - 2 days is obviously not going to find one-day-old logs.</span>
<span class="comment-copy">@abarnert  can ask what you mean with the comparing comment? thanks</span>
