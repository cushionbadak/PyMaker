<div class="post-text" itemprop="text">
<p>I am supposed to analyze shakespeare text using NLTK ( sentiment analysis) using python 3.4. But I get this error message:  </p>
<pre><code>**Traceback (most recent call last):
  File "C:\Users\HAMIMOUNE\AppData\Roaming\nltk_data\shakespeare.py", line 8, in &lt;module&gt;
    [ line.split('\t') for line in open("AFINN-96.txt") ]))
TypeError: &lt;lambda&gt;() missing 1 required positional argument: 'v'**
</code></pre>
<p>here is my code: </p>
<pre><code>from nltk.corpus import shakespeare
from collections import defaultdict
import json
hamlet = shakespeare.xml('hamlet.xml')
speeches = hamlet.findall('.//SPEECH')
prevSpeaker =  speeches[0].find('SPEAKER').text
afinn = dict(map(lambda k,v: (k,int(v)), 
                [ line.split('\t') for line in open("AFINN-96.txt") ])) 

dict = defaultdict(lambda: defaultdict(lambda: 0))
for speech in speeches:
    speaker = speech.find('SPEAKER').text
    lines = "\n".join(line.text for line in speech.findall('LINE') if line.text is not None)
    sentiment = sum(map(lambda word: afinn.get(word, 0), lines.lower().split()))
    dict[speaker][prevSpeaker] += sentiment
    prevSpeaker = speaker
print(json.dumps(dict, sort_keys=True, indent=4))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map</code></a> calls the function with an argument (a list of strings in this case). You need to adjust the <code>lambda</code> to take a parameter:</p>
<pre><code>afinn = dict(map(lambda item: (item[0], int(item[1])), 
                 [ line.split('\t') for line in open("AFINN-96.txt") ])) 
</code></pre>
<p>Alternative using dict-comprehension:</p>
<pre><code>afinn = {k: int(v) for k, v in
         [line.split('\t') for line in open("AFINN-96.txt")]}
</code></pre>
<p>BTW, don't use <code>dict</code> as a variable name. Overwriting it prevent you to use a builtin function/type <a href="https://docs.python.org/2/library/functions.html#func-dict" rel="nofollow"><code>dict</code></a>.</p>
</div>
