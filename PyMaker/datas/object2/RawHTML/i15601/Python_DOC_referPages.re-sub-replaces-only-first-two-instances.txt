<div class="post-text" itemprop="text">
<p>I have found this interesting issue with re.sub:</p>
<pre><code>import re

s = "This: is: a: string:"
print re.sub(r'\:', r'_', s, re.IGNORECASE) 

&gt;&gt;&gt;&gt; This_ is_ a: string:
</code></pre>
<p>Notice how only the first two instances were replaced. It seems that adding the [implicit] argument name for flags fixes the issue. </p>
<pre><code>import re

s = "This: is: a: string:"
print re.sub(r'\:', r'_', s, flags=re.IGNORECASE) 

&gt;&gt;&gt;&gt; This_ is_ a_ string_
</code></pre>
<p>I was wondering if anyone could explain it or it is in fact a bug.</p>
<p>I've encountered this issue before with the missing argument name <code>string</code> but never for <code>flags</code> and with string it usually blows up.</p>
</div>
<div class="post-text" itemprop="text">
<p>The fourth argument to <a href="https://docs.python.org/3/library/re.html#re.sub" rel="nofollow"><code>re.sub</code></a> is not <code>flags</code> but <code>count</code>:</p>
<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; help(re.sub)
Help on function sub in module re:

sub(pattern, repl, string, count=0, flags=0)
    Return the string obtained by replacing the leftmost
    non-overlapping occurrences of the pattern in string by the
    replacement repl.  repl can be either a string or a callable;
    if a string, backslash escapes in it are processed.  If it is
    a callable, it's passed the match object and must return
    a replacement string to be used.

&gt;&gt;&gt;
</code></pre>
<p>This means that you need to explicitly do <code>flags=re.IGNORECASE</code> or otherwise <code>re.IGNORECASE</code> will be treated as an argument to <code>count</code>.  </p>
<p>Additionally, the <code>re.IGNORECASE</code> flag is equal to <code>2</code>:</p>
<pre><code>&gt;&gt;&gt; re.IGNORECASE
2
&gt;&gt;&gt;
</code></pre>
<p>So, by doing <code>count=re.IGNORECASE</code> in your first example, you told <code>re.sub</code> to only replace <code>2</code> occurrences of <code>:</code> in the string, which it did.</p>
</div>
<span class="comment-copy">thank you, i was convinced flags was the fourth arg</span>
