<div class="post-text" itemprop="text">
<p>I need help to exit a test without getting error. I have this code:</p>
<pre><code>tabla = self.driver.find_element_by_css_selector(".tablaSolicitudes")
for estado in tabla.find_elements_by_tag_name("td"):
    e = estado.text
if e.find("Multiadhesion") != -1:
    print("La solicitud " + solicitudes[i] + " se encuentra con MultiAdhesion. Finaliza el Test.")
    sys.exit()
</code></pre>
<p>If that condition is true, the test should end. The point is that, having it like that, i get this error:</p>
<pre><code>sys.exit()
SystemExit

----------------------
Ran 1 test in 139.733s

FAILED (errors=1)
</code></pre>
<p>But the test is OK, so, how can I make a proper "test exit" so that i donÂ´t get this error?.</p>
<p>Thank you very much!</p>
</div>
<div class="post-text" itemprop="text">
<p><code>sys.exit()</code> raises a <code>SystemExit</code> exception, which you can test with:</p>
<pre><code>with self.assertRaises(SystemExit):
    your_method()
</code></pre>
<p>Now your test should succeed.</p>
</div>
<div class="post-text" itemprop="text">
<p>I'm not sure if <code>sys</code> defined higher up in your code but that could be why the test is having issues. </p>
<p>To close a Selenium browser test (which I believe you are using, inferring from the <code>selenium-webdriver</code> tag), normally a <code>.close()</code> or <code>.quit()</code> tag is used. Assuming <code>sys</code> is the browser, at the end of the your <code>if</code> statement, you would use <code>sys.close</code> or <code>sys.quit</code> to close the browser.  </p>
<blockquote>
<p><code>.close()</code> will close a tab within a testing browser. <code>.quit()</code> will close the browser window. </p>
</blockquote>
<p>If you need more help, check out <a href="http://selenium-python.readthedocs.io/getting-started.html" rel="nofollow noreferrer" title="Selenium Python Bindings Documentation">Selenium Python Bindings Documentation</a>. It's always been a big help for me when writing python/selenium tests. </p>
</div>
<div class="post-text" itemprop="text">
<p>If you really want to stop the tests, then one of the ways is using force stop <code>-f</code> available in <code>unittest</code></p>
<blockquote>
<p>-f, --fail: fast Stop the test run on the first error or failure.</p>
</blockquote>
<p>try running the module using -f option:</p>
<pre><code>python sample.py -f
</code></pre>
<p>But, it won't mark the test as PASS and you should remove <code>sys.exit()</code> from <code>try..except...</code> block</p>
<p>If you have control on tests to run, then you can do as follows:</p>
<ol>
<li>set <code>shouldStop = True</code> in the method you want to exit (refer <a href="https://docs.python.org/3/library/unittest.html#unittest.TestResult.shouldStop" rel="nofollow noreferrer">here</a>.</li>
<li>check after test method runs (each test method returns TestResult object to its caller), whether it is <code>True</code> or <code>False</code>, if it is True, call <code>STOP()</code> method. (refer <a href="https://docs.python.org/3/library/unittest.html#unittest.TestResult.stop" rel="nofollow noreferrer">here</a>)</li>
</ol>
<p><strong>OR</strong></p>
<p>Another option is <code>pytest</code> framework which provides the facility to exit the run. Add the following line wherever you want to exit:</p>
<pre><code>pytest.exit("decided to stop the test run")
</code></pre>
<p>Reference:</p>
<ol>
<li><a href="https://stackoverflow.com/questions/3806695/how-to-stop-all-tests-from-inside-a-test-or-setup-using-unittest">How to stop all tests from inside a test or setUp using unittest?</a></li>
</ol>
<hr/>
<p><strong>Old Answer:</strong></p>
<p>replace <code>sys.exit()</code> as follows:</p>
<pre><code>try:
    sys.exit()
except:
    print "its ok"
</code></pre>
<blockquote>
<p>sys.exit() returns SystemExit exception.</p>
</blockquote>
<p>I assume you are using <code>unittest</code> framework. A test is markd as <code>PASS</code> only when there is no Failure/Exception in the test method. as sys.exit() throwing exception, <code>unittest</code> marks it as <code>FAIL</code>.</p>
<p>What we do is, handle the exception in the test method itself, so no exception/failure is thrown, which makes <code>unittest</code> to mark that test method as <code>PASS</code>.</p>
</div>
<span class="comment-copy">Works, but goes on with the execution, does not end up the test.</span>
<span class="comment-copy">sys only show me the option "exit", not close() or quit(), If I do self.driver.quit() it fails too.</span>
<span class="comment-copy">Doing this, the test tries to go on with the execution (after that code, the method keeps) :/ Thank you very much anyway!</span>
<span class="comment-copy">Awesome! Despite solving it otherway, it's close to be what i was looking for. In tools like UFT, you have that sentence ExitTest and that's it, but webdriver makes it a bit more complex. Thank you all very much for your answers, you really know what you are talking about!</span>
