<div class="post-text" itemprop="text">
<p>I'm trying to write a python script which will traverse through a directory recursively and create files of different sizes inside all of them. So far I have reached here. Well I haven't written any mechanism for creating files with different sizes but I need it. I very well know there's something wrong with the file creation logic I have written. Any help is highly appreciable. </p>
<p><strong>My code:</strong> </p>
<pre><code>#!/usr/bin/python

import os
import uuid

for dirs in os.walk('/home/zarvis'):
  print dirs
  filename = str(uuid.uuid4())
  size = 1000000
  with open(filename, "wb") as f:
    f.write(" " * size)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Don't use a fixed <code>size</code>. Use <a href="https://docs.python.org/3/library/random.html#random.randint" rel="nofollow noreferrer"><code>random.randint</code></a> to create a random size. Use <a href="https://docs.python.org/3/library/os.path.html#os.path.join" rel="nofollow noreferrer"><code>os.path.join</code></a> to build the full path to a file.</p>
<pre><code>import os
import uuid
import random

for dirs in os.walk("/home/zarvis"):
    d = dirs[0]
    filename = str(uuid.uuid4())
    size = random.randint(1, 100)
    with open(os.path.join(d, filename), "w") as f:
        f.write(" " * size)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You are using <code>os.walk</code> in the wrong way: with <code>os.walk</code> you actually do not change the directory where you are working on. Your script will create files only in the directory where you run it. I do not know exactly what <code>uuid.uuid4()</code> does, but probably a solution could be to replace <code>filename</code> with </p>
<pre><code>filename = os.path.join(dirs[0], str(uuid.uuid4())
</code></pre>
<p>You need the <code>[0]</code> because <code>os.walk</code> return a list where the first argument is the current directory where the command is "walking". Try to print the output of <code>os.walk</code> once to get a feeling with it.</p>
<p><strong>EDIT:</strong></p>
<p>Replaced the <code>+</code> with <code>os.path.join</code> after comment from @LutzHorn</p>
</div>
<div class="post-text" itemprop="text">
<p>Try this</p>
<pre><code>import os,uuid,random
for root, dirs, files in os.walk("/home/zarvis/"):
    filename = str(uuid.uuid4())
    size = random.randint(1, 1000000)
    with open(os.path.join(root, filename), "wb") as f:
        f.write(b" " * size)
</code></pre>
</div>
<span class="comment-copy"><a href="http://stackoverflow.com/questions/2257441/random-string-generation-with-upper-case-letters-and-digits-in-python" title="random string generation with upper case letters and digits in python">stackoverflow.com/questions/2257441/â€¦</a> Here you find how to generate random strings. By randomize the range you can create random files. <a href="https://docs.python.org/2/library/random.html" rel="nofollow noreferrer">docs.python.org/2/library/random.html</a> I think you can randomize what you want with this class.</span>
<span class="comment-copy">Randomizing it is working but I'm unable to create files recursively inside all directories. The problem lies there.</span>
<span class="comment-copy">Using my answer to make your working is not really fair... ;)</span>
<span class="comment-copy">The simplest one which worked ! :)</span>
<span class="comment-copy">This is the problem of what stackoverflow is becoming... people do not want to learn... just working code... So... who cares about explanation... this is working just copy/paste... ;)</span>
<span class="comment-copy">@RiccardoPetraglia I completely agree. And even with a language like Python that has excellent documentation and all the tools you need to interactively find out what code does, people are lazy. But has SO ever been any better?</span>
<span class="comment-copy">If you completely agree... then explain the answer instead of simply hunting for reputation.... ;)</span>
<span class="comment-copy"><code>os.path.join</code> should be used instead of <code>+</code>.</span>
<span class="comment-copy">see <a href="https://docs.python.org/3/library/uuid.html#uuid.uuid4" rel="nofollow noreferrer">docs.python.org/3/library/uuid.html#uuid.uuid4</a></span>
<span class="comment-copy">Right on the <code>os.path.join</code></span>
