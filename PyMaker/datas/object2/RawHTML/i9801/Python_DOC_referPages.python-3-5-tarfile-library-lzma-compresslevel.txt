<div class="post-text" itemprop="text">
<p>Is there really no way to set compression level for lzma compression while using the tarfile library? I've read the following:</p>
<blockquote>
<p>For modes 'w:gz', 'r:gz', 'w:bz2', 'r:bz2', 'x:gz', 'x:bz2', tarfile.open() accepts the keyword argument compresslevel (default 9) to specify the compression level of the file.</p>
</blockquote>
<p>So the documentation obviously tells me no since 'w:xs' is missing here.</p>
<p>But in that case, how do you write a tarfile first and then use the lzma library to convert the tarfile to lzma? All of which must be done using disk storage (files are way too big to store it all in memory, we're talking 2-4gb tarfiles).</p>
</div>
<div class="post-text" itemprop="text">
<p>For <code>lzma</code>, the option is called <code>preset</code>, as that's the name used in the <a href="https://docs.python.org/3/library/lzma.html#lzma.LZMACompressor" rel="nofollow noreferrer"><code>LZMACompressor</code> class</a>. Set it to an integer between 0 and 9.</p>
<p>See the <a href="https://hg.python.org/cpython/file/v3.5.2/Lib/tarfile.py#l1670" rel="nofollow noreferrer"><code>xzopen()</code> classmethod</a>, used to handle <code>xz</code> compression files.</p>
<p>The documentation is confusing in that it doesn't mention this option explicitly, I'll file an issue to have this improved.</p>
</div>
<span class="comment-copy">Works perfectly, thanks!</span>
