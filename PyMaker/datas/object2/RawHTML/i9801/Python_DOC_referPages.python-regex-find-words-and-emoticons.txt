<div class="post-text" itemprop="text">
<p>I want to find matches between a tweet and a list of strings containing words, phrases, and emoticons. Here is my code:</p>
<p><code>words = [':)','and i','sleeping','... :)','! &lt;3','facebook']
regex = re.compile(r'\b%s\b|(:\(|:\))+' % '\\b|\\b'.join(words), flags=re.IGNORECASE)</code></p>
<p>I keep receiving this error:</p>
<p><code>error: unbalanced parenthesis</code></p>
<p>Apparently there is something wrong with the code and it cannot match emoticons. Any idea how to fix it?</p>
</div>
<div class="post-text" itemprop="text">
<p>The re module has a function <code>escape</code> that takes care of correct escaping of words, so you could just use </p>
<p><code>words = map(re.escape, [':)','and i','sleeping','... :)','! &lt;3','facebook'])</code></p>
<p>Note that word boundaries might not work as you expect when used with words that don't start or end with actual word characters.</p>
</div>
<div class="post-text" itemprop="text">
<p>I tried the below and it stopped throwing the error:</p>
<pre><code>words = [':\)','and i','sleeping','... :\)','! &lt;3','facebook']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>While <code>words</code> has all the necessary formatting, re uses <code>(</code> and <code>)</code> as special characters. This requires you to use <code>\(</code> or <code>\)</code> to avoid them being interpreted as special characters, but rather as the ASCII characters 40 and 41. Since you didn't understand what @Nicarus was saying, you need to use this:</p>
<pre><code>words = [':\)','and i','sleeping','... :\)','! &lt;3','facebook']
</code></pre>
<p>Note: I'm only spelling it out because this doesn't seem like a school assignment, for all the people who might want to criticize this. Also, look at the documentation prior to going to stack overflow. <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">This</a> explains everything.</p>
</div>
<span class="comment-copy">The parentheses in <code>words</code> are not escaped.</span>
<span class="comment-copy">please let me know how to fix it @Nicarus</span>
<span class="comment-copy">Try escaping them.</span>
<span class="comment-copy"><a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">docs.python.org/3/library/re.html</a></span>
<span class="comment-copy">Thanks @Nicarus</span>
<span class="comment-copy">Best solution. Many thanks</span>
