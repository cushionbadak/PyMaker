<div class="post-text" itemprop="text">
<p>I am developing an defect analysis system where in the area of the defected fruit can be found. I am in the initial stages of its development. I am using opencv and python.</p>
<p>I used the following code for finding contours:</p>
<pre><code>im = cv2.imread('Mango_49_A.jpg')
imgray = cv2.cvtColor(im, cv2.COLOR_BGR2GRAY)
ret, thresh = cv2.threshold(imgray, 127, 255, 0)
im2, contours, hierarchy = cv2.findContours(thresh, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)

cv2.drawContours(im, contours, -1, (0,255,0), 3)
</code></pre>
<p>For finding the area i use the following code:</p>
<pre><code>if len(contours) != 0:
    for (i, c) in enumerate(contours):
        area = cv2.contourArea(c)
        if area &lt; area_of_the_mango1:
            print(area)
            area_of_the_defected_region1 += area
            cv2.drawContours(img, c, -1, (255,255,0), 12)
</code></pre>
<p>The result:
<a href="https://i.stack.imgur.com/Ivuft.jpg" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/Ivuft.jpg"/></a></p>
<p>I want to calculate the contour only inside the mango. The result i am getting calculates the contour area for:
1. Complete image boundary
2. Mango
3. Defects in the mango</p>
<p>Since it calculates area of the above three, the area of the defected region is higher than that of the area of the mango.</p>
<p>Help me out to calculate the contour area inside the mango alone.</p>
</div>
<div class="post-text" itemprop="text">
<p>The fact that you're getting the external border and some tiny contours as part of the background points to the fact that the threshold value isn't ideal to separate the foreground from the background.</p>
<p>For this line:</p>
<pre><code>ret, thresh = cv2.threshold(imgray, 127, 255, 0)
</code></pre>
<p>play with value <code>127</code> so you no longer see contours between the outer edges of the foreground object and the background</p>
<p>Additionally you can use <a href="https://docs.opencv.org/3.0-beta/doc/py_tutorials/py_imgproc/py_morphological_ops/py_morphological_ops.html" rel="nofollow noreferrer">morphological filters</a> (e.g. erode) to clean up threshold a bit</p>
<p>The main issue with how you currently retrieve contours is this: <code>cv2.RETR_TREE</code>.
According to the <a href="https://docs.opencv.org/3.1.0/d9/d8b/tutorial_py_contours_hierarchy.html" rel="nofollow noreferrer"><code>findContours</code> documentation</a> you can retrieve only the external contours which is what you're after:</p>
<pre><code>im2, contours, hierarchy = cv2.findContours(thresh, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
</code></pre>
<p>As a next step you can look at more <a href="https://docs.opencv.org/3.1.0/dd/d49/tutorial_py_contour_features.html" rel="nofollow noreferrer">Contour Features</a> like <code>contourArea</code> which you're already using, but also contour approximation and convex hull.</p>
</div>
