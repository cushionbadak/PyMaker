<div class="post-text" itemprop="text">
<p>So i think argparse is very good but how i can do somthing like this in argparse/python?</p>
<p>For example:</p>
<pre><code>myprog del &lt;username&gt;    (remove only config entry)
myprog del -A &lt;username&gt; (remove all of the user...)
myprog add &lt;username&gt; (must be 1 sub-arg, not more)
myprog change &lt;old-username&gt; &lt;to-new-username&gt;   (must be 2 sub-args, not more)
myprog list (no sub argument)  
myprog list -A (list ALL)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This looks like a straight forward case for using subparsers</p>
<p><a href="https://docs.python.org/3/library/argparse.html#sub-commands" rel="nofollow">https://docs.python.org/3/library/argparse.html#sub-commands</a></p>
<p>Adapting the example from the documentation</p>
<pre><code>parser = argparse.ArgumentParser(prog='PROG')
...
subparsers = parser.add_subparsers(dest='cmd', help='sub-command help')

# create the parser for the "a" command
parser_a = subparsers.add_parser('del', help='a help')
parser_a.add_argument('username', ...)
parser_a.add_argument('-A', type='store_true')

# create the parser for the "b" command
parser_b = subparsers.add_parser('add', help='b help')
parser_b.add_argument('username')

# change gets 2 positionals
# list gets one -A
....
args = parser.parse_args()
if args.cmd == 'del':
    # delete args.username
....
</code></pre>
<p><code>args.cmd</code> tells you which command was given.   The documentation (and other SO questions) shows how you can associate a function with each command.</p>
</div>
<span class="comment-copy">Have you tried anything with the <a href="https://docs.python.org/3/library/argparse.html#sub-commands" rel="nofollow noreferrer">sub commands</a>?</span>
