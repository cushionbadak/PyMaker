<div class="post-text" itemprop="text">
<p>I'm currently trying out some of the code from the book called, "Programming Collective Intelligence", building a document classifier and I ran into this error cause by <code>docclass.py</code>. Can anyone tell me how to debug such problems?</p>
<pre><code>def __init__(self,getfeatures,filename=None):
    self.fc={}
    self.cc={}
    self.getfeatures=getfeatures
def incf(self,f,cat):
    self.fc.setdefault(f,{})
    self.fc.setdefault(cat,0)
    self.fc[f][cat]+=1
def incc(self,cat):
    self.cc.setdefault(cat,0)
    self.cc[cat]+=1
def train(self,item,cat):
    features=self.getfeatures(item)
    for f in features:
        self.incf(f,cat)
    self.incc(cat)
</code></pre>
<p>I am getting the following error:</p>
<pre><code>&gt;&gt;&gt; import docclass
&gt;&gt;&gt; c1=docclass.classifier(docclass.getwords)
&gt;&gt;&gt; c1.train('the quick brown fox jumps over the lazy dog','good')

Traceback (most recent call last):
  File "&lt;pyshell#32&gt;", line 1, in &lt;module&gt;
    c1.train('the quick brown fox jumps over the lazy dog','good')
  File "docclass.py", line 36, in train
    self.incf(f,cat)
  File "docclass.py", line 17, in incf
    self.fc[f][cat]+=1
KeyError: 'good'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://docs.python.org/3/library/exceptions.html#KeyError" rel="nofollow"><code>KeyError</code> exception</a> is telling you that the dictionary has no such key:</p>
<blockquote>
<p>Raised when a mapping (dictionary) key is not found in the set of existing keys.</p>
</blockquote>
<p>Looking at the code, it appears that</p>
<pre><code>self.fc.setdefault(cat,0)
</code></pre>
<p>should be</p>
<pre><code>self.fc[f].setdefault(cat,0)
</code></pre>
</div>
<span class="comment-copy"><i>"Can anyone tell me how to debug such problems?"</i> - that is too broad a question for SO, but see e.g. <a href="http://ericlippert.com/2014/03/05/how-to-debug-small-programs/" rel="nofollow noreferrer">ericlippert.com/2014/03/05/how-to-debug-small-programs</a> With a <code>KeyError</code>, my first port of call would be to <code>print</code> the structure and see if it contains what I expected it to...</span>
