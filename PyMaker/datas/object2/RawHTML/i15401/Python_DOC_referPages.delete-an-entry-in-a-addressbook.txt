<div class="post-text" itemprop="text">
<p>I'm trying to develop in python an addressBook and can't <strong>delete</strong> a contact.</p>
<p>My addresses' file has in each line a contact with format: <strong>surname;first_name;phone_number</strong> .
To delete a contact I verify if the contact exists and if yes I create a new file with all the entries except that one I want to delete, but the condition <code>if line != line_to_delete:</code> doesn't work.</p>
<p>I have already tried with <code>readlines()</code> but the problem persists. .</p>
<p><strong>Code:</strong></p>
<pre><code>def delete_contact(self):

    line_to_delete=self.surname+";"+self.first_name+";"+self.phone_number
    name="Address_Book"

    try:        
        new_file=open(name, 'a')

        with open('addressBook') as old_file:
            for line in old_file:
                if line != line_to_delete:
                    new_file.write(line)


        new_file.close()
        old_file.close()
        os.remove("addressBook")
        os.rename("Address_Book", "addressBook")
        return True

    except Exception:
        print("It's not possible to read the file")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The answer was already given by jrennie:</p>
<p>The explanation: the line that will be returned has the "\n" at the end.
So without .rstrip() you are comparing (just an example):</p>
<p>"Martin";"Prince";"44" (line_to_delete) == "Martin";"Prince";"44" + "\n" (line in the for loop)</p>
</div>
<div class="post-text" itemprop="text">
<p>You need to strip the newline off the end of the read line in order to do this comparison:</p>
<pre><code>with open('addressBook') as old_file:
    for line in old_file:
        if line.rstrip() != line_to_delete:
            new_file.write(line)
</code></pre>
</div>
<span class="comment-copy">General comments: You should consider using the <a href="https://docs.python.org/3/library/csv.html#module-csv" rel="nofollow noreferrer"><code>csv</code></a> module and store your address book in csv format (actually, it basically already is in that format). This would simplify read and writing the data and probably have avoided the trailing newline problem you now have. Also, you don't need to close <code>old_file</code> because the <code>with</code> statement will do it for you. If you had also used a <code>with</code> on <code>new_file</code> the same would be true for it.</span>
