<div class="post-text" itemprop="text">
<p>I have some old code which has optparse as their argument library. It has type as choice as one of the arguments </p>
<pre><code>type = "choice"
</code></pre>
<p>I am trying to convert my code to have argparse. What should I put in the type? If I add type = choice it throws an error:</p>
<pre><code>NameError: global name 'choice' is not defined
</code></pre>
<p>What should be the value of type here if I am using argparse?</p>
</div>
<div class="post-text" itemprop="text">
<p>In <code>optparse</code>, <code>choice</code> type is just a special form of <code>string</code>. From the <a href="https://docs.python.org/2/library/optparse.html#standard-option-types" rel="nofollow"><code>optparse</code> documenattion</a>:</p>
<blockquote>
<p><code>"choice"</code> options are a subtype of <code>"string"</code> options. The <code>choices</code> option attribute (a sequence of strings) defines the set of allowed option arguments.</p>
</blockquote>
<p>You don't need to specify this as a type in <code>argparse</code>; all you need to provide is the choices. Remove the <code>type</code> argument altogether, or set it <code>str</code> if you want to be explicit.</p>
<p>Also see the <a href="https://docs.python.org/3/library/argparse.html#choices" rel="nofollow"><em>choices</em> documentation</a> for <code>argparse</code>; this is a lot more flexible than in <code>optparse</code> as this also allows for the choices to be of a type other than strings.</p>
</div>
<span class="comment-copy">But when I add str or remove type the moment I run my code say like this: python try1.py --help then it prints the help information specific to that argument along with the choices as well. When I was working with optparse I didn't face such an issue, I used to get only the help information specific to that argument.</span>
<span class="comment-copy">@wannaC: I am not certain what you are asking here. <code>argparse</code> works differently, it will never produce the exact same output.</span>
<span class="comment-copy">@wannaC: and that also sounds like a <i>different</i> question; your problem with the <code>type</code> argument has been solved, has it not?</span>
<span class="comment-copy">The <code>metavar</code> parameter replaces the <code>choices</code> list in the help display.</span>
<span class="comment-copy">@hpaulj: right, which has a <a href="http://stackoverflow.com/questions/20328931/argparse-argument-generated-help-metavar-with-choices">simple fix</a>.</span>
