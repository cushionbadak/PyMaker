<div class="post-text" itemprop="text">
<p>I am using the below script to make request to google. However, when I execute it, I get the error stating:  </p>
<p><strong>client.send("GET / HTTP/1.1\r\nHost: google.com\r\n\r\n")
TypeError: a bytes-like object is required, not 'str'</strong></p>
<p>On browsing for similar issues in stackoverflow, <strong>client.sendto</strong> has been recommended to use along with encoding the message. However, in my case there is no message that is passed. </p>
<p>The below is the script I use:  </p>
<pre><code>import socket
target_host = "www.google.com"
target_port = 80

client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client.connect((target_host,target_port))
client.send("GET / HTTP/1.1\r\nHost: google.com\r\n\r\n")
response = client.recv(4096)
print(response)
</code></pre>
<p>Any pointers on correcting the issue will be appreciated. </p>
</div>
<div class="post-text" itemprop="text">
<p>You need to choose an <a href="https://docs.python.org/3/howto/unicode.html" rel="nofollow noreferrer">encoding</a>, example:</p>
<pre><code>client.send("GET / HTTP/1.1\r\nHost: google.com\r\n\r\n".encode(encoding='utf-8'))
</code></pre>
<p>See also: <a href="https://stackoverflow.com/questions/2411864/python-socket-send-buffer-vs-str">Python Socket Send Buffer Vs. Str</a> and <a href="https://stackoverflow.com/questions/5471158/typeerror-str-does-not-support-the-buffer-interface">TypeError: 'str' does not support the buffer interface</a></p>
</div>
<span class="comment-copy">What do you mean "there is no message"? You are clearly sending an HTTP request.</span>
<span class="comment-copy">In Python 3, <code>""GET / HTTP/1.1\r\nHost: google.com\r\n\r\n"</code> is a unicode string and <code>.send()</code> wants bytes to send over the wire. Your code tries to send the unicode string straight without encoding, which the error message rightfully complains about.</span>
