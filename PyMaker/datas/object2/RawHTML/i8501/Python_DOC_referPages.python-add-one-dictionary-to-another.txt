<div class="post-text" itemprop="text">
<p>I want to update one dictionary with another in Python, but if there are some same arguments, their values should be added.
For example:</p>
<pre><code>a = {"word_1" : 1, "word_2": 2}
b = {"word_2" : 5, "word_3": 7}
</code></pre>
<p>Output must be:</p>
<pre><code>{"word_1" : 1, "word_2": 7, "word_3": 7}
</code></pre>
<p>I have googled a lot, but in most answers values rewrites, I want to add them
Here is my solution:</p>
<pre><code>    for i in a.keys():
        if i in b.keys():
            b[i] += a[i]
        else:
            b[i] = a[i]
</code></pre>
<p>Is there most efficient way to do it?</p>
</div>
<div class="post-text" itemprop="text">
<p>Use a <a href="https://docs.python.org/3/library/collections.html#collections.Counter" rel="noreferrer"><code>Counter</code></a>, which is a special kind of dictionary for counting objects.</p>
<pre><code>from collections import Counter

a = Counter({"word_1" : 1, "word_2": 2})
b = Counter({"word_2" : 5, "word_3": 7})
print(a + b)
</code></pre>
<p>prints</p>
<pre><code>Counter({'word_2': 7, 'word_3': 7, 'word_1': 1})
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>How about:</p>
<pre><code>{k: a.get(k, 0) + b.get(k, 0) for k in set(list(a.keys()) + list(b.keys()))}
</code></pre>
</div>
<span class="comment-copy">TypeError: unsupported operand type(s) for +: 'dict_keys' and 'dict_keys'</span>
<span class="comment-copy">@OleksandrPryhoda, sorry didn't test on Python3, please try again, I've updated my answer</span>
<span class="comment-copy">It works, it good variant, but with counter it works faster</span>
