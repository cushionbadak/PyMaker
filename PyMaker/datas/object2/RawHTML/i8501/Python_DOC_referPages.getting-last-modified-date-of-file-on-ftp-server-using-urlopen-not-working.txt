<div class="post-text" itemprop="text">
<pre><code>from six.moves.urllib.request import urlopen, urlretrieve, urlrequest

conn = urlopen('ftp://ftp.cdc.noaa.gov/Datasets/ncep.reanalysis.dailyavgs/surface/lftx.sfc.2017.nc', timeout=20)
last_modified = conn.headers['last-modified']
</code></pre>
<p>Following <a href="https://stackoverflow.com/questions/5022083/how-can-i-get-the-last-modified-time-with-python3-urllib">How can I get the last-modified time with python3 urllib?</a> I want to get last modification date of a file on a FTP server. However, with the code above, <code>last-modified</code> is <code>None</code>. Any suggestions? I want solution to work on both python 2 and python 3</p>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen" rel="nofollow noreferrer">documentation of <code>urlopen</code></a> does not claim that it returns <code>last-modified</code> for FTP URLs.</p>
<p>Note that there are no headers in FTP protocol. The <code>urlopen</code> just fakes few HTTP-like headers for some kind of compatibility of the interface across protocols.</p>
<p>To retrieve timestamp using FTP, use the ftplib. See <a href="https://stackoverflow.com/q/29026709/850848">How to get FTP file's modify time using Python ftplib</a>.</p>
</div>
