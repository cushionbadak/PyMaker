<div class="post-text" itemprop="text">
<p>I'm trying to recreate the n-queens problem and solve it with simulated annealing, although the board object from my Object class is throwing an error when I try to add the temperature using len(board)**2. Any help would be very appreciated!! I have included the source code and the output. Thanks!</p>
<pre><code>import time
import random
import math

class Board(object):
    """An N-queens solution attempt."""

    def __init__(self, queens):
        """Instances differ by their queen placements."""
        self.queens = queens.copy()

    def display(self):
        """Print the board."""
        for r in range(len(self.queens)):
            for c in range(len(self.queens)):
                if self.queens[c] == r:
                    print 'Q',
                else:
                    print '-',
            print
        print

    def moves(self):
        """Return a list of possible moves given the current placements."""
        bestMoves = []
        optimalHeuristic = heuristic(board)
        for a, b in moves.iteritems():
            if b &lt; optimalHeuristic:
                optimalHeuristic = b

        for a, b in moves.iteritems():
            if b == optimalHeuristic:
                bestMoves.append(a)

        return bestMoves

    def neighbor(self, move):
        """Return a Board instance like this one but with one move made."""
        if len(bestMoves) &gt; 0:
            pick = random.randint(0, len(bestMoves) - 1)
            column = bestMoves[pick][0]
            row = bestMoves[pick][1]
            board[column] = row
        return board

    def heuristic(self):
        """Compute the cost of this solution."""
        h = 0
        ##checking columns
        for i in range(1, n):
            ##checking rows
            for j in range(i+1, n):
                if board[i] == board[j]:
                    h += 1
                x = j - i
                ##checking the diagonals
                if board[i] == board[j] - x or board[i] == board[j] + x:
                    h += 1
        return h

class Agent(object):
    """Knows how to solve an n-queens problem with simulated annealing."""

    def anneal(self, board):
        """Return a list of moves to adjust queen placements."""
        temperature = len(board)**2
        annealRate = 0.95
        newHeuristic = heuristic(board)

        while newHeuristic &gt; 0:
            board = makeMove(board, newHeuristic, temperature)
            newHeuristic = heuristic(board)
            newTemperature = max(temperature * annealRate, 0.01)
            temperature = newTemperature
            ##steps cap is here to avoid the algorithm getting stuck
            if steps &gt;= 10000: 
                break

        boardCopy = list(board)
        foundMove = False

        while not foundMove:
            boardCopy = list(board)
            newRow = random.randint(0, len(board)-1)
            newColumn = random.randint(0, len(board)-1)
            boardCopy[newColumn] = newRow
            newHeuristic = heuristic(boardCopy)
            if newHeuristic &lt; optimalHeuristic:
                foundMove = True
            else:
                delta_e = optimalHeuristic - newHeuristic
                ##aceptance prob equation min(1, e**(delta e/temp))
                acceptProbability = min(1, math.exp(delta_e/temperature))
                foundMove = random.random() &lt;= acceptProbability
        return boardCopy

def main():
    """Create a problem, solve it with simulated anealing, and console-animate."""
    print("Enter the number of queens")
    n = input()
    queens = dict()
    for column in range(n):
        row = random.choice(range(n))
        queens[column] = row

    board = Board(queens)
    board.display()

    agent = Agent()
    path = agent.anneal(board)

    while path:
        move = path.pop(0)
        board = board.neighbor(move)
        time.sleep(0.1)
        board.display()

if __name__ == '__main__':
    main()

Output:


Enter the number of queens
8
- - - - - - Q -
- - - - - Q - -
- - - - - - - Q
- - - - - - - -
- Q - - - - - -
- - - Q Q - - -
- - - - - - - -
Q - Q - - - - -


Traceback (most recent call last):
  File "F:\Intelligent Systems\annealingnqueens.py", line 119, in &lt;module&gt;
    main()
  File "F:\Intelligent Systems\annealingnqueens.py", line 110, in main
    path = agent.anneal(board)
  File "F:\Intelligent Systems\annealingnqueens.py", line 66, in anneal
    temperature = len(board)**2
TypeError: object of type 'Board' has no len()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You need to define a <code>__len__</code> method for your Board class, otherwise the call to <code>len(board)</code> will not be defined. This and many other special double-underscore methods are mentioned in <a href="https://docs.python.org/3/reference/datamodel.html#object.__len__" rel="nofollow noreferrer">the Python 3 documentation</a> (or, if you prefer, <a href="https://docs.python.org/2/reference/datamodel.html#object.__len__" rel="nofollow noreferrer">the Python 2 documentation</a>). Presuming that the length of queens is the quantity you want:</p>
<pre><code>class Board(object):
"""An N-queens solution attempt."""

def __init__(self, queens):
    """Instances differ by their queen placements."""
    self.queens = queens.copy()

def __len__(self):
     return len(self.queens)
</code></pre>
</div>
<span class="comment-copy">what is the expected output of <code>agent.anneal(board)</code> or what is the actual lvalue of <code>len(board)</code> you are expecting?</span>
<span class="comment-copy">I want len(board) to give me the value of the board in a list essentially, to get a floating point number for the temperature. and agent.anneal(board) is supposed to apply the anneal function on the given board object and provide a solution.</span>
