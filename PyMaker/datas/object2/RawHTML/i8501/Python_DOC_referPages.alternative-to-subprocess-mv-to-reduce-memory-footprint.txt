<div class="post-text" itemprop="text">
<p>How would I do the following in a more pythonic way that doesn't create a new thread (which takes up too much memory for me) -- </p>
<pre><code>subprocess.call(['mv', '/tmp/%s' % self.file_name, self.file_name]) 
</code></pre>
<p>Also, I need to make sure it respects the <code>sudo</code> command when running the script, because I need that in order to move the file.</p>
</div>
<div class="post-text" itemprop="text">
<p>The operation you're performing is best done <a href="https://docs.python.org/3/library/shutil.html#shutil.move" rel="nofollow noreferrer">using <code>shutil.move</code></a>, which will run with the same privileges as your Python process (because it <em>is</em> your Python process), so if the Python script is <code>sudo</code>ed, so is the <code>move</code> operation:</p>
<pre><code>import shutil

shutil.move('/tmp/%s' % self.file_name, self.file_name)
</code></pre>
</div>
<span class="comment-copy">What do you mean by  'doesn't create a new thread?'</span>
<span class="comment-copy">Have you looked into <code>os.rename</code> and <code>shutil.move</code>?</span>
<span class="comment-copy">You mean it forks another process? Well, yeah it will do that. If you don't want that, don't use subprocess, use something like <code>os.rename</code>.</span>
<span class="comment-copy">About your second point (sudo), you can check that your script has been called as root (e.g., using sudo), by checking if <code>os.geteuid()</code> is 0 and raise an error message accordingly.</span>
<span class="comment-copy">Perhaps you can update your question with some more details on what, specifically, you're trying to accomplish and what your constraints are (apparently, forking out <code>mv</code> uses too much memory). The 'pythonic' thing seems like a bit of a red herring, there's nothing unpythonic about launching subprocesses. Or not, if you don't want to.</span>
