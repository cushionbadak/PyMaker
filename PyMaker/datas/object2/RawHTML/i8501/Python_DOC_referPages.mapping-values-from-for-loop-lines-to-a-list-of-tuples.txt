<div class="post-text" itemprop="text">
<p>For the following code, I'm trying to print out the values within a list of tuples that are mapped from the line to it based on column headers. However, the mapping seems to go awry and do not give me the values I want.</p>
<pre><code>import itertools as it

def buc(column_headers, tuples):
    row_dict = {}   
    attribs = [1,2]
    measure = 10

    # generate binary table based on number of columns
    binaries = [i for i in it.product(range(2), repeat=(len(attribs)))]

    for line in binaries:
        line = list(line)

        # replace binary of 1 with 'ALL' or 0 with value from input attribs
        for index, item in enumerate(line):
            if (item == 1):
                line[index] = 'ALL'
            elif (item == 0):
                line[index] = attribs[index]

        line.append(measure)
        print(line)

        # map column values to column heading by index and store in row_dict (e.g. {'A': 1, 'B': 'ALL', 'M': 100} )
        for i in range(len(line)):
            row_dict[column_headers[i]] = line[i]
        tuples.append(row_dict)

    print(tuples)
</code></pre>
<p>The following is the current output I get:</p>
<pre><code>&gt;&gt;&gt; buc(['A', 'B', 'M'], [])
[1, 2, 10]
[1, 'ALL', 10]
['ALL', 2, 10]
['ALL', 'ALL', 10]
[{'A': 'ALL', 'B': 'ALL', 'M': 10}, {'A': 'ALL', 'B': 'ALL', 'M': 10}, {'A': 'ALL', 'B': 'ALL', 'M': 10}, {'A': 'ALL', 'B': 'ALL', 'M': 10}]
</code></pre>
<p>The correct output I want should be the following, where the lines is mapped to the tuples correctly, based on index of the column headings:</p>
<pre><code>&gt;&gt;&gt; buc(['A', 'B', 'M'], [])
[1, 2, 10]
[1, 'ALL', 10]
['ALL', 2, 10]
['ALL', 'ALL', 10]
[{'A': '1', 'B': '2', 'M': 10}, {'A': '1', 'B': 'ALL', 'M': 10}, {'A': 'ALL', 'B': '2', 'M': 10}, {'A': 'ALL', 'B': 'ALL', 'M': 10}]
</code></pre>
<p>Where have I done wrong?</p>
</div>
<div class="post-text" itemprop="text">
<p>This happens because your list <code>tuples</code> only contains a reference to the original dictionary. See <a href="https://stackoverflow.com/questions/5244810/python-appending-a-dictionary-to-a-list-i-see-a-pointer-like-behavior">this answer</a>. You can fix this by <a href="https://docs.python.org/3/library/copy.html" rel="nofollow noreferrer">copying</a> the dictionary. </p>
<p>Replace</p>
<pre><code>tuples.append(row_dict)
</code></pre>
<p>with </p>
<pre><code>tuples.append(row_dict.copy())
</code></pre>
</div>
<span class="comment-copy">Ahh! No wonder! Okay thanks!</span>
