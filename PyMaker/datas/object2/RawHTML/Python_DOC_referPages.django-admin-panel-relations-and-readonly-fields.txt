<div class="post-text" itemprop="text">
<p>I have a very simple scheme in model.py</p>
<pre><code>class Attachment(models.Model):
    name = models.CharField(max_length=100,
                            verbose_name='name')
    file = models.FileField(upload_to=settings.MEDIA_ROOT,
                            null=True,
                            verbose_name='file')
    def __str__(self):
        return self.name

class Document(models.Model):
    title = models.CharField(max_length=250, blank=False)
    attachment = models.ForeignKey('Attachment', null=True, on_delete=models.CASCADE)
    date = models.DateField(blank=True)
    approved = models.BooleanField(default=False)

    def __str__(self):
        return self.title
</code></pre>
<p>And my admin.py</p>
<pre><code>class DocumentAdmin(admin.ModelAdmin):
    fieldsets = (
        ('GENERAL', {
            'fields': ('title', 'attachment', 'date',  'approved')
        }),
    )
admin.site.register(Document, DocumentAdmin)
</code></pre>
<p>There is two issues I'm struggling with: </p>
<hr/>
<p>Firstly, I would like to include Attachment's fields in DocumentAdmin interface. I've created a get method in Document model.</p>
<pre><code>def get_attachment_file(self):
    return self.attachment.file
</code></pre>
<p>Method get_attachment_file is working in list_display, but not in fieldset   </p>
<pre><code>list_display = ('get_attachment_file',)
</code></pre>
<hr/>
<p>In addition, I would like to make fields "approved" and "date" read only, after "approved" is set to "True".</p>
<p>Thank you all.</p>
</div>
<div class="post-text" itemprop="text">
<p>You should be able to add get_attachment_file and make it a readonly field.
For making approved and date readonly after approved is set to True you can use the get_readonly_fields method</p>
<pre><code>def get_readonly_fields(self, request, obj=None):
    readonly_fields = ('get_attachment_file',)
    if obj and obj.approved:
        readonly_fields += ('approved', 'date')
    return readonly_fields
</code></pre>
</div>
