<div class="post-text" itemprop="text">
<p>I'm implementing component tests for a web service. I want to use the class method <code>setUpClass(cls):</code> to start my web service only once in the beginning, however <code>setUpClass(cls):</code> is executed before each of my test cases. Why? The documentation says it is executed only once before the test cases are executed. Any ideas?
I'm using Python 3.5.</p>
<pre><code>class SomeTest(unittest.TestCase):

    @classmethod
    def setUpClass(cls):
        cls.MyService = ComponentManager.GetMyService()
        cls.MyService.Start()
        return super(SomeTest, cls).setUpClass()

    @classmethod
    def tearDownClass(cls):
        return super(SomeTest, cls).tearDownClass()

    def test_invalid_request(self):
        response = self.client.SendJSONRequest(Constants.METHOD_POST, '/tile/invalid/', '{}')
        ...
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Looking at the <a href="https://github.com/Microsoft/PTVS/blob/master/Python/Product/TestAdapter/TestExecutor.cs#L98-L284" rel="nofollow">Python tools for Visual Studio source code</a>, the VS test runner runs each test case <em>entirely in isolation</em>.</p>
<p>Each test case is run as a separate command-line invocation of the Python interpreter (using a <a href="https://github.com/Microsoft/PTVS/blob/master/Python/Product/TestAdapter/visualstudio_py_testlauncher.py" rel="nofollow">custom test launcher</a>, passing in the module and test name for each), which is why the class setup and teardown are called for each test. Python is never given the opportunity to run these tests together.</p>
<p>If this matters to you, you'll have to <a href="https://github.com/Microsoft/PTVS/issues" rel="nofollow">file a ticket with the Python Tools project</a>; I see no <a href="https://github.com/Microsoft/PTVS/labels/Test%20Adapter" rel="nofollow">relevant open ticket for the test adapter</a> at this time.</p>
<p>Alternatively, run your tests with a different test runner. You could use the <a href="https://docs.python.org/3/library/unittest.html#command-line-interface" rel="nofollow">built-in <code>unittest</code> command line</a>, for example:</p>
<pre><code>python3 -m unittest your_package
</code></pre>
<p>or pick any of the <a href="http://docs.python-guide.org/en/latest/writing/tests/#tools" rel="nofollow">popular tools available</a>.</p>
</div>
<span class="comment-copy">can you add a test case please?</span>
<span class="comment-copy">What test runner are you using? Is that test runner executing tests in concurrently at all?</span>
<span class="comment-copy">@wind85: I added a test case. All my test cases look like that. (always starting with test_)</span>
<span class="comment-copy">@Javiator shoudn't be using the setUp() method?</span>
<span class="comment-copy">@MartijnPieters I have no clue. I'm using VS 2013 and Anaconda 3. Where can I see which test runner I'm using?</span>
