<div class="post-text" itemprop="text">
<p>I tried to make a bot that retrieve the name of the sender of the chat in a group. I am using Python with Telepot.</p>
<pre><code>&gt;&gt;&gt; from pprint import pprint
&gt;&gt;&gt; import telepot
&gt;&gt;&gt; response = bot.getUpdates()
pprint(response)
[{u'message': {u'chat': {u'first_name': u'Nick',
                         u'id': 999999999,
                         u'last_name': u'Lee',
                         u'type': u'private'},
           u'date': 1444723969,
           u'from': {u'first_name': u'Nick',
                     u'id': 999999999,
                     u'last_name': u'Lee'},
           u'message_id': 4015,
           u'text': u'Hello'},
u'update_id': 100000000}]
</code></pre>
<p>When I execute this, it gives me this error</p>
<pre><code>sender1 = response[u'message'][u'from'][u'first_name']
sender2 = response[u'message'][u'from'][u'last_name']
</code></pre>
<p>Error:</p>
<pre><code>TypeError: list indices must be integers, not unicode
</code></pre>
<p>How do I fix this?</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/2/library/stdtypes.html#dict.get" rel="nofollow"><code>get()</code></a> instead of a list to access values in a dictionary.  This method returns a value for a given key in a dictionary (or <code>None</code> if the key is not available):</p>
<pre><code>sender1 = response[0][u'message'][u'from'].get(u'first_name')
sender2 = response[0][u'message'][u'from'].get(u'last_name')

# output:
# &gt;&gt;&gt; print sender1
# u'Nick'
# &gt;&gt;&gt; print sender2
# u'Lee'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Square brackets in a representation mean that you have a list, and lists must be indexed using an integer or slice. Try indexing by <code>[0]</code> before attempting to access any contained dictionaries.</p>
</div>
<span class="comment-copy">You can have multiple updates, so <code>response</code> is a <code>list</code>. You probably need to choose which update you're interested in by indexing the list.</span>
<span class="comment-copy">How do I index the list? I'm sorry, I have just started studying this language.</span>
<span class="comment-copy">It's probably best to get used to reading documentation if you're learning something new. Have a look at the <a href="https://docs.python.org/3/tutorial/introduction.html#lists" rel="nofollow noreferrer">python tutorial</a>.</span>
<span class="comment-copy"><code>response</code> is a list.</span>
<span class="comment-copy">@Daniel but your solution using <code>get</code> is now irrelevant</span>
<span class="comment-copy">I misread your code earlier, thank you, this fixes it!</span>
<span class="comment-copy">My pleasure @ValenMiriapon; glad it worked for you, and good luck!</span>
<span class="comment-copy">like this? 'sender1 = response[0][u'from'][u'first_name']' this returns me an error index out of bound or something...</span>
<span class="comment-copy">nevermind, I got this error now sender1 = response[0][u'from'][u'first_name'] KeyError: u'from'</span>
<span class="comment-copy">You can't skip <code>u'message'</code>; that's still the key of the dictionary.</span>
