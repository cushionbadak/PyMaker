<div class="post-text" itemprop="text">
<p>This is a first of a kind problem for me, and really not sure how to troubleshoot it.</p>
<p>I have a simple Python/MySQL project I'm working on for fun.  I have a separate class, with it's own methods, to handle querying the database (using MySQLdb).  </p>
<p>The method which seems to be the culprit (<strong>BlogDB.get_blogs()</strong>) returns the data fetched from the query.  I then assign this to a variable in the main script (so I can send it to a parser and do everything else I need to with it).  The problem is that as soon as I call that method (.get_blogs()) it outputs a field from the query results, even when I've got nothing set to output.  I've tried without assigning it to a variable, just running the method, and it still does the same, and it's always the same field. </p>
<p>What am I missing, can someone please point me in the direction to see this?  The method is so short I have no idea what's going on.</p>
<p>The main file, which calls everything else and ties it all together:</p>
<pre><code>#!/usr/bin/python
print "Content-type: text/html\n\n"

import blog_db
bdb = blog_db.BlogDB()
bdb.get_blogs()
db.close_db()
</code></pre>
<p>Here's the blog_db module with the methods, though it's only the .get_blogs() method that causes problems (if I comment it out then the issue doesn't occur):</p>
<pre><code>#!/usr/bin/python

import MySQLdb
class BlogDB():
    def __init__(self):
        db = MySQLdb.connect("mysql.server","user","pass","table" )
        self.cursor = db.cursor()


    def get_blogs(self):
        self.cursor.execute("SELECT * from lt_blog ORDER BY id DESC LIMIT 5;")
        data = self.cursor.fetchall()
        return data

    def close_db(self):
        db.close()
</code></pre>
<p>Really at a loss on this one, hoping someone else has encountered something like this.</p>
<p>Using Python 2.7 and MySQL 5.3 and don't know which version of MySQLdb, Linux Debian with Apache web server.</p>
<p><strong>[Edit]</strong> When running PDB in interactive mode I confirmed that the method call (<strong>.get_blogs()</strong>) is the culprit somehow, here is a screenshot from the PDB session.  If there's anyway to delve deeper with PDB please let me know.  The name (John Clark) isn't printed in the method (as you can see from the code above nothing in the method is set to output anything), and it's only in ONE of the rows returned, the 4th column in that row, so I really don't understand this or what's causing it.<br/>
<a href="http://i.stack.imgur.com/MjKxa.png" rel="nofollow">Screen capture of live PDB session</a></p>
</div>
<div class="post-text" itemprop="text">
<p>I think it's outputting the query results because you're using the <code>fetchall</code> call. This will make the query actually execute and return the results. I'd remove the <code>fetchall</code> and just return the cursor (e.g. return self.cursor). Then when you want to output the data, use the <code>fetchall</code> ;)</p>
</div>
<div class="post-text" itemprop="text">
<p>Try using pdb, the built-in python debugger.  This will allow you to single-step through your program and figure out exactly where the output is occurring and why.  Or if you prefer, there are other debuggers, such as pudb, that are visual or have other features.  I think pdb should work fine for you though.</p>
<p>Right before the call to get_blogs(), call:</p>
<pre><code>pdb.set_trace()
</code></pre>
<p>This will break into the debugger, and you can single step through from there.</p>
<p>More information on pdb can be found <a href="https://docs.python.org/3/library/pdb.html" rel="nofollow">here</a>.</p>
</div>
<span class="comment-copy">Perhaps I'm missing something here, but if you just assing <code>bdb.get_blogs()</code> to a variable like <code>d = bdb.get_blogs()</code> does that solve your problem?</span>
<span class="comment-copy">If that's not working, would you mind posting the output that you get when you do that?</span>
<span class="comment-copy">I think it's outputting the query results because you're using the <code>fetchall</code> call. This will make the query actually execute and return the results. I'd remove the <code>fetchall</code> and just return the <code>cursor</code> (e.g. <code>return self.cursor</code>). Then when you want to output the data, use the <code>fetchall</code></span>
<span class="comment-copy">@Scratch'N'Purr That seems to have exasperated the problem now: Here are my chancges: <code>def get_blogs(self):</code> <code>self.cursor.execute("SELECT * from lt_blog ORDER BY id DESC LIMIT 5;")</code> <code>return self.cursor</code></span>
<span class="comment-copy">@Scratch'N'Purr That seems to have exasperated the problem now: Here are my chancges: <code>def get_blogs(self):</code> <code>self.cursor.execute("SELECT * from lt_blog ORDER BY id DESC LIMIT 5;")</code> <code>return self.cursor</code>   (doesn't seem to want me to format it in these mini-responses)  then in the main file I handled the cursor: <code>c = bdb.get_blogs()</code> and  <code>blogs = c.fetchall()</code>  and you were correct about <b>fetchall()</b> being the culprit (until I added that back the problem didn't recur) but now its' returning 2 fields/columns from the first row, not just one to output without any output commands.</span>
<span class="comment-copy">Again, thank you!  This solved it!</span>
<span class="comment-copy">thanks readning the documentation now</span>
