<div class="post-text" itemprop="text">
<p>So basically I have an "/add" route where it is used to manually seed in test user data to mongodb and I want to be able to pass that user's ID to the URL for the route "/agreement" so when the user is on the agreement page, their <code>"_id"</code> will be mapped to that URI and the info they enter on the agreement page will update their data that we seeded in the "/add" route.  </p>
<pre><code>@app.route('/add')
def add():
    users = mongo.db.users
    users.insert({
        "_id" : "autogenID",
        "_comment" : " File structure for files in client collection",
        "client_name" : "Name_of_firm",
        "contact_name" : "Name_of_contact",
        "contact_email" : "Email_ID_of_contact",
        "contact_password" : "passowrd_encryped_bcrypt",
        "client_industry" : "client_industry",
        "monthly_checks_processed": "monthly_checks_processed",
        "parent_id" : "client_id",
        "child_id" : [{
            "child_id": "client_id", 
            "child_id": "client_id"
        }],
        "agreement_authorised" : "boolean_yes_no",
        "agreement" : "agreement_text",
        "client_card" : [{
            "name_on_card": "client_name",
            "credit_card_number": "credit_card_number_bycrypt",
            "expiration_date" : "expiration_date_bycrypt",
            "credit_card_cvc" : "credit_card_cvc_bycrypt",
            "active" : "boolean_yes_no"
        }]
    })
    all_users = users.find()
    for user in all_users:
        print user


@app.route('/agreement', methods=['GET', 'POST'])
def agreenment(id):
    user = mongo.db.users.find("_id")
    print user
    return render_template('agreement.html', user=user)
</code></pre>
<p>I think the issue lies in the agreement resource where maybe I should write <code>/agreement/&lt;id&gt;</code> but I think I am missing a fundamental understanding of where the <code>&lt;id&gt;</code> is instantiated.  I also don't completely understand what the function of the agreement parameter is but I put <code>(id)</code> because this seems like something I would have to do in order to get the user's info passed to another resource.  </p>
<p>I also think <code>user = mongo.db.users.find("_id")</code> might not be correct as well as <code>return render_template('agreement.html', user=user)</code>.  Part of me thinks that maybe I should do redirect instead of render but if anyone can lend a hand I would greatly appreciate it.</p>
</div>
<div class="post-text" itemprop="text">
<p>Try this:</p>
<pre><code>@app.route('/agreement/&lt;user_id&gt;', methods=['GET', 'POST'])
def agreement(user_id):
    user = mongo.db.users.find_one({"_id": user_id})
    print user
    return render_template('agreement.html', user=user)
</code></pre>
<p>URL parameter names in Flask are specified in the <code>route</code> parameter, and they have to match the decorated function's signature.</p>
<p>Querying in Mongo is done by passing a dict specifying the constraints, so <code>db.users.find_one({"_id": user_id})</code> will return a single result with _id matching the user_id variable.</p>
<p>Edit: Actually, as per <a href="https://api.mongodb.com/python/current/api/pymongo/collection.html#pymongo.collection.Collection.find_one" rel="nofollow">the documentation</a>, you can just do:
<code>db.users.find_one(user_id)</code>.</p>
</div>
<span class="comment-copy">You should avoid using <code>id</code> as an identifier because you end up shadowing the <a href="https://docs.python.org/3/library/functions.html#id" rel="nofollow noreferrer">built-in function</a>.</span>
