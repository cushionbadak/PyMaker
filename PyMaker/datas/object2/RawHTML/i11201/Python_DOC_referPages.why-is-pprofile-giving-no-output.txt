<div class="post-text" itemprop="text">
<p>I'm new to python and I'd like to use pprofile, but I don't get it running. For example</p>
<pre><code>#pprofile --threads 0 test.py
</code></pre>
<p>gives me the error</p>
<pre><code>bash: pprofile: Command not found.
</code></pre>
<p>I've tried to run pprofiler as a module, like described here: <a href="https://github.com/vpelletier/pprofile" rel="nofollow">https://github.com/vpelletier/pprofile</a> , using the following script:</p>
<pre><code>#!/usr/bin/env sc_python3
# coding=utf-8

import time
import pprofile

def someHotSpotCallable():
    profiler = pprofile.Profile()
    with profiler:
        time.sleep(2)
        time.sleep(1)
    profiler.print_stats()
</code></pre>
<p>Running this script gives no output. Changing the script in the following way</p>
<pre><code>#!/usr/bin/env sc_python3
# coding=utf-8

import time
import pprofile

def someHotSpotCallable():
    profiler = pprofile.Profile()
    with profiler:
        time.sleep(2)
        time.sleep(1)
    profiler.print_stats()

print(someHotSpotCallable())
</code></pre>
<p>gives the Output</p>
<pre><code>Total duration: 3.00326s
None
</code></pre>
<p>How du I get the line-by-line table-output, shown on <a href="https://github.com/vpelletier/pprofile" rel="nofollow">https://github.com/vpelletier/pprofile</a>?</p>
<p>I'm using Python 3.4.3, Version 2.7.3 is giving the same output (only Total duration) on my System.</p>
<p>Do I have to install anything?</p>
<p>Thanks a lot!</p>
</div>
<div class="post-text" itemprop="text">
<p>pprofile author here.</p>
<p>To use pprofile as a command, you would have to install it. The only packaging I have worked on so far is <a href="https://pypi.python.org/pypi/pprofile" rel="nofollow">via pypi</a>. Unless you are using a dependency-gathering tool (like buildout), the easiest is probably to setup a <a href="https://virtualenv.pypa.io/en/stable/" rel="nofollow">virtualenv</a> and install pprofile inside it:</p>
<pre><code>$path_to_your_virtualenv/bin/pip install pprofile
</code></pre>
<p>Besides this, there is nothing else to install: pprofile only depends on python interpreter features (more on this just below).
Then you can run it like:</p>
<pre><code>$path_to_your_virtualenv/bin/pprofile &lt;args&gt;
</code></pre>
<p>Another way to run pprofile would be to fetch the source and run it as a python script rather than as a standa alone command:</p>
<pre><code>$your_python_interpreter $path_to_pprofile/pprofile.py &lt;args&gt;
</code></pre>
<p>Then, about the surprising output: I notice your shebang mentions "sc_python3" as interpreter. What implementation of python interpreter is this ? Would you have some non-standard modules loaded on interpreter start ?</p>
<p>pprofile, in deterministic mode, depends on the interpreter triggering <a href="https://docs.python.org/2/library/sys.html#sys.settrace" rel="nofollow">special events</a> each time a line changes, each time a function is called or each time it returns, and, just for completeness, it also monitors when threads are created as the tracing function is a thread local. It looks like that interpreter does not trigger these events. A possible explanation would be that something else is competing with pprofile for these events: only one function can be registered at a time. For example code coverage tools and debuggers may use this function (or another closely related one in standard sys module, <a href="https://docs.python.org/2/library/sys.html#sys.setprofile" rel="nofollow">setprofile</a>). Just for completeness, setprofile was insufficient for pprofile as it only triggers events on function call/return.</p>
<p>You may want to try the statistic profiling mode of pprofile at the expense of accuracy (but for an extreme reduction in profiler overhead), although there pprofile has to rely on another interpreter feature: the ability to list the <a href="https://docs.python.org/2/library/sys.html#sys._current_frames" rel="nofollow">call stack of all running threads</a>, sadly expected to be less portable than other features of the standard the sys module.</p>
<p>All these work fine in <a href="https://docs.python.org/2/" rel="nofollow">CPython 2.x</a>, <a href="https://docs.python.org/3/" rel="nofollow">CPython 3.x</a>, <a href="http://pypy.org/" rel="nofollow">pypy</a> and (it has been contributed but I haven't tested it myself) <a href="http://ironpython.net/" rel="nofollow">IronPython</a>.</p>
</div>
<span class="comment-copy">thank you, it's working now! your profiler is very well done</span>
