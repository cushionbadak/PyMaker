<div class="post-text" itemprop="text">
<p>I have a query which users order_by on a number of aggregated fields in a database, like so:</p>
<pre><code>list = MyList.objects.filter(key_item=None).extra(
        select={"diff":"abs(field1+field2+field3+field4+field5+field6+field7+field8+field9+field10)"}).order_by('-diff')
</code></pre>
<p>I'm using this is several places within my code and I'd rather have it in some centralized place.</p>
<p>I was wondering the best way in django to reuse this.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can add a manager to your model class to include that as a base filter.
For example:</p>
<pre><code>class MyListManager(models.Manager):
    def select_diff(self):
        return self.get_queryset().extra(...)


class MyList(models.Model):
    objects = MyListManager()
</code></pre>
<p>With this you can simply do:</p>
<pre><code>MyList.objects.select_diff().filter(...)
</code></pre>
<p>You can find more about managers <a href="https://docs.djangoproject.com/es/1.9/topics/db/managers/" rel="nofollow">here</a></p>
<p>One big advantage of doing this over having the queryset written down somewhere is that you can still chain the queryset with additional filters / parameters and you comply with the django standard</p>
</div>
<span class="comment-copy">A <a href="https://docs.python.org/3/library/stdtypes.html#list" rel="nofollow noreferrer">list</a> is inherently an <a href="https://docs.python.org/3/glossary.html#term-iterable" rel="nofollow noreferrer">iterable</a>, what do you mean "access this as an iterable list." ?</span>
<span class="comment-copy">Thanks for pointing me in the right direction.  I've tried a quick implementation and I'm getting an error <code>'function' object has no attribute 'filter'</code>.  Do I need to add something for the filter attribute to work?</span>
<span class="comment-copy">It would appear you are doing <code>select_diff.filter()</code> instead of <code>select_diff().filter()</code> ? That error points to you not having called one of the functions so you are trying to access the filter attribute of it (which does not exist)</span>
