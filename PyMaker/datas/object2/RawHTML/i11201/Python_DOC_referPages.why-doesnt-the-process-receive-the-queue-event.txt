<div class="post-text" itemprop="text">
<p>I am trying to send data to a multi processing Process, using a queue. For some reason, the example does not work. Do you know why?</p>
<p>I expect the program to print out "Received something: hello" and "Received poison pill", but it never gets there. However, it does print "running" and "listening", so I know that it definitely tries to read something from the queue.</p>
<p>I am using Pythong 3.4</p>
<pre><code>from multiprocessing import Process
import queue
import time

class EventAggregatorProcess(Process):

    def __init__(self):
        super(EventAggregatorProcess, self).__init__()
        self.event_queue = queue.Queue()

    def run(self):
        print('running')
        is_stopped=False

        while not is_stopped:
            print('listening')
            msg = self.event_queue.get()
            if msg:
                print('Received something: %s'%msg)
            else:
                print( 'Received poison pill' )
                is_stopped=True


if __name__=='__main__':
    eap = EventAggregatorProcess()
    eap.start()
    time.sleep(1)
    eap.event_queue.put('hello')
    eap.event_queue.put(None)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/queue.html" rel="nofollow">queue</a> module is for multi-threaded programs.  These threads would all be in a single process, meaning they also share memory.  (see the See Also section at the end of the <a href="https://docs.python.org/3/library/queue.html" rel="nofollow">docs</a>)  Your program is <code>multiprocessing</code> meaning you have multiple processes.  These processes do not share memory.  You should use the <a href="https://docs.python.org/3/library/multiprocessing.html#multiprocessing.Queue" rel="nofollow">Queue</a> from the <code>multiprocessing</code> library.  This version of <code>Queue</code> handles the extra work needed for inter process communication.</p>
<pre><code>from multiprocessing import Process, Queue
</code></pre>
</div>
