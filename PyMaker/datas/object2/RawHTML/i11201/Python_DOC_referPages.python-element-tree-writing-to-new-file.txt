<div class="post-text" itemprop="text">
<p>Hi so I've been struggling with this and can't quite figure out why I'm getting errors. Trying to export just some basic XML into a new file, keeps giving me a TypeError. Below is a small sample of the code</p>
<pre><code>from xml.etree.ElementTree import ElementTree
from xml.etree.ElementTree import Element
from xml.etree.ElementTree import SubElement
import xml.etree.ElementTree as ET


root = Element('QuoteWerksXML')
tree = ElementTree(root)
ver = SubElement(root, "AppVersionMajor")
ver.text = '5.1'

tree.write(open('person.xml', 'w'))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write" rel="noreferrer"><code>ElementTree.write</code></a> method defaults to us-ascii encoding and as such expects a file opened for writing binary:</p>
<blockquote>
<p>The output is either a string (str) or binary (bytes). This is controlled by the encoding argument. If <em>encoding</em> is <code>"unicode"</code>, the output is a string; otherwise, it’s binary. Note that this may conflict with the type of <em>file</em> if it’s an open file object; make sure you do not try to write a string to a binary stream and vice versa.</p>
</blockquote>
<p>So either open the file for writing in binary mode:</p>
<pre><code>tree.write(open('person.xml', 'wb'))
</code></pre>
<p>or open the file for writing in text mode and give <code>"unicode"</code> as <em>encoding</em>:</p>
<pre><code>tree.write(open('person.xml', 'w'), encoding='unicode')
</code></pre>
</div>
<span class="comment-copy">Please post the whole traceback.</span>
<span class="comment-copy">And if writing to standard output, you can use <code>tree.write(sys.stdout.buffer)</code>.</span>
<span class="comment-copy">in my case encoding could not be 'unicode'. I had to change it to "UTF-8" instead</span>
