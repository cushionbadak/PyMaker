<div class="post-text" itemprop="text">
<p>I have made a flask app that relies on having session cookies for logging in. However, whenever I reopen my browser and visit <a href="http://localhost:5000/" rel="nofollow noreferrer">http://localhost:5000/</a>, the cookie disappears and I am logged out.</p>
<p>Here is some of my code:</p>
<pre><code>app = Flask(__name__)
app.config["SECRET_KEY"] = &lt;bytes object generated by os.urandom(24)&gt;
app.config["PERMANENT_SESSION_LIFETIME"] = timedelta(hours=1)


@app.route("/")
def login_redirect():
    if check_login(session, False):
        return redirect("/interface")
    return redirect("/login")


def check_login(session, requires_elevated):
    if "username" not in session:
        return False
    elif session["username"] == "admin":
        return True
    elif session["username"] == "regular" and not requires_elevated:
        return True
    return False
</code></pre>
<p>I didn't want to paste all of it because some if it is private, but if there is anything else I can include that may be helpful then let me know and I will do so.</p>
<p>Thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p>In a <code>before_request</code> you need to set the session to be permanent so that it abides by your config setting:</p>
<pre><code>@app.before_request
def setup():
    session.permanent = True
</code></pre>
</div>
<span class="comment-copy">Thanks that worked.</span>
