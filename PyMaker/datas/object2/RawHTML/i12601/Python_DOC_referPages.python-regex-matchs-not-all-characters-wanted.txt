<div class="post-text" itemprop="text">
<p>I have some txt-files made from pdfs and want so add some xml-tags using a little python-script and regex-patterns. Mostly it works fine but sometimes an expression matches not all the characters wanted. In the testing tool <a href="https://regex101.com/#python" rel="nofollow">here</a> it works right.</p>
<p>Here's the python-code:</p>
<pre><code>matchs = re.finditer("&lt;UTop&gt;[^&lt;]+",string)
    for m in matchs:
        tagend = m.end()
        string = string[:tagend] + "&lt;/UTop&gt;" + string[tagend:]
</code></pre>
<p>The original string...</p>
<pre><code>&lt;Top&gt;1. Regierungserklärung des Ministerpräsidenten&lt;UTop&gt;Ministerpräsident Winfried Kretschmann &lt;/Top&gt;
</code></pre>
<p>... should be transformed to:</p>
<pre><code>&lt;Top&gt;1. Regierungserklärung des Ministerpräsidenten&lt;UTop&gt;Ministerpräsident Winfried Kretschmann &lt;/UTop&gt;&lt;/Top&gt;
</code></pre>
<p>but it returns</p>
<pre><code>&lt;Top&gt;1. Regierungserklärung des Ministerpräsidenten&lt;UTop&gt;Ministerpräsident Winfried Krets&lt;/UTop&gt;chmann &lt;/Top&gt;
</code></pre>
<p>instead.</p>
<p>I would be glad to get a reply to that question.
Jan</p>
</div>
<div class="post-text" itemprop="text">
<p>I test it using <a href="https://docs.python.org/3/library/re.html#re.sub" rel="nofollow">re.sub()</a> and the result seems to be right.</p>
<pre><code> #coding: utf-8
 import re
 input = "&lt;Top&gt;1. Regierungserklärung des Ministerpräsidenten&lt;UTop&gt;Ministerpräsident Winfried Kretschmann &lt;/Top&gt;"
 print(re.sub(r"(&lt;UTop&gt;[^&lt;]+)","\g&lt;1&gt;&lt;\\UTop&gt;" ,input))
</code></pre>
<p>As you said regex testing tools works properly too. <a href="https://regex101.com/r/eX1fN2/1" rel="nofollow">here</a></p>
</div>
<div class="post-text" itemprop="text">
<p>Use the Unicode flag:</p>
<pre><code>matchs = re.finditer("&lt;UTop&gt;[^&lt;]+",string,re.UNICODE)
</code></pre>
<p>For HTML consider using <a href="http://www.crummy.com/software/BeautifulSoup/" rel="nofollow">BeautifulSoup</a> instead.</p>
</div>
<span class="comment-copy">In case you are trying to parse HTML with regex, <a href="http://stackoverflow.com/a/1732454/4464702">see this</a></span>
<span class="comment-copy">Hey, that works. Thanks a lot!</span>
<span class="comment-copy">+1 for BeautifulSoup. See also <a href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/#differences-between-parsers" rel="nofollow noreferrer">docs</a> for details regarding the handling of broken HTML input.</span>
<span class="comment-copy">Thanks for your answer. Unfortunately unicode flags didn't solve the problem.</span>
