<div class="post-text" itemprop="text">
<p>I am running a python script that checks a text file on my server and then turns on a relay dependent on what it reads. If it turns on the relay after a time delay the script sends a GET request to update the text file on the server to then turn the relay off. 
The program runs all ok for some time. I can turn on and off the relay ans it updates the server when the time delay has time out.
If i leave the program running and  do nothing after some time i get the following error.</p>
<pre><code>Traceback (most recent call last):
File "remote-relay.py", line 41, in &lt;module&gt;
  readWeb ()
File "remote-relay.py", line 34, in readWeb
  relaystatus = urllib2.urlopen(url).read(1)
File "/usr/lib/python2.7/urllib2.py", line 154, in urlopen
  return opener.open(url, data, timeout)
File "/usr/lib/python2.7/urllib2.py", line 431, in open
  response = self._open(req, data)
File "/usr/lib/python2.7/urllib2.py", line 449, in _open
  '_open', req)
File "/usr/lib/python2.7/urllib2.py", line 409, in _call_chain
  result = func(*args)
File "/usr/lib/python2.7/urllib2.py", line 1227, in http_open
  return self.do_open(httplib.HTTPConnection, req)
File "/usr/lib/python2.7/urllib2.py", line 1197, in do_open
  raise URLError(err)
urllib2.URLError: &lt;urlopen error [Errno -2] Name or service not known&gt;
</code></pre>
<p>this is the python script</p>
<pre><code>import urllib2
import wiringpi2
import time

url = "http://www.stevesolarhome.com/WaterControl.txt"
url2 = "http://www.stevesolarhome.com/water/water.php?status=0"
wiringpi2.wiringPiSetupGpio()
wiringpi2.pinMode(17,1)
wiringpi2.pinMode(27,1)
wiringpi2.pinMode(22,1)
wiringpi2.digitalWrite(17,1)
wiringpi2.digitalWrite(27,1)
wiringpi2.digitalWrite(22,1)
def requestOFF ():
    request = urllib2.urlopen(url2).read(1)
def delay ():
    counter = 0
    while counter &lt; 400:
        counter += 1 
        time.sleep(2)
            relaystatus = urllib2.urlopen(url).read(1)
            if relaystatus == "0":
            waterOFF ()
            counter = 400
        time.sleep(2)
    requestOFF ()
    time.sleep(3)
def waterOn ():
    wiringpi2.digitalWrite(17,0)
    delay ()        
def waterOFF ():
    wiringpi2.digitalWrite(17,1)
def readWeb ():
    relaystatus = urllib2.urlopen(url).read(1)
    if relaystatus == "1":
        waterOn ()
    elif relaystatus == "0":
        waterOFF ()
    time.sleep(2)
while 1:
    readWeb ()  
</code></pre>
<p>It cant be a URL no found as the URL exists and the program runs all ok at the beginning.</p>
<p>Is the script wrong, or is it requesting data to often </p>
</div>
<div class="post-text" itemprop="text">
<p>It sounds to me like your internet connection or DNS resolution randomly dies.</p>
<p>The "Name or service not known" error happens when for some reason, the URL cannot be resolved via DNS.</p>
</div>
<span class="comment-copy">is there a way to resend the request if this happens and stop the python program crashing</span>
<span class="comment-copy">Yes, you can "catch" (using an "except" block) the URLError to handle it. Look here for more info: <a href="https://docs.python.org/3/tutorial/errors.html#handling-exceptions" rel="nofollow noreferrer">docs.python.org/3/tutorial/errors.html#handling-exceptions</a></span>
<span class="comment-copy">Thanks for the link i will have a read of this tonight and see if i can get this to work</span>
