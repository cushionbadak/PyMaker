<div class="post-text" itemprop="text">
<p>I need a recursive function that makes all possible permutations of a given list and length, with replacement:</p>
<pre><code>&gt;&gt;&gt; rec_offspring(3,[2,3])
[[2, 2, 2], [3, 2, 2], [2, 3, 2], [3, 3, 2], [2, 2, 3], [3, 2, 3], [2, 3, 3], [3, 3, 3]]
</code></pre>
<p>I found the code below, but it gives only the combos; it doesn't repeat an element,, such as [222] [322] etc.</p>
<pre><code>def choose_sets(mylist,length):
    mylen = len(mylist)

    if length == 1:
        return [[i] for i in mylist]
    if length &gt; mylen:
        return []

    ToRet = []
    for k in xrange(mylen): 
        if mylen - k + 1&gt; length :
            for j in choose_sets(mylist[k+1:],length-1):
                New = [mylist[k]]
                New.extend(j)
                ToRet.append(New)
    return ToRet
print choose_sets([1,2,3,4,5],3)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This is called cartesian product. You can use <code>itertools</code> <a href="https://docs.python.org/3/library/itertools.html#itertools.product">module</a> for it:</p>
<pre><code>&gt;&gt;&gt; from itertools import product
&gt;&gt;&gt; list(product([2,3], repeat=3))
[(2, 2, 2), (2, 2, 3), (2, 3, 2), (2, 3, 3), (3, 2, 2), (3, 2, 3), (3, 3, 2), (3, 3, 3)]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You have three basic problems:</p>
<p>(1) In your recursive call, you chopped off the chosen elements.  Instead, pass them all through to the next level.  Replace</p>
<pre><code>for j in choose_sets(mylist[k+1:],length-1):
</code></pre>
<p>with</p>
<pre><code>for j in choose_sets(mylist,length-1):
</code></pre>
<p>(2) You restricted the number of elements you'd consider, such that the elements are in non-decreasing order.  Remove the line</p>
<pre><code>    if mylen - k + 1&gt; length:
</code></pre>
<p>(3) Finally, you've restricted the return list to the length of your input list.  This means that with only 2 elements (such as [2, 3]) you cannot return a choice list of 3 elements (such as [2, 3, 2]).  Remove the offending code:</p>
<pre><code>if length &gt; mylen:
    return []
</code></pre>
<p>The resulting program appears to do what you want, returning:</p>
<pre><code>&gt;&gt;&gt; print choose_sets([2,3], 3)
[[2, 2, 2], [2, 2, 3], [2, 3, 2], [2, 3, 3], [3, 2, 2], [3, 2, 3], [3, 3, 2], [3, 3, 3]]
&gt;&gt;&gt; print choose_sets([1,2,3,4,5], 3)
[[1, 1, 1], [1, 1, 2], [1, 1, 3], [1, 1, 4], [1, 1, 5], [1, 2, 1], [1, 2, 2], [1, 2, 3], [1, 2, 4], [1, 2, 5], [1, 3, 1], [1, 3, 2], [1, 3, 3], [1, 3, 4], [1, 3, 5], [1, 4, 1], [1, 4, 2], [1, 4, 3], [1, 4, 4], [1, 4, 5], [1, 5, 1], [1, 5, 2], [1, 5, 3], [1, 5, 4], [1, 5, 5], [2, 1, 1], [2, 1, 2], [2, 1, 3], [2, 1, 4], [2, 1, 5], [2, 2, 1], [2, 2, 2], [2, 2, 3], [2, 2, 4], [2, 2, 5], [2, 3, 1], [2, 3, 2], [2, 3, 3], [2, 3, 4], [2, 3, 5], [2, 4, 1], [2, 4, 2], [2, 4, 3], [2, 4, 4], [2, 4, 5], [2, 5, 1], [2, 5, 2], [2, 5, 3], [2, 5, 4], [2, 5, 5], [3, 1, 1], [3, 1, 2], [3, 1, 3], [3, 1, 4], [3, 1, 5], [3, 2, 1], [3, 2, 2], [3, 2, 3], [3, 2, 4], [3, 2, 5], [3, 3, 1], [3, 3, 2], [3, 3, 3], [3, 3, 4], [3, 3, 5], [3, 4, 1], [3, 4, 2], [3, 4, 3], [3, 4, 4], [3, 4, 5], [3, 5, 1], [3, 5, 2], [3, 5, 3], [3, 5, 4], [3, 5, 5], [4, 1, 1], [4, 1, 2], [4, 1, 3], [4, 1, 4], [4, 1, 5], [4, 2, 1], [4, 2, 2], [4, 2, 3], [4, 2, 4], [4, 2, 5], [4, 3, 1], [4, 3, 2], [4, 3, 3], [4, 3, 4], [4, 3, 5], [4, 4, 1], [4, 4, 2], [4, 4, 3], [4, 4, 4], [4, 4, 5], [4, 5, 1], [4, 5, 2], [4, 5, 3], [4, 5, 4], [4, 5, 5], [5, 1, 1], [5, 1, 2], [5, 1, 3], [5, 1, 4], [5, 1, 5], [5, 2, 1], [5, 2, 2], [5, 2, 3], [5, 2, 4], [5, 2, 5], [5, 3, 1], [5, 3, 2], [5, 3, 3], [5, 3, 4], [5, 3, 5], [5, 4, 1], [5, 4, 2], [5, 4, 3], [5, 4, 4], [5, 4, 5], [5, 5, 1], [5, 5, 2], [5, 5, 3], [5, 5, 4], [5, 5, 5]]
</code></pre>
</div>
<span class="comment-copy">Are you doing matrix multiplication?</span>
<span class="comment-copy">Did you try <i>itertools.product([2,3], repeat=3)</i> ?</span>
<span class="comment-copy">thanks man i found that  but i need a recursive code , this is and assigment from the teacher</span>
<span class="comment-copy">Well if it's a homework, then you should do it yourself, don't you think? this isn't a place to get homework solved but get questions answered from what you've tried and doesn't work.</span>
<span class="comment-copy">ok... thanks either way :)</span>
<span class="comment-copy">THANK YOU very much!</span>
<span class="comment-copy">You're welcome.  Remember to upvote good answers and to choose your favourite when the time comes.</span>
<span class="comment-copy">u are the favourite one for sure this site is amazing</span>
