<div class="post-text" itemprop="text">
<p>I am using Vis Studio Code and python3 (On IOs)</p>
<p>In terminal if I type the following command:</p>
<pre><code>curl --data "method=getmydata" https://mywebsite.com/api
</code></pre>
<p>when I substitute the method for a relevant one and the website for the relevant website, it returns all the data I'm looking for. </p>
<p>However, I want to write a python script  which will do this (in visual studio code) and write the output json to a file I can then interrogate.</p>
<p>How do I do the this using urllib or requests instead?</p>
</div>
<div class="post-text" itemprop="text">
<p>Here is code using <code>requests</code> package </p>
<p><a href="http://docs.python-requests.org/en/master/user/quickstart/" rel="nofollow noreferrer">http://docs.python-requests.org/en/master/user/quickstart/</a></p>
<pre><code>import json
import requests
data = {'key1': 'value1', 'key2': 'value2'}
data = json.dumps(data)
headers = {'Content-Type': 'application/json'}

r = requests.post("https://mywebsite.com/api", data=data, headers=headers)
print(r.text)   # or r.json() if response is json
</code></pre>
<p>If your api accepts form data then don't pass <code>Content-Type</code> header and also, no need to dumps your data. It will be</p>
<pre><code>import requests
data = {'key1': 'value1', 'key2': 'value2'}
r = requests.post("https://mywebsite.com/api", data=data)
print(r.text)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Take a look at <a href="https://docs.python.org/3/library/urllib.request.html#module-urllib.request" rel="nofollow noreferrer">urllib.request</a>, working example:</p>
<pre><code>def run_webRequest(url):
    import urllib.request
    opener = urllib.request.FancyURLopener({})   
    with opener.open(url) as f:
        print(f.read().decode('utf-8'))
</code></pre>
<p>You can then istead of reading, write <code>f</code> to a file and read it afterwards. Hope it helps.</p>
</div>
<span class="comment-copy">Try using this <a href="https://curl.trillworks.com/" rel="nofollow noreferrer">cURL to Requests</a></span>
<span class="comment-copy">Thanks, Appreciate your assistance.  your second solution worked a treat!</span>
