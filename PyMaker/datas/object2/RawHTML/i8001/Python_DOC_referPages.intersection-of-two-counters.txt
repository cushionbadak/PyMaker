<div class="post-text" itemprop="text">
<p>I'm trying to find the shared elements (and the shared number of occurrences) between two lists. For example, the intersection of these two lists:</p>
<pre><code>a = [1, 1, 2, 3, 4, 5, 6, 7, 8, 1]
b = [1, 1, 3, 5, 7, 9]
</code></pre>
<p>should return <code>Counter({1: 2, 3: 1, 5: 1, 7: 1})</code> or something similar, e.g. <code>{1: 2, 3: 1, 5: 1, 7: 1}</code> or <code>[1, 1, 3, 5, 7]</code> (order of the list doesn't matter). </p>
<p>I already have an approach that works:</p>
<pre><code>cnts_a = Counter(a)
cnts_b = Counter(b)
cnts_a_b = Counter()  # counter for the shared values
for key in set(cnts_a).intersection(cnts_b):
    cnts_a_b[key] = min(cnts_a[key], cnts_b[key])
</code></pre>
<p>But perhaps there is an easier (or faster) way?</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>&amp;</code> for intersection:</p>
<pre><code>&gt;&gt;&gt; Counter(a) &amp; Counter(b)
Counter({1: 2, 3: 1, 5: 1, 7: 1})
</code></pre>
<p><a href="https://docs.python.org/3/library/collections.html#collections.Counter" rel="noreferrer">From docs</a>:</p>
<blockquote>
<p>Intersection(<code>&amp;</code>) and union(<code>|</code>) return the <strong>minimum</strong> and <strong>maximum</strong> of corresponding counts.</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>Instead of</p>
<pre><code>cnts_a_b = Counter()  # counter for the shared values
for key in set(cnts_a).intersection(cnts_b):
    cnts_a_b[key] = min(cnts_a[k], cnts_b[k])
</code></pre>
<p>use</p>
<pre><code>cnts_a_b = cnts_a &amp; cnts_b
</code></pre>
<p>as <code>&amp;</code> means the <em>intersection</em> of the <code>Counter</code> objects.</p>
</div>
