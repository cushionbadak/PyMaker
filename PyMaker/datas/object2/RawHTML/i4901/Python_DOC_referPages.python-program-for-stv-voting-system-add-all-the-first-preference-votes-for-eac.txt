<div class="post-text" itemprop="text">
<p>Firstly, I have a text file which shows the voting scores of 5 candidates in 4 ballots below: </p>
<p>1, 2, 3, 0, 0</p>
<p>2, 3, 1, 0, 0</p>
<p>3, 1, 0, 0, 2</p>
<p>0, 2, 0, 3, 1</p>
<p>Voters put their first three preferences and the two remaining candidates get zeros.</p>
<p>Using the program below, each scores for each candidate gets put in a 2dimensional array and the quota is calculated.</p>
<pre><code>with open("textdata.txt","r") as f:
    ReadTextFile = f.read()

RawVotesArray = ReadTextFile.split("\n")
TwoDArrayRows = [item for item in RawVotesArray if item != ""]
TwoDArrayRows = [item.split(",") for item in TwoDArrayRows]
print(TwoDArrayRows)

CandidateA = [row[0] for row in TwoDArrayRows]
Preference1CA = CandidateA.count("1")

CandidateB = [row[1] for row in TwoDArrayRows]
Preference1CB = CandidateB.count("1")

CandidateC = [row[2] for row in TwoDArrayRows]
Preference1CC = CandidateC.count("1")

CandidateD = [row[3] for row in TwoDArrayRows]
Preference1CD = CandidateD.count("1")

CandidateE = [row[4] for row in TwoDArrayRows]
Preference1CE = CandidateE.count("1")

ValidVotes = 4
NumberOfSeats = 2
quota = int((ValidVotes/(NumberOfSeats + 1))+1)
print(quota)
</code></pre>
<p>The output to this is:</p>
<p>[['1', ' 2', ' 3', ' 0', ' 0'], ['2', ' 3', ' 1', ' 0', ' 0'], ['3', ' 1', ' 0', ' 0', ' 2'], ['0', ' 2', ' 0', ' 3', ' 1']]
2</p>
<p>The 2 at the end is the quota. For a candidate to win, the total of their first preference votes (the 1s) have to reach or exceed the quota of 2. I do not know how to code a function so that the first preference votes of each candidate are added up together.</p>
</div>
<div class="post-text" itemprop="text">
<p>You need to be careful what you are counting. If you look closely, you are counting <code>"1"</code>, but because of the way you read your votes in, you could have <code>"1"</code> or <code>" 1"</code>. To get around this, read your file in line by line and remove any leading/trailing spaces by using <code>.strip()</code>:</p>
<pre><code>votes = []

with open("textdata.txt","r") as f_input:
    for line in f_input:
        if len(line.strip()):
            votes.append([value.strip() for value in line.split(',')])
</code></pre>
<p>This will also strip the trailing newline of the last value in each line. <code>votes</code> would then contain:</p>
<pre><code>[['1', '2', '3', '0', '0'], ['2', '3', '1', '0', '0'], ['3', '1', '0', '0', '2'], ['0', '2', '0', '3', '1']]
</code></pre>
<p>To total up all the first preference votes you could use <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists" rel="nofollow noreferrer"><code>index()</code></a> to tell you where the <code>1</code> is in the list (<code>0</code> being the first location). With this you could keep a total for each using a list of counters:</p>
<pre><code>candidate_first_pref = [0, 0, 0, 0, 0]

for vote in votes:
    candidate_first_pref[vote.index('1')] += 1

print(candidate_first_pref)
</code></pre>
<p>So at the end your <code>candidate_first_pref</code> would have:</p>
<pre><code>[1, 1, 1, 0, 1]
</code></pre>
</div>
