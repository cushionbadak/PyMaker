<div class="post-text" itemprop="text">
<p>I have the following code running and I would like to have the output of the script exported to a .txt file for later viewing. How could I go about doing this?</p>
<pre><code>import socket, threading


def TCP_connect(ip, port_number, delay, output):
    TCPsock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    TCPsock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    TCPsock.settimeout(delay)
try:
    TCPsock.connect((ip, port_number))
    output[port_number] = 'Listening'
except:
    output[port_number] = ''



def scan_ports(host_ip, delay):

    threads = []        # To run TCP_connect concurrently
    output = {}         # For printing purposes

# Spawning threads to scan ports
for i in range(10000):
    t = threading.Thread(target=TCP_connect, args=(host_ip, i, delay, output))
    threads.append(t)

# Starting threads
for i in range(10000):
    threads[i].start()

# Locking the script until all threads complete
for i in range(10000):
    threads[i].join()

# Printing listening ports from small to large
for i in range(10000):
    if output[i] == 'Listening':
        print(str(i) + ': ' + output[i])



def main():
host_ip = input("Enter host IP: ")
delay = int(input("How many seconds the socket is going to wait until timeout: "))
scan_ports(host_ip, delay)

if __name__ == "__main__":
    main()

print ("Thank you for scanning")
</code></pre>
<p>Any help would be greatly appreciated.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>with open("your_desired_txt_filename", "a") as myFile:
</code></pre>
<p>Then, at the part where you want to write to the file:</p>
<pre><code>myFile.write(your_content) ## Indent this line with the suitable level of indentation (it will be at least one indentation level  deeper than the `with` clause
</code></pre>
</div>
<span class="comment-copy"><a href="https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files" rel="nofollow noreferrer">docs.python.org/3/tutorial/â€¦</a>. If you're using bash, you could just do something like <code>python file.py &gt; file.txt</code></span>
<span class="comment-copy">I suggest you look at the <a href="https://docs.python.org/3/library/logging.html" rel="nofollow noreferrer"><code>logging</code></a> module. You can configure it to output to both the console and a file.</span>
<span class="comment-copy">You cannot append to a file object. You mean <code>myFile.write(your_content)</code>. Also it would need to be indented under the <code>with</code></span>
<span class="comment-copy">@MartinEvans Just realised what you mean ... fixed it :)</span>
