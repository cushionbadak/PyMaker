<div class="post-text" itemprop="text">
<p>I have been using this code for a while, the problem I am having is when I pull from Twitter API, commas separate the cells in my CSV file. Some tweets and some data Twitter gives you contains commas, so my cells end up being on different columns. For example, while the text of one tweet might be in the third column, one other could be in the third, fourth and fifth. I need some way to fix this.  </p>
<p>Here is my code:</p>
<pre><code>class listener(StreamListener):

    def on_data(self, data):
        # Check for a field unique to tweets (if missing, return immediately)
        if "in_reply_to_status_id" not in data:
            return
        with open("trump.csv", 'a') as saveFile:
            try:
                saveFile.write(json.dumps(data.replace(",",",")) + "\n")


            except (BaseException, e):
                print ("failed on data", str(e))
                time.sleep(5)
            return True
    def on_error(self, status):
        print (status)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>firstly the csv can be generated in a way that commas within a quoted block are treated as part of the block, see <a href="https://stackoverflow.com/questions/14144315/remove-unwanted-commas-from-csv-using-python">this post</a>.
it has two answers, one using double quotes and the other inverted, I am not sure what is the actual one that works.</p>
<pre><code>import csv

with open('trump.csv', 'rb') as inputfile:
    rows = csv.reader(inputfile, delimiter=',', quotechar='`')
    for row in rowreader:
        print row
</code></pre>
<p>if this is not applicable and you need to remove commas from your file altogether, do something like:</p>
<pre><code>with open("trump.csv") as inputfile, open("output.csv", "w") as outputfile:
    for line in inputfile:
        outputfile.write(line.replace(",", ""))
</code></pre>
<p>or whatever your input may be you can manipulate a string and replace commas for spaces.</p>
</div>
<span class="comment-copy">Please post an example of such a csv file, I think I could help you if I had more information!</span>
<span class="comment-copy">Why don't you use <a href="https://docs.python.org/3/library/csv.html" rel="nofollow noreferrer">the CSV module</a>, which will quote fields that contain the delimiter? That's the standard solution to dealing with columns that may contain the delimiter you're using. Or you could switch to a delimiter than <i>won't</i> be in the data (tricky in the case of tweets, though).</span>
