<div class="post-text" itemprop="text">
<p><strong>If I have a CSV (info.csv) file below:</strong></p>
<blockquote>
<p>180101, S1, -1</p>
<p>180101, S2, 15</p>
<p>180102, S4, -5</p>
<p>180103, S1, -5</p>
<p>... </p>
</blockquote>
<p>The columns mean "date", "code", "info1" respectively.</p>
<p>I want to convert new code (csv file, newcode.scv) matching in original data.</p>
<p><strong>such as new code mapping is below:</strong></p>
<blockquote>
<p>180101, N1</p>
<p>180102, N2</p>
<p>180103, W1</p>
<p>...</p>
</blockquote>
<p>Regard it as a one to one relation, no duplicates.</p>
<p><strong>So new data from it:</strong></p>
<blockquote>
<p>180101, N1, -1</p>
<p>180101, N2, 15</p>
<p>180102, N2, -5</p>
<p>180103, W1, -5</p>
</blockquote>
<p>Is there a nine fancy way of converting?</p>
</div>
<div class="post-text" itemprop="text">
<p>One way is to use <code>pandas</code>, which specializes in vectorised computations. A pure <code>csv</code> method will likely be loop-based and inefficient.</p>
<pre><code>import pandas as pd

df = pd.read_csv('info_in.csv', sep=', ', engine='python',
                 header=None, names=['date', 'code', 'info1'])

#      date code  info1
# 0  180101   S1     -1
# 1  180101   S2     15
# 2  180102   S4     -5
# 3  180103   S1     -5

d = {'S1': 'N1', 'S2': 'N2', 'S4': 'W1'}
df['code'] = df['code'].map(d)
df.to_csv('info_out.csv', index=False)

#      date code  info1
# 0  180101   N1     -1
# 1  180101   N2     15
# 2  180102   W1     -5
# 3  180103   N1     -5
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The csv module of the standard library has a bunch of useful functions for dealing with csv files including easy ways to both read and write them. DictReader is the one you'd want to look at for converting entries into a dictionary.</p>
<p><a href="https://docs.python.org/3/library/csv.html" rel="nofollow noreferrer">csv module documentation</a></p>
</div>
<span class="comment-copy">pandas is most likely overkill for this task.</span>
<span class="comment-copy">@allo, it depends on the size of your data / scope of project. The likelihood is that this isn't the only manipulation that user will ever do with the data.</span>
<span class="comment-copy">Great I works thanks !</span>
