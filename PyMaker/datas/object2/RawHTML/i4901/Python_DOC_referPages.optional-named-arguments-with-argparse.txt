<div class="post-text" itemprop="text">
<p>It's valid to use my Python program in any of these 3 ways:</p>
<pre><code>$ python prog.py # 1
$ python prog.py -d # 2
$ python prog.py -d FILE # 3
</code></pre>
<p>Each of these do different things. (1) does not dump stuff to a file at all. (2) dumps it to <code>dump.log</code>. (3) dumps it to <code>FILE</code>.</p>
<p>I'm unsure how to distinguish between (1) and (2) after I've called <code>parse_args()</code>. Here is my code:</p>
<pre><code>parser = ArgumentParser()
parser.add_argument(
    '-t', '--tag-dump',
    metavar='FILE',
    help="dump enriched tags to FILE (default: dump.log)",
    action='store',
    nargs='?',
    dest='etags_filename',
    default='dump.log'
)
args = parser.parse_args()
</code></pre>
<p>What do I do now?</p>
</div>
<div class="post-text" itemprop="text">
<p>You just need to provide a <a href="https://docs.python.org/3/library/argparse.html#const" rel="nofollow noreferrer"><code>const</code></a> argument to <code>parser.add_argument()</code>. This specifies the value that will be filled in if the option is used without specifying a value on the command line. You can then test whether <code>args.etags_filename</code> is the <code>const</code> value (case 2) or the <code>default</code> value <code>'dump.log'</code> (case 1).</p>
</div>
<span class="comment-copy">Define a <code>const</code> parameter as well.</span>
<span class="comment-copy">Have you tried running this? The fact that you have <code>-t</code>  the hyphen before the flag indicates that it is optional.</span>
<span class="comment-copy">Your sample command line uses <code>-d</code> but your code snippet defines <code>-t</code> and not <code>-d</code>. Which is it?</span>
<span class="comment-copy">See <a href="https://stackoverflow.com/questions/48412407/argparse-optional-argument-with-different-default-if-specified-without-a-value">Argparse optional argument with different default if specified without a value</a></span>
