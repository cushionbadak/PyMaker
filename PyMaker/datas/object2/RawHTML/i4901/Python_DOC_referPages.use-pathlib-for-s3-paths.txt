<div class="post-text" itemprop="text">
<p>I would like to build some functionality to move files between s3 and my local file system, but pathlib appears to eat up repeated slashes, breaking my aws-cli functionality:</p>
<pre><code>from pathlib import Path
p = Path('s3://loc')
str(p)
=&gt; 's3:/loc'
</code></pre>
<p>Is there a way to use pathlib for manipulating s3 paths?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can try combining <a href="https://docs.python.org/3/library/urllib.parse.html" rel="nofollow noreferrer">urllib.parse</a> with <a href="https://docs.python.org/3/library/pathlib.html" rel="nofollow noreferrer">pathlib</a>.</p>
<pre><code>from urllib.parse import urlparse, urlunparse
from pathlib import PosixPath

s3_url = urlparse('s3://bucket/key')
s3_path = PosixPath(s3_url.path)
s3_path /= 'hello'
s3_new_url = urlunparse((s3_url.scheme, s3_url.netloc, s3_path.as_posix(), s3_url.params, s3_url.query, s3_url.fragment))
print(s3_new_url)
</code></pre>
<p>It's quite cumbersome, but it's what you asked for.</p>
</div>
<div class="post-text" itemprop="text">
<p>No.  <code>pathlib</code> is for <em>filesystem</em> paths (i.e., paths to files on your computer), while S3 paths are URIs.</p>
</div>
<span class="comment-copy"><a href="https://mail.python.org/pipermail/python-ideas/2016-March/039268.html" rel="nofollow noreferrer">heres</a> a discussion about adding URI functionality to the pathlib module some day.</span>
