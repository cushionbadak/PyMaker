<div class="post-text" itemprop="text">
<p>This should be simple, but could not get it to work.</p>
<p>I have some strings returned to me by the geolocation MapQuest API. I want to isolate the state name from strings like these, which is kind of hard. Think of 'Pennsylvania Avenue' (which is in D.C.), then there is 'Washington', which can be a state, as well as a street name, and a city.</p>
<pre><code>s = "Goldman Sachs Tower, 200, West Street, Battery Park City, Manhattan Community Board 1, New York County, NYC, New York, 10282, United States of America"
s = "9th St NW, Logan Circle/Shaw, Washington, District of Columbia, 20001, United States of America"
s = "Casper, Natrona County, Wyoming, United States of America"
</code></pre>
<p>But I noticed that MapQuest writes the state name just before the zip code, near the end of the string.</p>
<p>To obtain the state name, this works, <strong>that is, if there is a zip code</strong>: </p>
<pre><code>s = s.split(",")
s = [x.strip() for x in s]
state = s[-3]
</code></pre>
<p>However, <strong>when there is no zip code</strong>, as in the third string, then I get the county (Natrona County).</p>
<p>I tried to eliminate the zip code by:</p>
<pre><code>s = s.split(",")
s = [x.strip() for x in s if '\d{5}' not in x ]
</code></pre>
<p>But the regex <code>'\d{5}'</code> does not work - I want Wyoming, not Natrona County.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>re</code>:</p>
<pre><code>import re

s = "9th St NW, Logan Circle/Shaw, Washington, District of Columbia, 20001, United States of America"

s = s.split(",")
number = re.compile(r"\d{5}")
s = [x.strip() for x in s if not number.search(x)]
print s
print s[-2]
</code></pre>
<p>output:</p>
<pre><code>['9th St NW', 'Logan Circle/Shaw', 'Washington', 'District of Columbia', 'United States of America']
District of Columbia
</code></pre>
<p>Here is some small easy tutorial on it: <a href="https://www.guru99.com/python-regular-expressions-complete-tutorial.html" rel="nofollow noreferrer">regex tutorial</a></p>
</div>
<span class="comment-copy">are you importing the re module? and then setting up your regex for searching etc? If not I suggest you read <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">docs.python.org/3/library/re.html</a></span>
<span class="comment-copy">yep,  I indeed  <code>import re</code></span>
