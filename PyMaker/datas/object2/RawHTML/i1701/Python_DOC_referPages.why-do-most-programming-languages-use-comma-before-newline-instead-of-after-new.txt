<div class="post-text" itemprop="text">
<p>To explain why I've come up with this question, I'll explain python3's commonly used multiline list/dictionary notations and what actual syntax definition looks like.</p>
<p>This is the most commonly used multiline list notation in python3:</p>
<pre><code>list_variable = [
    'value1',
    'value2',
    # The last comma after 'value2' is sometimes omitted.
]
</code></pre>
<p>And, to understand how this notation is recognized by parser, we need to look at grammar definition(<a href="https://docs.python.org/3/reference/grammar.html" rel="nofollow noreferrer">link</a>).</p>
<p>In the definition of python, list-like definitions are defined similar to this:</p>
<pre><code>list_like: '[' [element (',' element)* [','] ] ']'
</code></pre>
<p>Let me explain this a little bit more, just in case you're not familiar with syntax definition or I'm a bad summarizer:</p>
<ol>
<li><p><code>''</code> means it is actually a character. For example, <code>'['</code> and <code>']'</code> are list's ending or beginning in pure character, which will be <strong>[</strong> 'value1', 'value2', <strong>]</strong> in actual code.</p></li>
<li><p><code>element</code> is their type's expected elements. for example, If it's a list, it will be a single variable. If it's a dictionary, it will be <code>key ':' value</code>.</p></li>
<li><p><code>[]</code> means all things inside that are optional.</p></li>
<li><p><code>()</code> means all things inside that are in one set. i.e. It all comes together.</p></li>
<li><p><code>*</code> means a syntax set preceding that may occur 0 or more times. In this example, <code>(',' element)</code> may be omitted, but it also may occur 3 times.</p></li>
<li><p>I almost forgot to mention, that these rules are applied after whitespace managing is done.</p></li>
</ol>
<hr/>
<p>Okay, so let's have a look at list's parsing example:</p>
<ol>
<li><p><code>[1]</code></p>
<p>will be parsed into <code>'['</code> <code>element</code> <code>']'</code></p></li>
<li><p><code>[1, ]</code></p>
<p>will be <code>'['</code> <code>element</code> <code>','</code> <code>']'</code></p></li>
<li><p><code>[1, 2]</code></p>
<p>will be <code>'['</code> <code>element</code> <code>(',' element)</code> <code>']'</code></p></li>
<li><p><code>[1, 2, ]</code></p>
<p>will be <code>'['</code> <code>element</code> <code>(',' element)</code> <code>','</code> <code>']'</code></p></li>
</ol>
<p>So, as you see, in the example 3 the comma is paired with <code>2</code>, not <code>1</code>.
Also, in the example the last comma is not paired with <code>2</code> - it actually is paired with nothing in terms of syntax definition.</p>
<hr/>
<p>Now the actual question is:
Is there more reasons to use comma before newline, except for the fact that most languages were using that commonly?
I think it is sensible to use comma after newline, for these reasons:</p>
<ol>
<li><p>It's more similar to actual syntax definition.</p></li>
<li><p>It ensures that there will be always exact number of commas(number of elems - 1), and that helps when you're dealing with languages that hates additional leading comma, for example SQL.</p></li>
<li><p>It also is git-friendly, like comma-before notation: If you add a new element to the list, git diff will show <code>+ , new_element</code> only.</p>
<p>In fact, in comma-before-newline notation if someone forgot to add a comma after <code>old_element</code>(Or because the language doesn't allow additional comma), someone who adds an element after that will see a git log like this:</p></li>
</ol>
<pre><code>- old_element
+ old_element,
+ new_element,
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>(1) "Most" programming languages don't have any preference. It's the programmer that decides where to put commas.  For the case you cite, where the language or some runtime library serializes some structure into a text string, it's a matter of preference, i.e., opinion.  See (2).</p>
<p>(2) I, as do some others, like my programming languages to look like some familiar notation.  In English prose, I write "fee, foe, fie, fum" rather than "fee ,foe ,fie ,fum" -- the comma attaches to the first of the two elements it's separating, not the second.  Similarly in mathematics.</p>
</div>
<span class="comment-copy">What if you want to add something to the <i>front</i> of the list?</span>
<span class="comment-copy">@user2357112 [1\n,2] =&gt; [0\n,1\n,2], and it might show misleading git log while comma before is [1,\n2] =&gt; [0,\n1,\n2] and creates a cleaner git log. That's one point I didn't notice. Thank you.</span>
<span class="comment-copy">Between the opening and closing <code>[</code> and <code>]</code> brackets defining a sequence, newlines don't have much significance in Pythonâ€”so I think your analysis doesn't apply. What you're talking about code layout and how it's done is hopefully by usually following some convention like <a href="https://www.python.org/dev/peps/pep-0008/" rel="nofollow noreferrer">PEP 8 - Style Guide for Python Code</a>. It's most a just matter of taste and not so much about parsing efficiency. No doubt there might be some ways that would make certain modifications easier. Fine, do it, the guidelines are only suggestions.</span>
