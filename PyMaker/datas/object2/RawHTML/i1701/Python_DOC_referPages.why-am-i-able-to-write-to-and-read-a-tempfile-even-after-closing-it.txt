<div class="post-text" itemprop="text">
<p>I was experimenting with opening text editors from my python script and I noticed something that apparently contradicts my understanding of the documentation of <a href="https://docs.python.org/3/library/tempfile.html" rel="nofollow noreferrer">tempfile</a>.</p>
<p>My experiment started out with Alex Martelli's <a href="https://stackoverflow.com/a/3076863/3647970">answer</a>.<br/>
My code -</p>
<pre><code>import os
import tempfile
import subprocess

f = tempfile.NamedTemporaryFile(mode='w+t', delete=True)
n = f.name
print('Does exist? : {0}'.format(os.path.exists(n)))
f.close()
print('Does exist? : {0}'.format(os.path.exists(n)))

subprocess.run(['nano', n])
with open(n) as f:
    print (f.read())

print('Does exist? : {0}'.format(os.path.exists(n)))
</code></pre>
<p>OUTPUT:</p>
<pre><code>Does exist? : True
Does exist? : False
Hello from temp file.

Does exist? : True
</code></pre>
<p>In the code, I explicitly call <code>close</code> on the file object declared with <code>delete=True</code>, however even then I am able to write and read contents to it. I don't understand why this is happening. 
According to the docs-</p>
<blockquote>
<p>If delete is true (the default), the file is deleted as soon as it is closed.   </p>
</blockquote>
<p>If calling <code>close</code> deletes the file then I SHOULD NOT be able to write and then read it. But it displays the <strong>correct</strong> contents of the file that you enter when <code>nano</code> executes. And like a <em>tempfile</em>, the file is not visible in the directory where I opened the terminal and ran the script. 
What is even more strange is that <code>os.path.exists</code> works correctly for the first two times and <em>possibly incorrectly</em> for the third time.<br/>
Am I missing something here?  </p>
<p><strong>Additional Experiment:</strong><br/>
If I run the following code then I can clearly see the file created. But that doesn't happen in the original code.</p>
<pre><code>n = '.temp'
subprocess.run(['nano', n])
with open(n) as f:
    print (f.read())

print('Does exist? : {0}'.format(os.path.exists(n)))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Lets have a deeper look at your code.</p>
<p>First you create your temp file</p>
<pre><code>f = tempfile.NamedTemporaryFile(mode='w+t', delete=True)
n = f.name
print('Does exist? : {0}'.format(os.path.exists(n)))
</code></pre>
<p>and this output</p>
<pre><code>Does exist? : True
</code></pre>
<p>so there is nothing to  worry about. Then in the next statements</p>
<pre><code>f.close()
print('Does exist? : {0}'.format(os.path.exists(n)))
</code></pre>
<p>you are closing the file and actually the file gets deleted, because you are getting the following output:</p>
<pre><code>Does exist? : False
</code></pre>
<p>Afterwards however you are recreating your file via</p>
<pre><code>subprocess.run(['nano', n])
with open(n) as f:
    print (f.read())
</code></pre>
<p>so this is why afterwards the command</p>
<pre><code>print('Does exist? : {0}'.format(os.path.exists(n)))
</code></pre>
<p>returns</p>
<pre><code>Does exist? : True
</code></pre>
</div>
<span class="comment-copy">From the docs "If delete is true (the default), the file is deleted as soon as it is closed."</span>
<span class="comment-copy">I cannot reproduce your error. The file is deleted as soon as it is closed.</span>
<span class="comment-copy">@DYZ i am sorry, i forgot to add output. Edited now. There is NO error. The issue is that It SHOULD NOT work. Why is it working?</span>
<span class="comment-copy">Ok. It's <code>nano</code> that creates your temp file again.</span>
<span class="comment-copy">Yes, exactly. But then why can't I actually see the file in the working directory? I have edited the question to add this information. I write only the last part of the code and there I can see that it creates the temp file. But why is it not visible in the original one?</span>
<span class="comment-copy">@raj tempfile isn't creating the file in the working directory but in the temp file directory. So you will never see the file in the working directory.</span>
<span class="comment-copy">@raj A temp file is opened in <code>/tmp</code>.</span>
<span class="comment-copy">@DYZ Not necessarily, for example you can also change the path to the workingdirectory (linux: <a href="https://stackoverflow.com/questions/31068/how-do-i-find-the-temp-directory-in-linux" title="how do i find the temp directory in linux">stackoverflow.com/questions/31068/…</a> windows: <a href="https://answers.microsoft.com/en-us/windows/forum/windows_7-files/change-location-of-temp-files-folder-to-another/19f13330-dde1-404c-aa27-a76c0b450818" rel="nofollow noreferrer">answers.microsoft.com/en-us/windows/forum/windows_7-files/…</a>) - but in most cases you are right</span>
<span class="comment-copy">@DYZ yes, I just checked my /tmp folder and the files for which I had done <code>delete=False</code> were there. I just wanted to ask, if these files will be there forever? Also, since this answers my question and my question kind of looks silly now, should i leave it or delete it or accept @quant 's answer?</span>
