<div class="post-text" itemprop="text">
<p>I have the following class:</p>
<pre><code>@dataclass
class thing:
    DATE: datetime.datetime
    BEG_DATE: datetime.datetime = self.DATE.replace(day=1)) 
</code></pre>
<p>But I get this error:</p>
<blockquote>
<p>NameError("name 'DATE' is not defined")</p>
</blockquote>
<p>Visual Studio points to line 4 where I'm trying to define BEG_DATE.</p>
<p>1) Why?</p>
<p>2) How can I create the attribute <code>BEG_DATE</code> that takes the <code>DATE</code> attribute and just changes the day to 1?</p>
<p>I've tried <code>field(default_factory=self.DATE.replace(day=1))</code>, but I got the same error. </p>
</div>
<div class="post-text" itemprop="text">
<p>For fields that depend on the values of other fields, you need to take advantage of <a href="https://docs.python.org/3/library/dataclasses.html#post-init-processing" rel="nofollow noreferrer">Post-init processing</a>. The way you're doing it now, Python is trying to evaluate <code>self.DATE.replace(day=1)</code> when the class is created, rather than when the instance is created.</p>
<pre><code>from dataclasses import dataclass, field

@dataclass
class thing:
    DATE: datetime.datetime
    BEG_DATE: datetime.datetime = field(init=False)

    def __post_init__(self):
        self.BEG_DATE = self.DATE.replace(day=1)) 
</code></pre>
</div>
<span class="comment-copy">@stovfl it is valid Python. Read up on <a href="https://docs.python.org/3/library/dataclasses.html#post-init-processing" rel="nofollow noreferrer">post-init processing</a></span>
<span class="comment-copy">@Joel: Thank you for pointing that out.</span>
