<div class="post-text" itemprop="text">
<p>So I want to run a program that will read in a file line by line, and will then print out either Valid or Invalid based on what each line contains. </p>
<p>For this example, I am saying that the input file line can contain ABCabc or a space. If the line only contains these things, the word Valid should be printed. If it is just white space, or contains any other characters or letters, it should print out “Invalid”. </p>
<p>This is what I have come up with: </p>
<p>I can’t seem to get it to ever print out “Valid”</p>
<p>Can you tell why? Thanks! </p>
<pre><code>input = sys.argv[1]
input = open(input,"r")
correctInput = ‘ABCabc ‘

line1 = input.readline()

while line1 != "":
    if all(char in correctInput for char in line1):
        print “Valid”
        line2 = input.readline()
    else:
        print “Invalid”
        line2 = input.readline()
    line1 = line2
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If you print out the value of <code>line1</code> before your if else statement, you'll see it has a newline character in it. (The <code>\n</code> character.) This is the character that gets added to the end of each line whenever you hit the enter key on the keyboard, and you need to either discard the newline characters or include them as valid input.</p>
<p>To include it as valid input</p>
<p>Change <code>correctInput = 'ABCabc '</code> </p>
<p>to </p>
<p><code>correctInput = 'ABCabc \n'</code>.</p>
<p><br/></p>
<p>Or to discard the newline characters change</p>
<p><code>if all(char in correctInput for char in line1):</code></p>
<p>to</p>
<p><code>if all(char in correctInput for char in line1.replace('\n', '')):</code></p>
<p><br/></p>
<p>Either method will work.</p>
<p>Bytheway, <code>input</code> is a function in Python. Although you're allowed to use it as a variable name, doing so will prevent you from using the input function in your program. Because of this, it is considered bad practice to use any of the <a href="https://docs.python.org/3/library/functions.html" rel="nofollow noreferrer">built in function names</a> as your variable names.</p>
<hr/>
<h2>RegEx Solution</h2>
<p>Just for fun, I came up with the following solution which solves your problem using regular expressions.</p>
<pre><code>import re

with open(sys.argv[1]) as fh:
  valid_lines = re.findall('^[ABCabc ]+\n', fh.read())
</code></pre>
<p>This finds any valid lines using the pattern <code>'^[ABCabc ]+\n'</code>. What does this regular expression pattern do?</p>
<ul>
<li>The <code>^</code> symbol signifies the start of a line</li>
<li>Then comes the <code>[ABCabc ]</code>. When brackets are used, only characters inside of those brackets will be allowed.</li>
<li>The <code>+</code> after the brackets means that those characters that where in brackets must be found 1 or more times. </li>
<li>And lastly we make sure the valid characters we found are followed by a newline character (<code>\n</code>). This ensures we checked the complete line for valid characters.</li>
</ul>
</div>
<div class="post-text" itemprop="text">
<p>Its because readline doesn't remove '\n' from end of the line. You could ignore that problem by splitting whole file content in lines and than validate them one by one.</p>
<pre><code>import sys

file_name = sys.argv[1]
file = open(file_name ,"r")
correctInput = 'ABCabc '

lines = file.read().splitlines()

for line1 in lines:
    if all(char in correctInput for char in line1):
        print 'Valid'
    else:
        print 'Invalid'
</code></pre>
</div>
<span class="comment-copy"><a href="https://stackoverflow.com/a/20670757/10147399">please don't create a variable called <code>input</code></a></span>
<span class="comment-copy">Awesome, this fixed it, thank you! Also good to know about input being a function. I am new to python (obviously) so that is good to know. Thanks again.</span>
<span class="comment-copy">That makes sense. Thank you</span>
