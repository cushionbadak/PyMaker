<div class="post-text" itemprop="text">
<p>I have program in python, which reads the data from the api and writes it to the file eth.txt.
I would like to program create a new file with a date name every day, like eth_9.11.2018.txt, eth_10.11.2018.txt, ....  and then write on it.
Can you help me ?</p>
<pre><code>import time
import threading
import urllib
import datetime


while True:
    ts = time.time()
    h = datetime.datetime.fromtimestamp(ts).strftime('%H:%M:%S') 
    d = datetime.datetime.fromtimestamp(ts).strftime('%d.%m.%Y')
    # read from API
    ethash = urlopen('https://www.coincalculators.io/api/allcoins.aspx?hashrate=420000000&amp;power=2000&amp;powercost=0.15&amp;difficultytime=0&amp;algorithm=Ethash').read()
    dataethash= json.loads(ethash)
    global coinethash,algoethash,dayUSDethash,dayEUethash
    coinethash = dataethash[0]["name"] 
    algoethash = dataethash[0]["algorithm"] 
    dayUSDethash = dataethash[0]["profitInDayUSD"]
    diffethash = dataethash[0]["currentDifficulty"]
    print ("Difficulty:"),diffethash
    print ("Algoritm:"),algoethash
    print ("Coin:"),coinethash
    dayUSDethash = float(dayUSDethash)
    dayEUethash = dayUSDethash*0.88
    # Write ti file
    profit = open("/home/pi/Skripte/eth.txt", "a")    
    profit.write(str(h))
    profit.write('*')
    profit.write(str(d))
    profit.write('*')
    profit.write(str(algoethash))
    profit.write('*')
    profit.write(str(diffethash))
    profit.write('*')
    profit.write(str(coinethash))
    profit.write('*')
    profit.write(str("%.2f" % dayEUethash))
    profit.write('*')
    profit.write("\n") #new line
    print("OK")
    time.sleep(500)
</code></pre>
<p>..and by the way... 
Is it possible block "#write to file" write in a more friendly and short way? 
It must contain a character * between words, and must write in a new line...
Thankyou for help!</p>
</div>
<div class="post-text" itemprop="text">
<p>You can define dynamically the name of the file you want to write.
In this case, <code>eth_{}.txt'.format(d)</code> will append the current day to it.</p>
<p>To write in the file more elegantly, you can join the list your strings with '*' in one line.</p>
<pre><code>with open('eth_{}.txt'.format(d), 'a') as profit:
    profit.write('*'.join([str(x) for x in [h, d, algoethash, diffethash, coinethash, "%.2f" % dayEUethash, '\n']]))
</code></pre>
</div>
<span class="comment-copy">for the <i>#write to file</i> block, try <a href="https://docs.python.org/3/library/stdtypes.html#str.join" rel="nofollow noreferrer"><code>'*'.join([str(h), str(d), str(...), ...])</code></a></span>
<span class="comment-copy">Can you clarify? What have you tried? What doesn't work?</span>
<span class="comment-copy">Sounds like a job for <a href="https://docs.python.org/3/library/logging.handlers.html#timedrotatingfilehandler" rel="nofollow noreferrer">TimedRotatingFileHandler</a></span>
<span class="comment-copy">Using yyyy-mm-dd rather than dd.mm.yyyy is almost certainly going to be a good idea.</span>
<span class="comment-copy">please explore the link in @MikeScotty comment; as well as review the examples in the <a href="https://docs.python.org/3/howto/logging-cookbook.html#logging-cookbook" rel="nofollow noreferrer">Logging Cookbook</a></span>
<span class="comment-copy">While this might answer the authors question, it lacks some explaining words and/or links to documentation. Raw code snippets are not very helpful without some phrases around them. You may also find <a href="https://stackoverflow.com/help/how-to-answer">how to write a good answer</a> very helpful. Please edit your answer.</span>
<span class="comment-copy">Using <code>'a'</code> for a file which doesn't yet exist is perfectly acceptable.</span>
<span class="comment-copy">True that, thanks !</span>
<span class="comment-copy">@Reupiey , first "eth_{}.txt'.format(d)" work fine, thankyou, but second to write more elegantly not work - i thing is a problem with bracket.. i try this,<code>with open('eth_{}.txt'.format(d), 'a') as profit:</code> and         <code>profit.write('*').join([str(x) for x in [h, d, algoethash, diffethash, coinethash, "%.2f" % dayEUethash, '\n']])</code> but have error  'AttributeError: 'NoneType' object has no attribute 'join' '</span>
<span class="comment-copy">@McDam Yes, sorry, I forgot a bracket ! The new error you have is because it tries to apply 'join' to the result of profit.write('*') which is None, try this instead : <code>profit.write('*'.join([str(x) for x in [h, d, algoethash, diffethash, coinethash, "%.2f" % dayEUethash, '\n']]))</code></span>
