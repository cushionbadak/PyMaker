<div class="post-text" itemprop="text">
<p>I am learning unittest on class and encounter a problem that unittest.main() can not run within main function:</p>
<p>Here is the <code>class AnonymousSurvey</code> which collects anonymous answers to a survey question.</p>
<pre><code>import unittest

class AnonymousSurvey:
    """Collect anonymous answers to a survey question."""

    def __init__(self, question):
        self.question = question
        self.responses = []

    def show_question(self):
        print(question)

    def store_response(self, new_response):
        self.responses.append(new_response) 

    def show_results(self):
        print("Survey results:")
        for response in self.responses: 
            print("- " + response)
</code></pre>
<p>The unittest is encapsulated in a main() function.</p>
<pre><code>def main():

    class TestAnonymousSurvey(unittest.TestCase):
        """Test that a single response is stored properly"""

        def test_store_single_response(self):
            question = "What language did you first learn to speak?"
            my_survey = AnonymousSurvey(question)
            my_survey.store_response("English")

            self.assertIn("English", my_survey.responses)

    unittest.main()



if __name__ == "__main__":
    main()
</code></pre>
<p>It report ran0 tests</p>
<pre><code>In [64]: !python survey.py                                                                                        

----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK
</code></pre>
<p>How could I get it working within a main() area?</p>
</div>
<div class="post-text" itemprop="text">
<p>As <a href="https://docs.python.org/3/library/unittest.html#basic-example" rel="nofollow noreferrer">unittest's basic example</a>, you would just place the <code>unittest.main()</code> into the <code>if __name__ == "__main__":</code> if statement, leaving the unittest class outside. Hence, your unittest code should become:</p>
<pre><code>class TestAnonymousSurvey(unittest.TestCase):
    """Test that a single response is stored properly"""

    def test_store_single_response(self):
        question = "What language did you first learn to speak?"
        my_survey = AnonymousSurvey(question)
        my_survey.store_response("English")

        self.assertIn("English", my_survey.responses)

if __name__ == "__main__":
    unittest.main()
</code></pre>
</div>
