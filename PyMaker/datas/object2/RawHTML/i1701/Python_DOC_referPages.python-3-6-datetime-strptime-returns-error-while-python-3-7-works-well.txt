<div class="post-text" itemprop="text">
<p>I just created a data type for my date data, which returns a <code>datetime.datetime</code> object</p>
<p>Here is the code:</p>
<pre><code>import datetime


class Date:
    def __new__(cls, dateTime, *args, **kwargs):
        return datetime.datetime.strptime(dateTime, "%Y-%m-%dT%H:%M:%S.%f%z")
</code></pre>
<p>So everytime I give this class an <a href="https://en.wikipedia.org/wiki/ISO_8601" rel="nofollow noreferrer"><code>ISO-8601</code></a> it should return the datetime object from the string...</p>
<p>Python 3.7 Example:</p>
<pre><code>Date("2018-12-09T08:56:12.189Z")                                        
# Returns =&gt; datetime.datetime(2018, 12, 9, 8, 56, 12, 189000, tzinfo=datetime.timezone.utc)
</code></pre>
<p>This works damn well, but when I use it on Python 3.6 or Python 3.5:</p>
<pre><code># Python 3.5 Traceback
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/usr/lib/python3.5/_strptime.py", line 510, in _strptime_datetime
    tt, fraction = _strptime(data_string, format)
  File "/usr/lib/python3.5/_strptime.py", line 343, in _strptime
    (data_string, format))
ValueError: time data '2018-12-09T08:56:12.189Z' does not match format '%Y-%m-%dT%H:%M:%S.%f%z'

# Python 3.6 Traceback
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/usr/lib/python3.6/_strptime.py", line 565, in _strptime_datetime
    tt, fraction = _strptime(data_string, format)
  File "/usr/lib/python3.6/_strptime.py", line 362, in _strptime
    (data_string, format))
ValueError: time data '2018-12-09T08:56:12.189Z' does not match format '%Y-%m-%dT%H:%M:%S.%f%z'
</code></pre>
<p>It's so weird, What causes the problem? How can I fix it?</p>
</div>
<div class="post-text" itemprop="text">
<p>Ok, after 2 days, I checked the <a href="https://docs.python.org/3/whatsnew/changelog.html" rel="nofollow noreferrer">Python 3.7 changelog</a>, and I found out support for <code>Z</code> as a UTC offset was added in Python 3.7. See this <a href="https://bugs.python.org/issue31800" rel="nofollow noreferrer">issue</a> on the Python issue tracker, which is primarily about adding support for colons, but also mentions <code>Z</code> support further down the page. Also see the <a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior" rel="nofollow noreferrer"><code>datetime</code> docs</a>, which say</p>
<blockquote>
<p><strong>Changed in version 3.7</strong>: When the %z directive is provided to the strptime() method, the UTC offsets can have a colon as a separator between hours, minutes and seconds. For example, '+01:00:00' will be parsed as an offset of one hour. <strong>In addition, providing 'Z' is identical to '+00:00'.</strong></p>
</blockquote>
<p>On my class, I had to change the time format to this:</p>
<pre><code>datetime.datetime.strptime(dateTime, "%Y-%m-%dT%H:%M:%S.%fZ")
</code></pre>
<p>I changed the <code>%z</code> at the end to <code>Z</code>, hardcoding the offset.</p>
</div>
<span class="comment-copy">The one you say is Python 3.6 is using modules from Python 3.5. That's a problem.</span>
<span class="comment-copy">@user2357112 I didn't have Python 3.6 installed on my desktop, but it was installed on the server, So I used my python3.5, but I also checked it on the server with python3.6 and it had the same problem</span>
<span class="comment-copy">@user2357112 Added Python 3.6 Traceback as well</span>
