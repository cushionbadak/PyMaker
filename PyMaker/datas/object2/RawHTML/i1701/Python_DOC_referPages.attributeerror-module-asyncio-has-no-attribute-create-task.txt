<div class="post-text" itemprop="text">
<p>I'm trying to <code>asyncio.create_task()</code> but I dealing with this error:</p>
<p>Here's an example:</p>
<pre><code>import asyncio
import time

async def async_say(delay, msg):
    await asyncio.sleep(delay)
    print(msg)

async def main():
    task1 = asyncio.create_task(async_say(4, 'hello'))
    task2 = asyncio.create_task(async_say(6, 'world'))

    print(f"started at {time.strftime('%X')}")
    await task1
    await task2
    print(f"finished at {time.strftime('%X')}")

loop = asyncio.get_event_loop()
loop.run_until_complete(main())
</code></pre>
<p>Out:</p>
<pre><code>AttributeError: module 'asyncio' has no attribute 'create_task'
</code></pre>
<hr/>
<p>So I tried with the following snippet code (<code>.ensure_future()</code>) instead, without any problem:</p>
<pre><code>async def main():
    task1 = asyncio.ensure_future(async_say(4, 'hello'))
    task2 = asyncio.ensure_future(async_say(6, 'world'))

    print(f"started at {time.strftime('%X')}")
    await task1
    await task2
    print(f"finished at {time.strftime('%X')}")

loop = asyncio.get_event_loop()
loop.run_until_complete(main())
</code></pre>
<p>Out:</p>
<pre><code>started at 13:19:44
hello
world
finished at 13:19:50
</code></pre>
<hr/>
<p>[UPDATE]:</p>
<p>With borrowing from @<a href="https://stackoverflow.com/users/1600898/user4815162342">user4815162342</a> <a href="https://stackoverflow.com/a/53247626/3702377">answer</a>, I updated my question:</p>
<pre><code>async def main():
    loop = asyncio.get_event_loop()
    task1 = loop.create_task(async_say(4, 'hello'))
    task2 = loop.create_task(async_say(6, 'world'))

    print(f"started at {time.strftime('%X')}")
    await task1
    await task2
    print(f"finished at {time.strftime('%X')}")

loop = asyncio.get_event_loop()
loop.run_until_complete(main())
</code></pre>
<hr/>
<h1>What's wrong?</h1>
<hr/>
<p>[<strong>NOTE</strong>]:</p>
<ul>
<li><em>Python 3.6</em></li>
<li><em>Ubuntu 16.04</em></li>
</ul>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://docs.python.org/3/library/asyncio-task.html#asyncio.create_task" rel="noreferrer"><code>create_task</code></a> top-level function was added in Python 3.7, and you are using Python 3.6. Prior to 3.7, <code>create_task</code> was only available as a <a href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.create_task" rel="noreferrer">method</a> on the event loop, so you can invoke it like that:</p>
<pre><code>async def main():
    loop = asyncio.get_event_loop()
    task1 = loop.create_task(async_say(4, 'hello'))
    task2 = loop.create_task(async_say(6, 'world'))
</code></pre>
<p>That works in both 3.6 and 3.7, as well as in earlier versions. <a href="https://docs.python.org/3/library/asyncio-future.html#asyncio.ensure_future" rel="noreferrer"><code>asyncio.ensure_future</code></a> will work as well, but when you know you're dealing with a coroutine, <code>create_task</code> is more explicit and is the <a href="https://github.com/python/asyncio/issues/477#issuecomment-268709555" rel="noreferrer">preferred</a> option.</p>
</div>
<span class="comment-copy">Thank's for the answer, but I encountered with this error: <code>RuntimeWarning: coroutine 'main' was never awaited</code></span>
<span class="comment-copy">@BenyaminJafari Please edit the question to include the new code you are testing.</span>
<span class="comment-copy">I updated my question, problem solved +1</span>
<span class="comment-copy">@BenyaminJafari Thanks. Note that updating the question is not needed if the problem is solved.</span>
