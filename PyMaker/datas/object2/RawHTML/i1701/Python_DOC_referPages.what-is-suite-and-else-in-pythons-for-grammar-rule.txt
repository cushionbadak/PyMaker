<div class="post-text" itemprop="text">
<p>Python3 defines for loop as <code>for_stmt: 'for' exprlist 'in' testlist ':' suite ['else' ':' suite]</code> in the <a href="https://docs.python.org/3/reference/grammar.html" rel="nofollow noreferrer">grammar book</a>. <code>suite</code> is defined as <code>suite: simple_stmt | NEWLINE INDENT stmt+ DEDENT</code>.</p>
<p>For me, it's hard to understand how double for loop fits in the grammar description for list comprehension.</p>
<p>There are several smaller questions:</p>
<ul>
<li>And what about <code>else</code>? I assume it's used for list comprehension.</li>
<li>Then does a normal for loop can use <code>else</code> block?</li>
</ul>
<p>I'd appreciate if you can come with examples.</p>
</div>
<div class="post-text" itemprop="text">
<p>As you can see from the other rules of the grammar:</p>
<pre><code>suite: simple_stmt | NEWLINE INDENT stmt+ DEDENT
</code></pre>
<p><code>suite</code> is either a simple statement (in one line), e.g.:</p>
<pre><code>for foo in bar: some_statement()
</code></pre>
<p>or it is a newline, followed by an indented block (which consists of statements).</p>
<hr/>
<p><code>'else'</code> is simply the string "else".</p>
<p>I usually read the <code>else</code> of a for-loop as "no-break": It is executed after the for-loop is finished, but only if it wasn't exited by <code>break</code>. The reason it exists is consistency with <code>while</code>, which has an <code>else</code> statement, as it's basically just a repeated <code>if</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>According to <a href="https://docs.python.org/3.7/reference/compound_stmts.html#the-for-statement" rel="nofollow noreferrer">the documentation</a>, the <code>else</code> clause of a <code>for</code> loop is executed if the loop ended without having been broken.</p>
<p>See these two examples:</p>
<pre class="lang-python prettyprint-override"><code>for elem in range(5):
    print(elem)
else:
    print('ended')
</code></pre>
<p>Here, the <code>suite</code> part correspond to <code>print(elem)</code>, and the output will be:</p>
<pre class="lang-none prettyprint-override"><code>0
1
2
3
4
ended
</code></pre>
<p>And second:</p>
<pre class="lang-python prettyprint-override"><code>for elem in range(5):
    if elem &lt; 3:
        print(elem)
    else:
        break
else:
    print('ended')
</code></pre>
<p>Here, the <code>suite</code> part correspond to <code>if elem &lt; 3: print(elem) else: break</code>,
and the output will be:</p>
<pre class="lang-none prettyprint-override"><code>0
1
2
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The <code>else</code> after a for is executed if the loop finished normally (if it not breaked with <code>break</code> keyword)</p>
<p><a href="https://docs.python.org/2/tutorial/controlflow.html" rel="nofollow noreferrer">https://docs.python.org/2/tutorial/controlflow.html</a></p>
<p><code>suite</code> is just a indentation level or a single statement</p>
</div>
<span class="comment-copy"><code>suite</code> is either an indented block, or a single statement. <code>'else'</code> is literally the string "else".</span>
<span class="comment-copy">Look a few lines furter: <code>suite: simple_stmt | NEWLINE INDENT stmt+ DEDENT</code></span>
