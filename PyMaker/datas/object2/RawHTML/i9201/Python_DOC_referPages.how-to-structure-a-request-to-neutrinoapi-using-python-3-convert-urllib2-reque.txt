<div class="post-text" itemprop="text">
<p>Im new to server side code and interested in using the neutrinoapi (www.neutrinoapi.com) for filtering some bad words out of text. I have written the following code in Python 3 (im using bottle server):</p>
<pre><code>url = 'https://neutrinoapi.com/bad-word-filter'
params = {
    'user-id': 'testing',
    'api-key': '205cmqorLBdyV2F9FX4z6NNq1Y3z8AkRTw8ImtGE2MtzxmhT',
    'ip': '162.209.104.195'
}

json_data = json.dumps(params).encode('utf8')
response = urllib.request.urlopen(url, data = json_data)
result = json.loads(response.read())
</code></pre>
<p>This request is returning the following error:</p>
<p>raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 403: Forbidden</p>
<p>The example on the website is at this link: 
<a href="https://www.neutrinoapi.com/api/api-examples/python/" rel="nofollow noreferrer">https://www.neutrinoapi.com/api/api-examples/python/</a></p>
<p>Examples provided are using python 2.7 and urllib2 which i understand is now built into urllib. Cant seem to get the request to work in Python 3. Any ideas on how to make a proper request?</p>
</div>
<div class="post-text" itemprop="text">
<p>The Python example doesn't use JSON for the <em>parameters</em>, only for the response. You'll need to <em>URL encode</em> those parameters instead; use the <a href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urlencode" rel="nofollow noreferrer"><code>urllib.parse.urlencode()</code> function</a> for that, then encode the resulting string to bytes.</p>
<p>You also need to send the <code>content</code> parameter for a <code>bad-word-filter</code> request, not an IP address:</p>
<pre><code>from urllib.parse import urlencode

url = 'https://neutrinoapi.com/bad-word-filter'
params = {
    'user-id': 'testing',
    'api-key': '&lt;valid api key&gt;',
    'content': 'foo bar baz'
}

encoded_params = urlencode(params).encode('utf8')
response = urllib.request.urlopen(url, data = encoded_params)
result = json.loads(response.read())
</code></pre>
</div>
<span class="comment-copy">Thank you! this worked wonderfully. I missed it in the example, but it makes perfect sense.</span>
