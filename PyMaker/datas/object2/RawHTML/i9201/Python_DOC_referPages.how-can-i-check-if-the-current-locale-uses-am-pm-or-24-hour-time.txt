<div class="post-text" itemprop="text">
<p>I'm trying to update a string which should display the time differently depending on whether the current locale uses AM/PM or 24-hours</p>
<p>If the locale can be determined I can then update the time string using <code>strftime("%I:%M %p")</code> or <code>strftime("%H:%M")</code> depending on the locale</p>
<p><strong>How can I programatically determine if the current locale uses AM/PM or 24-hour time?</strong></p>
<p>Or is there a better way to reach the same goal (displaying a time differently depending on which locale my software is running on)?</p>
<p>Grateful for help and with kind regards,
Tord </p>
</div>
<div class="post-text" itemprop="text">
<p>Tord, the behavior is odd, but this worked on Windows 7. Note that prior to setting the locale the time displayed as 24hour clock. Once locale was set it displayed using the 12hour AM/PM setting. That is the correct setting from my laptop.</p>
<pre><code>Python 3.6.0 (v3.6.0:41df79263a11, Dec 23 2016, 08:06:12) [MSC v.1900 64 bit (AMD64)] on win32
Type "copyright", "credits" or "license()" for more information.
&gt;&gt;&gt; import locale
&gt;&gt;&gt; import time
&gt;&gt;&gt; cur_locale = locale.getlocale() # current locale setting
&gt;&gt;&gt; cur_locale
('English_United States', '1252')
&gt;&gt;&gt; time.strftime("%X") # %X - Locale’s appropriate time representation
'20:01:47'
&gt;&gt;&gt; locale.setlocale(locale.LC_TIME, cur_locale)
'English_United States.1252'
&gt;&gt;&gt; time.strftime("%X") # %X - Locale’s appropriate time representation
'8:02:11 PM'
&gt;&gt;&gt; 
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Using the <code>time.strftime()</code> function with the <code>%p</code> parameter will give the equivalent for AM/PM in the current locale, and for locales that don't use AM/PM an empty string is returned. I use this in the following way:</p>
<pre><code>time_format_string = "%H:%M"  # Ex: Sweden
if time.strftime("%p"):  # Checking if the string contains something
    time_format_string = "%I:%M %p"  # Ex: US
time_of_day_string = time.strftime(time_format_string)
print(time_of_day_string)
</code></pre>
<p>I've tried this for two locales (one with and another without AM/PM)</p>
<p>Reference:
<a href="https://docs.python.org/3.6/library/time.html#time.strftime" rel="nofollow noreferrer">https://docs.python.org/3.6/library/time.html#time.strftime</a></p>
</div>
<span class="comment-copy">Given that the "locale appropriate time" for <code>en_US</code> in <a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior" rel="nofollow noreferrer">the <code>strftime</code>/<code>strptime</code> docs</a> is rendered with a 24 hour clock (<code>%X</code> produces <code>21:30:00</code> under <code>en_US</code> locale), I doubt the Python locale information indicates whether the local standard is 12 or 24 hour clock. The U.S. is nearly 100% 12 hour clock, but the locale time representation is 24 hour.</span>
<span class="comment-copy">Thank you. Okay, i get similar behavior on Ubuntu 16.04: AM/PM is added to the end of the output string only after using setlocale</span>
