<div class="post-text" itemprop="text">
<p>suppose I have a module named test.py. 
In this file, I know a class named dummy.
How to get the line number of class dummy definition after I import it? </p>
<p>Is there an API can do such thing?</p>
<p>if dummy is a function, then <code>dummy.__code__.co_firstlineno</code> will return the line no. But if dummy is a class, it doesn't have<code>__code__</code>attribute</p>
<p>I wanna know is there a way which can return the line no without parsing the file.</p>
</div>
<div class="post-text" itemprop="text">
<p><code>inspect.findsource(test.dummy)[1]</code> provides the line number via regex search in the source file (rather slow). </p>
<p>If you define the class, line numbers could be exposed like this:</p>
<pre><code>class MyClass:
    def test_01(self):
        assert 1
    _classline_ = inspect.currentframe().f_code.co_firstlineno
    _thisline_ = inspect.currentframe().f_lineno
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Look at the <a href="https://docs.python.org/3/library/inspect.html#retrieving-source-code" rel="nofollow noreferrer">Retrieving source code</a> section of <code>inspect</code>. Try <code>getsourcefile()</code> and <code>getsourcelines()</code>.</p>
</div>
<span class="comment-copy">Possibly an xy question <a href="http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem" title="what is the xy problem">meta.stackexchange.com/questions/66377/what-is-the-xy-problem</a> What are you trying to do with it?</span>
<span class="comment-copy">What exactly you are trying to achieve, Why do you need to know the line no?</span>
<span class="comment-copy">Can't use just parse your <code>test.py</code> file for <code>class Dummy</code>?</span>
<span class="comment-copy">Just curiosity. if dummy is a function, then<code>dummy.__code__.co_firstlineno</code> will return the line no. But if dummy is a class, it doesn't have <code>__code__ </code>attribute.</span>
<span class="comment-copy">The methods of the class have a <code>__code__</code> attribute so you could find roughly the line number by checking each of them.</span>
