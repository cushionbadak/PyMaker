<div class="post-text" itemprop="text">
<p>I'm creating a crawler with python + beautiful soup.</p>
<p>I have to access the  tag to get some data in the dataLayer.</p>
<p>I did a search with beatifulsoup and managed to return the tag that I need but I can not turn it into a json to access the information.</p>
<p>This is the code that I made to get the :</p>
<pre><code>    page = get_html('URL')
    dataLayer = page.findAll('script')[NUMBER OF SCRIPT]
</code></pre>
<p>And this is my return:</p>
<pre><code>&lt;script type="text/javascript"&gt;
    dataLayer = [{

        'site': {
            'isMobile': false
        },
        'page': {
            'pageType': 'ad_detail',
            'detail': {
                'parent_category_id': '2000',
                'category_id': '2020',
                'state_id': '2',
                'region_id': '31',

                    'ad_id': '293231982',
                    'list_id': '250941507',
                    'city_id': '9208',
                    'zipcode':'34710620',

            },

                'adDetail': {
                    'adID': '293231982',
                    'listID': '250941507',
                    'sellerName': 'Marr',
                    'adDate': '2016-11-30 20:52:11',
                },

        },
        'session': {
            'user': {
                'userID': '',
                'loginType': ''
            }
        },

        'pageType': 'Ad_detail',
        'abtestingEnable' : '1',



        // Listing information

        'listingCategory': '2020',


        // Ad information
        'adId': '293231982',
        'state': '2',
        'region': '31',
        'category': '2020',

         'pictures': '8',
        'listId': '250941507',

        //Account Information

        'loggedUser':'0',

        'referrer': '',

        //User Information


    }];
&lt;/script&gt;
</code></pre>
<p>I would like to get the data as adDate and zipcode.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>s = soup.script.text.replace('\'', '"') # replace ' with "
s = re.search(r'\{.+\}', s, re.DOTALL).group() # get json data
s = re.sub(r'//.+\n', '', s) # replace comment
s = re.sub(r'\s+', '', s) # strip whitspace
s = re.sub(r',}', '}', s) # get rid of last , in the dict
json.loads(s)
</code></pre>
<p>out:</p>
<pre><code>{'abtestingEnable': '1',
 'adId': '293231982',
 'category': '2020',
 'listId': '250941507',
 'listingCategory': '2020',
 'loggedUser': '0',
 'page': {'adDetail': {'adDate': '2016-11-3020:52:11',
   'adID': '293231982',
   'listID': '250941507',
   'sellerName': 'Marr'},
  'detail': {'ad_id': '293231982',
   'category_id': '2020',
   'city_id': '9208',
   'list_id': '250941507',
   'parent_category_id': '2000',
   'region_id': '31',
   'state_id': '2',
   'zipcode': '34710620'},
  'pageType': 'ad_detail'},
 'pageType': 'Ad_detail',
 'pictures': '8',
 'referrer': '',
 'region': '31',
 'session': {'user': {'loginType': '', 'userID': ''}},
 'site': {'isMobile': False},
 'state': '2'}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Your json is using single quotes instead of double quotes.
you should replace all single quotes with doubles quotes to make you dataLayer variable json compliant.</p>
<p>A simple .replace("'", '"') should do the trick.</p>
<p>Note : you also have to remove the commented line with a second regex.</p>
</div>
<span class="comment-copy">you can try with <code>regex</code>, for example <code>re.search("'zipcode':'(\d+)'", dataLayer).group(1)</code></span>
<span class="comment-copy">you could load it in a dictionary using the json module and then easily access those values with the corresponding key. see <a href="https://docs.python.org/3/library/json.html" rel="nofollow noreferrer">here</a> <code>json.loads('')</code></span>
