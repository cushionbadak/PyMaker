<div class="post-text" itemprop="text">
<p>I am trying to make a script to accelerate testing.</p>
<p>I have my program "foo" which returns a series of commands and "bar" which control those commands.</p>
<p>foo is executed as follow :  </p>
<pre><code>./foo ARG(1) ARG(2) ARG(n)
</code></pre>
<p>bar is executed with the same argumets : </p>
<pre><code>./bar ARG(1) ARG(2) ARG(n)  
</code></pre>
<p>And then waits for a series of commands given manually or by foo output.</p>
<p>Thus, I use my programs that way :</p>
<pre><code>./foo ARG(1) ARG(2) ARG(n) | ./bar ARG(1) ARG(2) ARG(n)
</code></pre>
<p>I am trying to replicate the pipe behavior in python :<br/>
lst is a liste of my ARG()</p>
<pre><code>output = subprocess.check_output([os.path.realpath("foo")] + lst)
res = subprocess.check_output([os.path.realpath("bar")] + lst, output)
</code></pre>
<p>Obviously, it is not the right method but I have been trying multiple ways and it is not working.</p>
</div>
<div class="post-text" itemprop="text">
<p>I handled all bash commands in a project by <strong><a href="https://pypi.python.org/pypi/sh" rel="nofollow noreferrer">sh</a></strong> library.</p>
<p>You can easily handle all of your commands like so:</p>
<pre><code>import sh
sh.grep(sh.cat('/etc/passwd'), '-i', 'my_username')
</code></pre>
<p>Please have a look into FAQ of <em>sh</em> library: <a href="http://amoffat.github.io/sh/sections/faq.html" rel="nofollow noreferrer">http://amoffat.github.io/sh/sections/faq.html</a></p>
</div>
<span class="comment-copy">See <a href="https://docs.python.org/3/library/subprocess.html#replacing-shell-pipeline" rel="nofollow noreferrer"><code>subprocess</code> documentation - Replacing shell pipelines</a></span>
<span class="comment-copy">Pease have a look into this useful library: <a href="https://pypi.python.org/pypi/sh" rel="nofollow noreferrer">pypi.python.org/pypi/sh</a></span>
