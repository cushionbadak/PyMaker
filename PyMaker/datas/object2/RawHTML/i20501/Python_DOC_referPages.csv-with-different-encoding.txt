<div class="post-text" itemprop="text">
<blockquote>
<p><strong>Possible Duplicate:</strong><br/>
<a href="https://stackoverflow.com/questions/2342284/open-a-file-in-the-proper-encoding-automatically">Open a file in the proper encoding automatically</a> </p>
</blockquote>
<p>my code:</p>
<pre><code>import csv

def handle_uploaded_file(f):
  dataReader = csv.reader(f, delimiter=';', quotechar='"')

for row in dataReader:
  do_sth
</code></pre>
<p>the problem is that it works well only if csv is UTF-8 encoded. What should I change to serve the iso-8859-2 or windows-1250 encoding?
(the best solution is to autorecognize the encoding, but hand converting is also acceptable)</p>
</div>
<div class="post-text" itemprop="text">
<p>The solution for now:</p>
<pre><code>def reencode(file):
    for line in file:
        yield line.decode('windows-1250').encode('utf-8')

csv_reader = csv.reader(reencode(open(filepath)), delimiter=";",quotechar='"')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Have a look at <a href="http://docs.python.org/library/csv.html#examples" rel="nofollow">the examples section of the csv module documentation</a>.  At the end, you'll find classes you can use for exactly that purpose, specifying the encoding.</p>
</div>
<div class="post-text" itemprop="text">
<p>Pass a file-descriptor opened with <a href="http://docs.python.org/library/codecs.html#codecs.open" rel="nofollow">codecs.open</a>. You can't autorecognize encodings, or not very well. To guess the encoding you can use <a href="http://pypi.python.org/pypi/chardet" rel="nofollow">chardet</a>.</p>
</div>
<span class="comment-copy"><a href="http://stackoverflow.com/q/2342284/624829">stackoverflow.com/q/2342284/624829</a></span>
<span class="comment-copy">this is not he crrect answer , csv documentation : Since open() is used to open a CSV file for reading, the file will by default be decoded into unicode using the system default encoding (see locale.getpreferredencoding()). To decode a file using a different encoding, use the encoding argument of open:</span>
<span class="comment-copy">I was able to open the file with <code>open(filename, 'r', encoding='latin-1') as f:</code> and it fixed the encoding errors I was getting.  A standard list of encodings can be found here: <a href="https://docs.python.org/3/library/codecs.html#standard-encodings" rel="nofollow noreferrer">docs.python.org/3/library/codecs.html#standard-encodings</a></span>
