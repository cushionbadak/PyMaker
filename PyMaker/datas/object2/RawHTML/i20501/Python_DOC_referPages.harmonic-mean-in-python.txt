<div class="post-text" itemprop="text">
<p>The Harmonic Mean function in Python (<code>scipy.stats.hmean</code>) requires that the input be positive numbers. </p>
<p>For example:</p>
<pre><code>from scipy import stats
print stats.hmean([ -50.2 , 100.5 ])
</code></pre>
<p>results in:</p>
<pre><code>ValueError: Harmonic mean only defined if all elements greater than zero
</code></pre>
<p>I don't mathematically see why this should be the case, except for the rare instance where you would end up dividing by zero. Instead of checking for a divide by zero, <code>hmean()</code> then throws an error upon inputing any positive number, whether a harmonic mean can be found or not.</p>
<p>Am I missing something here in the maths? Or is this really a limitation in <code>SciPy</code>? </p>
<p>How would you go about finding the harmonic mean of a set of numbers which might be positive or negative in python?</p>
</div>
<div class="post-text" itemprop="text">
<p>The harmonic mean is only defined for sets of positive real numbers. If you try and compute it for sets with negatives you get all kinds of strange and useless results even if you don't hit div by 0. For example, applying the formula to the set (3, -3, 4) gives a mean of 12!</p>
</div>
<div class="post-text" itemprop="text">
<p>You can just use the Harmonic Mean define equation:</p>
<pre><code>len(a) / np.sum(1.0/a) 
</code></pre>
<p>But, wikipedia says that harmonic mean is defined for positive real numbers:</p>
<p><a href="http://en.wikipedia.org/wiki/Harmonic_mean" rel="noreferrer">http://en.wikipedia.org/wiki/Harmonic_mean</a></p>
</div>
<div class="post-text" itemprop="text">
<p>There is a statistics library if you are using Python &gt;= 3.6:</p>
<p><a href="https://docs.python.org/3/library/statistics.html" rel="nofollow noreferrer">https://docs.python.org/3/library/statistics.html</a></p>
<p>You may use its mean method like this. Let's say you have a list of numbers of which you want to find mean:</p>
<pre class="lang-python prettyprint-override"><code>list = [11, 13, 12, 15, 17]
import statistics as s
s.harmonic_mean(list)
</code></pre>
<p>It has other methods too like stdev, variance, mode, mean, median etc which are too useful.</p>
</div>
<div class="post-text" itemprop="text">
<p>the mathematical definition of harmonic mean itself does not forbid applications to negative numbers (although you may not want to calculate the harmonic mean of +1 and -1), however, it is designed to calculate the mean for quantities like ratios so that it would give equal weight to each data point, while in arithmetic means or such the ratio of extreme data points would acquire much high weight and is thus undesired.</p>
<p>So you either could try to hardcode the definition by yourself like @HYRY suggested, or may have applied the harmonic mean in the wrong context.</p>
</div>
<span class="comment-copy">"I don't mathematically see why this should be the case..." so you fundamentally have a math question, not a programming question.</span>
<span class="comment-copy">.. and a math question which is clearly answered, as harmonic mean makes sense only for positive numbers.</span>
<span class="comment-copy">+1 Good answer. Negative numbers decrease the denominator, which inflates the result.</span>
<span class="comment-copy">Good explanation of why harmonic mean makes absolutely no sense for negative numbers.</span>
<span class="comment-copy">factorial(12) ??? ;-)</span>
