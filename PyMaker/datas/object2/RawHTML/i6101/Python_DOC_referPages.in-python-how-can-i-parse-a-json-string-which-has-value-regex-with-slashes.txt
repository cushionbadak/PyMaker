<div class="post-text" itemprop="text">
<p>My application gets a request with regex in its JSON value.</p>
<pre><code>{ "regex" : "^1\.0(\.\\d+)?$" }
</code></pre>
<p>I use below code to parse it:</p>
<pre><code>parsedData = json.loads(requestData)
</code></pre>
<p>But it fails because of non-JSON characters. </p>
<p>I tried many ways, One of them is this</p>
<p>Bease64 encoding and decoding :</p>
<pre><code>&gt;&gt;&gt; s = '^1\.0(\.\\d+)?$'
&gt;&gt;&gt; e = base64.b64encode('^1\.0(\.\d+)?$')
&gt;&gt;&gt; e
'XjFcLjAoXC5cZCspPyQ='
&gt;&gt;&gt; d = base64.b64decode(e)
&gt;&gt;&gt; d
'^1\\.0(\\.\\d+)?$'
</code></pre>
<p>Observe the output - <code>'^1\\.0(\\.\\d+)?$'</code>  : 1 extra slash added.</p>
<p>Clearly now not able to distinguish between the one with 2 slashes and one slashes.</p>
<p>Since the data is regex, I want it in the original format in a variable.</p>
<p>How can I get that?</p>
</div>
<div class="post-text" itemprop="text">
<p>The issue here is that your json isn't properly encoded, so you're having trouble decoding it.  This is a chicken &amp; egg problem.  </p>
<pre><code>&gt;&gt;&gt; import json
&gt;&gt;&gt; r = r'^1\.0(\.\d+)?$'
&gt;&gt;&gt; print r
^1\.0(\.\d+)?$
&gt;&gt;&gt; print json.dumps(r)
"^1\\.0(\\.\\d+)?$"
</code></pre>
<p>You need to investigate how the json is being created before it's passed to you (if you're in control there) or reach out to the person generating it.</p>
</div>
<span class="comment-copy">Do you have the ability to modify the incoming json before it reaches you? Can you modify the client sending the json. Basically you'll need to replace each slash with a double slash. So you'll have '\\\\' and '\\' for double and single slashes respectively. (<a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">docs.python.org/3/library/re.html</a>)</span>
<span class="comment-copy">In output I want : '^1\.0(\.\\d+)?$' . I tried with - str.replace('\\\\','\\')   . Not working</span>
<span class="comment-copy">But this worked:  print str.replace("\\\\", "\\")  .  I dint get why? WHich should I consider as right answer?</span>
<span class="comment-copy">I actually don't believe you want <code>'^1\.0(\.\\d+)?$'</code> in the output.  That's what I'm trying to express.  That string isn't valid JSON encoded representation of a regular expression from another language.  If you were to use that as a regex in that form, you'd match <code>1.0.\d</code>, not <code>1.0.3</code>.  I believe you want to match the latter, in which case, the JSON you receive wasn't properly encoded, hence your trouble decoding it.</span>
