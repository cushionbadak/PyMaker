<div class="post-text" itemprop="text">
<p>I have this JSON file that I'm trying to convert to CSV to harvest data. However the output I get is far from correct.</p>
<p>So far I have:</p>
<pre><code>import csv
import json
infile = open("top40nl.json", "r")
outfile = open("top40nl.csv", "w")

writer = csv.writer(outfile)

for row in json.loads(infile.read()):
writer.writerow(row)
</code></pre>
<p>Using this type of JSON data (e.g.):</p>
<pre><code>{
    "info": "SQLite Pro Result Set",
    "data": [
        {
            "top40_SK": "118899",
            "song_title": "Sorry",
            "artist": "Justin Bieber",
            "year_released": "2015",
            "year": "2016",
            "week": "1",
            "position": "1",
            "prev_position": "1",
            "weeks_in_top40_v1": "10",
            "weeks_in_top40_v2": "10",
            "highest_reached_position": "1",
            "total_points": "775",
            "top40url": "https://www.top40.nl/top40/2016/week-1"
        },
        {
            "top40_SK": "118900",
            "song_title": "Love yourself",
            "artist": "Justin Bieber",
            "year_released": "2015",
            "year": "2016",
            "week": "1",
            "position": "2",
            "prev_position": "2",
            "weeks_in_top40_v1": "6",
            "weeks_in_top40_v2": "6",
            "highest_reached_position": "1",
            "total_points": "764",
            "top40url": "https://www.top40.nl/top40/2016/week-1"
        }
    ]
}
</code></pre>
<p>All of the above worked so far, however this is my output:
    <code>i,n,f,o</code>
<code>d,a,t,a</code></p>
<p>Any idea how to solve this?</p>
</div>
<div class="post-text" itemprop="text">
<p>I don't understand why you want a CSV file instead of JSON, but here's how you can extract the dicts from each of the data lists and write them to CSV. To keep the example simple, I just write the output to <code>sys.stdout</code> instead of to a disk file.</p>
<pre><code>import json
import csv
import sys

JSON = '''\
{
    "info": "SQLite Pro Result Set",
    "data": [
        {
            "top40_SK": "118899",
            "song_title": "Sorry",
            "artist": "Justin Bieber",
            "year_released": "2015",
            "year": "2016",
            "week": "1",
            "position": "1",
            "prev_position": "1",
            "weeks_in_top40_v1": "10",
            "weeks_in_top40_v2": "10",
            "highest_reached_position": "1",
            "total_points": "775",
            "top40url": "https://www.top40.nl/top40/2016/week-1"
        },
        {
            "top40_SK": "118900",
            "song_title": "Love yourself",
            "artist": "Justin Bieber",
            "year_released": "2015",
            "year": "2016",
            "week": "1",
            "position": "2",
            "prev_position": "2",
            "weeks_in_top40_v1": "6",
            "weeks_in_top40_v2": "6",
            "highest_reached_position": "1",
            "total_points": "764",
            "top40url": "https://www.top40.nl/top40/2016/week-1"
        }
    ]
}
'''

data = json.loads(JSON)

keys = data["data"][0].keys()
writer = csv.DictWriter(sys.stdout, fieldnames=keys)
writer.writerow(dict(zip(keys, keys)))
for d in data["data"]:
    writer.writerow(d)
</code></pre>
<p><strong>output</strong></p>
<pre><code>top40_SK,song_title,artist,year_released,year,week,position,prev_position,weeks_in_top40_v1,weeks_in_top40_v2,highest_reached_position,total_points,top40url
118899,Sorry,Justin Bieber,2015,2016,1,1,1,10,10,1,775,https://www.top40.nl/top40/2016/week-1
118900,Love yourself,Justin Bieber,2015,2016,1,2,2,6,6,1,764,https://www.top40.nl/top40/2016/week-1
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><em>here it goes the simplest one using pandas library</em></p>
<pre><code>import pandas as pd
import json

with open('top40nl.json') as fi:
    data = json.load(fi)
    df = pd.DataFrame(data=data)
    df.to_csv('top40nl.csv', index=False)
</code></pre>
</div>
<span class="comment-copy">Welcome to SO. Please take the time to read <a href="https://stackoverflow.com/questions/how-to-ask">How to Ask</a>. You should spend some time working your way through <a href="https://docs.python.org/3/tutorial/index.html" rel="nofollow noreferrer">the Tutorial</a>, practicing the examples. It will give you an introduction to the tools Python has to offer and you may even start to get ideas for solving your problem. ... looks like you are iterating over characters of a string.</span>
<span class="comment-copy">Why do you need to convert to CSV? Why can you just load the JSON data and access that?</span>
