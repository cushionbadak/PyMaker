<div class="post-text" itemprop="text">
<p>i'm trying to do a program here i need to compress some files, but i want it to stop when the file doesn't exist. 
The code works, but the thing is that it compresses the file anyway, what i mean is that the program outputs the error but compress a file with that name (an empty file)</p>
<p>if someone could help it would be wonderful :)</p>
<pre><code>import sys, zipfile

def compress (file):
    try:
        zf = zipfile.ZipFile(file + '.zip', mode='w')
        zf.write(file, compress_type=zipfile.ZIP_DEFLATED)
        zf.close()
    except OSError:
        print("The file "+ file + " doesnt exist!")
        #erro.value = 1

if __name__ == "__main__":
    compress(sys.argv[1])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>From <a href="https://docs.python.org/3/library/zipfile.html" rel="nofollow noreferrer">Python documentation</a>:</p>
<blockquote>
<p>If the file is created with mode 'w', 'x' or 'a' and then closed without adding any files to the archive, the appropriate ZIP structures for an empty archive will be written to the file.</p>
</blockquote>
<p>So use </p>
<pre><code>if os.path.exists(file)
</code></pre>
<p>to check if the file exists, before </p>
<pre><code>zf = zipfile.ZipFile(file + '.zip', mode='w')
</code></pre>
</div>
<span class="comment-copy">Check if the file exists first. See <a href="https://stackoverflow.com/questions/82831/how-do-i-check-whether-a-file-exists-using-python" title="how do i check whether a file exists using python">stackoverflow.com/questions/82831/â€¦</a></span>
<span class="comment-copy">Then accept my answer please by clicking on the check mark :)</span>
