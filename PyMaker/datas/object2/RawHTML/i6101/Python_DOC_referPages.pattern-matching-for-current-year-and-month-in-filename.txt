<div class="post-text" itemprop="text">
<p>I have this initial bit to extract the current month and year value.</p>
<p>The goal is to find (and remove) all files in a log file directory with a name format of 'access.log.2017-11' if the month does not match the current month.  </p>
<pre><code>log_file_dir = '/home/eos/test/dir'

cur_date = datetime.date.today() 
cur_month = cur_date.strftime('%m') # returns '11', '03'...
cur_year = cur_date.strftime('%Y') # returns 2001, 2017...
</code></pre>
<p>I tried with glob but it doesn't seem to make a match for what I had in mind likewise:</p>
<pre><code>os.chdir(log_file_dir)
glob.glob('./.log.cur_year-cur_month') # nope, not working
</code></pre>
<p>Is there anywhere that the var names like 'cur_year' can be inserted in a pattern matching expression so that it will find them?</p>
</div>
<div class="post-text" itemprop="text">
<p>When you write <code>'./.log.cur_year-cur_month'</code> it is considered as a whole string. If you want to use the variables you have to concatenate them with the string and not putting them into quotes : <code>'./.log.' + cur_year + '-' + cur_month</code></p>
</div>
<div class="post-text" itemprop="text">
<pre><code>glob.glob('./.log.cur_year-cur_month')
</code></pre>
<p>there's no formatting, no string interpolation or any wildcard. It means that glob will look for exactly one file, which is literally <code>'./.log.cur_year-cur_month'</code>. This file probably isn't in your folder.</p>
<p>You could use:</p>
<pre><code>cur_date.strftime('*.log.%Y-%m')
</code></pre>
<p>as the <a href="https://docs.python.org/3/library/glob.html" rel="nofollow noreferrer">glob pattern</a>. It should give you every file ending with <code>.log.2017-11</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>You need a glob pattern <code>*.log.2017-11</code>, this can be created as follows:</p>
<pre><code>from datetime import datetime
import glob

log_file_dir = '/home/eos/test/dir'
log_file_dir = r'e:\python temp'
cur_date = datetime.today().strftime('%Y-%m')

for filename in glob.glob(os.path.join(log_file_dir, '*.log.{}'.format(cur_date))):
    os.remove(filename)
</code></pre>
</div>
