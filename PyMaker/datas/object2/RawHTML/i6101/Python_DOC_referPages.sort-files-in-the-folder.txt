<div class="post-text" itemprop="text">
<p>I need to clean up my archive folder such that only top two files sorted by type of release and the version id are retained. </p>
<p>I broke the file name into a list and tried with an operator.itemgetter but sorting multiple times is a costly operation.</p>
<p>Example: </p>
<p><code>1.0.0-release-735586.zip
1.0.0-release-447088.zip
1.0.0-release-436044.zip
1.0.1-patch-480506.zip
1.0.1-patch-968125.zip
1.0.1-patch-532147.zip</code></p>
<p>should be </p>
<p><code>1.0.0-release-735586.zip
1.0.0-release-447088.zip
1.0.1-patch-968125.zip
1.0.1-patch-532147.zip</code></p>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>itertools</code> <a href="https://docs.python.org/2/library/itertools.html#itertools.groupby" rel="nofollow noreferrer"><code>groupby</code></a> and <a href="https://docs.python.org/3/howto/sorting.html" rel="nofollow noreferrer"><code>sorted</code></a> i.e </p>
<pre><code>from itertools import groupby
li = ['1.0.0-release-735586.zip', '1.0.0-release-447088.zip', '1.0.0-release-436044.zip',
 '1.0.1-patch-480506.zip', '1.0.1-patch-968125.zip', '1.0.1-patch-532147.zip']

new= []
for key, group in groupby(li, lambda x: x[:-10]):
    new.extend(sorted(list(group),reverse=True)[:2])
</code></pre>
<p>Here we can group the list elements by excluding their last 10 characters ie <code>'1.0.0-release-735586.zip'[:-10]</code> will give <code>'1.0.0-release-'</code>. </p>
<p>For every group we are taking only first two elements by sorting them in descending order. Which is done by <code>sorted</code> and <code>[:2]</code> </p>
<pre><code>new
['1.0.0-release-735586.zip', 
  '1.0.0-release-447088.zip', 
  '1.0.1-patch-968125.zip', 
  '1.0.1-patch-532147.zip'] 
</code></pre>
</div>
<span class="comment-copy">use groupby and then sort</span>
<span class="comment-copy">Solution is fine but can you explain what exactly happens in the second line ? you are extending the list with the sorted list of groups objects. reverse=True is sorting them in ASC order. but [:2] meaning takes element 0 and 1 ?</span>
<span class="comment-copy">I have edited the answer. Hope that give some insights. ;)</span>
