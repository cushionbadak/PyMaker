<div class="post-text" itemprop="text">
<p>Here is how I'm making a request:</p>
<pre><code>    from aiohttp import request
    def make_request(self, request_payload, request_headers, request_method, request_url_path):
        url = self.config["HOST_URL"] + "/" + request_url_path
        response = yield from request(request_method, url=url, params=request_payload, headers=request_headers, allow_redirects=False)
        return response
</code></pre>
<p>The expected response in case of successful request here is <code>response status 302</code> and a <code>Location</code> header in response, which will contain the url on which redirect needs to be done.</p>
<p>The issue is, I'm getting response status as 200, which is response from the final url. How can I achieve what I want?</p>
<p>"allow_redirects=False" should have worked, but it doesn't. I'm not sure how can I get it to work as I need.</p>
</div>
<div class="post-text" itemprop="text">
<p>Note: if you use old generator-based syntax you should use decorator <code>asyncio.coroutine</code>. If you're using Python 3.5+ use <a href="https://docs.python.org/3/whatsnew/3.5.html#pep-492-coroutines-with-async-and-await-syntax" rel="nofollow noreferrer">new syntax for coroutines</a>.</p>
<p>Please provide also minimal code snippet that can be reproduced (including url, other params, your Python version), since I don't get behavior you're talking about:</p>
<pre><code>import asyncio
from aiohttp import request


@asyncio.coroutine
def make_request():
    url = 'http://httpbin.org/redirect/1'
    response = yield from request(method='GET', url=url, allow_redirects=False)
    print(response)


loop = asyncio.get_event_loop()
loop.run_until_complete(make_request())
</code></pre>
<p>Output:</p>
<pre><code>&lt;ClientResponse(http://httpbin.org/redirect/1) [302 FOUND]&gt;
&lt;CIMultiDictProxy('Connection': 'keep-alive', 'Server': 'meinheld/0.6.1', 'Date': 'Wed, 15 Nov 2017 16:28:55 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '215', 'Location': '/get', 'Access-Control-Allow-Origin': '*', 'Access-Control-Allow-Credentials': 'true', 'X-Powered-By': 'Flask', 'X-Processed-Time': '0.000524044036865', 'Via': '1.1 vegur')&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Request supports an optional allow_redirects parameter, that you can set to False.</p>
</div>
<span class="comment-copy">It's allow_redirects with an underscore, not a hyphen.</span>
<span class="comment-copy">Please go through the entire post, sir. In code, I've used the correct flag.</span>
