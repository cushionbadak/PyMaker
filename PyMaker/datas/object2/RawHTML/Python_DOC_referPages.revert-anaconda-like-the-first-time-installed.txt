<div class="post-text" itemprop="text">
<p>I have two environments created in <code>Users/user/conda/envs</code> which I don't need anymore. I saw that there is also <code>pkgs</code> in <code>Users/user/conda</code> and both of them <code>Users/user/conda/envs</code> and <code>Users/user/conda/pkgs</code> really eat a lot lot lot of my storage. I want to delete those two environment.</p>
<ol>
<li><p>Does <code>conda remove -n env_name --all</code> delete the environment and all its installed packages under its environment too? Or does it only delete the environment?</p></li>
<li><p>Can I delete directly folder <code>pkgs</code> and <code>env</code> from <code>Users/user</code> without affect the <strong>base</strong> environment?</p></li>
<li><p>How can one revert Anaconda like the first time installed (contain only <strong>base</strong> environment and the default packages)?</p></li>
</ol>
<p>Or do I need uninstall Anaconda and re-install it?</p>
</div>
<div class="post-text" itemprop="text">
<h1>Specific Answers</h1>
<blockquote>
<ol>
<li>Does <code>conda remove -n env_name --all</code> delete the environment and all its installed packages under its environment too? Or does it only delete the environment?</li>
</ol>
</blockquote>
<p>It will delete environment <strong>my_env</strong>, which includes the unpacked libraries and the <code>env/env_name</code> directory. It will not delete the cached tarballs in the <code>conda/pkgs</code> directory.</p>
<blockquote>
<ol start="2">
<li>Can I delete directly folder <code>pkgs</code> and <code>env</code> from Users/user without affect the base environment?</li>
</ol>
</blockquote>
<p>You shouldn't do this because Conda may be using hard or soft links to share packages across environments, and hence it can be difficult to determine what you may affect by such blunt deletion. If you wish to delete an environment, you should use the command in <strong>(1)</strong>.  If you wish to delete cached packages, you should use <code>conda clean</code> (use <code>--help</code> flag to see the options available).</p>
<blockquote>
<ol start="3">
<li>How can one revert Anaconda like the first time installed (contain only <strong>base</strong> environment and the default packages)?</li>
</ol>
</blockquote>
<p>Again, you can delete the other envs with <code>conda remove --all</code>. For <strong>base</strong>, you can revert it to the original state with</p>
<pre><code>conda install -n base --revision 0
</code></pre>
<p>However, I will note that many users report this not working.</p>
<h1>General Recommendation</h1>
<h3>Miniconda</h3>
<p>Since you seem like you want a clean break, I'd recommend the complete uninstall of Anaconda. However, since you appear primarily concerned with space, instead of reinstalling Anaconda, consider switching to <a href="https://docs.conda.io/en/latest/miniconda.html" rel="nofollow noreferrer">Miniconda</a>, which only includes the Conda package manager and minimal infrastructure to support it. Then create envs that only include the packages that you actually require. You can still use <code>conda clean --tarballs</code> to minimize cached downloads, but already with Miniconda you should have a significantly smaller footprint than the full Anaconda distribution.</p>
<h3>Managing Environments</h3>
<p>As a general rule of thumb, I recommend using <strong>base</strong> only for installing infrastructure (Jupyter, git, emacs, etc.) and using separate environments for the specific package environments you need (e.g., TensorFlow, PyTorch). In my experience, this helps to keep your <strong>base</strong> more stable, and allows you to partition off potential package conflicts and wrap up specific projects by clearing out envs after you no longer need them.</p>
</div>
<span class="comment-copy">Oh great answer as it is what I need. With conda clean -tp, we can also delete the tarballs and unused packages right? Thank you so much for your brief answer!</span>
<span class="comment-copy">@RezaHabibi yes, but do note the cautionary message in the help text. I didn't want to put that directly in the answer because I try to avoid posting commands that could be problematic if simply copy and pasted. I will say that on my previous laptop that I had Anaconda on for a couple years, I ran that occasionally without issue.</span>
