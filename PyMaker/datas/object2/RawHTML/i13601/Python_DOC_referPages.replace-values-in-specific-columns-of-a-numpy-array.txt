<div class="post-text" itemprop="text">
<p>I have a N x M numpy array (matrix). Here is an example with a 3 x 5 array:</p>
<pre><code>x = numpy.array([[0,1,2,3,4,5],[0,-1,2,3,-4,-5],[0,-1,-2,-3,4,5]])
</code></pre>
<p>I'd like to scan all the columns of <code>x</code> and replace the values of each column if they are equal to a specific value. 
This code for example aims to replace all the negative values (where the value is equal to the column number) to 100:</p>
<pre><code>for i in range(1,6):
    x[:,i == -(i)] = 100 
</code></pre>
<p>This code obtains this warning:</p>
<pre><code>DeprecationWarning: using a boolean instead of an integer will result in an error in the future
</code></pre>
<p>I'm using numpy 1.8.2. How can I avoid this warning without downgrade numpy?</p>
</div>
<div class="post-text" itemprop="text">
<p>I don't follow what your code is trying to do:</p>
<p>the <code>i == -(i)</code></p>
<p>will evaluate to something like this:</p>
<pre><code>x[:, True]
x[:, False]
</code></pre>
<p>I don't think this is what you want.  You should try something like this:</p>
<pre><code>for i in range(1, 6):
    mask = x[:, i] == -i
    x[:, i][mask] = 100
</code></pre>
<p>Create a mask over the whole column, and use that to change the values.</p>
</div>
<div class="post-text" itemprop="text">
<p>If you are worried about the warning spewing out text, then ignore it as a Warning/Exception:</p>
<pre><code>import numpy
import warnings


warnings.simplefilter('default')  # this enables DeprecationWarnings to be thrown


x = numpy.array([[0,1,2,3,4,5],[0,-1,2,3,-4,-5],[0,-1,-2,-3,4,5]])

with warnings.catch_warnings():
    warnings.simplefilter("ignore")  # and this ignores them
    for i in range(1,6):
        x[:,i == -(i)] = 100
print(x)  # just to show that you are actually changing the content
</code></pre>
<p>As you can see in the comments, some people are not getting <code>DeprecationWarning</code>. That is probably because <a href="https://docs.python.org/3/whatsnew/2.7.html#changes-to-the-handling-of-deprecation-warnings" rel="nofollow">python suppresses developer-only warnings since 2.7</a></p>
</div>
<div class="post-text" itemprop="text">
<p>Even without the warning, the code you have there will not do what you want. i is the loop index and will equal minus itself only if i == 0, which is never. Your test will always return false, which is cast to 0. In other words your code will replace the first element of each row with 100.</p>
<p>To get this to work I would do </p>
<pre><code>for i in range(1, 6):
    col = x[:,i]
    col[col == -i] = 100
</code></pre>
<p>Notice that you use the name of the array for the masking and that you need to separate the conventional indexing from the masking</p>
</div>
<div class="post-text" itemprop="text">
<p>As others have said, your loop isn't doing what you think it is doing.  I would propose you change your code to use numpy's fancy indexing.</p>
<pre><code># First, create the "test values" (column index):
&gt;&gt;&gt; test_values = numpy.arange(6)
# test_values is array([0, 1, 2, 3, 4, 5])
#
# Now, we want to check which columns have value == -test_values:
#
&gt;&gt;&gt; mask = (x == -test_values) &amp; (x &lt; 0)
# mask is True wherever a value in the i-th column of x is negative i
&gt;&gt;&gt; mask
array([[False, False, False, False, False, False],
       [False,  True, False, False,  True,  True],
       [False,  True,  True,  True, False, False]], dtype=bool)
#
# Now, set those values to 100
&gt;&gt;&gt; x[mask] = 100
&gt;&gt;&gt; x
array([[  0,   1,   2,   3,   4,   5],
       [  0, 100,   2,   3, 100, 100],
       [  0, 100, 100, 100,   4,   5]])
</code></pre>
</div>
<span class="comment-copy">Doing this doesn't produce a warning on 1.9.2</span>
<span class="comment-copy">Yes, but what about 1.8.2?</span>
<span class="comment-copy">@bernie OP is <a href="https://docs.python.org/3/whatsnew/2.7.html#changes-to-the-handling-of-deprecation-warnings" rel="nofollow noreferrer">probably on an older version of python</a>. It seems that since 2.7 developer warnings are suppressed by default.</span>
<span class="comment-copy">You are saying that you're replacing all the negative values.  But in your loop, <code>i == -(i)</code> is <code>True</code> only if <code>i == 0</code>.  But due to <code>range(1, 6)</code>, <code>i</code> is never 0.  So, you are doing <code>x[:, False]</code> 6 times in the loop.  Is this what you want?</span>
