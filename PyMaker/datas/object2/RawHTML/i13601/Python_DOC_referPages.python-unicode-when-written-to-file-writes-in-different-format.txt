<div class="post-text" itemprop="text">
<p>I am using Python 3.4, to write a unicode string to a file.
After the file is written, if I open and see, it is totally a different set of characters.</p>
<p>CODE:-</p>
<pre><code># -*- coding: utf-8 -*-

with open('test.txt', 'w', encoding='utf-8') as f:
    name = 'أبيض'
    name.encode("utf-8")
    f.write(name)
    f.close()    

f = open('test.txt','r')
for line in f.readlines():
    print(line) 
</code></pre>
<p>OUTPUT:-</p>
<pre><code>Ø£Ø¨ÙŠØ¶
</code></pre>
<p>Thanks in advance</p>
</div>
<div class="post-text" itemprop="text">
<p>You need to specify the codec to use when <em>reading</em> as well:</p>
<pre><code>f = open('test.txt','r', encoding='utf8')
for line in f.readlines():
    print(line) 
</code></pre>
<p>otherwise your system default is used; see the <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow"><code>open()</code> function documentation</a>:</p>
<blockquote>
<p><em>encoding</em> is the name of the encoding used to decode or encode the file. This should only be used in text mode. The default encoding is platform dependent (whatever <a href="https://docs.python.org/3/library/locale.html#locale.getpreferredencoding" rel="nofollow"><code>locale.getpreferredencoding()</code></a> returns), but any encoding supported by Python can be used. </p>
</blockquote>
<p>Judging by the output you got, your system is using <a href="https://en.wikipedia.org/wiki/Windows-1252" rel="nofollow">Windows Codepage 1252</a> as the default:</p>
<pre><code>&gt;&gt;&gt; 'أبيض'.encode('utf8').decode('cp1252')
'Ø£Ø¨ÙŠØ¶'
</code></pre>
<p>By using the wrong codec when reading, you created what is called a <a href="https://en.wikipedia.org/wiki/Mojibake" rel="nofollow"><em>Mojibake</em></a>.</p>
<p>Note that the <code>name.encode('utf8')</code> line in your writing example is entirely redundant; the return value of that call is ignored, and it is the <code>f.write(name)</code> call that takes care of the actual encoding. The <code>f.close()</code> call is also entirely redundant, since the <code>with</code> statement already takes care of closing your file. The following would produce the correct output:</p>
<pre><code>with open('test.txt', 'w', encoding='utf-8') as f:
    name = 'أبيض'
    f.write(name)

with open('test.txt', 'r', encoding='utf-8') as f:
    for line in f.readlines():
        print(line) 
</code></pre>
</div>
<span class="comment-copy">Worked well, Thanks, and thanks for the nice explanation of what is actually happening..</span>
<span class="comment-copy">@remisharoon: Just in case you didn't quite get what Martijn said about the line <code>name.encode("utf-8")</code> in your code... That call <i>doesn't</i> modify <code>name</code>: it creates a new byte string object containing the utf-8 encoded version of <code>name</code>, but since you don't assign <code>name.encode("utf-8")</code> to anything that new string just gets trashed.</span>
