<div class="post-text" itemprop="text">
<p>I am using rsync to transfer files from one server to another.Now i have to check the size of directory and compare size.If size of the directory are same then rsync is successful.I tried doing that but in path i find some error "du: cannot access".Can anyone please tell me how to do that.Thanks in advance.</p>
<p>Below is my code:</p>
<pre><code>path = '/mnt/rsyncap/Monte Carlo'
size_cmd = 'ssh -l root -A '+ rh +' -i /Users/macbookpro/Development/serverkey/id_rsa  du -sh %s' % path
Size = subprocess.Popen(size_cmd, stdout=subprocess.PIPE, stderr=subprocess.STDOUT,shell= True).communicate()[0]
</code></pre>
<p>In the above code you can see the path.In that there is a space between "Monte Carlo" just because of that it shows and error in du -sh line.So how to handle space between directory name and get the size.If there is no space in directory name then it works properly.</p>
<p>Output:</p>
<pre><code>du: cannot access `/mnt/rsyncap/Monte': No such file or directory
du: cannot access `Carlo': No such file or directory
</code></pre>
<p>So please help me if anyone have any idea about this.</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" rel="nofollow">Pass a list of arguments</a>, not a string, and escape your path properly.</p>
<pre><code>import shlex

size_cmd = [
    'ssh', '-l', 'root', '-A', rh,
    '-i', '/Users/macbookpro/Development/serverkey/id_rsa',
    'du -sh %s' % shlex.quote(path),
]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>just try, <code>path = '/mnt/rsyncap/Monte\ Carlo'</code>.</p>
</div>
<span class="comment-copy">Hello, I tried doing this but still there is an error.                                          'du -sh %s' % shlex.quote(path), AttributeError: 'module' object has no attribute 'quote'</span>
<span class="comment-copy">@AnujPhophalia: Which version of Python are you using? If it’s earlier than 3.3, <code>import pipes</code> and use <code>pipes.quote</code> instead.</span>
<span class="comment-copy">hi , i am using python 2.7.6 version. Even i tried using pipes.quote but output is  usage: ssh [-1246AaCfgKkMNnqsTtVvXxYy] [-b bind_address] [-c cipher_spec]            [-D [bind_address:]port] [-e escape_char] [-F configfile]            [-I pkcs11] [-i identity_file]            [-L [bind_address:]port:host:hostport]            [-l login_name] [-m mac_spec] [-O ctl_cmd] [-o option] [-p port]            [-R [bind_address:]port:host:hostport] [-S ctl_path]            [-W host:port] [-w local_tun[:remote_tun]]            [user@]hostname [command]</span>
<span class="comment-copy">@AnujPhophalia: You don’t appear to have specified a hostname to connect to. If you took it out for the question, add it back as a single list element before <code>'du -sh %s…</code>.</span>
<span class="comment-copy">By the way, I strongly recommend you not to add any space in the path.</span>
<span class="comment-copy">hi, i tried but its not working. Any other solution.</span>
<span class="comment-copy"><code>path = '"/mnt/rsyncap/Monte\ Carlo"'</code> different linux commands have different solution to avoid the space ambiguity</span>
<span class="comment-copy">it works.Thank you so much.Appreciated</span>
