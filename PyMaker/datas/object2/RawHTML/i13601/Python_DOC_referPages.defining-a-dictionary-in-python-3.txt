<div class="post-text" itemprop="text">
<p>I have the following code and want to turn a string from a file into a dictionary (to be read in and manipulated). In the following code, on execution, it comes up with an error: 'people is not defined'. Have I not defined this correctly or is the syntax wrong? This is Python 3</p>
<pre><code>def verifylogin():
people={}
with open("moosebook.txt","r") as f:
for line in f:
    items=line.split(",")
    person={}
    person['username'] =items[0]
    person['password']=items[1]
    person['Gender']=items[2]
    person['Career']=items[3]
    people[items[0]]=person

    print(person[0])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I am not sure what your end intention for your script is, but the following might be helpful. Python has a built in <code>CSV</code> module that can automatically read each line of your file in as a list of columns. </p>
<p>Furthermore, it has a CSV <a href="https://docs.python.org/3/library/csv.html#csv.DictReader" rel="nofollow"><code>DictReader</code></a> variation which might be more useful to you. This takes the first row in your CSV file and uses the header to automatically create a dictionary for each row as it is read in. </p>
<p>If your file does not contain a header row, a list of suitable <code>fieldnames</code> can be provided. By using this feature, you do not need to create your dictionary.</p>
<p>The following shows you how you could create a <code>people</code> dictionary. The key being the <code>username</code> for each of your rows. I remove the <code>username</code> key from <code>person</code> as it then becomes the key used by <code>people</code>:</p>
<pre><code>import csv

def verifylogin():
    people = {}

    with open("moosebook.txt","r") as f:
        for person in csv.DictReader(f):
            print("Person: ", person)
            username = person['username']
            del person['username']
            people[username] = person

    print("People:", people)
    print("Wilma's career:", people['Wilma']['Career'])     

verifylogin()
</code></pre>
<p>So, if <code>moosebook.txt</code> contained the following entries:</p>
<pre><code>username,password,Gender,Career
Fred,Password1,Male,Builder
Wilma,Password2,Female,Teacher
</code></pre>
<p>You would see the following output:</p>
<pre><code>Person:  {'Career': 'Builder', 'password': 'Password1', 'username': 'Fred', 'Gender': 'Male'}
Person:  {'Career': 'Teacher', 'password': 'Password2', 'username': 'Wilma', 'Gender': 'Female'}
People: {'Wilma': {'Career': 'Teacher', 'password': 'Password2', 'Gender': 'Female'}, 'Fred': {'Career': 'Builder', 'password': 'Password1', 'Gender': 'Male'}}
Wilma's career: Teacher
</code></pre>
<p>If your file does not have a header row, the following line could be changed:</p>
<pre><code>csv_input = csv.DictReader(f, fieldnames=['username', 'password', 'Gender', 'Career'])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>As you can see from the comments the indention is wrong, but I guess this comes from the paste here on SO and is not the issue in your actual code.</p>
<p>But you two other issues in your code. <code>print(person[0])</code> will fail when executed because <code>0</code> is not a valid key for your dictionary here. The only valid keys in your code are <code>username</code>, <code>password</code>, <code>Gender</code> and <code>Career</code>. Therefore you can use <code>person</code> or <code>people[items[0]]</code>. Then you could use <code>splitlines</code> to avoid newlines in your data.</p>
<pre><code>def verifylogin():
    people = {}
    with open("moosebook.txt", "r") as f:
        for line in f.read().splitlines():  # Fixed line
            items = line.split(",")
            person = {}
            person['username'] = items[0]
            person['password'] = items[1]
            person['Gender'] = items[2]
            person['Career'] = items[3]
            people[items[0]] = person
            print(people[items[0]])  # Fixed line
</code></pre>
</div>
<span class="comment-copy">Your indentation is all wrong; your error could well be caused by incorrect indentation, so please do make sure the indentation in your question accurately reflects your code.</span>
<span class="comment-copy">I think you are facing an indentation problem.Where you are using people  dictionary by the way?</span>
<span class="comment-copy">Also, please include the <i>full traceback</i> of your error, not just a partial exception message. Presumably there is more there than just <code>people is not defined</code>.</span>
<span class="comment-copy">@user3100115: please do <b>not</b> fix the indentation here, as it is extremely likely to be the issue behind the error.</span>
<span class="comment-copy">@user3100115 Don't try to fix the indentation for Compoot; it's possible the problem is related to exactly how <i>his</i> code is indented, not how you think it <i>should</i> be indented.</span>
