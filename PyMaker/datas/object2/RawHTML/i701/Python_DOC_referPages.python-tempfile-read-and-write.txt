<div class="post-text" itemprop="text">
<p>I am having issues reading and writing to a tempfile:</p>
<pre><code>import tempfile

def edit(base):
    tmp = tempfile.NamedTemporaryFile(mode='w+')
    #fname = tmp.name
    tmp.write(base)
    #system('nano %s' % fname)
    content = tmp.readlines()
    tmp.close()
    return content

answer = "hi"
print(edit(answer))
</code></pre>
<p>Output is <code>[]</code> instead of <code>["hi"]</code>
I don't get the reason behind it,</p>
<p>Help is appreciated</p>
</div>
<div class="post-text" itemprop="text">
<p>You're wrong because of the cursor's position. 
When you write to a file, cursor will stop at the very end of your text. Then you're reading which means nothing. Because cursor reads the data comes after its position. For quickfix, the code must be like this:</p>
<pre><code>import tempfile

def edit(base):
    tmp = tempfile.NamedTemporaryFile(mode='w+')
    #fname = tmp.name
    tmp.write(base)
    tmp.seek(0, 0)  # This will rewind the cursor
    #system('nano %s' % fname)
    content = tmp.readlines()
    tmp.close()
    return content

answer = "hi"
print(edit(answer))
</code></pre>
<p>You may want to read the documentation about that.
<a href="https://docs.python.org/3/tutorial/inputoutput.html?highlight=seek#methods-of-file-objects" rel="nofollow noreferrer">https://docs.python.org/3/tutorial/inputoutput.html?highlight=seek#methods-of-file-objects</a></p>
</div>
<div class="post-text" itemprop="text">
<p>Temporary files are still files; they have a "pointer" to the current position in the file. For a freshly written file, the pointer is at the end of the last write, so if you <code>write</code> without <code>seek</code>ing, you read from the end of the file, and get nothing. Just add:</p>
<pre><code>tmp.seek(0)
</code></pre>
<p>after the <code>write</code> and you'll pick up what you wrote in the next <code>read</code>/<code>readlines</code>.</p>
<p>If the goal is solely to make the data visible to something else opening the file by name, e.g. an outside program like <code>nano</code> in your commented out code, you can skip the <code>seek</code>, but you do need to make sure the data is flushed from buffer to disk, so at the same point after the <code>write</code>, you'd add:</p>
<pre><code>tmp.flush()
</code></pre>
</div>
<span class="comment-copy">Thank you ! That made it</span>
