<div class="post-text" itemprop="text">
<p>This Python code runs but prints the last page of the text file. Not sure why, but I aim to print the whole line of text that is underneath a specified line of text (a line that contains the specific string ** Direct **). How can I loop through a text file, search each line for the specified string, and whenever it is found print the row directly below it? I have searched many online forums and have not found an easily understandable example. I use Python Sypder 2.7. Any help appreciated  </p>
<pre><code>import os
Path = '..\\Test.txt'

if os.path.isfile(Path): 
    with open(Path) as f:
        for line in f:
            print line
else:
    print Path, "doesn't exist"
f.close()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><strong>Python 3.x:</strong></p>
<p>dummy.txt</p>
<pre><code>Mango
Anday Wala Burger
40
Aloo
Anday
Ghobi
Anday Wala Burger
30
Kheerey
Anday Wala Burger
</code></pre>
<p>py:</p>
<pre><code>searchString = 'Anday Wala Burger'    
with open('dummy.txt', "r") as input:
    try:
        for line in input:
            if searchString in line:
                print(next(input), end='')
    except StopIteration:
            pass
</code></pre>
<p>OUTPUT:</p>
<pre><code>40
30
</code></pre>
<p>EDIT: </p>
<p><strong>Python 2.7:</strong></p>
<pre><code>dummyFile= "dummy.txt"
searchString = 'Anday Wala Burger'

with open(dummyFile) as f:
    content = f.readlines()

# you may also want to remove empty lines
content = [l.strip() for l in content if l.strip()]

# flag
nextLine = False

for line in content:

    if searchString in line:
        nextLine = not nextLine
    else:
        if nextLine:
            print(line)
            nextLine = not nextLine
        else:
            pass
</code></pre>
<p>OUTPUT:</p>
<pre><code>40
30
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You need to make some changes:</p>
<p>1.-Read the lines</p>
<p>2.- Compare with your text</p>
<pre><code>import os
Path = '..\\Test.txt'
look='**Direct**'

if os.path.isfile(Path): 
    with open(Path, "r") as f:
        for line in f:
            if look in line:
                print (line)
else:
    print (Path, "doesn't exist")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Check out the <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer"><code>re</code></a> module. It includes the <code>re.search()</code> function, which searches for a pattern inside a string.</p>
<p>To print the next line you can take advantage of the fact that file objects are iterable, by using <code>f.next()</code>.</p>
<p>For example, you could do:</p>
<pre><code>import os
import re

Path = 'foo.txt'
Pattern = "spam"  # String to be searched

if os.path.isfile(Path): 
    with open(Path) as f:
        for line in f:
            if re.search(Pattern, line):
                print(f.next())
else:
    print(Path, "doesn't exist")
</code></pre>
<p>By the way, you don't need that final <code>f.close()</code>. It is already taken care of by the <code>with</code> statement.</p>
</div>
<div class="post-text" itemprop="text">
<p>Check if <code>one</code> is in any line in the file and the print the next line as found will be the next lineno file will be set as <code>currentlineno+1</code></p>
<p>Contents of file temp</p>
<pre><code>one
two
three
four
</code></pre>
<p>Python file</p>
<pre><code>with open('temp') as f:
   found=-1 
   #no lines are found to print so found is negative in value since line no in a file cannot be negative
   for index,line in enumerate(f):
        if found==index:
            print(line)
        if 'one' in line:
            found=index+1
            # when the condition is True found is set to the line no that we need to print  
</code></pre>
<p>Output</p>
<pre><code>two
</code></pre>
</div>
<span class="comment-copy">What string are you searching for?</span>
<span class="comment-copy">Please check if this solution on SO helps! - <a href="https://stackoverflow.com/questions/46410190/how-to-print-the-next-line-from-a-text-file-python" title="how to print the next line from a text file python">stackoverflow.com/questions/46410190/â€¦</a></span>
<span class="comment-copy">The string is one line directly underneath the specified string. That string is a number, and that number changes as the text file proceeds, For example, the first instance might be 20, the next 30, the next 40 etc. But each falls one line directly below the specified string</span>
<span class="comment-copy">@Nui okay this sounds totally different than the answers being posted below. What is the <code>specified</code> string below to which the <code>number string</code> to be searched falls?</span>
<span class="comment-copy">@Nui I have edited my answer according to your requirements in the comment!</span>
<span class="comment-copy">Comments are not for extended discussion; this conversation has been <a href="https://chat.stackoverflow.com/rooms/187520/discussion-on-answer-by-user5173426-python-looping-text-file-to-find-and-print">moved to chat</a>.</span>
<span class="comment-copy">Thankyou. This worked but I actually needed the line directly underneath the specified look text. I think @Albin Paul has it with the 'index +1'</span>
<span class="comment-copy">Works nicely Paul!</span>
<span class="comment-copy">Paul why is found=-1 firstly defined? And is index a built in Python term (hence no need to define it upfront)?</span>
<span class="comment-copy">@Nui It is defined because I check the index or lineno of the file to be equal to found so found must be defined to check else it show the error referenced before assignment .</span>
<span class="comment-copy">Index in Python seems generic and starts from 0. When you use it with enumerate, the 'index' is the 'value' part of enumerate right? Your code runs the same way without found =-1</span>
<span class="comment-copy">@ Albin Paul could you please add some annotation/comments to the 'found=-1' and found lines in the respective if lines?</span>
