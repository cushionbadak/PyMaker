<div class="post-text" itemprop="text">
<p>I want that type_dir is optional directory.</p>
<p>I use search. is it Ok ?
Do I need use try...except block ?</p>
<pre><code>import re
pattern = r'mydir/.*(\w*).*/\[{type_dir}\]/'.format(type_dir="")
</code></pre>
<p>For example,</p>
<pre><code>type_dir = b
mydir/a/b/c - True
mydir/a/c - True
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>As I understood your question, you want to use regex to find a way to check if a certain directory exists or not where any sub-directories are optional. </p>
<p>So, my answer is that you don't need to use <code>try... except</code> and search is perfectly fine. A faster way for searching is to use <code>glob</code> python module like so:</p>
<p>Note: the folder hierarchy inside <code>mydir</code> is as the following:</p>
<p><a href="https://i.stack.imgur.com/ZIiC5.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/ZIiC5.png"/></a></p>
<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; from glob import glob
&gt;&gt;&gt;
&gt;&gt;&gt; type_dir = "b"
&gt;&gt;&gt; print(glob(os.path.join("mydir", "**", type_dir), recursive=True))
['mydir/a/b']
&gt;&gt;&gt;
&gt;&gt;&gt; type_dir = "c"
&gt;&gt;&gt; print(glob(os.path.join("mydir", "**", type_dir), recursive=True))
['mydir/a/c', 'mydir/a/b/c']
&gt;&gt;&gt;
&gt;&gt;&gt; type_dir = "d"
&gt;&gt;&gt; print(glob(os.path.join("mydir", "**", type_dir), recursive=True))

</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>An optional string means the string is matching zero or one time. There is a symbol for it <code>?</code>, see <a href="https://docs.python.org/3/library/re.html#regular-expression-syntax" rel="nofollow noreferrer">RE syntax</a>.</p>
<p>The RE string for <a href="https://docs.python.org/3/library/re.html#re.fullmatch" rel="nofollow noreferrer">re.fullmatch</a> would be</p>
<pre><code>/dir/(subdir/)?file
</code></pre>
<p>and will match <code>/dir/subdir/file</code> and <code>/dir/file</code> and nothing else.</p>
<hr/>
<p>For completness: the basic RE for any optional subdirs is:</p>
<pre><code>/dir/(.*/)?file
</code></pre>
<p>which will match  the file directly in the dir <code>/dir/file</code> or in some subdir <code>/dir/sub/file</code>, also even several levels deep <code>/dir/sub1/sub2/file</code>.</p>
<p>If you want to restrict the optional subdir to one level only:</p>
<pre><code>/dir/([^/]*/)?file
</code></pre>
</div>
