<div class="post-text" itemprop="text">
<p>Error while creating pivot table</p>
<p>I am trying to create a pivot table from a Dataframe using Pandas. Given below is the view of my Dataframe  </p>
<pre><code>     Image                  Class           Score
0    cybage_ad_image2.jpg   palm tree       0.656
1    cybage_ad_image2.jpg   building        0.611
2    cybage_ad_image2.jpg   Christmas tree  0.730
3    cybage_ad_image3.jpg   person          0.746
4    cybage_ad_image3.jpg   person          0.633
</code></pre>
<p>Code to create Pivot table</p>
<pre><code>df.pivot_table(index='Image',columns='Class',values='Score', aggfunc=sum)
</code></pre>
<p>Error:</p>
<pre><code>---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
&lt;ipython-input-466-b38c8e51fd79&gt; in &lt;module&gt;
      1 # df.set_index('Class')
----&gt; 2 df.pivot_table(index='Image',columns='Class',values='Class', 
aggfunc=sum)
      3 # df.columns

c:\users\anirudhd\appdata\local\programs\python\python35\lib\site- 
packages\pandas\core\frame.py in pivot_table(self, values, index, columns, 
aggfunc, fill_value, margins, dropna, margins_name)
   5301                            aggfunc=aggfunc, fill_value=fill_value,
   5302                            margins=margins, dropna=dropna,
-&gt; 5303                            margins_name=margins_name)
   5304 
   5305     def stack(self, level=-1, dropna=True):

c:\users\anirudhd\appdata\local\programs\python\python35\lib\site- 
packages\pandas\core\reshape\pivot.py in pivot_table(data, values, index, 
columns, aggfunc, fill_value, margins, dropna, margins_name)
     84     # group by the cartesian product of the grouper
     85     # if we have a categorical
---&gt; 86     grouped = data.groupby(keys, observed=False)
     87     agged = grouped.agg(aggfunc)
     88     if dropna and isinstance(agged, ABCDataFrame) and 
len(agged.columns):

c:\users\anirudhd\appdata\local\programs\python\python35\lib\site- 
packages\pandas\core\groupby\groupby.py in _get_grouper(obj, key, axis, 
level, sort, observed, mutated, validate)
   3289                 in_axis, name, level, gpr = False, None, gpr, None
   3290             else:
-&gt; 3291                 raise KeyError(gpr)
   3292         elif isinstance(gpr, Grouper) and gpr.key is not None:
   3293             # Add key to exclusions

KeyError: 'Class'
</code></pre>
<p>Could anyone guide me where am I going wrong with this. Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>I don't know pandas (yet), but what I can see is that the examples for <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.pivot_table.html#pandas-pivot-table" rel="nofollow noreferrer"><code>pandas.pivot_table</code></a> use <a href="https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.sum.html#numpy-sum" rel="nofollow noreferrer"><code>numpy.sum()</code></a>, not the builtin <a href="https://docs.python.org/3/library/functions.html#sum" rel="nofollow noreferrer"><code>sum()</code></a>, which is what I presume you are using as aggregation function.</p>
</div>
