<div class="post-text" itemprop="text">
<p>I'm trying to zip an xml file and then read the archive as bytes. Currently, I'm doing this by saving the zip to disk and reading it back as follows:</p>
<pre><code>zipfile.ZipFile('x.zip', mode='w').write('x.xml')
with open('x.zip', "rb") as f:
    bytes = f.read()
</code></pre>
<p>Yet I don't require the zip file itself so keeping it on disk is a waste. I also need to have the zip archive to have the same name as the file. Any help is appreciated. </p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/zipfile.html#zipfile.ZipFile" rel="nofollow noreferrer"><code>ZipFile</code></a> first argument can be either path to file or file-like object.</p>
<p>You can pass <a href="https://docs.python.org/3/library/io.html#io.BytesIO" rel="nofollow noreferrer">in-memory buffer</a> like</p>
<pre><code>from io import BytesIO
buffer = BytesIO()
zipfile.ZipFile(buffer, mode='w').write('README.md')
buffer.seek(0)
</code></pre>
<p>And use <code>buffer</code> like file opened in <code>b</code> mode</p>
</div>
<div class="post-text" itemprop="text">
<p>Instead of calling <code>ZipFile.write()</code>, call <code>ZipFile.writestr()</code>. Unless I am missing something, I think that will do what you want.</p>
</div>
<span class="comment-copy">That worked perfectly, thank you!</span>
