<div class="post-text" itemprop="text">
<p>I have a shared hosting in GoDaddy hosting service.It has the following limitations.</p>
<ul>
<li>No root access</li>
<li>No permission to restart apache server</li>
</ul>
<p>My hosting service system and applications specifications.</p>
<ul>
<li>Postgres 10.7</li>
<li>python3</li>
<li>OS  --  Linux version 2.6.32-896.16.1.lve1.4.54.el6.x86_64 (mockbuild@buildfarm03.cloudlinux.com) (gcc version 4.4.7 20120313 (Red Hat 4.4.7-18)</li>
</ul>
<p>I use a cgi script to redirect the apache server to my Python script.
When Python tries to import the psycopg2 module, the following error is thrown</p>
<pre><code> /home/user/python_base/lib/python3.4/site-packages/psycopg2/_psycopg.cpython-34m.so: undefined symbol: PQescapeIdentifier
</code></pre>
<p>I exported the <code>postgresql/lib</code> path to <code>LD_LIBRARY_PATH</code> and restarted the Python script locally and it works fine.</p>
<p>But since I cannot restart the apache server, I guess the process in which the apache is running does not have the <code>LD_LIBRARY_PATH</code> updated. So the error persists. I have a python environment running. I copied all the library files from <code>postgresql/lib</code> to <code>mypythonenv/lib</code>, still in vain.</p>
</div>
<div class="post-text" itemprop="text">
<p>You could set the environment variable in <a href="https://docs.python.org/3/library/os.html#os.environ" rel="nofollow noreferrer"><code>os.environ</code></a> <em>before</em> importing psycopg2.</p>
</div>
<span class="comment-copy">Tried that. It did not work</span>
