<div class="post-text" itemprop="text">
<p>I'm trying this simple python code:</p>
<pre><code>class A:
  def __init__( self ):
    self.a = { 'k' : 'kk' }
  def __delete__( self, key ):
    del self.a[key]
</code></pre>
<p>This simple class doesn't work.</p>
<pre><code>&gt;&gt;&gt; a = A()
&gt;&gt;&gt; del a['k']
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: 'A' object does not support item deletion
</code></pre>
<p>So how should I proper implement item deletion in python ?  Thank you for your help.</p>
</div>
<div class="post-text" itemprop="text">
<p>In order to achieve the behavior of <code>del a['k']</code> (i.e. deleting an item by index) you should implement the <a href="https://docs.python.org/3/reference/datamodel.html#object.__delitem__" rel="nofollow"><code>__delitem__</code></a> magic method:</p>
<pre><code>In [1]: class A:
   ...:     def __init__(self):
   ...:         self.a = {'k': 'kk' }
   ...:     def __delitem__(self, key):
   ...:         del self.a[key]
   ...:         

In [2]: a = A()

In [3]: a.a
Out[3]: {'k': 'kk'}

In [4]: del a['k']

In [5]: a.a
Out[5]: {}
</code></pre>
</div>
<span class="comment-copy"><code>del( self, key ):</code> what is this supposed to be? Please post functioning code before asking a question.</span>
<span class="comment-copy">If you want to implement the <code>__delete__</code> function (which is a magic method which is called when you "type" <code>del a[x]</code>) then you should implement the <code>__delete__</code> function i.e. rename <code>del</code> to <code>__delete__</code> and put a <code>def</code> in front</span>
<span class="comment-copy">@syntonym: there is no <code>__delete__</code> hook method in Python, at least not outside of <a href="https://docs.python.org/2/howto/descriptor.html" rel="nofollow noreferrer"><i>descriptors</i></a>. There is a <a href="https://docs.python.org/2/reference/datamodel.html#object.__del__" rel="nofollow noreferrer"><code>__del__</code> method</a>, but that is only called when the object itself is deleted from memory. Given the <i>implementation</i> of the 'method' in the post, I suspect they were looking for <a href="https://docs.python.org/2/reference/datamodel.html#object.__delitem__" rel="nofollow noreferrer"><code>object.__delitem__</code></a>.</span>
<span class="comment-copy">@MartijnPieters There is this one which I wrongly used : <a href="https://docs.python.org/3/reference/datamodel.html?highlight=__del__#object.__delete__" rel="nofollow noreferrer">docs.python.org/3/reference/…</a></span>
<span class="comment-copy">@Lærne: right, that's on <i>descriptors</i>, which are objects you can add to a class and they'll have methods called on them when you interact with them via an instance of the class. That's how methods are bound and <code>property</code> objects do their work. And oops, I forgot about <code>__delete__</code> even existing (I simply forgot the name of that hook, I don't often need to use it).</span>
