<div class="post-text" itemprop="text">
<p>Running this on Python 3.5.1 on OSX:</p>
<pre><code>import io

b = io.BytesIO()

b.write(b'222')
print(b.getvalue())

b.truncate(0)
b.write(b'222')
print(b.getvalue())
</code></pre>
<p>Produces:</p>
<pre><code>b'222'
b'\x00\x00\x00222'
</code></pre>
<p>So truncating the <code>BytesIO</code> somehow causes it to start inserting extra zero bytes in the beginning? Why?</p>
</div>
<div class="post-text" itemprop="text">
<p><code>truncate</code> does not move the file pointer. So the next byte is written to the next position. You have also to seek to the beginning:</p>
<pre><code>b.seek(0)
b.truncate()
</code></pre>
</div>
<span class="comment-copy">Relevant docs are <a href="https://docs.python.org/3/library/io.html#io.IOBase.truncate" rel="nofollow noreferrer">here</a>. Note that it reads also "(on most systems, additional bytes are zero-filled)"</span>
