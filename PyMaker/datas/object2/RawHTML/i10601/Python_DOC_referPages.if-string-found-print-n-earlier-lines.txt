<div class="post-text" itemprop="text">
<p>Quick question ; So basically i am trying to print the results as below if the key word is found</p>
<pre><code>Keyword = ['Dn']
Output =                    ISIS Protocol Information for ISIS(523)
                ---------------------------------------
SystemId: 0101.7001.1125      System Level: L2    
Area-Authentication-mode: NULL
Domain-Authentication-mode: NULL
Ipv6 is not enabled
ISIS is in restart-completed status
Level-2 Application Supported: MPLS Traffic Engineering
L2 MPLS TE is not enabled
ISIS is in protocol hot standby state: Real-Time Backup

Interface: 10.170.11.125(Loop0)
Cost: L1 0         L2 0                 Ipv6 Cost: L1 0    L2 0    
State: IPV4 Up                          IPV6 Down
Type: P2P                               MTU: 1500      
Priority: L1 64   L2  64   
Timers:     Csnp: L12 10  , Retransmit: L12 5   , Hello: 10  ,
Hello Multiplier: 3            , LSP-Throttle Timer: L12 50  

Interface: 10.164.179.218(GE0/5/0)
Cost: L1 10        L2 10                Ipv6 Cost: L1 10   L2 10   
State: IPV4 Mtu:Up/Lnk:Dn/IP:Dn         IPV6 Down
Type: BROADCAST                         MTU: 9497      
Priority: L1 64   L2 64   
Timers:     Csnp: L1 10    L2 10    ,Retransmit: L12 5   , Hello: L1 10 L2 
Hello Multiplier: L1 3    L2 3     , LSP-Throttle Timer: L12 50  

Interface: 10.164.179.237(GE0/6/0)
Cost: L1 1000      L2 1000              Ipv6 Cost: L1 10   L2 10   
State: IPV4 Up                          IPV6 Down
Type: BROADCAST                         MTU: 9497      
Priority: L1 64   L2 64   
Timers:     Csnp: L1 10    L2 10    ,Retransmit: L12 5   , Hello: L1 10 L2 10  , 
Hello Multiplier: L1 3    L2 3     , LSP-Throttle Timer: L12 50  
</code></pre>
<p>so if "Dn" found in output print last 2 lines , so expected output should be something</p>
<pre><code>Interface: 10.164.179.218(GE0/5/0)
Cost: L1 10        L2 10                Ipv6 Cost: L1 10   L2 10   
State: IPV4 Mtu:Up/Lnk:Dn/IP:Dn         IPV6 Down
</code></pre>
<p>using Snippet as below:</p>
<pre><code>with open( host1 + ".txt","w") as f:

            else:

                    if ("&gt;") in output:

                            output = net_connect.send_command("screen-length 0 temporary", delay_factor=1)
                            print (output)
                            output = net_connect.send_command("dis isis brief", delay_factor=1)
                            print (output)
                            f.write(output)


 hosts = open((hostsfile) , "r")
 keys = ['Dn']
hosts = [hosts for hosts  in (hosts.strip() for hosts in open(hostsfile)) if      hosts]
for host2 in hosts:
   for line in f:
     for keywords in keys:
        if keywords in line:
            print (line)
</code></pre>
<p>i hope this explains , also kindly ignore minor issues like file operations etc , as the main concern is to output the n-2 lines if string found        </p>
</div>
<div class="post-text" itemprop="text">
<p>This is a great use-case for a <code>collections.deque</code>.  Lets say you want to print the matching line and the 2 previous lines (that's what I <em>think</em> you want based on your example).  We can do this by packing each line into the deque and then when we find a match, we print the entire deque:</p>
<pre><code>from collections import deque

def print_deque(dqu):
    for item in dqu:
        print(item)

lines = deque(maxlen=3)
with open('filename') as file_input:
    for line in file_input:
        lines.append(line)
        if 'Dn' in line:
            print_deque(lines)
</code></pre>
<p>This works because the <code>deque</code> will quietly drop the oldest items when you try to add something beyond it's maximum length.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use a <a href="https://docs.python.org/3/library/collections.html#collections.deque" rel="nofollow"><code>collections.deque</code></a> to store <code>n</code> lines (<code>collections.deque(maxlen=n)</code>) and print the lines in the deque when the keyword is found.</p>
</div>
<span class="comment-copy">Thanks for this ; quick one ; how do i remove deque from output :( sorry being noob ; just started to learn python</span>
<span class="comment-copy">@Saadi381 -- Sorry, typo ... it should have been <code>print(item)</code>, not <code>print(dqu)</code>.</span>
