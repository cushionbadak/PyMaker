<div class="post-text" itemprop="text">
<p>For example, I have a string:</p>
<pre class="lang-none prettyprint-override"><code>The struct-of-application and struct-of-world
</code></pre>
<p>With <code>re.sub</code>, it will replace the matched with a predefined string.  How can I replace the match with a transformation of the matched content?  To get, for example:</p>
<pre class="lang-none prettyprint-override"><code>The [application_of_struct](http://application_of_struct) and [world-of-struct](http://world-of-struct)
</code></pre>
<p>If I write a simple regex <code>((\w+-)+\w+)</code> and try to use <code>re.sub</code>, it seems I can't use what I matched as part of the replacement, let alone edit the matched content:</p>
<pre class="lang-none prettyprint-override"><code>In [10]: p.sub('struct','The struct-of-application and struct-of-world')
Out[10]: 'The struct and struct'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use a <a href="https://docs.python.org/3/library/re.html#re.sub" rel="nofollow noreferrer">function for the replacement</a></p>
<pre><code>s = 'The struct-of-application and struct-of-world'
p = re.compile('((\w+-)+\w+)')
def replace(match):
    return 'http://{}'.format(match.group())
    #for python 3.6+ ... 
    #return f'http://{match.group()}'

&gt;&gt;&gt; p.sub(replace, s)

'The http://struct-of-application and http://struct-of-world'
&gt;&gt;&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Try this:</p>
<pre><code>&gt;&gt;&gt; p = re.compile(r"((\w+-)+\w+)")
&gt;&gt;&gt; p.sub('[\\1](http://\\1)','The struct-of-application and struct-of-world')
'The [struct-of-application](http://struct-of-application) and [struct-of-world](http://struct-of-world)'
</code></pre>
</div>
<span class="comment-copy">@KevinJ.Chase I will add the result of re.sub soon</span>
<span class="comment-copy">Use more than one line of code?</span>
<span class="comment-copy">@wwii how ?  searched and replaced ?</span>
<span class="comment-copy">Read the <a href="https://docs.python.org/3/howto/regex.html" rel="nofollow noreferrer">Regular Expression HOWTO</a>...  You need to make use of the <b>capturing group</b> (which you've already created, intentionally or otherwise.  They're described in the <a href="https://docs.python.org/3/howto/regex.html#grouping" rel="nofollow noreferrer">Grouping</a> section:  "Groups indicated with <code>(</code>, <code>)</code> also capture the starting and ending index of the text that they match; this can be retrieved by passing an argument to <code>group()</code>, <code>start()</code>, <code>end()</code>, and <code>span()</code>. [...]".</span>
<span class="comment-copy">@KevinJ.Chase of cause I know something about <code>group</code> . But the group does solve the problem of  <code>find matched and replace with matched</code>.</span>
<span class="comment-copy">That's what i need. Thank for the sharing :)</span>
<span class="comment-copy">With the function you can construct replacements to your hearts content.</span>
<span class="comment-copy">I wonder if i can edit the matched content and use it to replace ?</span>
