<div class="post-text" itemprop="text">
<p>I was making a function that recursively searches directories for files with a particular suffixes.</p>
<blockquote>
<p>TypeError: slice indices must be integers or None or have an index method</p>
</blockquote>
<p>pointing to this line:</p>
<blockquote>
<p>if path.endswith('.',sf)==True: l.append(path)</p>
</blockquote>
<p>.endswith() returns a boolean and is used to test Strings, why the hell is it giving me issues about non-integers?</p>
<p>also I decided to just print everything and throw in a try/except statement if a file is not a directory or a file(cause that happend pretty quickly into the first run). it ran fine for a minute or two then started spitting out the except clause</p>
<blockquote>
<p>something went wrong with /sys/bus/cpu/devices/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu1/node0/cpu0/node0/cpu1/subsystem/devices/cpu0/node0/cpu0/subsystem/devices/cpu0/subsystem/devices/cpu0/subsystem something went wrong with /sys/bus/cpu/devices/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu1/node0/cpu0/node0/cpu1/subsystem/devices/cpu0/node0/cpu0/subsystem/devices/cpu0/subsystem/devices/cpu0 something went wrong with /sys/bus/cpu/devices/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu0/node0/cpu1/node0/cpu0/node0/cpu1/subsystem/devices/cpu0/node0/cpu0/subsystem/devices/cpu0/subsystem/devices/cpu1/cache/power</p>
</blockquote>
<p>well I just Ctrl-Zâ€™d went back into ipython3 and tried again, which immediately brought up the same message, even though the specified directory was / . why did it start back at this same area?</p>
<p>edit: code </p>
<pre><code>def recursive_search(dr, sf):
  """searches every potential path from parent directory for files     with     the matching suffix"""
  l=[]#for all the good little scripts and files with the right last name
  for name in os.listdir(dr):#for every item in directory
 path=os.path.join(dr, name)#path is now path/to/item

 if os.path.isfile(path):
   if path.endswith('.',sf)==True:
     l.append(path)
 else:
   #try:
   recursive_search(path, sf)
   #except:
     #print ('something went wrong with ', path)
</code></pre>
<p>if it comes out looking weird I'm having some trouble with the formatting.</p>
</div>
<div class="post-text" itemprop="text">
<p>Take a look at the documentation for <code>str.endswith</code>:</p>
<pre><code>&gt;&gt;&gt; help(str.endswith)
Help on method_descriptor:

endswith(...)
    S.endswith(suffix[, start[, end]]) -&gt; bool

    Return True if S ends with the specified suffix, False otherwise.
    With optional start, test S beginning at that position.
    With optional end, stop comparing S at that position.
    suffix can also be a tuple of strings to try.
</code></pre>
<p>So calling <code>"path".endswith('.',"py")</code> checks the string <code>path</code> if it ends with <code>"."</code> starting it's check from the indice <code>"py"</code>, however <code>"py"</code> is not a valid indice, hence the error.</p>
<p>To check if the string ends with <code>".py"</code> you need to add the strings together instead of passing it as another argument:</p>
<pre><code>path.endswith("."+sf)
</code></pre>
</div>
<span class="comment-copy">where is your code?</span>
<span class="comment-copy">I guess <code>sf</code> argument of <code>endswith</code> is neither an integer, neither None, as mentioned in the traceback. Please show the code you are using.</span>
<span class="comment-copy">even though it's not in the code I was testing it by starting at root and searching for python scripts: recursive_search('/','py')</span>
<span class="comment-copy">What's the issue with not using <a href="https://docs.python.org/3/library/os.html#os.walk" rel="nofollow noreferrer"><code>os.walk()</code></a>?</span>
<span class="comment-copy">@dhke mainly doing this for practice, will probably rewrite with 'os.walk()' later</span>
<span class="comment-copy">thanks, that solved it.</span>
