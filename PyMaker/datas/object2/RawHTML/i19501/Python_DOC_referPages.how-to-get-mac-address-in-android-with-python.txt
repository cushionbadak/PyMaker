<div class="post-text" itemprop="text">
<p>I am trying to code an addon in XBMC linux environment within Android.
I can see Mac address inside XBMC. But I'd like to grab the mac address for the addon and I can't figure out how.</p>
<pre><code>mac=uuid.getnode()
</code></pre>
<p>I have already tried with code like above but gives me numbers only and different everytime when run in android.</p>
<p>could someone give any suggestion please</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="http://wiki.xbmc.org/?title=InfoLabels" rel="nofollow">XBMC InfoLabels</a></p>
<pre><code>if xbmc.getInfoLabel('Network.MacAddress') != None:
    mac_address = xbmc.getInfoLabel('Network.MacAddress')
else:
    mac_address = None
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If you look at <a href="http://docs.python.org/2/library/uuid.html#uuid.getnode" rel="nofollow noreferrer">the docs</a>:</p>
<blockquote>
<p>Get the hardware address as a 48-bit positive integer. The first time this runs, it may launch a separate program, which could be quite slow. If all attempts to obtain the hardware address fail, we choose a random 48-bit number with its eighth bit set to 1 as recommended in RFC 4122.</p>
</blockquote>
<p>The first part explains why it's "numbers only". It's <em>supposed</em> to be a number. If you want that in some particular hex-string format, just format it—e.g., by calling <code>hex()</code>.</p>
<p>The last sentence explains why it's "different everytime". If you look at <a href="http://hg.python.org/cpython/file/2.7/Lib/uuid.py#l461" rel="nofollow noreferrer">the source</a>, on any non-Windows platform, <code>getnode</code> will try <code>_unixdll_getnode</code>, then <code>_ifconfig_getnode</code>, then fall back to a random number. The former requires a function called <code>uuid_generate_time</code> in either <code>libuuid</code> or <code>libc</code>, which doesn't exist on Android. The latter runs the command <code>ifconfig</code> with a series of different flags and searches for specific strings, and falls back to <code>arp</code> and <code>lanscan</code>. Again, none of this works on Android.</p>
<p>There is no recommended way to get the MAC address on Android, mainly because they don't want you to get one. <a href="http://android-developers.blogspot.com/2011/03/identifying-app-installations.html" rel="nofollow noreferrer">This blog post</a> explains why, and <a href="https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id">this SO question</a> (especially Seka Alekseyev's answer) adds more detail. Some apps try persisting the MAC address once they've gotten it, and never checking again, which gets around some of the problems, but not most of them.</p>
<p>There is a Java API to get the MAC for each service where it makes sense—WiFi, 3G, Bluetooth, etc. It's up to you to decide which is "the" MAC, and you need the right permissions (e.g., <code>android.permission.ACCESS_WIFI_STATE</code>), and there may be no value or a garbage value, but you can get it with code like this:</p>
<pre><code>WifiManager wm = (WifiManager)getSystemService(Context.WIFI_SERVICE);
String mac = wm.getConnectionInfo().getMacAddress();
</code></pre>
<p>As far as I know, there's nothing in SL4A or any other Android Python distribution that exposes these functions directly, so you'll have to write your own wrapper.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can get mac address on this easy way, assume "eth0" is your network device name:</p>
<blockquote>
<p>o = open('/sys/class/net/eth0/address', 'r')</p>
<p>mac_address = o.read().strip() #on "ff:ff:ff:ff:ff:ff" form</p>
</blockquote>
</div>
<span class="comment-copy">"numbers only" is what the value <i>should</i> be. As <a href="http://docs.python.org/3/library/uuid.html#uuid.getnode" rel="nofollow noreferrer">the docs</a> say: "Get the hardware address as a 48-bit positive integer." If you want to convert it into one of the common hexlified formats, you have to do that explicitly.</span>
<span class="comment-copy">Also, see <a href="http://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id">this question</a> (and in particular Seka Alekseyev's answer) for issues with using the MAC address on Android for anything. If you already know that, and want it anyway for some reason, that's fine; I just wanted to point it out.</span>
