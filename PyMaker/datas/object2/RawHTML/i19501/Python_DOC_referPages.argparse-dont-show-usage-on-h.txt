<div class="post-text" itemprop="text">
<p>The code</p>
<pre><code>from argparse import ArgumentParser
p = ArgumentParser(description = 'foo')
p.add_argument('-b', '--bar', help = 'a description')
p.parse_args()
</code></pre>
<p>...results in the output:</p>
<pre><code>$ python argparsetest.py -h
usage: argparsetest.py [-h] [-b BAR]

foo

optional arguments:
  -h, --help         show this help message and exit
  -b BAR, --bar BAR  a description
</code></pre>
<p>What I'd like is:</p>
<pre><code>$ python argparsetest.py -h
foo

optional arguments:
  -h, --help         show this help message and exit
  -b BAR, --bar BAR  a description
</code></pre>
<p>e.g., no usage message when asking for help. Is there some way to do this?</p>
</div>
<div class="post-text" itemprop="text">
<p>definitely possible -- but I'm not sure about documented ...</p>
<pre><code>from argparse import ArgumentParser,SUPPRESS
p = ArgumentParser(description = 'foo',usage=SUPPRESS)
p.add_argument('-b', '--bar', help = 'a description')
p.parse_args()
</code></pre>
<hr/>
<p>From reading the source, I've hacked a little something together which seems to work when displaying error messages as well ... <strong>warning</strong> -- This stuff is <em>mostly</em> undocumented, and therefore liable to change at any time :-)</p>
<pre><code>from argparse import ArgumentParser,SUPPRESS
import sys as _sys
from gettext import gettext as _

class MyParser(ArgumentParser):
    def error(self, message):    
        usage = self.usage
        self.usage = None
        self.print_usage(_sys.stderr)
        self.exit(2, _('%s: error: %s\n') % (self.prog, message))
        self.usage = usage


p = MyParser(description = 'foo',usage=SUPPRESS)
p.add_argument('-b', '--bar', help = 'a description')
p.parse_args()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Note: to not show usage for a specific argument, use</p>
<pre><code>parser.add_argument('--foo', help=argparse.SUPPRESS)
</code></pre>
<p>per <a href="https://docs.python.org/3/library/argparse.html#help" rel="nofollow noreferrer">the documentation</a>.</p>
</div>
<span class="comment-copy">@DSM -- I can't find it in the docs either ... I got to it by reading the source ...</span>
<span class="comment-copy">Unfortunately that also suppresses it on an error or empty command line, which I don't want. I only want to suppress it when -h or --help is passed on the command line.</span>
<span class="comment-copy">@elhefe -- Updated.  This code works, but it relys on the argparse internals.  I think they're pretty stable at this point though ...</span>
<span class="comment-copy">Looks good, although you don't need to save and restore self.usage as you're exiting the program.</span>
<span class="comment-copy">@elhefe -- It's true -- but it's a little defensive.  After all, what if someone subclasses again and overrides <code>self.exit</code> to do something else?</span>
