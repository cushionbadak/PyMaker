<div class="post-text" itemprop="text">
<p>I have a little problem, with a multithreaded python script in blender game engine.
It works alright, but when I stop the game, It raises some exceptions and sometimes crashes.</p>
<pre><code>from bge import logic
import time
from threading import Thread

def init():

    if not hasattr(logic, 'init'):
        logic.init = 0
        logic.thread = new()
        logic.thread.start()

    logic.thread.restart()

class new(Thread):
    def __init__(self):
        self.Thread = Thread
        self.Thread.__init__(self)
    def run(self):
        number = 0
        while 1:
            number += 1
            print(number)
            try:
                main()
                time.sleep(0.1)
            except:
                break

    def restart(self):
        self.Thread.__init__(self)

def main(): #this part isn't important now ...
    cam = bge.logic.getCurrentScene().active_camera
    obj = bge.logic.getCurrentController().owner
    obj.worldPosition.x = cam.worldPosition.x
    obj.worldPosition.y = cam.worldPosition.y
</code></pre>
<p>The console writes:</p>
<pre><code>Unhandled exception in thread started by &lt;bound method new._bootstrap of &lt;new(Th
read-80, initial)&gt;&gt;
Traceback (most recent call last):
  File "C:\Program Files (x86)\Blender Foundation\Blender\2.64\python\lib\thread
ing.py", line 709, in _bootstrap
    self._bootstrap_inner()
  File "C:\Program Files (x86)\Blender Foundation\Blender\2.64\python\lib\thread
ing.py", line 784, in _bootstrap_inner
    with _active_limbo_lock:
AttributeError: __exit__
</code></pre>
<p>I would be glad, if someone could find what's wrong with it.
Thank you</p>
</div>
<div class="post-text" itemprop="text">
<p>That's a <a href="http://www.blender.org/documentation/blender_python_api_2_64_1/info_gotcha.html#strange-errors-using-threading-module" rel="nofollow">well-known limitation of Python scripting in Blender</a>.</p>
<p>The problem is that Blender tears down Python before your thread. What you can try to do is to somehow register that Blender (or your game) is exiting, notify your thread, and <a href="http://docs.python.org/3/library/threading.html#threading.Thread.join" rel="nofollow"><code>join</code></a> it from the main thread.</p>
</div>
<span class="comment-copy">Can you include the exceptions you get in your question? Also,         <code>self.Thread = Thread</code> just looks weird. What is that line for?</span>
<span class="comment-copy">Sure, Unhandled exception in thread started by &lt;bound method new._bootstrap of &lt;new(Th read-80, initial)&gt;&gt; Traceback (most recent call last):   File "C:\Program Files (x86)\Blender Foundation\Blender\2.64\python\lib\thread ing.py", line 709, in _bootstrap     self._bootstrap_inner()   File "C:\Program Files (x86)\Blender Foundation\Blender\2.64\python\lib\thread ing.py", line 784, in _bootstrap_inner     with _active_limbo_lock: AttributeError: <b>exit</b></span>
<span class="comment-copy">Better add it to the question, so that it's formatted.</span>
<span class="comment-copy">Done, thanks for your time :)</span>
<span class="comment-copy">Excellent, thanks. One more question: In your question, you mentioned "some exception <b>s</b> ". Are they all identical to this one?</span>
