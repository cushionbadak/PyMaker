<div class="post-text" itemprop="text">
<p>This is the sample data.</p>
<p>input.xml</p>
<pre><code>&lt;root&gt;
    &lt;entry id="1"&gt;
    &lt;headword&gt;go&lt;/headword&gt;
    &lt;example&gt;I &lt;hw&gt;go&lt;/hw&gt; to school.&lt;/example&gt;
&lt;/entry&gt;
&lt;/root&gt;
</code></pre>
<p>I'd like to put  node and its descendants into . That is,</p>
<p>output.xml</p>
<pre><code>&lt;root&gt;
    &lt;entry id="1"&gt;
    &lt;headword&gt;go&lt;/headword&gt;
            &lt;examplegrp&gt;
                &lt;example&gt;I &lt;hw&gt;go&lt;/hw&gt; to school.&lt;/example&gt;
            &lt;/examplegrp&gt;
&lt;/entry&gt;
&lt;/root&gt;
</code></pre>
<p>My poor and incomplete script is:</p>
<pre><code>import codecs
import xml.etree.ElementTree as ET

fin = codecs.open(r'input.xml', 'rb', encoding='utf-8')

data = ET.parse(fin)
root = data.getroot()

example = root.find('.//example')
for elem in example.iter():
    ---and then I don't know what to do---
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Here's an example of how it can be done:</p>
<pre><code>text = """
&lt;root&gt;
    &lt;entry id="1"&gt;
        &lt;headword&gt;go&lt;/headword&gt;
        &lt;example&gt;I &lt;hw&gt;go&lt;/hw&gt; to school.&lt;/example&gt;
    &lt;/entry&gt;
&lt;/root&gt;
"""

import lxml.etree
import StringIO

data = lxml.etree.parse(StringIO.StringIO(text))
root = data.getroot()

for entry in root.xpath('//example/ancestor::entry[1]'):
    examplegrp = lxml.etree.SubElement(entry,"examplegrp")
    nodes = [node for node in entry.xpath('./example')]
    for node in nodes:
        entry.remove(node)
        examplegrp.append(node)

print lxml.etree.tostring(root,pretty_print=True)
</code></pre>
<p>which will output:</p>
<pre><code>&lt;root&gt;
    &lt;entry id="1"&gt;
        &lt;headword&gt;go&lt;/headword&gt;
        &lt;examplegrp&gt;&lt;example&gt;I &lt;hw&gt;go&lt;/hw&gt; to school.&lt;/example&gt;
    &lt;/examplegrp&gt;&lt;/entry&gt;
&lt;/root&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><a href="http://docs.python.org/3/library/xml.dom.html?highlight=xml#node-objects" rel="nofollow">http://docs.python.org/3/library/xml.dom.html?highlight=xml#node-objects</a>
<a href="http://docs.python.org/3/library/xml.dom.html?highlight=xml#document-objects" rel="nofollow">http://docs.python.org/3/library/xml.dom.html?highlight=xml#document-objects</a></p>
<p>You probably want to follow some paradigm of creating a Document Element and appending reach result to it.</p>
<pre><code>group = Document.createElement(tagName)
for found in founds:
    group.appendNode(found)
</code></pre>
<p>Or something like this</p>
</div>
<span class="comment-copy">Note the above relies on &lt;example&gt; being a direct child of &lt;entry&gt;...</span>
