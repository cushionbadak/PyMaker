<div class="post-text" itemprop="text">
<p>I want to compare two lists of same length</p>
<pre><code>a = [1, 3, 5, 7, 9]
b = [1, 2, 5, 7, 3]
</code></pre>
<p>and find out the number of differences <code>n</code>, in this case it'll be <code>n = 2</code>, and also return an error if the length are not equal. What's the pythonic way of doing this?</p>
</div>
<div class="post-text" itemprop="text">
<p>The simplest way to do this is to use <a href="http://docs.python.org/3/library/functions.html#sum" rel="noreferrer">the <code>sum()</code> built-in</a> and a <a href="http://www.youtube.com/watch?v=pShL9DCSIUw" rel="noreferrer">generator expression</a>:</p>
<pre><code>def differences(a, b):
    if len(a) != len(b):
        raise ValueError("Lists of different length.")
    return sum(i != j for i, j in zip(a, b))
</code></pre>
<p>We loop over the lists together using <a href="http://docs.python.org/3/library/functions.html#zip" rel="noreferrer"><code>zip()</code></a> and then compare them. As <code>True == 1</code> and <code>False == 0</code>, we just sum this to get the number of differences. Another option would be to use the conditional part of the generator expression:</p>
<pre><code>sum(1 for i, j in zip(a, b) if i != j)
</code></pre>
<p>I can't really say I feel one is more readable than the other, and doubt there will be a performance difference.</p>
</div>
<div class="post-text" itemprop="text">
<p>One-liner solution that also produces an error if the length is not equal:</p>
<pre><code>&gt;&gt;&gt; sum(map(lambda x,y: bool(x-y),a,b))
2
</code></pre>
<p>Now try the input of different length:</p>
<pre><code>&gt;&gt;&gt; sum(map(lambda x,y: bool(x-y),[1,2],[1]))
TypeError
</code></pre>
<p>How it works: bool(x,y) returns True if elements are different. Then we map this function on 2 lists and get the list [False, True, False, True, False].<br/>
If we put into the function map() the lists of different length, we get the TypeError</p>
<p>Finally, the function sum() of this boolean list gives 2.</p>
</div>
<div class="post-text" itemprop="text">
<p>You could use <a href="http://docs.python.org/2/library/sets.html" rel="nofollow">sets</a>. Cast both to a set, then find difference between the two. For example:</p>
<pre><code>&gt;&gt;&gt; a = [1,3,5,7,9]
&gt;&gt;&gt; b = [1,2,5,7,2]
&gt;&gt;&gt; len(set(a) -  set(b))
2
</code></pre>
<p>This could be wrapped up in a function to check for length differences first.</p>
</div>
<span class="comment-copy">I prefer the explicit <code>1 for i</code>, instead of the implicit boolean (relying on it being an <code>int</code>), but anyway +1 ( as long it's explicit the length check)</span>
<span class="comment-copy">@JonClements I agree, and yet then the important part (the comparison) is pushed to the end of the expression, which feels awkward. I keep on changing my mind as to which I prefer.</span>
<span class="comment-copy">Note that <code>map()</code> and <code>lambda</code> are generally slower and less readable than a list comp/generator expression, and this will only work for numbers.</span>
<span class="comment-copy">yes, they are slower, but the code is much shorter, it depends on what is needed (exaggerating, in need for speed, don't use python :)). What is more readable is a very subjective matter. You're right that this doesn't work on types where the "-" operation isn't defined.</span>
<span class="comment-copy">Thanks for another solution. I prefer @Lattyware's solution because personally I feel that's more readable. I'm not familiar with <code>lambda</code> function. Also with his solution I can define the error message so I know what error I got.</span>
<span class="comment-copy">This won't work if there are repeated elements, and doesn't take order into account. <code>difference([1, 3, 5, 7, 9], [9, 7, 5, 3, 1])</code> would be <code>0</code> as opposed to <code>4</code>. The OP's example counts <code>3</code> as being different, despite it existing in both lists (that is, position matters). This also ignores the possibility of lists being different lengths, as was mentioned in the question.</span>
<span class="comment-copy">Ah yes, I missed that last 3, and had used 2 in my example. My bad! I mentioned that a function could be used to check differences, as per your example code.</span>
