<div class="post-text" itemprop="text">
<p>I am using python 3.6.1 and I want to read in email files (.eml) for processing. I am using the <a href="https://pypi.python.org/pypi/emaildata/0.3.4" rel="nofollow noreferrer">emaildata 0.3.4</a> package, however whenever I try to import the Text class as in the documentation, I get the module errors:</p>
<pre><code>import email
from email.text import Text
&gt;&gt;&gt; ModuleNotFoundError: No module named 'cStringIO'
</code></pre>
<p>When I tried to correct using <a href="https://stackoverflow.com/questions/28200366/python-3-4-0-email-package-install-importerror-no-module-named-cstringio">this update</a>, I get the next error relating to <code>mimetools</code></p>
<pre><code>&gt;&gt;&gt; ModuleNotFoundError: No module named 'mimetools'
</code></pre>
<p>Is it possible to use emaildata 0.3.4 with python 3.6 to parse .eml files? Or are there any other packages I can use to parse .eml files? Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>Using the email package, we can read in the .eml files. Then, use the <code>BytesParser</code> library to parse the file. Finally, use a <code>plain</code> preference (for plain text) with the <code>get_body()</code> method, and <code>get_content()</code> method to get the raw text of the email.</p>
<pre><code>import email
from email import policy
from email.parser import BytesParser
import glob
file_list = glob.glob('*.eml') # returns list of files
with open(file_list[2], 'rb') as fp:  # select a specific email file from the list
    msg = BytesParser(policy=policy.default).parse(fp)
text = msg.get_body(preferencelist=('plain')).get_content()
print(text)  # print the email content
&gt;&gt;&gt; "Hi,
&gt;&gt;&gt; This is an email
&gt;&gt;&gt; Regards,
&gt;&gt;&gt; Mister. E"
</code></pre>
<p>Granted, this is a simplified example - no mention of HTML or attachments. But it gets done essentially what the question asks and what I want to do.</p>
<p>Here is how you would iterate over several emails and save each as  a plain text file:</p>
<pre><code>file_list = glob.glob('*.eml') # returns list of files
for file in file_list:
    with open(file, 'rb') as fp:
        msg = BytesParser(policy=policy.default).parse(fp)
        fnm = os.path.splitext(file)[0] + '.txt'
        txt = msg.get_body(preferencelist=('plain')).get_content()
        with open(fnm, 'w') as f:
            print('Filename:', txt, file = f) 
</code></pre>
</div>
<span class="comment-copy">emaildata module has not been updated for over 2 years. It is not compatible with python 3. Consider using the <a href="https://docs.python.org/3/library/email.html#module-email" rel="nofollow noreferrer">email</a> package from the standard library.</span>
<span class="comment-copy">Thanks @Dmitri, I'll include an answer here using the email package for completeness.</span>
<span class="comment-copy">added an edit with a loop over file names, which I guess you had intended to add (feel free to roll back edit).</span>
