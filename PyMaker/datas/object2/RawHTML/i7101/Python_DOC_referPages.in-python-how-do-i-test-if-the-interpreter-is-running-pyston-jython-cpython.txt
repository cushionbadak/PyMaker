<div class="post-text" itemprop="text">
<p>I would like to test from inside a running Python program if the interpreter is running pyston, jython, ironpython, pypy and so on. </p>
<p>The things that come to mind are pattern matching on <code>system.version</code> and checking the magic number from <code>imp.get_magic()</code> But both of these seem a little frail and hacky. Any other suggestions? </p>
<p><strong><em>Edit:</em></strong> user2357112 comes through again. </p>
<p>I tried running the following code on every Python version I had installed, and this differentiates Jython, Pyston, and various CPythons. Where it falls down is in Python before 2.6, and the anaconda variant of CPython. For anaconda, that may be the right thing though. </p>
<p>Here is the program and the results. Feel free note which other kinds of Python this does or does not work on.</p>
<pre><code>import platform
print(platform.python_implementation())
</code></pre>
<p>and shell script:</p>
<pre><code>for v in $(pyenv versions); do # not quite right
    pyenv local $v
    echo "version is $v"
    python /tmp/foo.py
    echo "==================="
done
</code></pre>
<p>And I got this output: </p>
<pre><code>===================
version is 2.1.3
Traceback (most recent call last):
  File "/tmp/foo.py", line 1, in ?
    import platform
ImportError: No module named platform
===================
version is 2.2.3
Traceback (most recent call last):
  File "/tmp/foo.py", line 1, in ?
    import platform
ImportError: No module named platform
===================
version is 2.3.7
Traceback (most recent call last):
  File "/tmp/foo.py", line 2, in ?
    print(platform.python_implementation())
AttributeError: 'module' object has no attribute 'python_implementation'
===================
version is 2.4.6
Traceback (most recent call last):
  File "/tmp/foo.py", line 2, in ?
    print(platform.python_implementation())
AttributeError: 'module' object has no attribute 'python_implementation'
===================
version is 2.5.6
Traceback (most recent call last):
  File "/tmp/foo.py", line 2, in &lt;module&gt;
    print(platform.python_implementation())
AttributeError: 'module' object has no attribute 'python_implementation'
===================
version is 2.6.9
CPython
===================
version is 2.7.12
CPython
===================
version is 2.7.13
CPython
===================
version is 2.7.8
CPython
===================
version is 3.0.1
CPython
===================
version is 3.1.5
CPython
===================
version is 3.2.6
CPython
===================
version is 3.3.5
CPython
===================
version is 3.3.6
CPython
===================
version is 3.4.2
CPython
===================
version is 3.5.0
CPython
===================
version is 3.5.1
CPython
===================
version is 3.5.2
CPython
===================
version is 3.6.0
CPython
===================
version is 3.6.0a4
CPython
===================
version is 3.6.0b2
CPython
===================
version is 3.6.1
CPython
===================
version is 3.6.2
CPython
===================
version is 3.7-dev
CPython
===================
version is anaconda2-4.1.1
CPython
===================
version is anaconda3-4.1.0
CPython
===================
version is jython-2.7.1b3
Jython
===================
version is pypy2-5.4.1
PyPy
===================
version is pypy2-5.6.0
PyPy
===================
version is pypy-2.6.1
PyPy
===================
version is pypy3-2.3.1
PyPy
===================
version is pypy3-2.4.0
PyPy
===================
version is pypy3.5-5.8.0
PyPy
===================
version is pypy-5.0.1
PyPy
===================
version is pypy-5.3.1
PyPy
===================
version is pyston-0.6.0
Pyston
===================
version is pyston-0.6.1
Pyston
===================
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>As user2357112 mentioned, you can check <code>platform.python_implementation() == "Pyston"</code>, as you can see in the <a href="https://github.com/dropbox/pyston/blob/6d392ba7a5882139e8a6ad8bf5165abd5f32f2d3/from_cpython/Lib/platform.py#L1465" rel="nofollow noreferrer">source</a>.</p>
</div>
<span class="comment-copy">Does <a href="https://docs.python.org/3/library/platform.html#platform.python_implementation" rel="nofollow noreferrer"><code>platform.python_implementation()</code></a> give you something useful?</span>
<span class="comment-copy">...or <code>sys.subversion</code> â†’ <code>('Pyston', '', '')</code></span>
<span class="comment-copy">Great! Thanks. Add that as an answer and I'll accept. I tried it on every Python version I had installed and this gave something meaningful, except PyPY and anaconda (vs CPython).</span>
<span class="comment-copy">@KlausD.sys.subversion acts weirdly. If I run from an interactive shell for pyston I get something. If run from a program not. Tests seem to indicate it is not as pervasive as <code>platform.python_implementation()</code>. In all tests I ran the last to entries in the tuple were ''. Wonder what that's about?</span>
