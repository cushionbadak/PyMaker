<div class="post-text" itemprop="text">
<p>Iam trying to make a python script that reads a text file input.txt and then scans all phone numbers in that file and writes back all matching phone no's to output.txt</p>
<p>lets say text file is like: </p>
<blockquote>
<p>Hey my number is 1234567890 and another number is +91-1234567890. but if none of these is available you can call me on +91 5645454545 (or) mail me at abc@xyz.com</p>
</blockquote>
<p>it should match <strong>1234567890</strong>, <strong>+91-1234567890</strong> and <strong>+91 5645454545</strong></p>
<pre><code>import re

no = '^(\+[1-9]\d{0,2}[- ]?)?[1-9][0-9]{9}' #i think problem is here
f2 = open('output.txt','w+')

for line in open('input.txt'):
    out = re.findall(no,line)
    for i in out : 
        f2.write(i + '\n')
</code></pre>
<p>Regexp for no is like : it takes country codes upto 3 digits and then a - or space which is optional and country code itself is optional and then a 10 digit number.</p>
</div>
<div class="post-text" itemprop="text">
<p>Yes, the problem is with your regex. Fortunately, it's a small one. You just need to remove the <code>^</code> character:</p>
<pre><code>'(\+[1-9]\d{0,2}[- ]?)?[1-9]\d{9}'
</code></pre>
<p>The <code>^</code> signifies that you want to match only at the beginning of the string. You want to match multiple times throughout the string. Here's a <a href="https://regex101.com/r/w81IwB/2" rel="nofollow noreferrer"><code>101demo</code></a>.</p>
<hr/>
<p>For python, you'll need to specify a non-capturing group as well with <code>?:</code>. Otherwise, <a href="https://docs.python.org/3/library/re.html#re.findall" rel="nofollow noreferrer"><code>re.findall</code></a> does not return the complete match:</p>
<blockquote>
<p>Return all non-overlapping matches of pattern in string, as a list of
  strings. The string is scanned left-to-right, and matches are returned
  in the order found. <strong>If one or more groups are present in the pattern,
  return a list of groups.</strong></p>
</blockquote>
<p>Bold emphasis mine. Here's a <a href="https://stackoverflow.com/questions/6018340/capturing-group-with-findall">relevant question</a>.</p>
<p>This is what you get when you specify non-capturing groups for your problem:</p>
<pre><code>In [485]: re.findall('(?:\+[1-9]\d{0,2}[- ]?)?[1-9]\d{9}', text)
Out[485]: ['1234567890', '+91-1234567890', '+91 5645454545']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>this code will work:</p>
<pre><code>import re

no = '(?:\+[1-9]\d{0,2}[- ]?)?[1-9][0-9]{9}' #i think problem is here
f2 = open('output.txt','w+')

for line in open('input.txt'):
    out = re.findall(no,line)
    for i in out :
        f2.write(i + '\n')
</code></pre>
<p>The output will be: </p>
<pre><code>1234567890
+91-1234567890
+91 5645454545
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>you can use </p>
<pre><code>(?:\+[1-9]\d{1,2}-?)?\s?[1-9][0-9]{9}
</code></pre>
<p>see the demo at <a href="https://regex101.com/r/VkOkP9/3" rel="nofollow noreferrer">demo</a></p>
</div>
<span class="comment-copy">output file doesn't show the expected. it just shows +91- and +91 . so i gues s there is problem in writing regexp. How adding (.*?) in beginning will change behaviour of regexp ?</span>
<span class="comment-copy">so you want only  phone numbers in output file or you want to remove duplicates as well</span>
<span class="comment-copy">No i dont want to remove duplicates. i want that after running script on above give text it should write 1234567890, +91-1234567890 and +91 5645454545 to output.txt but after running script it just writes +91- and +91</span>
<span class="comment-copy">use this regex: '(?:\+[1-9]\d{0,2}[- ]?)?[1-9][0-9]{9}'</span>
<span class="comment-copy">it works rightly in regex101 but it just writes +91- and +91 to my output.txt .  Please see my complete code</span>
<span class="comment-copy">@mcjoshi Look at my edit.</span>
<span class="comment-copy">Thanks man ! it worked. i have spent a lot of time over it. can you please elabore about [ need to specify a non-capturing group as well with ?:]</span>
<span class="comment-copy">@mcjoshi Done. If it worked for you, please consider marking it accepted. Thanks.</span>
<span class="comment-copy">@mcjoshi Are you sure? ;p</span>
<span class="comment-copy">yeah it works :) i need to ask one more thing :: suppose my input text file contains many newlines between two paragraphs. How do i remove extra newlines using regexps?</span>
<span class="comment-copy">can you give a sample for your problem?</span>
<span class="comment-copy">See <a href="http://ideone.com/jeylk9" rel="nofollow noreferrer">ideone.com/jeylk9</a></span>
<span class="comment-copy">It shows  +91- +91 in output file ??</span>
<span class="comment-copy">what do you mean ?</span>
<span class="comment-copy">See my code in question. I want to say it just writes +91 and +91- to output.txt</span>
<span class="comment-copy">For python, you'll need to specify a non-capturing group as well with ?:. Otherwise, re.findall does not return the complete match: see the updated answer and demo</span>
