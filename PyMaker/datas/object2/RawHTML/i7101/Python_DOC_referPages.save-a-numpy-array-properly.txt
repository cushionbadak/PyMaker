<div class="post-text" itemprop="text">
<p>I am new to Python, so apologies if my question is very basic, but this is driving me crazy.</p>
<p>So, I created a 2D numpy array of floats, with a string row header. I would like to save the array so that I could re-open it and work it later.</p>
<p>I tried to use <code>np.savetxt</code> as follows:</p>
<p><code>np.savetxt('1_array', waves)</code></p>
<p>but it gives the obvious error:</p>
<blockquote>
<p>TypeError: Mismatch between array dtype ('|S11') and format specifier ('%.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e %.18e')</p>
</blockquote>
<p>I looked for a solution, but I don't seem to find any that would be appropriate for my case. Intuitively, there should be a way to specify the only the first row is a string, but I couldn't figure out how to do this.</p>
<p>Any help will be greatly appreciated!</p>
</div>
<div class="post-text" itemprop="text">
<p>You need to save the header separate and save the rest as float.</p>
<pre><code>waves_data = waves[1:].astype(float)
header = ' '.join(waves[0])

np.savetxt(
    '1_array', waves_data, delimiter=",", header=header
)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I don't understand why would you like to mix types in a single numpy array, but it's not really important here. Probably the simplest solution to save anything for later is using module <a href="https://docs.python.org/3/library/pickle.html" rel="nofollow noreferrer">pickle</a>. Below piece of code which should solve you problem no matter what you put into the array:</p>
<pre><code>import numpy as np
import pickle

waves = np.array([['a', 'b', 'c'], [1.0, 2.0, 3.0], [4.0, 5.0, 6.0]])  # if I understood correctly

# writing file to the hard drive
with open('testfile.p', 'wb') as f:
    pickle.dump(waves, f)

# reading from hard drive
with open('testfile.p', 'rb') as f:
    waves2 = pickle.load(f)
</code></pre>
</div>
<span class="comment-copy"><i>I created a 2D numpy array of floats, with a string row header</i>: it sounds like you're including both the floats and the strings into the same array (which results in everything being converted to strings). I'd suggest that you probably don't want to do that, and keep the header separate from the array (or use Pandas data frames).</span>
<span class="comment-copy">Ok, but how could I keep the header separate from the array and save it at the same time?</span>
<span class="comment-copy">Pass it as <code>header</code> parameter in <code>np.savetxt</code>?</span>
<span class="comment-copy">@DanielF I tried to do this: <code>np.savetxt('1_array', waves, header=waves[0])</code>, but it gives me the error: AttributeError: 'numpy.ndarray' object has no attribute 'replace'</span>
<span class="comment-copy">1. <code>header</code> needs to be a string, not a numpy array.  2. if <code>waves[0]</code> is your header, <code>waves</code> is still in string format, and you haven't split your data out.  Also <code>waves[0]</code> is part of <code>waves</code>, so you're just duplicating your header.</span>
