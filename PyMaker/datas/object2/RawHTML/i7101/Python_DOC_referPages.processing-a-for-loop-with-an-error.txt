<div class="post-text" itemprop="text">
<p>I have a for loop which has an error in it.  </p>
<pre><code>try:
    for line in text:
        'do stuff'
except:
    pass
</code></pre>
<p>When the error occurs python just exits the for loop.  I can't get python to ignore the error and keep iterating through the loop.  Incidentally, it is a text file and I am looping through the lines. I should also point out that the error does not occur in the do stuff part, it literally occurs in the for loop.  I also frankly don't understand why the error is being thrown since the line is just like any other line.  I tried deleting the line to see if it was just a one time thing but the next line has an error in it too which leads me to believe that I cannot just delete bad lines. The name of the error is unicodedecodeerror</p>
<p>Here's the text:</p>
<p><a href="https://drive.google.com/file/d/0B9zzW6-3m2qGVFRTbzlXMS0tVUU/view?usp=sharing" rel="nofollow noreferrer">https://drive.google.com/file/d/0B9zzW6-3m2qGVFRTbzlXMS0tVUU/view?usp=sharing</a></p>
<p>I'm trying to make a list of all the words that follow the word 'abstract'</p>
<p>Here's the actual code</p>
<p>with open(full_path_of_old_file) as old:</p>
<pre><code>for i, line in enumerate(old):


    if "abstract," not in line:
        b = line.find('abstract')
        line2 = line[b+9:]
        list1 = line2.split()
        list1[0] = list1[0].replace(",","")
        list1[0] = list1[0].replace(".", "")
        try:
            if list1[0][-1] == "s":
                list1[0] = list1[0][:-1]
        except:
            pass
        objects_of_abstract.append(list1[0])
</code></pre>
<p>Here's the full traceback</p>
<pre><code>Traceback (most recent call last):
  File "/Applications/PyCharm CE.app/Contents/helpers/pydev/pydevd.py", line 1596, in &lt;module&gt;
    globals = debugger.run(setup['file'], None, None, is_module)
  File "/Applications/PyCharm CE.app/Contents/helpers/pydev/pydevd.py", line 1023, in run
    pydev_imports.execfile(file, globals, locals)  # execute the script
  File "/Applications/PyCharm CE.app/Contents/helpers/pydev/_pydev_imps/_pydev_execfile.py", line 18, in execfile
    exec(compile(contents+"\n", file, 'exec'), glob, loc)
  File "/Users/kylefoley/PycharmProjects/inference_engine2/inference2/Proofs/z_natural_language.py", line 25, in &lt;module&gt;
    for i, line in enumerate(old):
  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/codecs.py", line 321, in decode
    (result, consumed) = self._buffer_decode(data, self.errors, final)
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xe9 in position 764: invalid continuation byte
We've got an error while stopping in post-mortem: &lt;class 'KeyboardInterrupt'&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Your problem is your file encoding. Change it to <code>latin-1</code> like this:</p>
<pre><code>objects_of_abstract = list()
with open('abstract.txt', encoding="latin-1") as old:

    for i, line in enumerate(old):


        if "abstract," not in line:
            b = line.find('abstract')
            line2 = line[b+9:]
            list1 = line2.split()
            list1[0] = list1[0].replace(",","")
            list1[0] = list1[0].replace(".", "")
            try:
                if list1[0][-1] == "s":
                    list1[0] = list1[0][:-1]
            except:
                pass
            objects_of_abstract.append(list1[0])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Somewhere in your code you open the file.  There are two parameters in the <code>open</code> function that pertain to your problem:</p>
<p><code>encoding=None</code>: encoding is the name of the encoding used to decode or encode the file. This should only be used in text mode. The default encoding is platform dependent (whatever locale.getpreferredencoding() returns), but any encoding supported by Python can be used. See the codecs module for the list of supported encodings.</p>
<p><code>errors=None</code>: errors is an optional string that specifies how encoding and decoding errors are to be handledâ€“this cannot be used in binary mode. A variety of standard error handlers are available, though any error handling name that has been registered with codecs.register_error() is also valid. </p>
<p>[there is more; see the standard library docs]</p>
<p>Since you don't show how you open the file, I can't tell you specifically what is wrong.  But the error message indicates that it is an encoding error, and you should start by looking into that.</p>
</div>
<div class="post-text" itemprop="text">
<p>A possible answer, which should bypass your problem to the other answers, is to use the <code>suppress</code> function from the <a href="https://docs.python.org/3/library/contextlib.html#contextlib.suppress" rel="nofollow noreferrer"><code>contextlib</code></a>
 module in the standard library:</p>
<pre><code>from contextlib import suppress

with suppress(UnicodeDecodeError): #might have to some some work here to get the error right
    for i, line in enumerate(old):
        .....
</code></pre>
<p>as it says in the docs though, better to try and fix your problem, rather than silently ignore it, if possible.</p>
</div>
<div class="post-text" itemprop="text">
<p>This should help with the first question (keeping the loop going):</p>
<p>In a python try...except block, it will try to run <strong>all</strong> the code in the <code>try</code> block, and if an error is thrown, it will stop and move to the <code>except</code></p>
<p>In your case, you could move the <code>for</code> outside the <code>try</code>, so that if an error occurs it will be handled in the <code>except</code> and then continue on to the next iteration:</p>
<pre><code>for line in text:
  try:
    'do stuff'
  except: # if 'do stuff' throws an error, we just go to the next iteration
    pass
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You have to keep try/except block inside for loop</p>
<pre><code>for line in text:
    try:
        # your Operation
    except:
        pass
</code></pre>
</div>
<span class="comment-copy">Post your full traceback, not just the name of the error.</span>
<span class="comment-copy">I can't because it is the for line that has the bug</span>
<span class="comment-copy">Post more of your code. What is <code>text</code>? If it's failing on the <code>for</code> line then there's another problem. <code>text</code> may not be an iterable or whatever. Post your errors.</span>
<span class="comment-copy">@bobsmith76 it's your file encoding. Check my updated answer</span>
<span class="comment-copy">That's not the problem, see other comments.  It's the for line that throws the error</span>
