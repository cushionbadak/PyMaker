<div class="post-text" itemprop="text">
<p>Someone suggested using the following function to replace the original shutil.copytree function. </p>
<pre><code>def copytree(src, dst, symlinks=False, ignore=None):
    for item in os.listdir(src):
        s = os.path.join(src, item)
        d = os.path.join(dst, item)
        if os.path.isdir(s):
            shutil.copytree(s, d, symlinks, ignore)
        else:
            shutil.copy2(s, d)
</code></pre>
<p>It worked fine except I wanted to pass some ignore_patterns to the variable 'ignore', my pattern is "<em>upf</em>", and it gives me following error.</p>
<pre><code>    def copytree(src, dst, symlinks=False, ignore= ignore_patterns('*upf*')):
NameError: name 'ignore_patterns' is not defined
</code></pre>
<p>Can anyone please help? Thanks much!</p>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://docs.python.org/3/library/shutil.html#shutil.ignore_patterns" rel="nofollow noreferrer"><code>ignore_patterns</code></a> function belongs to the <code>shutil</code> module.</p>
<p>So, you can fix your code like below:</p>
<pre class="lang-py prettyprint-override"><code>import os
import shutil


def copytree(src, dst, symlinks=False, ignore=shutil.ignore_patterns("*upf")):
    for item in os.listdir(src):
        s = os.path.join(src, item)
        d = os.path.join(dst, item)
        if os.path.isdir(s):
            shutil.copytree(s, d, symlinks, ignore)
        else:
            shutil.copy2(s, d)
</code></pre>
</div>
<span class="comment-copy">... well, the name <code>ignore_patterns</code> does not appear to be defined. Did you import it?</span>
<span class="comment-copy"><code>from shutil import ignore_patterns</code></span>
<span class="comment-copy">That's right! I have imported ignore_patterns and the error has gone! Thank you! However my filter doesn't work as expected.  Under my source directory I have files with names "top.upf.0", "top.upf.1" ..."top.upf.5" that I wanted to be excluded when copying to the destination directory. Any idea?</span>
