<div class="post-text" itemprop="text">
<p>I have written the following code to modify the behavior of a method of one class</p>
<pre><code>import mymodule
mymodule.MyClass.f = mydecorator(mymodule.MyClass.f)
mymodule.MyClass.f(x) # call the modified function
</code></pre>
<p>This works for my purposes, but: what have I modified exactly? Is <code>mymodule.MyClass</code> a copy of the original class living inside the current module? Does it in any way affect the original class? How does import work exactly?</p>
</div>
<div class="post-text" itemprop="text">
<p>When you modify imported module, you modify the cached instance. Thus your changes will affect all other modules, which import the modified module.</p>
<p><a href="https://docs.python.org/3/reference/import.html#the-module-cache" rel="nofollow noreferrer">https://docs.python.org/3/reference/import.html#the-module-cache</a></p>
<p><strong>UPDATE:</strong></p>
<p>You can test it.</p>
<p>change_sys.py:</p>
<pre><code>import sys

# Let's change a module
sys.t = 3
</code></pre>
<p>main.py:</p>
<pre><code># the order of imported modules doesn't meter
# they both use cached sys
import sys
import change_sys

print(sys.t)
</code></pre>
<p>Output for <code>python ./main.py</code>:</p>
<pre><code>3
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>It depends. In normal uses cases everything should be ok. But one can imagine special cases where it can lead to weird results:</p>
<p>a.py:</p>
<pre><code>import c

x = c.C()

def disp():
    return x.foo()
</code></pre>
<p>b.py:</p>
<pre><code>import c

def change():
    c.C.foo = (lambda self: "bar at " + str(self))
</code></pre>
<p>c.py:</p>
<pre><code>class C:
    def foo(self):
        return "foo at " + str(self)
</code></pre>
<p>Now in top level script (or interactive interpretor) I write:</p>
<pre><code>import a
import b
a.disp()
b.change()
a.disp()
</code></pre>
<p>Output will be:</p>
<pre><code>'foo at &lt;c.C object at 0x0000013E4A65D080&gt;'
'bar at &lt;c.C object at 0x0000013E4A65D080&gt;'
</code></pre>
<p>It may be what you want, but the change has been done in <code>b</code> module and it does affect <code>a</code> module.</p>
</div>
<span class="comment-copy">Say, you declare <code>x = 5</code> in some file... now, another program imports <code>x</code> and changes it to 10. What happens?</span>
<span class="comment-copy">@cᴏʟᴅsᴘᴇᴇᴅ: I'm not exactly sure</span>
<span class="comment-copy">Absolutely nothing happens. The original is not modified. All you are importing is a copy into your namespace.</span>
<span class="comment-copy">@cᴏʟᴅsᴘᴇᴇᴅ: thanks!</span>
