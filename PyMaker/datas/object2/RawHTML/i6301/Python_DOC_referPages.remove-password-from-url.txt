<div class="post-text" itemprop="text">
<p>I have an URL like this:</p>
<pre><code>https://user:password@example.com/path?key=value#hash
</code></pre>
<p>The result should be:</p>
<pre><code>https://user:???@example.com/path?key=value#hash
</code></pre>
<p>I could use a regex, but I would like to do it "right" by parsing the url to a high level data structure, then operating on this data structure, then serializing to a string.</p>
<p>Is this possible with Python?</p>
<p>Please leave a comment before down-voting. What's wrong with this question?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use the built in <code>urlparse</code> to query out the password from a url. It is available in both Python 2 and 3, but under different locations.</p>
<p><a href="https://docs.python.org/2/library/urlparse.html" rel="nofollow noreferrer">Python 2</a> <code>import urlparse</code></p>
<p><a href="https://docs.python.org/3/library/urllib.parse.html" rel="nofollow noreferrer">Python 3</a> <code>from urllib.parse import urlparse</code></p>
<p><strong>Example</strong></p>
<pre><code>from urllib.parse import urlparse

parsed = urlparse("https://user:password@example.com/path?key=value#hash")
parsed.password # 'password'

replaced = parsed._replace(netloc="{}:{}@{}".format(parsed.username, "???", parsed.hostname))
replaced.geturl() # 'https://user:???@example.com/path?key=value#hash'
</code></pre>
<p>See also this question: <a href="https://stackoverflow.com/questions/21628852/changing-hostname-in-a-url">Changing hostname in a url</a></p>
</div>
