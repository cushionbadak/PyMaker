<div class="post-text" itemprop="text">
<p>I want to extract all docstrings from my python file using grep or awk. 
I tried </p>
<pre><code>cat test.py | grep """[\w\W]*?"""
</code></pre>
<p>But I see no output.
Say the the test <code>test.py</code> looks like this. </p>
<pre><code>import libraries

class MyClass(object):
    """Docstring to this class. 
       second line of docstring."""

    def myClassMethod(a,b):
        """Docstring of the method. 
           another line in docstring of the method."""
        return a + b
</code></pre>
<p>Then the output should be all that is enclosed in triple quotes. </p>
<pre><code>"""Docstring to this class. 
second line of docstring."""
"""Docstring of the method. 
another line in docstring of the method."""
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The proper way to extract docstrings from Python code is via actual Python parser (the <a href="https://docs.python.org/3/library/ast.html" rel="nofollow noreferrer"><code>ast</code></a> module):</p>
<pre><code>#!/usr/bin/env python
import ast

with open('/path/to/file') as f:
    code = ast.parse(f.read())

for node in ast.walk(code):
    if isinstance(node, (ast.FunctionDef, ast.ClassDef, ast.Module)):
        docstring = ast.get_docstring(node)
        if docstring:
            print(repr(docstring))
</code></pre>
<p>Run on your sample will output:</p>
<pre><code>'Docstring to this class. \nsecond line of docstring.'
'Docstring of the method. \nanother line in docstring of the method.'
</code></pre>
<hr/>
<p>Just for fun, we can do also do it with GNU <code>awk</code>:</p>
<pre><code>$ awk -v RS= -v FPAT="'''.*'''|"'""".*"""' '{print $1}' file
"""Docstring to this class. 
       second line of docstring."""
"""Docstring of the method. 
           another line in docstring of the method."""
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>With P(perl) grep you can do the following:</p>
<pre><code>grep -Poz '"""[^"]+"""' test.py
</code></pre>
<p>Output:</p>
<pre><code>"""Docstring to this class. 
       second line of docstring.""""""Docstring of the method. 
           another line in docstring of the method."""
</code></pre>
</div>
<span class="comment-copy">We're gonna need more details, like input sample and expected output.</span>
<span class="comment-copy">I added the test case and fixed typos.</span>
<span class="comment-copy">I had found this method, but I was wondering if this could be done using grep or awk</span>
<span class="comment-copy">I wouldn't recommend it over Python version, but take a look at the awk approach I just added.</span>
<span class="comment-copy">Thanks a lot this satisfied my curiosity</span>
<span class="comment-copy">I am getting an error <code>grep: unescaped ^ or $ not supported with -Pz</code></span>
<span class="comment-copy">strange, works fine on my <code>GNU grep 2.25</code></span>
<span class="comment-copy">Mine is <code>grep (GNU grep) 2.24</code>  if we use something other than perl regex does it work.</span>
