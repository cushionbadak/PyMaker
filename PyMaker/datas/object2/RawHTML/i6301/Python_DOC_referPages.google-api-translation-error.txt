<div class="post-text" itemprop="text">
<p>Im trying to translate spanish text via googletranslate, </p>
<pre><code>@app.route('/out', methods=['POST'])
def translate():
    pl=request.json.get('spanish')
    pl=pl.replace(" ","+")
    payload=pl.encode('utf-8')
    print (payload)
    with urllib.request.urlopen('https://translation.googleapis.com/language/translate/v2?q='+str(payload)+'&amp;target=en&amp;format=text&amp;source=es&amp;key=AIzaSyCS-eBQ5gtBlZU4507OjSFMstHDAp8LIao') as response:
        html = response.read()
</code></pre>
<p>===============================================================</p>
<p><strong>But Im getting wrong output</strong> </p>
<pre><code>curl -X POST -H "Content-Type: application/json" -d '{
  "spanish": " Se recibió información procedente de dos médicos "
}' http://localhost:5000/out

Output : b 'Information was received from two m? x? 3? x?
</code></pre>
<p>So I think the text being passed to google translate is <code>"Se recibió información procedente de dos m? x? 3? x?"</code>rather than "<code>Se recibió información procedente de dos médicos</code> "</p>
<p>How can I ensure that the spanish characters are properly passed to google translate. </p>
</div>
<div class="post-text" itemprop="text">
<p>Just replacing space with <code>+</code> will not work. In this case, you can use <code>quote_plus</code> from <code>urllib</code> module.</p>
<p>Check documentation about <code>quote_plus</code> </p>
<ul>
<li><a href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote_plus" rel="nofollow noreferrer">python3</a> - <code>urllib.parse.quote_plus(string, safe='', encoding=None, errors=None)</code></li>
<li><a href="https://docs.python.org/2/library/urllib.html#urllib.quote_plus" rel="nofollow noreferrer">python 2.7</a> - <code>urllib.quote_plus(string[, safe])</code></li>
</ul>
<p>Quick example here:</p>
<pre><code>import urllib.parse

def test():
    str = " Se recibió información procedente de dos médicos "
    converted = urllib.parse.quote_plus(str)
    # =&gt; '+Se+recibi%C3%B3+informaci%C3%B3n+procedente+de+dos+m%C3%A9dicos+'
</code></pre>
<p>Hope this help :)</p>
</div>
