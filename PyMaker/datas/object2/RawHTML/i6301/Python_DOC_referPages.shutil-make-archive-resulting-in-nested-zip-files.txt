<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/49467850/stop-shutil-make-archive-adding-archive-to-itself">Stop shutil.make_archive adding archive to itself</a>
<span class="question-originals-answer-count">
                    1 answer
                </span>
</li>
</ul>
</div>
<p>I've been trying to use <a href="https://docs.python.org/3/library/shutil.html#shutil.make_archive" rel="nofollow noreferrer"><code>make_archive</code></a> from <code>shutil</code> library.</p>
<p>Here is the code (with comprehensive comments):</p>
<pre><code>from shutil import make_archive
make_archive(
  'zipfile_name', 
  'zip',           # archive format
  root_dir=None,   # current working dir if None
  base_dir=None)   # cwd if None 
</code></pre>
<p>Here is an example of directory tree:</p>
<pre><code>folder
│   script.py
└───subfolder1
│   │   file011.txt
│   │   file012.txt
│   │
└───subfolder2
│   │   file011.txt
│   │   file012.txt
│   │
...
</code></pre>
<p>If I run my script (with code above), the result is:</p>
<pre><code>folder
│   script.py
└───subfolder1
│   │   file011.txt
│   │   file012.txt
│   │
└───subfolder2
│   │   file011.txt
│   │   file012.txt
│   │
└───zipfile_name.zip
│   │   same content as above (like expected)
│   │   zipfile_name.zip

...
</code></pre>
<p>Why is an additional <code>zipfile_name.zip</code> is created? Also, note that the second archive can't be open since it is invalid. I understand if no one has ever faced this issue before, but maybe my parameters are wrong and this is why I'm asking.</p>
</div>
<div class="post-text" itemprop="text">
<p>I also encountered this problem. Here's a simple trick to solve the issue: use a relative path as the <code>base_name</code>:</p>
<pre><code>from shutil import make_archive
make_archive(
  '../zipfile_name', 
  'zip',           # archive format
  root_dir=None,   # current working dir if None
  base_dir=None)   # cwd if None 
</code></pre>
<p>The archive will be created in the parent directory, not interfering with the directory that is being archived.</p>
</div>
