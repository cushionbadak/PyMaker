<div class="post-text" itemprop="text">
<p>how to divide images into the block and merge them back using opencv. I have divide images into the blocks but I am not getting how to merge it back by achieving deduplication.
This is my code to divide images to blocks</p>
<pre><code>   `import time
    import cv2
    import numpy as np
    from hashlib import md5
    hashs=[] 
    def compute_image_path(path):
      img=cv2.imread(path)
      #img=cv2.resize(img,(512,512))
      print(img.shape)
      print(img.size/1024)
      start=time.time()
      imgs=np.split(img,8,axis=0)
       for i,ix in enumerate(imgs):
        ig=np.split(ix,8,axis=1)
         for j,iy in enumerate(ig):
           if(j==1):
              cv2.imshow(str(i*8+j),iy)

     cv2.imwrite("C:\\Users\\prave\\Desktop\\Comp\\"+str(i*8+j)+".jpg",iy)
        hashs.append(md5(iy.tostring()).hexdigest())                   
       end=time.time()
       print(end-start)
       print(len(hashs))
       print(len(set(hashs)))    
       cv2.waitKey(0)
       print(hashs[0])
       print(hashs[1])      
       if __name__ == "__main__":
        #img=np.zeros((512,512,3))
        #img[:200,:,0]=100
        #img[200:400,:,1]=100
        #img[400:,:,2]=100
        #cv2.imshow("input",img)        
        #cv2.waitKey(0)
        compute_image_path("C:\\Users\\prave\\Desktop\\IMG_2849.jpg")`
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>One way to solve this is to use <code>numpy.block</code> which stacks blocks back together:</p>
<pre><code>import numpy as np

# 20x20 image
img = np.random.randint(0,9,(20,20))

# List of 4 5x20 image slices
sliced = np.split(img,4,axis=0)

# List of 4 lists of 4 5x5 image blocks
blocks = [np.split(img_slice,4,axis=1) for img_slice in sliced]

# stacking them back together
img_stacked = np.block(blocks)

# testing if the stacking works right
print((img==img_stacked).all())
</code></pre>
<p>But this works only if you have the list of lists in the correct order (first split axis 0, then axis 1). More generally <code>hstack</code>, <code>vstack</code>, or <code>concatenate</code> can smaller arrays (images) together. </p>
</div>
<span class="comment-copy">Can you be a bit more specific? Are these blocks like a grid, so splitting the image into 2x2 blocks and merging them back together? Or is the block a subimage of the larger image?</span>
<span class="comment-copy">If you are aware of where each piece has to go, you can simply use <code>np.hstack</code>  and <code>np.vstack</code> , but yes, you need to explain your question much better as pointed out by GenError, please go through <a href="https://stackoverflow.com/help/how-to-ask">How to ask</a> and <a href="https://stackoverflow.com/help/mcve">How to create a minimum complete verifiable example</a></span>
<span class="comment-copy">I have divided images into 8*8 blocks</span>
<span class="comment-copy">Sir if I want to do deduplication of images by comparing block hash technique what should I do</span>
<span class="comment-copy">I am trying to achieve DICE protocol nearest identical deduplication of images</span>
<span class="comment-copy">Sorry, that is not my field of expertise</span>
