<div class="post-text" itemprop="text">
<p>I need to retrieve the env variable <code>$PS1</code> of the parent process (the shell) that calls the python program. <code>$PS1</code> doesn't belong to <code>os.environ</code> inside the python process and <code>sys.ps1</code> stores its own prompt.</p>
<p>How can we pass this variable to the program from the shell ?</p>
<p>I invoke the program with : <code>python3 program.py</code> from the shell.</p>
</div>
<div class="post-text" itemprop="text">
<p>The python script can access all the environment variables through <code>os.environ</code>. Your problem is that <code>PS1</code> is not an environment variable, but only a <em>local</em> variable of the shell.</p>
<p>That means that the shell does not pass it to its child in the environment (you can control that by typing <code>env</code> or <code>printenv</code> in your shell). So unless you manually put it in the environment before starting Python (<code>export PS1</code> for sh or bash) you cannot get it in your Python script.</p>
</div>
<div class="post-text" itemprop="text">
<p>If value assigned to <code>$PS1</code> doesn't change during runtime of your <code>program.py</code> then probably the best option is to pass it as an argument and retrieve it in you script using <a href="https://docs.python.org/3/howto/argparse.html" rel="nofollow noreferrer">argparse</a>. If the value is changing during runtime, then one of the options would be to store it in some temporary file and read it from there. </p>
</div>
<span class="comment-copy">Only an interactive shell knows the value of <code>$PS1</code>. Show us how you are invoking the python script from shell</span>
<span class="comment-copy">Ok, I edited my answer, the shell from which I call the python program, knows <code>$PS1</code></span>
<span class="comment-copy">Did you try <code>python3 -i program.py</code>?</span>
<span class="comment-copy">I don't have access to <code>$PS1</code> of the shell. If my prompt on the shell is <code>prompt$</code>and I invoke <code>python3 program.py</code> I want to get <code>$PS1</code>= <code>prompt$</code> inside python program</span>
<span class="comment-copy">a local variable of the shell, Agreed. But not all shells started will have visibility to <code>PS1</code>, only the interactive ones</span>
<span class="comment-copy">@Inian: my Posix shell on FreeBSD has a local PS1 whether started interactively or not. But none of its child can know it.</span>
