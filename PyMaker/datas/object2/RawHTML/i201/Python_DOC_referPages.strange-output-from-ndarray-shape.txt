<div class="post-text" itemprop="text">
<p>I am trying to convert the value of a dictionary to a 1d array using:<code>np.asarray(dict.values())</code>, but when I tried to print the shape of the output array, I have problem.
My array looks like this:</p>
<pre><code>dict_values([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26])
</code></pre>
<p>but the output of array.shape is:</p>
<pre><code>()
</code></pre>
<p>by which I was expecting <code>(27,1)</code> or <code>(27,)</code></p>
<p>after I changed the code to <code>np.asarray(dict.values()).flatten()</code>,the output of array.shape became </p>
<pre><code>(1,)
</code></pre>
<p>I have read the document of <code>numpy.ndarray.shape</code>, but can't get a hint why the outputs are like these. Can someone explain it to me? Thx</p>
</div>
<div class="post-text" itemprop="text">
<p>This must be python 3.</p>
<p>From <a href="https://docs.python.org/3/library/stdtypes.html#dictionary-view-objects" rel="nofollow noreferrer">docs</a></p>
<blockquote>
<p>The objects returned by dict.keys(), dict.values() and dict.items()
  are view objects. They provide a dynamic view on the dictionaryâ€™s
  entries, which means that when the dictionary changes, the view
  reflects these changes.</p>
</blockquote>
<p>The issue is that <code>dict.values()</code> is only returning a dynamic view of the data in dictionary's values, Leading to the behaviour you see.</p>
<pre><code>dict_a = {'1': 1, '2': 2}
res = np.array(dict_a.values())
res.shape #()
res
#Output:
array(dict_values([1, 2]), dtype=object)
</code></pre>
<p>Notice that the numpy array isn't resolving the view object into the actual integers, but rather just coercing the view into an array with <code>dtype = object</code></p>
<p>To avoid this issue, consume the view to get a list, as follows:</p>
<pre><code>dict_a = {'1': 1, '2': 2}
res = np.array(list(dict_a.values()))
res.shape #(2,)
res #array([1, 2])
res.dtype #dtype('int32')
</code></pre>
</div>
