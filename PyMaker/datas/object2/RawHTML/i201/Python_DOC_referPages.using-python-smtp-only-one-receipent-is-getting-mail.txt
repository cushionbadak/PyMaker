<div class="post-text" itemprop="text">
<p>i am new to python,and below is the code which is suppose to send mail to multiple receipent but only dipeshyog94@gmail.com is getting a mail. milanthapa898@gmail.com which is second on To and alexlee94@gmail.com which is on cc is no getting the mail</p>
<pre><code>from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
from email.mime.base import MIMEBase
from email import encoders
import smtplib

owner_emp_id_email = "dipeshyogi94@gmail.com,milanthapa989@gmail.com"
mymail='milanthapa898@gmail.com'
msg = MIMEMultipart()
msg['From'] = mymail
msg['To'] = owner_emp_id_email
cc_mail = "alexlee94@gmail.com"
msg['Cc'] = cc_mail
print('####44444444444444########\n')
print(owner_emp_id_email)
msg['Subject'] = 'Automated Test Mail with python'
a = 'Milan Thapa'
#body = 'Dear '+spoc_name+',\n\nYou have created new job with below Details:\n\nProject ID : '+project_ID+'\n\nProject Name : '+ibu_name+'\n\nJob Description : ' +job_description +'\n\nThanks and Regards,\n\nMilan Thapa'
html = """\
            &lt;html&gt;
                &lt;head&gt;&lt;/head&gt;
                    &lt;body&gt;
                        &lt;p&gt;'Dear &lt;b&gt;{}&lt;b&gt;

                        &lt;/p&gt;
                    &lt;/body&gt;
            &lt;/html&gt;
            """.format(a)
msg.attach(MIMEText(html,'html'))
text = msg.as_string()
try:
    server = smtplib.SMTP('smtp.gmail.com:587')

except:
    server = smtplib.SMTP('smtp.gmail.com:587')
server.ehlo()
server.starttls()
server.ehlo()
server.login(mymail,'password')
server.sendmail(mymail,owner_emp_id_email,text)
server.quit()
</code></pre>
<p>i am stuck in this couldn't send the mail to multiple users.</p>
<p>any help will be greatly appreciated!</p>
<p>thanks in advance </p>
</div>
<div class="post-text" itemprop="text">
<p>The information in the headers doesn't control where the message <em>actually</em> goes.  The second argument to <code>sendmail</code> is the only place where this is controlled.  This value should be a <em>list,</em> not a comma-separated string.</p>
<pre><code>owner_emp_id_email = "dipeshyogi94@gmail.com,milanthapa989@gmail.com"
env_rcpts = owner_emp_id_email.split(",")
# ...
cc_mail = "alexlee94@gmail.com"
env_rcpts.append(cc_mail)
# ...
server.sendmail(mymail,env_rcpts,text)
</code></pre>
<p>You'll notice that you could also add addresses which are neither in <code>To:</code> or <code>Cc:</code> (or a number of other headers which serve the same purpose) to effectively implement <code>Bcc:</code></p>
<p>Maybe also look at <code>send_message</code> which saves you from having to separately convert your message to a string you can pass to <code>sendmail</code>.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>msg['To'] = owner_emp_id_email
</code></pre>
<p>Here <code>owner_emp_id_email</code> is a <code>string</code>.
Make it a list of email ids. Then it would work.</p>
<pre><code>to_ids = owner_emp_id_email.split(',')
msg['To'] = to_ids
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><code>&gt;&gt;&gt; help(smtplib)</code></p>
<p><code>to_addrs: A list of addresses to send this mail to. A bare string will be treated as a list with 1 address.</code></p>
<p>You need to convert your CSV string to a list like mentioned in the the other answer. <br/><br/>With this answer I just wanted to demonstrate how can we use the python's amazing help function when stuck. </p>
</div>
<span class="comment-copy">If those are real email addresses, exposing them like this is almost guaranteed to increase your spam load. Maybe <a href="https://stackoverflow.com/posts/55057368/edit">edit</a> your question to replace them with placeholders like <code>mail1@example.com</code></span>
<span class="comment-copy">This still doesn't handle adding the Cc: recipient to the recipient list.</span>
<span class="comment-copy">Ya exactly ,CC recipient will not receive mail even after this</span>
<span class="comment-copy"><code>help(smptlib)</code> brings up a copy of <a href="https://docs.python.org/3/library/smtplib.html#smtplib.SMTP.sendmail" rel="nofollow noreferrer">the entire module documentation</a>. Maybe not a stellar example. Maybe also show how to google? (Sorry, couldn't resist.)</span>
<span class="comment-copy">sorry I forgot to mention you will have to press Enter a few times and use your visual sensors as well as natural and subconscious task of finding similar text from a seemingly very cute documentation. Oh and for the bonus you also get to learn 4 different things, if interested.</span>
