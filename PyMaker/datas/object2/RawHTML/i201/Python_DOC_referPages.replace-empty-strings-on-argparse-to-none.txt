<div class="post-text" itemprop="text">
<p>I am using groovy to call a python class, I am defaulting to None the empty arguments, but I am finding lots of problems to default to None null or empty strings ('') also.</p>
<p>I hope there would be something in <code>argparse</code> to check if the argument is '' and change it to None in that case so further in the code I don't have to check for <code>None</code> and for '' just check if is not <code>None</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://docs.python.org/3/library/argparse.html#type" rel="nofollow noreferrer">type</a> argument of <code>ArgumentParser.add_argument()</code> is a function that "allows any necessary type-checking and type conversions to be performed." You can abuse this:</p>
<pre><code>import argparse

def nullable_string(val):
    if not val:
        return None
    return val

parser = argparse.ArgumentParser()
parser.add_argument('--foo', type=nullable_string)
print(parser.parse_args(['--foo', ''])
</code></pre>
<p>Output:</p>
<pre><code>Namespace(foo=None)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Specify the command line argument as having type <code>str</code> with default <code>None</code>, for example:</p>
<pre><code>parser.add_argument('-j', '--jfile', default=None, type=str)
</code></pre>
<p>Then if the user omits <code>-j</code> entirely then you will get <code>None</code> back. But if the user puts <code>-j</code> on the command line with nothing after it, they will get the error <em>argument -j/--jfile: expected one argument</em> and they will have to supply a string value to get past this. So you should always get either <code>None</code> or a non-empty string.</p>
</div>
<span class="comment-copy">thanks @JETM, works like a charm and is what I was looking for. I found a more tedious way:  inside a for loop adding : vars(arguments)[arg] = None if vars(arguments)[arg] is ' ' else vars(arguments)[arg].  Which is very ugly, thanks again.</span>
