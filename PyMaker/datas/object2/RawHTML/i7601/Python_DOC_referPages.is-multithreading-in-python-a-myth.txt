<div class="post-text" itemprop="text">
<p>I am new to multithreaded code in python. In my current knowledge i know that multiple threads can be spawned within the system concurrently but 2 different threads can not access or modify the same resource at the same time. I have even tried many things like creating many threads and putting into the queue etc. But always i used to hear people say multithreading is not available in python instead you can use multiprocessing to take advantage of multicore.</p>
<p>Please le me know if is it true? Is python threads are only green threads not real multithreading? Am i right about the resource locking of python?</p>
<p>Thank you in advance</p>
</div>
<div class="post-text" itemprop="text">
<p>No, Python does have multithreading. In fact, it uses system threads. The problem is just that it can't use more than one of the available cores. This is due to something called the <a href="https://wiki.python.org/moin/GlobalInterpreterLock" rel="nofollow noreferrer"><strong>GIL</strong>(<strong>Global Interpreter Lock</strong>).</a> Python threads still work for I/O bound tasks as opposed to CPU bound tasks which may cause deadlocks and race conditions. Many Python libraries solve this issue by using C extensions to bypass the GIL. Of course, this is all in the case of CPython.</p>
<p>There is a very interesting talk about this by one of the core developers of Python.</p>
<p><a href="https://www.youtube.com/watch?v=Bv25Dwe84g0" rel="nofollow noreferrer">Thinking about concurrency, Raymond Hettinger</a></p>
<p>Now you are right, it is much better to use multiprocessing to get the benefit of all the cores. But there are much fewer cores than there are threads. Cores are valuable resources and take up a lot of memory. If you don't mind dealing with <a href="https://docs.python.org/3/library/ipc.html" rel="nofollow noreferrer">IPC(Interprocess Communication)</a>, then it is a great solution.</p>
</div>
<div class="post-text" itemprop="text">
<p>Multithreading in Python is sort of a myth.</p>
<p>There's technically nothing forbidding multiple threads from trying to access the same resource at the same time. The result is usually not desirable, so things like locks, mutexes, and resource managers were developed. They're all different ways to ensure that only one thread can access a given resource at a time. In essence, they make threads play nice together. However, if a lot of the threads' time is spent waiting for resources, you're not getting any benefits from multithreading, and you'd be better off writing a single-threaded program instead (or restructuring your program to avoid the waiting).</p>
<p>That being said, in CPython (the most prevalent Python implementation - the one you get from clicking the download button on <a href="https://python.org" rel="nofollow noreferrer">https://python.org</a> or via a package manager), there's this evil necessity called the <a href="https://wiki.python.org/moin/GlobalInterpreterLock" rel="nofollow noreferrer">Global Interpreter Lock</a> (GIL). In order to make the dynamic memory management in CPython work correctly, the GIL prevents multiple threads from running Python code at the same time. This is because CPython's dynamic memory management is not thread-safe - it can have those same problems of multiple threads accessing (or worse, disposing) the same resource at the same time. The GIL was a compromise between the two extremes of not allowing multi-threaded code, and having the dynamic memory management be very bulky and slow.</p>
<p>Other implementations (like <a href="http://www.jython.org/" rel="nofollow noreferrer">Jython</a> and <a href="http://ironpython.net/" rel="nofollow noreferrer">IronPython</a>, but not <a href="http://doc.pypy.org/en/latest/faq.html#does-pypy-have-a-gil-why" rel="nofollow noreferrer">PyPy</a>) don't have a GIL, because the platforms they are built on (Java for Jython, .NET for IronPython) handle dynamic memory management differently, and so can safely run the Python code in multiple threads at the same time.</p>
<p>If you're using CPython, it's highly recommended to use the <a href="https://docs.python.org/3/library/multiprocessing.html" rel="nofollow noreferrer">multiprocessing</a> module instead. Rather than running multiple threads, it runs multiple processes (each with their own GIL, so they can all run at the same time). It's much more effective than multithreading. The alternative is to write your multithreaded code in C/C++ as an extension, because native code is not subject to the GIL. However, that's usually a lot more work, and the payoff is usually not worth the effort.</p>
<hr/>
<p>Regarding green threads: they don't implement multithreading in the usual sense. <a href="https://en.wikipedia.org/wiki/Green_threads" rel="nofollow noreferrer">Green threads</a> are closer to <a href="https://en.wikipedia.org/wiki/Coroutine" rel="nofollow noreferrer">coroutines</a>, in that they (usually) can't take advantage of multiple processor cores to run in true parallel. Instead, they typically implement <a href="https://en.wikipedia.org/wiki/Cooperative_multitasking" rel="nofollow noreferrer">cooperative multitasking</a>, where each green thread will manually pass control to another green thread. <a href="http://www.stackless.com/" rel="nofollow noreferrer">Stackless Python</a> has built-in support for green threads, and the <a href="http://greenlet.readthedocs.io/en/latest/" rel="nofollow noreferrer">greenlet</a> extension brings them to CPython. There are probably other libraries/modules out there that implement green threads, but I'm not familiar with any others.</p>
</div>
<span class="comment-copy">Depends on which implementation of Python you use.</span>
<span class="comment-copy">@JohnGordon can you be specific please? I am just asking is multithreading feature present in python like it is there in java ?</span>
<span class="comment-copy">"Python" and "Java" <i>are languages</i>. They are abstract things. You need to ask about concrete Python <i>implementations</i>. So, are you talking about CPython, PyPy, Jython, IronPython?</span>
<span class="comment-copy">There's no need to implement IPC for multiprocessing - <a href="https://docs.python.org/3/library/multiprocessing.html#exchanging-objects-between-processes" rel="nofollow noreferrer">Python does it for you</a>.</span>
<span class="comment-copy"><i>nitpick</i> This is specific to the CPython implementation. IronPython runetime and Jython runtime, for example, support multicore parallelism with <code>threading</code></span>
<span class="comment-copy">If python can not use more than one available cores how multiprocessing works? If i am not wrong multiprocessing work on multiple core right?</span>
<span class="comment-copy">@binu.py because it spawns <i>multiple python processes</i>. A single CPython process can't.</span>
<span class="comment-copy">@juanpa.arrivillaga I'll correct that in the answer.</span>
