<div class="post-text" itemprop="text">
<p>I am starting a module that opens a file, reads it, does some stuff, and then appends to it. However, I am trying to see what is in the file first. Here is the start of the program:</p>
<pre><code>def addSkill(company):
    with open("companies.txt", "a+") as companies:
        for line in companies:
            print('ok')
            print(line.rstrip('\n'))
        companies.write(company + '\r\n')

    companies.close()
</code></pre>
<p>Neither of the print functions are working. There is text in the document. And it appends to it as requested. Any suggestions?</p>
</div>
<div class="post-text" itemprop="text">
<p>Just open using <code>'r+'</code> then save in memories everything that you need, then it will automatically writing at the end. because your file descriptor will be at the end.</p>
<p>Opening files in <code>'a'</code> automatically put your file descriptor at the end, therefore, your can't see what was written before that.</p>
<p>e.g</p>
<pre><code>def addSkill(company):
    with open('companies.txt', 'r+') as fd:
        list_of_companies = fd.readlines()
        fd.write(company + '\n')

list_of_companies.append(company) # adding the last company to the full list.
print('\n'.join(list_of_companies)) # print each company with a '\n'.
</code></pre>
<p><strong>Bonus</strong>: your <code>close()</code> method is useless using <code>with</code>, python will do that for you.</p>
<p>In any cases, when you are unsure about the option of a function, please <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer"><strong>RTFM</strong>: <code>open()</code></a></p>
<ul>
<li><code>'r'</code>    open for reading (default)</li>
<li><code>'w'</code>    open for writing, truncating the file first</li>
<li><code>'x'</code>    open for exclusive creation, failing if the file already exists</li>
<li><code>'a'</code>    open for writing, appending to the end of the file if it exists</li>
<li><code>'b'</code>    binary mode</li>
<li><code>'t'</code>    text mode (default)</li>
<li><code>'+'</code>    open a disk file for updating (reading and writing)</li>
<li><code>'U'</code>    universal newlines mode (deprecated)</li>
</ul>
</div>
<span class="comment-copy">You use <code>a</code>, so the cursor is located at the end of the file.</span>
<span class="comment-copy">@Willem Van Onsem you should list that as an answer so you get credit.</span>
<span class="comment-copy">Maybe I am wrong but I thought I read that for a+ and reading the cursor was placed at the beginning? Is there an efficient way to read and append without doing seperate w and a methods</span>
<span class="comment-copy"><a href="https://docs.python.org/3.6/library/io.html#io.IOBase.seek" rel="nofollow noreferrer"><code>companies.seek(0)</code></a> should set you back to the start.</span>
