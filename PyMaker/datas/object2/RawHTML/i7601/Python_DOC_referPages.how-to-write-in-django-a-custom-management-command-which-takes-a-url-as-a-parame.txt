<div class="post-text" itemprop="text">
<p>I am learning to write custom management commands in Django. I would like to write a command which would take a given URL as a parameter. Something like:</p>
<pre><code>python manage.py command http://example.com
</code></pre>
<p>I've read a documentation, but it is not clear to me how to do this.
But I can write a command saying 'Hello World!';)</p>
</div>
<div class="post-text" itemprop="text">
<p>try this:</p>
<p>create a file under <code>yourapp/management/commands/yourcommand.py</code> with the following content:</p>
<pre><code>from django.core.management.base import BaseCommand

class Command(BaseCommand):
    help = 'A description of your command'

    def add_arguments(self, parser):
        parser.add_argument(
            '--url', dest='url', required=True,
            help='the url to process',
        )

    def handle(self, *args, **options):
        url = options['url']
        # process the url
</code></pre>
<p>then you can call your command with</p>
<pre><code>python manage.py yourcommand --url http://example.com
</code></pre>
<p>and either:</p>
<pre><code>python manage.py --help
</code></pre>
<p>or</p>
<pre><code>python manage.py yourcommand --help
</code></pre>
<p>will show the description of your command and the argument.</p>
<p>if you don't want to name the argument (the <code>--url</code> part), like in your example, just read the url('s) form <code>args</code>:</p>
<pre><code>def handle(self, *args, **kwargs):
    for url in args:
        # process the url
</code></pre>
<p>hope this helps.</p>
</div>
<span class="comment-copy">Good example. But the question only deals with one URL. So drop the '--' in front of add_argument and it'll work magically (well, thanks to <a href="https://docs.python.org/3/library/argparse.html#name-or-flags" rel="nofollow noreferrer">argparse</a>).</span>
<span class="comment-copy">Thanks! This helps a lot! But I don't understand the last part (without --url) - what should be after:    for url in args:</span>
<span class="comment-copy">@AlekSZ, that is up to you, there you process the URL given as argument.</span>
<span class="comment-copy">ok, thanks again!:)</span>
<span class="comment-copy">perfectly explained</span>
