<div class="post-text" itemprop="text">
<p>I'm developing code in ODI. My need is to get the date/time of the last modified file in a directory and check if the date/time of the last modified file is greater than 5 minutes; then copy all the files in that folder to another folder. If it is less than 5 minutes, wait for 2 minutes and recheck again.</p>
<p>I have achieved of getting the date/time of the last modified file in a directory through .bat file. I'm storing the output in a .txt file and then loading that file in a temporary interface to check whether the time is greater than 5 minutes. </p>
<p>I want to achieve my requirement through Python script, because I hope it will be done in a single step of ODI Procedure.</p>
<p>Please help.</p>
<p>Thanks in advance</p>
</div>
<div class="post-text" itemprop="text">
<p>To remove the last modified file in a folder if it is older than 5 minutes
without recursivity:</p>
<pre><code>import os
import time

folder = 'pathname'

files = [(f, os.path.getmtime(f)) for f in os.listdir(folder) 
                if os.path.isfile(f)]

files = sorted(files, key=lambda x: x[1], reverse=True)

last_modified_file = None if len(files) == 0 else files[0][0]

# get age file in minutes from now
def age(filename):
    return (time.time() - os.path.getmtime(filename))//60

if last_modified_file is not None:
    if age(last_modified_file) &gt;= 5:
        os.remove(last_modified_file)
</code></pre>
</div>
<span class="comment-copy"><code>os.path.getmtime(path)</code> <a href="https://docs.python.org/3/library/os.path.html" rel="nofollow noreferrer">docs.python.org/3/library/os.path.html</a></span>
<span class="comment-copy">Possible duplicate of <a href="https://stackoverflow.com/questions/237079/how-to-get-file-creation-modification-date-times-in-python">How to get file creation &amp; modification date/times in Python?</a></span>
<span class="comment-copy">what did you try?</span>
<span class="comment-copy">I prefer <code>os.stat(filename).st_mtime</code></span>
<span class="comment-copy">Hi.. Thanks for that... Some changes in requirement.. if the date/time of the last modified file is greater than 5 minutes, copy all the files in that folder to another folder.. if it is less than 5 minutes, wait for 2 minutes and recheck again..</span>
