<div class="post-text" itemprop="text">
<p>I am working in a code for insert in a table "noticias" information from a archive CSV, but its not working, when I debug, this error shows:</p>
<pre><code>Connected to pydev debugger (build 171.4694.38)
Traceback (most recent call last):
File "C:\Program Files\JetBrains\PyCharm Community Edition 2017.1.4\helpers\pydev\pydevd.py", line 1591, in &lt;module&gt;
globals = debugger.run(setup['file'], None, None, is_module)
File "C:\Program Files\JetBrains\PyCharm Community Edition 2017.1.4\helpers\pydev\pydevd.py", line 1018, in run
pydev_imports.execfile(file, globals, locals)  # execute the script
File "C:\Program Files\JetBrains\PyCharm Community Edition 2017.1.4\helpers\pydev\_pydev_imps\_pydev_execfile.py", line 18, in execfile
exec(compile(contents+"\n", file, 'exec'), glob, loc)
File "C:/Users/SoriyAntony/PycharmProjects/cnnbd/cnnbd", line 11, in &lt;module&gt;
cursor.execute("INSERT INTO noticias(title, link, pubDate) \ VALUES({1},{2},{3})" % tuple(list))
TypeError: not all arguments converted during string formatting

Process finished with exit code 1
</code></pre>
<p>This is the archive cnn.csv:</p>
<pre><code>title,link,pubDate

Hundreds of households to be evacuated in wake of London tower fire,http://www.cnn.com/2017/06/23/world/london-fire-safety-evacuations/index.html,"Fri, 23 Jun 2017 20:22:02 GMT"

"Ex-Obama official: Handling of Russia 'is hardest thing to defend,' WaPo reports",http://www.cnn.com/collections/intl-wapo-former-obama-official/,"Fri, 23 Jun 2017 17:47:54 GMT"

"Saudi Arabia, major combatant in Yemen, to tackle spread of cholera",http://www.cnn.com/2017/06/23/middleeast/yemen-saudis-cholera/index.html,"Fri, 23 Jun 2017 18:29:37 GMT"

Violent homophobia festers in Erdogan's shadow,http://www.cnn.com/2017/06/23/europe/turkey-homophobia-violence/index.html,"Fri, 23 Jun 2017 13:11:52 GMT"

Qatar given 10 days to comply with 13 demands from Arab states,http://www.cnn.com/collections/qatar-intl/,"Fri, 23 Jun 2017 11:41:52 GMT"

Al Jazeera: What you need to know,http://www.cnn.com/videos/cnnmoney/2017/06/23/al-jazeera-explainer-mxb-lon-orig.cnnmoney,"Fri, 23 Jun 2017 16:01:18 GMT"
</code></pre>
<p>and this is the code:</p>
<pre><code>import mysql.connector
import pandas as pd

cnx = mysql.connector.connect(user='root', password='password', host='localhost', database='cnn')
cursor = cnx.cursor()
csv_data = pd.read_csv('cnn.csv')

for row in csv_data.iterrows():
list = row[1].values
#cursor.execute("""INSERT INTO noticias (title, link, pubDate) VALUES('%s', '%s', '%s');""")
cursor.execute("INSERT INTO noticias(title, link, pubDate) VALUES({1},{2},{3})" % tuple(list))

cursor.close()
cnx.close()
</code></pre>
<p>i´m testing with two lines about curso.execute and the first line, the debug not detected error but not write into the table and the second line mark the error that explain here.
Any idea about this error, i have install python 3.6 and mysql 5.7</p>
<p>and this is the table noticias:</p>
<pre><code> mysql&gt; describe noticias;
 +---------+--------------+------+-----+---------+-------+
 | Field   | Type         | Null | Key | Default | Extra |
 +---------+--------------+------+-----+---------+-------+
 | title   | varchar(500) | YES  |     | NULL    |       |
 | link    | varchar(500) | YES  |     | NULL    |       |
 | pubDate | varchar(500) | YES  |     | NULL    |       |
 +---------+--------------+------+-----+---------+-------+
 3 rows in set (0.00 sec)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>When using <a href="https://docs.python.org/3/library/stdtypes.html#old-string-formatting" rel="nofollow noreferrer"><code>%</code> (printf-style) string formatting</a>, the placeholders are not numbered but use <code>%s</code> placeholders:</p>
<pre><code>cursor.execute(
    "INSERT INTO noticias(title, link, pubDate) VALUES(%s, %s, %s)" % tuple(list))
</code></pre>
<p>However, this is the wrong approach; the values won't be correctly quoted. You want to use <em>SQL parameters</em>, which can be achieved here by just passing in your values as the <em>second</em> argument to <code>cursor.execute()</code>:</p>
<pre><code>cursor.execute(
    "INSERT INTO noticias(title, link, pubDate) VALUES(%s, %s, %s)",
    row[1].values)
</code></pre>
<p>I removed the name <code>list</code>; try not to mask built-in types with local variables.</p>
<p>You can, in fact, have MySQL re-use the one query by using <code>cursor.executemany()</code> (using a generator expression to extract just the data for each row, skipping the index):</p>
<pre><code>cursor.executemany(
    "INSERT INTO noticias(title, link, pubDate) VALUES(%s, %s, %s)",
    (r[1:] for r in csv_data.itertuples()))
</code></pre>
</div>
<span class="comment-copy">can u print variable list and see what u r getting</span>
<span class="comment-copy">thanks i now use curso.executemany , and the code dont have error, but it doesn´t insert nothing to the data base i am check my table noticias and it´s empty.</span>
<span class="comment-copy">@aaguirre: you are not committing the transaction; add a <code>cnx.commit()</code> call. Optionally: use a <a href="https://stackoverflow.com/questions/30782676/attributeerror-exit-on-python-3-4">context manager to manage the transaction</a>.</span>
<span class="comment-copy">Oh it´s done, i forgot to put commit, now the code is work. thanks for all Martijn</span>
<span class="comment-copy">i have a new question i have this error now:  <code>raise errors.get_exception(packet) mysql.connector.errors.ProgrammingError: 1054 (42S22): Unknown column 'nan' in 'field list'</code> can you help me ?</span>
<span class="comment-copy">@aaguirre not really; an error message without code and data is not really all that enlightening. Sounds like you have a new question to post!</span>
