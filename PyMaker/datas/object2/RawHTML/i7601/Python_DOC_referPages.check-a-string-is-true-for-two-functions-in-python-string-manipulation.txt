<div class="post-text" itemprop="text">
<p>I have the following code and while it works for just checking one function (say the lower case), it stops working when two conditions are introduced. Could someone shed some light for teaching purposes, on why this is the case, give a solution, and explain the rationale. Note: this is not a duplicate of any other question, as the other examples don't explicitly deal with string boolean commands. </p>
<p><strong>Expected outcome</strong>: The email address should only be generated IF the username input is lowercase AND contains digits. (e.g. username123 is acceptable, USER is not, USER123 is not)</p>
<p>The <strong>solution/answer</strong> must be simple and ideally not include a rewrite of the code (i.e without rewriting the function and introducing parameters etc, if this as possible)</p>
<p><strong>Code:</strong></p>
<pre><code>def main():
   print("*************************** Create an e-mail address*********************")
   print("***************************                                               ********************** ")

   username=input("Please enter your desired username:" )

   if username.islower() and username.isdigit():
         email=username+"@gmail.com"
         print("Your unique email address is now:", email)
   else:
         print("Your username needs to be lower case ...............")
         main()

main()
</code></pre>
<p>As mentioned, the below code (checking for just the islower) works ....</p>
<pre><code>   if username.islower():
         email=username+"@gmail.com"
         print("Your unique email address is now:", email)
   else:
         print("Your username needs to be lower case ...............")
         main()
</code></pre>
<p><strong>Working output:</strong></p>
<pre><code>*************************** Create an e-mail address*********************
***************************                                               ********************** 
Please enter your desired username:USER
Your username needs to be lower case ...............
*************************** Create an e-mail address*********************
***************************                                               ********************** 
Please enter your desired username:user
Your unique email address is now: user@gmail.com
&gt;&gt;&gt; 
</code></pre>
<p><strong>UPDATE:</strong>
Someone suggested it was due to the missing (), but this isn't the case:</p>
<pre><code>def main():
   print("*************************** Create an e-mail address*********************")
   print("***************************                                               ********************** ")

   username=input("Please enter your desired username:" )
   if username.islower() and username.isdigit():
         email=username+"@gmail.com"
         print("Your unique email address is now:", email)
   else:
         print("Your username needs to be lower case ...............")
         main()
main()
</code></pre>
<p><strong>Erroneous output:</strong></p>
<pre><code>*************************** Create an e-mail address*********************
***************************                                               ********************** 
Please enter your desired username:USER
Your username needs to be lower case ...............
*************************** Create an e-mail address*********************
***************************                                               ********************** 
Please enter your desired username:user
Your username needs to be lower case ...............
*************************** Create an e-mail address*********************
***************************                                               ********************** 
Please enter your desired username:user123
Your username needs to be lower case ...............
*************************** Create an e-mail address*********************
***************************                                               ********************** 
Please enter your desired username:
</code></pre>
<p><strong>Removing the recursive main() call doesn't change things either:</strong></p>
<pre><code>def main():
   print("*************************** Create an e-mail address*********************")
   print("***************************                                               ********************** ")
   username=input("Please enter your desired username:" )
   if username.islower() and username.isdigit():
         email=username+"@gmail.com"
         print("Your unique email address is now:", email)
   else:
         print("Your username needs to be lower case and contain digits...............")
main()
</code></pre>
<p><strong>Erroneous output:</strong></p>
<pre><code>Please enter your desired username:USERNAME
Your username needs to be lower case and contain digits...............
&gt;&gt;&gt; main()
*************************** Create an e-mail address*********************
***************************                                               ********************** 
Please enter your desired username:username123
Your username needs to be lower case and contain digits...............
&gt;&gt;&gt; 
</code></pre>
<p><strong>Using OR instead of AND does not work either</strong></p>
<p>Output below, when changed to OR</p>
<pre><code>Please enter your desired username:USERNAME
Your username needs to be lower case and contain digits...............
&gt;&gt;&gt; main()
*************************** Create an e-mail address*********************
***************************                                               ********************** 
Please enter your desired username:username
Your unique email address is now: username@gmail.com
&gt;&gt;&gt; 
</code></pre>
<p>Trying another suggested answer below using set(range(10)).intersection:</p>
<p><strong>The following - still not working:</strong></p>
<pre><code>def main():
   print("*************************** Create an e-mail address*********************")
   print("***************************                                               ********************** ")
   username=input("Please enter your desired username:" )
   #if username.islower() or username.isdigit():
   if username.islower() and set(range(10)).intersection(username):
         email=username+"@gmail.com"
         print("Your unique email address is now:", email)
   else:
         print("Your username needs to be lower case and contain digits...............")
main()
</code></pre>
<p><strong>Output</strong></p>
<pre><code>  &gt;&gt;&gt; main()
    *************************** Create an e-mail address*********************
    ***************************                                               ********************** 
    Please enter your desired username:user
    Your username needs to be lower case and contain digits...............
    &gt;&gt;&gt; main()
    *************************** Create an e-mail address*********************
    ***************************                                               ********************** 
    Please enter your desired username:username123
    Your username needs to be lower case and contain digits...............
    &gt;&gt;&gt; 
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can create a simple function</p>
<pre><code>def hasNumbers(inputString):
      return any(char.isdigit() for char in inputString)
.
.
.
if username.islower() and hasNumbers(username):
.
.
.
</code></pre>
<p>and then use it in the if statement. This is the source I found it from: <a href="https://stackoverflow.com/questions/19859282/check-if-a-string-contains-a-number">check if a string contains a number</a> .
You can also use regex if you prefer that, using the re module. But for something as small as this, I would recommend you go with a separate function. Its a more...simpler solution.</p>
<p>Regex version:</p>
<pre><code>import re

def main():
   print("*************************** Create an e-mail address*********************")
   print("***************************                                               ********************** ")

   username=str(input("Please enter your desired username:" ))

   pat = re.compile(r'\d')

   if username.islower() and re.search(pat, username):
         email=username+"@gmail.com"
         print("Your unique email address is now:", email)
   else:
         print("Your username needs to be lower case ...............")
         main()

main()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The issue with this line</p>
<p><code>if username.islower() and username.isdigit()</code></p>
<p>is that <code>isdigit()</code> returns True only if the entire string is numbers and <code>islower()</code> will obviously only return True if the entire string is lower case characters. This means that this statement will always fail as both conditions cannot be true. </p>
<p>If we rethink the logic a bit what we need to test is that the email only contains alphanumeric characters (numbers and letters) but does not contain any upper case letters. This gives us:</p>
<p><code>if username.isalnum() and (not any(c.isupper() for c in username)</code></p>
</div>
<div class="post-text" itemprop="text">
<p>It has been stated that the problem with your code is if you execute <code>username.isdigit()</code> it returns <code>False</code> statement because the variable <strong>username</strong> is not completely filled with digits, though, <code>islower()</code> is not as strict:</p>
<pre><code>username = input(' --&gt;&gt; ')
--&gt;&gt; abc123

username.isdigit()
</code></pre>
<blockquote>
<p>False</p>
</blockquote>
<pre><code>username.islower()
</code></pre>
<blockquote>
<p>True</p>
</blockquote>
<p>In your specific case, you may omit warnings if there are uppercase letters as you may transform them into lowercase. <strong>If you need a solution where there is also a check for uppercase letters, then you should also read the additional section in the end</strong>.</p>
<p>If the structure of <strong>username</strong> does not really bother you, i.e. you simply want it to contain both lowercase letters and digits, then you may simply check if they both exist using <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">regex</a>:</p>
<pre><code>import re  # regular expressions

username = 'Abc123'  # similar to input() as it also returns 'str' class

if re.match('^[a-z0-9]*$', username.lower()):  # username.lower() makes letters lowercase. You could assign it to a new variable if needed.
    email = username.lower() + '@gmail.com'
    print('Your e-mail address is: {}'.format(email))
</code></pre>
<p>It works well even if <code>username = 'A1b2C3'</code>, for instance.</p>
<hr/>
<p>However, if the structure is important and you want digits follow letters at any cost, you should divide the <strong>username</strong> into two subsets, one containing letters and other containing digits and check if both exist in the correct order. <strong>Note that it is just a personal approach</strong>:</p>
<ul>
<li><p>Firstly, we check <strong>username</strong> if we can successively divide it into two sets of letters and digits, not more and not less;</p></li>
<li><p>Secondly, we check if the first subset contains letters and the second subset contains digits;</p></li>
<li><p>If the conditions are satisfied, then we create an e-mail.</p></li>
</ul>
<p>The code should be the following:</p>
<pre><code>import re

print('Example of username: george1337')
username = 'Abc123'; username = username.lower()

if len(re.findall('\d+|\D+', username)) == 2:
    subset_1, subset_2 = [subset for subset in re.findall('\d+|\D+', username)]
else:
    print('Not valid username: see example')

if subset_1.islower() and subset_2.isdigit():
    email = username + '@gmail.com'
    print('Your e-mail address is: {}'.format(email))
else:
    print('Digits must follow letters, not vice versa')
</code></pre>
<blockquote>
<p>Your e-mail address is: abc123@gmail.com</p>
</blockquote>
<pre><code>username = 'a2BB3dd4'; username = username.lower()

if len(re.findall('\d+|\D+', username)) == 2:
    subset_1, subset_2 = [subset for subset in re.findall('\d+|\D+', username)]
else:
    print('Not valid username: see example')
</code></pre>
<blockquote>
<p>Not valid username: see example</p>
</blockquote>
<hr/>
<h2>Additional section</h2>
<p>Okay. If you wish to raise a warning if there are uppercase letters, then you should not execute <code>username = username.lower()</code>. The 'uppercase condition' will be automatically checked in the second section as there is <code>if subset_1.islower()</code>. You should then simply add another <code>print</code> indicating that uppercase letters are not allowed. The same goes with the first section.</p>
<p>I hope that helps!</p>
</div>
<span class="comment-copy">you forgot the parentheses for the islower() function call in the first example.</span>
<span class="comment-copy">Sorry, I've added that in the code. That is in the original code - and does not work. Do run it and see -!</span>
<span class="comment-copy">Your first code snippet is recursive; you call <code>main()</code> in <code>main()</code></span>
<span class="comment-copy">Chris, yes, but removing that doesn't solve the problem (see update)</span>
<span class="comment-copy">'and username.isdigit()' ... 'user' is false for this. did you mean 'and not username.isdigit()' and requires both sides to evaluate to True</span>
<span class="comment-copy">changing it to "or" instead of "and" does not work either. See edit with output</span>
<span class="comment-copy">depends if the OP is intending to allow numeric usernames: if not intending numbers as username then the 2nd part requires a not operator.</span>
<span class="comment-copy">I agree. I am trying to find out what he really wants as output.</span>
<span class="comment-copy">Oh I get it now. He wants the username to contain lowercase alphabets and digits</span>
<span class="comment-copy">"she" has clarified in the edit above.</span>
