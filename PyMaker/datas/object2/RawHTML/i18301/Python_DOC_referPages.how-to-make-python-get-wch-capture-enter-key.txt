<div class="post-text" itemprop="text">
<p>When I am using </p>
<pre><code>ch = wnd.getch()
</code></pre>
<p>in <code>curses</code> under Python, I can capture the enter key which <code>wnd.getch</code> returns 10. However it does not work when I replaced <code>getch</code> by <code>get_wch</code>. Is there any problems with <code>get_wch</code>?</p>
</div>
<div class="post-text" itemprop="text">
<p>The functions <code>getch</code> and <code>get_wch</code> have different interfaces:</p>
<ul>
<li><code>getch</code> returns a <em>character</em></li>
<li><code>get_wch</code> returns a <em>status code</em>, and <em>sets</em> a wide character via the pointer passed as a parameter.</li>
</ul>
<p>They use different interfaces because special keys (such as <code>KEY_HOME</code>) can be handled with <code>getch</code> as "extra" characters beyond the range of "normal" (8-bit) characters.  You cannot do that with wide characters (not as easily, since the end of the wide character range is less definite), so <code>get_wch</code> uses a status code to tell if the value that it sets via the pointer is a wide character or a special key.</p>
<p>Although the <em>manual page</em> is clear enough, the python developers did not notice this distinction when adding the feature to the curses wrapper.  The <em>description</em> in the Python documentation corresponds to <code>getch</code> rather than <code>get_wch</code>:</p>
<ul>
<li><p><a href="https://bugs.python.org/issue15785" rel="nofollow noreferrer">Issues #15785: curses.get_wch() returns keypad codes incorrectly</a>
<br/>
The bug report indicates that a fix was applied to python <strong>3.4</strong>.</p></li>
<li><p><a href="https://docs.python.org/3/library/curses.html" rel="nofollow noreferrer">16.10. curses â€” Terminal handling for character-cell displays</a></p></li>
<li><a href="https://docs.python.org/3/library/curses.html#curses.window.get_wch" rel="nofollow noreferrer"><code>window.get_wch([y, x])</code></a></li>
</ul>
<blockquote>
<p>Get a wide character. Return a character for most keys, or an integer for function keys, keypad keys, and other special keys.</p>
<p><em>New in version 3.3.</em></p>
</blockquote>
<p>Further reading:</p>
<ul>
<li><p><a href="http://invisible-island.net/ncurses/man/curs_getch.3x.html" rel="nofollow noreferrer"><strong><code>getch</code></strong>, <code>wgetch</code>, <strong><code>mvgetch</code></strong>, <strong><code>mvwgetch</code></strong>, <strong><code>ungetch</code></strong>, <strong><code>has_key</code></strong> - get (or push back) characters from curses terminal keyboard</a></p></li>
<li><p><a href="http://invisible-island.net/ncurses/man/curs_get_wch.3x.html" rel="nofollow noreferrer"><strong><code>get_wch</code></strong>, <strong><code>wget_wch</code></strong>, <strong><code>mvget_wch</code></strong>, <strong><code>mvwget_wch</code></strong>, <strong><code>unget_wch</code></strong> - get (or push back) a wide character from curses terminal
   keyboard</a></p></li>
</ul>
</div>
<span class="comment-copy">PS: TAB key is also one of the problem. <code>getch</code> returns 9 but <code>get_wch</code> does not work either.</span>
<span class="comment-copy">Works for me. It returns '\n' for enter and '\t' for tab.</span>
