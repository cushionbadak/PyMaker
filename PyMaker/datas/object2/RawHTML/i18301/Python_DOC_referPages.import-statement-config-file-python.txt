<div class="post-text" itemprop="text">
<p>I'm maintaining a dictionary and that is loaded inside the config file. The dictionary is loaded from a JSON file. </p>
<p><strong>In config.py</strong></p>
<pre><code>name_dict = json.load(open(dict_file))
</code></pre>
<p>I'm importing this config file in several other scripts(file1.py, file2.py,...,filen.py) using </p>
<pre><code>import config
</code></pre>
<p>statement. My question is when will the config.py script be executed ? I'm sure it wont be executed for every import call that is made inside my multiple scripts. But, what exactly happens when an import statement is called. </p>
</div>
<div class="post-text" itemprop="text">
<p>The top-level code in a module is executed once, the first time you <code>import</code> it. After that, the module object will be found in <code>sys.modules</code>, and the code will not be re-executed to re-generate it.</p>
<p>There are a few exceptions to this:</p>
<ul>
<li><code>reload</code>, obviously.</li>
<li>Accidentally importing the same module under two different names (e.g., if the module is in a package, and you've got some directory in the middle of the package in <code>sys.path</code>, you could end up with <code>mypackage.mymodule</code> and <code>mymodule</code> being two copies of the same thing, in which case the code gets run twice).</li>
<li>Installing import hooks/custom imported that replace the standard behavior.</li>
<li>Explicitly monkeying with <code>sys.modules</code>.</li>
<li>Directly calling functions out of <code>imp</code>/<code>importlib</code> or the like.</li>
<li>Certain cases with <code>multiprocessing</code> (and modules that use it indirectly, like <code>concurrent.futures</code>).</li>
</ul>
<hr/>
<p>For Python 3.1 and later, this is all described in detail under <a href="http://docs.python.org/3/reference/import.html" rel="nofollow">The import system</a>. In particular, look at the Searching section. (The <code>multiprocessing</code>-specific cases are described for that module.)</p>
<p>For earlier versions of Python, you pretty much have to infer the behavior from a variety of different sources and either reading the code or experimenting. However, the well-documented new behavior is intended to work like the old behavior except in specifically described ways, so you can usually get away with reading the 3.x docs even for 2.x.</p>
<hr/>
<p>Note that <em>in general</em>, you don't want to rely on whether top-level code in the module is run once or multiple times. For example, given a top-level function definition, as long as you never compare function objects, or rebind any globals that it (meaning the definition itself, not just the body) depends on, it doesn't make any difference. However, there are some exceptions to that, and loading start-time config files is a perfect example of an exception.</p>
</div>
