<div class="post-text" itemprop="text">
<p>From <a href="http://www.diveinto.org/python3/strings.html#divingin" rel="nofollow">Dive into Python</a>:</p>
<blockquote>
<p>In Python 3, all strings are sequences of Unicode characters. There is no such thing as a Python string encoded in UTF-8, or a Python string encoded as CP-1252. “Is this string UTF-8?” is an invalid question. UTF-8 is a way of encoding characters as a sequence of bytes. If you want to take a string and turn it into a sequence of bytes in a particular character encoding, Python 3 can help you with that. If you want to take a sequence of bytes and turn it into a string, Python 3 can help you with that too. Bytes are not characters; bytes are bytes. Characters are an abstraction. A string is a sequence of those abstractions.</p>
</blockquote>
<p>I don't understand what the author means by that.</p>
<p>When I say <code>s = 'hello'</code>, how is <code>s</code> encoded internally? Of course it must use some use some encoding. He says all strings are sequences of Unicode characters. But how many bytes is each character? Is this string UTF-8? Why does he say : "There is no such thing as a Python string encoded in UTF-8".</p>
<p>I understand Python provides capabilities of converting a Python "string" into a series of bytes that can be read by another software that uses that encoding. It also supports conversion of a series of bytes into a Python "string". Now the internal representation of this "string" is what confuses me.</p>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<p>When I say s = 'hello', how is s encoded internally? Of course it must use some use some encoding.</p>
</blockquote>
<p>It depends. Frankly, it doesn't matter. CPython now uses the <a href="http://www.python.org/dev/peps/pep-0393/" rel="nofollow noreferrer">Flexible String Representation</a>, a wonderful space and time optimisation. But you shouldn't care because it doesn't matter.</p>
<blockquote>
<p>He says all strings are sequences of Unicode characters. But how many bytes is each character?</p>
</blockquote>
<p>Dunno. It depends. It'll <em>probably</em> be in Latin-1 (1 byte) (when using CPython) in that particular case.</p>
<blockquote>
<p>Is this string UTF-8?</p>
</blockquote>
<p>No.</p>
<blockquote>
<p>Why does he say : "There is no such thing as a Python string encoded in UTF-8".</p>
</blockquote>
<p>Because it's a series of Unicode Code points. If you confuse encodings with strings (as other languages often <em>force</em> you to do), you might think that <code>'Jalape\xc3\xb1o'</code> is <code>'Jalapeño'</code>, because in UTF-8 the byte-sequence <code>'\xc3\xb1o'</code> represents <code>'ñ'</code>. But it's not, because the string doesn't have an intrinsic encoding, just like the number <code>100</code> is the number <code>100</code>, not <code>4</code>, whether or not you represent it in binary, decimal or unary.</p>
<p>He says it because people come from languages where they only have bytes that represent strings and they think "but how is this encoded" as if they have to decode it themselves. It'd be like carrying a list of 1s and 0s instead of being able to use numbers, and you have to tell every function what endianness you're using.</p>
<blockquote>
<p>I understand Python provides capabilities of converting a Python "string" into a series of bytes that can be read by another software that uses that encoding. It also supports conversion of a series of bytes into a Python "string". Now the internal representation of this "string" is what confuses me.</p>
</blockquote>
<p>Hopefully it does not any more :).</p>
<hr/>
<p>If this confuses you, I reccomend <a href="https://stackoverflow.com/questions/17632246/does-the-utf8-encoded-string-jalape-xc3-xb1o-jalapeno-contain-8-or-9-chara">this question</a>, partially 'cause someone called my answer "superbly comprehensive"¹ but also because Steven D'Aprano has had one of his Python Mailing List excelencies posted there - he and I answered from the list and had our text posted across.</p>
<p>If you're wondering why it's relevant, I'll quote:</p>
<blockquote>
<p>So the person you are quoting is causing confusion when he talks about an "encoded string", he should either make it clear he means a string of bytes, or not mention the word string at all.</p>
</blockquote>
<p>Isn't that exactly your confusion?</p>
<p>¹ Technically he called another answer "another superbly comprehensive answer", but that implies what I just said ;).</p>
</div>
<div class="post-text" itemprop="text">
<p>Author compares strings in Python 2 and 3. In Python 2 strings were represented as byte arrays and thus introduced a lot of problems when dealing with non-ASCII characters. Programmer had to always keep track of current encoding of strings in their applications (e.g. encoding of the text on HTML page). There was an attempt to solve it in Python 2.x with introduction of Unicode objects: </p>
<pre><code>s  = 'text'    # string/byte array object 
un = u'text'   # unicode object
</code></pre>
<p>But many application still used normal, old-style strings. </p>
<p>So, in Python 3 it was decided to separate strings (making them all Unicode) and byte arrays. Thus, in Python 3 we have: </p>
<pre><code>s = 'text'                             # string/unicode object
b = bytes([0xA2,0x01,0x02,0x03,0x04])  # byte array object
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Python uses UCS-2 or UCS-4 encoding internally for unicode strings (at least in Python 2.x).</p>
</div>
<span class="comment-copy"><code>s</code> stores a reference to a String object.. and if you go all the way down, it's all just 0s and 1s.. in the middle, the String object somewhere contains some bytes and there is some code that understands the bytes, is it important what the bytes are, exactly?</span>
<span class="comment-copy">@deathApril, no. But it wouldn't hurt to know the encoding. But what made me question that is the author saying "there is not such thing as a Python string encoded in UTF-8". Why not? If Python uses UTF-8 internally, why not say that?</span>
<span class="comment-copy">I keep thinking that this is one the best improvements in Python 3.</span>
<span class="comment-copy">But why does the author say "there is not such thing as a Python string encoded in UTF-8..."? It <i>is</i> in some Unicode format isn't it?</span>
<span class="comment-copy">It's just a matter of terminology - programmer doesn't use encodings, he uses just strings. But yes, internally strings in Py3k are represented as some kind of Unicode. In fact, <a href="http://docs.python.org/3/c-api/unicode.html" rel="nofollow noreferrer">Unicode objects internally use a variety of representations, in order to allow handling the complete range of Unicode characters while staying memory efficient</a>.</span>
<span class="comment-copy">@learner: UTF-8 is not Unicode! Strings in Python 3 are Unicode objects. If you <i>encode</i>  that object to, say UTF-8, then you get a <i>bytes</i>  object.</span>
