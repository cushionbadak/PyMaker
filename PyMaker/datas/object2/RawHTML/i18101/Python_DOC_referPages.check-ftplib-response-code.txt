<div class="post-text" itemprop="text">
<p>I have a python application that's accessing an ftp server.  There are several error cases I'd like to catch in a fashion similar to httplib2: </p>
<pre><code>try: 
    urllib2.urlopen("http://google.com")
except urllib2.HTTPError, e: 
    if e.code == 304: 
        #do 304 stuff
    if e.code == 404: 
        #do 404 stuff
    else: 
        pass 
</code></pre>
<p>Does a a construct like this exist in ftplib.err_perm?  I know that could return a code of 500-599 according to the docs but I don't see anything in the docs about how to access that value.  Did I miss something? </p>
</div>
<div class="post-text" itemprop="text">
<p>You can access error reponse string using <code>&lt;exception_obj&gt;.args[0]</code>. It contains strings like <code>'550 /no-such-dir: No such file or directory'</code>.</p>
<p>To get error code (only leading three chracters), use <code>&lt;exception_obj&gt;.args[0][:3]</code>.</p>
<p>For example:</p>
<pre><code>import ftplib
ftp = ftplib.FTP('ftp.hq.nasa.gov')
ftp.login('anonymous', 'user@example.com')
try:
    ftp.cwd('/no-such-dir')
except ftplib.error_perm as e:
    print('Error {}'.format(e.args[0][:3]))
finally:
    ftp.quit()
</code></pre>
</div>
<span class="comment-copy">That works but is there not a getter for the code or a property of the object that just holds the code?</span>
<span class="comment-copy">@Brad, If you're using <code>python 2.7</code>, you can use <code>e.message[:3]</code> instead of <code>e.args[0][:3]</code>. But it's gone in Python 3.x. There's no other property.  <a href="http://hg.python.org/cpython/file/179a3cf73e47/Lib/ftplib.py#l61" rel="nofollow noreferrer"><code>ftplib.error_perm</code></a> inherits from <code>ftplib.Error</code>, <code>ftplib.Error</code> inherits from <code>Exception</code> .. <a href="http://docs.python.org/3/library/exceptions.html#BaseException" rel="nofollow noreferrer"><code>BaseException</code></a> which does not provide any additional attributes/properties.</span>
