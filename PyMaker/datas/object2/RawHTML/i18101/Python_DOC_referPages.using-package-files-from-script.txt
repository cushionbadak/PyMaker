<div class="post-text" itemprop="text">
<p>If I have a script in my Python package, how can I get it to read other files from the package, since <code>__file__</code> contains (for example) <code>/usr/bin/myscript</code> and not <code>/usr/lib/python3.3/site-packages/mypackage/myscript</code>?</p>
<p>(The files are just templates, not modules.)</p>
</div>
<div class="post-text" itemprop="text">
<p>You could use the <a href="http://pythonhosted.org/distribute/pkg_resources.html#resourcemanager-api" rel="nofollow">ResourceManager API</a> from <code>setuptools</code>' <code>pkg_resources</code>:</p>
<pre><code>import pkg_resources
my_stream = pkg_resources.resource_stream(__name__, "foo.dat")
</code></pre>
<p>will open <code>my.package/my/package/foo.dat</code> as the file-like object <code>my_stream</code> for example.</p>
<p>This will work for regular as well as zipped eggs. Note however that this requires <code>setuptools</code> to be installed. For a solution that only uses the standard library (which is to be preferred), see @abarnert's answer.</p>
</div>
<div class="post-text" itemprop="text">
<p>Nothing based on a pathname will work, because your package, or your entire site-packages, could be, say, a zipfile, or the files may have been installed somewhere other than inside the package, etc.</p>
<p>The <code>pkgutil</code> module, in particular the <a href="http://docs.python.org/3/library/pkgutil.html"><code>get_data</code></a> function, is the stdlib way to get the contents of a data file that's part of a package.</p>
<p>See <a href="http://docs.python.org/3/distutils/setupscript.html#installing-package-data">Installing Package Data</a>, and <a href="http://docs.python.org/3/distutils/setupscript.html#installing-additional-files">Installing Additional Files</a> for more info on making sure the files actually end up there in the first place.</p>
<p>If you want to use <code>setuptools</code> instead of just the stdlib, <a href="http://pythonhosted.org/distribute/pkg_resources.html#resourcemanager-api"><code>pkg_resources</code></a> can make things easier/more flexible.</p>
</div>
<span class="comment-copy">+1 for stdlib only</span>
<span class="comment-copy">Hm… following Installing Additional Files puts things right in <code>/usr</code>. Is there a way to put it in a place more related to the package?</span>
<span class="comment-copy">@minitech: Sure; those are relative paths, so you can just do <code>'share/myapp/foo'</code> instead of <code>'foo'</code>. Trying to do that in a platform-friendly way for every platform is not as much fun; use <code>setuptools</code> if you need anything complicated and cross-platform.</span>
<span class="comment-copy">I do need something cross-platform; how would I use setuptools? It doesn’t appear to put the files anywhere.</span>
<span class="comment-copy">@minitech: Did you read the docs? <a href="http://pythonhosted.org/setuptools/setuptools.html#including-data-files" rel="nofollow noreferrer">Including Data Files</a> and the three following sections explain how it works. I'm still not sure whether you're trying to install package data files, or additional files/non-package data files, so I don't know how to tell you which one to read; just read both of them and maybe you'll know which is what you want. Finally, "It doesn't appear to put the files anywhere" isn't the kind of thing anyone can help you with; I have literally no idea what you tried, or what happened…</span>
