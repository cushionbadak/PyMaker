<div class="post-text" itemprop="text">
<p>Ok, i know this topic has been addressed several times, but none of what i seen is helping me. I'm getting the error in the title and i'm not sure how to fix the error. Here is my code:</p>
<pre><code>def loadRecords():
    f = open("stu.txt", "r")
    students = f.readlines()
    f.close()
    return students

def addStudent():
    n = input("Enter student's name: ")
    ex1 = input("Enter Exam 1 grade: ")
    ex2 = input("Enter Exam 2 grade: ")
    ex3 = input("Enter Exam 3 grade: ")
    return n + " " + ex1 + " " + ex2 + " " + ex3 + "\n"

def displayStudents(students):
    for record in students:
        n, ex1, ex2, ex3 = record.split(",")
        ex1 = int(ex1)
        ex2 = int(ex2)
        ex3 = int(ex3)
        print("%-10s %5s    %5s    %5s" % (n, ex1, ex2, ex3))

def displayAvg(students):
    n = 1
    for record in students:
        n, ex1, ex2, ex3 = record.split(",")
        ex1 = int(ex1)
        ex2 = int(ex2)
        ex3 = int(ex3)
        avg = (ex1 + ex2 + ex3) / 3
        print("%-10s %5s" % (n, round(avg, 1)))
    n += 1

def saveRecords(students):
    f = open("stu.txt", "w")
    f.writelines(students)
    f.close

def main():
    students = loadRecords()

    while True:
        print("""                         
 Program Options. 
    1.) Display all contacts 
    2.) Create new contact
    3.) Display Averages
    4.) Save and exit 
    """)
        option = input("Enter 1, 2, or 3: ")
        print()

        if option == "1":
            displayStudents(students)
        elif option == "2":
            newRecord = addStudent()
            students.append(newRecord)
        elif option == "3":
            displayAvg(students)
        elif option == "4":
            saveRecords(students)
            break
        else:
            print("Not happening")

main()
</code></pre>
<p>Here is the error recieved:</p>
<pre><code>Traceback (most recent call last):
  File "C:/Python33/Program 4/pro4.py", line 65, in &lt;module&gt;
    main()
  File "C:/Python33/Program 4/pro4.py", line 53, in main
    displayStudents(students)
  File "C:/Python33/Program 4/pro4.py", line 16, in displayStudents
    n, ex1, ex2, ex3 = record.split(",")
ValueError: need more than 1 value to unpack
</code></pre>
<p>Here is the file I am using, use notepad if you want to run the code.</p>
<pre><code>sam wilson,98,80,73
sue green,92,98,74
sue adams,89,89,92
ron harris,90,87,100
linda tyler,76,72,88
dave smith,72,91,75
steve davis,88,92,84
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You probably have at least one <em>empty</em> line in your file (usually the last line); explicitly test for that:</p>
<pre><code>for record in students:
    if not record.strip():
        continue
    n, ex1, ex2, ex3 = record.split(",")
</code></pre>
<p>You may want to look at the <a href="http://docs.python.org/3/library/csv.html" rel="nofollow"><code>csv</code> module</a> to read your student records with instead; you'd still need to skip empty lines but the comma-splitting is handled for you.</p>
</div>
<span class="comment-copy">Ok, that worked until i tried to add a student and view the file afterwards</span>
<span class="comment-copy">@user2899009: that's because you are not writing students out with <i>spaces</i>, not commas.</span>
<span class="comment-copy">@user2899009: In case it was unclear, what Martijn meant was it's because you are adding a space-, not comma-delimited record to the file. To fix that just change the last line of <code>addStudent()</code> to <code>return ','.join((n, ex1, ex2, ex3))</code>.</span>
<span class="comment-copy">@user2899009: sorry, yes, that late-night sentence didn't quite come out right. You write new records with spaces in between, not commas, so then you get only <i>one</i> result from <code>record.split(",")</code> instead of 4.</span>
