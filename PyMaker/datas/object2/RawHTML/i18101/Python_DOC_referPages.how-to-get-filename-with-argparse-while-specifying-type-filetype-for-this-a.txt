<div class="post-text" itemprop="text">
<p>Using the <code>type</code> parameter of the <code>argparse.add_argument</code> method, you can require an argument to be a readable file:</p>
<pre><code>parser.add_argument('--sqlite-file', type=argparse.FileType('r'))
</code></pre>
<p>As a benefit of specifying this type, argparse checks whether the file can be read and displays an error to the user if not.</p>
<p>Is there a way to obtain the passed filename instead of an instance of <code>io.TextIOWrapper</code> or <code>io.BufferedReader</code>?</p>
<p>Since the filename appears in the string representation of the parser (<code>'sqlite_file': &lt;_io.TextIOWrapper name='data/export.sqlite' ...</code>, or <code>'sqlite_file': &lt;_io.BufferedReader name='data/export.sqlite' ...&gt;</code>) it should be possible.</p>
<p>How to do it?</p>
</div>
<div class="post-text" itemprop="text">
<p>Yes, use the <a href="http://docs.python.org/3/library/io.html#io.FileIO.name" rel="noreferrer"><code>.name</code> attribute</a> on the file object.</p>
<p>Demo:</p>
<pre><code>&gt;&gt;&gt; import argparse
&gt;&gt;&gt; parser = argparse.ArgumentParser()
&gt;&gt;&gt; parser.add_argument('--sqlite-file', type=argparse.FileType('r'))
_StoreAction(option_strings=['--sqlite-file'], dest='sqlite_file', nargs=None, const=None, default=None, type=FileType('r'), choices=None, help=None, metavar=None)
&gt;&gt;&gt; args = parser.parse_args(['--sqlite-file', '/tmp/demo.db'])
&gt;&gt;&gt; args.sqlite_file
&lt;_io.TextIOWrapper name='/tmp/demo.db' mode='r' encoding='UTF-8'&gt;
&gt;&gt;&gt; args.sqlite_file.name
'/tmp/demo.db'
</code></pre>
</div>
<span class="comment-copy"><a href="http://bugs.python.org/issue13824" rel="nofollow noreferrer">bugs.python.org/issue13824</a> looks into the possibility of <code>FileTYpe</code> checking without actually opening the file.  The solution I proposed there was to use <code>os.access</code> to test the filename.</span>
<span class="comment-copy">What will happen, if user will specify <code>FileType</code> argument as <code>-</code> to use the stdin or stdout?</span>
<span class="comment-copy"><code>FileType()</code> produces normal file objects for filenames, and <code>sys.stdin</code> or <code>sys.stdout</code> for <code>'-'</code>. Those two objects have <code>'&lt;stdin&gt;'</code> and <code>'&lt;stdout&gt;'</code> as their name attribute, respectively.</span>
