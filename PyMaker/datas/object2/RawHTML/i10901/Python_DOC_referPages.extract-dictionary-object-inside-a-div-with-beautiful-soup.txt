<div class="post-text" itemprop="text">
<p>I have the following sample: </p>
<pre><code>    [&lt;div class="options__list"&gt;
    &lt;a href="/link1"&gt;
    &lt;div class="options__list__item" option-message="closed" data-option='{"id":1,"is_active":true,"name":"Fran","city":{"id":32,"name":"Paris","is_top":null,"url_key":"paris","main_area":{"id":null,"name":null,"url_key":null}}}'&gt;&lt;/div&gt;
&lt;/a&gt;&lt;a href="/link2"&gt;
    &lt;div class="options__list__item" option-message="closed" data-option='{"id":2,"is_active":true,"name":"Fran2","city":{"id":32,"name":"Paris","is_top":null,"url_key":"paris","main_area":{"id":null,"name":null,"url_key":null}}}'&gt;&lt;/div&gt;
&lt;/a&gt;]
</code></pre>
<p>I would like to extract :</p>
<ol>
<li>the href link </li>
<li>the dictionary "data-option".</li>
</ol>
<p>What is the best way to do this? Moreover, let's say that I only wanted to extract specific keys from the "data-option" dictionary, how would I do that?</p>
<p>Many thanks in advance.</p>
</div>
<div class="post-text" itemprop="text">
<p>The idea would be to iterate over the links, get the <code>href</code> attribute values, then find the inner option list items and use <a href="https://docs.python.org/3/library/json.html#json.loads" rel="nofollow"><code>json.loads()</code></a> to load the <code>data-option</code> value into the python dictionary:</p>
<pre><code>import json

from bs4 import BeautifulSoup

data = """
&lt;div&gt;
    &lt;div class="options__list"&gt;
        &lt;a href="/link1"&gt;
            &lt;div class="options__list__item" option-message="closed" data-option='{"id":1,"is_active":true,"name":"Fran","city":{"id":32,"name":"Paris","is_top":null,"url_key":"paris","main_area":{"id":null,"name":null,"url_key":null}}}'&gt;&lt;/div&gt;
        &lt;/a&gt;
        &lt;a href="/link2"&gt;
            &lt;div class="options__list__item" option-message="closed" data-option='{"id":2,"is_active":true,"name":"Fran2","city":{"id":32,"name":"Paris","is_top":null,"url_key":"paris","main_area":{"id":null,"name":null,"url_key":null}}}'&gt;&lt;/div&gt;
        &lt;/a&gt;
    &lt;/div&gt;
&lt;/div&gt;
"""

soup = BeautifulSoup(data, "html.parser")

for link in soup.select(".options__list &gt; a"):
    href = link['href']
    data_option = json.loads(link.select_one("div.options__list__item")["data-option"])

    print(href, data_option['id'])
</code></pre>
<p>Prints (printing <code>href</code> values and option ids for demonstration purposes):</p>
<pre><code>(u'/link1', 1)
(u'/link2', 2)
</code></pre>
</div>
<span class="comment-copy">Thanks a lot! For the data_option line, it gives me an error "TypeError: 'NoneType' object is not callable"</span>
<span class="comment-copy">@morfara could you show what code are you executing? Thanks.</span>
<span class="comment-copy">I am executing the exact above code that you have written.</span>
<span class="comment-copy">@morfara yeah, but do you have a different value of <code>data</code>?</span>
<span class="comment-copy">Nope. I am passing the exact same code that you have written above to test that it works. The code works if I cross out the data_option line, but when I include it it gives the above TypeError.</span>
