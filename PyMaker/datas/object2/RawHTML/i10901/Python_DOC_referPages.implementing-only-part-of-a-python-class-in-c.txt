<div class="post-text" itemprop="text">
<p>I have a python class that has a couple performance-sensitive methods that justify being implemented in C. But it also has some methods that don't need to be fast and that would be a giant pain to write in C.</p>
<p>Is there a standard way to have the best of both worlds, where a few core methods are defined in C but some convenience methods are defined in python?</p>
<p>(Ideally it should work for special methods like <code>__str__</code>.)</p>
<p>For example, maybe I could use inheritance. Is that the right way to do it? Are there performance costs?</p>
</div>
<div class="post-text" itemprop="text">
<p>Try <a href="http://docs.cython.org/src/tutorial/cython_tutorial.html" rel="nofollow">Cython</a>. It really does a fantastic job blending the best features of both languages. No longer do you have to decide between control and performance, and efficiency and ease of development.</p>
</div>
<div class="post-text" itemprop="text">
<p>If the C code doesn't need to interact with the object itself, possibly you could use the <a href="https://docs.python.org/3/library/ctypes.html#module-ctypes" rel="nofollow"><code>ctypes</code></a> module to call C functions from your python code.</p>
<p>Put your C code in into a shared library or DLL and then call it from your method.</p>
</div>
<span class="comment-copy">Without more specifics it's hard to give a complete answer, but the short answer is yes inheritance is the way to go. Also have you considered cython? makes the process a whole lot straight forward.</span>
<span class="comment-copy">Unsure if that's possible (need more info for your specific case), but if the methods do not require direct access to any other methods or properties of the class, you can implement them in C, bind [import] them as regular python functions, and call it from the method to be optimized.</span>
<span class="comment-copy">@BiRico Cython is a really interesting suggestion. No, I hadn't heard of it before.</span>
<span class="comment-copy">I'd suggest looking into "cython extention types", I don't have time to write up an example but take a look at this: <a href="http://docs.cython.org/src/userguide/extension_types.html" rel="nofollow noreferrer">docs.cython.org/src/userguide/extension_types.html</a></span>
<span class="comment-copy">Cython is what I'm going with. It took a bit of massaging to avoid boxing during init, but now I have python-esque code with the same performance as the C code in one third of the lines. I am really happy with this.</span>
