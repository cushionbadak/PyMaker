<div class="post-text" itemprop="text">
<p>I am currently doing a course on machine learning in UDACITY . In there they have written some code in python 2.7 but as i am currently using python 3.5 , i am getting some error . This is the code </p>
<pre><code>import urllib
url = "https://www.cs.cmu.edu/~./enron/enron_mail_20150507.tgz"
urllib.urlretrieve(url, filename="../enron_mail_20150507.tgz")
print ("download complete!") 
</code></pre>
<p>I tried urllib.request . </p>
<pre><code>  import urllib
  url = "https://www.cs.cmu.edu/~./enron/enron_mail_20150507.tgz"
  urllib.request(url, filename="../enron_mail_20150507.tgz")
  print ("download complete!")
</code></pre>
<p>But still gives me error . </p>
<pre><code>urllib.request(url, filename="../enron_mail_20150507.tgz")
TypeError: 'module' object is not callable
</code></pre>
<p>I am using PyCharm as my IDE .  </p>
</div>
<div class="post-text" itemprop="text">
<p>You'd use <a href="https://docs.python.org/3/library/urllib.request.html#urllib.request.urlretrieve" rel="nofollow"><code>urllib.request.urlretrieve</code></a>.  Note that this function "may become deprecated at some point in the future", so you might be better off using the less likely to be deprecated interface:</p>
<pre><code># Adapted from the source:
# https://hg.python.org/cpython/file/3.5/Lib/urllib/request.py#l170
with open(filename, 'wb') as out_file:
    with contextlib.closing(urllib.request.urlopen(url)) as fp:
        block_size = 1024 * 8
        while True:
            block = fp.read(block_size)
            if not block:
                break
            out_file.write(block)
</code></pre>
<p>For small enough files, you could just <code>read</code> and <code>write</code> the whole thing and drop the loop entirely.</p>
</div>
<div class="post-text" itemprop="text">
<p>I know this question has long been answered but I'll contribute for any future viewer.</p>
<p>The proposed solution is good but the main issue if that it can generate empty files if you are using invalid urls.</p>
<p>As a workaround to this problem here is how I adapted the code:</p>
<pre><code>def getfile(url,filename,timeout=45):
    with contextlib.closing(urlopen(url,timeout=timeout)) as fp:
        block_size = 1024 * 8
        block = fp.read(block_size)
        if block:
            with open(filename,'wb') as out_file:
                out_file.write(block)
                while True:
                    block = fp.read(block_size)
                    if not block:
                        break
                    out_file.write(block)
        else:
            raise Exception ('nonexisting file or connection error')
</code></pre>
<p>I hope this help.</p>
</div>
<span class="comment-copy">if <code>requests</code> is available, I'd use that</span>
<span class="comment-copy">Someone just answerd it and worked for me . instead of urllib.urlretrive one would have to use urllib.request.urlretrieve</span>
<span class="comment-copy">Thanks a lot , It worked fine .</span>
