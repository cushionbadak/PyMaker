<div class="post-text" itemprop="text">
<p>I am stuck and need some help in pointing the mistake.
I am trying to extract a portion of the html code from a webpage which is done using tables, and with same class and id in many places. Hence I am unable to use only BeautifulSoup4 to extract it. I will need a little regex to extract. Only then to use html parser to extract the info I need based on the returned string from regex. But the problem arises when the regex is unable to work with some of the chinese characters. I have read somewhere it is related to need to change the string to unicode to work, but can't get it to work on myself. Part of the code as below:</p>
<pre><code>import requests
import bs4
import re

fetch = requests.get('http://www.check4d.com')

mo = re.search(u'&lt;td class="resultdamacailable"&gt;Da Ma Cai 1+3D 大馬彩(.+?)&lt;/table&gt;&lt;/div&gt;' , fetch.text)
matched = mo.group()
print matched
</code></pre>
<p>the error i get is </p>
<p>Traceback (most recent call last):
  File "C:\Python27\check4d_r5_today.py", line 98, in 
    matched = mo.group()
AttributeError: 'NoneType' object has no attribute 'group'</p>
<p>part of the html code:</p>
<pre><code>&lt;div class="outerbox"&gt;&lt;table class="resultTable" align="center"&gt;&lt;tr&gt;&lt;td colspan="5"&gt;&lt;table class="resultTable2" cellpadding="0" cellspacing="0"&gt;&lt;tr&gt;&lt;td class="resultdamacailable" style="width:20%"&gt;&lt;img src=""/&gt;&lt;/td&gt;&lt;td class="resultdamacailable"&gt;Da Ma Cai 1+3D 大馬彩&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td colspan="5"&gt;&lt;table class="resultTable2" cellpadding="0" cellspacing="5"&gt;&lt;tr&gt;&lt;td class="resultdrawdate"&gt;Date: 03-05-2016 (Tue)&lt;/td&gt;&lt;td class="resultdrawdate"&gt;Draw No: 4359/16&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td colspan="5"&gt;&lt;table class="resultTable2" cellpadding="0" cellspacing="0"&gt;&lt;tr&gt;&lt;td style="width:45%" class="resultprizelable"&gt;1st Prize 首獎&lt;/td&gt;&lt;td class="resulttop"&gt;1002&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style="width:45%" class="resultprizelable"&gt;2nd Prize 二獎&lt;/td&gt;&lt;td class="resulttop"&gt;3605&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style="width:45%" class="resultprizelable"&gt;3rd Prize 三獎&lt;/td&gt;&lt;td class="resulttop"&gt;0010&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td colspan="5" class="resultprizelable"&gt;Special 特別獎&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="resultbottom"&gt;8079&lt;/td&gt;&lt;td class="resultbottom"&gt;2293&lt;/td&gt;&lt;td class="resultbottom"&gt;1891&lt;/td&gt;&lt;td class="resultbottom"&gt;7657&lt;/td&gt;&lt;td class="resultbottom"&gt;5781&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="resultbottom"&gt;4989&lt;/td&gt;&lt;td class="resultbottom"&gt;4586&lt;/td&gt;&lt;td class="resultbottom"&gt;6868&lt;/td&gt;&lt;td class="resultbottom"&gt;3129&lt;/td&gt;&lt;td class="resultbottom"&gt;3635&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="resultbottom" colspan="5"&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td colspan="5" class="resultprizelable"&gt;Consolation 安慰獎&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="resultbottom"&gt;0901&lt;/td&gt;&lt;td class="resultbottom"&gt;8750&lt;/td&gt;&lt;td class="resultbottom"&gt;0152&lt;/td&gt;&lt;td class="resultbottom"&gt;2929&lt;/td&gt;&lt;td class="resultbottom"&gt;4220&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="resultbottom"&gt;6213&lt;/td&gt;&lt;td class="resultbottom"&gt;5185&lt;/td&gt;&lt;td class="resultbottom"&gt;8283&lt;/td&gt;&lt;td class="resultbottom"&gt;9864&lt;/td&gt;&lt;td class="resultbottom"&gt;3029&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
</code></pre>
<p>I think it must have something to do with the Chinese characters, as after I remove it, it returns OK. But leaving the Chinese characters will return matches that I do not want.</p>
</div>
<div class="post-text" itemprop="text">
<p>This is my suggestion.</p>
<pre><code>import urllib.request
from bs4 import BeautifulSoup

url = urllib.request.urlopen('http://www.check4d.com')
html = str(url.read()).encode('cp437', 'ignore') #ignores chinese characters in page
soup = BeautifulSoup(html, 'html.parser')
content = soup.findAll("div", { "class" : "outerbox" },recursive=True)

#Da Ma Cai Data is stored in content[3]
</code></pre>
</div>
<span class="comment-copy">I don't believe python 2.7 (as I assume you're using based on your directory name) fully supports unicode natively/transparently. It helps to read up on this in the docs, and compare python 2 and 3: <a href="https://docs.python.org/2/howto/unicode.html" rel="nofollow noreferrer">docs.python.org/2/howto/unicode.html</a> <a href="https://docs.python.org/3/howto/unicode.html" rel="nofollow noreferrer">docs.python.org/3/howto/unicode.html</a>, especially the part about regex: <a href="https://docs.python.org/3/howto/unicode.html#unicode-regular-expressions" rel="nofollow noreferrer">docs.python.org/3/howto/…</a></span>
