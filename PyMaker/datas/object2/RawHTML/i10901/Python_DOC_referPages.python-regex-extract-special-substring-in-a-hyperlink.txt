<div class="post-text" itemprop="text">
<p>I use python grabbed a series of hyperlinks,  I want to extract specific character string from these hyperlinks.
the hyperlinks like below:
    “<a href="http://tianqi.2345.com/hongkong/61063.htm" rel="nofollow">http://tianqi.2345.com/hongkong/61063.htm</a>”</p>
<p>it contains a city name(hongkong) and a city ID(61063), I want to get the result below:</p>
<pre><code>cityName=hongkong
cityID = 61063
</code></pre>
<p>my sample code is below:</p>
<pre><code>import re
reNamedGroupTestStr = 'http://tianqi.2345.com/qinxian/61063.htm'
foundTagA = re.search('http://tianqi.2345.com/(?P&lt;CityName&gt;.+?)/(?P&lt;CityID&gt;.+?).htm", reNamedGroupTestStr);
if(foundTagA):
    GroupCityName = foundTagA.group("CityName");
    print "CityName=",GroupCityName; #I wish to print 'hongkong'
    GroupCityID = foundTagA.group("CityID");
    print "CityID=",GroupCityID;  #I wish to print '61063'
</code></pre>
<p>but the code throws bug, I am not familiar with regex, can anyone help me?  </p>
<p>below is my full code:</p>
<pre><code># -*- coding: utf-8 -*- 
from bs4 import BeautifulSoup
import re

soup = BeautifulSoup(open("countyID.html"), "lxml")
#print(soup.prettify())
i = 0
for tag in soup.select('div.bmeta'):
    if i == 5:
        countys = tag
    i = i + 1


for county in countys.find_all('a'):
    countyid = county.get('href')
    print county.get_text()  #Print the city Chinese Name
    print countyid[23:-10] #print the cityName
    print countyid[-9:-4]  #print the cityID
    print '***'
    #break
'''
the sample print result:
***
台北    #Print the city Chinese Name
taipei  #print the cityName
71294  #print the cityID
***
'''

#test regex（ｃｏｒｒｅｃｔｅｄ）
reNamedGroup = 'http://tianqi.2345.com/qinxian/61063.htm'
foundTagA = re.search('http://tianqi.2345.com/(?P&lt;CityName&gt;\w+?)/(?P&lt;CityID&gt;\d+?).htm', reNamedGroup)
if(foundTagA):
    GroupCityName = foundTagA.group("CityName");
    print "CityName=",GroupCityName; #I wish to print 'hongkong'
    GroupCityID = foundTagA.group("CityID");
    print "CityID=",GroupCityID;  #I wish to print '61063'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can just split:</p>
<pre><code>u = "http://tianqi.2345.com/hongkong/61063.htm"


_, nme, c_id = u.rsplit("/", 2)
print(nme, c_id.split(".", 1)[0])
</code></pre>
<p>Which will give you:</p>
<pre><code>hongkong 61063
</code></pre>
<p>If you want to check if the url startswith the host:</p>
<pre><code>if u.startswith("http://tianqi.2345.com/"):
     _, nme, c_id = u.rstrip(".htm").rsplit("/", 2)
</code></pre>
<p>Since you are using <em>BeautifulSoup</em>, you can filter the anchor tags yourself using the id of the div that contains the links:</p>
<pre><code>from bs4 import BeautifulSoup

import requests

soup = BeautifulSoup(requests.get("http://tianqi.2345.com/").content)

for a in soup.select("#hot_l a[href]"):
    print(a.text)
    _, nme, c_id = a["href"].rsplit("/", 2)
    print(nme, c_id.split(".", 1)[0])
</code></pre>
<p>Output will be like:</p>
<pre><code>北京
beijing 54511
</code></pre>
<p>I cannot add all the output as I am getting a warning about spam but it is all there. </p>
</div>
<div class="post-text" itemprop="text">
<p>Another <em>alternate</em> would be to use <code>urlparse</code> (<a href="https://docs.python.org/2/library/urlparse.html" rel="nofollow">Python2 Doc</a> / <a href="https://docs.python.org/3/library/urllib.parse.html" rel="nofollow">Python3 Doc</a>)</p>
<pre><code># For Python 2
&gt;&gt;&gt; from urlparse import urlparse

# For Python 3
&gt;&gt;&gt; from urllib.parse import urlparse

&gt;&gt;&gt; o = urlparse("http://tianqi.2345.com/hongkong/61063.htm")
&gt;&gt;&gt; l = o.path.split("/")
&gt;&gt;&gt; l[1]
'hongkong'
&gt;&gt;&gt; l[2].split(".")[0]
'61063'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>foundTagA = re.search('http://tianqi.2345.com/(?P&lt;CityName&gt;\w+?)/(?P&lt;CityID&gt;\d+?).htm', reNamedGroupTestStr)
</code></pre>
<p>Above code should work. </p>
<p>Instead of using <code>.</code> as wildcard search I use specific <code>\w</code> and <code>\d</code> to improve efficiency</p>
</div>
<div class="post-text" itemprop="text">
<p>hope it help.</p>
<pre><code>import re
reNamedGroupTestStr = 'http://tianqi.2345.com/hongkong/61063.htm'
# \S matches any non-whitespace character
# \d matches any decimal digit ; equivalent to the set [0-9]
foundTagA = re.search("http://tianqi.2345.com/(?P&lt;CityName&gt;\S+?)/(?P&lt;CityID&gt;\d+?)\.htm", reNamedGroupTestStr);
if(foundTagA):
    GroupCityName = foundTagA.group("CityName");
    print "CityName=",GroupCityName; #hongkong
    GroupCityID = foundTagA.group("CityID");
    print "CityID=",GroupCityID;  #61063
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You've a simple syntax problem in <code>search</code> function, quotes are mismatched (<code>'</code> in the start of string and <code>"</code> at the end) and if you want to match a dot (<code>.</code> symbol in regex matches almost any character), you need to escape it. </p>
<pre><code>foundTagA = re.search("http://tianqi.2345.com/(?P&lt;CityName&gt;.+?)/(?P&lt;CityID&gt;.+?)\.htm", reNamedGroupTestStr)
</code></pre>
<p>Also, it won't print 'hongkong', it would print 'qinxian'</p>
<p><code>;</code> symbols at the end on lines aren't necessary in python, and it's a bad style to use them</p>
</div>
<span class="comment-copy">You just need to use <code>'</code> instead of <code>"</code> at the end of the string literal defining the pattern. And escape the <code>.</code> in the pattern to match a literal dot. <code>r'http://tianqi.2345.com/(?P&lt;CityName&gt;.+?)/(?P&lt;CityID&gt;.+?)\.htm'</code></span>
<span class="comment-copy"><code>.split('/')</code> is your friend.</span>
<span class="comment-copy">Why are you using  regex?</span>
<span class="comment-copy">It doesn't "throw a bug." It raises an exception that tells you what the error is and where it occurred. You should always include the full traceback in SO questions.</span>
<span class="comment-copy">Also you had this tagged beautifulsoup,  you could do all the filtering directly  using bs4.</span>
<span class="comment-copy">Yes, I use BeautifulSoup to extract links from the <code>cityID.html</code>, and I should better to use only  BS package from begin to end. It is a good habit. And you can adjust your answer, the code area has some mistakes.</span>
<span class="comment-copy">@dorbodwolf, you can use the specific parent elements to get the anchors from, I added a full working example.</span>
<span class="comment-copy">it must be a nice anwser, I have post the full code in the question details.</span>
<span class="comment-copy">I am off my comp for a bit, it is pretty straight forward to get all the info I will edit when I get back on.</span>
<span class="comment-copy">I find you have a wrong answer of my question today.</span>
<span class="comment-copy">@dorbodwolf - Wrong!? How so?</span>
<span class="comment-copy">It can work! Thank you!</span>
<span class="comment-copy">thank you for your enthusiastic</span>
<span class="comment-copy">thank you for Correction, it is just a sample</span>
