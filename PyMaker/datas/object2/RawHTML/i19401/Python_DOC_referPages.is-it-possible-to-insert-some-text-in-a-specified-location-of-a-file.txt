<div class="post-text" itemprop="text">
<p>I want to write a code to insert a text file which contains some set of codes which have to be inserted in the Head section of a HTML file. I don't want to do it manually since i have 100s of HTML files in a folder. </p>
<p>Is it possible to tell my code to search for the Head tag and append the given text file below that?</p>
<p>How can we do this?</p>
</div>
<div class="post-text" itemprop="text">
<p>If you can use <code>sed</code>, this might be a solution you can consider:  </p>
<pre><code>for file in *.html; do sed -i.bak '/&lt;head&gt;/a\ADD YOUR TEXT HERE' $i; done
</code></pre>
<p>This will write 'ADD YOUR TEXT' to the line next to line containing <code>&lt;head&gt;</code> tag. Your original files will have an added extension <code>.bak</code>.</p>
<p><strong>PS</strong>: If your original files are complex and do not contain properly formatted html or the text that you want to add is complex, you should use BeautifulSoup or some specialized library that deal with markup language.</p>
</div>
<div class="post-text" itemprop="text">
<p>Since you read in html, i would recommend doing this with ElementTree which works somewhat like this:</p>
<pre><code>import xml.etree.ElementTree as etree

html = etree.parse(file_path)
head = html.getroot().find('head')
# To insert a tag surrounding in &lt;head&gt;:
newtag = etree.Element("newtag", attrib={})
newtag.text = "Text inside newtag surrounding"
head.insert(0,newtag)
# To just insert a text inside the head tag surrounding:
head.text = newtext + head.text
html.write(new_file_path)
</code></pre>
<p>See ElementTree documentation <a href="http://docs.python.org/2/library/xml.etree.elementtree.html" rel="nofollow">for Python2</a> or <a href="http://docs.python.org/3/library/xml.etree.elementtree.html" rel="nofollow">Python3</a></p>
</div>
<span class="comment-copy">I think you may be better off using a tool designed for mass file editing like <code>sed</code> or <code>awk</code></span>
<span class="comment-copy">Read the text in, replace (insert) at a specific point in the (possibly very long) string, write back to disk. This has the advantage you can write to a new file so if it doesn't work as expected you did t destroy the original.</span>
<span class="comment-copy">Is it possible to use sed or awk in windows or linux?</span>
<span class="comment-copy">I'd recommend using something like BeautifulSoup <a href="http://www.crummy.com/software/BeautifulSoup/" rel="nofollow noreferrer">crummy.com/software/BeautifulSoup</a>. You can find the head tag and append extra code that way.</span>
<span class="comment-copy">Do what @stephenmuss said. Use BeautifulSoup or some other HTML parser. Iterate over each file, open and read each one, parse each one, make the proper replacement inside the tag you want, write it out to a string, and then open the file again in write mode and write the new string.</span>
