<div class="post-text" itemprop="text">
<p>So, here's my problem.</p>
<p>I'm making a game in Pygame and Python 3.3, using Ubuntu 12.10.  Fine.  I'm gonna bundle a bunch of Python scripts into one executable, then distribute it.  Also fine.  I'm going with cx_freeze, because since I'm using Python 3 I have no other options.</p>
<p>This is where my problem comes in.  I've Googled around, but haven't seen anything like it.  My <code>setup.py</code> is as follows:</p>
<pre><code>from cx_Freeze import setup, Executable
import sys

includes = ['sys', 'pygame.display', 'pygame.event', 'pygame.mixer', 'core', 'game']

build_options = {
                 'optimize' : 2,
                 'compressed': True,
                 'packages': ['pygame', 'core', 'game'],
                 'includes': includes,
                 'path': sys.path + ['core', 'game'],
                 }

executable = Executable('__init__.py',
                        copyDependentFiles=True,
                        targetDir='dist',
                        )

setup(name='Invasodado',
      version='0.8',
      description='wowza!',
      options = {'build_exe': build_options},
      executables=[executable])
</code></pre>
<p>My <code>__init__.py</code> is as follows:</p>
<pre><code>from sys import argv

import pygame.display
import pygame.event
import pygame.mixer

pygame.mixer.init()
pygame.display.init()
pygame.font.init()

from core import gsm

#Omitted for brevity
</code></pre>
<p>The rest of my code (including the full <code>__init__.py</code>) can be found at <a href="https://github.com/CorundumGames/Invasodado" rel="nofollow">https://github.com/CorundumGames/Invasodado</a>, in case it's relevant.</p>
<p>I get a long-ass stack trace, which can be found here <a href="http://pastebin.com/Aej05wGE" rel="nofollow">http://pastebin.com/Aej05wGE</a> .  The last 10 lines of it is this;</p>
<pre><code>  File "/usr/local/lib/python3.3/dist-packages/cx_Freeze/finder.py", line 421, in _RunHook
    method(self, *args)
  File "/usr/local/lib/python3.3/dist-packages/cx_Freeze/hooks.py", line 454, in load_scipy
    finder.IncludePackage("scipy.lib")
  File "/usr/local/lib/python3.3/dist-packages/cx_Freeze/finder.py", line 536, in IncludePackage
    self._ImportAllSubModules(module, deferredImports)
  File "/usr/local/lib/python3.3/dist-packages/cx_Freeze/finder.py", line 211, in _ImportAllSubModules
    recursive)
  File "/usr/local/lib/python3.3/dist-packages/cx_Freeze/finder.py", line 209, in _ImportAllSubModules
    if subModule.path and recursive:
AttributeError: 'NoneType' object has no attribute 'path'
</code></pre>
<p>In case it's relevant, I'm using Pydev and Eclipse.  Now, the last line stands out because Googling it reveals nothing.  I have no idea where <code>subModule</code> could have become <code>None</code>, and I can't easily check because cx_freeze has shit documentation.</p>
<p>I've never really used cx_freeze or distutils before, so I don't know what the hell I'm doing!  Any help would be greatly appreciated.</p>
</div>
<div class="post-text" itemprop="text">
<p>Having dug into this, it's a bug in cx_Freeze, that can only hit when you have more than one Python version since <a href="http://docs.python.org/3/whatsnew/3.2.html#pep-3149-abi-version-tagged-so-files" rel="nofollow">PEP 3149</a> installed - i.e. it wouldn't have come up before 3.3.</p>
<p>I've filed a bug report for it: <a href="https://bitbucket.org/anthony_tuininga/cx_freeze/issue/22/error-when-scanning-for-modules-with-a" rel="nofollow">https://bitbucket.org/anthony_tuininga/cx_freeze/issue/22/error-when-scanning-for-modules-with-a</a></p>
<p>In the mean time, you can probably avoid the problem by using Python 3.2 for now, because that's the default in Ubuntu 12.10. Python 3.3 will be the default in 13.04.</p>
</div>
<span class="comment-copy">At a first look: calling your launcher script <code>__init__.py</code> is a bit odd. Normally you have a script named <code>invasidado.py</code> (or whatever) which imports a package and calls a function from it. That might be hitting an untested corner case in cx_Freeze.</span>
<span class="comment-copy">(Couldn't reproduce in Python 3.2, Ubuntu 12.10, with current master cx_Freeze)</span>
<span class="comment-copy">Hot damn, it actually builds!  Thanks!  EXCEPT.  The compiled binary doesn't run.  My new setup.py is at <a href="http://pastebin.com/QEcnnvQi" rel="nofollow noreferrer">pastebin.com/QEcnnvQi</a>, and the error message from Python 3.2.3 is just <code>Fatal Python error: cannot get zipimporter instance; Aborted (core dumped) </code></span>
<span class="comment-copy">Are you running the binary from the same folder as <code>library.zip</code>? I've just tried, and I don't see that error (I see another one because it can't find the <code>sfx</code> folder to load a sound file).</span>
<span class="comment-copy">I am now, but I still get an error.  This pastebin comes if I run <code>./__init__</code> with all of pygame's so's in the same directory: <a href="http://pastebin.com/k4SZ2FPp" rel="nofollow noreferrer">pastebin.com/k4SZ2FPp</a></span>
<span class="comment-copy">Is there a <code>pygame._view.&lt;something&gt;</code> file there?</span>
<span class="comment-copy">No.  I assume that's an internal support module, so I'm gonna try adding that to my <code>setup.py</code>.</span>
