<div class="post-text" itemprop="text">
<p>I am trying to get a simple curses script to run using Python (with PyCharm 2.0).</p>
<p>This is my script:</p>
<pre><code>import curses
stdscr = curses.initscr()
curses.noecho()
curses.cbreak()
stdscr.keypad(1)
while 1:
    c = stdscr.getch()
    if c == ord('p'): print("I pressed p")
    elif c == ord('q'): break

curses.nocbreak(); stdscr.keypad(0); curses.echo()
curses.endwin()
</code></pre>
<p>When I run this from my IDE (PyCharm 2) I get the following error:</p>
<pre>
<code>
_curses.error: setupterm: could not find terminal
Process finished with exit code 1
</code>
</pre>
<p>If I run the script from bash it will simply be stuck in the while loop not reacting to either pressing p or q.</p>
<p>Any help would be appreciated.</p>
</div>
<div class="post-text" itemprop="text">
<p>You must set enviroment variables <code>TERM</code> and <code>TERMINFO</code>, like this:</p>
<pre><code>export TERM=linux
export TERMINFO=/etc/terminfo
</code></pre>
<p>And, if you device have no this dir (<code>/etc/terminfo</code>), make it, and copy terminfo database. </p>
<p>For "linux", and "pcansi" terminals you can download database:</p>
<ul>
<li><a href="http://forum.xda-developers.com/attachment.php?attachmentid=2134052&amp;d=1374459598">http://forum.xda-developers.com/attachment.php?attachmentid=2134052&amp;d=1374459598</a></li>
<li><a href="http://forum.xda-developers.com/showthread.php?t=552287&amp;page=4">http://forum.xda-developers.com/showthread.php?t=552287&amp;page=4</a></li>
</ul>
</div>
<div class="post-text" itemprop="text">
<p>Go to run/debug configuration(the one next to Pycharm run button). Sticking on Emulate Terminal In Output Console. Then you will be able to run your program with the run button.</p>
</div>
<div class="post-text" itemprop="text">
<p>I found this question when searching for examples because I am also learning to use curses so I don't know much about it. I know this works though:</p>
<pre><code>import curses
try:
    stdscr = curses.initscr()
    curses.noecho()
    curses.cbreak()
    stdscr.keypad(1)
    while 1:
        c = stdscr.getch()
        if c == ord('p'):
            stdscr.addstr("I pressed p")
        elif c == ord('q'): break
finally:
    curses.nocbreak(); stdscr.keypad(0); curses.echo()
    curses.endwin()
</code></pre>
<p>I also added the try: finally: to make sure I get the terminal to it's original appearance even if something simple goes wrong inside the loop.</p>
<p>You have to use the addstr to make sure the text is going to be displayed inside the window.</p>
</div>
<div class="post-text" itemprop="text">
<p>I was having the same problem. See <a href="https://docs.python.org/3/howto/curses.html#starting-and-ending-a-curses-application" rel="nofollow noreferrer">Curses Programming with Python - Starting and ending a curses application</a>. </p>
<p>There's a <code>curses.wrapper()</code> function that simplifies the process of starting/ending a curses application.</p>
<p>Here's the example from the Python doc:</p>
<pre>
from curses import wrapper

def main(stdscr):
    # Clear screen
    stdscr.clear()

    # This raises ZeroDivisionError when i == 10.
    for i in range(0, 11):
        v = i-10
        stdscr.addstr(i, 0, '10 divided by {} is {}'.format(v, 10/v))

    stdscr.refresh()
    stdscr.getkey()

wrapper(main)
</pre>
</div>
<span class="comment-copy">Setting TERMINFO for me solved my problem.</span>
<span class="comment-copy">This worked for me while @ohhorob's answer did not.</span>
