<div class="post-text" itemprop="text">
<p>I have a nautilus script to copy tunes that I like into a special folder which I sync to my phone and my car.  It fails on paths with funny characters like á in them.  I'm fixing it incrementally with stuff like:  </p>
<pre><code>temp = temp.replace('%20', ' ')
temp = temp.replace('%5B', '[')
temp = temp.replace('%5D', ']')
</code></pre>
<p>but I'm getting tired of these bandaid solutions, and I'm sure there is a better way to do this with <code>str.encode</code> or <code>str.decode</code>.  </p>
<p>Does anyone recognise this strange encoding and how I can handle it properly?  The problem is, for example, I have a folder such as </p>
<p><code>/media/music/kálmán balogh and the gipsy cimbalom band/aven shavale</code></p>
<p>on my disk, but when I get it using <code>os.getenv('NAUTILUS_SCRIPT_CURRENT_URI')</code>, i.e. the currently selected folder in nautilus, it appears in python as </p>
<p><code>/media/music/k%C3%A1lm%C3%A1n balogh and the gipsy cimbalom band/aven shavale</code></p>
<p>and then other actions such as renaming or copying the file don't work because it doesn't find the file on disk.  </p>
</div>
<div class="post-text" itemprop="text">
<p>You are looking at url encoding. Use <a href="http://docs.python.org/2/library/urllib.html#urllib.unquote" rel="nofollow"><code>urllib.unquote()</code></a> to interpret these to UTF-8 encoded text, then decode to unicode:</p>
<pre><code>&gt;&gt;&gt; import urllib
&gt;&gt;&gt; urllib.unquote('/media/music/k%C3%A1lm%C3%A1n balogh and the gipsy cimbalom band/aven shavale').decode('utf8')
u'/media/music/k\xe1lm\xe1n balogh and the gipsy cimbalom band/aven shavale'
&gt;&gt;&gt; print urllib.unquote('/media/music/k%C3%A1lm%C3%A1n balogh and the gipsy cimbalom band/aven shavale').decode('utf8')
/media/music/kálmán balogh and the gipsy cimbalom band/aven shavale
</code></pre>
<p>In Python 3, you need to use <a href="http://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote" rel="nofollow"><code>urllib.parse.unquote()</code></a>; the function was moved.</p>
</div>
<span class="comment-copy">yes, worked perfectly, thanks Martijn</span>
