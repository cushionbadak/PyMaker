<div class="post-text" itemprop="text">
<p>I want to create a json file via input in my python script that looks like the below code. What is the best way to accomplish this?</p>
<p>File needed</p>
<pre><code>[{
"device_type": "cisco_ios",
"ip": "192.168.1.1"
},
{
"device_type": "cisco_ios",
"ip": "192.168.1.2"
},
{
"device_type": "cisco_ios",
"ip": "192.168.1.3"
}]
</code></pre>
<p>I have a loop I created that works for list but I can't get it to work for the format above.  </p>
<pre><code>def dev_list():
devices = []
i = 0
while 1:
    i += 1
    device = input("Enter IP of Device %d: " % i)
    if device == "":
        break
    devices.append(device)

print(devices, "\n")
retry = input("Is your list correct? (y/n) ").strip().lower()
if retry == "no" or retry == "n":
    dev_list()
if retry == "yes" or retry == "y":
    print("\nScript will continue")
    return devices
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>import json

data = {}  
data['product'] = []

data['product'].append({  
  'device_type': 'cisco_ios',
  'ip': '192.168.1.1'
})
data['product'].append({  
  'device_type': 'cisco_ios',
  'ip': '192.168.1.2'
})
data['product'].append({  
  'device_type': 'cisco_ios',
  'ip': '192.168.1.3'
})

with open('data.txt', 'w') as outfile:  
    json.dump(data, outfile)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Python has a built-in package called json, which can be use to work with JSON data. If you have a JSON string, you can parse it by using the <code>json.loads()</code> method. If you have a Python object, you can convert it into a JSON string by using the <code>json.dumps()</code> method.</p>
<p>Example:</p>
<pre><code>import json

# a Python object (dict):
x = {
  "name": "John",
  "age": 30,
  "city": "New York"
}

# convert into JSON:
y = json.dumps(x)

# the result is a JSON string:
print(y) 
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Assuming you have <em>devices</em> already.</p>
<p>You can dump it to a file with a simple:</p>
<pre><code>import json

with open("resultfile.json", "w") as f:
  json.dump(devices, f)
</code></pre>
<p>Using with syntax automatically closes the file after the block closes.</p>
<p><a href="https://docs.python.org/3/library/json.html" rel="nofollow noreferrer">https://docs.python.org/3/library/json.html</a></p>
<p>So it will dump your python object to the file opened.</p>
</div>
<span class="comment-copy">You should write some code to do the thing you want</span>
<span class="comment-copy">Google: "python json"</span>
<span class="comment-copy">we dont know what you want.  You need to give us more information and walk us through your code sample</span>
<span class="comment-copy">@Fallenreaper I added some code to my question of a loop I have that works great for a list but I cant get it to work for the format that the json file requires.</span>
<span class="comment-copy">this user was actually right.   The top part was a test case for you in memory.  The bottom was actually the right answer, Though if it is a json file, it's filename should be:  <i>data.json</i></span>
<span class="comment-copy">His requirement is to save <code>y</code> to a file, so append that to your answer. :)</span>
