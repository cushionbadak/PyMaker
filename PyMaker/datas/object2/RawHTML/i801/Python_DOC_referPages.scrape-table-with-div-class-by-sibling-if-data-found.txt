<div class="post-text" itemprop="text">
<p>I would like to scrape a html table which contains elements in <code>&lt;div class="..."&gt;</code> format. To scrape it I think I'll need to use: </p>
<pre><code>if found driver.find_element_by_xpath contains(footable-row-detail-name)
get value from /following-sibling which is (class="footable-row-detail-value")
</code></pre>
<p>This is just one table. The site I'm scraping has a lot of tables and some tables don't have all the data (that's why "if found")</p>
<p>I would like to use python 3 for that.
I hope I explained it well. The HTML code for one table:</p>
<pre><code>&lt;div class="footable-row-detail-inner"&gt;
&lt;div class="footable-row-detail-row"&gt;
    &lt;div class="footable-row-detail-name"&gt;
        Discipline(s) thérapeutique(s):
    &lt;/div&gt;
    &lt;div class="footable-row-detail-value"&gt;
        197. Omeopatia, 202. Linfodrenaggio manuale, 205. Massaggio classico, 664. Riflessoterapia generale
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class="footable-row-detail-row"&gt;
    &lt;div class="footable-row-detail-name"&gt;
        Cognome:
    &lt;/div&gt;
    &lt;div class="footable-row-detail-value"&gt;
        ABBONDANZIERI Katia
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class="footable-row-detail-row"&gt;
    &lt;div class="footable-row-detail-name"&gt;
        Via:
    &lt;/div&gt;
    &lt;div class="footable-row-detail-value"&gt;
        Place du Cirque, 2
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class="footable-row-detail-row"&gt;
    &lt;div class="footable-row-detail-name"&gt;
        NPA:
    &lt;/div&gt;
    &lt;div class="footable-row-detail-value"&gt;
        1204
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class="footable-row-detail-row"&gt;
    &lt;div class="footable-row-detail-name"&gt;
        Luogo:
    &lt;/div&gt;
    &lt;div class="footable-row-detail-value"&gt;
        Genève
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class="footable-row-detail-row"&gt;
    &lt;div class="footable-row-detail-name"&gt;
        Tel / Cellulare:
    &lt;/div&gt;
    &lt;div class="footable-row-detail-value"&gt;
        022 328 23 44
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class="footable-row-detail-row"&gt;
    &lt;div class="footable-row-detail-name"&gt;
        Cellulare:
    &lt;/div&gt;
    &lt;div class="footable-row-detail-value"&gt;
        079 601 92 75
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class="footable-row-detail-row"&gt;
    &lt;div class="footable-row-detail-name"&gt;
        Discipline(s) thérapeutique(s):
    &lt;/div&gt;
    &lt;div class="footable-row-detail-value"&gt;
        &lt;div class="thZone"&gt;
            &lt;div class="zCat"&gt;
                METHODES DE MASSAGE
            &lt;/div&gt;
            &lt;div class="zThr"&gt;
                Linfodrenaggio manuale
            &lt;/div&gt;
            &lt;div class="zThr"&gt;
                Massaggio classico
            &lt;/div&gt;
            &lt;div class="zCat"&gt;
                METHODES PRESCRIPTIVES
            &lt;/div&gt;
            &lt;div class="zThr"&gt;
                Omeopatia
            &lt;/div&gt;
            &lt;div class="zCat"&gt;
                METHODES REFLEXES
            &lt;/div&gt;
            &lt;div class="zThr"&gt;
                Riflessoterapia generale
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p></p>
<p>Any help is appreciated.</p>
</div>
<div class="post-text" itemprop="text">
<p>This runs for me. I am using jupyter and running this line by line. You might encounter errors when the elements aren't loaded yet so please make adjustments if an error occurs for you.</p>
<pre><code>from selenium import webdriver
from selenium.webdriver.common.keys import Keys
import time
import pandas as pd


driver = webdriver.Chrome()

driver.get("http://asca.ch/Partners.aspx?lang=it")

cantone = driver.find_element_by_xpath("""//*[@id="ctl00_MainContent_ddl_cantons_Input"]""")

cantone.click()

cantone.send_keys('GE')

cantone.send_keys(Keys.ENTER)

confermo = driver.find_element_by_xpath("""//*[@id="MainContent__chkDisclaimer"]""")

confermo.click()

ricera = driver.find_element_by_xpath("""//*[@id="MainContent_btn_submit"]""")

ricera.click()

toggle = driver.find_elements_by_class_name("""footable-toggle""")
print(toggle)
while not toggle:
    time.sleep(.2)
    toggle = driver.find_elements_by_class_name("""footable-toggle""")

for r in toggle:
    time.sleep(.2)
    r.click()

data = driver.find_elements_by_class_name("""footable-row-detail-cell""")

while not data:
    time.sleep(.2)
    data = driver.find_elements_by_class_name("""footable-row-detail-cell""")

list_df = []
for r in data:
    ratum = r.get_attribute('innerHTML')
    datum = r.get_attribute('innerHTML')\
        .replace("""&lt;div class="footable-row-detail-inner"&gt;""","&lt;table&gt;")\
        .replace("""&lt;div class="footable-row-detail-row"&gt;""","&lt;tr&gt;")\
        .replace("""&lt;div class="footable-row-detail-name"&gt;""","&lt;td&gt;")\
        .replace("""&lt;div class="footable-row-detail-value"&gt;""","&lt;/td&gt;&lt;td&gt;")
    list_df.append(dict(pd.read_html(datum)[0].values.tolist()))

df = pd.DataFrame(list_df)
df.to_csv('data.csv')
print(df)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>One solution using python3 is <a href="https://docs.python.org/3/library/html.parser.html" rel="nofollow noreferrer">html.parser</a> module!</p>
<p>There is a simple example to get you started :)</p>
</div>
<span class="comment-copy">Welcome to stackoverflow. Its hard to visualize the table you are trying to scrape without the css formatting. Can you provide the link to the website?</span>
<span class="comment-copy">Thank you @fcsr This is the website: <a href="http://asca.ch/Partners.aspx?lang=it" rel="nofollow noreferrer">asca.ch/Partners.aspx?lang=it</a> I'm clicking on Cantone - GE, clicking on the checkbox "Confermo di effettuare una ricerca a fine privato" and then Ricerca button</span>
<span class="comment-copy">I am getting an actual html table structure. There are no divs with that class name. What library or method are you using to get the html code?</span>
<span class="comment-copy">I used Inspector on Firefox, found the table and copied its outer html and posted here (beauty format done with selenium) Did you click on the drop-down menu selecting GE, the checkbox and button? It should show names which are expandable with arrows.</span>
<span class="comment-copy">Can you try it on Chrome?</span>
<span class="comment-copy">Thank you. I'll try it. I have the code to go until expanding names to tables. I just don't know how to scrape them and build a nice csv table.</span>
<span class="comment-copy">I tried the code with python 3. It opens the first page in Chrome and stops. In terminal there ae some data dispalyed 15 rows x 1 columns and that's all.</span>
<span class="comment-copy">Are you sure its not 15 rows x 12 columns?</span>
<span class="comment-copy">Yes, indeed, it shows it at the end of the terminal. But there are not the data I was trying to scrape. It's only "Altri luoghi di lavoro" and "e-mail". No name, phone numbers, address etc. I could try to change the code, but I don't understand how the "datum", "ratum" and ".replace" commands works.</span>
<span class="comment-copy">I edited the code. I added <code>df.to_csv('data.csv')</code> this will save the data to data.csv. You will see it is complete</span>
