<div class="post-text" itemprop="text">
<p>I am extracting the url links from a Wiki page and coming up with an "ValueError" when it tries to parse for certain links. I am looking for a way to ignore the errors or fix the issue. It seems that when the loop is extracting the links, it runs into links that it does not recognize as a link and traceback.</p>
<pre><code>from bs4 import BeautifulSoup
import urllib.request, urllib.parse, urllib.error
import ssl
import re

ctx = ssl.create_default_context()
ctx.check_hostname = False
ctx.verify_mode = ssl.CERT_NONE
url = input("Enter First Link: ")
if len(url)&lt;1:   url = "https://www.bing.com/search?q=k+means+wiki&amp;src=IE-SearchBox&amp;FORM=IENAD2"

position = 18
process = 7

#to repeat 18 times#
for i in range(process):
    html = urllib.request.urlopen(url, context=ctx)
    soup = BeautifulSoup(html, 'html.parser')
    tags = soup('a')
    count = 0
    for tag in tags:
        count = count +1
        #make it stop at position 3#
        if count&gt;position:
            break
        url = tag.get('href', None)

        print(url)
</code></pre>
<p>Raises:</p>
<pre><code>ValueError      Traceback (most recent call last)

ValueError: unknown url type: '/search?q=Cluster+analysis%20wikipedia&amp;FORM=WIKIRE'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The url that it is encountering has no schema or domain. It is a relative url meaning it needs to be appended to the current page url in order to go to it.  urls usually start with schema://domain.domain like in <code>https://www.facebook.com</code>.  If you check your urls to be sure they contain the schema and domain then attach them if they are missing then you will avoid this error.</p>
<p>An example:</p>
<p><code>/search?q=stack+overflow</code></p>
<p>might be a relative url for a search on google for stack overflow.</p>
<p>To reconstruct the full url you just add <code>https://www.google.com</code> to the beginning and it becomes an actual search link <code>https://www.google.com/search?q=stack+overflow</code></p>
</div>
<div class="post-text" itemprop="text">
<p>The reason you're getting the error is because that isn't a valid link. You could try prepending "<a href="https://bing.com" rel="nofollow noreferrer">https://bing.com</a>" to the beginning of the URL, or by catching the errors.</p>
<p>To catch the error:</p>
<pre><code>try:
    url = tag.get('href', None)
except ValueError:
    print("Invalid URL")
</code></pre>
<p>To prepend the URL:</p>
<pre><code>url = 'https://bing.com' + url
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/tutorial/errors.html#errors-and-exceptions" rel="nofollow noreferrer">https://docs.python.org/3/tutorial/errors.html#errors-and-exceptions</a></p>
<p>see python documentation for errors and exceptions.</p>
<p>you can put it in the loop:</p>
<pre><code>for i in range(process):
    try:
        "line of code causes the problem"
    except ValueError:
        print("invalid url")
</code></pre>
<p>hope that helps.</p>
</div>
