<div class="post-text" itemprop="text">
<p>Suppose I have this code:</p>
<pre><code>import urllib.request

url = 'https://docs.python.org/3/_static/py.png'
file_name = url.split('/')[::-1][0]
urllib.request.urlretrieve(url, file_name)
</code></pre>
<p>When this code running, it will download the <em>py.png</em> and name it <em>py.png</em>, and store in on the same location of the <em>.py</em> file (the code located)</p>
<p>My question is, how can I code it so it downloads the <em>py.png</em> in a new folder that is based on the <em>.py</em> location.</p>
<p>Suppose my <em>.py</em> file location is <code>desktop\mypylocation\image.py</code></p>
<p>I want to create a new folder and store the image inside the new folder so that the path to the image is <code>desktop\mypylocation\new_folder\py.png</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>you can use </p>
<pre><code>import os
current_folder=os.getcwd()
</code></pre>
<p>if you have not changed the directory yet or you are not running the script from a different directory. Otherwise, you can find out the scripts location via</p>
<pre><code>import sys
current_folder=sys.path[0]
</code></pre>
<p>Finally, you can create a new folder via</p>
<pre><code>os.mkdir(current_folder+'my_new_folder')
</code></pre>
<p>In your case this should look like:</p>
<pre><code>import sys
import os
import urllib.request

# Define URL
url = 'https://docs.python.org/3/_static/py.png'

# Figure out folder
curr_folder=sys.path[0]

# Create folder
os.mkdir(curr_folder+'/out')

# Get filename
file_name =curr_folder+'/out/'+url.split('/')[::-1][0]
urllib.request.urlretrieve(url, file_name)
</code></pre>
<p>Hope this helps.</p>
</div>
<div class="post-text" itemprop="text">
<p>to get the location of the python file use</p>
<pre><code>import os

path_of_py_file = os.path.abspath(os.path.dirname(__file__))
</code></pre>
<p>to create a new folder there</p>
<pre><code>os.mkdir(os.path.join(path_of_py_file, 'folder name'))
</code></pre>
<p>the function <code>os.path.join</code> joins parts of path with the correct separator (and makes sure there is only one), it is better than concatenating strings with the assumption that the separator is a backslash</p>
</div>
<span class="comment-copy">Just as a side note, you can simplify the code for your filename by using <code>file_name = url.split('/')[-1]</code>.</span>
<span class="comment-copy">the 1st code is good n it make the folder but on wrong directory</span>
<span class="comment-copy">Can you post your current code and an example how you call it?</span>
<span class="comment-copy">the 1st code is good n it make the folder but on wrong directory. lets say home\py folder\pic.py is my .py location, the code above create folder \home\my_new_folder. Instead, what i want it to create \home\py folder\my_new_folder where this will i store the image. Also, this solution for 1st part of my question. The next part is how to write the file and store it inside this my_new_folder.</span>
<span class="comment-copy">I update my question for more explanation. I hope to get full code for the answer</span>
<span class="comment-copy">I updated my answer and specified it for your problem. Tested it on my system and it works.</span>
