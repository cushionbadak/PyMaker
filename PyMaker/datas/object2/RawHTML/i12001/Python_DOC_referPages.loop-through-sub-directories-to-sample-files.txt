<div class="post-text" itemprop="text">
<p>The following code selects a random sample of files (in this case 50) from dir <strong>1</strong> and copies them to a new folder with the same name. </p>
<p>However, I have hundreds of folders which I need to sample from (and copy to a new folder with the same name). </p>
<p>How can I adjust the first part of the code so that I can loop through all sub directories, and move the samples to a new folder with the same name. (so the sample of sub dir <strong>1</strong> goes to dir <strong>1</strong>, the sample of sub dir <strong>2</strong> goes to dir <strong>2</strong> etc.)</p>
<pre><code>import os 
import shutil 
import random 
from shutil import copyfile

sourcedir = '/home/mrman/dataset-python/train/1/'
newdir  = '/home/mrman/dataset-python/sub-train/1'


filenames = random.sample(os.listdir(sourcedir), 50)
for i in filenames:
    shutil.copy2(sourcedir + i, newdir)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You are looking to use <code>os.walk</code>. Check out the <a href="https://docs.python.org/3/library/os.html#os.walk" rel="nofollow">documentation</a></p>
<p>Run the following to get an understanding of how it works, and read the documentation to understand how this can be used for your solution. Ultimately, what will happen is that you will traverse down the entire directory structure from the path you provide, and each iteration will give you the current path you are at, all the directories in that level, and all the files. </p>
<p>Also, let's say you want to do an operation on a particular full path of something, then make sure you leverage <a href="https://docs.python.org/3/library/os.path.html#os.path.join" rel="nofollow">os.path.join</a> when creating your path. </p>
<pre><code>your_path = "/some/path/you/want"
for path, dirs, files in os.walk(your_path):
    print(path)
    print(dirs)
    print(files)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Solution was simpler than expected (thanks to  @idjaw for the tip):</p>
<pre><code>import os, sys
import shutil
import random
from shutil import copyfile

#folder which contains the sub directories
source_dir = '/home/mrman/dataset-python/train/'

#list sub directories 
for root, dirs, files in os.walk(source_dir):

#iterate through them
    for i in dirs: 

        #create a new folder with the name of the iterated sub dir
        path = '/home/mrman/dataset-python/sub-train/' + "%s/" % i
        os.makedirs(path)

        #take random sample, here 3 files per sub dir
        filenames = random.sample(os.listdir('/home/mrman/dataset-python/train/' + "%s/" % i ), 3)

        #copy the files to the new destination
        for j in filenames:
            shutil.copy2('/home/mrman/dataset-python/train/' + "%s/" % i  + j, path)
</code></pre>
</div>
<span class="comment-copy">Way to go! Good job figuring it out. +1</span>
<span class="comment-copy">Since you got this figured out, you should accept the solution to indicate that it is solved.</span>
<span class="comment-copy">Thanks again! Since I am a newbie I have to wait two days before I can accept it :-)</span>
