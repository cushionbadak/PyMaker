<div class="post-text" itemprop="text">
<p>How can I transform this string containing data from json into a dataframe?</p>
<pre><code>s = "[{u'website': u'', u'volume': u'0', u'price': u'0.00000510', u'id': u'', u'name': u''}, {u'website': u'', u'volume': u'0.00032510', u'price': u'0.0000000000000000', u'id': u' abcd', u'name': u' ABCD'}, {u'website': u'', u'volume': u'0', u'price': u'0.00000003', u'id': u' ktae', u'name': u' KTAE'}]"
</code></pre>
<p>I've fetched this info using a website API, converted the json response to str and stored it into a sql database.</p>
<p>Now I've fetched this string from my db and I want to create a dataframe with it.</p>
<p><strong>How can I do that?</strong></p>
<p>I've tried this code, but without success:</p>
<pre><code>jdata = json.load(s)
df = pd.DataFrame.from_records(jdata)
</code></pre>
<p>The code above produced a df with
<code>[384806 rows x 1 columns]</code></p>
<p>Then I tried to use index... again without success:</p>
<pre><code>columns = ['website', 'volume_btc', 'price_btc', 'id', 'name']
df = pd.DataFrame.from_records(jdata, index=columns)
</code></pre>
<p>Error Message:</p>
<pre><code>ValueError: Shape of passed values is (1, 384806), indices imply (1, 5)
</code></pre>
<p><strong>How can I use a list comprehension to get this info from str to a dict format and import it into a pandas dataframe?</strong></p>
<p>Maybe something like this...</p>
<pre><code>dict_data = [ dict(y.split(':') for y in x.split(',')) for x in data2.split('}, {')]
</code></pre>
<p>I've found it in <a href="https://stackoverflow.com/questions/11963726/string-to-list-of-dictionaries-python">this answer</a> but I don't know how can I use it effectively in my problem.. Any1 have a clue?</p>
</div>
<div class="post-text" itemprop="text">
<p>I guess your string <code>s</code>Â isn't a regular JSON string.
But you can try <a href="https://docs.python.org/3/library/functions.html#eval" rel="nofollow"><code>eval</code></a> to evaluate it as a python object, a list of dict, and let pandas handle it :</p>
<pre><code>In [12]: s = eval(s)

In [13]: pd.DataFrame(s)
Out[13]: 
      id   name               price      volume website
0                        0.00000510           0        
1   abcd   ABCD  0.0000000000000000  0.00032510        
2   ktae   KTAE          0.00000003           0        
</code></pre>
</div>
<span class="comment-copy">Wow!! This worked!! You holy <code>eval()</code> command saved my work. Actually I'm using python 2.x, but it worked anyway. I'm gonna take a deep look at  <code>eval()</code> docs. Really thanks!!</span>
<span class="comment-copy">You're welcome!</span>
