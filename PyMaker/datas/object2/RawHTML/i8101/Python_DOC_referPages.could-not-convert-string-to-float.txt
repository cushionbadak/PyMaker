<div class="post-text" itemprop="text">
<p>I am writing a code that basically asks for user input of an 8 digit number, that is then read from a text file to see if it is valid and then asks the user for quantity. It works fine up until it needs to calculate the total of the product (multiplied by quantity entered)? It produces this error:</p>
<pre><code>Traceback (most recent call last):
  File "C:\Users\User\Desktop\A453 Task 2.py", line 25, in &lt;module&gt;
    price=float(itemsplit[2]) #price is
ValueError: could not convert string to float: 'magent,'
</code></pre>
<p>Here is my actual code:</p>
<pre><code>loop=1
while loop==1:
    print ("The Hardware Store")
    print ("a - Place an order by barcode")
    print ("x - Exit")
    task=input("Please make your selection")
    if task.lower()=="a":
        print("The Hardware Store")
        myfile=open("hardware_store.txt", "r") #this opens the text file
        product_information=myfile.readlines() #reads the file and stores it 
as a variable named variable 'details'
        myfile.close() #closes the file
        while True:
            digits=input("Please enter your GTIN-8 code\n") 
            if len(digits) !=8: #if the digits aren't equal to 8 digits, the 
input not accepted
                print("Please enter a valid GTIN-8 code\n") 
            else:
                break #if the code is the correct length, the loop ends
        for line in product_information:
            if digits in line:
                productline=line 
                myfile=open("receipt.txt", "w") #opens receipt file
                myfile.writelines("\n" + "+")
                quantity=input("How much of the product do you wish to purchase?\n")
                itemsplit=line.split(' ') #seperates into different words
                price=float(itemsplit[2]) #price is
                total=(price)*(quantity) #this works out the price
                myfile.writelines("Your total spent on this product is: " +str("£:,.2f)".format(total)+"\n"))
    if task.lower()=="x":
        print("Thank you for visiting the hardware store, come again!")
        break
    else:
        print("Sorry, please enter a valid input")
</code></pre>
<p>And here is the text file (named "hardware_store.txt")</p>
<pre><code>16923577,Hammer,3.00,
78451698,32 lrg nails,2,
17825269,32 med nails,2.00,
58246375,32 sml nails,2.00,
21963780,Drill Bits set,7.00,
75124816,Lrg Brush,2.00,
78469518,Sml Brush,1.00,         
58423790,Dust Pan,1.00,
88562247,32 lrg screws,2.00,
98557639,32 med screws,2.00,
37592271,32 sml screws,2.00,
50966394,screwdriver set,7.00,
75533458,wall bracket,0.70,
12345678, neodymium magent, 9.99
10101010, screws 12x50mm Pack 50, 2.79
</code></pre>
<p>I don't understand what is happening, it works up until you enter the desired quantity. Thanks in advance</p>
</div>
<div class="post-text" itemprop="text">
<p>You file <code>hardware_store.txt</code> has values separated on each lines by comma, not whitespace. You should split the line by <code>','</code>, not by <code>' '</code>.</p>
<p>You could also look at the <a href="https://docs.python.org/3/library/csv.html" rel="nofollow noreferrer">CSV module</a> in python to read your file.</p>
</div>
<div class="post-text" itemprop="text">
<p>In itemsplit list you have:</p>
<pre><code>itemsplit[0] = "12345678,"
itemsplit[1] = "neodymium"
itemsplit[2] = "magent,"
itemsplit[3] = "9.99"
</code></pre>
<p><code>itemsplit[2]</code> hasn't got any number to cast float.</p>
<p>You must use <code>try ... except ...</code>  to catch the exception when no number is in your list item.</p>
</div>
<div class="post-text" itemprop="text">
<p>I've corrected your code: </p>
<p>so say we have a <code>hardware_store.txtfile</code> that contains: </p>
<pre><code>12345678 5
</code></pre>
<hr/>
<pre><code>task = ""
while task.lower() != "x":
    print ("The Hardware Store")
    print ("a - Place an order by barcode")
    print ("x - Exit")
    task=input("Please make your selection ")
    if task.lower()=="a":
        print("The Hardware Store")
        myfile=open("hardware_store.txt", "r") #this opens the text file
        product_information=myfile.readlines() #reads the file and stores it as a variable named variable 'details'
        myfile.close() #closes the file

        while True:
            digits=input("Please enter your GTIN-8 code\n")

            if not len(digits) == 8: #if the digits aren't equal to 8 digits, the input not accepted
                print("Please enter a valid GTIN-8 code\n")
            else:
                break #if the code is the correct length, the loop ends
        for line in product_information:
            if digits in line:
                #productline=line
                myfile=open("receipt.txt", "w") #opens receipt file
                myfile.write("\n" + "+")
                quantity=input("How much of the product do you wish to purchase?\n")
                quantity = int(quantity)

                price = line.split(" ")[1]
                price=float(price) #price is
                total=(price)*(quantity) #this works out the price
                myfile.write("Your total spent on this product is: £:({:.2f}){}".format(total, '\n'))
                myfile.close()

            else:
                print("Sorry, please enter a valid input")
else:
    print("Thank you for visiting the hardware store, come again!")
</code></pre>
<hr/>
<p>Running the code:</p>
<pre><code>The Hardware Store
a - Place an order by barcode
x - Exit
Please make your selection a
The Hardware Store
Please enter your GTIN-8 code
12345678
How much of the product do you wish to purchase?
5
The Hardware Store
a - Place an order by barcode
x - Exit
Please make your selection x
Thank you for visiting the hardware store, come again!
</code></pre>
<hr/>
<p>receipt.txt: </p>
<pre><code>\n   
+Your total spent on this product is: £:(25.00)
</code></pre>
<p>You won't see <code>\n</code> in your text editor if you open receipt.txt, I've included the <code>'\n'</code> just to make it clear that there's a new line at the beginning, you'll just see an empty space in your editor followed by <code>+Your reset of the text...</code></p>
</div>
<span class="comment-copy">Delimiter is <code>,(comma)</code> and not <code>(space)</code> read about <code>split()</code> method. Instead of space, comma should be there</span>
