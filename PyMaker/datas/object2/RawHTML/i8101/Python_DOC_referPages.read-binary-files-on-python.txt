<div class="post-text" itemprop="text">
<p>I would like to write the equivalence of this matlab code to python when reading binary file </p>
<pre><code>fid=fopen('File', 'rb')
fread(fid, 17, 'int8', 'l');
[twf, points] = fread(fid, 'int16', 'l');
twf = fread(fid, 'int16', 'l');
fclose(fid)
</code></pre>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>Your code is incorrect in two places:</p>
<ol>
<li><a href="https://de.mathworks.com/help/matlab/ref/fread.html" rel="nofollow noreferrer"><code>fread</code></a> returns the number of characters (bytes) read, not the number of data points read. Since you read <code>'int16'</code>, <code>points</code> is twice the number of data points in your case.</li>
<li>The last <code>fread</code> is not necessary, since <code>[twf, points] = fread(fid, 'int16', 'l');</code> already reads the whole remaining file. Actually you are overwriting your read data with nothing.</li>
</ol>
<p>Anyway, here is the Python/numpy code:</p>
<pre><code>from numpy import fromfile

with open('File', 'rb') as fid:
    fromfile(fid, '&lt;i1', 17) # do we need to specify LE here?
    twf = fromfile(fid, '&lt;i2')
    points = twf.size
</code></pre>
</div>
<span class="comment-copy"><a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer"><code>open</code></a> and <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.fromfile.html#numpy.fromfile" rel="nofollow noreferrer"><code>numpy.fromfile</code></a> look useful.</span>
<span class="comment-copy">That'll do it; although <code>with open('File', 'rb') as fid:</code>   is more <i>en vogue</i> these days.</span>
<span class="comment-copy">True! I wanted to keep it structurally similar to the Matlab code though, to better show which part matches which. And I'm not a big fan of nested structure, "Flat is better than nested". Anyway, edited it accordingly, thanks.</span>
