<div class="post-text" itemprop="text">
<p>I have a curl command which is having some issues sending data to proxy, so sometimes it sends the data perfectly other times it fails. The command looks like  </p>
<pre><code>curl --tlsv1 --cipher ALL --connect-timeout 90 -T nint.txt  ftps://ftp.box.com/Backup/nants.txt --user "admin:pass" -x socks4://10.21.0.10:1080 -v
</code></pre>
<p>Now i need to write a python code which executes this command until the output contains <code>Connection #0 to host ftp.box.com left intact</code></p>
<p>something like</p>
<pre><code>def send_to_box(zip_name):
    curl --tlsv1 --cipher ALL --connect-timeout 90 -T nint.txt  ftps://ftp.box.com/Backup/nants.txt --user "admin:pass" -x socks4://10.21.0.10:1080  2&gt;&amp;1 | grep -q "Connection #0 to host ftp.box.com left intact" "
    while "Connection #0 to host ftp.box.com left intact" in os.system(curl_cmd_grep):
           print successful send the data
</code></pre>
<p>Not sure what is the best way to achive this </p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://pypi.python.org/pypi/ftputil/3.3.1" rel="nofollow noreferrer">ftputil</a> which has a TLS support. See an example here: <a href="http://ftputil.sschwarzer.net/trac/wiki/Documentation#does-ftputil-support-ssl-tls" rel="nofollow noreferrer">Does ftputil support SSL/TLS?</a></p>
<p>To use a proxy, consult this SO question: <a href="https://stackoverflow.com/q/1293518/1513933">Proxies in Python FTP application</a></p>
<p>You can also search in the Python documentation: <a href="https://docs.python.org/2/library/ftplib.html#module-ftplib" rel="nofollow noreferrer">ftplib</a> module.</p>
</div>
<span class="comment-copy">Have a look at the <a href="https://docs.python.org/3/library/subprocess.html" rel="nofollow noreferrer">subprocess</a> module.</span>
<span class="comment-copy">yes i saw, but how to grep and run it with this condtion?</span>
<span class="comment-copy">It looks like your are try to monitor a remote FTP directory. See this question on SO: <a href="http://stackoverflow.com/q/12118011/1513933">stackoverflow.com/q/12118011/1513933</a></span>
<span class="comment-copy">@LaurentLAPORTE I am trying to upload the content to remote FTPS server and the instance from which i am trying to upload sits behind a proxy</span>
<span class="comment-copy">@MauriceMeyer Can you help</span>
<span class="comment-copy">i understand , but thats unclear to setup with , i am more of interested in doing the thing the dirty way</span>
