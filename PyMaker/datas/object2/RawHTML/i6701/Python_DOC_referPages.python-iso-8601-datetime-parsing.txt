<div class="post-text" itemprop="text">
<p>I have different types of <code>ISO 8601</code> formatted date strings, using <code>datetime library</code>, i want to obtain a <code>datetime object</code> from these strings.</p>
<p>Example of the input strings:</p>
<ol>
<li><code>2017-08-01</code> (1st august 2017)</li>
<li><code>2017-09</code> (september of 2017)</li>
<li><code>2017-W20</code> (20th week)</li>
<li><code>2017-W37-2</code> (tuesday of 37th week)</li>
</ol>
<p>I am able to obtain the 1st, 2nd and 4th examples, but for 3rd, I get a traceback while trying.</p>
<p>I am using datetime.datetime.strptime function for them in try-except blocks, as follows:</p>
<pre><code>try :
    d1 = datetime.datetime.strptime(date,'%Y-%m-%d')
except :
    try :
        d1 = datetime.datetime.strptime(date,'%Y-%m')
    except :
        try :
            d1 = datetime.datetime.strptime(date,'%G-W%V')
        except :
            print('Not going through')
</code></pre>
<p>When i tried the 3rd try block on terminal, here's the error i got</p>
<pre><code>&gt;&gt;&gt; dstr
'2017-W38'
&gt;&gt;&gt; dt.strptime(dstr,'%G-W%V')
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "C:\Users\tushar.aggarwal\Desktop\Python\Python3632\lib\_strptime.py", line 565, in _strptime_datetime
    tt, fraction = _strptime(data_string, format)
  File "C:\Users\tushar.aggarwal\Desktop\Python\Python3632\lib\_strptime.py", line 483, in _strptime
    raise ValueError("ISO year directive '%G' must be used with "
ValueError: ISO year directive '%G' must be used with the ISO week directive '%V' and a weekday directive ('%A', '%a', '%w', or '%u').
</code></pre>
<p>And this is how i got the 4th case working :</p>
<pre><code>&gt;&gt;&gt; dstr
'2017-W38-2'
&gt;&gt;&gt; dt.strptime(dstr,'%G-W%V-%u')
datetime.datetime(2017, 9, 19, 0, 0)
</code></pre>
<p>Here is the reference for my code : <a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior" rel="nofollow noreferrer">strptime documentation</a></p>
<p>There are many questions on SO regarding date parsing from <code>ISO 8601</code> formats, but I couldn't find one addressing my issue. Moreover the questions involved are very old and take older versions of python where <code>%G</code>, <code>%V</code> directives in <code>strptime</code> are not available.</p>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://pendulum.eustace.io/docs/" rel="nofollow noreferrer">pendulum</a> library does a good job with these.</p>
<pre><code>&gt;&gt;&gt; import pendulum
&gt;&gt;&gt; pendulum.parse('2017-08-01')
&lt;Pendulum [2017-08-01T00:00:00+00:00]&gt;
&gt;&gt;&gt; pendulum.parse('2017-09')
&lt;Pendulum [2017-09-01T00:00:00+00:00]&gt;
&gt;&gt;&gt; pendulum.parse('2017-W20')
&lt;Pendulum [2017-05-15T00:00:00+00:00]&gt;
&gt;&gt;&gt; pendulum.parse('2017-W37-2')
&lt;Pendulum [2017-09-12T00:00:00+00:00]&gt;
</code></pre>
<p>The page to which I've referred you in the link says, 'The library natively supports the RFC 3339 format, most ISO 8601 formats and some other common formats. If you pass a non-standard or more complicated string, the library will fallback on the dateutil parser.'</p>
</div>
<span class="comment-copy">The parsing in <code>datetime</code> is limited. Look at module <code>dateutil</code>.</span>
<span class="comment-copy">After obtaining a <code>Pendulum</code> object (after parsing), can I get a <code>datetime</code> object from this pendulum object?</span>
<span class="comment-copy">You don't need to because pendulum inherits from datetime. It's drop-in replacement. Except in a fairly restricted category of situtations (see <a href="https://pendulum.eustace.io/faq/" rel="nofollow noreferrer">pendulum.eustace.io/faq</a>) anything you can do with datetime you can do with pendulumâ€”and a lot more. Just import pendulum instead of datetime. If you really want to convert an instance to a datetime use one or more of its properties, adate.year, adate.month, adate.day, and so on. But this is almost always unnecessary.</span>
