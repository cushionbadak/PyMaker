<div class="post-text" itemprop="text">
<p>I have the following in text files and I need to get a simple csv with the DataSourceName,FileName</p>
<p><strong>Datastructure</strong>
<code>&lt;DataSourceDefinitionSet&gt;
    &lt;TABFileDataSourceDefinition id="id1" readOnly="false"&gt;
      &lt;DataSourceName&gt;AirportLayout&lt;/DataSourceName&gt;
      &lt;FileName&gt;\\GIS\GIS\Corporate Services\Information Services\AirportLayout.TAB&lt;/FileName&gt;
    &lt;/TABFileDataSourceDefinition&gt;
    &lt;TABFileDataSourceDefinition id="id2" readOnly="false"&gt;
      &lt;DataSourceName&gt;Asset_Toilets&lt;/DataSourceName&gt;
      &lt;FileName&gt;\\gis\gis\CITY WORKS\Infrastructure Management\Asset_Toilets.TAB&lt;/FileName&gt;
    &lt;/TABFileDataSourceDefinition&gt;
    &lt;TABFileDataSourceDefinition id="id3" readOnly="false"&gt;
      &lt;DataSourceName&gt;BaseLayer_Text&lt;/DataSourceName&gt;
      &lt;FileName&gt;\\GIS\GIS\Corporate Services\Information Services\BaseLayer_Text.TAB&lt;/FileName&gt;
    &lt;/TABFileDataSourceDefinition&gt;</code>
<strong>CODE</strong></p>
<pre><code>import re
filename='CRC_Public_Features.mws'
input_file = open(filename)
count=0
for line in input_file:
    line = line.rstrip()
    if re.search('&lt;FileName&gt;', line) :
        line=line.replace('&lt;Filename&gt;','')
        count+=1
        print str(count)+','+line
</code></pre>
<p><strong>OUTPUT</strong></p>
<pre><code>&gt;&gt;&gt; 
*** Remote Interpreter Reinitialized  ***
&gt;&gt;&gt; 

1,      &lt;FileName&gt;\\GIS\GIS\Corporate Services\Information Services\AirportLayout.TAB&lt;/FileName&gt;
2,      &lt;FileName&gt;\\gis\gis\CITY WORKS\Infrastructure Management\Asset_Toilets.TAB&lt;/FileName&gt; 3,
</code></pre>
<p><strong>I want</strong></p>
<blockquote>
<p>1,AirportLayout,\GIS\GIS\Corporate Services\Information
  Services\AirportLayout.TAB</p>
</blockquote>
<p>etc</p>
<p>I tried the following re but get no result.</p>
<p>'.([^ ]*)'</p>
<p>What can I do? I need the 2 lines for Datasource name and Filename together.</p>
<p>===== <strong>FINAL CODE USED</strong> based on accepted answer</p>
<pre><code>import re
filename='CRC_Public_Features.mws'
data = open(filename).read()
count=0
#for line in infile:
#data=line
values = [re.findall(first+"(.*?)"+second, data) for first, second in [("&lt;{}&gt;".format(b), "&lt;/{}&gt;".format(b)) for b in ["DataSourceName","FileName"]]]
ids = [re.search("\d+", i).group(0) for i in re.findall('id="(.*?)"', data)]
final_values = [ids[0]] + [i[0] for i in values]
DataSourceName=values[0]
FileName=values[1]
total=len(FileName)
with open("Output.csv", "w") as text_file:
        text_file.write("ID,DataSourceName,FileName,MWS\n")
for item in FileName:
    print str(count+1)+","+str(DataSourceName[count])+","+str(FileName[count])
    with open("Output.csv", "a") as text_file:
        text_file.write(str(count+1)+","+str(DataSourceName[count])+","+str(FileName[count])+","+str(filename)+"\n")
    count+=1
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can try this:</p>
<pre><code>import re
filename='CRC_Public_Features.mws'
data = open(filename).read()
values = [re.findall(first+"(.*?)"+second, data) for first, second in [("&lt;{}&gt;".format(b), "&lt;/{}&gt;".format(b)) for b in ["DataSourceName","FileName"]]]
ids = [re.search("\d+", i).group(0) for i in re.findall('id="(.*?)"', data)]
final_values = [ids[0]] + [i[0] for i in values]
</code></pre>
<p>Output:</p>
<pre><code>['1', 'AirportLayout', '\\GIS\\GIS\\Corporate Services\\Information Services\\AirportLayout.TAB']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>With <a href="https://docs.python.org/3/library/xml.etree.elementtree.html?highlight=element" rel="nofollow noreferrer"><strong>xml.etree.ElementTree</strong></a> and <a href="https://docs.python.org/3/library/csv.html?highlight=csvreader#module-csv" rel="nofollow noreferrer"><strong>csv</strong></a> modules:</p>
<pre><code>import xml.etree.ElementTree as ET, csv

tree = ET.parse('CRC_Public_Features.mws')
root = tree.getroot()

with open('result.csv', 'w', newline='') as f:
    writer = csv.writer(f, delimiter=',')
    for i,ds in enumerate(root.findall('TABFileDataSourceDefinition'), 1):
        writer.writerow([i, ds.find('DataSourceName').text, ds.find('FileName').text])
</code></pre>
<hr/>
<p>Final <code>result.csv</code> contents:</p>
<pre><code>1,AirportLayout,\\GIS\GIS\Corporate Services\Information Services\AirportLayout.TAB
2,Asset_Toilets,\\gis\gis\CITY WORKS\Infrastructure Management\Asset_Toilets.TAB
3,BaseLayer_Text,\\GIS\GIS\Corporate Services\Information Services\BaseLayer_Text.TAB
</code></pre>
</div>
<span class="comment-copy">Any reason you're not using an XML parser here?</span>
<span class="comment-copy">Mostly as I was trying to get more into re</span>
<span class="comment-copy">thank but where do I nominate the name of the file it is opening? is it that 'data' should be data=open(filename)?</span>
<span class="comment-copy">@GeorgeC apologies for not adding that in the first place. Please see my recent edit.</span>
<span class="comment-copy">Good idea but I get &gt;&gt;&gt;  Traceback (most recent call last):   File "&lt;module1&gt;", line 6, in &lt;module&gt; TypeError: 'newline' is an invalid keyword argument for this function &gt;&gt;&gt;</span>
<span class="comment-copy">Might as well start enumerate at 1 instead of adding one there...</span>
<span class="comment-copy">@JonClements, of course, edited</span>
<span class="comment-copy">@RomanPerekhrest I am still getting &gt;&gt;&gt;TypeError: 'newline' is an invalid keyword argument for this function ----I am using python 2.7 and I see there's an issue <a href="https://stackoverflow.com/questions/40491158/newline-does-not-work-with-python-2-7" title="newline does not work with python 2 7">stackoverflow.com/questions/40491158/â€¦</a></span>
<span class="comment-copy">@GeorgeC, always add version number to the question</span>
