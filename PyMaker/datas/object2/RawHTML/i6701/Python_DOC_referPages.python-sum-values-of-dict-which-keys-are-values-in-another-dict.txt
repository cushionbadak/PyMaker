<div class="post-text" itemprop="text">
<p>Say that we have two dictionaries:</p>
<pre><code>d1={'A':['a','b','c'],'B':['d','e']}
d2={'a':3,'b':1,'c':1,'d':2,'e':0}
</code></pre>
<p>And that we need to compute a third dictionary that has the same keys as <code>d1</code>, and for values the sum of the values in <code>d2</code> that correspond to those keys that are, in turn, values in<code>d1</code>.</p>
<p>Example:</p>
<pre><code>d3={'A':5,'B':2}
</code></pre>
<p>where <code>5</code> is assigned to <code>A</code> because it is the sum of the values of <code>a</code>,<code>b</code>,<code>c</code>, which are assigned to <code>A</code> in <code>d1</code>.</p>
<p>My attempt:</p>
<pre><code>d3={key:sum(d2[i] for i in d1[j] for j in d1.keys()) for key in d1.keys()} 
</code></pre>
<p>returns:
<code>NameError: global name 'j' is not defined</code></p>
<p>Sorry for the trivial question, but what am I missing here?</p>
</div>
<div class="post-text" itemprop="text">
<p>It's simpler than that if you use <a href="https://docs.python.org/3/library/stdtypes.html#dict.items" rel="nofollow noreferrer"><code>dict.items()</code></a>:</p>
<pre><code>d3 = {key: sum(d2[v] for v in val) for key, val in d1.items()}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>d3 = {}
for k,v in d1.items():
     d3[k] = sum([ d2[x] for x in v ])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>d1={'A':['a','b','c'],'B':['d','e']}
d2={'a':3,'b':1,'c':1,'d':2,'e':0}

dict(zip(d1.keys(), map(lambda x:sum(d2.get(i) for i in x[1]), d1.items())))
</code></pre>
</div>
