<div class="post-text" itemprop="text">
<p>I am working on a script in which I have a text file that contains name like</p>
<pre><code>abc_3
bcd_5
def_3
</code></pre>
<p>And I have a folders like:</p>
<p>abc
   bcd
   def</p>
<p>The script should rename the folder to the filename with underscore if the name is similar.So that my folders will also become like</p>
<pre><code>abc_3
bcd_5
def_3.
</code></pre>
<p>So far I Have written this:</p>
<pre><code>import os, sys, subprocess
import csv
import re
import glob
Folder_dir = os.listdir('/path/to/folders')

for folders in Folder_dir:
        print folders
        Txt_file = open("/vedata/detectionname.txt", "r") # The text file location
        for line in Txt_file:
            if folders in line: #How to match folders name??
                print line
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The following should work for you:</p>
<pre><code>import os

folders_path = '/path/to/folders'
folders = os.listdir(folders_path)

for folder in folders:
    with open("folders.txt", "r") as f:
        for line in f.read().splitlines():
            if folder in line:
                os.rename(
                    os.path.join(folders_path, folder),
                    os.path.join(folders_path, line)
                )
</code></pre>
<p><strong>Note:</strong></p>
<p><a href="https://docs.python.org/3/reference/compound_stmts.html#the-with-statement" rel="nofollow noreferrer"><code>with</code></a> statement allows you to make sure that the file would be closed even is an exception is raised.</p>
</div>
<div class="post-text" itemprop="text">
<p>Changing folders name is as simple as <strong>os.rename(old, new)</strong>:</p>
<pre><code>path = '/path/to/folders'
folder_dir = os.listdir(folders_path)

for folder_name in folder_dir:
        with open("/vedata/detectionname.txt", "r") as txt_file:
            for line in txt_file.readlines():
                line_stripped = line.split('-')[0]
                if folder_name.startswith(line_stripped): 
                    os.rename(path + folder_name, path + line)
                    break
</code></pre>
<p>I've also changed the code to <code>with</code> to open as it closes it automatically once done.</p>
<p>I referred the <code>path</code> so the rename explicitly works on full path.</p>
</div>
<span class="comment-copy">you should have a look at the library <code>os</code>. You should be able to do what you want</span>
<span class="comment-copy">os.rename yes. But first I Need to match it</span>
<span class="comment-copy">you can match the folder name with the line name with regex: <a href="https://docs.python.org/2/library/re.html#" rel="nofollow noreferrer">docs.python.org/2/library/re.html#</a></span>
<span class="comment-copy">Will regex be useful as ihave the folder names with me not looking for some pattern</span>
<span class="comment-copy">I don't understand what do you mean similar. Similar prefixes ? Prefix can be easily handled by <code>String.startswith()</code> !!</span>
<span class="comment-copy">the txt file is a separate file wich could be or could be not in a same location.I tried this code but folder are not renamed</span>
<span class="comment-copy">Just replace <code>folders.txt</code> with the path to your text file.</span>
<span class="comment-copy">Yeah tried . no success :(</span>
<span class="comment-copy">try to put the text file at the same level as your code.</span>
<span class="comment-copy">Comments are not for extended discussion; this conversation has been <a href="http://chat.stackoverflow.com/rooms/154456/discussion-on-answer-by-vinny-python-script-to-rename-a-folder-if-the-folder-nam">moved to chat</a>.</span>
