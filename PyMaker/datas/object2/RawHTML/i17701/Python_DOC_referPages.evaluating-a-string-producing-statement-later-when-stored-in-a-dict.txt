<div class="post-text" itemprop="text">
<p>I have an AI routine that stores various kinds of data as <code>Memory</code> objects. <code>Memory</code> objects have different parameters based on their 'memory type' which is passed to the constructor (in retrospect, each type of memory really should have been a subclass of <code>Memory</code>, but that's not important at the moment).</p>
<p>I need to set up a <code>__str__()</code> method for <code>Memory</code>-s. In another language, I might do something like this:</p>
<pre><code>if self.memtype == "Price":
    return self.good+" is worth "+self.price+" at "+self.location
elif self.memtype == "Wormhole":
    return self.fromsys+" has a wormhole to "+self.tosys
...
</code></pre>
<p>But the Pythonic (and fast) way to do this sort of thing is to use dicts. The problem is, though, that these strings need to have values inserted before they're returned. I suppose this could be done with lambdas, but that strikes me as a bit inelegant and overcomplicated. Is there a better way (str.format() springs suddenly to mind...)?</p>
</div>
<div class="post-text" itemprop="text">
<p>Yes, using <a href="http://docs.python.org/3/library/stdtypes.html#str.format" rel="nofollow"><code>str.format()</code></a>:</p>
<pre><code>formats = {
    'Price': '{0.good} is worth {0.price} at {0.location}',
    'Wormhole': '{0.fromsys} has a wormhole to {0.tosys}',
}

return formats[self.memtype].format(self)
</code></pre>
<p>By passing in <code>self</code> as the first positional parameter, you can address any attribute on <code>self</code> in the <code>{...}</code> formatting placeholders.</p>
<p>You can apply more detailed formatting to the values (such as floating point precision, padding, alignment, etc.) too, see the <a href="http://docs.python.org/3/library/string.html#formatstrings" rel="nofollow">formatting syntax</a>.</p>
<p>Demo:</p>
<pre><code>&gt;&gt;&gt; class Demo():
...     good = 'Spice'
...     price = 10
...     location = 'Betazed'
...     fromsys = 'Arrakis'
...     tosys = 'Endor'
... 
&gt;&gt;&gt; formats = {
...     'Price': '{0.good} is worth {0.price} at {0.location}',
...     'Wormhole': '{0.fromsys} has a wormhole to {0.tosys}',
... }
&gt;&gt;&gt; formats['Price'].format(Demo())
'Spice is worth 10 at Betazed'
&gt;&gt;&gt; formats['Wormhole'].format(Demo())
'Arrakis has a wormhole to Endor'
</code></pre>
</div>
