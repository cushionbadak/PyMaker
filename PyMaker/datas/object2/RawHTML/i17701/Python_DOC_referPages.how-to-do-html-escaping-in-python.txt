<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/1061697/whats-the-easiest-way-to-escape-html-in-python">What's the easiest way to escape HTML in Python?</a>
<span class="question-originals-answer-count">
                    9 answers
                </span>
</li>
</ul>
</div>
<p>I am trying to implement a function which replaces the following values: </p>
<pre><code># &gt; with &amp;gt;
# &lt; with &amp;lt;
# " with &amp;quot;
# &amp; with &amp;amp
</code></pre>
<p>I keep getting an error with my function. What exactly is wrong?</p>
<pre><code>def escape_html(s):
    data = list(s)
    if "&gt;" in data:
        data.replace("&gt;","&amp;gt;") 
    if "&lt;" in data:
        data.replace("&lt;","&amp;lt;") 
    if '"' in data:
        data.replace('"',"&amp;quot;") 
    if "&amp;" in data:
        data.replace("&amp;","&amp;amp;") 
    word = data.join()
    return word

print escape_html("&lt;&gt;")
</code></pre>
<p>Note: This is more of a fundamental programming question. My focus is the reason why my function isn't working. I cannot use outside libraries for this project. </p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="http://docs.python.org/3/library/cgi.html#cgi.escape" rel="nofollow"><code>cgi.escape</code></a>:</p>
<pre><code>&gt;&gt;&gt; import cgi
&gt;&gt;&gt; cgi.escape('&lt;this &amp; that&gt;')
'&amp;lt;this &amp;amp; that&amp;gt;'
</code></pre>
<p>If you use Python 3.2+, use <a href="http://docs.python.org/3/library/html.html#html.escape" rel="nofollow"><code>html.escape</code></a> as documentation suggest:</p>
<blockquote>
<p><code>cgi.escape</code></p>
<p>Deprecated since version <em>3.2</em>: This function is unsafe because <code>quote</code> is <code>false</code> by default, and therefore deprecated. Use <code>html.escape()</code> instead.</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>There are builtin functions to do that. You can use <a href="http://docs.python.org/3/library/cgi.html#cgi.escape" rel="nofollow"><code>cgi.escape</code></a> if you are using Python 2.x. It is deprecated in Python 3.2. So, if you are using Python &gt;= 3.2, you can use <a href="http://docs.python.org/dev/library/html.html#html.escape" rel="nofollow"><code>html.escape</code></a></p>
</div>
<div class="post-text" itemprop="text">
<p>You could also use <code>replace</code>, which is a bit more universal.</p>
<p>For example,</p>
<pre><code>string = "&gt;&gt;&gt;"
new_string = string.replace("&gt;", "&amp;gt;")
print new_string # '&amp;gt;&amp;gt;&amp;gt;'
</code></pre>
<p>However, keep in mind that if you're trying to replace double quotes, you'd need to enclose them in single quotes, and vice-versa</p>
</div>
<div class="post-text" itemprop="text">
<p>You could use <code>xml.sax.saxutils</code> which ships an <code>escape</code> method.
See <a href="https://wiki.python.org/moin/EscapingHtml" rel="nofollow">escaping HTML</a>.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>def escape_html(data):
    return data.replace("&amp;","&amp;amp;").replace('"',"&amp;quot;").replace("&gt;","&amp;gt;").replace("&lt;","&amp;lt;")
</code></pre>
</div>
<span class="comment-copy">See <a href="http://stackoverflow.com/q/1061697/2870069">stackoverflow.com/q/1061697/2870069</a>, <a href="http://stackoverflow.com/q/3096948/2870069">stackoverflow.com/q/3096948/2870069</a>, <a href="http://stackoverflow.com/q/11336384/2870069">stackoverflow.com/q/11336384/2870069</a> and others...</span>
<span class="comment-copy">This is more of a fundamentals in programming questions rather than what is the most efficient way of solving the problem. I'm more worried about why my code doesn't work.</span>
<span class="comment-copy">If this is all that you want to replace, use 'html escape' as others have suggested. However, if you want to stick with this method, you should replace &amp; first, because new &amp;'s are created when you replace in the first three cases.</span>
<span class="comment-copy">Could you please show an example where <code>quote</code> makes a difference?</span>
<span class="comment-copy">@MartinThoma, <code>cgi.escape('"')</code> returns <code>'"'</code> while <code>html.escape('"')</code> returns <code>'&amp;quot;'</code>.</span>
<span class="comment-copy">There really is no need to be universal between Python 2x and 3x because the two aren't compatible in the first place</span>
<span class="comment-copy">I just meant in the event that he wanted to replace something other than those 4 characters. I realize that the context is for dealing with HTML content, but just thought it might be worth nothing that HTML escape only works for those chars, and won't be helpful for any others</span>
<span class="comment-copy">That's exactly why I voted you up :)</span>
<span class="comment-copy">Oh...thanks! :D</span>
<span class="comment-copy">Order of replace is important.</span>
