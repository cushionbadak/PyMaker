<div class="post-text" itemprop="text">
<p>I have a <code>server_list</code> and I am parsing email addresses from a file. I want to collect all addresses that are not from certain servers e.g. gmail.com. </p>
<p>Currently I have this inside the file reading loop:</p>
<pre><code>server_list = ["gmail.com", "yahoo.com"] #etc
for servers in server_list:
   if servers in emailaddress: #get emailaddress from inside of a open(file) line loop
        badmail.extend(emailaddress)
</code></pre>
<p>This allows me to collect the bad emails in a list <code>badmail</code>. Is there any way to create a list of  good emails i.e. if <code>emailaddress</code> is not contained in any items in <code>server_list</code> in the same loop or do I have to create a list of all emails and remove the bad emails?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/functions.html#all" rel="nofollow noreferrer"><code>all</code></a> function to make sure that the emailaddress doesn't end with any of the servers in the <code>server_list</code>, like this</p>
<pre><code>server_list, good_email = ["gmail.com", "yahoo.com"], []
if all(not emailaddress.endswith(server) for server in server_list):
    good_email.append(emailaddress)
</code></pre>
<p>The same way, you can use <a href="https://docs.python.org/3/library/functions.html#any" rel="nofollow noreferrer"><code>any</code></a> function to get the bad email address, like this</p>
<pre><code>server_list, bad_email = ["gmail.com", "yahoo.com"], []
if any(emailaddress.endswith(server) for server in server_list):
    bad_email.append(emailaddress)
</code></pre>
<p>Looks like you are reading the email addresses from a file. So, you can do something like this</p>
<pre><code>server_list, good_list, bad_list = ["gmail.com", "yahoo.com"], [], []
with open("email.txt") as in_file:
    for email_address in in_file:
        email_address = email_address.rstrip()
        if any(email_address.endswith(server) for server in server_list):
            bad_list.append(email_address)
        else:
            good_list.append(email_address)
</code></pre>
<p>As per <a href="https://stackoverflow.com/questions/23338557/python-check-if-string-is-in-any-items-in-a-list/23338645?noredirect=1#comment35739171_23338645"><code>lvc</code>'s suggestion</a>, we can actually pass a tuple of data to <a href="https://docs.python.org/2/library/stdtypes.html#str.endswith" rel="nofollow noreferrer"><code>str.endswith</code></a>. So, the code can be further simplified to</p>
<pre><code>server_list, good_list, bad_list = ("gmail.com", "yahoo.com"), [], []
...
...
if email_address.endswith(server_list):
    bad_list.append(email_address)
else:
    good_list.append(email_address)
</code></pre>
</div>
<span class="comment-copy">using <code>else</code> maybe?</span>
<span class="comment-copy">Sounds like you could just handle that in the <code>else</code></span>
<span class="comment-copy">what is <code>emailaddress</code>? A list?</span>
<span class="comment-copy">You could simplify to <code>if any(servers in emailaddress for servers in server_list):</code>. Also, you probably want to <code>append</code>, not <code>extend</code>, the list, assuming it's a string.</span>
<span class="comment-copy">emailaddress is a string extracted from a line in the file</span>
<span class="comment-copy">+1, but you should just use <code>if/else</code> instead of checking the same thing twice.</span>
<span class="comment-copy">@tobias_k Thanks :) I was editing the answer, please check now.</span>
<span class="comment-copy">You could use <code>email_address.endswith(tuple(server_list))</code> rather than a genexp, or even make <code>server_list</code> a tuple to start with.</span>
<span class="comment-copy">@lvc Thanks man :) Updated the answer.</span>
<span class="comment-copy">@Kash That is simple :) You can do <code>any(server in email_address for server in server_list)</code></span>
