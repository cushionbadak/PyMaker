<div class="post-text" itemprop="text">
<p>I have a URL that redirects (i.e HTTP 302) to the actual website. Which I'm then parsing. However I want to get the actual URL for the website (i.e the true URL). Is there a way of doing this in BeautifulSoup. </p>
<p>i.e www.bananas.com - redirects -&gt; www.realfruit.com. Its the www.realfruit.com url I want to obtain as a string.</p>
</div>
<div class="post-text" itemprop="text">
<p>The URL of a HTML page is HTTP metadata, not anything to do with the HTML source, really. BeautifulSoup is handed the HTML source (in the form of a file object or a string), <em>not</em> the HTTP context. It doesn't know <em>anything</em> about where the source came from.</p>
<p>At best, if you are lucky, the HTML source includes a <a href="http://en.wikipedia.org/wiki/Canonical_link_element" rel="nofollow">canonical URL <code>&lt;link&gt;</code> tag</a>, which is the URL a search engine should use when trying to direct people to the same page again. But that's not necessarily the actual URL used to load the page before handing it to BeautifulSoup!</p>
<p>If you are using <code>requests</code> to load your pages, then simply ask <em>it</em> for the URL. <a href="http://docs.python-requests.org/en/latest/api/#requests.Response.url" rel="nofollow"><code>response.url</code></a> tells you what URL the response was loaded from. You can access redirection history with <a href="http://docs.python-requests.org/en/latest/api/#requests.Response.history" rel="nofollow"><code>response.history</code></a>, which contains any 30x responses that led to the final response.</p>
<p><code>urllib2</code> responses have a <a href="https://docs.python.org/2/library/urllib2.html#urllib2.urlopen" rel="nofollow"><code>.geturl()</code> method</a> that returns the final URL used; ditto for Python 3's <a href="https://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen" rel="nofollow"><code>urllib.request.urlopen()</code> responses</a>.</p>
</div>
<span class="comment-copy">BeautifulSoup doesn't handle HTTP <i>at all</i>. What do you use now to load pages? <code>urllib2</code>, <code>urllib.request</code>, the external but excellent <code>requests</code> library?</span>
<span class="comment-copy">sure i just wanted to see if there was anyway of using beautiful soup rather then writing anything further into 'requests' :-)</span>
<span class="comment-copy">A <code>requests</code> response has a <a href="http://docs.python-requests.org/en/latest/api/#requests.Response.history" rel="nofollow noreferrer"><code>history</code> attribute</a> showing you any redirects that were followed, and the <a href="http://docs.python-requests.org/en/latest/api/#requests.Response.url" rel="nofollow noreferrer"><code>url</code> attribute</a> reflects the actual URL used to retrieve the final response.</span>
<span class="comment-copy">awsome, thanks ...</span>
