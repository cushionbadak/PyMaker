<div class="post-text" itemprop="text">
<p>The issue is that I'm pulling data from one source and I want to save it to dropbox as a pickle file. I can't save it in a directory, because I'm running the code on a server (iron.io). </p>
<pre><code>import tempfile
import pickle


def SFDCDropboxSync(Data):
   f = tempfile.NamedTemporaryFile(delete=False)
   pickle.dump(Data,open(f,'wb'))

   client = dropbox.client.DropboxClient(access_token)
   client.put_file(filename, f)
</code></pre>
<p>This is the error I get: </p>
<pre><code>Traceback (most recent call last):   File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Shippy/RecurringDataDump/SFDCDropboxUpload.py", line 38, in &lt;module&gt;
    if __name__ == "__main__": main()   File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Shippy/RecurringDataDump/SFDCDropboxUpload.py", line 31, in main
    print SFDCDropboxUploadDownload().SFDCDropboxSync(lst)   File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Shippy/RecurringDataDump/SFDCDropboxUpload.py", line 26, in SFDCDropboxSync
    pkl = self.SaveListtoPickle(lst)   File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Shippy/RecurringDataDump/SFDCDropboxUpload.py", line 20, in SaveListtoPickle
    pickle.dump(lst,open(f,'wb')) TypeError: coercing to Unicode: need string or buffer, instance found [Finished in 0.7s with exit code 1] [shell_cmd: python -u "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Shippy/RecurringDataDump/SFDCDropboxUpload.py"] [dir: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Shippy/RecurringDataDump] [path: /usr/bin:/bin:/usr/sbin:/sbin]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>In your code, the NamedTemporaryFile f is not a string. It is a file object, similar to the output of open(file_path).</p>
<p>From the <a href="https://docs.python.org/3/library/tempfile.html#tempfile.NamedTemporaryFile" rel="nofollow noreferrer">documentation</a>: This file-like object can be used in a with statement, just like a normal file.</p>
<p>If you want to path to the created file, use tmp_file.name</p>
<p>For example, this works: (tested on python 3.6.2)</p>
<pre><code>def SFDCDropboxSync(Data):
    with tempfile.NamedTemporaryFile() as tmp_file:
        pickle.dump(Data, tmp_file)
        tmp_file.flush()

        print(pickle.load(open(tmp_file.name, 'rb')))
</code></pre>
<p>This will delete the file when it exits the while (file closes).</p>
<p><strong>Warning for Windows</strong>: you might have trouble reading the file while it is open. Instead, use something similar to this:</p>
<pre><code>with tempfile.NamedTemporaryFile(delete=False) as tmp_file:
    pickle.dump(Data, open(tmp_file.name, 'wb'))
    tmp_filename = tmp_file.name

pickle.load(open(tmp_filename, 'rb'))
os.remove(tmp_filename)
</code></pre>
</div>
<span class="comment-copy">Have you attempted to dump without the <code>b</code> flag? <code>pickle.dump(lst,open(f,'w'))</code></span>
<span class="comment-copy">yea, same error</span>
<span class="comment-copy">Program and traceback don't match... but it looks like Data (or lst?) isn't a pickable object. So, what are you passing in?</span>
<span class="comment-copy">use file.seek(0) and you can just use a normal tempfile its faster i guess than reopening the file</span>
