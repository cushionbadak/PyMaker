<div class="post-text" itemprop="text">
<p>My code produces many tweets in a JSON file. Each tweet is inside a { }. However, between 2 tweets in {...} and {...} there's a blank line getting produced. That makes the file unreadable in Python. However, that extra blank line between the Tweets isn't produced on an Ubuntu PC for the same code.
I'll attach both of my codes below.</p>
<pre><code>import tweepy
import json
from tweepy import OAuthHandler



consumer_key = 'luCMgoolgODpFH9rxcvLbRqYt'
consumer_secret = 'lW9fERVDfcgoq3aqVDYpbUNGkKUUFquwpQYrLvlaXzeekpvkgZ'
access_token = '750950262098059268-riOExqjYPhUTJAe4OHW9F7aYfK2ljuQ'
access_secret = 'GE4K0zqwyBi50k5Ma3xFSP44zYd1HiM5ncL1gGaDscu5K'

auth = OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_secret)

api = tweepy.API(auth)

from tweepy import Stream
from tweepy.streaming import StreamListener

class MyListener(StreamListener):

    def on_data(self, data):
        try:
            with open('new.json', 'a') as f:
                f.write(data)
                return True
        except BaseException as e:
            print("Error on_data: %s" % str(e))
        return True

    def on_error(self, status):
        print(status)
        return True

twitter_stream = Stream(auth, MyListener())
twitter_stream.filter(track=['#CHELEI'])
</code></pre>
<p>Code to read JSON: </p>
<pre><code>fname = 'python.json'
with open(fname, 'r') as f:
    count_all = Counter()
    for line in f:
        tweet = json.loads(line)
        # Create a list with all the terms
        terms_all = [term for term in preprocess(tweet['text'])]
        # Update the counter
        count_all.update(terms_all)
    # Print the first 5 most frequent words
    print(count_all.most_common(5))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Fix the empty lines?</p>
<pre><code>with open(fname, 'r') as f:
    count_all = Counter()
    for line in f if line.rstrip(' \r\n') != "":
        [...]
</code></pre>
<p>Not quite sure about the linux/windows issue, but ... windows uses <code>'\r\n'</code>, linux only <code>'\n'</code> (as newlines) - you might want to investigate how that influences your written data. </p>
<p>Some python functions / modules have <code>'\n'</code> preset for splitting and will leave <code>'\r'</code> in your code, messing it up. It is invisible so not easy to detect unless you look for it.</p>
</div>
<span class="comment-copy">Strip() will never return None. It <i>will</i> sometimes return the empty string. Also, <code>.rstrip('\r\n')</code> is preferable. <a href="https://docs.python.org/3/library/stdtypes.html#str.rstrip" rel="nofollow noreferrer">docs.python.org/3/library/stdtypes.html#str.rstrip</a></span>
<span class="comment-copy">@J_H fixed - added spaces for good measure.</span>
