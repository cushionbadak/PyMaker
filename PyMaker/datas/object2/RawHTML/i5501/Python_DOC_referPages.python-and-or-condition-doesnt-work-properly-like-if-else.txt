<div class="post-text" itemprop="text">
<p>I'm working with python and i realize that itsn't reliable while sometimes and or statement doesn't work properly without reason</p>
<pre><code>column_exclude_list = []}
column_exclude_edit = ['id']
def get_columns(type='list'):
    # exclude_list = column_exclude_list if type=='list' else column_exclude_edit
    exclude_list = type=='list' and column_exclude_list or column_exclude_edit

    print(type)
    print(column_exclude_list)
    print(column_exclude_edit)
    print(exclude_list)
</code></pre>
<p>I tested with this function and it prints:</p>
<pre><code>list
[]
['id']
['id']
</code></pre>
<p>After changing to <code>exclude_list = column_exclude_list if type=='list' else column_exclude_edit</code>, it works.</p>
<pre><code>list
[]
['id']
[]
</code></pre>
<p>What's wrong between these two short-hand conditions?</p>
</div>
<div class="post-text" itemprop="text">
<p>You haven't accounted for the case where <code>column_exclude_list</code> is <strong>empty</strong>. An empty list is a false-y value:</p>
<pre><code>&gt;&gt;&gt; type_ = 'list'
&gt;&gt;&gt; column_exclude_list = []
&gt;&gt;&gt; column_exclude_edit = 'column_exclude_edit'  # for demo purposes
&gt;&gt;&gt; type_ == 'list' and column_exclude_list or column_exclude_edit
'column_exclude_edit'
</code></pre>
<p>Because <code>column_exclude_list</code> is a false value, the <code>and</code> operator produces an empty list and the <code>or</code> operator produces the other operand.</p>
<p>This doesn't mean that <code>and</code> and <code>or</code> are broken or work differently in Python than they do in other languages. You just haven't considered that in a <code>&lt;test&gt; and &lt;true expression&gt; or &lt;false expression&gt;</code> construct, that the <code>&lt;true expression&gt;</code> is <em>still used to determine the outcome of the whole</em>. This applies to all boolean logic, not just Python.</p>
<p>Don't use <code>and</code> and <code>or</code> for a conditional expression. Use an actual <a href="https://docs.python.org/3/reference/expressions.html#conditional-expressions" rel="nofollow noreferrer">conditional expression</a>, so <code>&lt;true expression&gt; if &lt;test&gt; else &lt;false expression&gt;</code>:</p>
<pre><code>column_exclude_list if type_ == 'list' else column_exclude_edit
</code></pre>
<p>Like <code>and</code> and <code>or</code>, this lazily evaluates either one of the two operand expressions based on the outcome of the <code>if</code> test. If <code>column_exclude_list</code> is empty, it'll still be returned, because it's value is not used to determine the outcome of further boolean testing.</p>
</div>
<span class="comment-copy">You should really be using a <i>conditional expression</i>.</span>
<span class="comment-copy">Assuming Python, one of the most used language isn't reliable and that 'and' is broken is a little far fetched.</span>
<span class="comment-copy">"and i realize that itsn't reliable while sometimes and or statement doesn't work properly without reason". Why do you think there is no reason?</span>
<span class="comment-copy">What happens is if <code>column_exclude_list</code> is empty, it <b>doesn't matter what <code>type</code> is set to</b>.</span>
<span class="comment-copy">@usr2564301: it would not.</span>
<span class="comment-copy">Thank you for pointing this out, i thought <code>and or</code> condition simply works like <code>? :</code> in other language, but it doesn't.</span>
<span class="comment-copy">@TomSawyer: no, <code>? :</code> is a conditional expression. Python's syntax for the same construct is the one I show here. <code>and</code> and <code>or</code> work the same in many other programming languages as they do in Python, and should not be used for conditional expressions either.</span>
<span class="comment-copy">@TomSawyer: put differently, what would you expect <code>True and False or 'other option'</code> to produce in other languages?</span>
