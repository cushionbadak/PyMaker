<div class="post-text" itemprop="text">
<p>I am currently trying to integrate Stripe Connect and have come across the flowing CURl POST request:</p>
<pre><code>curl https://connect.stripe.com/oauth/token \
   -d client_secret=SECRET_CODE \
   -d code="{AUTHORIZATION_CODE}" \
   -d grant_type=authorization_code
</code></pre>
<p>However I am very new to CURL and have been doing some research and trying to use the requests package to do it. This is what my current code looks like:</p>
<pre><code>data = '{"client_secret": "%s", "code": "%s", "grant_type": "authorization_code"}' % (SECRET_KEY, AUTHORIZATION_CODE) 
response = requests.post('https://connect.stripe.com/oauth/token', json=data)
</code></pre>
<p>However this always returns a response code 400. I have no idea where I am going wrong and any guidance would be thoroughly appreciated. </p>
</div>
<div class="post-text" itemprop="text">
<p>The error is because you are passing your <code>data</code> as string, instead <code>json</code> param of <code>requests.post</code> call expects it to be <a href="https://docs.python.org/3/library/functions.html#func-dict" rel="nofollow noreferrer"><strong><code>dict</code></strong></a>. Your code should be:</p>
<pre><code>import requests

data = {
     "client_secret": SECRET_KEY, 
     "code": AUTHORIZATION_CODE, 
     "grant_type": "authorization_code"
} 

response = requests.post('https://connect.stripe.com/oauth/token', json=data)
</code></pre>
<p>Take a look at request library's <a href="http://docs.python-requests.org/en/master/user/quickstart/#more-complicated-post-requests" rel="nofollow noreferrer">More complicated POST requests</a> document.</p>
</div>
<span class="comment-copy">Are you actually sending json? Or just plaintext?</span>
