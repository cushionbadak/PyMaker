<div class="post-text" itemprop="text">
<p>I'm creating a Python program which will send me a top ten list of my favorite Subreddits' posts. Currently this is the code:</p>
<pre><code>def AskReddit():
    askReddit = requests.get('http://www.reddit.com/r/AskReddit/top.json',
    headers={'user-agent':'Mozilla/5.0'},
    auth=('TadaceAce','Password'),
    )

    n = 0
    for post in askReddit.json()['data']['children']:
        x[n] = post['data']['title']
        n += 1

        if (n == 10):
            break

        output = "{}\n{}\n{}\n{}\n{}\n{}\n{}\n{}\n{}\n{}".format(x[0],
                                                    x[1], x[2], x[3],
                                                    x[4], x[5], x[6],
                                                    x[7], x[8], x[9])

    return output

def todayILearned():
    todayilearned = requests.get('http://www.reddit.com/r/todayilearned/top.json',
    headers={'user-agent':'Mozilla/5.0'},
    auth=('TadaceAce','Password'),
    )

    n = 0
    for post in todayilearned.json()['data']['children']:
        x[n] = post['data']['title']
        n += 1

        if (n == 5):
            break

        output = "{}\n{}\n{}\n{}\n{}\n{}\n{}\n{}\n{}\n{}".format(x[0],
                                                    x[1], x[2], x[3],
                                                    x[4], x[5], x[6],
                                                    x[7], x[8], x[9])

    return output
</code></pre>
<p>I'm trying to DRY the code as I'll add more and more subreddits but I'm quite stuck with this code:</p>
<pre><code>def reddit(subreddit):
    todayilearned = requests.get('http://www.reddit.com/r/{}/top.json'.format(subreddit),
    headers={'user-agent':'Mozilla/5.0'},
    auth=('TadaceAce','Password'),
    )

    z = "%s.json" % subreddit

    n = 0
    for post in z()['data']['children']:
        x[n] = post['data']['title']
        n += 1

        if (n == 5):
            break

    output = "{}\n{}\n{}\n{}\n{}\n{}\n{}\n{}\n{}\n{}".format(x[0],
                                                    x[1], x[2], x[3],
                                                    x[4], x[5], x[6],
                                                    x[7], x[8], x[9])

    return output
</code></pre>
<p>How will you fix this? Specifically the for loop as I'm 80% sure that's the problem.</p>
</div>
<div class="post-text" itemprop="text">
<p>As I alluded to in my comments above your code seems a bit haphazard and I've also noticed that you say you get a top ten list, and then you use 10 elements of x in your output, but you are breaking the for loop after 6.</p>
<p>The function below should do what you are actually asking. </p>
<pre><code>def reddit(subreddit):
    response = requests.get('http://www.reddit.com/r/{}/top.json'.format(subreddit),
    headers={'user-agent':'Mozilla/5.0'},
    auth=('TadaceAce','Password'),
    )

    count = 0
    top_ten = []
    for post in response.json()['data']['children']:
        top_ten.append(post['data']['title'])
        count += 1

        if (count == 9):
            break

    output = '\n'.join(top_ten)

    return output
</code></pre>
<p>And calling <code>print(reddit('AskReddit'))</code> returns</p>
<pre><code>What are life’s toughest mini games?
What screams "I'm emotionally unstable"?
What is something an 18 year old son can do to embarrass his parents?
Chefs of Reddit, what are the biggest ripoffs that your restaurants sell?
What's the dumbest thing you're willing to argue about?
Which famous Reddit Story do you believe to actually be 100% bullshit?
What is a common internet thing that you hate?
What is an imminent danger that nobody seems to be talking about?
What do you regret doing at university?
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The problem here is
<code>z()['data']['children']</code> in the method <code>reddit(subreddit)</code></p>
<p><code>z</code> is a string and you are using it as a callable object.</p>
<p>From what I understand what you need to do is,</p>
<p><code>z = todayilearned.json()</code></p>
<p>If you are able to get the data from the url and the if the json has <code>data</code> and <code>children</code> attribute and also <code>x</code> should be initialized, this should work</p>
</div>
<span class="comment-copy">Fix what exactly? You need to describe your problem (and explain what you tried doing to fix it)</span>
<span class="comment-copy"><code>z</code> should be a string according to your code. And if you have seen the error message, it should show you where is the error.</span>
<span class="comment-copy">Sorry. I’m trying to fix the for loop of the second (third?) function. If I add another line which lets say is <code>reddit(AskReddit)</code> it comes out as an error. Specifically this: <code>TypeError: ‘str’ Object is not callable</code></span>
<span class="comment-copy">Study IO <a href="https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files" rel="nofollow noreferrer">Reading and Writing files</a></span>
<span class="comment-copy">@DavidHermes That is because you are calling a string, which isn't even related to your request object. In your code above, the request object is getting assigned to <code>todayilearned</code>. So you don't even need that <code>z=</code> line. Just replace the call to <code>z()</code> with one to <code>todayilearned.json()</code> and it should be fine. To make it more logical I'd consider renaming that variable from <code>todayilearned</code> to something like <code>request_result</code></span>
<span class="comment-copy">Thanks a lot. I’ll keep those in mind :)</span>
