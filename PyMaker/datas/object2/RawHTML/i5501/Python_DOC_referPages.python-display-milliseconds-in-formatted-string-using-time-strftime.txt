<div class="post-text" itemprop="text">
<p>I am trying to format milliseconds to formatted string preserving the milliseconds part. Here's my code: </p>
<pre><code>import time

time.strftime('%Y-%m-%d %H:%M:%S:%f', time.gmtime(1515694048121/1000.0))
</code></pre>
<p>where <em>1515694048121 is a time in milliseconds</em>. It returns me:</p>
<blockquote>
<p>2018-01-11 18:07:28:f</p>
</blockquote>
<p>As we can see, the millisecond portion of time is not returned.</p>
<p>What is correct format to include millisecond portion of time? Is <code>'%Y-%m-%d %H:%M:%S:%f'</code> not correct ?</p>
</div>
<div class="post-text" itemprop="text">
<p>There is the no directive mentioned in <a href="https://docs.python.org/3/library/time.html#time.strftime" rel="nofollow noreferrer"><strong><code>time.strftime(...)</code></strong></a> that will return you the milliseconds. Not sure from where you got the reference to use <code>%f</code>. In fact <a href="https://docs.python.org/3/library/time.html#time.gmtime" rel="nofollow noreferrer"><strong><code>time.gmtime(...)</code></strong></a> holds the precision only upto seconds.</p>
<p>As a hack, in order to achieve this, you may explicitly format your string by preserving your milli second value as:</p>
<pre><code>&gt;&gt;&gt; import time

&gt;&gt;&gt; time_in_ms = 1515694048121
&gt;&gt;&gt; time.strftime('%Y-%m-%d %H:%M:%S:{}'.format(time_in_ms%1000), time.gmtime(time_in_ms/1000.0))
'2018-01-11 18:07:28:121'
</code></pre>
<hr/>
<p>Here's the list of valid directives:</p>
<pre><code>+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------+
| Directive |                                                                                                   Meaning                                                                                                   | Notes |
+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------+
| %a        | Locale’s abbreviated weekday name.                                                                                                                                                                          |       |
| %A        | Locale’s full weekday name.                                                                                                                                                                                 |       |
| %b        | Locale’s abbreviated month name.                                                                                                                                                                            |       |
| %B        | Locale’s full month name.                                                                                                                                                                                   |       |
| %c        | Locale’s appropriate date and time representation.                                                                                                                                                          |       |
| %d        | Day of the month as a decimal number [01,31].                                                                                                                                                               |       |
| %H        | Hour (24-hour clock) as a decimal number [00,23].                                                                                                                                                           |       |
| %I        | Hour (12-hour clock) as a decimal number [01,12].                                                                                                                                                           |       |
| %j        | Day of the year as a decimal number [001,366].                                                                                                                                                              |       |
| %m        | Month as a decimal number [01,12].                                                                                                                                                                          |       |
| %M        | Minute as a decimal number [00,59].                                                                                                                                                                         |       |
| %p        | Locale’s equivalent of either AM or PM.                                                                                                                                                                     | (1)   |
| %S        | Second as a decimal number [00,61].                                                                                                                                                                         | (2)   |
| %U        | Week number of the year (Sunday as the first day of the week) as a decimal number [00,53]. All days in a new year preceding the first Sunday are considered to be in week 0.                                | (3)   |
| %w        | Weekday as a decimal number [0(Sunday),6].                                                                                                                                                                  |       |
| %W        | Week number of the year (Monday as the first day of the week) as a decimal number [00,53]. All days in a new year preceding the first Monday are considered to be in week 0.                                | (3)   |
| %x        | Locale’s appropriate date representation.                                                                                                                                                                   |       |
| %X        | Locale’s appropriate time representation.                                                                                                                                                                   |       |
| %y        | Year without century as a decimal number [00,99].                                                                                                                                                           |       |
| %Y        | Year with century as a decimal number.                                                                                                                                                                      |       |
| %z        | Time zone offset indicating a positive or negative time difference from UTC/GMT of the form +HHMM or -HHMM, where H represents decimal hour digits and M represents decimal minute digits [-23:59, +23:59]. |       |
| %Z        | Time zone name (no characters if no time zone exists).                                                                                                                                                      |       |
| %%        |                                                                                                                                                                                                             |       |
+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------+
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>In fact <a href="https://docs.python.org/3/library/time.html#time.gmtime" rel="nofollow noreferrer">time.gmtime</a> gets a number of seconds as input parameter. As a consequence, the milliseconds are not taken into account:</p>
<pre><code>&gt;&gt;&gt; import time
&gt;&gt;&gt; time.gmtime(1515694048121/1000.0) == time.gmtime(1515694048000/1000.0)
True
</code></pre>
<p>The function documentation clearly mentions it:</p>
<blockquote>
<p>Fractions of a second are ignored.</p>
</blockquote>
</div>
<span class="comment-copy">thank you. time.strftime('%Y-%m-%d %H:%M:%S:{}'.format(time_in_ms%1000), time.gmtime(1515694048121/1000.0)) should be time.strftime('%Y-%m-%d %H:%M:%S:{}'.format(time_in_ms%1000), time.gmtime(time_in_ms/1000.0)) ?</span>
<span class="comment-copy">@blue-sky: yes, it was a copy paste mistake</span>
