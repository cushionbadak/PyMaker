<div class="post-text" itemprop="text">
<p>I am wanting to write a script where I open a gziped file with 'todays date' in its title. </p>
<p>Here is what I have so far:</p>
<pre><code>todays_date = time.strftime("%Y%m%d") #format time as YYYYMMDD
nextpath = os.getcwd()
service_file = glob.glob(nextpath+"\\"+"shot_*_"+todays_date+"*_vice.gz")
input_file = glob.glob(nextpath+"\\"+"input_file.csv")

myData = gzip.open(service_file, 'rb') 
myFile = open(input_file, 'wb') with myFile:
    writer = csv.writer(myFile)
    writer.writerows(myData)
</code></pre>
<p>This was working when I wrote the full path:</p>
<pre><code>myData = gzip.open(D:/Temp/shot_655_20180109121455_vice.gz
myFile = open(D:/Temp/input_file.csv, 'wb') with myFile:
</code></pre>
<p>But since I have attempted to change it to make the date variable changeable I get the error: </p>
<pre><code>SyntaxError: invalid syntax
</code></pre>
<p>I know I am calling on it wrong somehow but I am stuck and any help would be appreciated.
Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>You're using 'with open' incorrectly. It should look like this:</p>
<pre><code>with open(my_file, 'r') as mf:
    # do stuff here
</code></pre>
<p>this way you don't have to worry about closing it later. Otherwise you can just assign the result of open() to a variable:</p>
<pre><code>mf = open(my_file, 'r')
....
mf.close()
</code></pre>
<p>Here's a link to the docs, with more information <a href="https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files" rel="nofollow noreferrer">https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files</a></p>
</div>
<span class="comment-copy">I tried: 'code' with gzip.open(service_file, 'rb') as infile, with open(input_file, 'wb') as outfile:     writer = csv.writer(outfile)     writer.writerows(infile)  But it does not work?</span>
<span class="comment-copy">Could you paste your exact code with formatting, and specify exactly what doesn't work? Use <a href="https://gist.github.com" rel="nofollow noreferrer">gist.github.com</a> or <a href="https://justpaste.it" rel="nofollow noreferrer">justpaste.it</a></span>
<span class="comment-copy">Thanks Alex, I solved my problem with:  for gzip_path in glob.glob(nextpath+"\\"+"shot_<i>_"+todays_date+"</i>_vice.gz"):     if not os.path.isdir(gzip_path):         with gzip.open(gzip_path, 'rb') as in_file, open('import_service.csv', 'wb')as outfile:             writer = csv.writer(outfile)             writer.writerows(in_file)</span>
