<div class="post-text" itemprop="text">
<p>I am trying to incorporate some real time data visualizations in a web app I'm working on </p>
<p>I am currently using matplotlib and plotly. The issue with matplot is that it is not web based and the issue with plotly is that it has very limited options for real time plotting with its streaming feature.</p>
<p>The following is an example of the type of plots that I am trying to create. The ones shown are just static, but since I have live data I would like to create the same type of charts that update in real time</p>
<p><a href="https://i.stack.imgur.com/Z79ei.jpg" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/Z79ei.jpg"/></a></p>
<p>The data is stored and updated in an SQL server so I essentially just need to have a script that fetches the most recent value from the SQL DB and then adds it to the figure every second or so. </p>
<p>Whats the best (HTML compatible) solution to go about this?</p>
<p>Have you find a way to slove this problem? because I have met the same issue. I have realized the dynamic graph plotting which can be refreshed real-time and continuously using matplotlib. Now, I want to draw the dynamic graph on webpages, do you have any suggestions or example which you have completed?  </p>
</div>
<div class="post-text" itemprop="text">
<p>Some of the comments contain suggestions worth looking at, this <a href="https://stackoverflow.com/questions/11874767/real-time-plotting-in-while-loop-with-matplotlib">Stack Overflow question</a> may also be of use (though its not HTTP), and indeed you yourself mention plotly, which <a href="https://github.com/plotly/Streaming-Demos" rel="nofollow noreferrer">has this real time plotting feature</a>.</p>
<p>However you mention that you've already got the graphs you want with matplotlib.  I did too, so wrote some very simple code to serve any number of graphs via HTTP, which requests any parameters to the plot too, one of which is a refresh period.  As you can tell by the code, it is deliberately minimal for temporary diagnostics and monitoring (of machine learning progress in my case).</p>
<p><strong>Usage:</strong></p>
<ul>
<li>Use python 3.6+ (I use <a href="https://docs.python.org/3/whatsnew/3.6.html#new-features" rel="nofollow noreferrer">f-strings</a> a lot) &amp; paste code into a file</li>
<li>Add your plots as methods under the PlotRequestHandler class (<em>method name must start with 'plot_'</em>)</li>
<li>Install any dependencies (plac + any other libs needed for plotting e.g. I use pandas, matplotlib)</li>
<li>Run file via double click (no parameters) or command line (with/without parameters)</li>
<li>Navigate pages via web browser</li>
</ul>
<p><strong>Code:</strong></p>
<pre><code>import matplotlib.pyplot as plt
import pandas as pd
import io
from http.server import HTTPServer,BaseHTTPRequestHandler
import urllib
import inspect

class PlotRequestHandler(BaseHTTPRequestHandler):
    def do_GET(self):
        args = urllib.parse.parse_qs(self.path[2:])
        args = {i:args[i][0] for i in args}
        html = ''

        if 'mode' not in args:
            plots = ''
            for member in dir(self):
                if member[:5] == 'plot_':
                    plots += f'&lt;a href="http://{self.server.server_name}:{self.server.server_port}/?mode=paramcheck&amp;graph={member}"&gt;{member[5:].replace("_"," ").title()}&lt;/a&gt;&lt;br/&gt;\n'
            html = f'''&lt;html&gt;&lt;body&gt;&lt;h1&gt;Available Plots&lt;/h1&gt;{plots}&lt;/body&gt;&lt;/html&gt;'''

        elif args['mode'] == 'paramcheck':
            plotargs = inspect.getargspec(getattr(self,args['graph'])).args
            if len(plotargs) == 1 and plotargs[0].lower()=='self':
                args['mode'] = 'plotpage'
            else:
                for arg in plotargs:
                    if arg.lower() != 'self':
                        html += f"&lt;input name='{arg}' placeholder='{arg}' value='' /&gt;&lt;br /&gt;\n"
                html = f"&lt;html&gt;&lt;body&gt;&lt;h1&gt;Parameters:&lt;/h1&gt;&lt;form method='GET'&gt;{html}&lt;input name='refresh_every' value='60' /&gt;(Refresh in sec)&lt;br /&gt;&lt;input type='hidden' name='mode' value='plotpage'/&gt;&lt;input type='hidden' name='graph' value='{args['graph']}'/&gt;&lt;input type='submit' value='Plot!'/&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;"

        elif args['mode'] == 'plotpage':
            html = f'''&lt;html&gt;&lt;head&gt;&lt;meta http-equiv="refresh" content="{args['refresh_every']};URL=\'http://{self.server.server_name}:{self.server.server_port}{self.path}\'" /&gt;&lt;/head&gt;
                       &lt;body&gt;&lt;img src="http://{self.server.server_name}:{self.server.server_port}{self.path.replace('plotpage','plot')}" /&gt;&lt;/body&gt;'''

        elif args['mode'] == 'plot':
            try:
                plt = getattr(self,args['graph'])(*tuple((args[arg] for arg in inspect.getargspec(getattr(self,args['graph'])).args if arg in args)))
                self.send_response(200)
                self.send_header('Content-type', 'image/png')
                self.end_headers()
                plt.savefig(self.wfile, format='png')
            except Exception as e:
                html = f"&lt;html&gt;&lt;body&gt;&lt;h1&gt;Error:&lt;/h1&gt;{e}&lt;/body&gt;&lt;/html&gt;"

        if html != '':
            self.send_response(200)
            self.send_header('Content-type', 'text/html')
            self.end_headers()
            self.wfile.write(bytes(html,'utf-8'))

    def plot_convergence(self, file_path, sheet_name=None):
        if sheet_name == None:
            data = pd.read_csv(file_path)
        else:
            data = pd.read_excel(file_path, sheet_name)

        fig, ax1 = plt.subplots()

        ax1.set_xlabel('Iteration')
        ax1.set_ylabel('LOSS', color='tab:red')
        ax1.plot(data.iteration, data.loss, color='tab:red')

        ax2 = ax1.twinx()

        ax2.set_ylabel('Precision, Recall, f Score')
        ax2.plot(data.iteration, data.precision, color='tab:blue')
        ax2.plot(data.iteration, data.recall, color='tab:green')
        ax2.plot(data.iteration, data['f-score'], color='tab:orange')

        fig.tight_layout()
        plt.legend(loc=6)
        return plt


def main(server_port:"Port to serve on."=9999,server_address:"Local server name."=''):
    httpd = HTTPServer((server_address, server_port), PlotRequestHandler)
    print(f'Serving on http://{httpd.server_name}:{httpd.server_port} ...')
    httpd.serve_forever()


if __name__ == '__main__':
    import plac; plac.call(main)
</code></pre>
</div>
<span class="comment-copy"><a href="https://www.quora.com/Whats-a-good-JavaScript-library-for-real-time-charting" rel="nofollow noreferrer">quora.com/â€¦</a></span>
<span class="comment-copy">Try <a href="https://mpld3.github.io/index.html" rel="nofollow noreferrer"><code>mpl3d</code></a>.</span>
<span class="comment-copy">i would use <a href="https://bokeh.pydata.org/en/latest/" rel="nofollow noreferrer">bokeh</a></span>
