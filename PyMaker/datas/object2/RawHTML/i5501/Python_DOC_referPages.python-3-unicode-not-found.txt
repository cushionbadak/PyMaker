<div class="post-text" itemprop="text">
<p>I'm aware that unicode was changed to str in python 3 but I keep getting the same issue no matter how I write this code, can anyone tell me why?</p>
<p>I'm using boilerpipe for a specific set of webcrawls:</p>
<pre><code>for urls in allUrls:
    fileW = open('article('+ str(counter)+')', 'w')
    articleDate = Article(urls)
    articleDate.download()
    articleDate.parse()
    print(articleDate.publish_date)
    fileW.write(str(Extractor(extractor='ArticleExtractor', url=urls).getText() + "\n\n\n" + str(articleDate.publish_date)+"\n\n\n"))
    fileW.close
    counter +=1
</code></pre>
<p>error:</p>
<pre><code> Traceback (most recent call last):
  File "/Users/Adrian/anaconda3/lib/python3.6/site-packages/boilerpipe/extract/__init__.py", line 45, in __init__
    self.data = unicode(self.data, encoding)
NameError: name 'unicode' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "webcrawl.py", line 26, in &lt;module&gt;
    fileW.write(str(Extractor(extractor='ArticleExtractor', url=urls).getText() + "\n\n\n" + str(articleDate.publish_date)+"\n\n\n"))
  File "/Users/Adrian/anaconda3/lib/python3.6/site-packages/boilerpipe/extract/__init__.py", line 47, in __init__
    self.data = self.data.decode(encoding)
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x8b in position 1: invalid start byte
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The error message is pointing to a line in <code>boilerpipe/extract/__init__.py</code>, which makes a call to the <code>unicode</code> built-in function.</p>
<p>I assume the link below is the source code for the package you are using. If so, it appears to be written for Python 2.7, which you can see if you look near the end of this file:</p>
<p><a href="https://github.com/misja/python-boilerpipe/blob/master/setup.py" rel="nofollow noreferrer">https://github.com/misja/python-boilerpipe/blob/master/setup.py</a></p>
<p>You have several options as far as I can see:</p>
<ol>
<li>Find a Python 3 port of this package. There are at least a few out there (<a href="https://github.com/sorpaas/python-boilerpipe/" rel="nofollow noreferrer">here's one</a> and <a href="https://github.com/slaveofcode/boilerpipe3" rel="nofollow noreferrer">here's another</a>).</li>
<li>Port the package to Python 3 yourself (if that is the only error, you could simply change that line to use <code>str</code>, but later changes could cause problems with other parts of the package). <a href="https://docs.python.org/2/library/2to3.html" rel="nofollow noreferrer">This official tool</a> should be of assistance; <a href="https://docs.python.org/3/howto/pyporting.html" rel="nofollow noreferrer">this official guide</a> should, as well.</li>
<li>Port you project to Python 2.7 and continue using the same package.</li>
</ol>
<p>I hope this helps!</p>
</div>
<span class="comment-copy">Unrelated to your problem: <code>filew.close</code> doesn't do anything. Try <code>fileW.close()</code>.</span>
<span class="comment-copy">Please copy-paste the entire error message, including any traceback, into your question.</span>
<span class="comment-copy">Rob is referring to the second to last line, <code>fileW.close</code>. You need to add parentheses to actually call the method.</span>
<span class="comment-copy">Better yet, use the <code>with open(..</code> syntax as it closes automatically when leaving its scope.</span>
<span class="comment-copy">@AdrianCoutsoftides you're welcome! If my answer below helped you and if you don't mind selecting it as the "correct" answer, that will let viewers know the question is closed (and full disclosure: it gives me some extra reputation points). :)</span>
<span class="comment-copy">I believe my answer is complete, but if you're curious as to the second error in your output, it happens because <code>self.data = self.data.decode(encoding)</code> is in the <code>except</code> clause which executes when the call to <code>unicode</code> causes the exception. Since <code>unicode</code> calls will fail in Python 3, the script assumes that <code>self.data</code> is a byte array and tries to call its <code>decode</code> method. However, if <code>self.data</code> is a <code>str</code> then it has no <code>decode</code> method, so that method call will also fail. Seen at line 47 here: <a href="https://github.com/misja/python-boilerpipe/blob/master/src/boilerpipe/extract/__init__.py" rel="nofollow noreferrer">github.com/misja/python-boilerpipe/blob/master/src/boilerpipe/…</a></span>
<span class="comment-copy">Perfect explanation and this solved the first issue miraculously, I just wanted to add that second error could be resolved by stripping the encoded bytearrays:</span>
<span class="comment-copy"><code>byteArrayVariable.encode('utf-8).strip()</code></span>
<span class="comment-copy">@AdrianCoutsoftides I’m really glad, thanks for the feedback! And I believe you’re right about the 2nd problem; that looks like it would work.</span>
