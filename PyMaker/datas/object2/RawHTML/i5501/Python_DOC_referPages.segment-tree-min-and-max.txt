<div class="post-text" itemprop="text">
<p>I am trying to build a segment tree whose parent node should contain min and max values of its children nodes.Now when I am trying to implement this I am facing an error which is that one child can return an integer whereas other child can return a list and operating max or min function will raise an error.How to overcome this?</p>
<pre><code>from math import log2,ceil
def segment(low,high,pos):

    if (low==high):
        segment_tree[pos]=arr[low]
        return

    mid=(high+low)//2

    segment(low,mid,2*pos+1)
    segment(mid+1,high,2*pos+2)

    segment_tree[pos]=[min(segment_tree[2*pos+1],segment_tree[2*pos+2]),max(segment_tree[2*pos+1],segment_tree[2*pos+2])]

length=5
arr=[1,2,3,4,5]
low=0
high=length-1
height=int(ceil(log2(length)))
pos=0 
size_of_segment_tree=2*int(pow(2,height))-1
segment_tree=[0]*size_of_segment_tree
segment(low,high,pos)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This will work using isinstance(object, list)</p>
<pre><code>segment_tree[pos]=[min(min(segment_tree[2*pos+1]) if isinstance(segment_tree[2*pos+1],list) else segment_tree[2*pos+1],min(segment_tree[2*pos+2]) if isinstance(segment_tree[2*pos+2],list) else segment_tree[2*pos+2]),max(max(segment_tree[2*pos+1]) if isinstance(segment_tree[2*pos+1],list) else segment_tree[2*pos+1],max(segment_tree[2*pos+2]) if isinstance(segment_tree[2*pos+2],list) else segment_tree[2*pos+2])]
</code></pre>
<p>Edit: reformatting for clarity: </p>
<pre><code>segment_tree[pos]=  [
    min(min(segment_tree[2*pos+1]) 
        if isinstance(segment_tree[2*pos+1],list) 
        else segment_tree[2*pos+1],
    min(segment_tree[2*pos+2]) 
        if isinstance(segment_tree[2*pos+2],list) 
        else segment_tree[2*pos+2]),
    max(max(segment_tree[2*pos+1]) 
        if isinstance(segment_tree[2*pos+1],list) 
        else segment_tree[2*pos+1],
    max(segment_tree[2*pos+2]) 
        if isinstance(segment_tree[2*pos+2],list) 
        else segment_tree[2*pos+2])
        ]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You could write a min/max function yourself if I understood the problem right:</p>
<pre><code>def my_min(value):
    if isinstance(value, list):
        return min(value)
    else:
        return value

def my_max(value):
    if isinstance(value, list):
        return max(list)
    else:
        return value
</code></pre>
</div>
<span class="comment-copy">may be you should add this logic somewhere: <code>sum(your_object) if instance(your_obj, list) else your_object</code></span>
<span class="comment-copy">The code, as it is formatted, will give error since segment_tree is a global function that needs to be defined so in the function.</span>
<span class="comment-copy">@rnso I don't think so.</span>
<span class="comment-copy">See this: <a href="https://docs.python.org/3/faq/programming.html#what-are-the-rules-for-local-and-global-variables-in-python" rel="nofollow noreferrer">docs.python.org/3/faq/â€¦</a></span>
<span class="comment-copy">I have added a reformatted version to clarify this excellent code.</span>
<span class="comment-copy">@rnso Thank you!</span>
