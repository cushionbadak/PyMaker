<div class="post-text" itemprop="text">
<p>I have a issue with the padding of a sha256 hash.</p>
<pre><code>#!/usr/bin/env python
import sys
import os
import hashlib
from passlib.hash import pbkdf2_sha256

code = str(sys.argv[1])
print(code)

array = [["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]]
counter = 0
iteration = 1

file = open("hashes.txt", "r")
for i in file:
  if iteration == 1:
    array[counter][0] = str(i)
    iteration = 2
  else:
    array[counter][1] = str(i)
    iteration = 1

  if iteration == 1:
  counter = counter +1;

print(array)

print([array[0][0]])
print pbkdf2_sha256.verify(code,array[0][0])
</code></pre>
<p>The script in the link above gets invoked by a .php file, passing the parameter 'code'. Then a list of hashes with corresponding usernames gets read out of a text file and stored into a list.</p>
<p>The output of the script with the text file containing only one hash and name looks like this:</p>
<p>2244 [['$pbkdf2-sha256$200000$AuCcU0pJidHam1NKyXnPmQ$TmzQ.cWXKnx7u.dd023qoltVxeuaPafEq7Lvyywxf9o\n', 'Fabian'], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', '']] ['$pbkdf2-sha256$200000$AuCcU0pJidHam1NKyXnPmQ$TmzQ.cWXKnx7u.dd023qoltVxeuaPafEq7Lvyywxf9o\n']</p>
<p>As you can see this works perfectly, but a '\n' gets appended to the hash both times it gets printed. I suppose that is the reason why the very last print throws a 'TypeError: Incorrect padding'.</p>
<p>The problem is: I don't know how to make this work since both name and hash would get written in the same line if I remove the '\n'. I tried to write the lines in the text file both manually and with a script using </p>
<pre><code>file = open("hashes.txt","w")
file.write(hash)
file.write("Fabian")
</code></pre>
<p>but this doesn't solve the problem. Note: the text file looks like this:</p>
<pre><code>hash0
name0
hash1
name1
etc
</code></pre>
<p>Has anyone of you been in this situation? Any help or idea is greatly appreciated, thanks in advance!</p>
</div>
<div class="post-text" itemprop="text">
<p>You can remove the newline escape character after having read a line using <a href="https://docs.python.org/3/library/stdtypes.html" rel="nofollow noreferrer">rstrip</a>.</p>
<pre><code>line = "123\n"
line = line.rstrip('\n')
</code></pre>
</div>
<span class="comment-copy"><code>\n</code> is the new line special character. If you want the information in separate lines, you need it. If you don't want it, the the data won't be in different lines.</span>
<span class="comment-copy">Hey, this solved my problem. I tried to strip it in a different way previously without success. Thank you.</span>
