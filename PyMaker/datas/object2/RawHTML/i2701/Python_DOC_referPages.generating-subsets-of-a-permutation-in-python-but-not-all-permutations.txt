<div class="post-text" itemprop="text">
<p>I have a list <code>L = [1,2,3]</code> and I want to calculate the product of all combinations, but only once -- that is:</p>
<pre><code>null # that is, no elements of the list are multiplied
1
2
3
1 * 2
1 * 3
2 * 3
1 * 2 * 3
</code></pre>
<p>I've seen a number of posts talking about using <code>itertools</code>, permutations and combinations, but these return results including <code>[1,2,3]</code>, <code>[2,1,3]</code>, <code>[3,2,1]</code>, etc, which is not what I'm after. (I'm using Python 3 if that is useful to know)</p>
<p>NB Very aware that this could be failure of my search skills, and I just don't know the precise term that I'm looking for. </p>
</div>
<div class="post-text" itemprop="text">
<p>What you want are all subsets. It turns out <a href="https://docs.python.org/3/library/itertools.html#itertools-recipes" rel="nofollow noreferrer">itertools recipes</a> offer a neat way to generate the <em>powerset</em> of an iterable.</p>
<pre><code>from itertools import chain, combinations

def powerset(iterable):
    "powerset([1,2,3]) --&gt; () (1,) (2,) (3,) (1,2) (1,3) (2,3) (1,2,3)"
    s = list(iterable)
    return chain.from_iterable(combinations(s, r) for r in range(len(s)+1))
</code></pre>
<h3>Example</h3>
<pre><code>from functools import reduce
from operator import mul

for values in powerset([1, 2, 3]):
    print(' * '.join([str(x) for x in values]),
          '=',
          reduce(mul, values, 1))
</code></pre>
<h3>Output</h3>
<pre><code> = 1
1 = 1
2 = 2
3 = 3
1 * 2 = 2
1 * 3 = 3
2 * 3 = 6
1 * 2 * 3 = 6
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You want the <em>powerset</em> of your set. <code>itertools</code> has an example of how to find it.</p>
<p><a href="https://docs.python.org/2/library/itertools.html" rel="nofollow noreferrer">https://docs.python.org/2/library/itertools.html</a></p>
</div>
<span class="comment-copy">It sounds like you want combinations, not permutations. Combinations don't count element order, permutations do.</span>
