<div class="post-text" itemprop="text">
<p>I have a <code>JSON</code> that look like:</p>
<pre><code>[{
    "lat": 43.96063343238712,
    "panoid": "sffcNG69c2kdZwEuYp1htw",
    "lon": 3.098330084924494
}, {
    "lat": 43.96052745649745,
    "panoid": "2rJPv_r0gC5FBPLZK5vHDA",
    "lon": 3.098487422195691
} and so on... ]
</code></pre>
<p>I want for each element (means pair of brackets), to add a key <code>calc</code> that is equal to</p>
<pre><code>(value of "lat") - 50
</code></pre>
<p>How could I do to update my <code>JSON</code> like that? I guess I should convert the <code>JSON</code> into a <code>dictionary</code>. But how to proceed after?</p>
</div>
<div class="post-text" itemprop="text">
<p>Use the <a href="https://docs.python.org/3/library/json.html" rel="nofollow noreferrer"><code>json</code></a> module to load the string into a list. Iterate over the dictionaries in the list and set an attribute - <code>calc</code> - to be the <code>lat</code> value minus <code>50</code>.</p>
<p>Finally, if required, dump the list back to a string with an optional <code>indent</code> arg for pretty-printing.</p>
<pre><code>import json
s = '''[{
    "lat": 43.96063343238712,
    "panoid": "sffcNG69c2kdZwEuYp1htw",
    "lon": 3.098330084924494
}, {
    "lat": 43.96052745649745,
    "panoid": "2rJPv_r0gC5FBPLZK5vHDA",
    "lon": 3.098487422195691
}]'''
l = json.loads(s)
for d in l:
    d['calc'] = d['lat'] - 50
print(json.dumps(l, indent=4))
</code></pre>
<p>giving:</p>
<pre><code>[
    {
        "lat": 43.96063343238712,
        "panoid": "sffcNG69c2kdZwEuYp1htw",
        "lon": 3.098330084924494,
        "calc": -6.0393665676128805
    },
    {
        "lat": 43.96052745649745,
        "panoid": "2rJPv_r0gC5FBPLZK5vHDA",
        "lon": 3.098487422195691,
        "calc": -6.039472543502548
    }
]
</code></pre>
</div>
<span class="comment-copy">You'll need to parse the JSON into a list of dictionary at some point, so where exactly are you stuck?</span>
<span class="comment-copy">I don't really see how to add the new row and then populate it.</span>
<span class="comment-copy">Possible duplicate of <a href="https://stackoverflow.com/questions/1024847/add-new-keys-to-a-dictionary">Add new keys to a dictionary?</a></span>
<span class="comment-copy">JSON doesn't have "rows", it has keys and values. You add a pairing in python just as you would a regular dictionary. JSON is parsed into a dictionary, and dictionaries can be written out as JSON files, but that's an implementation detail.</span>
<span class="comment-copy">Ok thanks for your answers</span>
<span class="comment-copy">Fantastic, thank you very much @Joe Iddon !!</span>
