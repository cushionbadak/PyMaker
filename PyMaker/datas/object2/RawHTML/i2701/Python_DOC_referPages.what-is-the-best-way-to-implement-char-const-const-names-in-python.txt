<div class="post-text" itemprop="text">
<p>I need to pass the "<strong>char const *const names[]</strong>" parameter to C API. How do I get constant pointer to a constant char in python ctypes ?</p>
<p>I tried using
string1 = "Hello First"
names = ctypes.c_wchar_p(string1)</p>
<p>Api call from C would be:
char const *const names[] = { "AVeryLongName", "Name" }; </p>
</div>
<div class="post-text" itemprop="text">
<p>You should start by looking at <a href="https://docs.python.org/3/library/ctypes.html#module-ctypes" rel="nofollow noreferrer">[Python 3]: ctypes - A foreign function library for Python</a>. Couple of ideas:</p>
<ul>
<li><p>You can't specify <em>const</em>ness (or at least, I'm not aware how) via <em>ctypes</em>. A small example on <em>Win</em>:</p>
<blockquote>
<pre><code>&gt;&gt;&gt; from ctypes import wintypes
&gt;&gt;&gt; wintypes.LPCSTR == wintypes.LPSTR
True
</code></pre>
</blockquote>
<p>So, the <em>ctypes</em> wrapper for your array is same as for <code>char *names[] = ....</code></p></li>
<li><p>Starting with <em>Python <strong>3</strong></em></p></li></ul></div>
<div class="post-text" itemprop="text">
<p>This is How I end up implementing and it seems worked with Python 2.7.</p>
<p>Sample C file:</p>
<pre><code>void sam_test(char const *const names[],int n)
{
 int i;
   for (i = 0; i &lt; n; i++) {
     printf ("%s \n", (names[i]));
   }
}
</code></pre>
<p>Python:</p>
<pre><code>import ctypes
lib = ctypes.cdll['./test.so']
sam = lib['sam_test']
String = ctypes.c_char_p * 3
ii = String("First", "Second", "Third")
name = ctypes.cast(ii, ctypes.POINTER(ctypes.c_char_p))
sam(name, 3)
</code></pre>
</div>
<span class="comment-copy">Thank you for the reply. I will try with Python 3.</span>
<span class="comment-copy">You're welcome:) Let me know how it works. I didn't see any <i>Python</i> version, so I assumed it's 3. For <i>Python 2</i> it's simpler since you can ignore the 2nd bullet.</span>
<span class="comment-copy">CristiFati, actually at the beginning I was trying with Python 2. but once I figured out, I will update my solution.</span>
<span class="comment-copy">I don't understand. What solution? Doesn't this work? So at the end are you using <i>Python 2</i> or *3?</span>
<span class="comment-copy">I am using Python 2 and Solution has been updated, Thanks a lot for pointer to the ctypes pointers :)</span>
