<div class="post-text" itemprop="text">
<p>I want to calculate mean for lists of vectors. However received error message   </p>
<pre><code>ValueError                                Traceback (most recent call last)
&lt;ipython-input-1293-04753fc36464&gt; in &lt;module&gt;()
     13         else:
     14             NOT_FOUNT.append(j)
---&gt; 15     Q_VEC.append(np.mean(DOC, axis=0))
     16     QUERY.append(WORD)
     17     #print(WORD, Q_VEC)

ValueError: setting an array element with a sequence.
</code></pre>
<p>My Code:</p>
<pre><code>Q_VEC=[]
QUERY=[]
NOT_FOUNT=[]
for i in W_LIST:
    DOC=[]
    WORD=[]
    for j in i:
        if j in list(D_FINAL.keys()):
            DOC.append(D_FINAL[j])   #D_FINAL[j] is an array
            WORD.append(j)
        else:
            NOT_FOUNT.append(j)
    Q_VEC.append(np.mean(DOC, axis=0))
    QUERY.append(WORD)
</code></pre>
<p>The Data:</p>
<pre><code> W_LIST

 [['professional', 'training', None, None, 
None, None, None, None, None, None],
['undergraduate', 'management', None, None, 
None, None, None, None, None, None],
['professional', 'management', None, None, 
None, None, None, None, None, None]]

D_FINAL

{'professional': array([ -1.5453218 ,  
-2.9101162 ,  -1.7782371 ,  -0.7723548]),
'undergraduate': array([-5.044174  , 
-5.768703  ,  0.23328705,  1.6166878]),
'management': array([  0.9067916 ,  
-0.37680042,   2.2666857 ,  -1.3643779]),
'training': array([ -4343.5654  ,    
166.61334 ,  -4708.429   ,  11363.863])}
</code></pre>
<p>I want to calculate W_LIST's average, base on their vector value in D_FINAL.</p>
<p>"professional training" (will be saved to 'QUERY')vector value will be </p>
<pre><code>[(-1.5453218)+(-4343.5654)/2,  (-2.9101162)+ 
(166.61334 )/2, (-1.7782371)+(-4708.429)/2, 
(-0.7723548)+(11363.863)/2]
</code></pre>
<p>The average vector will be saved to 'Q_VEC'</p>
<p>Thank you!</p>
</div>
<div class="post-text" itemprop="text">
<p>I found elements in the dictionary are in different length, after fixing it, the issue was solved.</p>
</div>
<span class="comment-copy">When asking about code that produces an Exception you should always include the complete Traceback in the question. Copy the Traceback and paste it in the question, then format it as code (select it and type ctrl-k)</span>
<span class="comment-copy">i've added it, thank you</span>
<span class="comment-copy">I can't reproduce the exception with your example data/code.  That error/exception happens when you do something like this: <code>a = np.arange(5); a[0] = [1,2,3]</code>.   <a href="https://docs.python.org/3/tutorial/errors.html#handling-exceptions" rel="nofollow noreferrer">Catch the error</a> and inspect/print relevant data in the except suite. Or just print the data right before the offending line.  That will give you a place to start.</span>
<span class="comment-copy">Which version of Numpy are you using? I'm assuming <code>np</code> is Numpy.  I'm using 1.14.3.  Maybe try getting the newest version?</span>
<span class="comment-copy">Try this: <code>Q_VEC.append(np.mean(np.array(DOC), axis=0))</code> . Maybe in your <code>numpy</code> version using a list of numpy arrays is what is behind this error.</span>
