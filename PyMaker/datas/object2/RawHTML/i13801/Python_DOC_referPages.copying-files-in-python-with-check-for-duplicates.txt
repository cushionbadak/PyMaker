<div class="post-text" itemprop="text">
<p>I'm new to this python and trying to write a program to recursively copy jpgs in a folder structure to a new folder, and to change the filename if their is a duplicate filename. </p>
<pre><code>srcDir = 'Users/photos/2008/thumbnails/' #files in two more dir deep 
toDir = 'Users/external_drive/2008/'

shutil.copy(srcDir,toDir)
if filename = filename
    filename + '_2.jpg'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The following script should do what you need. It uses <code>os.walk</code> to recurse through all of your folders looking for files with a <code>.jpg</code> extension. If a filename already exists in the <code>toDir</code>, it keeps incrementing a file counter until an empty slot is found and it displays a log of all the copies as it goes:</p>
<pre><code>import os, shutil

srcDir = 'Users/photos/2008/thumbnails/' #files in two more dir deep 
toDir = 'Users/external_drive/2008/'

try:
    os.makedirs(toDir)
except:
    pass

for root, dirs, files in os.walk(srcDir, topdown=True):
    for file in files:
        src = os.path.join(root, file)
        target = os.path.join(toDir, file)

        if file.lower().endswith('.jpg'):
            index = 1

            while os.path.exists(target):
                index +=1
                target = os.path.join(toDir, os.path.splitext(file)[0]+ "_%d.jpg" % index)

            print "Copying: '%s'  to  '%s'" % (src, target)
            shutil.copy(src, target)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Please note that there are some errors in your code:</p>
<ul>
<li><code>=</code> is an assignment in python; <code>==</code> checks for equality</li>
<li><code>shutil.copy()</code> expects a file, not a directory, as source</li>
</ul>
<p>For traversing a directory tree in python you can take a look at this nice <a href="http://www.pythoncentral.io/how-to-traverse-a-directory-tree-in-python-guide-to-os-walk/" rel="nofollow">tutorial</a>.</p>
<p>For checking if a file exists have a look at this stackoverflow <a href="https://stackoverflow.com/questions/82831/check-whether-a-file-exists-using-python">question</a>.</p>
</div>
<span class="comment-copy">Check if the file exists before copying the new one. If yes, then choose another name.</span>
<span class="comment-copy">Have you taken the time to work your way through <a href="https://docs.python.org/3/tutorial/index.html" rel="nofollow noreferrer">The Tutorial</a>?</span>
<span class="comment-copy">i didn't know about the tut. i will now. thanks.</span>
<span class="comment-copy">thank you for the help!</span>
<span class="comment-copy">You are welcome! Don't forget to accept one of the answers when you are ready, to collect your Scholar badge.</span>
<span class="comment-copy">thanks for the links</span>
