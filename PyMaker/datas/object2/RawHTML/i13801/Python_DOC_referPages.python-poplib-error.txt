<div class="post-text" itemprop="text">
<p>This is the code</p>
<pre><code>import poplib
from email import parser

pop_conn = poplib.POP3_SSL('pop.gmail.com')
pop_conn.user('user@gmail.com')
pop_conn.pass_('password')
messages = [pop_conn.retr(i) for i in range(1, len(pop_conn.list()[1]) + 1)]
messages = ["\n".join(mssg[1]) for mssg in messages]
messages = [parser.Parser().parsestr(mssg) for mssg in messages]
for message in messages:
    print(message)
</code></pre>
<p>When it gets to the 8th line (<code>messages = ["\n".join(mssg[1]) for mssg in messages]</code>)</p>
<p>It says this: </p>
<pre><code>TypeError: sequence item 0: expected str instance, bytes found
</code></pre>
<p>Does anyone know what i'm doing wrong?</p>
</div>
<div class="post-text" itemprop="text">
<p>Convert the bytes objects into string using <a href="https://docs.python.org/3/library/stdtypes.html#bytes.decode" rel="nofollow"><code>bytes.decode</code></a>:</p>
<pre><code>messages = ["\n".join(m.decode() for m in mssg[1]) for mssg in messages]
</code></pre>
</div>
<span class="comment-copy">It still lists huge amounts of information how would I get this to list the just most recent message content</span>
<span class="comment-copy">@JacobCorrigon, Change <code>1</code> from <code>range(1, len(pop_conn.list()[1]) + 1)</code> so that it does not retrieve all messages.</span>
<span class="comment-copy">@JacobCorrigon, For example, <code>1</code> -&gt; <code>max(1, len(pop_conn.list()[1]) - 10 + 1)</code> to get at most 10 recent message.</span>
<span class="comment-copy">Would that give me purely the contents of the message and nothing else?</span>
<span class="comment-copy">@JacobCorrigon, It will retrieve most recent (or oldest, not sure) 10 emails.</span>
