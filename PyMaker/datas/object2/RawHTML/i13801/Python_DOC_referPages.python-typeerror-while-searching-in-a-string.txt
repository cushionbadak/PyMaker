<div class="post-text" itemprop="text">
<p>When I run this code: </p>
<pre><code>    stdout = Popen(callbackquery, shell=True, stdout=PIPE).stdout
    output = stdout.read()
    if output.find("No records were found that matched the search criteria") == -1:
        print(output)
    else:
        # Do nothing
        print("It's fine")
</code></pre>
<p>I get the following error:</p>
<pre><code>   if output.find("No records were found that matched the search criteria") == -1:
TypeError: 'str' does not support the buffer interface
</code></pre>
<p>I understand that this is to do with character encoding but I don't know where and how I need to convert this?</p>
</div>
<div class="post-text" itemprop="text">
<p>For people who are wondering why this issue occured. From subprocess <a href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" rel="nofollow">documentation</a>  -</p>
<blockquote>
<p>If <em>universal_newlines</em> is True, the file objects stdin, stdout and stderr are opened as text streams in universal newlines mode, as described above in Frequently Used Arguments, otherwise they are opened as binary streams.</p>
</blockquote>
<p>The default value for <em>universal_newlines</em> is False, which means that stdout is a binary stream, and the data it returns is a byte string.</p>
<p>And the issue occurs because we are trying to do a <code>.find()</code> on the byte string passing in <code>string</code> as argument. A very simple example to show this -</p>
<pre><code>&gt;&gt;&gt; b'Hello'.find('Hello')
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: 'str' does not support the buffer interface
</code></pre>
<p>You should <code>.decode()</code> the data , Example -</p>
<pre><code>stdout = Popen(callbackquery, shell=True, stdout=PIPE, universal_newlines=True).stdout
output = stdout.read.decode('&lt;encoding&gt;') #The encoding with which the output of the other process is returned, can be something like utf-8, etc.
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>If  "No records were found that matched the search      criteria" in output:
  Do something 
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>stdout = Popen(callbackquery, shell=True, stdout=PIPE, universal_newlines=True).stdout
    output = stdout.read()
</code></pre>
</div>
<span class="comment-copy">Are you using python 2.x or 3?</span>
<span class="comment-copy">Have you Googled that error along with "popen", "stdout.read", and so on? There are several existing questions with answers that might help you.</span>
<span class="comment-copy">stdout = Popen(callbackquery, shell=True, stdout=PIPE, universal_newlines=True).stdout     output = stdout.read()</span>
<span class="comment-copy">that gives the same error. It is to do with UTF encoding</span>
<span class="comment-copy">While this code snippet may solve the question, <a href="http://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers">including an explanation</a> really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion.</span>
