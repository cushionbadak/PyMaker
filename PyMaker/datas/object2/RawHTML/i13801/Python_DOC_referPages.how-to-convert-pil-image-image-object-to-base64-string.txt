<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/16065694/is-it-possible-to-create-encoded-base64-url-from-image-object">Is it possible to create encoded base64 URL from Image object?</a>
<span class="question-originals-answer-count">
                    3 answers
                </span>
</li>
</ul>
</div>
<p>I am trying to manipulate a base64 encoded image in such a way as to rotate it at 90 angle. After this manipulation, I want to convert it back to base64 string. But unfortunately unable to achieve this yet. </p>
<p>Here is what I have done so far:</p>
<pre><code>image_string = StringIO(base64.b64decode(base64_string_here))
image = Image.open(image_string)
angle = 90
rotated_image = image.rotate( angle, expand=1 )
</code></pre>
<p>Kindy help me how to convert this rotated_image to base64 string.</p>
<p>here's the <code>dir()</code> of rotated_image:</p>
<blockquote>
<p>['_Image__transformer', '__doc__', '__getattr__', '__init__',
  '__module__', '__repr__', '_copy', '_dump', '_expand', '_makeself',
  '_new', 'category', 'convert', 'copy', 'crop', 'draft', 'filter',
  'format', 'format_description', 'fromstring', 'getbands', 'getbbox',
  'getcolors', 'getdata', 'getextrema', 'getim', 'getpalette',
  'getpixel', 'getprojection', 'histogram', 'im', 'info', 'load',
  'mode', 'offset', 'palette', 'paste', 'point', 'putalpha', 'putdata',
  'putpalette', 'putpixel', 'quantize', 'readonly', 'resize', 'rotate',
  'save', 'seek', 'show', 'size', 'split', 'tell', 'thumbnail',
  'tobitmap', 'tostring', 'transform', 'transpose', 'verify']</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p><strong>Python 3</strong></p>
<pre><code>import base64
from io import BytesIO

buffered = BytesIO()
image.save(buffered, format="JPEG")
img_str = base64.b64encode(buffered.getvalue())
</code></pre>
<p><strong>Python 2</strong></p>
<pre><code>import base64
import cStringIO

buffer = cStringIO.StringIO()
image.save(buffer, format="JPEG")
img_str = base64.b64encode(buffer.getvalue())
</code></pre>
</div>
<span class="comment-copy">I'd like to say that in python3.4 you should write <code>from io import BytesIO</code> and <code>buffer = BytesIO()</code>. Also keep in mind that <code>buffer</code> is already an existing builtin name (use <code>buffered</code> maybe). <a href="https://docs.python.org/3/library/io.html#binary-i-o" rel="nofollow noreferrer">The fine docs</a>.</span>
<span class="comment-copy"><code>IOError: cannot write mode RGBA as JPEG</code></span>
<span class="comment-copy">@User this means image has alpha channel (known as transparency level in your image). In case you are safe to get rid of it, you can convert image to RGB before saving it to and converting to base64 string with next line:  <code>image = image.convert("RGB")</code></span>
