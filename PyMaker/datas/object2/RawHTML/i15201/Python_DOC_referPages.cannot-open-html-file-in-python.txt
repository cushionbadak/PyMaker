<div class="post-text" itemprop="text">
<p>I am trying to gather how many hyperlinks are in an html file. To do that, I want to read the html file in Python and do a search for all of the <code>&lt;/a&gt;</code> anchors. However, it seems that when I try to pass an html file through python, I get an error that reads:</p>
<blockquote>
<p>"UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position
  1819: ordinal not in range(128)"</p>
</blockquote>
<p>However, if I copy and paste that same text into a txt file, then my code works. My code is as follows:</p>
<pre><code>def links(filename):
    infile = open(filename)
    content = infile.read()
    infile.close()
    anchorTagEnd = content.count("&lt;/a&gt;")
    return anchorTagEnd

print(links("DePaul CDM - College of Computing and Digital Media.html"))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Why not use an <em>HTML parser</em> to count the links inside an HTML file.</p>
<p>Using <a href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="nofollow"><code>BeautifulSoup</code></a>:</p>
<pre><code>from bs4 import BeautifulSoup

def links(filename):
    soup = BeautifulSoup(open(filename))
    return len(soup.find_all('a'))

print(links("DePaul CDM - College of Computing and Digital Media.html"))
</code></pre>
<p>Using <a href="http://lxml.de/lxmlhtml.html" rel="nofollow"><code>lxml.html</code></a>:</p>
<pre><code>import lxml.html

def links(filename):
    tree = lxml.html.parse(filename)
    return tree.xpath('count(//a)')[0]

print(links("DePaul CDM - College of Computing and Digital Media.html"))
</code></pre>
</div>
<span class="comment-copy">What Python version are you using? Unicode handling in Python 3 is a little different to how it works in Python2. How are you fetching the HTML? There are a variety of ways to do that in Python, and it's not easy to help you fix your code if we don't know what it's doing.</span>
<span class="comment-copy">I am using 3.4.2.  I am fetching the HTML just  by using the function I wrote above, and passing the html file through it via the print function.  Thats all my code is so far.</span>
<span class="comment-copy">Sorry, I didn't realise that the HTML file is already on your hard drive: I assumed that you were downloading the HTML from a Web site using Python. My mistake.</span>
<span class="comment-copy">It appears that your HTML file contains Unicode, and when you open the file you should tell the <code>open()</code> function which particular Unicode encoding the file uses; it's probably <code>utf-8</code>, but the encoding should be mentioned near the top of the HTML file. See the official <a href="https://docs.python.org/3/howto/unicode.html#reading-and-writing-unicode-data" rel="nofollow noreferrer">Python docs</a> for more info. An HTML-oriented file opener <i>could</i> read that info for itself, but the general-purpose <code>open()</code> doesn't do that.</span>
<span class="comment-copy">Unfortunately I am limited only to the functions that we were taught in class.  We didn't learn about any html parsing functions, so if there is no way to parse an html file without a special parser, then I may just need to save all of it in a txt file and run the code with a txt file.</span>
