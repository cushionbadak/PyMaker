<div class="post-text" itemprop="text">
<p>I am a fairly new programmer.</p>
<p>I am currently trying to find data from .txt files and add them to a string or array, which will then eventually be added to a .csv file.</p>
<p>The data I am looking at are currently present in this form, numerous times at random intervals within each .txt file:</p>
<p>' Line Flux:                        3.0008e-19 +/- 2.6357e-21 [W/cm^2]'</p>
<p>Hence, after reading several ways around accessing this I have come up with a code that doesn't produce any errors, but doesn't print anything either:</p>
<pre><code>cwd = os.getcwd()

def open_txt():
    flux = {}
    for file in cwd:
        if file.endswith('.txt'):
            f = open(file,'r')
            lines = f.readlines()
            for line in lines:
                if line.startswith(' Line Flux:'):
                    line.strip(' Line Flux:                        ' + '[W/cm^2]')
                    flux.append(line)
                    print flux

open_txt()
</code></pre>
<p>Is there anything glaringly obvious that I am doing incorrectly?</p>
<p>Thanks for reading. Any helpful replies would be greatly appreciated.</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/2/library/os.html?highlight=getcwd#os.getcwd" rel="nofollow">getcwd</a> returns a string, so i think this is where your bug is. You are iterating through each letter of the string. Perhaps you need <a href="https://docs.python.org/2/library/os.html#os.listdir" rel="nofollow">listdir</a>. </p>
<p>You may want to check this <a href="https://stackoverflow.com/questions/3207219/how-to-list-all-files-of-a-directory-in-python">link</a> too.</p>
<hr/>
<p>If that is not the case you can try inserting the "print marker" and see if it opens a file at all</p>
<pre><code>cwd = os.getcwd()

def open_txt():

    # This has to be a list, not a dict.
    flux = []
    for file in cwd:       

        if file.endswith('.txt'):
            # Check loop is entered, with this print marker
            print 'it opened file: %s'% file

            f = open(file,'r')
            lines = f.readlines()
            for line in lines:
                if line.startswith(' Line Flux:'):
                    line.strip(' Line Flux:                        ' + '[W/cm^2]')
                    flux.append(line)
                    print flux

open_txt()
</code></pre>
<hr/>
<p>Also, <code>strip</code> is removing all characters that you provided to it. Including <code>/ : e</code>. 
<code>strip('ab'+'cz')</code> is equivalent to <code>strip('acbz')</code> </p>
<p>Instead you can use <a href="https://docs.python.org/3/library/re.html" rel="nofollow">regular expressions</a>: </p>
<pre><code>import re

my_str = ' Line Flux: 3.0008e-19 +/- 2.6357e-21 [W/cm^2]'

pattern = re.compile(r'Line Flux: (.*?)\[W/cm\^2\]')
result = re.findall(pattern, my_str)

print result
</code></pre>
<p>Parenthesis in the pattern indicates which part of the match to be returned.</p>
</div>
<div class="post-text" itemprop="text">
<p>This should work:</p>
<pre><code>cwd = os.getcwd()

def open_txt():
    flux = []
    for file in os.listdir(cwd):
        if file.endswith('.txt'):
            with open(file,'r') as f:
                lines = f.readlines()
                for line in lines:
                    if line.startswith(' Line Flux:'):
                        output_line = line[11:-8]
                        flux.append(output_line)
                print flux

open_txt()
</code></pre>
<p>I used with open to ensure the file is closed corretly.</p>
<p>Python slice notation to stip the first and last characters.</p>
<p>Changed flux to a list instead of dict.</p>
<p>I also moved the print statemnt out of the for loop so that it only prints the completed array.</p>
</div>
<span class="comment-copy">Not sure if this is the only cause of your problem, but <code>strip</code> does not modify the string, it returns a brand new string with your desired changes. You have to assign the result to something if you want to use it.</span>
<span class="comment-copy">Not the problem, but you are not closing the file. Put <code>f.close()</code> at the end of the method, or better, use <code>with open(file) as f:</code> to have it automatically closed.</span>
<span class="comment-copy">also flux should be a list [] not a dict {}</span>
<span class="comment-copy">Have you tried <a href="https://docs.python.org/2/library/re.html" rel="nofollow noreferrer">regular expressions</a>, since you know the form of the data?</span>
<span class="comment-copy">I assumed (perhaps incorrectly) that you were trying to get the string with " Line Flux:" and  "[W/cm^2]" removed. If that is not the case a different strip method would be needed.</span>
