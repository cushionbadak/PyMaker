<div class="post-text" itemprop="text">
<p>Say I have strings like the following:</p>
<pre><code>old_string = "I love the number 3 so much"
</code></pre>
<p>I would like to spot the integer numbers (in the example above, there is only one number, <code>3</code>), and replace them with a value larger by 1, i.e., the desired result should be</p>
<pre><code>new_string = "I love the number 4 so much"
</code></pre>
<p>In Python, I can use:</p>
<pre><code>r = re.compile(r'([0-9])+')
new_string = r.sub(r'\19', s)
</code></pre>
<p>to append a <code>9</code> at the end of the integer numbers matched. However, I would like to apply something more general on <code>\1</code>. </p>
<p>If I define a function:</p>
<pre><code>def f(i):
    return i + 1
</code></pre>
<p>How do I apply <code>f()</code> on <code>\1</code>, so that I can replace the matched strings in <code>old_string</code> with something like <code>f(\1)</code>?</p>
</div>
<div class="post-text" itemprop="text">
<p>In addition to having a replace string, <code>re.sub</code> allows you to use a function to do the replacements:</p>
<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; old_string = "I love the number 3 so much"
&gt;&gt;&gt; def f(match):
...     return str(int(match.group(1)) + 1)
...
&gt;&gt;&gt; re.sub('([0-9])+', f, old_string)
'I love the number 4 so much'
&gt;&gt;&gt;
</code></pre>
<p>From the <a href="https://docs.python.org/3/library/re.html#re.sub" rel="noreferrer">docs</a>:</p>
<blockquote>
<p><code>re.sub(pattern, repl, string, count=0, flags=0)</code></p>
<p>If <code>repl</code> is a function, it is called for every non-overlapping
  occurrence of <code>pattern</code>. The function takes a single match object
  argument, and returns the replacement string.</p>
</blockquote>
</div>
<span class="comment-copy">just beat me to it +1</span>
<span class="comment-copy">Thank you. It works.</span>
