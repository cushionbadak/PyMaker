<div class="post-text" itemprop="text">
<p>I have got some code to attach files from an email using MIME module
 however each time I send the email I want it to <strong>automatically</strong> send
 only the first 5 most recent pictures in the file.</p>
<pre><code>  import os, re
        import sys
        import smtplib

        from email.mime.image import MIMEImage
        from email.mime.multipart import MIMEMultipart
        from email.mime.text import MIMEText

        SMTP_SERVER = 'smtp.gmail.com'
        SMTP_PORT = 587

        sender = '***@gmail.com'
        password = "*******"
        recipient = '***@gmail.com'
        subject = 'Python emaillib Test'
        message = 'Images attached.'

        directory = "images/"

        def main():
            msg = MIMEMultipart()
            msg['Subject'] = 'Python emaillib Test'
            msg['To'] = recipient
            msg['From'] = sender
         #this is where it searches for the image
            files = os.listdir(directory)
            jpgsearch = re.compile(".jpg", re.IGNORECASE)
            files = filter(jpgsearch.search, files)
            for filename in files:
                path = os.path.join(directory, filename)
                if not os.path.isfile(path):
                    continue

                img = MIMEImage(open(path, 'rb').read(), _subtype="jpg")
                img.add_header('Content-Disposition', 'attachment', filename = filename)
                msg.attach(img)

            part = MIMEText('text', "plain")
            part.set_payload(message)
            msg.attach(part)

            session = smtplib.SMTP(SMTP_SERVER, SMTP_PORT)

            session.ehlo()
            session.starttls()
            session.ehlo
            session.login(sender, password)

            session.sendmail(sender, recipient, msg.as_string())
            session.quit()

        if __name__ == '__main__':
            main()
</code></pre>
<p>I am a beginner to Python so help would be appreciated</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/3/library/os.html#os.stat" rel="nofollow">os.stat</a> to fetch atime, ctime or mtime. Then simple compare timestamps (or use some other logic based on datetime.datetime.fromtimestamp)</p>
</div>
<span class="comment-copy">Could you give an example of this using my previous code. As I am a beginner?</span>
<span class="comment-copy">Python has os.atime, os.ctime, and os.mtime</span>
<span class="comment-copy">where would I place os.atime, os.ctime and os.mtime in my code?</span>
<span class="comment-copy">SO is place for advice not writing code for others</span>
<span class="comment-copy">Thanks for this it helped a lot!</span>
