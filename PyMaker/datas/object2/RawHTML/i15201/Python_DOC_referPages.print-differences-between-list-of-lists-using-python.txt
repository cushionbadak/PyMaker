<div class="post-text" itemprop="text">
<p>I have two list of lists like below. I know I can use set(list1)-set(list2) or vice-versa to print the list that's different from the other corresponding one. However, I do not want the complete list to be printed out, I just want that part of the list that's been modified. </p>
<p>For example, list1:</p>
<pre><code>[['Code', 'sID', 'dID', 'cID', 'ssID'], ['ABCD-00', 'ABCD-00-UNK', '358', '1234', '9999'], ['ABCD-01', 'ABCD-00-UNK', 160, '993', '587']]
</code></pre>
<p>list2:</p>
<pre><code>[['Code', 'sID', 'dID', 'cID', 'ssID', 'AddedColumn'], ['ABCD-00', 'ABCD-00-UNK', '358', '1234', '9999', 'AddedValue1'], ['ABCD-01', 'ABCD-00-UNK', 160, '993', 'ChangedValue', 'AddedValue2']]
</code></pre>
<p>If I do set difference, it prints out the entire list. I want the output to show only the columns that are different/added/taken away when 'Code', 'sID' are the same.  </p>
<p>EDIT: </p>
<p>The first list of each list of lists is the header. So I want to compare the lists when values from 'Code', 'sID' columns are matching. </p>
<p>Desired output:</p>
<pre><code>Added - ['AddedColumn', 'AddedValue1', 'AddedValue2']
Deleted - []
Changed - ['Code', 'ABCD-01', 'ssID', 'ChangeValue']
</code></pre>
<p>something like this or anything simpler is fine also. </p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/2/library/difflib.html#sequencematcher-objects" rel="noreferrer"><code>difflib.SequenceMatcher()</code></a> to work out how your lists have changed:</p>
<pre><code>from difflib import SequenceMatcher

matcher = SequenceMatcher()
for a, b in zip(list1, list2):
    matcher.set_seqs(a, b)
    for tag, i1, i2, j1, j2 in matcher.get_opcodes():
        if tag == 'equal': continue
        print('{:&gt;7s} {} {}'.format(tag, a[i1:i2], b[j1:j2]))
</code></pre>
<p>This simple setup only lists what things have been added, deleted, or replaced:</p>
<pre><code>&gt;&gt;&gt; from difflib import SequenceMatcher
&gt;&gt;&gt; list1 = [['Code', 'sID', 'dID', 'cID', 'sID'], ['ABCD-00', 'ABCD-00-UNK', '358', '1234', '9999'], ['ABCD-01', 'ABCD-00-UNK', 160, '993', '587']]
&gt;&gt;&gt; list2 = [['Code', 'sID', 'dID', 'cID', 'sID', 'AddedColumn'], ['ABCD-00', 'ABCD-00-UNK', '358', '1234', '9999', 'AddedValue1'], ['ABCD-01', 'ABCD-00-UNK', 160, '993', 'ChangedValue', 'AddedValue2']]
&gt;&gt;&gt; matcher = SequenceMatcher()
&gt;&gt;&gt; for a, b in zip(list1, list2):
...     matcher.set_seqs(a, b)
...     for tag, i1, i2, j1, j2 in matcher.get_opcodes():
...         if tag == 'equal': continue
...         print('{:&gt;7s} {} {}'.format(tag, a[i1:i2], b[j1:j2]))
... 
 insert [] ['AddedColumn']
 insert [] ['AddedValue1']
replace ['587'] ['ChangedValue', 'AddedValue2']
</code></pre>
<p>but the matcher also gives you what hasn't changed; I ignored the <code>equal</code> tags to simplify the demo. It shows how two elements have been added, and one element was replaced by two other elements. </p>
</div>
<div class="post-text" itemprop="text">
<p><code>set(a) - set(b)</code> returns the elements that are in list a, but not list b. To view elements added to a list, use <code>set(newList) - set(oldList)</code>, to view elements removed from a list use <code>set(oldList) - set(newList)</code>.</p>
<p>You cannot apply if you apply <code>set</code> on a list of list in python 3 (I do not know about python 2) you get the following error: <code>TypeError: unhashable type: 'list'</code>. So you will have to apply this to each of the corresponding sublists.</p>
</div>
<span class="comment-copy">What does <i>'Code','sID' are the same</i> means? What is the desired output?</span>
<span class="comment-copy">Thank you. This really helped. But if you don't mind, could you please briefly explain what <code>'{:&gt;7s} {} {}'</code> this part means.</span>
<span class="comment-copy">@amy that's a format string that the <a href="https://docs.python.org/3/library/stdtypes.html#str.format" rel="nofollow noreferrer"><code>str.format()</code> method</a> uses to fill in values. <code>&gt;7s</code> creates a column 7 characters wide with the value right-aligned in the final string. See <a href="https://docs.python.org/3/library/string.html#formatstrings" rel="nofollow noreferrer"><i>Format String Syntax</i></a>.</span>
<span class="comment-copy">Thank you :) @Martijn Pieters</span>
<span class="comment-copy">I converted them into sets, which I didn't mention here.</span>
