<div class="post-text" itemprop="text">
<p>I have an array, a=[1,2,3,4,5,6,7], and I am trying to find the index of all the values which are less than 6 and greater than 2, using list comprehension.
I am using the following technique:</p>
<pre><code>tk = [b if (a[b]&gt;=2 &amp; [b]&lt;=6) for b in range(len(a))]
</code></pre>
<p>It keeps saying that there is a syntax error at 'for'.
Any idea how to resolve this? Or what am I doing wrong?</p>
</div>
<div class="post-text" itemprop="text">
<p>This should be enough to do the trick:</p>
<pre><code>&gt;&gt;&gt; indices = [i for i, x in enumerate(a) if 2 &lt; x &lt; 6]
&gt;&gt;&gt; indices
[2, 3, 4]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Below code will work </p>
<pre><code>  tk = [b for b in range(len(a)) if (a[b]&gt;= 2 and a[b] &lt;= 6)]
  tk
  [1, 2, 3, 4, 5]
</code></pre>
<p>I have modified 3 things here:</p>
<ol>
<li>way we should call list comprehension with if condition</li>
<li>rather than using [b] used a[b]</li>
<li>used <strong>and</strong> rather than <strong>&amp;</strong></li>
</ol>
<p>Hope this will help</p>
</div>
<div class="post-text" itemprop="text">
<p>The placement of the condition in a comprehension has always been a point of much confusion to me as well, so I came up with a working mnemonic device.</p>
<p>If you are excluding elements from the list, <code>if</code> belongs to the loop, and goes after the <code>for</code>:</p>
<pre>
[item for item in items <b>if condition</b>]
</pre>
<p>If you are deciding between values, that's just a normal <a href="https://docs.python.org/3/reference/expressions.html#conditional-expressions" rel="nofollow noreferrer">ternary operator</a>, which appears as part of the comprehension before the <code>for</code>:</p>
<pre>
[<b>item1 if condition else item2</b> for item1, item2 in items]
</pre>
<p>Your case is clearly the first one since you are excluding elements. The test should therefore go after the <code>for</code>, with appropriate syntax fixes:</p>
<pre>
tk = [b for b in range(len(a)) <b>if (2 &lt;= a[b] &lt;= 6)</b>]
</pre>
<p>It might be more intuitive to implement the same operation using <a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow noreferrer"><code>enumerate</code></a> to get the indices instead of <a href="https://docs.python.org/3/library/stdtypes.html#range" rel="nofollow noreferrer"><code>range</code></a>:</p>
<pre><code>tk = [item for index, item in enumerate(a) if 2 &lt;= index &lt;= 6]
</code></pre>
</div>
<span class="comment-copy">I think you meant [b for b in range(len(a)) if (a[b]&gt;=2 &amp; a[b]&lt;=6)]</span>
<span class="comment-copy"><code>[b for b in range(len(a)) if a[b]&gt;=2 and a[b]&lt;=6]</code></span>
<span class="comment-copy">@Himanshu Yeah, that's what I meant. Sorry for the typo.</span>
<span class="comment-copy">I literally added that 10 seconds before you commented :-)</span>
<span class="comment-copy">Explanation: Conditionals go <i>after</i> the <code>for x in y</code> part of the list comprehension. The order is <code>[thingtoproduce for loopvar in iterable if condition]</code>, not the OP's <code>[thingtoproduce if condition for loopvar in iterable]</code>.</span>
<span class="comment-copy">This helped. Thank you so much! :)</span>
