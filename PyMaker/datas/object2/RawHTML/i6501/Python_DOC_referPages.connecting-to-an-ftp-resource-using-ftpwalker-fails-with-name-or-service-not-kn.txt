<div class="post-text" itemprop="text">
<p>I'm trying to traverse an ftp directory using <a href="https://pypi.python.org/pypi/FTPwalker" rel="nofollow noreferrer"><code>FTPwalker</code></a>, however I cannot connect.</p>
<p>The current call is being used:</p>
<pre><code>walker = ftpwalker(server_name="hostname", url="ftp://username:password@hostname")
</code></pre>
<p>However <code>walker.check_state()</code> gives:</p>
<pre><code>&gt;&gt; walker.check_state()
Find leading...
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/usr/lib/python3.4/site-packages/FTPwalker/runwalker.py", line 100, in check_state
    self.path_not_exit(False)
  File "/usr/lib/python3.4/site-packages/FTPwalker/runwalker.py", line 157, in path_not_exit
    self.m_walker.Process_dispatcher(False)
  File "/usr/lib/python3.4/site-packages/FTPwalker/main_walker.py", line 82, in Process_dispatcher
    leadings = self.find_leading_dirs(self.root)
  File "/usr/lib/python3.4/site-packages/FTPwalker/main_walker.py", line 37, in find_leading_dirs
    files, dirs = self.run_object.find_leading(top)
  File "/usr/lib/python3.4/site-packages/FTPwalker/traverse.py", line 75, in find_leading
    conn = ftplib.FTP(self.server_url)
  File "/usr/lib64/python3.4/ftplib.py", line 118, in __init__
    self.connect(host)
  File "/usr/lib64/python3.4/ftplib.py", line 153, in connect
    source_address=self.source_address)
  File "/usr/lib64/python3.4/socket.py", line 498, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
  File "/usr/lib64/python3.4/socket.py", line 537, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
socket.gaierror: [Errno -2] Name or service not known
</code></pre>
<p>Is the <code>url</code> parameter entered here in the correct format? Pinging the <code>hostname</code> works.</p>
</div>
<div class="post-text" itemprop="text">
<p>While the parameter is misleadingly named <code>url</code>, the <a href="https://pypi.org/project/FTPwalker/" rel="nofollow noreferrer">official example</a> shows pretty clearly, that the value should actually be a plain hostname:</p>
<pre><code>from FTPwalker.runwalker import ftpwalker

walker = ftpwalker("Uniprot", "ftp.uniprot.org")
walker.check_state()
</code></pre>
<hr/>
<p>In the the end, the value goes to <a href="https://docs.python.org/3/library/ftplib.html#ftplib.FTP.connect" rel="nofollow noreferrer"><code>ftplib.FTP.connect</code></a>, which takes "hostname".</p>
</div>
<span class="comment-copy">Given the above, how would you pass in the login credentials? The error is now <code>ftplib.error_perm: 530 Login incorrect.</code></span>
<span class="comment-copy">It actually looks like the <code>FTPwalker</code> supports anonymous access only.</span>
<span class="comment-copy">I've seen another function in the package, <code>FTPwalker.walker.ftp_walker</code> which seems to support passing in a <code>connection</code> - will give that a try.</span>
