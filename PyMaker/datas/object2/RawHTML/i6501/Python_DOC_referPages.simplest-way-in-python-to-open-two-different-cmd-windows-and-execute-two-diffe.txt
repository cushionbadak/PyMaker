<div class="post-text" itemprop="text">
<p>I need to run a script in python that takes weekly backups of my mongodb database. I have used task scheduler in windows 8.1 and had set the script to run on a particular weekday at a particular time. The point is that my python code needs to produce 2 instances of command line window so that in first instance it can enter "mongod" commmand that establishes the mongoserver connection and in second instance of cmd window ,"mongodump" command needs to be entered and these have to be done and accomplished in this very order only.I have used 'os' module in python and used " os.system('desired cmd command ') " but if using 'os.system' the second time to initiate the 2nd cmd instance ,it closes down the first cmd instance window and runs self(the second instance)so the desired process gets disrupted.I need to ensure that the first command 'mongod' and second command 'mongodump' are to be entered automatically in respective cmd windows from already written python code itself and not to be entered anything manually or from outside.
<strong>Things I have tried are:</strong> :
1)  </p>
<pre><code>import os  
os.system('mongod')      //this stops
os.system('mongodump')  //this starts
</code></pre>
<p>2) </p>
<pre><code>import os
os.system('mongod &amp;&amp; mongodump')  
</code></pre>
<p>//the first continues and 2nd command is 
   never reached</p>
<p>therefore I need to run 2 separate instances of cmd window as the command 'mongod' establishes the connection and nothing can be written after that in cmd window and therefore 'mongodump' command can only and needs to be executed in other cmd window. Please note that even if two instances of cmd windows can be launched but entering the mongod and mongodump commmand cannot be done manually by the user and it has to be predefined in the python code itself. </p>
</div>
<div class="post-text" itemprop="text">
<p>Looks like you're looking for an async subprocess. 
<a href="https://docs.python.org/3/library/asyncio-subprocess.html#asyncio.create_subprocess_exec" rel="nofollow noreferrer">https://docs.python.org/3/library/asyncio-subprocess.html#asyncio.create_subprocess_exec</a></p>
</div>
<div class="post-text" itemprop="text">
<p>You may be able to do this with a simple Windows .bat or .cmd script, like this:</p>
<pre><code>START /B "" mongod
TIMEOUT /T 10 /NOBREAK
mongodump
</code></pre>
<p>Just run this at the right time and it should launch both processes for you. I think the mongod process will automatically get terminated once the main script finishes (see <a href="https://superuser.com/questions/198525/how-can-i-execute-a-windows-command-line-in-background#comment1569081_591084">https://superuser.com/questions/198525/how-can-i-execute-a-windows-command-line-in-background#comment1569081_591084</a>).</p>
</div>
<span class="comment-copy">so running <code>mongodump</code> kills <code>mongod</code> when run from the same parent process but not from separate windows manually?</span>
<span class="comment-copy">I assume this is mongodump.exe and mongod.exe, in which case the problem has nothing to do with the CMD shell, and you should be using <code>subprocess.Popen</code> instead of <code>os.system</code>.</span>
