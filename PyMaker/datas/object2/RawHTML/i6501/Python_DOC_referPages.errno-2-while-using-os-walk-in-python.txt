<div class="post-text" itemprop="text">
<p>This is a script searching for files that are bigger than a specified size:</p>
<pre><code>def size_scan(folder, size=100000000):
    """Scan folder for files bigger than specified size

    folder: abspath
    size: size in bytes
    """
    flag = False

    for folder, subfolders, files in os.walk(folder):
        # skip 'anaconda3' folder
        if 'anaconda3' in folder:
            continue

        for file in files: 
            file_path = os.path.join(folder, file)
            if os.path.getsize(file_path) &gt; size:
                print(file_path, ':', os.path.getsize(file_path))
                flag = True

    if not flag:
        print('There is nothing, Cleric')
</code></pre>
<p>I get the following error message while scanning root folder in Linux:</p>
<pre><code>Traceback (most recent call last):

  File "&lt;ipython-input-123-d2865b8a190c&gt;", line 1, in &lt;module&gt;
    runfile('/home/ozramsay/Code/sizescan.py', wdir='/home/ozramsay/Code')

  File "/home/ozramsay/anaconda3/lib/python3.6/site-packages/spyder/utils/site/sitecustomize.py", line 880, in runfile
    execfile(filename, namespace)

  File "/home/ozramsay/anaconda3/lib/python3.6/site-packages/spyder/utils/site/sitecustomize.py", line 102, in execfile
    exec(compile(f.read(), filename, 'exec'), namespace)

  File "/home/ozramsay/Code/sizescan.py", line 32, in &lt;module&gt;
    size_scan('/')

  File "/home/ozramsay/Code/sizescan.py", line 25, in size_scan
    if os.path.getsize(file_path) &gt; size:

  File "/home/ozramsay/anaconda3/lib/python3.6/genericpath.py", line 50, in getsize
    return os.stat(filename).st_size

FileNotFoundError: [Errno 2] No such file or directory: '/run/udev/link.dvdrw'
</code></pre>
<p>I guessed it is because Python interpreter can not scan itself, so I tried to skip 'anaconda3' folder from the search (marked by #skip anaconda folder in the code above). However, the error message remained the same.</p>
<p>Can anyone please explain?</p>
<p>(Please let me know if such kind of questions is not allowed here and should be edited. Thank you)</p>
</div>
<div class="post-text" itemprop="text">
<p>The file python is trying get the size of with <code>os.stat(filename).st_size</code> is a broken link. A broken link is a link that has had it's target removed. It is much like an internet link that gives a 404. To fix this in your script, check if it is a file (preferred), or use a try/catch (not preferred). To check if the file is a file and not a broken link, use <a href="https://docs.python.org/2/library/os.path.html#os.path.isfile" rel="nofollow noreferrer"><code>os.path.isfile(file_path)</code></a>. Your code should look like this:</p>
<pre><code>def size_scan(folder, size=100000000):
"""Scan folder for files bigger than specified size

folder: abspath
size: size in bytes
"""
flag = False

for folder, subfolders, files in os.walk(folder):
    # skip 'anaconda3' folder
    if 'anaconda3' in folder:
        continue

    for file in files: 
        file_path = os.path.join(folder, file)
        if os.path.isfile(file_path) and (os.path.getsize(file_path) &gt; size):
            print(file_path, ':', os.path.getsize(file_path))
            flag = True

if not flag:
    print('There is nothing, Cleric')
</code></pre>
<p>So before it gets the size, it checks if the file is really there, following all links to make sure it exists. <a href="https://stackoverflow.com/questions/36484470/python-os-walk-and-symlinks">Related SO post</a>.</p>
</div>
<span class="comment-copy">Well maybe you should show us on which folder you execute this function. It looks like you're running it over some special folders (is it normal that <code>/run/udev/</code> is getting scanned too?)</span>
<span class="comment-copy"><code>/run/udev/link.dvdrw</code> is something to do with a DVD drive (maybe a symlink?).  Maybe run <a href="https://docs.python.org/3/library/os.path.html#os.path.isfile" rel="nofollow noreferrer"><code>os.path.isfile</code></a> before passing the path to <code>getsize</code></span>
<span class="comment-copy">zezollo, I execute this function on the root folder in Linux Mint: size_scan('/')</span>
<span class="comment-copy">Patrick Haugh, you are right, it has worked. Thank you very much!</span>
<span class="comment-copy">Yes, it works, thank you. And special thank for editing question!</span>
<span class="comment-copy">You're welcome! Glad to help!</span>
