<div class="post-text" itemprop="text">
<p>I'm trying to implement IPC using named pipes in Python, but there is a problem. <code>open</code> blocks the process</p>
<pre><code>import os
path = '/tmp/fifo'
os.mkfifo(path)
fifo = open(path, 'w') # never returns
</code></pre>
<p>Same with <code>open(path, 'r')</code></p>
<p>What am I doing wrong?</p>
<p>Python 3.6.1</p>
</div>
<div class="post-text" itemprop="text">
<p>Figured this out. <code>open</code> blocks until the pipe is open on the other side</p>
</div>
<div class="post-text" itemprop="text">
<p>According to <a href="https://docs.python.org/3/library/os.html#os.mkfifo" rel="nofollow noreferrer">os.mkfifo</a>, you need to use 
<code>fifo = open(path, dir_fd='w')</code></p>
</div>
<div class="post-text" itemprop="text">
<p>the function <code>os.mkfifo(path)</code> create the path is needed (if all the folder does not exists it build all the path).</p>
<p>so, you need to add the file name like this: <code>fifo = open(path + file, 'r')</code></p>
<p>Generally, FIFOs are used as rendezvous between “client” and “server” type processes: the server opens the FIFO for reading, and the client opens it for writing. <strong>Note that mkfifo() doesn’t open the FIFO — it just creates the rendezvous point</strong></p>
</div>
<span class="comment-copy">Doesn't work. <code>os.mkfifo(path, dir_fd='w')</code> throws <code>TypeError: argument should be integer or None, not str</code> and <code>dir_fd=os.O_WRONLY</code> doesn't. But the result is the same: <code>open</code> blocks forever</span>
<span class="comment-copy"><code>path + file</code> will just concatenate strings, and in my case <code>/tmp</code> defiantly exists, no need to create it. <code>os.mkfifo</code> creates the file successfully <code>ls -latrh /tmp/pipe  prw-r--r-- 1 oleg users 0 Oct  3 08:30 /tmp/pipe</code></span>
