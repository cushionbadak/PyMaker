<div class="post-text" itemprop="text">
<p>Using python fabric, how do I check if a file pattern such as <code>/foo/bar_*</code> exists remotely on a machine?<br/>
It would be useful to also get a list of those files which matched.</p>
</div>
<div class="post-text" itemprop="text">
<p>I use <a href="https://docs.python.org/3/library/glob.html" rel="nofollow noreferrer">glob</a> from the python standard library.</p>
<pre><code>import glob
for filename in glob.glob("/for/bar_*"):
    print(filename)
</code></pre>
<hr/>
<p>I just reread your question - you want to know this on the remote computer.</p>
<p>Although I can't find an API that does this for you, I have noticed a couple of ways.</p>
<ol>
<li><a href="http://docs.fabfile.org/en/1.13/api/core/operations.html#fabric.operations.get" rel="nofollow noreferrer">get</a></li>
</ol>
<p>This solution only really works if you want to have the files locally, or their size is negligable.</p>
<ol start="2">
<li><a href="http://docs.fabfile.org/en/1.13/api/core/operations.html#fabric.operations.run" rel="nofollow noreferrer">echo (via run)</a></li>
</ol>
<p>This could look something like this;</p>
<pre><code>@task
def task_name():
    glob = "/foo/bar_*"
    result = run("echo " + glob)
    if result == glob:
        print("This pattern does not match a file/folder on the target machine")
    else:
        print("This pattern matched!")
</code></pre>
<p>That solves the issue of needing to know if the file exists. However it does have problems as far as working out which files exist - as parsing it out isn't that trivial (ie, files/folders with spaces in their names). It should get you started for now though.</p>
</div>
