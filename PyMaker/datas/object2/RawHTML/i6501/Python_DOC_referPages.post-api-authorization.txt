<div class="post-text" itemprop="text">
<p>I'm beginner in python but I would like to get info data from my private account on cryptocurrency market bitbay.net. </p>
<p><a href="https://bitbay.net/pl/api-prywatne" rel="nofollow noreferrer">Api description can be found here:</a></p>
<p>My code in Python 3.5:</p>
<pre><code>import requests
import json
import hashlib
import time

hash_object = hashlib.sha512(b'public_api_xxxxxx')
apihash = hash_object.hexdigest()    
timestamp = time.time()

p = requests.post('https://bitbay.net/API/Trading/tradingApi.php', data={'API-Key':'public_api_xxxxxx','API-Hash':apihash,'Moment':timestamp, 'Method':'info' })
p.text
print(p)
</code></pre>
<p>I spend many hours to fix that but I still get: </p>
<p>Response [404]</p>
<p>Your assistance will be very much appreciated. For best answer I would like buy small beer :) Thank you in advance!</p>
</div>
<div class="post-text" itemprop="text">
<p>To perform <a href="http://php.net/manual/en/function.hash-hmac.php" rel="nofollow noreferrer"><code>hash_mac</code></a> equivalent, you can use <a href="https://docs.python.org/3/library/hmac.html" rel="nofollow noreferrer"><code>hmac</code></a> : </p>
<pre><code>apihash = hmac.new(secret, data, hashlib.sha512).hexdigest()
</code></pre>
<p>Also, from the doc, <code>API-Key</code> and <code>API-Hash</code> are headers. <code>moment</code> &amp; <code>method</code> field are url encoded in the body</p>
<p>Python2 </p>
<pre><code>import requests
import hashlib
import hmac
import time
import urllib

secret = "12345"
apiKey = "public_api_xxxxxx"

timestamp = int(time.time())

data = urllib.urlencode((('method', 'info'),('moment', timestamp)))

apihash = hmac.new(secret, data, hashlib.sha512).hexdigest()

res = requests.post('https://bitbay.net/API/Trading/tradingApi.php',
    headers={
    'API-Key':apiKey,
    'API-Hash' : apihash,
    'Content-Type' : 'application/x-www-form-urlencoded'
    },
    data=data
)

print(res)
print(res.text)
</code></pre>
<p>Python3</p>
<pre><code>import requests
import hashlib
import hmac
import time
import urllib

secret = b"12345"
apiKey = "public_api_xxxxxx"

timestamp = int(time.time())

data = urllib.parse.urlencode((('method', 'info'),('moment', timestamp)))

apihash = hmac.new(secret, data.encode('utf-8'), hashlib.sha512).hexdigest()

res = requests.post('https://bitbay.net/API/Trading/tradingApi.php',
    headers={
    'API-Key':apiKey,
    'API-Hash' : apihash,
    'Content-Type' : 'application/x-www-form-urlencoded'
    },
    data=data
)

print(res)
print(res.text)
</code></pre>
</div>
<span class="comment-copy">Thank You for help! You are the Boss :) Send me please your cryptocurrency wallet adress - I would like to buy You a beer :)</span>
<span class="comment-copy">You're welcome I'm glad I could help, you can accept / upvote the answer if you like it, that would be fine :)</span>
<span class="comment-copy">Ok. Thank You :)</span>
