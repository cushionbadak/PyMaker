<div class="post-text" itemprop="text">
<p>I have a set of tuples (set1), where each tuple is (somename1, somename2, Number). Where number indicates the times we've seen somename1, somename2.
I want to merge it with a different set (set2) where somename1, somename2 might be in the set, and update Number accordingly.
Right now, for obvious reasons, set1 &amp; set2 returns an empty set. How can I update set1 efficiently?</p>
<p>Sample data = <code>Set1 = {('soda','coca cola',5), ('chocolate','mars',13)}</code></p>
</div>
<div class="post-text" itemprop="text">
<p>You could use a Counter:</p>
<pre><code>&gt;&gt;&gt; from collections import Counter
&gt;&gt;&gt; Set1 = Counter({('soda','coca cola'): 5})
&gt;&gt;&gt; Set2 = Counter({('soda','coca cola'): 3, ('chocolate','mars'): 10})
&gt;&gt;&gt; Set1 + Set2
Counter({('soda', 'coca cola'): 8, ('chocolate', 'mars'): 10})
</code></pre>
<p>If you don't want to add keys from Set2 if they are not in Set1, you can use dict comprehension:</p>
<pre><code>&gt;&gt;&gt; Set1 = {('soda','coca cola'): 5}
&gt;&gt;&gt; Set2 = {('soda','coca cola'): 3, ('chocolate','mars'): 10}
&gt;&gt;&gt; {k: Set1[k] + Set2.get(k, 0) for k in Set1}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Here's an example if you want to use sets for input, and are just interested in the resulting data in any format (looks like I'm using <code>defaultdict</code> a lot lately):</p>
<pre><code>from itertools import chain
from collections import defaultdict

s1 = set((
    ('a', 'b', 1), ('c', 'd', 2)
))
s2 = set((
    ('a', 'b', 2), ('c', 'd', 3), ('e', 'f', 4)
))

s3 = defaultdict(int)

for name1, name2, count in chain(s1, s2):
    s3[name1, name2] += count

for (name1, name2), total_count in s3.items():
    print(name1, name2, total_count)
</code></pre>
<p>Prints:</p>
<pre><code>c d 5
e f 4
a b 3
</code></pre>
</div>
<span class="comment-copy">Can you give us a sample input/output?</span>
<span class="comment-copy">A set doesn't quite look like the ideal datatype for this. Tuples are immutable, therefore updating the number isn't easily possible, and lists don't work with sets because they are not hashable...why not use a <a href="http://docs.python.org/3/library/collections.html#collections.Counter" rel="nofollow noreferrer"><code>collections.Counter</code></a>?</span>
<span class="comment-copy">Set1 = {('soda','coca cola',5), ('chocolate','mars',13)}</span>
<span class="comment-copy">@user5188701: ​​​​​​​​​​​​​​​Please <a href="https://stackoverflow.com/posts/36181649/edit">edit</a> your question to add more info.</span>
<span class="comment-copy">Nice one, clean and concise!</span>
