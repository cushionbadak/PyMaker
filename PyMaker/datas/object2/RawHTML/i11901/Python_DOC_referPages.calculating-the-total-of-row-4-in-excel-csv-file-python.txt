<div class="post-text" itemprop="text">
<p>I cant find the total of row 4 in a csv file my code is to enter a code which is searched in a csv file which is then written to a new csv file in order for it to be printed as a receipt my problem is in the last few lines
this is my code until know:</p>
<pre><code>    import csv
try_again= "Yes"
myfile2=open("reciept.csv","a+")
while try_again =="Yes":
    found= "no"
    myfile=open("stock_file.csv","r+")
    gtin_8= input("enter the gtin-8")
    quantity= input("enter quantity wanted")
    reader=csv.reader(myfile)
    for row in reader:
        if gtin_8 == row[0]:
            description= row[1]
            unit_price= row[2]
            product_price=((float(unit_price)*(float(quantity))))
            product_price1= str(product_price)
            new_record=(gtin_8+","+description+","+quantity+","+unit_price+","+product_price1)
            myfile2.write(str(new_record))
            myfile2.write("\n")
            found="yes"

    if found=="no":
        nf="not found"
        new_record1=(gtin_8+","+nf)
        myfile2.write(new_record1)
        myfile2.write("\n")
    try_again=input("do you want to try again")
    try_again=try_again.title()
myfile2.close()
myfile3=open("reciept.csv","r+")
reader1=csv.reader(myfile3)
total_cost=0
for row in reader1:
    print (row)
    total = sum(float(r[4]) for r in csv.reader(myfile3))

print (total_cost)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You have a nested loop at the end (for loop and a list comprehension inside it) which is why it isn't working like you want it to.</p>
<p>You also define a variable named <code>total_cost</code> as <code>0</code> and never do anything with it and then just print it.</p>
<p>No nested loop is needed so this should work:</p>
<pre><code>total_cost = 0.0
for row in reader1:
    if row[1] == "not found"
        total_cost += float(row[4])
</code></pre>
<p>Other pointers:</p>
<p>There is a <a href="https://docs.python.org/3/library/csv.html#csv.writer" rel="nofollow"><code>csv.writer</code></a> too which is safer to use than just string concatenation and writing to a file.</p>
</div>
<span class="comment-copy">csv is csv ( excel doesnt matter) , your indentation is wrong</span>
<span class="comment-copy">You are setting the value for <code>total = </code> but printing <code>total_cost</code>, which you set to <code>0</code> and never change. You probably want <code>total_cost += sum(float(r[4]) for r in csv.reader(myfile3))</code></span>
<span class="comment-copy">yes that's true but even though it still does not work</span>
<span class="comment-copy">it says index out of range</span>
<span class="comment-copy">Then there is a row with not enough columns of data.</span>
<span class="comment-copy">what do u mean?</span>
<span class="comment-copy">I mean that there is at least one row that is less than 5 columns wide. We can't get data with <code>row[4]</code> if <code>row</code>'s length is too short.</span>
<span class="comment-copy">however In the file there are empty rows because if the code is not recognised it will write the code and not found only were there is no row 4</span>
