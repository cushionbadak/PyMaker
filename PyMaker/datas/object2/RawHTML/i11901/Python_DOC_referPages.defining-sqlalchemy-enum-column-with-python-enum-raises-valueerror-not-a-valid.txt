<div class="post-text" itemprop="text">
<p>I am trying to follow <a href="http://docs.sqlalchemy.org/en/latest/core/type_basics.html">this example</a> to have an enum column in a table that uses Python's <code>Enum</code> type.  I define the enum then pass it to the column as shown in the example, but I get <code>ValueError: &lt;enum 'FruitType'&gt; is not a valid Enum</code>.  How do I correctly define a SQLAlchemy enum column with a Python enum?</p>
<pre><code>from flask import Flask
from flask_sqlalchemy import SQLAlchemy
import enum

app = Flask(__name__)
db = SQLAlchemy(app)

class FruitType(enum.Enum):
    APPLE = "Crunchy apple"
    BANANA = "Sweet banana"

class MyTable(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    fruit_type = db.Column(enum.Enum(FruitType))
</code></pre>
<pre><code>File "why.py", line 32, in &lt;module&gt;
    class MyTable(db.Model):
  File "why.py", line 34, in MyTable
    fruit_type = db.Column(enum.Enum(FruitType))
  File "/usr/lib/python2.7/dist-packages/enum/__init__.py", line 330, in __call__
    return cls.__new__(cls, value)
  File "/usr/lib/python2.7/dist-packages/enum/__init__.py", line 642, in __new__
    raise ValueError("%s is not a valid %s" % (value, cls.__name__))
ValueError: &lt;enum 'FruitType'&gt; is not a valid Enum
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The column type should be <a href="http://docs.sqlalchemy.org/en/latest/core/type_basics.html#sqlalchemy.types.Enum" rel="noreferrer"><code>sqlalchemy.types.Enum</code></a>.  You're using the Python <code>Enum</code> type again, which is valid for the value but not the column type.</p>
<pre><code>class MyTable(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    fruit_type = db.Column(db.Enum(FruitType))
</code></pre>
</div>
<span class="comment-copy">This works with SQLAlchemy 1.1 and above</span>
<span class="comment-copy">It raises: TypeError: object of type 'type' has no len()</span>
<span class="comment-copy">@AmirShabani did you ever figure this out?</span>
<span class="comment-copy">@Chris I use flask sqlalchemy like this: db.Column(db.Enum("AutoService", "Insurance", "CarWash", name="service_category"))</span>
<span class="comment-copy">@AmirShabani @Chris Please note that although the column type should be <a href="http://docs.sqlalchemy.org/en/latest/core/type_basics.html#sqlalchemy.types.Enum" rel="nofollow noreferrer"><code>sqlalchemy.types.Enum</code></a>, the class which represent the enum should inherit from Python's <code>enum.Enum</code> - (<a href="https://docs.python.org/3/library/enum.html" rel="nofollow noreferrer">Enum</a> or <a href="https://pypi.org/project/enum34/" rel="nofollow noreferrer">enum34</a>) - you can see the <a href="http://docs.sqlalchemy.org/en/latest/core/type_basics.html#sqlalchemy.types.Enum" rel="nofollow noreferrer">example</a></span>
