<div class="post-text" itemprop="text">
<p>I have a python function that creates and stores a object instance in a global list and this function is called by a thread. While the thread runs the lists is filled up as it should be, but when the thread exits the list is empty and I have no idea why. Any help would be appreciated. </p>
<pre><code>    simulationResults = []
    def run(width1, height1, seed1, prob1):
       global simulationResults
       instance = Life(width1, height1, seed1, prob1)
       instance.run()
       simulationResults.append(instance)
</code></pre>
<p>this is called in my main by:</p>
<pre><code>     for i in range(1, nsims + 1):
        simulations.append(multiprocessing.Process(target=run, args=(width, height, seed, prob)))
        simulations[(len(simulations) - 1)].start()

     for i in simulations:
        i.join()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><code>multiprocessing</code> is based on processes, not threads. The important difference: Each process has a separate memory space, while threads share a common memory space. When first created, a process <em>may</em> (depending on OS, spawn method, etc.) be able to <em>read</em> the same values the parent process has, but if it writes to them, only the local values are changed, not the parent's copy. Only threads can rely on being able to access an arbitrary single shared global variable and have it behave as expected.</p>
<p>I'd suggest looking at either <code>multiprocessing.Pool</code> and its various methods to dispatch tasks and retrieve their results later, or if you must use raw <code>Process</code>es, look at the <a href="https://docs.python.org/3/library/multiprocessing.html#exchanging-objects-between-processes" rel="nofollow">various ways to exchange data between processes</a>; you can't just assign to a global variable, because globals stop being shared when the new <code>Process</code> is <code>fork</code>ed/<code>spawn</code>ed.</p>
</div>
<div class="post-text" itemprop="text">
<p>In your code you are creating new processes rather than threads. When the process is created the new process will have deep copies of the variables in the main process, but they are independent from each other. I think for your case it makes sense to use processes rather than threads because It would allow you to utilise multiple cores as opposed to thread that will be limited to a single core due to GIL. </p>
<p>You will have to use interprocess communication techniques to communicate between processes. But since in your case the processes are not persistent daemons, it would make sense to write the simulationResults into a different unique file by each process and read them back from the main process.</p>
</div>
<span class="comment-copy">You are not using <a href="https://docs.python.org/2/library/threading.html" rel="nofollow noreferrer">threads</a> but you are using different processes.  Please see <a href="https://docs.python.org/2/library/multiprocessing.html#sharing-state-between-processes" rel="nofollow noreferrer">documentation for that module</a> to see how you can exchange data between them.</span>
