<div class="post-text" itemprop="text">
<p>I have a text in my database. I send some text from xhr to my view. Function find does not find some unicode chars.
I want find selected text using just:</p>
<pre><code>text.find(selection)
</code></pre>
<p>but sometimes variable 'selection' has char like that:</p>
<pre><code>ę # in xhr unichr(281)
</code></pre>
<p>in variable 'text' there is a char:</p>
<pre><code>ę # in db has two chars unichr(101) + unichr(808)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Here <a href="https://docs.python.org/3/library/unicodedata.html#unicodedata.normalize" rel="noreferrer"><code>unicodedata.normalize</code></a> might help you.  </p>
<p>Basically if you normalize the data coming from the db, and normalize your selection to the same form, you should have a better result when using <code>str.find</code>, <code>str.__contains__</code> (i.e. <code>in</code>), <code>str.index</code>, and friends. </p>
<pre><code>&gt;&gt;&gt; u1 = chr(281)
&gt;&gt;&gt; u2 = chr(101) + chr(808)
&gt;&gt;&gt; print(u1, u2)
ę ę
&gt;&gt;&gt; u1 == u2
False
&gt;&gt;&gt; unicodedata.normalize('NFC', u2) == u1
True
</code></pre>
<p>NFC stands for the <em>Normal Form Composed</em> form.  You can read up <a href="https://en.wikipedia.org/wiki/Unicode_equivalence#Normalization" rel="noreferrer">here</a> for some description of the other possible forms.  </p>
</div>
