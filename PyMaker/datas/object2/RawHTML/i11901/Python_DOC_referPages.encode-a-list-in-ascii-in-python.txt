<div class="post-text" itemprop="text">
<p>I would like to encode a list in ASCII.</p>
<p>My list:</p>
<pre><code>data = {u'ismaster': True, u'maxWriteBatchSize': 1000, u'ok': 1.0, u'maxWireVersion': 3, u'minWireVersion': 0}
</code></pre>
<p>My goal:</p>
<pre><code>data = {'ismaster': True, 'maxWriteBatchSize': 1000, 'ok': 1.0, 'maxWireVersion': 3, 'minWireVersion': 0}
</code></pre>
<p>Currently I do this:</p>
<pre><code>&gt;&gt;&gt;data_encode = [x.encode('ascii') for x in data]
&gt;&gt;&gt;print(data_encode)
['maxWireVersion', 'ismaster', 'maxWriteBatchSize', 'ok', 'minWireVersion']
</code></pre>
<p>See <a href="http://www.kennethreitz.org/essays/convert-a-list-of-strings-to-utf-8-in-python" rel="nofollow">Website to convert a list of strings</a></p>
<p>I lost some values with this method.</p>
</div>
<div class="post-text" itemprop="text">
<p>It's because you are converting to an actual list, but you originally had a dictionary.  Just do this:</p>
<pre><code>data = {key.encode("ascii"): value for key, value in data.items()}
</code></pre>
<p>You were using a <a href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions" rel="nofollow">list comprehension</a>, but what you wanted was a <a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries" rel="nofollow">dict</a> comprehension.</p>
</div>
<div class="post-text" itemprop="text">
<p>The 'u' in front of the string values means the string has been represented as <a href="https://docs.python.org/2/howto/unicode.html" rel="nofollow">unicode</a>. It is a way to represent more characters than normal ASCII.</p>
<p>You will end up with problems if your dictionary contains special characters</p>
<pre><code>strangeKey = u'Ознакомьтесь с документацией'
</code></pre>
<p>represented as <code>u'\u041e\u0437\u043d\u0430\u043a\u043e\u043c\u044c\u0442\u0435\u0441\u044c \u0441 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0435\u0439'</code></p>
<pre><code> asciirep = strangeKey.encode("ascii")
</code></pre>
<p>will raise this error</p>
<pre><code>SyntaxError: Non-ASCII character '\xd0' in ...
</code></pre>
<p>If you still want it, but with the risk of raising a few exceptions you can use the following</p>
<ul>
<li><p>From Python 2.7 and 3 onwards, you can just use the dict comprehension syntax directly:</p>
<p><code>d = {key.encode("ascii"): value for (key, value) in data.items()}</code></p></li>
<li><p>In Python 2.6 and earlier, you need to use the dict constructor :</p>
<p><code>d = dict((key.encode("ascii"), value) for (key, value) in data.items())</code></p></li>
</ul>
</div>
<span class="comment-copy"><code>data</code> is not a <code>list</code> but a <code>dict</code></span>
<span class="comment-copy">Why do you want this?  Having your strings in Unicode (the <code>u'...'</code> prefix) is usually a good thing.</span>
<span class="comment-copy">It's to do a insert in database</span>
<span class="comment-copy">Thx you very much !</span>
