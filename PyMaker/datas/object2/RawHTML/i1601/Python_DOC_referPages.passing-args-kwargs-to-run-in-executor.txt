<div class="post-text" itemprop="text">
<p>I am trying to pass arguments to <code>run_in_executor</code> like so:</p>
<pre><code>    loop.run_in_executor(None, update_contacts, data={
        'email': email,
        'access_token': g.tokens['access_token']
    })
</code></pre>
<p>However, I get the following error:</p>
<blockquote>
<p>run_in_executor() got an unexpected keyword argument 'data'</p>
</blockquote>
<p>Is there a generic way to pass args to this function?</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>functools.partial</code>; it's a standard way to do such things, and it's specifically recommended in <a href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.run_in_executor" rel="nofollow noreferrer">the docs</a> for <code>loop.run_in_executor</code>, as well as more generally in <a href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio-pass-keywords" rel="nofollow noreferrer">the Event Loop docs</a>.</p>
<p>Here's how it might look for you:</p>
<pre><code>import functools  # at the top with the other imports

loop.run_in_executor(None, functools.partial(update_contacts, data={
    'email': email,
    'access_token': g.tokens['access_token']
}))
</code></pre>
<p>You could also do <code>from functools import partial</code>, if you like.</p>
</div>
<div class="post-text" itemprop="text">
<p>You asked for a "generic way"; the most generic answer is that you create a function for the purpose.  If the <code>data</code> you want to provide is local to the caller, you create that function inside the caller, perhaps as a lambda:</p>
<pre><code>loop.run_in_executor(None,lambda: update_contacts(data={
  'email': email,
  'access_token': g.tokens['access_token']
})
</code></pre>
<p>As given, this is not much different from the <code>functools.partial</code> answer, and (as the documentation says) it might reduce the utility of debug output, but it lets you do things like compute the <code>data</code> values on the executor and act on the return value from <code>update_contacts</code>.</p>
</div>
<span class="comment-copy">what is the definition of <code>update_contacts</code>?</span>
