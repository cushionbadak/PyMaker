<div class="post-text" itemprop="text">
<p>I am running the below code</p>
<pre><code>import datetime
d =datetime.datetime.strptime('2018-11-20T09:12:01.7511709Z', '%Y-%m-%d %H:%M:%S.%f')
</code></pre>
<p>I am getting an exception as</p>
<pre><code>ValueError("time data '2018-11-20T09:12:01.7511709Z' does not match format '%Y-%m-%d %H:%M:%S.%f'",))
</code></pre>
<p>What is wrong with my code here. please help.</p>
</div>
<div class="post-text" itemprop="text">
<p><code>%f</code> directive accepts from one to six digits, try omit last two digits of your input:</p>
<pre><code>datetime.datetime.strptime('2018-11-20T09:12:01.7511709Z'[:-2], '%Y-%m-%dT%H:%M:%S.%f')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Looks like you need to truncate your microseconds to 6 decimal places (documentation seems to support this: <a href="https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior" rel="nofollow noreferrer">https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior</a>)</p>
<p>The following worked fine:</p>
<pre><code>import datetime
d = datetime.datetime.strptime('2018-11-20T09:12:01.751171Z', '%Y-%m-%dT%H:%M:%S.%fZ')
</code></pre>
<p>If you want to correctly round your microseconds, try this:</p>
<pre><code>import datetime


time_string = '2018-11-20T09:12:01.7511709Z'
date_time, microseconds = time_string.split('.')
microseconds = microseconds[:-1]
rounding = len(microseconds) - 6
divisor = 10 ** rounding
new_micros = int(round(int(microseconds) / divisor, 0))
time_string = date_time + '.' + str(new_micros) + 'Z'
d = datetime.datetime.strptime(time_string, '%Y-%m-%dT%H:%M:%S.%fZ')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use a 3rd party library such as <a href="https://dateutil.readthedocs.io/en/stable/parser.html" rel="nofollow noreferrer"><code>dateutil</code></a>, which performs the microsecond truncation (though not rounding):</p>
<pre><code>from dateutil import parser

print(parser.parse('2018-11-20T09:12:01.7511709Z'))

datetime.datetime(2018, 11, 20, 9, 12, 1, 751170, tzinfo=tzutc())
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Also the easiest way:</p>
<pre><code>from datetime import datetime
str(datetime.now())
</code></pre>
<blockquote>
<p>'2018-11-20 14:58:05.329281'</p>
</blockquote>
</div>
<span class="comment-copy">The date comes to me as a variable which has T and Z. Its dynamic value for me. Is there a way i can convert this</span>
<span class="comment-copy">your code works but you have changed the time little bit - '2018-11-20T09:12:01.7511709Z' is my time to covert. i think i may have to truncate to make this work</span>
<span class="comment-copy">I have updated the answer to extract the microseconds, correctly round them, and the re-insert them into your format string.</span>
<span class="comment-copy">Thank you. This helps.</span>
