<div class="post-text" itemprop="text">
<p>Qt Creator 4.7.1
Based on Qt 5.11.2 (Clang 8.0 (Apple), 64 bit)</p>
<p>I'm running this in Qt.</p>
<pre><code>QProcess p;
QStringList params;
params &lt;&lt; "/Users/johan/Documents/testQt/hello.py";
p.start("python", params);
p.waitForFinished(-1);
qDebug() &lt;&lt; "finished";
QString p_stdout = p.readAll();
qDebug() &lt;&lt; p_stdout;
QString p_stderr = p.readAllStandardError();
if(!p_stderr.isEmpty())
   qDebug()&lt;&lt;"Python error:"&lt;&lt;p_stderr;
</code></pre>
<p>I at first had the same error as this: <a href="https://stackoverflow.com/questions/48242102/qt-calling-python-using-qprocess">Qt calling python using QProcess</a></p>
<pre><code>Python error: "ImportError: No module named site\r\n"  
</code></pre>
<p>And I added:</p>
<pre><code>QProcessEnvironment env = QProcessEnvironment::systemEnvironment();
env.insert("PYTHONPATH", "/Users/johan/anaconda3/lib/python3.7");
env.insert("PYTHONHOME", "/Users/johan/anaconda3/bin/python");
p.setProcessEnvironment(env);
</code></pre>
<p>I can directly run the python script from terminal with <code>python hello.py</code>. <code>/Users/johan/anaconda3/bin/python</code> is the output of <code>which python</code>. I suppose I have the correct path for PYTHONHOME, but I'm still getting error.</p>
<pre><code>Python error: "  File \"/Users/johan/anaconda3/lib/python3.7/site.py\", line 177\n    file=sys.stderr)\n        ^\nSyntaxError: invalid syntax\n"
</code></pre>
<p>now this is the same error as this: <a href="https://stackoverflow.com/questions/20555517/using-multiple-versions-of-python">Using multiple versions of Python</a></p>
<p>But adding what's suggested <code>#!python3</code> in the script didn't help. I've also tried <code>#!/Users/johan/anaconda3/bin/python</code>.</p>
<p>After searching for hours, now I really don't know how to solve this. How do I specify to run with Python 3? Any help is appreciated. </p>
<p>I guess it's probably still a path problem. Please kindly educate me what I don't understand about PATH in general. I do know PATH is where shell looks for the executable. But why are we inserting PYTHONPATH and PYTHONHOME here instead of just adding it to PATH? What are PYTHONPATH and PYTHONHOME for? (I've read <a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONHOME" rel="nofollow noreferrer">PYTHONHOME documentation</a> but I don't understand.) </p>
<p>EDIT (hello.py for testing package imports):</p>
<pre><code>import time
import sys
import os
import tensorflow as tf
import numpy as np
import time
import inspect
import cv2

def main():
    time.sleep(1)
    print(os.path)
    print(sys.version_info[0])
    print("hello")

if __name__ == '__main__':
    main()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>In <code>PYTHONPATH</code> there must be the paths of the modules(so the minimum is <code>site-packages</code>) so the solution is:</p>
<pre><code>env.insert("PYTHONPATH", "/Users/johan/anaconda3/lib/python3.7/site-packages")
</code></pre>
<p>You must also place the path of the python binary that is used:</p>
<pre><code>p.start("/Users/johan/anaconda3/bin/python", params);
</code></pre>
</div>
<span class="comment-copy">show your  .py ...</span>
<span class="comment-copy">change <code>p.start("python", params);</code> to <code>p.start("/Users/johan/anaconda3/bin/python", params);</code></span>
<span class="comment-copy"><code>#!/...</code> only serves for bash</span>
<span class="comment-copy">@eyllanesc I've added .py now it shows another error. <code>ModuleNotFoundError: No module named 'tensorflow'</code></span>
<span class="comment-copy">what is the outputs of: <code>import sys</code> <code>print(sys.path)</code> and <code>echo $PATH</code> and <code>echo $PYTHONPATH</code>?</span>
