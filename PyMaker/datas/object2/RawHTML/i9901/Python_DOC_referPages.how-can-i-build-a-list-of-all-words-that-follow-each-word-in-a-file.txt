<div class="post-text" itemprop="text">
<p>I'm trying to build a random sentence generator using markov chains, but am running into a problem when trying to a build list of words that follow each word in a file. The code I've been trying to use is:</p>
<pre><code>word_list = [spot+1 for spot in words if spot == word]
</code></pre>
<p>I have tried variations, such as:</p>
<pre><code>word_list = [words[spot+1] for spot in words if spot == word]
</code></pre>
<p>But each time, I get the error:</p>
<pre><code>TypeError: Can't convert 'int' object to str implicitly
</code></pre>
<p>How can I properly add words to a list that follow a given word? I feel like there's a glaringly obvious solution to this that I'm not thinking of.</p>
</div>
<div class="post-text" itemprop="text">
<p>The trick is to iterate over pairs, rather than individual words:</p>
<pre><code>words = ['the', 'enemy', 'of', 'my', 'enemy', 'is', 'my', 'friend']
word = 'my'

[next_word for this_word, next_word in zip(words, words[1:]) if this_word == word]
</code></pre>
<p>Result:</p>
<pre><code>['enemy', 'friend']
</code></pre>
<p>This approach relies on Python's <a href="https://docs.python.org/3/library/functions.html#zip" rel="nofollow noreferrer"><code>zip()</code></a> function, and slicing. </p>
<p><code>words[1:]</code> is a copy of <code>words</code> which misses out the first one:</p>
<pre><code>&gt;&gt;&gt; words[1:]
['enemy', 'of', 'my', 'enemy', 'is', 'my', 'friend']
</code></pre>
<p>... so that when you zip the original <code>words</code> with it, you get a list of pairs:</p>
<pre><code>&gt;&gt;&gt; list(zip(words, words[1:]))
[('The', 'enemy'),
 ('enemy', 'of'),
 ('of', 'my'),
 ('my', 'enemy'),
 ('enemy', 'is'),
 ('is', 'my'),
 ('my', 'friend')]
</code></pre>
<p>Once you've got that, your list comprehension just needs to return the second word in each pair if the first word is the one you're looking for:</p>
<pre><code>word = 'enemy'

[next_word for this_word, next_word in zip(words, words[1:]) if this_word == word]
</code></pre>
<p>Result:</p>
<pre><code>['of', 'is']
</code></pre>
</div>
<span class="comment-copy">is <code>spot</code> a string? if so, what are you trying to accomplish by adding <code>1</code> to it?</span>
<span class="comment-copy">Spot is a string and I'm adding 1 to it to get the word that follows it in the list.</span>
<span class="comment-copy">You're just telling it to add 1 to the string though, not the index of where it is in the list. so you'll have to write <code>word_list = [words[word_list.index(spot) + 1] for spot in words if spot == word]</code></span>
<span class="comment-copy">@n1c9 that won't work if <code>word</code> appears more than once in the input, because <code>index(spot)</code> will always return the index of the first occurrence.</span>
