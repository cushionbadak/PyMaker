<div class="post-text" itemprop="text">
<p>I'm getting the following error while trying to run my code. Here is a snippet:</p>
<pre><code>import time;
from socket import*
from pip._vendor.distlib.compat import raw_input

pingCount = 0
minTime = 0
maxTime = 0
counter = 0
totalTime = 0
message = 'test'
packetsLost = 0

#Sends 10 pingcounts as setup_testing_defaults
while pingCount &lt; 11:
counter +=1

#Creates a UDP Socket
clientSocket = socket(AF_INET, SOCK_DGRAM)

#Sets timeout value for each one to 1 second
#The timeout function determines how long till it expires
clientSocket.settimeout(1)

#Creating the paramaters for sendTo
#SendTo sends the ping to the socket
clientSocket.sendto(message.encode("utf-8"),('127.0.0.1',12000))    

#time() yields the current time in milliseconds
start = time.time()

#Trying to print data received from the server
try: #etc...
</code></pre>
<p>The code runs for a couple of the iterations (usually at most 3, before crashing with the error mentioned above. I'm not too sure what's happening so any suggestion would be awesome, thanks!</p>
</div>
<div class="post-text" itemprop="text">
<p>It's probably something later in the code that is reassigning <code>message</code> to a <code>bytes</code> object - perhaps you're reassigning it the data received from the <code>clientSocket</code>?  If so, the data returned the <code>clientSocket</code> is a <code>bytes</code> object and needs to be <code>decode</code>d, similarly to how you're using <code>message.encode()</code> to send text data through the client.</p>
<p>There's a pretty good explanation on the usage of <code>bytes</code> objects for IO communication - especially if you're used to the python2.x way of doing things -  <a href="https://docs.python.org/3/whatsnew/3.0.html#text-vs-data-instead-of-unicode-vs-8-bit" rel="nofollow noreferrer" title="here">here</a></p>
</div>
<span class="comment-copy">On the second or third iteration of your while loop, <code>message</code> is probably a <code>bytes</code> type. Which of course, has no encode method.</span>
<span class="comment-copy">This code works for me. Maybe it is the code after the try ?</span>
<span class="comment-copy">Voting to close based on reports that the code in question does not exhibit the error. Additionally, you have an indentation problem; the code following the <code>while</code> command needs another level of indentation to actually be contained in the <code>while</code> loop. Without modification, you code will throw a syntax error there.</span>
<span class="comment-copy">Some things to note: your raw_input seems wrong (i.e.: import from pip?)... if you're in Python 3, you should use input instead.  Also, please include the actual stack trace, just your sample partial code is not enough to diagnose it.</span>
