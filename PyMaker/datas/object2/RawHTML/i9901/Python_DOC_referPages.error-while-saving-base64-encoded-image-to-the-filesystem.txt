<div class="post-text" itemprop="text">
<p>I have tried to follow this <a href="https://stackoverflow.com/questions/2323128/convert-string-in-base64-to-image-and-save-on-filesystem-in-python">example</a> to save a base64 encoded image I receive in a HTTP request, to the filesystem:</p>
<pre><code>imgData = re.sub('^data:image/.+;base64,', '', inner_data['output']['image'])

with open("imageToSave.png", "wb") as fh:
    fh.write(base64.decodestring(imgData))
</code></pre>
<p>I have printed the string I'm trying to decode and it seems to be correct.</p>
<pre><code>/9j/4AAQSkZJRgABAQAAAQABAAD/ [...] /+bax2njPQ8daytViRZP7UQbbmGRVEg6sPf1qYK0bCnKzuf/Z
</code></pre>
<p>But I keep getting this error</p>
<pre><code>TypeError: expected bytes-like object, not str
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The <code>base64.decodestring()</code> function expects <em>bytes</em>, not a <code>str</code> object. You'll need to encode your base64 string to bytes first. Since all characters in such a string are ASCII characters, just use that codec:</p>
<pre><code>fh.write(base64.decodestring(imgData.encode('ascii')))
</code></pre>
<p>From the <a href="https://docs.python.org/3/library/base64.html#base64.decodestring" rel="nofollow noreferrer"><code>base64.decodestring()</code> documentation</a>:</p>
<blockquote>
<p>Decode the <code>bytes</code>-like object <em>s</em>, which must contain one or more lines of base64 encoded data, and return the decoded <code>bytes</code>.</p>
</blockquote>
</div>
<span class="comment-copy">Please always include the <b>full traceback</b>, not just the exception line. <i>What expression</i> throws that exception?</span>
<span class="comment-copy">That worked. Thanks!</span>
