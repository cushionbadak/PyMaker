<div class="post-text" itemprop="text">
<p>I have a list of tuples</p>
<pre><code>a = [('BC', 'CONTAINS'), ('CD', 'FREE_FROM'), ('BM', 'CONTAINS') , ('ZZ', nan), (nan, nan), (nan, 'FREE_FROM'), (nan, nan)]
</code></pre>
<p>I want a list which does not contain any nan and also does not contain element in which second element of tuple is 'FREE_FROM' such that the resulting list looks like the following:</p>
<pre><code>res = [('BC', 'CONTAINS'),  ('BM', 'CONTAINS')]
</code></pre>
<p>Currently I am doing it like this:</p>
<pre><code>res = [(x,y) for x,y in containsAllergen if (str(x,y) != ('nan', 'nan') or str(y) != 'FREE_FROM')]
</code></pre>
<p>but it is throwing the error mentioned in the subject:</p>
<pre><code>TypeError: decoding str is not supported
</code></pre>
<p>Any suggestions? Thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p>I think the error is in : </p>
<pre><code>str(x,y)
</code></pre>
<p>Beside, I think you will need the "and" operator to produce the result you need:</p>
<pre><code>res = [(x,y) for x,y in a if (str(x) != 'nan' and str(y) != 'nan' and str(y) != 'FREE_FROM')]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use the <a href="https://docs.python.org/3/reference/expressions.html#membership-test-operations" rel="nofollow noreferrer">in</a> operator to check for <code>nan</code> and use <a href="https://docs.python.org/3/library/operator.html#operator.itemgetter" rel="nofollow noreferrer">operator.itemgetter</a> to extract the second item for comparison.</p>
<pre><code>&gt;&gt;&gt; import operator
&gt;&gt;&gt; a = [('BC', 'CONTAINS'), ('CD', 'FREE_FROM'), ('BM', 'CONTAINS') , ('ZZ', nan), (nan, nan), (nan, 'FREE_FROM'), (nan, nan)]
&gt;&gt;&gt; second_item = operator.itemgetter(1)
&gt;&gt;&gt; [t for t in a if second_item(t) != 'FREE_FROM' and nan not in t]
[('BC', 'CONTAINS'), ('BM', 'CONTAINS')]
&gt;&gt;&gt; 
</code></pre>
</div>
<span class="comment-copy">What type is <code>nan</code>?</span>
