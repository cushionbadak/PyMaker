<div class="post-text" itemprop="text">
<p>I use </p>
<p><code>re.compile(r"(.+?)\1+").findall('44442(2)2(2)44')</code></p>
<p>can get </p>
<pre><code>['4','2(2)','4']
</code></pre>
<p>, but how can I get </p>
<pre><code>['4444','2(2)2(2)','44']
</code></pre>
<p>by using regular expression? </p>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>No change to your pattern needed. Just need to use to right function for the job. <code>re.findall</code> will return a list of groups if there are capturing groups in the pattern. To get the entire match, use <a href="https://docs.python.org/3/library/re.html#re.finditer" rel="nofollow noreferrer">re.finditer</a> instead, so that you can <a href="https://docs.python.org/3/library/re.html#re.match.group" rel="nofollow noreferrer">extract the full match</a> from each actual match object.</p>
<pre><code>pattern = re.compile(r"(.+?)\1+")
[match.group(0) for match in pattern.finditer('44442(2)2(2)44')]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>With minimal change to OP's regular expression:</p>
<pre><code>[m[0] for m in re.compile(r"((.+?)\2+)").findall('44442(2)2(2)44')]
</code></pre>
<p><code>findall</code> will give you the full match if there are no groups, or groups if there are some. So given that you <em>need</em> groups for your regexp to work, we simply add another group to encompass the full match, and extract it afterwards.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can do:</p>
<pre><code>[i[0] for i in re.findall(r'((\d)(?:[()]*\2*[()]*)*)', s)]
</code></pre>
<p>Here the Regex is:</p>
<pre><code>((\d)(?:[()]*\2*[()]*)*)
</code></pre>
<p>which will output a list of tuples containing the two captured groups, and we are only interest din the first one hence <code>i[0]</code>.</p>
<p><strong>Example:</strong></p>
<pre><code>In [15]: s
Out[15]: '44442(2)2(2)44'

In [16]: [i[0] for i in re.findall(r'((\d)(?:[()]*\2*[()]*)*)', s)]
Out[16]: ['4444', '2(2)2(2)', '44']
</code></pre>
</div>
<span class="comment-copy">Ooo, even better. Learn something every day :D</span>
