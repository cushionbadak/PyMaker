<div class="post-text" itemprop="text">
<p>Is there anyway to write an exception catch code that's compatible from python 2.4 to python 3?</p>
<p>Like this code:</p>
<pre><code># only works in python 2.4 to 2.7
try:
    pass
except Exception,e:
   print(e)

# only works in python 2.6 to 3.3
try:
    pass
except Exception as e:
    print(e)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Trying to write code that works in both Python 2 and Python 3 is ultimately rather futile, because of the sheer number of differences between them. Indeed, a lot of projects are now maintained in separate Python 2 and Python 3 versions as a result.</p>
<p>That said, if you're hell-bent on doing this in a super-portable way...</p>
<pre><code>import sys
try:
    ...
except Exception:
    t, e = sys.exc_info()[:2]
    print(e)
</code></pre>
</div>
<span class="comment-copy">A lot of projects maintain their code for python 2, and use <a href="http://docs.python.org/library/2to3.html" rel="nofollow noreferrer">2to3</a> to automatically convert it to python 3 as necessary.  That is usually easier than trying to write code that is compatible with both (this probably won't be the most difficult issue you come across).</span>
<span class="comment-copy">Although this won't be thread safe</span>
<span class="comment-copy">Thank you nneonneo for your answer, and thank you @gnibbler for your tip :-)</span>
<span class="comment-copy">@gnibbler: I believe it is..."The information returned is specific both to the current thread and to the current stack frame."</span>
<span class="comment-copy">If you're using <a href="https://docs.python.org/3/library/logging.html" rel="nofollow noreferrer">Logger</a> classes (and really, you should be), you don't even need to <code>import sys</code> and use inscrutable code to print your exceptions - you can just call <code>Logger.exception("message")</code> or the class method <code>logging.exception("message")</code> and the exception message and/or stack trace will be included in the logger output.</span>
