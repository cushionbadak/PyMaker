<div class="post-text" itemprop="text">
<p>I want to collect some of the cells in my iPython Notebook into a python script. However, I cannot import a function that's been added to a script with "writefile -a" magic. Here's a 4 cell notebook to replicate the problem:</p>
<p>cell 1: save a function into foo.py</p>
<pre><code>%%writefile foo.py

def some_func():
    print 42
</code></pre>
<p>cell 2: use the function from foo.py</p>
<pre><code>from foo import some_func

some_func()
</code></pre>
<p>This prints 42 succesfully.</p>
<p>cell 3: append another function to foo.py</p>
<pre><code>%%writefile foo.py -a

def other_func():
    print 43
</code></pre>
<p>cell 4: try to import other_func</p>
<pre><code>from foo import other_func

other_func()
</code></pre>
<hr/>
<blockquote>
<p>ImportError: cannot import name other_func</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>You need to <a href="https://docs.python.org/3/library/importlib.html#importlib.reload" rel="nofollow">reload</a> the module after modifying it:</p>
<pre><code>import importlib
importlib.reload(foo)
</code></pre>
<p>In general, this works better with the <code>import foo</code> form of the import statement, rather than <code>from foo import some_func</code>.  If you have a long module name, you can rename it with <code>import some_long_module as slm</code></p>
</div>
<div class="post-text" itemprop="text">
<p>IPython has a specific extension "<a href="https://ipython.org/ipython-doc/dev/config/extensions/autoreload.html" rel="nofollow">autoreload</a>" that reloads modules automatically before entering the execution of code typed at the IPython prompt.</p>
<p>It is already included in the standard IPython installation, so in your example, you only need to write:</p>
<pre><code>%load_ext autoreload
%autoreload 2
import foo
</code></pre>
<p>And then each time you call a specific function of foo, it will be dynamically reloaded before actually executing the cell code, which solves your problem.</p>
</div>
