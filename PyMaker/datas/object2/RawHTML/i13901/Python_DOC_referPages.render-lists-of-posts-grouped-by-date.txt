<div class="post-text" itemprop="text">
<p>My site has multiple posts per day.  I want to render a list of posts, but I want the posts grouped by date, not just sorted by date, so that each date has its own list of posts.</p>
<p>I send a list of posts to the template, and <code>post.posted_on</code> is the timestamp when the post was created.  How do I render the posts grouped by date?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/itertools.html#itertools.groupby" rel="nofollow"><code>itertools.groupby</code></a> to group the posts by day.  Sort the posts by <code>posted_on</code> in descending order, then use <code>groupby</code> with a key for the day.  Iterate over the groups, and iterate over the posts within each group, to build sections with lists of posts.</p>
<pre><code>from itertools import groupby
# sort posts by date descending first
# should be done with database query, but here's how otherwise
posts = sorted(posts, key=lambda: post.posted_on, reverse=True)
by_date = groupby(posts, key=post.posted_on.date)
return render_template('posts.html', by_date=by_date)
</code></pre>
<pre class="lang-html prettyprint-override"><code>{% for date, group in by_date %}&lt;div&gt;
    &lt;p&gt;{{ date.isoformat() }}&lt;/p&gt;
    {% for post in group %}&lt;div&gt;
        {{ post.title }}
        ...
    &lt;/div&gt;{% endfor %}
&lt;/div&gt;{% endfor %}
</code></pre>
</div>
