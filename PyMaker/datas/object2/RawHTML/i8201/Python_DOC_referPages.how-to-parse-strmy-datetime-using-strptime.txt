<div class="post-text" itemprop="text">
<p>This is the <a href="https://docs.python.org/3/library/datetime.html#datetime.datetime.__str__" rel="nofollow noreferrer">default string representation</a> of a datetime:</p>
<pre><code>&gt;&gt;&gt; from datetime import datetime, timezone
&gt;&gt;&gt; dt = datetime(2017, 1, 1, tzinfo=timezone.utc)
&gt;&gt;&gt; print(dt)
2017-01-01 00:00:00+00:00
</code></pre>
<p>What is the correct format string to parse that with <code>datetime.strptime</code>?  That is, what goes in place of the '???' to see the following result:</p>
<pre><code>&gt;&gt;&gt; from dateutil.parser import parse
&gt;&gt;&gt; parse(date_str) == datetime.strptime('???', date_str)
True
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Note that <code>str(d)</code> is documented as being equivalent to <a href="https://docs.python.org/3/library/datetime.html#datetime.datetime.isoformat" rel="nofollow noreferrer"><code>d.isoformat(' ')</code></a>. This starts with <code>%Y-%m-%d %H:%M:%S</code> (<code>2017-01-01 00:00:00</code>), but then:</p>
<ul>
<li>Either has nothing or <code>.%f</code> for microseconds; and</li>
<li>Either has nothing or an offset with a colon, which doesn't match <code>%z</code>.</li>
</ul>
<p><code>.strptime</code> doesn't have support for optional parts, therefore there isn't a single <code>format</code> parameter that can match all of these possible outputs, and doesn't support the colon in the offset, so some can't be handled at all.</p>
</div>
<div class="post-text" itemprop="text">
<p>It is not possible using <code>strptime</code>, as has been explained <a href="https://stackoverflow.com/a/43792693/674039">here</a>.  </p>
<p><a href="https://github.com/python/cpython/commit/0e06be836ca0d578cf9fc0c68979eb682c00f89c" rel="nofollow noreferrer">Upgrade to Python 3.7</a>, and use the <code>datetime.fromisoformat</code> method.</p>
<p>Contributed by Paul Ganssle in <a href="https://bugs.python.org/issue15873" rel="nofollow noreferrer">issue15873</a>.  </p>
</div>
