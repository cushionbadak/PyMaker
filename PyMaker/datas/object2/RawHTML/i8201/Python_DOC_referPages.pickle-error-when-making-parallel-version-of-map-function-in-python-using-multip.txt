<div class="post-text" itemprop="text">
<p>I'm following the answer on <a href="https://stackoverflow.com/questions/1704401/is-there-a-simple-process-based-parallel-map-for-python">Is there a simple process-based parallel map for python?</a> using <code>Python 3.6.1</code>.  I'm trying to use it the same exact way as I would use the regular <code>map</code> function.  Why does this happen?  How can I create a parallel <code>map</code> function for use with <code>lambda</code>? </p>
<pre><code>def map_parallel(func, iterable, n_jobs=-1):
    if n_jobs == -1:
        n_jobs = multiprocessing.cpu_count()
    pool = multiprocessing.Pool(processes=n_jobs)
    return pool.map(func, iterable)

map_parallel(lambda x: x + 3, range(100))


PicklingError: Can't pickle &lt;function &lt;lambda&gt; at 0x185284f28&gt;: attribute lookup &lt;lambda&gt; on __main__ failed
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>multiprocessing pickle objects to pass between processes. <code>lambda</code> is not serializable (See <a href="https://docs.python.org/3/library/pickle.html#what-can-be-pickled-and-unpickled" rel="nofollow noreferrer">What can be pickled and unpickled?</a>); it can't be passed between processes.</p>
<p>You need to define a function, and pass that.</p>
<pre><code>def add3(n):
    return n + 3

map_parallel(add3, range(100))
</code></pre>
<p>Or for this case, you can use <a href="https://docs.python.org/3/library/functools.html#functools.partial" rel="nofollow noreferrer"><code>functools.partial</code></a> with <a href="https://docs.python.org/3/library/operator.html#operator.add" rel="nofollow noreferrer"><code>operator.add</code></a>:</p>
<pre><code>import functools
import operator

map_parallel(functools.partial(operator.add, 3), range(100))
</code></pre>
</div>
<span class="comment-copy">Is it possible to convert <code>lambda</code> to a <code>function</code>?  I rarely ever use <code>map</code> with <code>functions</code> and use it on the fly with transforming iterables</span>
<span class="comment-copy">@O.rka, Check <a href="http://stackoverflow.com/a/25353243/2225682">this answer</a>.</span>
