<div class="post-text" itemprop="text">
<p>What is the best way to remove a tempfile? Is there a builtin method for it? For example:</p>
<pre><code>self.tempdir = tempfile.mkdtemp()
rm self.tempdir ?
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Removing a temporary <em>directory</em> is the same as removing any other directory: just call <a href="https://docs.python.org/3/library/os.html#os.rmdir" rel="nofollow"><code>os.rmdir</code></a> if you're sure you've already emptied it out (and consider it an error if it's not empty), or <a href="https://docs.python.org/3/library/shutil.html#shutil.rmtree" rel="nofollow"><code>shutil.rmtree</code></a> if not.</p>
<p>If you're using 3.2 or later, it's much simpler to just create the temporary directory with <a href="https://docs.python.org/3/library/tempfile.html#tempfile.TemporaryDirectory" rel="nofollow"><code>TemporaryDirectory</code></a> instead of <code>mkdtemp</code>. That takes care of all the fiddly edge cases, in a nicely cross-platform way, so you don't have to worry about them. (If you were creating a temporary <em>file</em>, as your question title suggests, it's even more worth using the higher-level APIs like <a href="https://docs.python.org/3/library/tempfile.html#tempfile.TemporaryFile" rel="nofollow"><code>TemporaryFile</code></a> or <a href="https://docs.python.org/3/library/tempfile.html#tempfile.NamedTemporaryFile" rel="nofollow"><code>NamedTemporaryFile</code></a>.) For example:</p>
<pre><code>with tempfile.TemporaryDirectory() as tempdir:
    do_stuff_with(tempdir)
    # deletes everything automatically at end of with
</code></pre>
<p>Or, if you can't put it inside a <code>with</code> statement:</p>
<pre><code>def make_tempdir(self):
    self.tempdir = tempfile.TemporaryDirectory()
def remove_tempdir(self):
    self.tempdir.cleanup()
</code></pre>
<p>In fact, even for 2.7 or 3.1, you might want to consider borrowing <a href="https://hg.python.org/cpython/file/3.5/Lib/tempfile.py#l767" rel="nofollow">the source to 3.5's <code>TemporaryDirectory</code></a> class and using that yourself (or looking for a backport on PyPI, if one exists).</p>
</div>
<span class="comment-copy">@BhargavRao: From <a href="https://docs.python.org/3/library/tempfile.html#tempfile.mkdtemp" rel="nofollow noreferrer">the docs</a>: "The user of <code>mkdtemp()</code> is responsible for deleting the temporary directory and its contents when done with it."</span>
<span class="comment-copy">although i up-voted,If you are using python 2.7 DO NOT consider borrowing the source to 3.5's ! It uses the finalize class that is not implemented in python 2.-.-  @abarnert please update your answer.</span>
<span class="comment-copy">@eladsilver: the finalizer is not necessary if you always use <code>TemporaryDirectory</code> with <code>with</code>-statement.</span>
<span class="comment-copy">@J.F.Sebastian TRY IT, I used it in a with statement and borrowed the function from the source code and digging in to it from errors i got it uses functions available only in python 3</span>
<span class="comment-copy">@eladsilver: obviously, you should remove the code that uses the finalizer. The code is trivial,  read it.</span>
<span class="comment-copy">OK, as I can't edit my comment, I want to address it only to people with Python average skills and below, people who are looking for a quick answer and do not want to mess around with python source code, people how prefer easy and straight forward rather then build something that you don't know which parts you use and which not. my comment does not address experts such as @J.F.Sebastian that the source code is very trivial for them as they can manipulate TemporaryDirectory function to their desire.</span>
