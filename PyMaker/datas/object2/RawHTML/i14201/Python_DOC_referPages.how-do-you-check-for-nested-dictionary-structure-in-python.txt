<div class="post-text" itemprop="text">
<p>Is there a way to ensure that a dictionary is not nested?</p>
<p>For example</p>
<p>key and value atomic</p>
<pre><code>{key1: value1, key2: value2}
</code></pre>
<p>value is not atomic</p>
<pre><code>{key1: {inner_key11: inner_value11}}
</code></pre>
<p>One way is to check the type, however there seems to be varies of other flavor of dictionary also, eg. defaultdict</p>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<p>One way is to check the type, however there seems to be varies of other flavor of dictionary also, eg. defaultdict</p>
</blockquote>
<p>This is exactly why the idiomatic way to check types is to use <a href="https://docs.python.org/3/library/functions.html#isinstance" rel="nofollow"><code>isinstance</code></a>. Since <code>defaultdict</code> is a subclass of <code>dict</code>, <code>isinstance(x, dict)</code> will be true for a <code>defaultdict</code>.</p>
<p>Also, you may want to look at <a href="https://docs.python.org/3/library/collections.abc.html" rel="nofollow"><code>collections.abc</code></a> (or <code>collections</code>, in 3.2 and earlier) and see if <code>dict</code> is really what you want to check for. If you want to catch <em>any</em> mappings, even things like a <code>blist.sorteddict</code>, you'd check <code>isinstance(x, collections.abc.Mapping)</code>. Or, if you want to catch any container at all (including sequences, sets, etc.), <code>collections.abc.Container</code>. Or maybe you want <code>collections.abc.Iterable</code>. You can read the descriptions and decide which one means "not atomic" for your use case.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can check if the value inherits from a Mapping class. Defaultdict is a type of dict, and OrderedDict directly inherits from dict.</p>
<pre><code>&gt;&gt;&gt; from collections import Mapping

&gt;&gt;&gt; d1 = {key1: value1, key2: value2}
&gt;&gt;&gt; d2 = {key1: {inner_key11: inner_value11}}

&gt;&gt;&gt; print isinstance(d1[key1], Mapping)
False
&gt;&gt;&gt; print isinstance(d2[key1], Mapping)
True
</code></pre>
</div>
<span class="comment-copy">why would you do this? if there are restrictions on the values, check those constraints (e.g.: "must be a number").</span>
<span class="comment-copy">The first question I like to ask in this sort of situation is "why do you want to do this?" The second question is "are you sure?"</span>
