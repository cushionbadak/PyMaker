<div class="post-text" itemprop="text">
<p>I need to convert a web page to XML (using Python <code>3.4.3</code>). If I write the contents of the URL to a file then I can read and parse it perfectly but if I try to read directly from the web page I get the following error in my terminal:</p>
<blockquote>
<p>File "./AnimeXML.py", line 22, in 
          xml = ElementTree.parse (xmlData)
        File "/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/xml/etree/ElementTree.py", line 1187, in parse
          tree.parse(source, parser)
        File "/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/xml/etree/ElementTree.py", line 587, in parse
          source = open(source, "rb")
      OSError: [Errno 36] File name too long:</p>
</blockquote>
<p><strong>My python code:</strong></p>
<pre><code># AnimeXML.py
#! /usr/bin/Python

# Import xml parser.
import xml.etree.ElementTree as ElementTree

# XML to parse.
sampleUrl = "http://cdn.animenewsnetwork.com/encyclopedia/api.xml?anime=16989"

# Read the xml as a file.
content = urlopen (sampleUrl)

# XML content is stored here to start working on it.
xmlData = content.readall().decode('utf-8')

# Close the file.
content.close()

# Start parsing XML.
xml = ElementTree.parse (xmlData)

# Get root of the XML file.
root = xml.getroot()

for info in root.iter("info"):
    print (info.attrib)
</code></pre>
<p>Is there any way I can fix my code so that I can read the web page directly into python without getting this error?</p>
</div>
<div class="post-text" itemprop="text">
<p>As explained in the <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#parsing-xml" rel="noreferrer">Parsing XML</a> section of the <code>ElementTree</code> docs:</p>
<blockquote>
<p>We can import this data by reading from a file:</p>
</blockquote>
<pre><code>import xml.etree.ElementTree as ET
tree = ET.parse('country_data.xml')
root = tree.getroot()
</code></pre>
<blockquote>
<p>Or directly from a string:</p>
</blockquote>
<pre><code>root = ET.fromstring(country_data_as_string)
</code></pre>
<p>You're passing the whole XML contents as a giant pathname. Your XML file is probably bigger than 2K, or whatever the maximum pathname size is for your platform, hence the error. If it weren't, you'd just get a different error about there being no directory named <code>[everything up to the first / in your XML file]</code>.</p>
<p>Just use <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.fromstring" rel="noreferrer"><code>fromstring</code></a> instead of <code>parse</code>.</p>
<p>Or, notice that <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.parse" rel="noreferrer"><code>parse</code></a> can take a file object, not just a filename. And the thing returned by <a href="https://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen" rel="noreferrer"><code>urlopen</code></a> is a file object.</p>
<hr/>
<p>Also notice the very next line in that section:</p>
<blockquote>
<p><code>fromstring()</code> parses XML from a string directly into an <code>Element</code>, which is the root element of the parsed tree. Other parsing functions may create an <code>ElementTree</code>.</p>
</blockquote>
<p>So, you don't want that <code>root = tree.getroot()</code> either.</p>
<hr/>
<p>So:</p>
<pre><code># ...
content.close()
root = ElementTree.fromstring(xmlData)
</code></pre>
</div>
<span class="comment-copy">Thanks for the answer, the problem is solved now. I'm newbie with python.</span>
<span class="comment-copy">What is the difference between using "parse" and "fromstring" ?</span>
<span class="comment-copy">@JasterTDCClan: That's explained in the docs that I both linked and quoted: <code>parse</code> takes a filename or a file, <code>fromstring</code> takes a string. I don't know how to make that any clearer.</span>
<span class="comment-copy">Thanks ^^, sorry for the problems I cause to you.</span>
