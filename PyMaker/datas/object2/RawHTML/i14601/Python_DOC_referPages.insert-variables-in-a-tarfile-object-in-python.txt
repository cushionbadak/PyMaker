<div class="post-text" itemprop="text">
<p>I want to insert some variables  in a "TarFile Object". What is the correct way? Thanks.</p>
<pre><code>import tarfile
import datetime
import time

today = datetime.date.today()
timetoday = time.strftime("%H:%M:%S")
print today, timetoday
print timetoday

dirname="notes"
dirnamefullpath='/var/log/something'


print today, timetoday, 'Creating archive:', dirname

tar = tarfile.open("/backups/files/sitebackup-pythontest-[today]-[timetoday]-[dirname].tar.gz", "w:gz")
for name in [dirnamefullpath]:
    tar.add(name)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This line:</p>
<pre><code>for name in [dirnamefullpath]:
</code></pre>
<p>â€¦ makes a list with one element, <code>dirnamefullpath</code>, then loops over that one element.</p>
<p>If you want the actual files in the directory on your filesystem whose name is <code>dirnamefullpath</code>, you have to ask the computer for those filenames, usually either using <a href="https://docs.python.org/3/library/os.html#os.listdir" rel="nofollow"><code>listdir</code></a> (if you just want direct children) or <a href="https://docs.python.org/3/library/os.html#os.walk" rel="nofollow"><code>walk</code></a> (if you want all descendents, recursively).</p>
<p>In this case, because <a href="https://docs.python.org/3/library/tarfile.html#tarfile.TarFile.add" rel="nofollow"><code>TarFile.add</code></a> knows how to recurse into directories, you probably just want the direct children. For example:</p>
<pre><code>for name in os.listdir(dirnamefullpath):
    tar.add(name)
</code></pre>
</div>
