<div class="post-text" itemprop="text">
<p>I am starting out on learning Python 3.
I am wondering how to perform a custom sort. For instance, I might want to sort a list of animals in the following manner: sort by first character ascending, then by length descending, then by alphanumeric ascending.</p>
<p>A list made up of "ant", "antelope", "zebra", "anteater" when properly sorted would become "anteater", "antelope", "ant", "zebra".</p>
<p>I have read a little on the docs but don't quite get the "key" argument to the sort method. Any examples?
PS: this isn't a College assignment question. I am just looking to play around with python a bit.</p>
<p>I learnt java a long, long time ago and might have implemented the custom sort something like the following:
</p>
<pre><code>import java.util.*;

public class sortDemo implements Comparator&lt;String&gt; {
    public static void main(String[] args) {
        ArrayList&lt;String&gt; animals = new ArrayList&lt;String&gt;();
        animals.add("ant");
        animals.add("antelope");
        animals.add("zebra");
        animals.add("anteater");

        for (String a:animals){
            System.out.println(a);
        }
        System.out.println();

        // want output to be anteater, antelope, ant, zebra following the sort
        Collections.sort(animals, new sortDemo());

        for (String a:animals){
            System.out.println(a);
        }
    }

    public int compare(String s1, String s2) {
        if (s1.charAt(0) &gt; s2.charAt(0)){
            return 1;
        } else if (s1.charAt(0) == s2.charAt(0)){
            if(s1.length() &lt; s2.length()) {
                return 1;
            } else if (s1.length() == s2.length()) {
                return s1.compareTo(s2);
            } else {
                return -1;
            }
        } else {
            return -1;
        }
    }
}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The sorting key is a function that, given a list element, returns a value that Python knows how to compare natively. For example, Python knows how to compare integers and strings.</p>
<p>Python can also compare tuples and lists that are composed of things it knows how to compare. The way tuples and lists get compared is that earlier items in the tuple or list take precedence over later values, just as you would expect.</p>
<p>In your case, you would want to make the following key function:</p>
<pre><code>lambda name: (name[0], -len(name), name)
</code></pre>
<p>Items with smaller keys always come earlier in a sorted list. Thus, a smaller initial character causes an animal to come earlier. If two names have the same initial, a longer name length causes an animal to come earlier because the negative name length is smaller. Finally, if two animals' names have the same initial and the same length, the tie is broken by lexicographic order.</p>
<p>This program demonstrates how to sort a list with the above key function:</p>
<pre><code>animals = ["ant", "antelope", "zebra", "anteater", "cod", "cat"]

animals.sort(key=lambda name: (name[0], -len(name), name))

print(animals)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The Python docs give <a href="https://docs.python.org/2/howto/sorting.html" rel="nofollow">excellent examples for <code>.sort</code> and <code>sorted()</code></a></p>
<p>That said:</p>
<pre><code>animals = ["Anteater", "Aardvark", "Eagle", "Platypus"]
sorted(animals, key=lambda animal: animal[2])
['Platypus', 'Eagle', 'Aardvark', 'Anteater']
</code></pre>
<p>The key here is the third letter of each animals name. I made the third letter the key using a lambda function <code>lambda: animal: animal[2]</code>. This lambda function allowed me to specify the third letter, because I couldn't just say <code>key=animal[2]</code>, as animal would be undefined.</p>
</div>
<span class="comment-copy">The <a href="https://docs.python.org/3/howto/sorting.html" rel="nofollow noreferrer">docs</a> are pretty straight forward. It sounds like your comparison is complexed, which means that <code>cmp_to_key</code> might be what you're looking for (search the docs).</span>
<span class="comment-copy">Nice! I never thought of using a list for such purpose, this indeed makes things much easier! By the way, you don't have to return a list, tuple will do the same trick as well!</span>
<span class="comment-copy">You're quite right. A tuple is conceptually better as a sorting key because it's immutable. I've edited my answer accordingly.</span>
