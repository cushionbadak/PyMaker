<div class="post-text" itemprop="text">
<p>I am beginner in python and the simple task ---I am doing-- fetch all the branches on git repository and print on console. </p>
<p>I see below piece of code runs fine but all time it gives me different number of branches list for the same repository,I see subprocess.popen() is non blocking so i tried to use wait() and communicate() to hold the execution but wait() is never ending the process and communicate() gives me different number of branches each time i run the code.(different than running the command on git bash)</p>
<p>the repositories may take different time to complete its execution. Any help to have listed all the branches.</p>
<pre><code>proc = subprocess.Popen(['git', 'ls-remote', '--heads' , url],
                        stdin = subprocess.PIPE,
                        stdout=subprocess.PIPE,
                        stderr=subprocess.STDOUT, shell=True)
while proc.poll() is None:
    out = proc.stdout.readline()
    print (out)
proc.communicate()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>proc = subprocess.Popen(['git', 'ls-remote', '--heads' , url],
                        stdin = subprocess.PIPE,
                        stdout=subprocess.PIPE,
                        stderr=subprocess.STDOUT, shell=True)
for out in proc.stdout:
    print (out)

proc.wait()
proc.stdout.close()
</code></pre>
</div>
