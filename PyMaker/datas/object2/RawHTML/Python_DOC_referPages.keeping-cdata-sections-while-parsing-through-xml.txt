<div class="post-text" itemprop="text">
<p>I am trying to convert existing Xml file to another xml file with adding few nodes.  But when i parse my original xml file and write it to the another xml file, it removes all the <strong>CDATA</strong> from the  output xml. How can i avoid it ?</p>
<p>Here is my code:</p>
<pre><code>tree = ET.parse(r'inputData.xml')
root = tree.getroot()
c = ET.Element("c")
c.text = "3"
root.insert(1, c)
tree.write("outputData.xml")
</code></pre>
<p>This is my input XML </p>
<pre><code>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE Map[]&gt;
&lt;Map srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over&amp;quot; background-color=&amp;quot;rgba(0, 0, 0, 0)&amp;quot; maximum-extent=&amp;quot;-20037508.34,-20037508.34,20037508.34,20037508.34"&gt;    
&lt;Style filter-mode="first" name="boundary"&gt;
        &lt;Rule&gt;
          &lt;PolygonSymbolizer fill="#000000" fill-opacity="1" /&gt;
        &lt;/Rule&gt;
      &lt;/Style&gt;
      &lt;Layer name="boundary" srs="+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"&gt;
        &lt;StyleName&gt;boundary&lt;/StyleName&gt;
        &lt;Datasource&gt;
          &lt;Parameter name="type"&gt;&lt;![CDATA[postgis]]&gt;&lt;/Parameter&gt;
          &lt;Parameter name="table"&gt;&lt;![CDATA[("select * from tbl") as path]]&gt;&lt;/Parameter&gt;
          &lt;Parameter name="key_field"&gt;&lt;![CDATA[gid]]&gt;&lt;/Parameter&gt;
          &lt;Parameter name="geometry_field"&gt;&lt;![CDATA[geom]]&gt;&lt;/Parameter&gt;
          &lt;Parameter name="extent_cache"&gt;&lt;![CDATA[auto]]&gt;&lt;/Parameter&gt;
          &lt;Parameter name="dbname"&gt;&lt;![CDATA[centralized2]]&gt;&lt;/Parameter&gt;
          &lt;Parameter name="host"&gt;&lt;![CDATA[localhost]]&gt;&lt;/Parameter&gt;
          &lt;Parameter name="port"&gt;&lt;![CDATA[5433]]&gt;&lt;/Parameter&gt;
          &lt;Parameter name="user"&gt;&lt;![CDATA[postgres]]&gt;&lt;/Parameter&gt;
          &lt;Parameter name="password"&gt;&lt;![CDATA[mysecretpassword]]&gt;&lt;/Parameter&gt;
        &lt;/Datasource&gt;
      &lt;/Layer&gt;
&lt;/Map&gt;
</code></pre>
<p>On creating new XML all CDATA are removed. </p>
</div>
<div class="post-text" itemprop="text">
<p>If you use <a href="https://pypi.org/project/lxml/" rel="nofollow noreferrer">lxml</a>, you can specify a parser that keeps CDATA:</p>
<pre><code>import lxml.etree

file_name = r'inputData.xml'
parser = lxml.etree.XMLParser(strip_cdata=False)
tree = lxml.etree.parse(file_name, parser)
root = tree.getroot()
c = lxml.etree.Element("c")
c.text = "3"
root.insert(1, c)
tree.write("outputData.xml")
</code></pre>
</div>
<span class="comment-copy">Is there any solution with ElementTree for it ?</span>
<span class="comment-copy">I don't know of a solution with the default <code>xml</code> library. <code>lxml.etree</code> is a replacement for <code>xml.etree.ElementTree</code>. See also <a href="https://stackoverflow.com/questions/174890/how-to-output-cdata-using-elementtree">here</a>.</span>
<span class="comment-copy">can you share the complete solution i.e. adding new node in the parsed tree and at a partiucular position and writing it to another xml file ?</span>
<span class="comment-copy">Both adding and writing should be identical; you just replace <code>xml.etree.ElementTree</code> with <code>lxml.etree</code>.</span>
<span class="comment-copy">Okay, i figured that out.</span>
