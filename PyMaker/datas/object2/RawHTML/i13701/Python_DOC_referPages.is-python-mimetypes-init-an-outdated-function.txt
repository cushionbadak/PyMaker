<div class="post-text" itemprop="text">
<p>I'm struggling to understand what the init() function does in the python mimetypes package.  Is it an outdated function that isn't needed in more recent versions of python?</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/mimetypes.html#mimetypes.init" rel="nofollow"><code>mimetypes.init()</code></a> is useful if you want to add MIME type / extension mappings beyond the default. If you don't need to do that, then there's no need to call <code>mimetypes.init()</code>; just use the utility functions normally, and they'll call it themselves if necessary. If you <em>do</em> need to do that, aside from <code>mimetypes.init()</code> there's also <a href="https://docs.python.org/3/library/mimetypes.html#mimetypes.read_mime_types" rel="nofollow"><code>mimetypes.read_mime_types()</code></a> and <a href="https://docs.python.org/3/library/mimetypes.html#mimetypes.add_type" rel="nofollow"><code>mimetypes.add_type()</code></a>.</p>
<p>This applies to Python 2 and 3.</p>
</div>
<div class="post-text" itemprop="text">
<p>According to the <a href="https://docs.python.org/2/library/mimetypes.html#mimetypes.init" rel="nofollow"><code>mimetypes</code> module documentation</a>:</p>
<blockquote>
<p>The functions described below provide the primary interface for this
  module. If the module has not been initialized, they will call init()
  if they rely on the information init() sets up.</p>
</blockquote>
<hr/>
<blockquote>
<p><strong><code>mimetypes.init(files=None)</code></strong></p>
<p>Initialize the internal data structures. If given, files must be a
  sequence of file names which should be used to augment the default
  type map. If omitted, the file names to use are taken from knownfiles;
  on Windows, the current registry settings are loaded. Each file named
  in files or knownfiles takes precedence over those named before it.
  Calling init() repeatedly is allowed.</p>
<p>Specifying an empty list for files will prevent the system defaults
  from being applied: only the well-known values will be present from a
  built-in list.</p>
</blockquote>
<p>It's there both in <a href="https://docs.python.org/2/library/mimetypes.html#mimetypes.init" rel="nofollow">Python 2.7</a> and <a href="https://docs.python.org/3/library/mimetypes.html#mimetypes.init" rel="nofollow">Python 3.x</a>.</p>
</div>
<span class="comment-copy">Thank you, that is helpful.  Although I am still struggling to see when it should be used.  For example I seem to have no trouble adding types via <code>read_mime_types()</code> and <code>add_type</code> without ever calling <code>init()</code></span>
<span class="comment-copy"><code>init()</code> is for initializing the <code>mimetypes</code> cache from type map files. <code>read_mime_types()</code> will just return a <code>dict</code> containing the mappings in a type map file, without adding it to the <code>mimetypes</code> cache. <code>add_type()</code> lets you add a single mapping to the <code>mimetypes</code> cache.</span>
<span class="comment-copy">There's also the <a href="https://docs.python.org/3/library/mimetypes.html#mimetypes-objects" rel="nofollow noreferrer"><code>MimeTypes</code></a> class, which has a similar interface to the <code>mimetypes</code> module, but lets you have more than one MIME-type database in your program.</span>
<span class="comment-copy">How do I construct a type map file so that it can be used by init?  For example: <code>with open("input.MAP", "w") as f: f.write("""text/new", ".new""")</code> <code>init(input.MAP)</code></span>
<span class="comment-copy">@Michael, but for future reference, the file format is very simple though; each line is just <code>mimetype ext1 ext2 ext3 # optional comment</code>, with any number of extensions; you can also have <code># comments</code> on their own line. <a href="https://hg.python.org/cpython/file/3.4/Lib/mimetypes.py#l205" rel="nofollow noreferrer">Here's the code for <code>readfp()</code></a>, the function the <code>mimetypes</code> module uses to parse files.</span>
<span class="comment-copy">So is there any reason to call init() yourself? or is it just going to get called automatically whenever it's needed?</span>
<span class="comment-copy">@Michael, You don't need to bother to call it yourself unless you want to set up mimetype from your own mime type file.</span>
