<div class="post-text" itemprop="text">
<p>I want to output colored text completly aligned to the right in the terminal (like in this screenshot of pacman (<a href="https://wiki.archlinux.org/index.php/Pacman" rel="nofollow noreferrer">packet manager of the arch linux distribution</a>)(not colored)) <a href="https://i.stack.imgur.com/9yhJ5.jpg" rel="nofollow noreferrer"><img alt="pacman text aligned to the right" src="https://i.stack.imgur.com/9yhJ5.jpg"/></a></p>
<p>Currently I'm using <code>format</code>:</p>
<pre><code>import shutil
left = "foo"
right = "bar"
width = shutil.get_terminal_size().columns
template = "{left:30}{right:{width}}".format(left=left, right=right, width=width-30)
click.echo(template)
# click.echo works just like print with some additional features
</code></pre>
<p>This works great until I add colors via ANSI escape codes:</p>
<pre><code>left = click.style("foo", fg="red")
right = click.style("bar", fg="green")
# click.style just adds ANSI codes for colors and bold etc.
</code></pre>
<p>Which looks like this: <a href="https://i.stack.imgur.com/z69nE.jpg" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/z69nE.jpg"/></a></p>
<p>I.e. the right side is not completly right aligned. Which is "right", because <code>right</code> is actually <code>\\x1b[32mbar\\x1b[0m</code> which of course has a higher lenght than <code>bar</code> and thus needs less spaces to be right aligned. Until the terminal gets the text and only displays <code>bar</code> (with color).</p>
<p>Am I missing anything in the python std lib or <a href="http://click.pocoo.org/4/" rel="nofollow noreferrer">click</a>? Or is there a simple library that deals with terminal colors and alignment that could help me? Or is there a simple solution to this problem?</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="http://click.pocoo.org/4/" rel="nofollow">click</a>'s documentation does not mention alignment (which is why you are using python's built-in <a href="https://docs.python.org/2/library/string.html" rel="nofollow">string</a> class).  You could stay within the current set of interfaces by telling your script to remember the lengths of the strings before calling <code>click.style</code>, and adding the difference to the width used for the format call.  (This would not work as well if you were centering text).</p>
<p>There are perhaps other libraries, but you could use the <a href="https://docs.python.org/2/library/curses.html" rel="nofollow">curses</a> interface with the <a href="https://docs.python.org/2/library/curses.html#curses.filter" rel="nofollow"><code>filter</code></a> function to draw single-line displays.</p>
</div>
<div class="post-text" itemprop="text">
<p>First, I want to figure out that <code>click</code> provide a way to get the terminal size: <code>click.get_terminal_size</code>, the documentation is <a href="http://click.pocoo.org/5/api/#click.get_terminal_size" rel="nofollow">here</a></p>
<pre><code>&gt;&gt;&gt; import click
&gt;&gt;&gt; click.get_terminal_size()
&gt;&gt;&gt; (66, 24)  # (width, height)
</code></pre>
<p>And my solution, should works even you resize the terminal:</p>
<pre><code>width = click.get_terminal_size()[0]
left = click.style("foo", fg="red")
right = click.style("bar", fg="green")
print "{0:}{1:&gt;{2}}".format(left, right, width+6)
</code></pre>
<p>Since <code>right</code> actually is <code>\x1b[32mbar\x1b[0m</code>, we increase the width by hand to avoid the problem.</p>
<p>Edit: <a href="https://pyformat.info/" rel="nofollow">PyFormat</a> is useful for me when do string format in python. It helps me understand string formating. Hope it will help you.</p>
</div>
<span class="comment-copy">AttributeError: 'shutil' object has no attribute 'get_terminal_size'</span>
<span class="comment-copy">@xApple you are probably on python2, since version 3.3 shutil has the <a href="https://docs.python.org/3/library/shutil.html#shutil.get_terminal_size" rel="nofollow noreferrer"><code>get_terminal_size</code></a>.</span>
<span class="comment-copy">Well the question was tagged with just "python" and not "python3". The 2 series is still the default when unspecified IMO.</span>
<span class="comment-copy">Sorry, i talked about the packet manager of the arch linux distribution, named <a href="https://wiki.archlinux.org/index.php/Pacman" rel="nofollow noreferrer">pacman</a>.</span>
<span class="comment-copy">Is the "size" of the ascii color codes always 6? What is with bold text or multiple colors?</span>
<span class="comment-copy">@syntonym It seems that with bg or fg or bold, <code>+6</code> still works.</span>
<span class="comment-copy">bold <b>or</b> fg <b>or</b> bg works great. Unfortunately something like <code>right = click.style("bar", fg="red", bg="green", bold=True)</code> will not work (because in that case it should be +3*6. Somethinig like <code>right = click.style("foo", fg="red") + " " + click.style("bar", fg="green")</code> will also not work.</span>
<span class="comment-copy">Ah, you're right, currently I have no idea for how to solve this :(</span>
