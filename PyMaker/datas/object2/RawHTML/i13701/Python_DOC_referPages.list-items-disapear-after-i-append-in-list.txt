<div class="post-text" itemprop="text">
<p>I simplify the list for better understanding.
I have a list that dynamicly change (let say):</p>
<pre><code>recPkt = [10, 1, 38, 64]
</code></pre>
<p>And want to check if list match with some list inside a list (like the one bellow). This List of lists is read from txt file. </p>
<pre><code>mDdata = [[10, 1, 37, 6], '|', [10, 1, 37, 64], '|', [10, 1, 37, 45], '|', [10, 1, 37, 51]]
</code></pre>
<p>If list is not inside I want to append it to list of lists (mDdata). </p>
<p>My problem is that when I append. The updated list is not saved correctly. It is eather all lists inside list are the same, only last list is diffrent or  the empty lists gets appended (depending where I put <code>pcktLst [:] = []</code> )</p>
<pre><code>if isDev == 1: #device is on list
    devdata = []
    devdata [:] = []
    pcktLst = []
    pcktLst [:] = []
    ind = myReadList.index(devAddr+"-END"+"--------------------------------------------")
    devdata = myReadList [iJ + 10: ind] 
    devdata = str(devdata)
    x = devdata.find("(")
    y = devdata.find(")")

    devdata = devdata[(x+1):(y)]
    devdata = devdata.split('|')

    mDdata = []
    mDdata [:] = []
    s = 0
    devLst = []
    devLst [:] = []
    dd = readDtoL(devdata) #returns list of list of existing data in txt file

    count = 0


    for eaItm in dd:
        eaItm = eaItm.replace("[","")
        eaItm = eaItm.replace("]","")
        eaItm = eaItm.split(", ")

        pcktLst [:] = []
        print eaItm
        print dd
        for eaNumb in eaItm:
            print  eaNumb
            eaNumb = int(eaNumb)
            pcktLst.append(eaNumb)

        devLst =  pcktLst
        if count == 0 :
            mDdata.append(devLst)
            print mDdata

        elif count &gt; 0:
            mDdata.append("|")
            mDdata.append(devLst)
            print "Count"
            print mDdata
        count+=1
        pcktLst [:] = []

    bla = []
    bla [:] = []
    for eNumb in recPkt:
        #print  eNumb
        eNumb = int(eNumb)
        bla.append(eNumb)

    print bla
    #print mDdata
    if (bla in mDdata) == False:
        mDdata.append("|")
        mDdata.append(bla)
    print "TOLE JE PO APPEND"
    print mDdata
</code></pre>
<p>My best guess  is that I should have some temp. variable or change list to tuple.</p>
</div>
<div class="post-text" itemprop="text">
<p>I believe the part which is causing your issue is -</p>
<pre><code>devLst =  pcktLst
if count == 0 :
    mDdata.append(devLst)
    print mDdata

elif count &gt; 0:
    mDdata.append("|")
    mDdata.append(devLst)
    print "Count"
    print mDdata
count+=1
pcktLst [:] = []
</code></pre>
<p>When you do -</p>
<pre><code>devLst = pcktLst
</code></pre>
<p>You are just assigning the reference of <code>pcktLst</code> to <code>devLst</code>, they both refer to the same list. And when you do - <code>mDdata.append(devLst)</code> - you are appending that list reference inside the list <code>mDdata</code>.</p>
<p>Then when you do -</p>
<pre><code>pcktLst [:] = []
</code></pre>
<p>This inplace clears the list referenced by <code>pcktLst</code> , which is also the list <code>devLst</code> as well as the lsit you just appended to <code>mDdata</code> . You should not be doing that . A very short Example to show this behavior -</p>
<pre><code>&gt;&gt;&gt; a = [1,2]
&gt;&gt;&gt; b = a
&gt;&gt;&gt; c = []
&gt;&gt;&gt; c.append(a)
&gt;&gt;&gt; c
[[1, 2]]
&gt;&gt;&gt; b
[1, 2]
&gt;&gt;&gt; a
[1, 2]
&gt;&gt;&gt; a[:] = []
&gt;&gt;&gt; a
[]
&gt;&gt;&gt; b
[]
&gt;&gt;&gt; c
[[]]
</code></pre>
<p>I am guessing you have some kind of wrong understanding of <code>[:]</code> , when the slicing is used on the left side of assignment operator, you are asking python to mutate the list inplace, this would reflect in all names which <em>refer</em> to the list. You should use this unless you really need to mutate inplace, and I do not see any need for that. You can just do -</p>
<pre><code>pcktLst = []
</code></pre>
<p>This would cause <code>pcktList</code> point to a new list, without causing any issues to the list that it previously pointed to. You should use it like this everywhere.</p>
<hr/>
<p>Also, when you do -</p>
<pre><code>mDdata = []
mDdata [:] = []
s = 0
devLst = []
devLst [:] = []
</code></pre>
<p>This does not do any benefit, you can just write -</p>
<pre><code>mDdata = []
s = 0
devLst = []
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use the <a href="https://docs.python.org/3/library/functions.html?highlight=all#all" rel="nofollow"><strong><code>all</code></strong></a> function and with the <a href="https://docs.python.org/3/library/stdtypes.html#set.symmetric_difference" rel="nofollow"><strong><code>symmetric_difference (^)</code></strong></a> method to check if your list contains exactly the same elements with any sub-list in <code>mDdata</code>.</p>
<pre><code>&gt;&gt;&gt; if all(set(recPkt) ^ set(el) for el in mDdata if isinstance(el, list)):
...     mDdata.append('|')
...     mDdata.append(recPkt)
... 
&gt;&gt;&gt; mDdata
[[10, 1, 37, 6], '|', [10, 1, 37, 64], '|', [10, 1, 37, 45], '|', [10, 1, 37, 51], '|', [10, 1, 38, 64]]
</code></pre>
</div>
<span class="comment-copy">Sounds like your code would be simpler if you used a <code>set</code> of tuples rather than a list of lists - this would automatically prevent duplicate entries</span>
<span class="comment-copy">It seems like this code could be much smaller and more readable. Can you paste an example file that you'd be reading from, and your desired output?</span>
<span class="comment-copy"><code>for eNumb in recPkt:</code> ... I don't see <code>recPkt</code> anywhere? Did I miss it?</span>
<span class="comment-copy"><code>pcktLst [:] = []</code> creates empty list... when you append empty list, well, you get empty list appended - isn't that the problem?</span>
<span class="comment-copy">There's no need for all the <code>some_list = []; some_list[:] = []</code>. Just do <code>some_list = []</code>.</span>
<span class="comment-copy">Thanks for explanation,will check</span>
<span class="comment-copy">@alphiii Also, If the answer was helpful to you and answer your question satisfactorily , I would like to advice you to accept the answer (by clicking on the tick mark on the left side of the answer) , that would be helpful to the community.</span>
<span class="comment-copy">Thanks it works now.</span>
<span class="comment-copy">@alphiii glad to have been of help!</span>
