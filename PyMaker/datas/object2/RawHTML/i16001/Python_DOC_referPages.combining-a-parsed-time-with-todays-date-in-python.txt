<div class="post-text" itemprop="text">
<p>This should be easy, but as ever Python's wildly overcomplicated datetime mess is making simple things complicated...</p>
<p>So I've got a time string in HH:MM format (eg. '09:30'), which I'd like to turn into a datetime with today's date.  Unfortunately the default date is Jan 1 1900:</p>
<pre><code>&gt;&gt;&gt; datetime.datetime.strptime(time_str, "%H:%M")
datetime.datetime(1900, 1, 1, 9, 50)
</code></pre>
<p><a href="https://docs.python.org/2/library/datetime.html#datetime.datetime.combine" rel="noreferrer">datetime.combine</a> looks like it's meant exactly for this, but I'll be darned if I can figure out how to get the time parsed so it'll accept it:</p>
<pre><code>now = datetime.datetime.now()
&gt;&gt;&gt; datetime.datetime.combine(now, time.strptime('09:30', '%H:%M'))
TypeError: combine() argument 2 must be datetime.time, not time.struct_time

&gt;&gt;&gt; datetime.datetime.combine(now, datetime.datetime.strptime('09:30', '%H:%M'))
TypeError: combine() argument 2 must be datetime.time, not datetime.datetime

&gt;&gt;&gt; datetime.datetime.combine(now, datetime.time.strptime('09:30', '%H:%M'))
AttributeError: type object 'datetime.time' has no attribute 'strptime'
</code></pre>
<p>This monstrosity works...</p>
<pre><code>&gt;&gt;&gt; datetime.datetime.combine(now,
    datetime.time(*(time.strptime('09:30', '%H:%M')[3:6])))
datetime.datetime(2014, 9, 23, 9, 30)
</code></pre>
<p>...but there <strong>must</strong> be a better way to do that...!?</p>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://docs.python.org/3/library/datetime.html#datetime.datetime.combine">function signature</a> says:</p>
<pre><code>datetime.combine(date, time)
</code></pre>
<p>so pass a <code>datetime.date</code> object as the first argument, and a <code>datetime.time</code> object as the second argument:</p>
<pre><code>&gt;&gt;&gt; import datetime as dt
&gt;&gt;&gt; today = dt.date.today()
&gt;&gt;&gt; time = dt.datetime.strptime('09:30', '%H:%M').time()
&gt;&gt;&gt; dt.datetime.combine(today, time)
datetime.datetime(2014, 9, 23, 9, 30)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><code>pip install python-dateutil</code></p>
<pre><code>&gt;&gt;&gt; from dateutil import parser as dt_parser
&gt;&gt;&gt; dt_parser.parse('07:20')
datetime.datetime(2016, 11, 25, 7, 20)
</code></pre>
<p><a href="https://dateutil.readthedocs.io/en/stable/parser.html" rel="nofollow noreferrer">https://dateutil.readthedocs.io/en/stable/parser.html</a></p>
</div>
