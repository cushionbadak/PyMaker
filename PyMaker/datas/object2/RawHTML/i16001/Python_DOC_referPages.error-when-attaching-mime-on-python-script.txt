<div class="post-text" itemprop="text">
<p>The purpose of this script is to listen on serial port and send an email with a ip camera picture which is retrieved when its triggered.  Here is what I have so far with error.</p>
<p>`     import time
     import serial
     from email.MIMEMultipart import MIMEMultipart
     from email.MIMEText import MIMEText
     from email.MIMEImage import MIMEImage
     import smtplib
     import datetime
     import urllib</p>
<pre><code>TO = '111111111@mms.att.net'
GMAIL_USER = 'email@gmail.com'
GMAIL_PASS = 'password'

SUBJECT = 'Intrusion= NODE 18'
TEXT = 'MOVEMENT'

ser = serial.Serial('/dev/tty.usbserial-DA00S0U6', 115200)

def send_email():
urllib.urlretrieve ("http://&lt;IPADDRESS&gt;/snapshot/view4.jpg","view4.jpg")
print("Sending Email")
print str(datetime.datetime.now())
smtpserver = smtplib.SMTP("smtp.gmail.com",587)
smtpserver.ehlo()
smtpserver.starttls()
smtpserver.ehlo
smtpserver.login(GMAIL_USER, GMAIL_PASS)
header = 'To:' + TO + '\n' + 'From: ' + GMAIL_USER
header = header + '\n' + 'Subject:' + SUBJECT + '\n'
print header
msg = MIMEMultipart() + header + '\n' + TEXT + ' \n\n'
msg.attach(MIMEImage(file("view4.jpg").read()))
smtpserver.sendmail(GMAIL_USER, TO, msg)
smtpserver.close()



 while True:
 message = ser.readline()
 print(message)
 if "[18] MOTION" in message :
     send_email()

 time.sleep(0.5)`
</code></pre>
<p>ERROR:===</p>
<p><code>Traceback (most recent call last):
  File "motion3.py", line 58, in &lt;module&gt;
    send_email()
  File "motion3.py", line 32, in send_email
    msg = MIMEMultipart() + header + '\n' + TEXT + ' \n\n'
TypeError: unsupported operand type(s) for +: 'instance' and 'str'</code></p>
</div>
<div class="post-text" itemprop="text">
<p>In future, <strong>please</strong> make sure that the code you post is indented properly!</p>
<p>You're not using the <code>MIMEMultipart</code> class properly. Please see the <a href="https://docs.python.org/3/library/email-examples.html" rel="nofollow">email: Examples</a> in the Python docs; the 3rd example shows the proper usage of <code>MIMEMultipart</code>.</p>
<p>The error message is saying that you are trying to add together a new class instance <code>MIMEMultipart()</code> and a string <code>header</code>, and you can't do that!</p>
<p>There may be logic errors in your code, but I haven't looked very closely at it - it's just too painful trying to read badly-indented Python. :(</p>
</div>
