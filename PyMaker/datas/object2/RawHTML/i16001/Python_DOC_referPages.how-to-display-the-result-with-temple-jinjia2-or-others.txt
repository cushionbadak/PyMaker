<div class="post-text" itemprop="text">
<pre><code>import sqlite3,os
db=r'F:\workspace\china\data\china.sqlite'
con=sqlite3.connect(db)
cur=con.cursor()
res=cur.execute('select 代码,所属行业,注册资本,雇员人数,管理人员人数 from profile limit 20').fetchall()
for row in res:
    print(row)
</code></pre>
<p>('600000', '银行', '187亿', 39340.0, 30.0)<br/>
('600004', '民航机场', '11.5亿', 4499.0, 23.0)<br/>
('600005', '钢铁行业', '101亿', 38857.0, 24.0)<br/>
('600006', '汽车行业', '20.0亿', 10290.0, 20.0)<br/>
('600007', '房地产', '10.1亿', 2332.0, 19.0)<br/>
('600008', '公用事业', '22.0亿', 6515.0, 20.0)<br/>
('600009', '民航机场', '19.3亿', 5472.0, 18.0)<br/>
('600010', '钢铁行业', '80.0亿', 31389.0, 19.0)<br/>
('600011', '电力行业', '141亿', 37729.0, 29.0)<br/>
('600012', '高速公路', '16.6亿', 2106.0, 14.0)<br/>
('600015', '银行', '89.0亿', 25200.0, 34.0)<br/>
('600016', '银行', '340亿', 54927.0, 32.0)<br/>
('600017', '港口水运', '30.8亿', 5340.0, 21.0)<br/>
('600018', '港口水运', '228亿', 19842.0, 20.0)<br/>
('600019', '钢铁行业', '165亿', 37487.0, 23.0)<br/>
('600020', '高速公路', '22.5亿', 2959.0, 32.0)<br/>
('600021', '电力行业', '21.4亿', 6673.0, 22.0)<br/>
('600022', '钢铁行业', '64.4亿', 31738.0, 20.0)<br/>
('600023', '电力行业', '118亿', 10142.0, 14.0)<br/>
('600026', '港口水运', '34.0亿', 7536.0, 21.0)  </p>
<p>Now i want to display the output in html table.</p>
<pre><code>html_str='&lt;table border=1&gt;'
for row in res:
    html_str=html_str+'&lt;tr&gt;'
    for col in row:
        html_str=html_str+'&lt;td&gt;'+str(col)
        html_str=html_str+'&lt;/td&gt;'
    html_str=html_str+'&lt;/tr&gt;'

html_str=html_str+'&lt;/table&gt;'
myhtml=open('f:\\test.html','w')
myhtml.write(html_str)
myhtml.close()
os.system('"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" f:\\test.html')
</code></pre>
<p>I want to improve my code<br/>
1.to simplify the creation of html file.<br/>
2.it is stupid to open the test.html file with<br/>
<code>os.system('"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" f:\\test.html')</code></p>
<p>How can i display it with temple jinjia2 more elegantly?</p>
</div>
<div class="post-text" itemprop="text">
<p>Make a template with <a href="http://jinja.pocoo.org/docs/dev/api/#jinja2.Template" rel="nofollow"><code>jinja2.Template</code></a>:</p>
<pre><code>import jinja2

template = jinja2.Template('''
&lt;table border=1&gt;
{% for row in res %}
    &lt;tr&gt;
    {% for col in row -%}
        &lt;td&gt;{{ col|replace('\s', ':1,7&gt;') }}&lt;/td&gt;
    {% endfor %}
    &lt;/tr&gt;
{% endfor %}
&lt;/table&gt;
''')
</code></pre>
<p>Render the template with <a href="http://jinja.pocoo.org/docs/dev/api/#jinja2.Template.render" rel="nofollow"><code>jinja2.Template.render</code></a> (with <code>res</code> passed), then write it to file:</p>
<pre><code>with open('test.html', 'w') as f:
    f.write(template.render(res=res))
</code></pre>
<p>To open the file in browser, use <a href="https://docs.python.org/3/library/webbrowser.html#webbrowser.open" rel="nofollow"><code>webbrowser.open</code></a> (It will use the default web browser):</p>
<pre><code>import webbrowser
webbrowser.open('test.html')
</code></pre>
</div>
