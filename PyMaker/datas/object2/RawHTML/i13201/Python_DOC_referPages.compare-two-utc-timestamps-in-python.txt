<div class="post-text" itemprop="text">
<p>My data has a UTC timestamp field as a string format(e.g '1426402510'). I need to compare this field to the current time and emit the duration in seconds. I am not sure how to convert this string into a proper datetime format for conversion - my attempts at using the different datetime methods in Python yielded errors, so I would appreciate your help. Here is a portion of my code:</p>
<pre><code> import datetime

 # get current local time as a UTC timestamp
 current_time = datetime.datetime.utcnow()
 current_time.strftime("%s")

 # convert the string representing the UTC timestamp in my data to datetime for comparison
 time_val = '1426402510'
 #utc_dt = ??      # how should I convert time_val to compare with current_time?

 # the required output
 diff = (current_time - utc_dt).total_seconds()
</code></pre>
<p>thanks for your help.</p>
</div>
<div class="post-text" itemprop="text">
<p>To get the current time as "seconds since the epoch", use <a href="https://docs.python.org/3/library/time.html#time.time" rel="nofollow"><code>time.time()</code></a>:</p>
<pre><code>#!/usr/bin/env python
import time

now = time.time()
then = int('1426402510')
print("Duration: %.0f seconds" % (now - then))
</code></pre>
<p>If you need to use <code>datetime</code>:</p>
<pre><code>#!/usr/bin/env python3
from datetime import datetime, timedelta

now = datetime.utcnow()
then = datetime.utcfromtimestamp(int('1426402510'))
diff = (now - then) / timedelta(seconds=1)
print("Duration: %.0f seconds" % diff)
</code></pre>
<p>You could use <code>timedelta.total_seconds()</code> on Python 2 where <code>/ timedelta</code> doesn't work.</p>
</div>
<div class="post-text" itemprop="text">
<p>To convert the string to a datetime object, you just need to use <code>utcfromtimestamp</code> calling <code>int</code> on your timestamp string.</p>
<pre><code>import datetime

current_time = datetime.datetime.utcnow()
time_val = '1426402510'

diff = (current_time - datetime.datetime.utcfromtimestamp(int(time_val))).total_seconds()

print(diff)
</code></pre>
</div>
