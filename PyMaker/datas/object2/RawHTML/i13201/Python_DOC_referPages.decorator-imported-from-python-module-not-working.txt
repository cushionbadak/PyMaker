<div class="post-text" itemprop="text">
<p>I am trying to use the following decorator on functions defined in or imported to iPython notebook:</p>
<pre><code>import warnings

def deprecated(func):
    '''This is a decorator which can be used to mark functions
    as deprecated. It will result in a warning being emitted
    when the function is used.'''
    def new_func(*args, **kwargs):
        warnings.warn("Call to deprecated function {}.".format(func.__name__),
                  category=DeprecationWarning)
        return func(*args, **kwargs)
    new_func.__name__ = func.__name__
    new_func.__doc__ = func.__doc__
    new_func.__dict__.update(func.__dict__)
    return new_func
</code></pre>
<p>I defined the decorator in <code>utils.py</code>. When I use the decorator this way:</p>
<pre><code>import utils #from utils import deprecated

@utils.deprecated
def test():
    print 'Brokolice'
</code></pre>
<p>Then running <code>test()</code> prints 'Brokolice', but does not give any warning. However, when I define the decorator within iPython, I get the desired deprecated warning. </p>
<p>I am using Python 2.7 and I am not yet very comfortable with decorators or Python in general, but in this case, I have no idea what is wrong, as I would expect some kind of error if import of the decorator failed.</p>
</div>
<div class="post-text" itemprop="text">
<p>Try configuring <code>warnings.filterwarnings('always')</code> below the <code>import warnings</code></p>
<pre><code>In [1]: import test

In [2]: test.test()
warning
utils.py:12: DeprecationWarning: Call to deprecated function test.
  category=DeprecationWarning)
Brokolice
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>python -Wd test.py  #  -Wdefault
</code></pre>
<p>this will print the DeprecationWarning warnings which is hidden by python2.7 by default. see <a href="https://docs.python.org/3/whatsnew/2.7.html" rel="nofollow">here</a> for details.</p>
<p>And for your question "Any idea why is the line "return func(*args, **kwargs)" getting printed as well?".</p>
<p>This is just for readability.. </p>
<p>length(line) should &lt;= 80 in pep8 </p>
</div>
<span class="comment-copy">Thank you, this works great! I was not expecting the problem to be with the 'warnings'. However, the warning now has a new line:  <code>utils.py:69: DeprecationWarning: Call to deprecated function test.   return func(*args, **kwargs)</code>  , which is a line below the warning in the decorator. Any idea why is the line "return func(*args, **kwargs)" getting printed as well? :-)</span>
<span class="comment-copy">mmm I think you could configure the showwarning or formatwarning methods like it's suggested here <a href="http://stackoverflow.com/questions/2187269/python-print-only-the-message-on-warnings" title="python print only the message on warnings">stackoverflow.com/questions/2187269/â€¦</a></span>
<span class="comment-copy">Ok, nice! Thank you very much!</span>
