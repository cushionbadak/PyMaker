<div class="post-text" itemprop="text">
<p>I have a text file (<code>input.txt</code>) and it contains:</p>
<pre><code>COMPDAT

First line 123 456

Second line 4d5 fdf

COMPDAT

Computer 459

Computer 999

COMPDAT

Mouse qwerty

main 478
</code></pre>
<p>Now I need to delete the first lines after each <code>COMPDAT</code> keyword in my <code>input.txt</code> file.<br/>
How can I do that with Python?</p>
<p>I tried to use this script, however, it adds an empty line between each existing lines:</p>
<pre><code>import fileinput    
fin = fileinput.input('input.txt', inplace=1)

for line in fin:    
    print (line),    
    if line.strip() == 'COMPDAT':    
        next(fin, None)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>first read the file, get all lines that you want, and then write those lines in same file.</p>
<pre><code>input_file = open("input.txt", 'r')
prev_line = False
lines =[]
for line in input_file:
 if not prev_line:
    lines.append(line)
 prev_line=False
 if "COMPDAT" in line:
    prev_line=True
input_file.close()

input_file = open("input.txt", 'w')
for line in lines:
   input_file.write(line)
input_file.close()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>import fileinput    
fin = fileinput.input('input.txt', inplace=True)

for line in fin:    
    print(line,end='')
    if line.strip() == 'COMPDAT':    
        next(fin, None)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Another possibility using a generator, based on @Sanjay's answer.</p>
<pre><code>def line_and_line_before(file):
    prev_line = None
    for line in file:
        yield (prev_line, line)
        prev_line = line

input_file = open("input.txt", 'r')
lines = []

for prev_line, line in line_and_line_before(input_file):
     if not prev_line or "COMPDAT" not in prev_line:
         lines.append(line)

input_file.close()

input_file = open("input.txt", 'w')
for line in lines:
    input_file.write(line)
input_file.close()
</code></pre>
</div>
<span class="comment-copy">You can print without the end of the line with <code>print("something",end='')</code> if you want.</span>
<span class="comment-copy"><a href="https://docs.python.org/3/library/fileinput.html" rel="nofollow noreferrer">docs.python.org/3/library/fileinput.html</a> has what you need, in particular the <code>inplace=True</code> keyword argument...</span>
<span class="comment-copy">Thank you! That worked for me.</span>
<span class="comment-copy">How can add one more condition for deleting the first line? I need to delete the first line after each COMPDAT only if this first line contains "1" for item 4 and 5 like on example below:                         COMPDAT                                                                                                                    '9850' 125 57 1 1 OPEN /</span>
<span class="comment-copy">Thank you! That worked for me.</span>
