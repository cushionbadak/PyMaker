<div class="post-text" itemprop="text">
<p>Newbie to python here. I'm in  need of adding back end and front ends servers to the haproxy.cfg file and do a graceful reload via a python script. Could some of you point me in the right direction. If you include comments in the code it will immensely help me to understand faster. </p>
<p>Below is a sample block that I want to send in to the cfg, possibly based on raw_input([arg])</p>
<pre><code>frontend fe:some_fe:bind:yyyy
        mode tcp
        bind x.x.x.x:yyyy name some_name
        use_backend be:some_be:x.x.x.x:yyyy

backend be:some_be:x.x.x.x:yyyy
mode http
        balance roundrobin
        server  x.x.x.x:yyyy check port yyyy 
        server  x.x.x.x:yyyy check port yyyy 
</code></pre>
<p>Some notes- x.x.x.x signifies an ip and yyyy a port. </p>
<p>Please help! Many thanks in advance. </p>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<p>Read Python » 3.6.1 Documentation <a href="https://docs.python.org/3/library/string.html#template-strings" rel="nofollow noreferrer">6.1.4. Template strings</a></p>
</blockquote>
<p>Edit your Question accordingly, e.g. replace _fe:some_fe_ with <strong>fe:${some_fe}</strong></p>
<blockquote>
<p>Read Python » 3.6.1 Documentation <a href="https://docs.python.org/3/library/argparse.html#module-argparse" rel="nofollow noreferrer">argparse.html#module-argparse</a></p>
</blockquote>
<p>Edit your Question and append the commandline you want to use and your <code>argparse</code> code to work with.</p>
</div>
<span class="comment-copy">You could refer to the <a href="https://github.com/imjoey/pyhaproxy" rel="nofollow noreferrer">pyhaproxy</a> library, which could parse the haproxy config file and write back after some changes.</span>
<span class="comment-copy">Thanks so much @stovfl. This should work but I'm wondering if I could varibalise this a little more. For an instance "fe" as a variable and &lt;some_fe&gt; as it's value being passed on? Further string formatting(spaces, tabs, etc) should look exactly like this. PLease if you have the solution try to post everything cos I'm a learner :)  <code>code</code>frontend fe:&lt;some_fe&gt;:bind:&lt;yyyy&gt;         mode tcp         bind &lt;x.x.x.x&gt;:&lt;yyyy&gt; name &lt;some_name&gt;         use_backend be:&lt;some_be&gt;:&lt;x.x.x.x&gt;:&lt;yyyy&gt;<code>code</code></span>
<span class="comment-copy">thanks. I was looking for a faster way to understand but guess I'm gonna have to read the documentation and figure things out myself. WIll do and thanks.</span>
<span class="comment-copy">@bindo: You are wrong, I figure things out for you. You have to read the Documentation to confirm that's what you want.</span>
<span class="comment-copy">There is no need to switch outside. You can edit your Question and add your code you have so far. I advise you to get it running.</span>
