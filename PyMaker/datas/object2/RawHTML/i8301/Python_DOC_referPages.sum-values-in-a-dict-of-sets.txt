<div class="post-text" itemprop="text">
<p>I have what might be a simple task and I tried several solutions but can't seem to figure it out.</p>
<p>I have a dict of sets containing gene names and corresponding positions as sets like:</p>
<pre class="lang-none prettyprint-override"><code>gene_nr_snp = {'gene1: {3,9}, gene2: {2,3,1}, gene3: {1}}
</code></pre>
<p>I want to return a dict with the gene name and the corresponding summed value.</p>
<p>I tried the following:</p>
<pre><code>gene_values = {}

for gene, snp in gene_nr_snp.items():
    for i in snp: # iterate the values in each set
        snp_total = 0
        snp_total += i
        gene_values[gene].add(snp_total)
</code></pre>
<p>This is returning the same set of values</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use a dict comprehension and the <a href="https://docs.python.org/3/library/functions.html#sum" rel="nofollow noreferrer"><code>sum()</code> function</a>:</p>
<pre><code>gene_values = {gene: sum(snp) for gene, snp in gene_nr_snp.items()}
</code></pre>
<p>Your attempt fails because you set the <code>snp_total</code> variable to <code>0</code> for every value in <code>snp</code>, thus failing to sum anything. You then seem to treat <code>gene_values[gene]</code> as a set but the dictionary starts empty, so you'll get a <code>KeyError</code>. A working version would be:</p>
<pre><code>gene_values = {}

for gene, snp in gene_nr_snp.items():
    snp_total = 0
    for i in snp: # iterate the values in each set
        snp_total += i
    gene_values[gene] = snp_total
</code></pre>
<p>but the <code>sum()</code> function makes the inner loop rather more verbose than needed; the whole loop body could be replaced by <code>gene_values[gene] = sum(snp)</code>.</p>
</div>
