<div class="post-text" itemprop="text">
<p>I want to write a file searching code where I don't know if the directory I'm searching in has subdirectories and I want to check that so I don't get an error like this:
[Error 267]The directory name is invalid: 'C:/Path/To/Directory'.
I wrote a code like this where if it finds the file it breaks and stopps the program but if not it goes down a layer and so on.</p>
<pre><code>filename = raw_input('&gt; ')
path = 'C:/Path/Of/Directory/You/Want/To/Search/In'
fldr = os.listdir(path)

for f in fldr:
    p = path + '/' + f
    sfldr = os.listdir(p)
    if os.path.exists(p + '/' + filename):
        print 'Found file!!', p + '/' + filename
        break
    else:    
        for sf in sfldr:
            pp = p + '/' + sf
            ssfldr = os.listdir(pp)
            if os.path.exists(pp + '/' + filename):
                print 'Found file!!', pp + '/' + filename
                break
            else:
                for ssf in ssfldr:
                    ppp = pp + '/' + ssf
                    sssfldr = os.listdir(ppp)
                    if os.path.exists(ppp + '/' + filename):
                        print 'Found file!!', ppp + '/' + filename
                        break
</code></pre>
<p>The easy to notice error is that when the directory doesn't have 3 layers of subfolders the program just breaks and gives an error message.So if I could check if the folder has subfolders before entering it,that would be neat.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>os.scandir()</code>. Provides better speed over <code>os.walk()</code></p>
<p>Link to docs <a href="https://pypi.python.org/pypi/scandir" rel="nofollow noreferrer">here</a>!</p>
<p>Alternatively use, <code>glob</code></p>
<pre><code>&gt;&gt;&gt; from glob import glob
&gt;&gt;&gt; paths = glob('*/')
&gt;&gt;&gt; paths
['bin/', 'content/', 'include/', 'lib/', 'output/']
&gt;&gt;&gt; 
</code></pre>
</div>
<span class="comment-copy">You should just use <a href="https://docs.python.org/3/library/os.html#os.walk" rel="nofollow noreferrer"><code>os.walk</code></a></span>
<span class="comment-copy">@CodeMaker, does that help?</span>
<span class="comment-copy">@RahulLakhanpal I've decided to turn it down a notch and not rush in learning these stuff...I'm new to python so I'll take it step by step.It's just very exciting and I can get carried away sometimes and try to do stuff out of my skillset.Thanks for the help anyway!!</span>
<span class="comment-copy">I think glob is not fast same as os.walk.</span>
<span class="comment-copy">yup, that isn't fast. Just gave an example. However scandir() is the fastest</span>
<span class="comment-copy">I agree. PEP 471: " . . os.scandir() , in the standard library. This new function adds useful functionality and increases the speed of os.walk() by 2-20 times"</span>
<span class="comment-copy">on Python &gt;= 3.5 <code>os.walk</code> already uses <code>os.scandir</code>.</span>
