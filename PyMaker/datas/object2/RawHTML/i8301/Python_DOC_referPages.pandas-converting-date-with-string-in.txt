<div class="post-text" itemprop="text">
<p>I'm starting with python and pandas and matplotlib. I'm working with data with over million entries. I'm trying to change the date format. In CSV file date format is 23-JUN-11. I will like to use dates in future to plot amount of donation for each candidate. How to convert the date format to a readable format for pandas?</p>
<p><a href="https://drive.google.com/file/d/0B5QNBpFZ7Ie2U3ExN3ZCNWIyeFE/view?usp=sharing" rel="nofollow noreferrer">Here is the link to cut file 149 entries</a></p>
<h1>My code:</h1>
<pre><code>%matplotlib
import matplotlib.pyplot as plt
import pandas as pd
import numpy as np
</code></pre>
<h1>First candidate</h1>
<pre><code>reader_bachmann = pd.read_csv('P00000001-ALL.csv' ,converters={'cand_id': lambda x: str(x)[1:]},parse_dates=True, squeeze=True, low_memory=False, nrows=411 )

date_frame = pd.DataFrame(reader_bachmann, columns = ['contb_receipt_dt'])
</code></pre>
<h1>Data slice</h1>
<pre><code>  s = date_frame.iloc[:,0]
    date_slice = pd.Series([s])
    date_strip = date_slice.str.replace('JUN','6') 
</code></pre>
<h1>Trying to convert to new date format</h1>
<pre><code> date = pd.to_datetime(s, format='%d%b%Y')
    print(date_slice)
</code></pre>
<h1>Here is the error message</h1>
<pre><code>ValueError: could not convert string to float: '05-JUL-11'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>As an alternative you can use <strong>dateutil.parser</strong> to parse dates containing string directly, I have created a random dataframe for demo.</p>
<pre><code>l = [] 
for i in range(100):
    l.append('23-JUN-11') 
B = pd.DataFrame({'Date':l})
</code></pre>
<p>Now, Let's import <strong>dateutil.parser</strong> and apply it on our date column</p>
<pre><code>import dateutil.parser
B['Date2'] = B['Date'].apply(lambda x : dateutil.parser.parse(x))
B.head()
Out[106]: 
    Date      Date2
0  23-JUN-11 2011-06-23
1  23-JUN-11 2011-06-23
2  23-JUN-11 2011-06-23
3  23-JUN-11 2011-06-23
4  23-JUN-11 2011-06-23
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You need to use a different date format string:</p>
<pre><code>format='%d-%b-%y'
</code></pre>
<p><strong>Why?</strong></p>
<p>The error message gives a clue as to what is wrong:</p>
<blockquote>
<p>ValueError: could not convert string to float: '05-JUL-11'</p>
</blockquote>
<p>The <a href="https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior" rel="noreferrer">format string</a> controls the conversion, and is currently:</p>
<pre><code>format='%d%b%Y'
</code></pre>
<p>And the fields needed are:</p>
<pre><code>%y - year without a century (range 00 to 99)
%b - abbreviated month name
%d - day of the month (01 to 31)
</code></pre>
<p>What is missing is the <code>-</code> that are separating the field in your data string, and the <code>y</code> for a two digit year instead of the current <code>Y</code> for a four digit year.</p>
</div>
<span class="comment-copy">Please show an example of the date - as it is in the csv</span>
<span class="comment-copy">@GiantsLoveDeathMetal Column name is contb_receipt_dt and date format is 6/20/2011</span>
<span class="comment-copy">But pandas when I print array see it as date format 23-JUN-11</span>
<span class="comment-copy">Can you please post a snippet of the CSV, 151MB kinda big. just a hundred rows is good enough to work on this question yeah?</span>
<span class="comment-copy">@JimFactor I posted a new link with a smaller version of the file 149 entries.</span>
