<div class="post-text" itemprop="text">
<p>I have a file that looks like:</p>
<pre><code>~~~~~~~~~~~~~~~~~~~~~
Start
2, 0.001, 1.0
alpha = 0.001
beta = 1.3

...
...
...

new evaluation
complete
print out alpha &amp; beta
alpha = 0.19
beta = 1.41
End

~~~~~~~~~~~~~~~~~~~~~
Start
....
</code></pre>
<p>I would like to extract the three lines after "Start" and two lines after "print out". Basically, it should be:</p>
<pre><code>~~~~~~~~~~~~~~~~~~~~~
2, 0.001, 1.0
alpha = 0.001
beta = 1.3

alpha = 0.19
beta = 1.41

~~~~~~~~~~~~~~~~~~~~~
</code></pre>
<p>This is what I used:</p>
<pre><code>summary = open("summary_accuracy.txt","w")
content = []
with open(filename,'r') as f:
    for line in f:
        if "Start" in line:
            content += [f.readline() for i in range(3)]
        if "print out" in line:
            content += [f.readline() for i in range(2)]
            content += "~~~~~~~~~~"

summary.write(content)
</code></pre>
<p>However, I got the error:</p>
<pre><code>content += [f.readline() for i in range(3)]
ValueError: Mixing iteration and read methods would lose data
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Try using <code>next(f)</code> instead of <code>f.readline()</code>.</p>
<p>Also consider using <a href="https://docs.python.org/3/library/re.html#module-re" rel="nofollow noreferrer">regular expressions</a> for this task:</p>
<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; re.search(r'^Start\s(.*\s.*\s.*\s)', s, re.MULTILINE).group(1)
'2, 0.001, 1.0\nalpha = 0.001\nbeta = 1.3\n'
&gt;&gt;&gt; re.search(r'^print out.*\s(.*\s.*\s)', s, re.MULTILINE).group(1)
'alpha = 0.19\nbeta = 1.41\n'
</code></pre>
</div>
<span class="comment-copy">how about f.next()?</span>
<span class="comment-copy">Or to let builtins do the whole of the work, <code>content += itertools.islice(f, 3)</code> (2 for the second use), which is just implicitly performing <code>next</code> three times (minor behavioral difference: It won't raise an error if the file runs out before you get the lines you need).</span>
<span class="comment-copy">I think itertools are more straightforward. By the way, is there any simple way to do islice(f,-1)? I know the function does not accept negative arguments...</span>
