<div class="post-text" itemprop="text">
<p>I'm working on a small command-line game in python where I am showing a progress bar using the tqdm module. I listen for user input using the msvcrt module to interrupt the progress. Once interrupted, the user can restart by entering 'restart' into the command line prompt. The second time the progress bar is shown, instead of updating the same line with the progress, it creates a new line each time. </p>
<p>How would I get it to show the progress on the same line? </p>
<p><a href="https://i.stack.imgur.com/I3yC2.png" rel="noreferrer"><img alt="Progress bar issue" src="https://i.stack.imgur.com/I3yC2.png"/></a></p>
<p>This code snippet illustrates my use of the progress bar.</p>
<pre><code>def transfer():
    for i in tqdm.tqdm(range(1000), desc="Transfer progress", ncols=100, bar_format='{l_bar}{bar}|'):
        sleep(.1)
        if msvcrt.kbhit():
            if msvcrt.getwche() == ' ':
                interrupt()
                break

def interrupt():
    type("File transfer interrupted, to restart the transfer, type 'restart'")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Try using <code>tqdm.tqdm.write</code> in place of the standard <code>print()</code></p>
<p>This will print above the progress bar and move the progress bar one row below.</p>
<p>I tested this using below code, pressing <code>space</code> will print into stdout but not break the loop.
It was not 100% clear what you are trying to achieve, since the <code>interrupt()</code> function of yours only checks the type of the provided string. <a href="https://docs.python.org/3/library/functions.html#type" rel="nofollow noreferrer">type() built-in function</a></p>
<pre><code>import tqdm
import msvcrt
from time import sleep

def transfer():
    for i in tqdm.tqdm(range(1000), desc="Transfer progress", ncols=100, bar_format='{l_bar}{bar}|'):
        sleep(.1)
        if msvcrt.kbhit():
            if msvcrt.getwche() == ' ':
                interrupt()
                # break

def interrupt():
    tqdm.tqdm.write("File transfer interrupted, to restart the transfer, type 'restart'", end="")

transfer()
</code></pre>
<p>EDIT: to include <code>end</code> parameter of <code>tqdm.write()</code> as noted by Paul Netherwood
<a href="https://tqdm.github.io/docs/tqdm/#write" rel="nofollow noreferrer">tqdm.tqdm.write()</a></p>
</div>
<div class="post-text" itemprop="text">
<p>Try using <code>tqdm.tnrange()</code></p>
<p><code>for i in tqdm.tnrange(len(df)):</code></p>
<p><a href="https://i.stack.imgur.com/A81tU.png" rel="nofollow noreferrer"><img alt="Ongoing image" src="https://i.stack.imgur.com/A81tU.png"/></a>
<a href="https://i.stack.imgur.com/BYWTB.png" rel="nofollow noreferrer"><img alt="finished image" src="https://i.stack.imgur.com/BYWTB.png"/></a></p>
</div>
<div class="post-text" itemprop="text">
<p>Try <code>from tqdm import tqdm_notebook as tqdm</code> instead of <code>from tqdm import tqdm</code>.</p>
</div>
<span class="comment-copy"><a href="https://github.com/tqdm/tqdm/issues/375" rel="nofollow noreferrer">github.com/tqdm/tqdm/issues/375</a></span>
<span class="comment-copy">Note that tqdm.write() has an optional parameter 'end' which defaults to '\n' which will cause a line wrap. Set end=''</span>
<span class="comment-copy">Please include code as codeblocks instead of images so as to make it easier to copy/paste (and also reduce Stack Overflow's hosting cost)</span>
<span class="comment-copy">Ah sorry, but the code  just <code>for i in tqdm.tnrange(len(df)):</code> rest is for jupyter as printing in newline also happens inside notebook.</span>
<span class="comment-copy">really? That's for jupyter/ipython notebooks and really doesn't seem applicable here.</span>
<span class="comment-copy">Nothing help.problem remains...</span>
