<div class="post-text" itemprop="text">
<p>I'm trying to find a certain word in a file and want to print the next line when a condition is met.</p>
<pre><code>f = open('/path/to/file.txt','r')
lines = f.readlines()
for line in lines:
    if 'P/E' in line:
        n = lines.index(line) #get index of current line
        print(lines[n+1])     #print the next line
a.close()
</code></pre>
<p>The string 'P/E' will be present 4 times in the file, each time in a different line.</p>
<p>When executed, the code prints the next line after the first 2 occurrences of 'P/E' normally. It then again goes back and prints the same first 2 occurrences again and exits. The loop is not proceeding after those first 2 occurrences; it kind of repeats the process and exits.</p>
<p>I checked the data file to see if my output is the actual result, but all next lines are different after 'P/E'.</p>
<p>How can I resolve this? Thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p><code>list.index()</code> with just one argument only finds the <strong>first</strong> occurrence.  You'd have to give it a starting point to find elements past the previous index, <code>list.index()</code> takes a second argument that tells it where to start searching from.</p>
<p>However, you don't need to use <code>lines.index()</code>; that's very inefficient; it requires a full scan through the list, testing each line until a match is found.</p>
<p>Just use the <a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow noreferrer"><code>enumerate()</code> function</a> to add indices <em>as you loop</em>:</p>
<pre><code>for index, line in enumerate(lines):
    if 'P/E' in line:
        print(lines[index + 1])
</code></pre>
<p>Be careful, there is a chance <code>index + 1</code> is not a valid index; if you find <code>'P/E'</code> in the very last line of the <code>lines</code> list you'll get an <code>IndexError</code>. You may have to add a <code>and index + 1 &lt; len(lines)</code> test.</p>
<p>Note that using <code>file.readlines()</code> reads all of the file into memory in one go. Try to avoid this; you could loop directly over the file, and remember the <em>previous</em> line instead:</p>
<pre><code>with open('/path/to/file.txt','r') as f:
    previous = ''
    for line in f:
        if 'P/E' in previous:
            print(line)  # print this line
        previous = line  # remember for the next iteration
</code></pre>
</div>
