<div class="post-text" itemprop="text">
<p>I am trying to run following code in Python3.4, but I am getting error.</p>
<pre><code>def checknumner():
    i = 0
    print("checknumber called...")
    def is_even():
        print("is_even called...")
        global i
        if i % 2 == 0:
            print("Even: ", i)
        else:
            print("Odd: ", i)
        i += 1
    return is_even

c = checknumner()
print(c())
print(c())
print(c())
</code></pre>
<p>I am not able to access variable "i" in sub function.</p>
<p>When I comment out "global i" statment </p>
<pre><code>D:\Study\Python&gt;python generator_without_generator.py checknumber called... is_even called... Traceback (most recent call last):   File "generator_without_generator.py", line 24, in &lt;module&gt;
    print(c())   File "generator_without_generator.py", line 16, in is_even
    if i % 2 == 0: UnboundLocalError: local variable 'i' referenced before assignment
</code></pre>
<p>When I add "global i" statment</p>
<pre><code>D:\Study\Python&gt;python generator_without_generator.py checknumber called... is_even called... Traceback (most recent call last):   File "generator_without_generator.py", line 24, in &lt;module&gt;
    print(c())   File "generator_without_generator.py", line 16, in is_even
    if i % 2 == 0: NameError: name 'i' is not defined
</code></pre>
<p>Can anyone please explain this?</p>
</div>
<div class="post-text" itemprop="text">
<p>If you're using Python 3 (and it looks like you are), there's an amazing way to tackle this issue:</p>
<pre><code>def function():
    i = 0
    def another_function():
        nonlocal i 
        # use 'i' here
</code></pre>
<p>Here, <code>i</code> isn't global as it would've been defined outside <em>both functions</em> otherwise. It also isn't local to <code>another_function</code> as it's defined outside it. So, it's <em>non local</em>. </p>
<p>More info about <code>nonlocal</code>:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/1261875/python-nonlocal-statement">Python nonlocal statement</a></li>
<li><a href="https://docs.python.org/3/reference/simple_stmts.html#nonlocal" rel="nofollow noreferrer">Python 3.6 docs</a></li>
<li><a href="https://www.smallsurething.com/a-quick-guide-to-nonlocal-in-python-3/" rel="nofollow noreferrer">Quick guide about <code>nonlocal</code> in Python 3</a></li>
</ul>
</div>
<span class="comment-copy">Why is <code>nonlocal</code> at all necessary? Even in your example, this is just a closure, meaning the inner function <i>has</i> access to the variables defined in the outer function.</span>
<span class="comment-copy">EDIT: It's the line <code>i += 1</code> that causes the reference error, but irregardless, <code>i</code> never gets increased even on repetitive calls with the given code, and <code>i</code> is still accessible via the closure's scope.</span>
<span class="comment-copy">@Vincenzzzochi the value of "I" increments and using nonlocal it works perfectly.</span>
