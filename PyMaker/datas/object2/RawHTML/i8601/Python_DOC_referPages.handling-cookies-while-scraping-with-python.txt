<div class="post-text" itemprop="text">
<p>I'm trying to scrape the links from the careers page on a college website, and I am getting this error.</p>
<blockquote>
<p>urllib.error.HTTPError: HTTP Error 302: The HTTP server returned a redirect error that would lead to an infinite loop.
  The last 30x error message was:
  Moved Temporarily</p>
</blockquote>
<p>I think this is because the site has a session cookie.  After doing a bit of reading, there seems to be many ways to get around this (Requests, http.cookiejar, Selenium/PhantomJs), but I don't know how to incorporate these solutions into my scraping program.</p>
<p>This is my scraping program.  It's written in Python 3.6 with BeautifulSoup4.</p>
<pre><code>from bs4 import BeautifulSoup
from urllib.request import urlopen

html = urlopen("https://jobs.fanshawec.ca/applicants/jsp/shared/search/SearchResults_css.jsp")
soup = BeautifulSoup(html, 'html.parser')
data = soup.select(".ft0 a")
ads = []

for i in data:
    link = i.get('href')
    ads.append(link)

for job in ads:
    print(job)
    print('')
</code></pre>
<p>When I clear the cookies in my browser and manually go to the page I'm trying to scrape (<a href="https://jobs.fanshawec.ca/applicants/jsp/shared/search/SearchResults_css.jsp" rel="nofollow noreferrer">https://jobs.fanshawec.ca/applicants/jsp/shared/search/SearchResults_css.jsp</a>), I'm taken to a different page.  Once I have the cookie though, I can go directly to the SearchResults page that I want to scrape.</p>
<p>This is the cookie:</p>
<p><a href="https://i.stack.imgur.com/jiOUR.png" rel="nofollow noreferrer"><img alt="This is the cookie" src="https://i.stack.imgur.com/jiOUR.png"/></a></p>
<p>Any thoughts on how I can deal with this cookie?</p>
</div>
<div class="post-text" itemprop="text">
<p>Using the <code>requests</code>-module:</p>
<pre><code>from bs4 import BeautifulSoup
import requests

session = requests.Session()
req = session.get("https://jobs.fanshawec.ca/applicants/jsp/shared/search/SearchResults_css.jsp")
req.raise_for_status()  # omit this if you dont want an exception on a non-200 response
html = req.text
soup = BeautifulSoup(html, 'html.parser')
data = soup.select(".ft0 a")
ads = []

for i in data:
    link = i.get('href')
    ads.append(link)

for job in ads:
    print(job)
    print('')
</code></pre>
<p>However, i am not getting any output, which is probably due to ads being empty.
I hope this helps you,</p>
</div>
<div class="post-text" itemprop="text">
<p>The website you are trying to access is probably testing for both cookies and Javascript to be present. Python does provide a <a href="https://docs.python.org/3/library/http.cookiejar.html?highlight=build_opener#module-http.cookiejar" rel="nofollow noreferrer">CookieJar</a> library but this will not be enough if javascript is also mandatory.</p>
<p>Instead you could use Selenium to get the HTML. It is a bit like a remote control for an existing browser, and can be used as follows:</p>
<pre><code>from bs4 import BeautifulSoup
from selenium import webdriver
from selenium.webdriver.firefox.firefox_binary import FirefoxBinary

url = "https://jobs.fanshawec.ca/applicants/Central?delegateParameter=searchDelegate&amp;actionParameter=showSearch&amp;searchType=8192"

browser = webdriver.Firefox(firefox_binary=FirefoxBinary())
browser.get(url)
soup = BeautifulSoup(browser.page_source, 'html.parser')

data = soup.select(".ft0 a")
ads = []

for i in data:
    link = i.get('href')
    ads.append(link)

for job in ads:
    print(job)
</code></pre>
<p>(Also look at PhantomJS for a headless solution)</p>
<p>Which would give you your links starting as follows:</p>
<pre><code>/applicants/Central?delegateParameter=applicantPostingSearchDelegate&amp;actionParameter=getJobDetail&amp;rowId=174604&amp;c=%2BWIX1RV817HeJUg7cnxxnQ%3D%3D&amp;pageLoadIdRequestKey=1490116459459&amp;functionalityTableName=8192&amp;windowTimestamp=null
/applicants/Central?delegateParameter=applicantPostingSearchDelegate&amp;actionParameter=getJobDetail&amp;rowId=174585&amp;c=4E7TSRVJx7jLG39iR7HvMw%3D%3D&amp;pageLoadIdRequestKey=1490116459459&amp;functionalityTableName=8192&amp;windowTimestamp=null
/applicants/Central?delegateParameter=applicantPostingSearchDelegate&amp;actionParameter=getJobDetail&amp;rowId=174563&amp;c=EyCIe7a8xt0a%2BLp4xqtzaw%3D%3D&amp;pageLoadIdRequestKey=1490116459459&amp;functionalityTableName=8192&amp;windowTimestamp=null
/applicants/Central?delegateParameter=applicantPostingSearchDelegate&amp;actionParameter=getJobDetail&amp;rowId=174566&amp;c=coZCMU3091mmz%2BE7p%2BHNIg%3D%3D&amp;pageLoadIdRequestKey=1490116459459&amp;functionalityTableName=8192&amp;windowTimestamp=null
/applicants
</code></pre>
<p>Note: To use Selenium, you will need to <a href="http://selenium-python.readthedocs.io/installation.html" rel="nofollow noreferrer">install it</a>, as it is not part of the default Python libraries:</p>
<pre><code>pip install selenium
</code></pre>
</div>
<span class="comment-copy">It might also require javascript, in which case you would need to read the HTML via something like selenium.</span>
<span class="comment-copy">I ran your code, and I got these errors: FileNotFoundError: [Errno 2] No such file or directory: 'geckodriver'                                                            During handling of the above exception, another exception occurred: 'geckodriver'&gt;selenium.common.exceptions.WebDriverException: Message: 'geckodriver' executable needs to be in PATH.</span>
<span class="comment-copy">I downloaded geckodriver, and I'm still getting the error.</span>
<span class="comment-copy">Mine happens to be in my Python folder <code>C:\Python27\geckodriver.exe</code></span>
<span class="comment-copy">Do I have to put the path in the code?  I tried adding this to no success: binary = FirefoxBinary('I put the path in here') browser = webdriver.Firefox(firefox_binary=binary)</span>
<span class="comment-copy">I'll spend some more time with the Selenium docs.  Thanks for the help.</span>
