<div class="post-text" itemprop="text">
<p>I created a complete FTP library some time ago. Now I want to connect to an SFTP server. As far as I found out in my research this is not possible using ftplib. Nevertheless I tried to connect to an SFTP only server and it worked without any problems. No error and no exception!</p>
<p>Now I'm a bit confused as I'm not sure if this really is a secure connection (which is important for this application). Especially as I could not find similar cases online. Which brings me to the following questions:</p>
<ol>
<li>How can I find out if the connection is encrypted? (current status: It's not encrypted)</li>
<li>If the connection is not encrypted: How can I support SFTP without having to recode my complete library?</li>
</ol>
<p>This is the base code I use:</p>
<pre><code>server = 'host-adress'
user = 'username'
password='password'                                                               
ftp = FTP(server)
ftp.login(user,password)
</code></pre>
<p>All operations like up and downloading files work just fine.<br/>
According to my host the server is configured as SFTP.</p>
<p>Logging returns this as result:</p>
<pre><code>*cmd* 'USER username'
*put* 'USER username\r\n'
*get* '331 Password required for username\n'
*resp* '331 Password required for username'
*cmd* 'PASS ********'
*put* 'PASS ********\r\n'
*get* '230 User username logged in\n'
*resp* '230 User username logged in'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>FTP and SFTP are two completely different protocols. They have absolutely nothing in common. There's no chance you can connect with an FTP library to an SFTP server.</p>
<p>Your log shows FTP session without any doubt. </p>
<p>Though you (or your host) may mistake SFTP with FTPS (FTP over TLS/SSL). See <a href="https://superuser.com/q/677966/213663">FTPS versus SFTP</a>. For FTPS, just use <a href="https://docs.python.org/3/library/ftplib.html#ftplib.FTP_TLS" rel="nofollow noreferrer"><code>FTP_TLS</code> class</a> instead of <code>FTP</code>. The interface is the same (<code>FTP_TLS</code> derives from <code>FTP</code>).</p>
<p>If you really need SFTP (over SSH), you need to use a different library, like <a href="https://www.paramiko.org/" rel="nofollow noreferrer">Paramiko</a> or <a href="https://pypi.org/project/pysftp/" rel="nofollow noreferrer">pysftp</a>.<br/>
See <a href="https://stackoverflow.com/q/432385/850848">SFTP in Python? (platform independent)</a>.</p>
</div>
<span class="comment-copy">What is sftplib? Is that typo? Do you mean ftplib?</span>
<span class="comment-copy">Show us your code that uses ftplib to connect to SFTP server.</span>
<span class="comment-copy">That's it's obvious that you do not connect to SFTP. Set <code>FTP.set_debuglevel</code> and show us the log.</span>
<span class="comment-copy">Your log is shows FTP protocol without any doubt.</span>
<span class="comment-copy">Of course not. Again, those two protocols have nothing in common. Unless some wrote ftplib-like wrapper for Paramiko/pysftp, what I'm not aware of.</span>
<span class="comment-copy">Yeah I know there's a difference. That's why I'm confused. My host says it's an sftp only server, yet I'm able to connect using the code above.</span>
