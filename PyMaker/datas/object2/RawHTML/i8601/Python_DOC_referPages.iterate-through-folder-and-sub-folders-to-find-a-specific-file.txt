<div class="post-text" itemprop="text">
<p>I am trying to automate a search and delete operation for specific files and folder underneath a specific folder. Below is the folder structure which I have:</p>
<p>Primary Directory is MasterFolder, which includes multiple sub directories which are Child Folders Fol1, Fol2, Fol3, Fol4 the sub directories may vary folder to folder. </p>
<p>The Sub folders have more files and subfolders. ExL Fol1 holds someFilesFolder, sometext.txt, AnotherFilesFolder same applies to other Fol2,Fol3 etc sub directories under the MasterFolder.</p>
<p>Now what I would like to do is I wound want to scan the MasterFolder and go through every ChildFolder and look for 1 file named someText.txt and 1 folder named someFilesFolder under every child folder and remove the same. Ideally the folder name and file name I would want to delete is same under every ChildFolder, so the find should happen only one level down the MasterFolder. I checked multiple articles but everything specifies deleting a specific file or a directory using shutil.rmtree under one folder, but I am looking for something which will do the find and delete recursively I believe.   </p>
</div>
<div class="post-text" itemprop="text">
<p>To get you started:</p>
<blockquote>
<p>Ideally the folder name and file name I would want to delete is same under every ChildFolder, so the find should happen only one level down the MasterFolder.</p>
</blockquote>
<p>One easy way to go through every child folder under <code>MasterFolder</code> is to loop over [<code>os.listdir]('/path/to/MasterFolder')</code>. This will give you both files and child folders. You can check them each with <a href="http://docs.python.org/3/library/os.path.html#os.path.isdir" rel="nofollow"><code>os.path.isdir</code></a>. But it's much simpler (and more efficient, and cleaner) to just <code>try</code> to operate on them as if they were all folders, and handle the exceptions on non-folders by doing nothing/logging/whatever seems appropriate.</p>
<p>The list you get back from <code>listdir</code> is just bare names, so you will need <a href="http://docs.python.org/3/library/os.path.html#os.path.join" rel="nofollow"><code>os.path.join</code></a> to concatenate each name to <code>/path/to/MasterFolder</code>. And you'll need to use it to concatenate <code>"someTxt.txt"</code> and <code>"someFilesFolder"</code> as well, of course.</p>
<p>Finally, while you <em>could</em> <code>listdir</code> again on each child directory, and only delete the file and subdirectory if they exist, again, it's simpler (and cleaner and more efficient) to just <code>try</code> each one. You apparently already know how to <code>shutil.rmtree</code> and <code>os.unlink</code>, so… you're done.</p>
<hr/>
<p>If that "ideally" isn't actually guaranteed, instead of <code>os.listdir</code>, you will have to use <a href="http://docs.python.org/3/library/os.html#os.walk" rel="nofollow"><code>os.walk</code></a>. This is slightly more complicated, but if you look at the examples, then come back up and read the docs above the examples for the details, it's not hard to figure out.</p>
</div>
<span class="comment-copy">As a side note, is there a reason you have to do this in Python instead of just using the shell? For example, <code>rm -rfv /path/to/MasterFolder/*/someText.txt /path/to/MasterFolder/*/someFilesFolder</code> will do what you want in any POSIX-like shell (either sh-style or csh-style), and I'm pretty sure it's not significantly harder in Windows with cmd or Powershell.</span>
<span class="comment-copy">Thanks!!! I will give a try.. +1</span>
