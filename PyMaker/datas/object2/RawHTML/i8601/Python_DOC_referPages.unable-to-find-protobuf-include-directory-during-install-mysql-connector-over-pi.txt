<div class="post-text" itemprop="text">
<p>I pulled <code>mysql-connector-python</code> code and when I run <code>python ./setup.py build</code> I get the following error:</p>
<pre class="lang-none prettyprint-override"><code>Unable to find Protobuf include directory.
</code></pre>
<p><code>pip install Protobuf</code> was useless</p>
<p>How can I solve this problem?</p>
</div>
<div class="post-text" itemprop="text">
<p>I found that this error occurs since version 2.2.3.
You can avoid this issue using version 2.1.6.</p>
<p><code>pip install mysql-connector==2.1.6</code></p>
<p>try above.</p>
</div>
<div class="post-text" itemprop="text">
<p>As of 2.2.3, Connector/Python uses a C++ extension that interfaces with a MySQL server with the X plugin enabled, using Protobuf as data interchange format.</p>
<p>So, you need to set up where Protobuf is installed on your system (the library, include and protoc binary paths).</p>
<p><strong>Requirements</strong></p>
<ul>
<li>A C/C++ compiler, such as gcc</li>
<li>Protobuf C++ (version &gt;= 2.6.0)</li>
<li>Python development files</li>
</ul>
<p><strong>Installation</strong></p>
<p>You have two options when using pip + pypi:</p>
<p>1) Set environment variables for <code>MYSQLXPB_PROTOBUF_INCLUDE_DIR</code>, <code>MYSQLXPB_PROTOBUF_LIB_DIR</code> and <code>MYSQLXPB_PROTOC</code>.</p>
<p>2) Add <code>--install-option</code> to set these options when using pip:</p>
<pre><code>shell&gt; python install mysql-connector --install-option='--with-protobuf-include-dir=&lt;path&gt;' --install-option='--with-protobuf-lib-dir=&lt;path&gt;' --install-option='--with-protoc=&lt;path&gt;'
</code></pre>
<p><strong>Important:</strong> Keep in mind that 2.2.3 is a development release.</p>
</div>
<div class="post-text" itemprop="text">
<p>I also have this issue on my Ubuntu 16.04 and finally can install mysql-connector 2.2.3 with the following steps:</p>
<ol>
<li><p>Install these packages via the Ubuntu package manager:</p>
<pre><code>sudo apt install libprotobuf-dev protobuf-compiler
</code></pre></li>
<li><p>Set these environment variables:</p>
<pre><code>export MYSQLXPB_PROTOC=/usr/bin/protoc
export MYSQLXPB_PROTOBUF_INCLUDE_DIR=/usr/include/google/protobuf
export MYSQLXPB_PROTOBUF_LIB_DIR=/usr/lib/x86_64-linux-gnu
</code></pre></li>
<li><p>Install the mysql-connector package via the Python package manager:</p>
<pre><code>pip install mysql-connector
</code></pre></li>
</ol>
<p>Hope this helps.</p>
</div>
<div class="post-text" itemprop="text">
<p>For some reason I noticed that <code>pip install mysql-connector</code> tried to install v2.2.3, which we don't want. Therefore, I specifically entered <code>pip install mysql-connector==2.1.6</code> and it installed without error. Please note too that I am using a virtualenv running python 3.6.1. I installed it there. Here is documentation on installing specific python modules that helped me. <a href="https://docs.python.org/3/installing/index.html" rel="nofollow noreferrer">https://docs.python.org/3/installing/index.html</a></p>
</div>
<div class="post-text" itemprop="text">
<p>I am on <strong>WIN 7 64-bit</strong>, python 27. This command works for me and seems most appropriate, particularly when <strong>v2.2.3</strong> is a development version.</p>
<pre><code>pip install mysql-connector==2.1.4
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>To install protobuf with mac ports, I did the following</p>
<p>Installing protobuf:</p>
<p><code>port install protobuf-cpp</code></p>
<p>Declare where is protobuf</p>
<p><code>export MYSQLXPB_PROTOBUF_LIB_DIR=/opt/local/lib
export MYSQLXPB_PROTOC=/opt/local/bin/protoc
export MYSQLXPB_PROTOBUF_INCLUDE_DIR=/opt/local/include</code></p>
<p>Installing the connector</p>
<p><code>pip install mysql-connector</code></p>
</div>
<div class="post-text" itemprop="text">
<p>Please know that 2.1.6 Connector fails with <code>NoneType</code> error when connecting to Django 1.11. Fixed in 2.1.7.</p>
<p>Read: <a href="https://bugs.mysql.com/bug.php?id=86105" rel="nofollow noreferrer">mysql-connector-python fails to work with django 1.11</a>.</p>
</div>
<div class="post-text" itemprop="text">
<p>On macOS, if you use <a href="https://brew.sh" rel="nofollow noreferrer">Homebrew</a>:</p>
<pre><code>$ brew install protobuf
$ export MYSQLXPB_PROTOC=/usr/local/opt/protobuf/bin/protoc
$ export MYSQLXPB_PROTOBUF_INCLUDE_DIR=/usr/local/opt/protobuf/include/
$ export MYSQLXPB_PROTOBUF_LIB_DIR=/usr/local/opt/protobuf/lib/
$ pip3 install mysql-connector
</code></pre>
</div>
<span class="comment-copy">I also had a same error message when I tried to install mysql-connector 2.2.3 (not mysql-connector-python) by pip.  2.2.3 is development release. And I could install 2.1.4. How about trying another version?</span>
<span class="comment-copy">Version 2.1.6 also works without protobuf.</span>
<span class="comment-copy">also make sure you have gcc-4.9 installed (it's hardcoded in the wheel)</span>
