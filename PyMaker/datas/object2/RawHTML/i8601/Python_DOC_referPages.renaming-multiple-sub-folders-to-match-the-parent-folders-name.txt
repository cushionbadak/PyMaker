<div class="post-text" itemprop="text">
<p>I'm a python beginner but have some basic experience, and I need someone to please help me use the os module to rename sub folders based on their parent folder.  I've been searching for answers for the past week and have not had any success.  I'm assuming I need to use the os.walk method to do this.  </p>
<p>Here is my folder structure:</p>
<ul>
<li>C:\data\test\

<ul>
<li>C:\data\test\map1

<ul>
<li>C:\data\test\map1\1617151</li>
</ul></li>
<li>C:\data\test\map2

<ul>
<li>C:\data\test\map2\181719</li>
</ul></li>
<li>C:\data\test\map3

<ul>
<li>C:\data\test\map3\182726</li>
</ul></li>
<li>C:\data\test\map4

<ul>
<li>C:\data\test\map4\894932</li>
</ul></li>
</ul></li>
</ul>
<p>I need the results to look like this.</p>
<ul>
<li>C:\data\test\

<ul>
<li>C:\data\test\map1

<ul>
<li>C:\data\test\map1\map1</li>
</ul></li>
<li>C:\data\test\map2

<ul>
<li>C:\data\test\map2\map2</li>
</ul></li>
<li>C:\data\test\map3

<ul>
<li>C:\data\test\map3\map3</li>
</ul></li>
<li>C:\data\test\map4

<ul>
<li>C:\data\test\map4\map4</li>
</ul></li>
</ul></li>
</ul>
<p>Can someone please help?</p>
</div>
<div class="post-text" itemprop="text">
<p>python 2.7:</p>
<pre><code>import os

os.chdir("C:\data\test\") # go to dir
sub_dirs = os.walk('.').next()[1] # get list of subdirs
for sub_dir in sub_dirs:
    sub_sub_dir = os.walk('.').next[1] # get sub-subdir
    os.rmdir(sub_sub_dir) # remove sub-subdir
    os.makedirs(sub_dir + '\bla') # make new sub-subdir named subdir\bla
</code></pre>
<p>python 3+:</p>
<pre><code>import os

os.chdir("C:\data\test\")
sub_dirs=next(os.walk('.'))[1] 
for sub_dir in sub_dirs:
    sub_sub_dir = next(os.walk('.'))[1]
    os.rmdir(sub_sub_dir)
    os.makedirs(sub_dir + '\bla')
</code></pre>
<p>Untested, but should do it.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can get a list of all the files and it's respective folder location using this one liner:</p>
<pre><code>here = '.' # Current location
files = [(root, files) for root, dirs, files in os.walk(here) if (not dirs and files)]
</code></pre>
<p>For the given folder structure it will return:</p>
<pre><code>[
  ('C:\data\test\map1', ['1617151']),
  ...
]
</code></pre>
<p>You can now loop over this list and rename the files (<a href="https://docs.python.org/3/library/os.html#os.rename" rel="nofollow noreferrer">https://docs.python.org/3/library/os.html#os.rename</a>). You can get the parent folder's name by splitting the root string (<code>root.split('\')[-1]</code>).</p>
</div>
<span class="comment-copy">Thanks for the reply.  I tried the code but am getting this error:      Traceback (most recent call last):       File "&lt;interactive input&gt;", line 2, in &lt;module&gt;     TypeError: 'method-wrapper' object has no attribute '<b>getitem</b>'</span>
<span class="comment-copy">I'm going to guess that you are using python 3. Generators in python 3 don't have a next method, but the next() function will do the job. I also updated the answer.</span>
<span class="comment-copy">I'm still getting the same error because of this line in both answers:  <code>sub_sub_dir = os.walk('.').next[1]</code> <code>TypeError: 'method-wrapper' object has no attribute '__getitem__'</code></span>
<span class="comment-copy">haha oh wow it slipped past me. It's actually the same problem. I fixed the code in the answer but I suggest you fix yours manually. I explained what happened in the previous comment.</span>
