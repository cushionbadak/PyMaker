<div class="post-text" itemprop="text">
<p>I have an xml file of this form: </p>
<pre><code>&lt;root&gt;
&lt;AVIS_0&gt;
      &lt;avis&gt;Une esthéticienne hors pair qui s'occupe très bien de 
  ses clientes elle à en plus des doigts de fée je la recommande 
   vivement
      &lt;/avis&gt;
      &lt;code_etab&gt;52386561&lt;/code_etab&gt;
      &lt;Opinion From="0" category="général" polarity="positif" 
        selection="elle à en plus des doigts de fée je la recommande 
       vivement" target="NULL" to="0"/&gt;
      &lt;Opinion From="17" category="qualité" polarity="positif" 
      selection="Une esthéticienne hors pair qui s'occupe très bien de ses 
      clientes" target="esthéticienne" to="4"/&gt;
  &lt;/AVIS_0&gt;
  .
  .
  .
&lt;/root&gt;
</code></pre>
<p>I would like to add new xml tags to get an xml like this:</p>
<pre><code> &lt;root&gt;
   &lt;AVIS_0&gt;
     &lt;sentences id ="1"&gt;
        &lt;sentence id ="11"&gt;
           &lt;avis&gt;Une esthéticienne hors pair qui s'occupe très bien de 
            ses clientes elle à en plus des doigts de fée je la recommande 
                 vivement
            &lt;/avis&gt;
            &lt;Opinions&gt;
              &lt;Opinion From="0" category="général" polarity="positif" 
                       selection="elle à en plus des doigts de fée je la 
                        recommande vivement" target="NULL" to="0"/&gt;
              &lt;Opinion From="17" category="qualité" polarity="positif" 
                selection="Une esthéticienne hors pair qui s'occupe très 
                 bien de ses clientes" target="esthéticienne" to="4"/&gt;
              &lt;code_etab&gt;52386561&lt;/code_etab&gt;
            &lt;/Opinions&gt;
           &lt;/sentence&gt;
          &lt;sentences&gt;
  &lt;/AVIS_0&gt;
  .
  .
  .
&lt;/root&gt;
</code></pre>
<p>So, is it possible to do it under Python?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use ElementTree, a pure-Python implementation of ElementTree and a part of the standard library since 2.5</p>
<pre><code>import xml.etree.ElementTree

doc = xml.etree.ElementTree.parse('1.xml')
root = doc.getroot()
avis = root[0][0]
code_etab = root[0][1]
op1 = root[0][2]
op2 = root[0][3]

root[0].remove(avis)
root[0].remove(code_etab)
root[0].remove(op1)
root[0].remove(op2)

sentences = xml.etree.ElementTree.Element('sentences', {'id':'1'})
sentence = xml.etree.ElementTree.Element('sentence', {'id':'11'})

sentence.append(avis)
sentence.append(code_etab)
sentence.append(op1)
sentence.append(op2)

sentences.append(sentence)

root[0].append(sentences)

doc.write('newxml.xml')
</code></pre>
<p>For more information, you can look at the official <a href="https://docs.python.org/3/library/xml.etree.elementtree.html" rel="nofollow noreferrer">documentation</a>.</p>
</div>
