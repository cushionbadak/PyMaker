<div class="post-text" itemprop="text">
<p>Using the <code>exec()</code> python command, is it possible to run indented blocks of code (Like <code>if/else</code> statements or <code>try/except</code>). For example:</p>
<pre><code>name = input("Enter name: ")
if name == "Bob":
     print("Hi bob")
else:
     print("Hi user")
</code></pre>
<p>At the moment I am using this to run the code:</p>
<pre><code>code_list = []
while True:
     code = input("Enter code or type end: ")
     if code == "end":
          break
     else:
          code_list.append(code)
for code_piece in code_list:
     exec(code_piece)
</code></pre>
<p>Also I know that this isn't very "Pythonic" or "Good practise" to let the user input their own code but it will be useful in other parts of my code.</p>
</div>
<div class="post-text" itemprop="text">
<p>The problem here isn't the indentation. The problem is that you're trying to <code>exec</code> the lines of a compound statement one by one. Python can't make sense of a compound statement without the whole thing.</p>
<p><code>exec</code> the whole input as a single unit:</p>
<pre><code>exec('\n'.join(code_list))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>From <a href="https://docs.python.org/3/library/functions.html#exec" rel="nofollow noreferrer">exec()</a> documentation:</p>
<blockquote>
<p>This function supports dynamic execution of Python code. object must be either a string or a code object. If it is a string, the string is parsed as a suite of Python statements which is then executed ...</p>
</blockquote>
<p>Thus, you can do things like</p>
<pre><code>exec("a=2\nb=3")
exec("if a==2:\n\tprint(a)\nelse:\tprint(b)")
</code></pre>
<p>You just need to follow the right syntax and indentation.</p>
</div>
<div class="post-text" itemprop="text">
<p>Another way of formatting code within an exec() function is to use triple quotes, which makes it easy to see what the code looks like.</p>
<pre><code>code = """                     # Opening quotes
for i in range(0, 10):         # Code line 1         
    print(i)                   # Code line 2
"""                            # Closing quotes
exec(code)
</code></pre>
<p>This would maybe not work if you're asking the user to input the code, but it's a trick that may come in handy.</p>
</div>
<span class="comment-copy">Have you <i>tried</i> running indented code with <code>exec</code>? What was the problem?</span>
<span class="comment-copy">Great, that fixed it.</span>
<span class="comment-copy">Nice, that fixed it! @cattythegamer</span>
