<div class="post-text" itemprop="text">
<p>I am attempting to read in CSV data and map it to the following XML structure. In my first attempt, I have used % operator for string formatting, which works.</p>
<pre><code>import pandas as pd
import uuid
df = pd.read_csv('media.csv', sep=',')
def convert_row(row):
   return """&lt;video&gt;
    &lt;videoType fileUID="%s" name=""&gt;
        &lt;locationType&gt;&lt;/locationType&gt;
        &lt;type&gt;%s&lt;/type&gt;
        &lt;format&gt;%s&lt;/format&gt;
        &lt;year&gt;%s&lt;/year&gt;
    &lt;/videoType&gt;
&lt;/video&gt;""" % (row[0], row[1], row[2], row[3])


print '\n'.join(df.apply(convert_row, axis=1))
</code></pre>
<p>However, I am hoping to populate the <code>fileUID="%s"</code> with a generated uuid, that I can then reference elsewhere. I'm not able to get this to work.</p>
<p>I tried adding <code>u = str(uuid.uuid4())</code> just before the return statement and update <code>% (u, row[0], row[1], row[2], row[3])</code></p>
<p>I get a 'not all arguments converted during string formatting' error</p>
<p>So I attempted to use f-strings formatting</p>
<pre><code>import pandas as pd
import uuid
df = pd.read_csv('media.csv', sep=',')
def convert_row(row):
   return f"""&lt;video&gt;
    &lt;videoType fileUID="{u}" name=""&gt;
        &lt;locationType&gt;&lt;/locationType&gt;
        &lt;type&gt;{row[0]}&lt;/type&gt;
        &lt;format&gt;{row[1]}&lt;/format&gt;
        &lt;year&gt;{row[2]}&lt;/year&gt;
    &lt;/videoType&gt;
&lt;/video&gt;"""


print '\n'.join(df.apply(convert_row, axis=1))
</code></pre>
<p>and get another error stating invalid syntax in regards to the closing <code>"""</code></p>
<p>I guess my questions are which string formatting style is the best option when dealing with UUID and what is wrong with my code? Plus, if I wish to reference the generated uuid in other generated xml structures - I will ultimately create an xml file with the multiple generated xml structure content.</p>
<p>Thank you for any assistance </p>
</div>
<div class="post-text" itemprop="text">
<p>To @deceze's point you were missing some formatting in your code shown.</p>
<p>I believe what your looking for is something like this?</p>
<h1>Code</h1>
<pre class="lang-python prettyprint-override"><code>"""UUID Example."""
import pandas as pd
import uuid

df = pd.read_csv('media.csv', sep=',')


def convert_row(row):
    """Convert Row Example."""
    u = str(uuid.uuid4())
    return """&lt;video&gt;
    &lt;videoType fileUID={} name=\"\"&gt;
        &lt;locationType&gt;&lt;/locationType&gt;
        &lt;type&gt;{}&lt;/type&gt;
        &lt;format&gt;{}&lt;/format&gt;
        &lt;year&gt;{}&lt;/year&gt;
    &lt;/videoType&gt;
&lt;/video&gt;""".format(u, row[0], row[1], row[2], row[3])

print("\n".join(df.apply(convert_row, axis=1)))
</code></pre>
<h1>Results</h1>
<pre class="lang-bash prettyprint-override"><code>$ python3 uuid_testing.py 
&lt;video&gt;
    &lt;videoType fileUID=d07ea048-a08f-444c-9182-7fff3a825dcc name=""&gt;
        &lt;locationType&gt;&lt;/locationType&gt;
        &lt;type&gt;2&lt;/type&gt;
        &lt;format&gt;b&lt;/format&gt;
        &lt;year&gt;f&lt;/year&gt;
    &lt;/videoType&gt;
&lt;/video&gt;
&lt;video&gt;
    &lt;videoType fileUID=4b058e99-457e-4b26-ac03-593c51e6cb1e name=""&gt;
        &lt;locationType&gt;&lt;/locationType&gt;
        &lt;type&gt;3&lt;/type&gt;
        &lt;format&gt;c&lt;/format&gt;
        &lt;year&gt;g&lt;/year&gt;
    &lt;/videoType&gt;
&lt;/video&gt;
&lt;video&gt;
    &lt;videoType fileUID=8d04f6e6-1b5b-4103-a42a-aaa9c45d7bc5 name=""&gt;
        &lt;locationType&gt;&lt;/locationType&gt;
        &lt;type&gt;4&lt;/type&gt;
        &lt;format&gt;d&lt;/format&gt;
        &lt;year&gt;h&lt;/year&gt;
    &lt;/videoType&gt;
&lt;/video&gt;
</code></pre>
<p><strong>Github:</strong> <a href="https://github.com/JayRizzo/Random_Scripts/blob/master/uuid_testing.py" rel="nofollow noreferrer">Code was added to my Repo.</a></p>
</div>
<span class="comment-copy">@jezrael That doesn't matter.</span>
<span class="comment-copy">I still get the same error = invalid syntax in regards to the closing <code>"""</code></span>
<span class="comment-copy"><i>"not all arguments converted during string formatting"</i> – Well, as far as we can see, you have 4 <code>%s</code> in the string but you're passing 5 values in <code>% (...)</code>. So, yeah, that would explain that.</span>
<span class="comment-copy">@deceze thank you, I thought I had removed the extra in '% (...)` - so frustrating. If wish to generate another xml structure and reference to a generated FUID (uuid) - how would be best to do this? or should I create a separate question?</span>
<span class="comment-copy">@user3927287 you might want to look at <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#building-xml-documents" rel="nofollow noreferrer">docs.python.org/3/library/…</a> - that way you're not working with string formatting and won't have to worry about any escaping/encoding required for any attributes you apply to the the tags/text elements etc...</span>
