<div class="post-text" itemprop="text">
<p>I tried to run a test on Crab(an open source recommender system) based on python3. Then an error occurred:</p>
<pre><code>Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/Users/Dennis/anaconda/lib/python3.5/site-packages/scikits/crab/datasets/base.py", line 201, in load_sample_movies
    data_songs[u_ix][i_ix] = float(rating)
ValueError: could not convert string to float: "b'3.0'"
</code></pre>
<p>I tried to use 'decode()' to convert the string, but it's not working:</p>
<pre><code>Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/Users/Dennis/anaconda/lib/python3.5/site-packages/scikits/crab/datasets/base.py", line 202, in load_sample_movies
    rating = rating.decode('utf-8')
AttributeError: 'numpy.str_' object has no attribute 'decode'  
</code></pre>
<p>Any help will be appreciated!</p>
</div>
<div class="post-text" itemprop="text">
<p>The problem is that <code>rating</code> is a string within a string, so when you try casting a string like <code>"b'3.0'"</code> into a float, it gives a <code>valueError</code> because you still have the <code>b</code> in front which cannot be converted into float.</p>
<p>I imagine you need the byte encoding in front of the <code>'3.0'</code>, so one way would be to evaluate <code>rating</code> to convert it from a string to bytes before typecasting it into a float (beware though, <a href="https://docs.python.org/3/library/functions.html#eval" rel="nofollow"><code>eval</code></a> can have some safety issues).</p>
<pre><code>&gt;&gt;&gt; type(eval(rating))
&lt;class 'bytes'&gt;
&gt;&gt;&gt; data_songs[u_ix][i_ix] = float(eval(rating))
</code></pre>
</div>
<span class="comment-copy">"b'3.0'" is unicode, the Py3 default string type.  So it has an <code>encode</code>, but not <code>decode</code>.   But that doesn't get ride of the extra layer of quoting.</span>
