<div class="post-text" itemprop="text">
<p>I am trying to read in a hdf file but no groups show up. I have tried a couple different methods using tables and h5py but neither work in displaying the groups in the file. I checked and the file is 'Hierarchical Data Format (version 5) data' (See Update). The file information is <a href="https://ghrc.nsstc.nasa.gov/uso/ds_docs/lis/lis_dataset.html" rel="nofollow">here</a> for a reference.</p>
<p>Example data can be found <a href="https://ghrc.nsstc.nasa.gov/pub/lis/orbit_files/data/science/2010/0917/" rel="nofollow">here</a></p>
<pre><code>import h5py
import tables as tb

hdffile = "TRMM_LIS_SC.04.1_2010.260.73132"
</code></pre>
<p><strong>Using h5py:</strong></p>
<pre><code>f = h5py.File(hdffile,'w')
print(f)
</code></pre>
<p><strong>Outputs:</strong></p>
<pre><code>&lt; HDF5 file "TRMM_LIS_SC.04.1_2010.260.73132" (mode r+) &gt;
[]
</code></pre>
<p><strong>Using tables:</strong></p>
<pre><code>fi=tb.openFile(hdffile,'r')
print(fi)
</code></pre>
<p><strong>Outputs:</strong></p>
<pre><code>TRMM_LIS_SC.04.1_2010.260.73132 (File) ''
Last modif.: 'Wed Aug 10 18:41:44 2016'
Object Tree:
/ (RootGroup) ''

Closing remaining open files:TRMM_LIS_SC.04.1_2010.260.73132...done
</code></pre>
<p><strong>UPDATE</strong></p>
<pre><code>h5py.File(hdffile,'w') overwrote the file and emptied it.
</code></pre>
<p>Now my question is how to read in a hdf version 4 file into python since h5py and tables both do not work?</p>
</div>
<div class="post-text" itemprop="text">
<p>How big is the file? I think that doing <code>h5py.File(hdffile,'w')</code> overwrites it, so it's empty. Use <code>h5py.File(hdffile,'r')</code> to read.</p>
<p>I don't have enough karma to reply to @Luke H's answer, but reading it into pandas might not be a good idea. Pandas hdf5 uses pytables, which is an "opinionated" way of using hdf5. This means that it stores extra metadata (eg. the index). So I would only use pytables to read the file if it was made with pytables.</p>
</div>
<div class="post-text" itemprop="text">
<p><strong>UPDATE:</strong></p>
<p>i would recommend you first to <a href="https://www.hdfgroup.org/h4toh5/download.html" rel="nofollow">convert</a> your HDF version 4 files to HDF5 / h5 files as all modern libraries / modules are working with HDF version 5... </p>
<p><strong>OLD answer:</strong></p>
<p>try it this way:</p>
<pre><code>store = pd.HDFStore(filename)
print(store)
</code></pre>
<p>this should print you details about the HDF file, including stored keys, lengths of stored DFs, etc.</p>
<p>Demo:</p>
<pre><code>In [18]: fn = r'C:\Temp\a.h5'

In [19]: store = pd.HDFStore(fn)

In [20]: print(store)
&lt;class 'pandas.io.pytables.HDFStore'&gt;
File path: C:\Temp\a.h5
/df_dc               frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;3,indexers-&gt;[index],dc-&gt;[a,b,c])
/df_no_dc            frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;3,indexers-&gt;[index])
</code></pre>
<p>now you can read dataframes using keys from the output above:</p>
<pre><code>In [21]: df = store.select('df_dc')

In [22]: df
Out[22]:
    a   b   c
0  92  80  86
1  27  49  62
2  55  64  60
3  31  66   3
4  37  75  81
5  49  69  87
6  59   0  87
7  69  91  39
8  93  75  31
9  21  15   7
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Try using pandas:</p>
<pre><code>import pandas as pd
f = pd.read_hdf(C:/path/to/file)
</code></pre>
<p><a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_hdf.html" rel="nofollow">See Pandas HDF documentation here.</a></p>
<p>This should read in any hdf file as a dataframe you can then manipulate.</p>
</div>
<span class="comment-copy">What @MaxU says... And, this will also help you: <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer">docs.python.org/3/library/functions.html#open</a> See the table, to read a file it is 'r', to write, 'w' to append 'a'. Good luck!</span>
<span class="comment-copy">Thanks! You are right that the 'w' emptied the file and caused the hdf (version 5) file because I re-downloaded the file and it is in version 4 now. Unfortunately now h5py.File will not work because the file signature is not found.</span>
<span class="comment-copy">So from @user357269 I found out that the file got overwrote and it is in hdf version 4 and pandas HDF tools only works with version 5. Thanks though.</span>
<span class="comment-copy">@BenT, i've updated my answer - please check</span>
<span class="comment-copy">I don't have hdf4 of the converter installed so I will try that. Thanks.</span>
<span class="comment-copy">I tried using the pd.read_hdf from pandas but it requires a second argument for a group identifier that I haven't been able to find.</span>
<span class="comment-copy">That is because there is more than one "pandas object" in the file. You'll need to specify which one (VIA the "key" argument). I'm sorry I can't help you much more than that.</span>
<span class="comment-copy">So from @user357269 I found out that the file got overwrote and it is in hdf version 4 and pandas.read_hdf only works from what I gather with version 5.</span>
