<div class="post-text" itemprop="text">
<p>I am invoking the bash script from python script.</p>
<p>I want the bash script to add an element to dictionary "d" in the python script</p>
<h2><code>abc3.sh</code>:</h2>
<pre><code>#!/bin/bash
rank=1
echo "plugin"
function reg()
{
    if [ "$1" == "what" ]; then
        python -c 'from framework import data;data(rank)'
        echo "iamin"
    else
        plugin
    fi
}

plugin()
{
    echo "i am plugin one"
}

reg $1
</code></pre>
<h2>python file:</h2>
<pre><code> import sys,os,subprocess
    from collections import *
    subprocess.call(["./abc3.sh what"],shell=True,executable='/bin/bash')

    def data(rank,check):
       d[rank]["CHECK"]=check
    print d[1]["CHECK"]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Let's suppose that you have a shell plugin that echoes the value:</p>
<pre><code>echo $1 12
</code></pre>
<p>The mockup python script looks like (I'm on windows/MSYS2 BTW, hence the strange paths for a Linux user):</p>
<pre><code>import subprocess

p = subprocess.Popen(args=[r'C:\msys64\usr\bin\sh.exe',"-c","C:/users/jotd/myplugin.sh myarg"],stdout=subprocess.PIPE,stderr=subprocess.PIPE)
o,e= p.communicate()
p.wait()
if len(e):
    print("Warning: error found: "+e.decode())

result = o.strip()
d=dict()
d["TEST"] = result
print(d)
</code></pre>
<p>it prints the dictionary, proving that argument has been passed to the shell, and went back processed.
Note that stderr has been filtered out to avoid been mixed up with the results, but is printed to the console if occurs.</p>
<pre><code>{'TEST': b'myarg 12'}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If I understand correctly, you have a python script that runs a shell script, that in turn runs a new python script. And you'd want the second Python script to update a dictionnary in the first script. That will not work like that. </p>
<p>When you run your first python script, it will create a new python process, which will interpret each instruction from your source script.</p>
<p>When it reaches the instruction <code>subprocess.call(["./abc3.sh what"],shell=True,executable='/bin/bash')</code>, it will spawn a new shell (bash) process which will in turn interpret your shell script.</p>
<p>When the shell script reaches <code>python -c &lt;commands&gt;</code>, it invokes a new python process. This process is independant from the initial python process (even if you run the same script file).</p>
<p>Because each of theses scripts will run in a different process, they don't have access to each other data (the OS makes sure that each process is independant from each other, excepted for specific inter-process communications methods).</p>
<p>What you need to do: use some kind of interprocess mechanism, so that the initial python script gets data from the shell script. You may for example read data from the shell standard output, using <a href="https://docs.python.org/3/library/subprocess.html#subprocess.check_output" rel="nofollow">https://docs.python.org/3/library/subprocess.html#subprocess.check_output</a></p>
</div>
<span class="comment-copy">Can you split your target python file?</span>
<span class="comment-copy">You want the bash script to add an element to a dict of the script that calls it? Just get it to echo what you want and capture the output in the python script. The bash script has no idea about what's happening in the python script.</span>
<span class="comment-copy">You are calling the bash from python and then python from the bash: weird and no chance to update dict since both python processes are semarate. A proper way would be to parse bash output from python and update dict from there.</span>
<span class="comment-copy">You want to create bash pluginns for python? Why not creating python modules directly?</span>
<span class="comment-copy">@Jean-Fran√ßoisFabre i wanted to make use of existing plugins in bash</span>
