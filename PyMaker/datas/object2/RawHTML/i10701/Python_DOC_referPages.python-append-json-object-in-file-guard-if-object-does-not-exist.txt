<div class="post-text" itemprop="text">
<p>I am reading in a json file using python, and then appending in an array within an object, the shape of this being </p>
<pre><code>"additional_info": {"other_names": ["12.13"]
</code></pre>
<p>I am appending the array as follows:</p>
<pre><code>data["additional_info"]["other_names"].append('13.9')
with open('jsonfile', 'w') as f:
    json.dump(data, f)
</code></pre>
<p>I want to set a guard to check if additional_info and other_names exists in the json file and if it doesn't then to create it. How would I go about doing this?</p>
</div>
<div class="post-text" itemprop="text">
<p>Usually I would use nested <code>try-except</code> to check for each missing key or a <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="nofollow"><code>defaultdict</code></a>, but in this case I think I would go with 2 <code>if</code> statements for the sake of simplicity:</p>
<pre><code>if "additional_info" not in data:
    data["additional_info"] = {}
if "other_names" not in data["additional_info"]:
    data["additional_info"]["other_names"] = []

data["additional_info"]["other_names"].append('13.9')

with open('jsonfile', 'w') as f:
    json.dump(data, f)
</code></pre>
<p>Two use cases:</p>
<pre><code>data = {}

if "additional_info" not in data:
    data["additional_info"] = {}
if "other_names" not in data["additional_info"]:
    data["additional_info"]["other_names"] = []

data["additional_info"]["other_names"].append('13.9')

print(data)
&gt;&gt; {'additional_info': {'other_names': ['13.9']}}
</code></pre>
<p>And </p>
<pre><code>data = {"additional_info": {"other_names": ["12.13"]}}

if "additional_info" not in data:
    data["additional_info"] = {}
if "other_names" not in data["additional_info"]:
    data["additional_info"]["other_names"] = []

data["additional_info"]["other_names"].append('13.9')

print(data)
&gt;&gt; {'additional_info': {'other_names': ['12.13', '13.9']}}
</code></pre>
</div>
<span class="comment-copy">"I want to set a guard to check if additional_info and other_names exists in the json file and if it doesn't then to create it" This is already the default behavior. Do you mean that you don't want to append to the list if it already exists?</span>
<span class="comment-copy">If I try running this on a file that does not have additional_info or other_names, I get a key error</span>
<span class="comment-copy">This answered it for me, thanks!</span>
