<div class="post-text" itemprop="text">
<p>I have a text file with the following info (each condition in a separate line):</p>
<pre><code>UP_aic up 920.5 4 17280.0 down 17764.5 2 28186.5 up 28249.1  
DOWN_aic down 941.0 2 8800.5 up 8894.3 down 11691.0 2 20316.2 up
20363.1 4 26901.8 down 26901.8  
UP_adc down 1477.1   
DOWN_adc up 1752.8
</code></pre>
<p>I have implemented the code to remove 2s and 4s and their respective timings (see below) and all I want is to resave this info in another text file!</p>
<p>However, out of all 15 (or so) attempts this morning I only managed to save the last line (<code>DOWN_adc up 1752.8</code>) in various ways: normal, vertical instead of horizontal, all characters "glued" together etc. etc.</p>
<p>So I kept the most basic write method here now. I understand that all the previous lines get deleted by the next line so only the last one stays, but I can't figure out how to prevent this.</p>
<p>Here is the code:</p>
<pre><code>from sys import argv
from itertools import tee, islice, chain, izip
script, from_file, to_file = argv 
print "Here's your file %r:" %from_file

fhand=open(from_file)
total = 0
for line in fhand:  
    words=line.split()
    def previous_and_next(some_iterable):
        items, nexts = tee(some_iterable, 2)
        nexts = chain(islice(nexts, 1, None), [None])
        return izip(items, nexts)
    for item, nxt in previous_and_next(words):
        if item=='2': 
           words.remove(item)
           words.remove(nxt)
        elif item=='4':
            words.remove(item)
            words.remove(nxt)
    print words

with open(to_file, 'w') as output:          
      output.write(str(words)+'\n')

fhand.close()
output.close() 
</code></pre>
<p>So, how do I save the data like this again each condition in a separate line (angle brackets, commas etc. are not a problem)?</p>
<pre><code>['UP_aic', 'up', '920.5', 'down', '17764.5', 'up', '28249.1']  
['DOWN_aic', 'down', '941.0', 'up', '8894.3', 'down', '11691.0', 'up', '20363.1', 'down', '26901.8'] 
['UP_adc', 'down', '1477.1']  
['DOWN_adc', 'up', '1752.8'] 
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The call to <code>write()</code> is outside of the <code>for</code> loop, therefore <code>words</code> is only written to the file after the loop has ended. By that point, it contains whatever was in the last line read.</p>
<p>Change your code to something like</p>
<pre><code>def previous_and_next(some_iterable):
    items, nexts = tee(some_iterable, 2)
    nexts = chain(islice(nexts, 1, None), [None])
    return izip(items, nexts)

with open(to_file, 'w') as output:      
    for line in fhand:  
        words = line.split()
        for item, nxt in previous_and_next(words):
            if item == '2': 
                words.remove(item)
                words.remove(nxt)
            elif item == '4':
                words.remove(item)
                words.remove(nxt)
        print words
        output.write(str(words)+'\n')
</code></pre>
<p>No need to call <code>output.close()</code>, that's what the <code>with</code> block is for.</p>
</div>
<span class="comment-copy">Do you mean <a href="https://docs.python.org/3/library/stdtypes.html#str.join" rel="nofollow noreferrer"><code>str.join()</code></a>?</span>
<span class="comment-copy">Are you sure you want to <code>print words</code> instead of appending each <code>words</code> to a <code>list</code>, which you can then loop through and write to a file?</span>
<span class="comment-copy">TigerhawkT3  - the print statement can be removed, I just had it to see if my code does what I want it to do. Kevin, str.join() does not work for list...</span>
<span class="comment-copy">And I'm saying that the reason "all the previous lines get deleted by the next line so only the last one stays" is probably because you're just printing them and not actually saving them anywhere, other than <code>words</code> which is repeatedly overwritten so that it ends up referring to the last one.</span>
<span class="comment-copy">TigerhawkT3, I made an extra loop as you suggested, but it saved all the data into a single line... Then I would have to manipulate output additionally. My idea would be to save the lines in the order as they are in the question.</span>
