<div class="post-text" itemprop="text">
<p>Got this load_data.py file to import a csv data to a django model table...but it's not working, in terminal as i execute command "python3 ./load_data.py" it just goes to the same line as if load.py weren't even called like this:</p>
<pre><code>(cost_control_local) juanda@juanda-VirtualBox:~/cost_control_repository/cost_control/csv_data$ python3 ./load_data.py
(cost_control_local) juanda@juanda-VirtualBox:~/cost_control_repository/cost_control/csv_data$ 
</code></pre>
<p>this is the load_data.py code :</p>
<pre><code>import csv,sys,os
import django

pathproject = "/home/juanda/cost_control_repository/cost_control"
base_csv_filepath = "/home/juanda/cost_control_repository/cost_control/csv_data"
sys.path.append(pathproject)
os.environ['DJANGO_SETTINGS_MODULE'] = 'config.settings.local'
django.setup()

from cost_control_app.models import Suppliers

def load_suppliers():
    print ("Entering...")
    csv_file = base_csv_filepath + "supplier_data.csv"
    dataReader = csv.reader(open(csv_file, encoding='utf-8'),delimiter=',',quotechar='"')
    #dataReader = csv.reader(open(csv_file), delimiter=',', quotechar='"')
    for row in dataReader:
        if row[0] != 'ID':
            Suppliers.objects.create(
                supplier=row[0],
                supplier_description=row[1]
            )
    print ("Imported correctly")
</code></pre>
<p>Any ideas ? thanks for your help !!</p>
</div>
<div class="post-text" itemprop="text">
<p>You need at the bottom of your code write:</p>
<pre><code>if __name__ == "__main__":
    load_suppliers()
</code></pre>
<p>Check this <a href="https://stackoverflow.com/questions/419163/what-does-if-name-main-do">stackoverflow question</a> to learn more about this.</p>
<p>Also quoting from <a href="https://docs.python.org/3/library/__main__.html" rel="nofollow noreferrer">python doc</a>:</p>
<blockquote>
<p>'<strong>main</strong>' is the name of the scope in which top-level code executes.
  A moduleâ€™s <strong>name</strong> is set equal to '<strong>main</strong>' when read from standard
  input, a script, or from an interactive prompt.</p>
<p>A module can discover whether or not it is running in the main scope
  by checking its own <strong>name</strong>, which allows a common idiom for
  conditionally executing code in a module when it is run as a script or
  with python -m but not when it is imported:</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<pre><code>csv_file = base_csv_filepath + "/supplier_data.csv"
</code></pre>
<p>Added the <code>/</code></p>
</div>
<span class="comment-copy">Throws me this error : ValueError: invalid literal for int() with base 10: '\ufeffID'</span>
<span class="comment-copy">Then that's the error in your script. You need to show the full traceback for people to diagnose your error, we couldn't determine what's wrong by just "ValueError". Also, it's not related to this question anymore because your program starts to run, so I suggest you close this one and ask another question so more people might benefit from it.</span>
