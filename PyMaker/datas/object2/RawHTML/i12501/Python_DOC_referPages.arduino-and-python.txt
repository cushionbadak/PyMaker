<div class="post-text" itemprop="text">
<p>I am trying to control LEDs connected to Arduino from Python through serial communication. I am attaching both codes in Arduino and python. But I am not getting any response from LEDs when I run the code in Python, though I am not getting any errors. Maybe I am making some mistakes in the syntax?</p>
<pre><code>import serial
import time
arduino=serial.Serial('COM3',250000,timeout=5.0)
m=[]
commands=open('1.txt','r')
lines=commands.readlines()                  
for line in lines:                       
    m.append(line)
commands.close()
s=0
while s!=len(m):
    m[s]=float(m[s])
    s+=1
s=0

def delay():
    x=0
    y=0
    while x!=y:
        x+=1
while s!=len(m):
    c=str(m[s])
    if m[s]==1:
        arduino.write(b'c')
        time.sleep(2)
        print('1on')

    elif m[s]==-1:
        arduino.write(b'c')
        time.sleep(2)
        print('1off')
        delay()
    elif m[s]==2:
        arduino.write(b'c')
        time.sleep(2)
        print('2on')

    elif m[s]==-2:
        arduino.write(b'c')
        time.sleep(2)
        print('2off')

    elif m[s]==3:
        arduino.write(b'c')
        time.sleep(2)
        print('3on')

    elif m[s]==-3:
        arduino.write(b'c')
        time.sleep(2)
        print('3off')

    s+=1
</code></pre>
<p>This is the code to control LEDs from Python in Arduino. Arduino code is below</p>
<pre><code>int led1=2;
int led2=3;
int led3=4;
void setup()
{
  Serial.begin(250000);
  pinMode(led1,OUTPUT);
  pinMode(led2,OUTPUT);
  pinMode(led3,OUTPUT);
}
void loop()
{
  if(Serial.available())
  {
    int v=Serial.parseInt();
    if(v==1)
    {
      digitalWrite(led1,HIGH);
      delay(1000);
     }
    else if(v==-1)
    {
      digitalWrite(led1,LOW);
      delay(1000);
    }
    else if(v==2)
    {
      digitalWrite(led2,HIGH);
      delay(1000);
    }
    else if(v==-2)
    {
      digitalWrite(led2,LOW);
      delay(1000);
    }
    else if(v==3)
    {
      digitalWrite(led3,HIGH);
      delay(1000);
    }
    else if(v==-3)
    {
      digitalWrite(led3,LOW);
      delay(1000);
    }
  }
}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I don't know Python but the problem seem to be the following: arduino.write(b'c'). You keep on sending the "c" character. Shouldn't it be sending whatever is in the c variable?</p>
</div>
<div class="post-text" itemprop="text">
<p>As Blurry Sterk said, you're sending the character <code>'c'</code> instead of the variable <code>c</code>. Apart from that your code has too much repetition and <code>delay</code> function does nothing</p>
<p>For example, your python code could be much simplier like this:</p>
<pre><code>import serial
import time
arduino=serial.Serial('COM3',250000,timeout=5.0)
m=[]
commands=open('1.txt','r')

lines=commands.readlines()                  
for line in lines:                       
    m.append(float(line)) #Just convert to float at the moment you read it

commands.close()

for c in m:
    arduino.write(str(c).encode())
    time.sleep(2)
    print(abs(c), 'on' if c&gt;0 else 'off') #First two lines are the same in every if sentence, the last one just prints the number of led (abs(c)) and if it's on or off depending if it's negative or positive
</code></pre>
<p>Your arduino code can be more readable too if you use an array for the leds and use the absolute value to access the index of the array, similar to the logic in the print statement in python</p>
</div>
<div class="post-text" itemprop="text">
<p>as Mr. E pointed out, the delay function does nothing. Maybe you wanted this:</p>
<pre><code>def delay(y=0):
if not isinstance(y, int):
    raise ValueError('y must be integer')
if y&lt;0:
    raise ValueError('If y is negative the loop is infinite.')
x=0
while x!=y:
    x+=1
</code></pre>
<p>That would in fact, delay the processing of instructions. Is this the best way to achieve that? I don't know.</p>
</div>
<span class="comment-copy">yeah it should send the data whatever in the variable c</span>
<span class="comment-copy">Traceback (most recent call last):   File "C:/Users/shiva/Desktop/desktopfolders/Python/practice3.py", line 14, in &lt;module&gt;     arduino.write(str(c))   File "C:\Users\shiva\AppData\Local\Programs\Python\Python35\lib\site-packages\serial\serialwin32.py", line 286, in write     data = to_bytes(data)   File "C:\Users\shiva\AppData\Local\Programs\Python\Python35\lib\site-packages\serial\serialutil.py", line 76, in to_bytes     b.append(item)  # this one handles int and str for our emulation and ints for Python 3.x TypeError: an integer is required I AM GETTING THIS ERROR. PLEASE HELP</span>
<span class="comment-copy">Sorry my bad, <a href="http://pyserial.readthedocs.org/en/latest/pyserial_api.html#serial.Serial.write" rel="nofollow noreferrer">pyserial module documentation</a> says <code>write</code> expects <a href="https://docs.python.org/3/library/functions.html#bytearray" rel="nofollow noreferrer"><code>bytearray</code></a> type to send to arduino. You should do <code>arduino.write(bytearray(str(c)))</code></span>
<span class="comment-copy">Traceback (most recent call last):   File "C:/Users/shiva/Desktop/desktopfolders/Python/practice3.py", line 14, in &lt;module&gt;     arduino.write(bytearray(str(c))) TypeError: string argument without an encoding NOW THIS</span>
<span class="comment-copy">Got it . Tried' arduino.write(bytearray(str(c).encode()))' .  thanks for your valuable help Sir.</span>
<span class="comment-copy">Your welcome. I'll update my answer with that</span>
<span class="comment-copy">Delaying via loop is normally a bad idea, as the delay depends on the processore speed. It works only well at very low-level programming. In python <code>time.sleep</code> is usually what you want. Even if you delay via loop, you must take care, that the compiler/interpreter does not optimize it out.</span>
