<div class="post-text" itemprop="text">
<p>im making a login system in python that gets the username then checks a line on a text file then it checks the next line until it finds it then checks the same line on a second file (password file) and confirms the password with the username. when i try to log into an account i made it continually loops till it breaks itself. the variable it cant find is line in the checkusername function</p>
<pre><code>u = open('user', 'r+')
p = open('password', 'r+')


def main():
    accountcheck()


def accountcheck():  # check if the user has an account
    account = input('Do you have an account?\n')
    if account == 'yes':
        new = 0
        username(new)
    elif account == 'no':
        new = 1
        username(new)
    else:
        print(account, 'Is not a valid answer. Please try again')
        accountcheck()


def username(new):  # input username
    userlist = u.read().splitlines()
    user = input('Please enter your username\n')
    if user in userlist and new == 0:
        checkuser(user, new)
    elif new == 1 and user not in userlist:
        password(user, new)
    elif new == 1 and user in userlist:
        print('Username taken')
        username(new)
    else:
        print('Username is not fount in our database. Please try again')
        username(new)


def checkuser(user, new):  # scan the username file for the username
    line = 1
    ulines = u.readlines(line)
    if user != ulines:
        line = line + 1
        checkuser(user, new)
    elif ulines == user:
        password(user, new)


def password(user, new):
    passwordlist = p.read().splitlines()
    password = input('Please enter your username\n')
    if password in passwordlist and password != user:
        checkpassword(user, new, password)
    elif new == 1 and password != user:
        writelogin(user, password)
    else:
        print('Password is incorrect. Please try again')
        password(user, new)


def checkpassword(user, line, new, password):
    plines = p.readlines(line)
    if plines != password:
        line = line + 1
    elif plines == password:
        if new == 1:
            writelogin(user, password)
        else:
            print('you have logged in')


def writelogin(user, password):
    userwrite = user + '\n'
    passwordwrite = password + '\n'
    u.write(userwrite)
    p.write(passwordwrite)


main()
</code></pre>
<p>if you want to run this file you need to have a user text file and a password text file in the same folder the program is. any help is appreciated</p>
</div>
<div class="post-text" itemprop="text">
<p>I see the following problems with your code:</p>
<ol>
<li>Unnecessary use of recursion: this maybe is not a problem now, but python have a limit of how much you can do recursive calls, to avoid hit that limit change all yours functions to use loops.</li>
<li>read/readline/readlines: Looks to me that you are under the impression that when you do consecutive <code>read</code>s in the file you always get the same result, but that is not the case, when you do <code>u.read()</code> the first time you get the whole content of the file, no mystery there, but if you do <code>u.read()</code> again you get nothing that is because internally a file object have a read pointer that indicate where it is in the file, you can think of it as the palpitating <code>|</code> in a text editor when you do a read of any kind that pointer move according to kind of read you do, if it is <code>readline</code> it move to the next line but if its <code>read</code> or <code>readlines</code> it move to the end of the file and what you get from the operation is everything in between the previous position and the new position. But don't worry there is a way to tell it where to put say pointer with the <code>seek</code> method, to return to the start do <code>u.seek(0)</code> before any read to always get the same result from yours reads.</li>
<li>readline(N)/readlines(N): in the same way as before you may think that that give you a particular line in the file but that is no the case take a look a the documentation</li>
</ol>
<blockquote>
<p><strong>read(size=-1)</strong> 
  Read and return at most size characters from the stream as a single str. If size is negative or None, reads until EOF.</p>
<p><strong>readline(size=-1)</strong></p>
<p>Read and return one line from the stream. If size is specified, at most size bytes will be read.</p>
<p>The line terminator is always b'\n' for binary files; for text files, the newline argument to open() can be used to select the line terminator(s) recognized.</p>
<p><strong>readlines(hint=-1)</strong></p>
<p>Read and return a list of lines from the stream. hint can be specified to control the number of lines read: no more lines will be read if the total size (in bytes/characters) of all lines so far exceeds hint.</p>
</blockquote>
<p>Documentation: <a href="https://docs.python.org/3/library/io.html#high-level-module-interface" rel="nofollow">https://docs.python.org/3/library/io.html#high-level-module-interface</a> </p>
</div>
<div class="post-text" itemprop="text">
<p>Tread carefully when using recursion: in your case, the 'line' value is always being set to '1' in the first line of the checkuser() method. This means that it will always read the first line and always call checkuser() again if the user does not match (ad infinitum).</p>
<p>It may be better to use a simple loop instead.</p>
<p>You may wish to pass 'line' to your checkuser() method instead eg:</p>
<pre><code>def checkuser(user, new, line=1):
  ...
</code></pre>
</div>
<span class="comment-copy">You might have more luck with getting answers to your question if you provide more information; for example, what line is the error occurring on? You could paste a stacktrace for more context. It appears that you've given an incorrect function name in your question, because I can't see <code>checkusername</code> as a function in your code.</span>
<span class="comment-copy">so i should declare line outside of the function then call it in and just have the line=line+1?</span>
<span class="comment-copy">@CodyRoberts in this example code line get the default value of 1 when called as <code>checkuser(user, new)</code>, inside this function to pass a diferente value of line to the next recursive call you should do for example <code>checkuser(user, new,line+1)</code>. But I agree with @ChrisC73 that you should use a loop</span>
<span class="comment-copy">so checkuser(user, new,line+1) adds one to line whenever it run the function</span>
<span class="comment-copy">@CodyRoberts : correct; you will need to remove the "line = 1" declaration in the method though.</span>
