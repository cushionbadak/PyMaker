<div class="post-text" itemprop="text">
<p>I Have a program that calculates a score 'LevelScore' and i want to open the UserFile 'UserScoreFile' and check against the current user score saved in the file, and if LevelScore &gt; CurrentScore overwrite the previous characters representing that levels score in the text file to the LevelScore.</p>
<p>Each line in the Text file represents a level from 0-7 with each line format being, "T 000", T is representing if level is unlocked and 000 represents the current score (score can be 0-100) "lev" is a variable from 0-7 indicating which level the user is on.  </p>
<pre><code>UserFileR = open("UserScoreFile.txt","r")
    UserFileLines = UserFileR.readlines()
    UserLevelLine = UserFileLines[lev]
    UserLevelScore = UserLevelLine[2:5]

 if LevelScore &gt; UserLevelScore:
    UserFileWR = open("UserScoreFile.txt","r+")
    #This is where i dont know what to do...
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Here's the solution me and Luke have come up with collaboratively:</p>
<pre><code>UserFileRW = open("UserScoreFile.txt","r+")
UserFileLines = UserFileRW.readlines()
UserLevelLine = UserFileLines[lev]
UserLevelScore = int(UserLevelLine[2:])
UserFileRW.close()

if LevelScore &gt; UserLevelScore:
    UserFileWR = open("UserScoreFile.txt","w+")
    UserFileLines[lev] = "T " + str(LevelScore) + "\n"
    UserFileRW.writelines(UserFileLines)
    UserFileRW.close()
</code></pre>
<p>Thank you to Jotto and Tim Pietzcker for your contributions.</p>
</div>
<div class="post-text" itemprop="text">
<p>This should get you started.</p>
<pre><code>UserFileRW = open("UserScoreFile.txt","r+")
UserFileLines = UserFileR.readlines()
UserLevelLine = UserFileLines[lev]
UserLevelScore = int(UserLevelLine[2:5])

if int(LevelScore) &gt; UserLevelScore:
    UserFileRW.truncate()
    UserFileLines[lev] = "some tex" + str(LevelScore)  # there is something before score, but I don't know what
    UserFileRW.write(''.join(UserFileLines))
    UserFileRW.close()
</code></pre>
<p>Unfortunately this is not possible to change something in the middle of file. So you have to parse all of it, make modifications and then write it again.</p>
</div>
<div class="post-text" itemprop="text">
<p>Using the <a href="https://docs.python.org/3/library/fileinput.html" rel="nofollow"><code>fileinput</code> module</a>, you could do this:</p>
<pre><code>import fileinput
with fileinput.input(files=["test.txt"], inplace=True) as f:
    for line in f:
        if fileinput.lineno() == lev+1:     # line numbers start at 1, not 0
            UserLevelScore = int(line[2:5]) # assuming LevelScore is an int
            if LevelScore &gt; UserLevelScore:
                line = "{}{:0&gt;3}".format(line[:2], LevelScore)
                # right-justify LevelScore with leading zeroes
        print(line, end="") # Output is redirected to the current line of the file
</code></pre>
</div>
<span class="comment-copy">Hi Luke! Welcome to the dark side... Why aren't you in lesson &gt;:(</span>
<span class="comment-copy">The <a href="https://docs.python.org/3/library/fileinput.html" rel="nofollow noreferrer"><code>fileinput</code> module</a> does this transparently. But are you sure you want to open, read, change and write back the entire file every time a score changes? Wouldn't it be better to read the file into a list when your program starts, track changes in-memory and write back that list to a file upon exit?</span>
<span class="comment-copy">@TimPietzcker I know Luke in real life and have helped him with his project, he does need to change contents of a file multiple times during the execution of his program. (he's making a touch-typing program)</span>
<span class="comment-copy">Good for you. I forgot that opening with <code>w+</code> will remove if it exists. As well as writelines adds <code>\n</code> at the and of list's element.</span>
<span class="comment-copy">@jotto We based it on your original solution after some debugging, thanks for that.</span>
<span class="comment-copy">Commenting on Luke Gibson's behalf (he's sat next to me), <code>UserFileRW.truncate()</code> does not delete the previous contents of the file and also there is an extra line between each line in the saved file. Any ideas?</span>
