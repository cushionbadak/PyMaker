<div class="post-text" itemprop="text">
<p>I have a code where I have an email and a password in a text file in a list, formatted like this: <code>["tom@gmail.com","Password1"],["harry@gmail.com","Password2]</code>.</p>
<p>My code reads from the text file and compares it with a user input to see if it is present in the text file. For some reason when I input the first email <code>"tom@gmail.com"</code> it reads that from the text file but not <code>"Password1"</code>, however it reads <code>"harry@gmail.com"</code> correctly as well as <code>"Password2"</code> correctly. I cant find any way to get around this and fix this? No error is received so I'm not sure where its going wrong. Here is my code:</p>
<pre><code>def Login():
    with open("logindata.txt","r") as file:
        for line in file:
            line=line.split(",")
            logindata.append([line[0],line[1].rstrip()])
        print(logindata)
    found=False
    while found == False:
        email=input("Enter email:")
        password=input("Enter password:")
        with open("logindata.txt","r")as file:
            for line in file:
                line = line.split(",")
                if email in line:
                    print("Correct email")
                if password in line:
                    print("Correct Password")
                    found=True
if __name__ == "__main__":
Login()
</code></pre>
<p>if the code is run and you try the inputs I gave at the start then only the second email and password combination works. Here is what the text file looks like <a href="https://i.stack.imgur.com/koD4o.png" rel="nofollow noreferrer">text file format</a></p>
<p>Appending:</p>
<pre><code>username=input("Enter a new email")
        password=input("Enter a password")
        with open('logindata.txt','a')as file:
            line='\n'+ username + ',' + password
            file.write(line)
        print("user added")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You are reading text <em>with line separators</em>. Your lines don't look like this:</p>
<pre><code>tom@gmail.com,Password1
</code></pre>
<p>They actually look like this:</p>
<pre><code>tom@gmail.com,Password1\n
</code></pre>
<p>When splitting that on the comma, you get this:</p>
<pre><code>line = ['tom@gmail.com', 'Password1\n']
</code></pre>
<p>and the test <code>'Password1' in line</code> fails, but <code>'Password1\n'</code> in line would succeed.</p>
<p>The <code>\n</code> is a newline character. You'd need to remove that first; you could use <code>str.strip()</code> to handily remove <em>all</em> whitespace from the start and end:</p>
<pre><code>for line in file:
    line = line.strip().split(",")
    if email in line:
        print("Correct email")
    if password in line:
        print("Correct Password")
</code></pre>
<p>Rather than manually split, you can use the <a href="https://docs.python.org/3/library/csv.html" rel="nofollow noreferrer"><code>csv</code> module</a> to read your file:</p>
<pre><code>import csv

with open("logindata.txt", "r") as file:
    reader = csv.reader(file)
    for user, pw in reader:
        if email == user:
            print("Correct email")
        if password == pw:
            print("Correct Password")
</code></pre>
</div>
<span class="comment-copy">You forgot to remove the newline; <code>password</code> is not in the line, <code>password\n</code> is.</span>
<span class="comment-copy">@MartijnPieters Sorry to come back to this but if I want to append a new email to the text file , I need the \n to be at the end of the password to get it onto the next line so how would I achieve this?</span>
<span class="comment-copy">Best way: use <code>csv.writer()</code> to write the file. Each time you use the <code>writerow()</code> method on that it'll add the newline for you. Otherwise, add it manually when writing; <code>fileobj.write('{},{}\n'.format(userid, password))</code>, for example.</span>
<span class="comment-copy">@MartijnPieters I kind of want to stay away from csv and write, im not that familiar with them. I tried this which should work surely as its just adding a line before the username but it ends up putting the data two lines below instead of directly</span>
