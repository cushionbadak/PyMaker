<div class="post-text" itemprop="text">
<p>I work on a project and I want to download a csv file from a url. I did some research on the site but none of the solutions presented worked for me.</p>
<p>The url offers you directly to download or open the file of the blow I do not know how to say a python to save the file (it would be nice if I could also rename it)</p>
<p>But when I open the url  with this code nothing happens.</p>
<pre><code>import urllib
url='https://data.toulouse-metropole.fr/api/records/1.0/download/?dataset=dechets-menagers-et-assimiles-collectes'

testfile = urllib.request.urlopen(url)
</code></pre>
<p>Any ideas?</p>
</div>
<div class="post-text" itemprop="text">
<p>Try this. Change "folder" to a folder on your machine</p>
<pre><code>import os
import requests

url='https://data.toulouse-metropole.fr/api/records/1.0/download/?dataset=dechets-menagers-et-assimiles-collectes'
response = requests.get(url)
with open(os.path.join("folder", "file"), 'wb') as f:
    f.write(response.content)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can adapt an example from <a href="https://docs.python.org/3/howto/urllib2.html" rel="nofollow noreferrer">the docs</a></p>
<pre><code>import urllib.request
url='https://data.toulouse-metropole.fr/api/records/1.0/download/?dataset=dechets-menagers-et-assimiles-collectes'

with urllib.request.urlopen(url) as testfile, open('dataset.csv', 'w') as f:
    f.write(testfile.read().decode())
</code></pre>
</div>
<span class="comment-copy">Have you taken a look at this question: <a href="http://stackoverflow.com/questions/19602931/basic-http-file-downloading-and-saving-to-disk-in-python" title="basic http file downloading and saving to disk in python">stackoverflow.com/questions/19602931/â€¦</a></span>
<span class="comment-copy">Yes! the answers is : testfile = urllib.URLopener() testfile.retrieve("<a href="http://randomsite.com/file.gz" rel="nofollow noreferrer">randomsite.com/file.gz</a>", "file.gz")  but  i got errors: 'HTTPResponse' object has no attribute 'retrieve'</span>
<span class="comment-copy">It work!! many thanks</span>
