<div class="post-text" itemprop="text">
<p>I am using the following code to get the url of an item:</p>
<pre><code>node.xpath('//td/a[starts-with(text(),"itunes")]')[0].attrib['href']
</code></pre>
<p>It gives me something like:</p>
<pre><code>itunes20170107.tbz
</code></pre>
<p>However, I'm looking to get the full url, which is:</p>
<pre><code>https://feeds.itunes.apple.com/feeds/epf/v3/full/20170105/incremental/current/itunes20170109.tbz
</code></pre>
<p>Is there an easy way to get the full url from lxml, without building it myself?</p>
</div>
<div class="post-text" itemprop="text">
<p><code>lxml.html</code> would simply parse the <code>href</code> as it is inside the HTML. If you want to make links absolute and not relative, you should use <a href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urljoin" rel="nofollow noreferrer"><code>urljoin()</code></a>:</p>
<pre><code>from urllib.parse import urljoin  # Python3
# from urlparse import urljoin  # Python2 

url = "https://feeds.itunes.apple.com/feeds/epf/v3/full/20170105/incremental/current"

relative_url = node.xpath('//td/a[starts-with(text(),"itunes")]')[0].attrib['href']
absolute_url = urljoin(url, relative_url)
</code></pre>
<p>Demo:</p>
<pre><code>&gt;&gt;&gt; from urllib.parse import urljoin  # Python3
&gt;&gt;&gt; 
&gt;&gt;&gt; url = "https://feeds.itunes.apple.com/feeds/epf/v3/full/20170105/incremental/current"
&gt;&gt;&gt; 
&gt;&gt;&gt; relative_url = "itunes20170107.tbz"
&gt;&gt;&gt; absolute_url = urljoin(url, relative_url)
&gt;&gt;&gt; absolute_url
'https://feeds.itunes.apple.com/feeds/epf/v3/full/20170105/incremental/itunes20170107.tbz'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Another way to do it:    </p>
<pre><code>import requests
from lxml import fromstring

url = 'http://server.com'
response = reqests.get(url)
etree = fromstring(response.text)
etree.make_links_absolute(url)`
</code></pre>
</div>
