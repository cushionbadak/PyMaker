<div class="post-text" itemprop="text">
<p>An <code>AttributeError</code> is raised when I use the example code from python's documentation (<a href="https://docs.python.org/3/library/os.html#os.scandir" rel="nofollow noreferrer">here</a>). The example code is as follows:</p>
<pre><code>with os.scandir(path) as it:
    for entry in it:
        if not entry.name.startswith('.') and entry.is_file():
            print(entry.name)
</code></pre>
<p>The result is an <code>AttributeError</code>:</p>
<pre><code>D:\Programming&gt;test.py
Traceback (most recent call last):
  File "D:\Programming\test.py", line 3, in &lt;module&gt;
    with os.scandir() as it:
AttributeError: __exit__
</code></pre>
<p>Although, assigning <code>os.scandir()</code> to a variable works fine.
Could someone tell me what I'm missing?</p>
</div>
<div class="post-text" itemprop="text">
<p>The context manager support was added in <strong>Python 3.6</strong>, trying to use it with previous versions will raise the error you see since it isn't a context manager (and Python tries to load <code>__exit__</code> first).</p>
<p><a href="https://docs.python.org/3/library/os.html#os.scandir" rel="noreferrer">This is stated in its documentation</a> (<em>right under</em> the code snippet you saw) for <code>scandir</code>:</p>
<blockquote>
<p><em>New in version 3.6: Added support for the context manager protocol</em> and the <code>close()</code> method. [...]</p>
</blockquote>
<p><sup>(Emphasis mine)</sup></p>
<p>You can either update to Python 3.6 or, if you can't, don't use it as a context manager.</p>
</div>
<div class="post-text" itemprop="text">
<p>The docs say</p>
<blockquote>
<p>New in version 3.6: Added support for the context manager protocol</p>
</blockquote>
<p>You are probably running an older Python version.</p>
</div>
<span class="comment-copy">That's it. I was still on 3.5.2.3.6 works perfectly, thanks!</span>
