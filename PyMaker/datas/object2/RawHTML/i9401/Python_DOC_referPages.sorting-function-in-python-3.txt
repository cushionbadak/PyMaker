<div class="post-text" itemprop="text">
<p>I would like to use an older python script with <code>cmp</code> function, but it doesn't work in Python 3. It raises an error:</p>
<pre><code>TypeError: must use keyword argument for key function 
</code></pre>
<p>I know that I should avoid the <code>cmp</code> function and use the key function instead, but I don't know how (I don't know Python and I am not a programmer). Could you please help me to change the following part according to <a href="https://docs.python.org/3/howto/sorting.html" rel="nofollow noreferrer">this</a>?</p>
<pre><code>ls = list(self.entries)

def func(key1, key2):
    (w1,l1,t1) = res[key1]
    (w2,l2,t2) = res[key2]
    val = cmp((w2,t2), (w1,t1))
    return val
ls.sort(func)
</code></pre>
<p>Thank you.</p>
</div>
<div class="post-text" itemprop="text">
<p>Just return the first and last element of each tuple you are sorting, but reverse the result:</p>
<pre><code>ls.sort(key=lambda t: (res[t][0], res[t][2]), reverse=True)
</code></pre>
<p>That's exactly what the <code>cmp</code> version was comparing on, but in reverse, and the <code>sort()</code> method will do so too.</p>
</div>
<span class="comment-copy">use <code>ls.sort(key=functools.cmp_to_key(func))</code>. <a href="https://docs.python.org/3/library/functions.html#sorted" rel="nofollow noreferrer">sorted docs</a> (<code>list.sort</code> refers to that) and <a href="https://docs.python.org/3/library/functools.html#functools.cmp_to_key" rel="nofollow noreferrer">functools docs</a></span>
<span class="comment-copy">Thank you for your response. I tried now, but I received the message: "NameError: name 'functools' is not defined"</span>
<span class="comment-copy">@PaulRooney: that's overkill for this sort.</span>
<span class="comment-copy">true, I wasn't really looking at his code, just looking at how he could use what he had.</span>
<span class="comment-copy">I added the <code>import functools</code> line and now I got the <code>NameError: name 'cmp' is not defined</code> again. Somehow the conversion doesn't work yet.</span>
<span class="comment-copy">hmm. I received an "IndexError: string index out of range" message for this code...</span>
<span class="comment-copy">@Sam updated, I had missed your code is sorting based on an external mapping <code>res</code>.</span>
<span class="comment-copy">Dear @Martijn Pieters : sorry, I didn't realize you edited your answer. Unfortunately, I am at the same point as before: "NameError: name 'cmp' is not defined" points to the line with <code>val = cmp((w2,t2), (w1,t1))</code> :(</span>
<span class="comment-copy">@Sam my answer doesn't use <code>cmp</code> at all. Remove all of <code>func</code>.</span>
<span class="comment-copy">Ah, I see :) The problem is, that the program tries to call the <code>func</code> function later, and after I removed, I receive a "NameError: name 'func' is not defined" error message.</span>
