<div class="post-text" itemprop="text">
<p>I'm trying to understand the first part of the next validation. Can I safely assume that the expression 'if not set(sys.argv)' is always False? Code is from the <a href="https://github.com/openstack/ironic/blob/master/ironic/cmd/dbsync.py#L99" rel="nofollow noreferrer">Ironic Project</a>.</p>
<pre><code>if not set(sys.argv) &amp; valid_commands:
</code></pre>
<p>According to the <a href="https://docs.python.org/3/library/sys.html#sys.argv" rel="nofollow noreferrer">docs</a>, if the command is run with '-c' option, argv[0] is set to the string '-c'. Which is still a non-empty set. Example:</p>
<pre><code>python -c '
import sys
print(sys.argv[0])
if not set(sys.argv):
    print("empty")
else:
    print("non-empty")
'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You're reading it wrong. Python's <code>not</code> has very low precedence, below that of <code>&amp;</code> (which isn't logical AND).</p>
<pre><code>if not set(sys.argv) &amp; valid_commands:
</code></pre>
<p>should be read as</p>
<pre><code>if not (set(sys.argv) &amp; valid_commands):
</code></pre>
<p>which is testing whether <code>sys.argv</code> contains any elements of the set <code>valid_commands</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>There is no "first part" here. The</p>
<pre><code>if not set(sys.argv) &amp; valid_commands:
</code></pre>
<p>is equivalent to </p>
<pre><code>if not (set(sys.argv) &amp; valid_commands):
</code></pre>
</div>
<span class="comment-copy">No, you cannot safely assume that the expression <code>if not set(sys.argv)</code> is always false. Your program may have previously cleared <code>sys.argv</code>.</span>
<span class="comment-copy"><code>sys.argv</code> may also be empty if you call your script using the Python C API.</span>
