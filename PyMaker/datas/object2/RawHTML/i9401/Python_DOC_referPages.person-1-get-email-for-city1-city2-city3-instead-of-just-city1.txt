<div class="post-text" itemprop="text">
<p>I have citylist, emaillist. I get the data for them from the database. Then I want to send a customized email based on the city of the person. </p>
<p>If I have </p>
<pre><code>for email in emaillist:
    for city in citylist:
         sendemail()
</code></pre>
<p>Then it sends person 1 the email for city1,city2,city3. Person 2 the email for city1,city2, city3. Person 3 the email for city1, city2, city 3.</p>
<p>But if I change it to </p>
<pre><code>for city in citylist:
    for email in emailist:
       sendemail()
</code></pre>
<p>Then it will send person 1 city1, city2, city3 email and person 2 and person 3 won't get emails. How could I change it so that person 1 gets city 1 email, person 2 gets city 2 email and person 3 gets city 3 email?</p>
<p>EDIT: zip still sends person 1 city 1, city 2 email, person 2, city 1, city 2 email. </p>
<p>EDIT2:</p>
<pre><code>for email, c in zip(emaillist, citylist):


    city, state =c.split(",")
</code></pre>
<p>....</p>
<pre><code>    to_email= Email(email)
    content = Content("text/plain", message)
    mail = Mail(from_email, subject, to_email, content)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I think you're looking for <a href="https://docs.python.org/3/library/functions.html#zip" rel="nofollow noreferrer">zip</a>.</p>
<pre><code>for email, city in zip(emaillist, citylist):
     sendemail()
</code></pre>
</div>
<span class="comment-copy">Are <code>citylist</code> and <code>emailist</code> <i>actually</i> lists, or are they generators?</span>
<span class="comment-copy">Thery're actually lists. I tried the zip function listed below and that worked.</span>
<span class="comment-copy">You might want to change your data structure if you have multiple persons from the same city or same person links to many cities. A dict may be better.</span>
<span class="comment-copy">Why would a dict be better? I am only putting them in those lists so I can send the emails.</span>
<span class="comment-copy">That worked. Thanks for answering so fast. I'll check the answer once the time has passed.</span>
<span class="comment-copy">Actually I tried it again and it still sends person 1 the city 1, city 2 email and person 2 city 1, city 2 email.</span>
<span class="comment-copy">In your real code, you're passing <code>email</code> and <code>city</code> as arguments to the <code>sendemail</code> function, right?</span>
<span class="comment-copy">Actually I have for email, c in zip(emaillist, citylist): Then city, state =c.split(",") to_email= Email(email) content = Content("text/plain", message) content = Content("text/plain", message) I will post above so it's easier to read.</span>
<span class="comment-copy">It's strange. I tried again and now it is working.</span>
