<div class="post-text" itemprop="text">
<p>I have a project and I try to find correct algoritm and method for that.</p>
<p>I have a file called ADUserIPmap.txt which is located one of the Active Directory's path.</p>
<p>This file includes lines like this:</p>
<pre><code>172.16.205.5 domain\administrator 1482857637 Tue Dec 27 19:53:57 2016

172.16.200.237 domain\admin 1482857408 Tue Dec 27 19:50:08 2016

172.16.200.254 domain\cppm 1482857802 Tue Dec 27 19:56:42 2016

172.16.200.200 domain\admin 1482857830 Tue Dec 27 19:57:10 2016
</code></pre>
<p>I have to replace third column (1482857637) with givenName of that user. And this givenName data comes from a powershell command output like this.</p>
<pre><code>C:\Users\Administrator&gt; Get -ADuser -Identity 1482857637
GivenName: nthere
SamAccountName: 1482857637
</code></pre>
<p>Python script will work on Active Directory and powershell command as well.</p>
<p>After all of these steps done, I will send these informations to a firewall with xml api.</p>
<p>Question
1) ADUserIPmap.txt is a log file and lines will increase constantly. I don't want to read all file again and again. What is the correct method for this case? </p>
<p>2) Are there any simple way to get GivenName field from Active Directory</p>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>Q1) After reading the file the first time, assign the current position to a variable. Then jump there before iterating.</p>
<pre><code>with open('foo.txt') as f:
    z = f.seek(last_read)
    for line in f:
        print(line)
    last_read = f.tell()
</code></pre>
<p>If you need to persist <code>last_read</code>, use <a href="https://docs.python.org/3/library/pickle.html#module-pickle" rel="nofollow noreferrer">pickle</a></p>
<pre><code>import pickle
# retrieve before processing
with open('last_read.pkl') as f:
    last_read = pickle.load(f)

#process
with open('foo.txt') as f:
    z = f.seek(last_read)
    for line in f:
        print(line)
    last_read = f.tell()


# save after processing
with open('last_read.pkl', 'wb') as f:
    pickle.dump(last_read, f)
</code></pre>
<p>If you want to persist multiple <em>things</em>, put them in a dictionary and pickle the dictionary.</p>
<hr/>
<p>Q2)  Looks like there are a few active directory libraries in <a href="https://pypi.python.org/pypi?%3Aaction=search&amp;term=active%20directory&amp;submit=search" rel="nofollow noreferrer">PyPi</a></p>
</div>
