<div class="post-text" itemprop="text">
<p>I need some help. I am trying to display the value in a tabular format but getting the following error using Django and Python. The error is given below.</p>
<blockquote>
<p><code>raise SyntaxError("invalid predicate")</code></p>
<p><code>SyntaxError: invalid predicate</code></p>
</blockquote>
<pre><code>def search(request):
    per=[]
    if request.method == 'POST':
        rname=request.POST.get('rname')
        serch=request.POST.get('searchby')
        tree = ET.parse('roomlist.xml')
        root = tree.getroot()
        if serch==0:
           xyz = './/*[roomname='
           xyz = xyz + rname
           xyz= xyz + ']'
           result=root.findall(xyz)
           for x in result:
                  per.append({'roomname':x.find('roomname').text,'seat':x.find('noseats').text,'project':x.find('projectorscreen').text,'video':x.find('videoconf').text})
        return render(request,'booking/home.html',{'people': per}) 
</code></pre>
<p>My view part is given below.</p>
<blockquote>
<p>home.html:</p>
</blockquote>
<pre><code>{% if people %}
        &lt;table&gt;
            &lt;tr&gt;
                &lt;th&gt;Room Name&lt;/th&gt;
                &lt;th&gt;seats&lt;/th&gt;
                &lt;th&gt;Projector screen&lt;/th&gt;
                &lt;th&gt;Video Conference&lt;/th&gt;
            &lt;/tr&gt;
        {% for person in people %}
            &lt;tr&gt;
                &lt;td&gt;{{person.roomname}}&lt;/td&gt;
                &lt;td&gt;{{person.seat}}&lt;/td&gt;
                &lt;td&gt;{{person.project}}&lt;/td&gt;
                &lt;td&gt;{{person.video}}&lt;/td&gt;
            &lt;/tr&gt;
        {% endfor %}
        &lt;/table&gt;
    {% else %}
        &lt;p&gt;No Record in the database&lt;/p&gt;
    {% endif %}
</code></pre>
<p>I need to fetch all value from the below <code>.xml</code> file. </p>
<pre><code>&lt;?xml version="1.0" ?&gt;&lt;roomlist&gt;
  &lt;location name="Bangalore"&gt;
    &lt;room id="1uy92j908u092"&gt;
      &lt;roomname&gt; Aquarius &lt;/roomname&gt;
      &lt;noseats&gt; 10 &lt;/noseats&gt;
      &lt;projectorscreen&gt;yes&lt;/projectorscreen&gt;
      &lt;videoconf&gt;yes&lt;/videoconf&gt;
    &lt;/room&gt;
  &lt;/location&gt;
&lt;location name="Bhubaneswar"&gt;&lt;room id="131198912460"&gt;&lt;roomname&gt;cottage&lt;/roomname&gt;&lt;noseats&gt;5&lt;/noseats&gt;&lt;projectorscreen&gt;Yes&lt;/projectorscreen&gt;&lt;videoconf&gt;Yes&lt;/videoconf&gt;&lt;/room&gt;&lt;/location&gt;&lt;location name="puri"&gt;&lt;room id="509955554930"&gt;&lt;roomname&gt;room1&lt;/roomname&gt;&lt;noseats&gt;10&lt;/noseats&gt;&lt;projectorscreen&gt;No&lt;/projectorscreen&gt;&lt;videoconf&gt;Yes&lt;/videoconf&gt;&lt;/room&gt;&lt;/location&gt;&lt;/roomlist&gt;
</code></pre>
<p>Here I need to search all value from file and display. Please help me.</p>
</div>
<div class="post-text" itemprop="text">
<p>It looks like you are using <code>xml</code> module to parse xmls. Unfortunatelly <code>findall</code> of <code>xml</code> module only <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#supported-xpath-syntax" rel="nofollow noreferrer">supports subset of xpath</a>. </p>
<p>So my suggestion would be to use <code>lxml</code> instead: </p>
<pre><code>from lxml import  etree as ET 
</code></pre>
<p>and then:</p>
<pre><code>if serch==0:
    xyz = './/room/roomname[text()="{}"]'.format(rname)
    result=root.xpath(xyz)
</code></pre>
</div>
<span class="comment-copy">Please post full traceback.</span>
<span class="comment-copy">Actually I am getting the error in this <code>result=root.findall(xyz)</code> line.</span>
<span class="comment-copy">suppose I have <code>rname='cottage/'</code> then in this case how to escape the special string.</span>
<span class="comment-copy"><a href="https://stackoverflow.com/questions/18935754/how-to-escape-special-characters-of-a-string-with-single-backslashes">Here</a> you can find some help on escaping characters.</span>
