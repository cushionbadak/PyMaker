<div class="post-text" itemprop="text">
<p>I want to use the following code inside a function on 50 files in the same directory.</p>
<pre><code>with open(files) as f:
     my_list = [int(i) for line in f for i in line.split()]
</code></pre>
<p>I tried</p>
<pre><code>with open(file1) as a, open(file2) as b, ... open(file50) as c:
    list1 = [int(i) for line in a for i in line.split()]
    list2 = [int(i) for line in b for i in line.split()]
    ...
    list50 = [int(i) for line in c for i in line.split()]
    my_list = list1 + list2 + ... list50
</code></pre>
<p>And thus combining the contents of 50 files into the same array. But that is way too long and complicated and it also doesn't work. I know there is a much easier way to do this, I just don't know how to do that yet. Any help is much appreciated.</p>
</div>
<div class="post-text" itemprop="text">
<p>Maybe I'm completely missing the point, but you don't need all the files open at the same time, so what's wrong with a loop and opening the files one by one?</p>
<pre><code>my_list = []

for filename in [file1,file2,file3]:
    with open(filename) as f:
        my_list += [int(i) for line in f for i in line.split()]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/2.7/library/fileinput.html#fileinput.input" rel="nofollow noreferrer"><code>fileinput.input</code></a> for this:</p>
<pre><code>import fileinput


items = []
for line in fileinput.input(files):
    items.extend(int(x) for x in line.split())
</code></pre>
<p><a href="https://docs.python.org/3/library/fileinput.html#fileinput.input" rel="nofollow noreferrer">In Python 3.2+</a> it can also be used a context-manager:</p>
<pre><code>with fileinput.input(files=files) as f:
    for line in f:
        items.extend(int(x) for x in line.split())
</code></pre>
</div>
<span class="comment-copy">Curious what are the files? CSV, tab, txt, XML? As there are various solutions depending on format.</span>
<span class="comment-copy">@Parfait They are txt files</span>
<span class="comment-copy">This works it just doesn't output the correct answer. I tested it with just four files and it gave a slightly different answer than what it should have been. Any ideas why this is?</span>
<span class="comment-copy">Please define the correct answer by editing your question and add an example. We are not mind readers you know ;)</span>
<span class="comment-copy">one of the cases where <code>items.extend(int(x) for x in line.split())</code> can be replaced by <code>items.extend(map(int,line.split()))</code></span>
<span class="comment-copy">@Ashwini How do I do that for 50 files though?</span>
<span class="comment-copy">@Sekou I assume you have a list of files already, you just need to pass the list to <code>fileinput.input</code>(<a href="https://stackoverflow.com/q/3207219/846892">use <code>os.listdir()</code> to get a list of all files in a directory</a>).</span>
