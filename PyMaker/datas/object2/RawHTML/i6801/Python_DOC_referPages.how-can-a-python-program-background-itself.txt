<div class="post-text" itemprop="text">
<p>Consider the following Python command-line program.  It doesn't work because it is incomplete, but I think it illustrates the problem:</p>
<pre><code>#!/usr/bin/python3
import multiprocessing

pool = multiprocessing.Pool()
for task in expensive_iterator_with_user_interaction():
    pool.call_async(expensive_computation, (task,))
pool.close()

print("Dear user, you may now press Ctrl-Z and bg this script.")
pool.join()
</code></pre>
<p>Thus, the problem is that this scripts needs user input while it's launching expensive parallel processes.  But then there is the moment when user interaction is not needed anymore.  Then, I ask the user to background this process with shell actions.</p>
<p>However, can this be achieved also by the program itself?</p>
<p>(Side note: The core of the problem is the entanglement of user input with firing the “expensive computations”.  Therefore, I cannot separate both in two scripts, and letting one spawning the other as a daemon.)</p>
</div>
<div class="post-text" itemprop="text">
<p>The command <code>screen</code> may help you.</p>
<p>Use <code>screen -L</code> to create a new session and run you application. After inputting some data, you can press "<em>Ctrl-A</em>" and then press "<em>D</em>" on your keyboard to detach the session.</p>
<p>Now, your application is running in the background.</p>
<p>If you want to do some other things or input more data, you can use command <code>screen -r</code> to reattach to the previous session.</p>
<p><code>screen</code> is just like a virtual screen, so you can switch your program to the background or foreground according to your needs.</p>
</div>
<span class="comment-copy">check this function <a href="https://docs.python.org/3/library/os.html#os.fork" rel="nofollow noreferrer">docs.python.org/3/library/os.html#os.fork</a></span>
<span class="comment-copy">Does this work in a multiprocessing-using script, too?  How about open files and open pipes to subprocesses?</span>
<span class="comment-copy">I am not sure if it does but should work in my opinion</span>
<span class="comment-copy">Yes but this is not user-friendly.  After all, Ctrl+Z+bg works, too.  But both needs additional action of the user.  The program is to be published and should be as easy to use as possible.</span>
