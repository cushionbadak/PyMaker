<div class="post-text" itemprop="text">
<p>I have two dict lists that I am trying to merge on a unique key but I cannot get my head around how to approach this.   </p>
<p>dict 1: </p>
<pre><code>A = {'1': [{'A': 'A_1', 'start': 'S'}, {'A': 'A_2', 'start': 'M'}], 
'2': [{'A': 'A_1', 'start': 'S'}, {'A': 'A_2', 'start': 'M'}]}
</code></pre>
<p>dict 2: </p>
<pre><code>B = {'1': [{'l_1': 'www.l_1', 'l_2': 'www.l_2'}], 
'2': [{'l_1': 'www.myl_1', 'l_2': 'www.myl_2'}]}
</code></pre>
<p>What I am trying to achieve: </p>
<pre><code>combined = {'1': [{'A': 'A_1', 'start': 'S', 'l_1': 'www.l_1', 'l_2': 'www.l_2'}, {'A': 'A_2', 'start': 'M', 'l_1': 'www.l_1', 'l_2': 'www.l_2'}], 
'2': [{'A': 'A_1', 'start': 'S', 'l_1': 'www.myl_1', 'l_2': 'www.myl_2'}, {'A': 'A_2', 'start': 'M', 'l_1': 'www.myl_1', 'l_2': 'www.myl_2'}]}
</code></pre>
<p>Below is the code that I have written so far. But it does not provide me with the desired result..</p>
<pre><code>from itertools import chain
from collections import defaultdict

dict3 = defaultdict(list)
for k, v in chain(A.items(), B.items()):
    dict3[k].append(v)

print(dict3)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/itertools.html#itertools.product" rel="nofollow noreferrer"><code>itertools.product</code></a> to merge dict values from corresponding keys and then use Python 3's dict merge syntax:</p>
<pre><code>from itertools import product

dct =  {k: [{**d1, **d2} for d1, d2 in product(v, B[k])] 
                                           for k, v in A.items()}
</code></pre>
<p>In Python 2, you can apply a comprehension on the tuples from product, and build a merged dict from the elements:</p>
<pre><code>dct =  {key: [{k: v for d in tup for k, v in d.items()} 
                  for tup in product(val, B[key])] 
                                 for key, val in A.items()}
</code></pre>
<hr/>
<pre><code>{'1': [{'A': 'A_1', 'l_1': 'www.l_1', 'l_2': 'www.l_2', 'start': 'S'},
       {'A': 'A_2', 'l_1': 'www.l_1', 'l_2': 'www.l_2', 'start': 'M'}],
 '2': [{'A': 'A_1', 'l_1': 'www.myl_1', 'l_2': 'www.myl_2', 'start': 'S'},
       {'A': 'A_2', 'l_1': 'www.myl_1', 'l_2': 'www.myl_2', 'start': 'M'}]}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>for i in a:
    if i in b:

        for j in range(min(len(a[i]),len(b[i]))):
            a[i][j]=dict(a[i][j].items()+b[i][j].items()) #re-assign after combining

        if len(b[i])&gt;len(a[i]):       # length case
             for j in range(len(a[i]),len(b[i])):
                  a[i].append(b[i][j])

for i in b:         # if not in a
   if i not in a:
     a[i]=b[i]
print a
</code></pre>
</div>
<span class="comment-copy">I'm kinda busy at the moment, but look into <code>dict.update</code> to do a lot of the bulk work instead of iterating over every key.</span>
<span class="comment-copy">Really appreciate your answer!</span>
