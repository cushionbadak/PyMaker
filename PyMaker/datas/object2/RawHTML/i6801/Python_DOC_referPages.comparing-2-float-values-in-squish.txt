<div class="post-text" itemprop="text">
<p>I am trying to compare 2 values (float) using squish and it works fine sometimes, but fails few times. It is very inconsistent. Can someone help me how to use <code>isclose</code> for comparing float values.</p>
<p>Following is my script:</p>
<pre><code> Xposition_set = waitForObject("{id='textBoxGoto_Sample_X'}").text
 Xposition_setValue = round(float(Xposition_set), 2)

 Xposition_displayed = waitForObject("{id='dbxX' nativeObject.DataContext.Name='" + str(positionList[Index])+ "'}").text
 Xposition_displayedValue = round(float(Xposition_displayed), 2)

 test.compare(Xposition_setValue, Xposition_displayedValue,  GetTestCaseNumber() + "X -Positions matches")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Check out the <a href="https://docs.python.org/3/library/math.html#math.isclose" rel="nofollow noreferrer">documentation for <code>math.isclose()</code></a>:</p>
<blockquote>
<p>math.<strong>isclose</strong>(<em>a, b, *, rel_tol=1e-09, abs_tol=0.0</em>)<br/>
  Return <code>True</code> if the values <em>a</em> and <em>b</em> are close to each other and <code>False</code> otherwise.</p>
</blockquote>
<p>Also note at the bottom:</p>
<blockquote>
<p><em>New in version 3.5.</em></p>
</blockquote>
<p>So you should be sure you're running Python 3.5+ to use the function. But with that said, all you need to do is pass in your values. A standard example of floating point arithmetic error is usually adding <code>0.1 + 0.2</code>:</p>
<pre><code>&gt;&gt;&gt; 0.1 + 0.2
0.30000000000000004
</code></pre>
<p>So if we checked if that calculation is equal to <code>0.3</code>:</p>
<pre><code>&gt;&gt;&gt; 0.1 + 0.2 == 0.3
False
</code></pre>
<p>With the new <code>math.isclose()</code> function, we can remedy that:</p>
<pre><code>&gt;&gt;&gt; import math
&gt;&gt;&gt; math.isclose(0.1 + 0.2, 0.3)
True
</code></pre>
<p>Before Python 3.5, you can just do this manually. You just want to check if the absolute difference between the two numbers is very very small. The default tolerance for <code>math.isclose()</code> is <code>1e-09</code>, so we can use that:</p>
<pre><code>&gt;&gt;&gt; abs(0.1+0.2 - 0.3) &lt; 1e-9
True
</code></pre>
<p>In fact the difference between those two floats is far smaller than that even:</p>
<pre><code>&gt;&gt;&gt; abs(0.1+0.2 - 0.3)
5.551115123125783e-17
</code></pre>
<p>So you could use a stronger threshold, either for manual checking or if using <code>math.isclose()</code> and passing in a value for <code>rel_tol</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>What you are trying should work in general, but because of missing information it is not possible to find out what particular problem you are running into with the above code.</p>
<p>Here is an example Squish test script (for Squish for Windows, which you seem to use) which does what you are asking for with the Squish Addressbook example:</p>
<pre><code>import os
import math

def main():
    startApplication("%s/examples/win/addressbook/Addressbook" % os.getenv("SQUISH_PREFIX"))
    o = waitForObject("{type='Window'}")

    # Obtaining fake value 1:
    o.nativeObject.Text = "1.0"
    v1 = round(float(o.nativeObject.Text), 2)

    # Obtaining fake value 2:
    o.nativeObject.Text = "2.0"
    v2 = round(float(o.nativeObject.Text), 2)

    # Pass:
    test.verify(math.isclose(v1, v2, abs_tol=1))

    # Fail on purpose:
    test.verify(math.isclose(v1, v2, abs_tol=0.9))
</code></pre>
<p>Please note that this test script is for Python 3.5.x due to math.isclose(), so it won't work with a default Squish binary package as those ship with Python 2.7.x (contact Squish technical support to obtain a Squish binary package with a different Python version).</p>
</div>
<span class="comment-copy">This is not an answer. I know you cannot make comments with your current reputation, but the answer space is not reserved for comments. See <a href="https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead">Why do I need 50 reputation to comment? What can I do instead?</a></span>
<span class="comment-copy">Further the OP meant <code>isclose</code> which is a <code>math</code> module function to check if two <code>floats</code> are near each other. It's new as of 3.5</span>
