<div class="post-text" itemprop="text">
<p>I am using tweepy to capture twitter data, I would like to know if I have how to export the tweets to a json, txt or csv file?
My code:</p>
<pre><code>#coding = utf-8

import json
import tweepy
from tweepy import OAuthHandler
from tweepy import Stream
from tweepy.streaming import StreamListener

consumer_key = "my_consumer_key"
consumer_secret = "my_consumer_secret"
access_token = "my_acess_token"
access_token_secret = "my_acess_token_secret"

auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)

api = tweepy.API(auth)

def saida_json(tweet):
    with open('tweet.json', 'a', encoding='utf-8') as f:
        json.dump(tweet, f)

def saida_txt(tweet):
    with open('tweet.txt', 'a', encoding='utf-8') as f:
        for linha in tweet:
            f.write(tweet + '\n')

name = "usersl"
tweetCount = 20
public_tweets = api.home_timeline()
user_tweets = api.user_timeline(id=name, count=tweetCount)

for tweet in user_tweets:
    print(tweet.user.screen_name, tweet.text)
    saida_txt(tweet.text)
    saida_json(tweet)
</code></pre>
<p>I have tried to do it through functions, but every time I run into errors. In the txt file, it only writes the first tweet and json, informs that "its not serelized".
Where is my error guys?</p>
</div>
<div class="post-text" itemprop="text">
<p>If you try to write your <code>tweet</code> to a JSON file, <code>json.dump</code> will attempt to convert it to the JSON format. This process is called <a href="https://en.wikipedia.org/wiki/Serialization" rel="nofollow noreferrer">serialization</a>. <code>json.dump</code> only supports a small set of types in the default Encoder, which you can read about <a href="https://docs.python.org/3/library/json.html#json.JSONEncoder" rel="nofollow noreferrer">in the Python documentation</a>. Since the class that tweeps uses to represent a Tweet is not part of these types, the <code>json</code> module raises the exception you mentioned.</p>
<p>As a solution, you could serialize a dictionary containing various data about the tweet, here's an example:</p>
<pre><code>def tweet_to_json(tweet):
    tweet_dict = {
        "text": tweet.text,
        "author_name": tweet.user.screen_name
    }
    with open('tweet.json', 'w+') as f:
        json.dump(tweet_dict, f)
</code></pre>
<p>Note that using append mode with JSON files is usually not a good idea. You could use a JSON list instead.
<a href="https://stackoverflow.com/a/12994527/1955716">This reply to another question</a> might help you with this.</p>
<p><strong>Edit: Here's an example for saving a JSON list:</strong></p>
<pre><code>result = []
for tweet in api.user_timeline(id=name, count=tweetCount):
    result.append({
        'text': tweet.text, 
        'author_name': tweet.user.screen_name
    })
with open('tweet.json', 'w+') as f:
    json.dump(result, f)
</code></pre>
</div>
<span class="comment-copy">Thank you Volcyy, the only problem was the "w +" parameter. He still kept transcribing just one line. However, I changed to "a +" and got some of the answer. Volcoyy, can you tell me how I can resolve that the output was in 'utf-8'? Even passing within the function encoding = 'utf-8', the answer is still the same.</span>
<span class="comment-copy">I think you are mistaking encoding for something different here. You try to use append mode (the <code>a</code> flag in <code>open</code>) for adding new data to the JSON file, but that will mess up the JSON file's formatting, so I don't think that the <code>encoding</code> flag is the problem here. You could use a JSON list like in the answer I linked. I added an example to my answer.</span>
