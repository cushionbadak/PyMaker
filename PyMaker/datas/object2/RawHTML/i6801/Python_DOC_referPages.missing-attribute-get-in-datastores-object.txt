<div class="post-text" itemprop="text">
<p>This is my GAE datastore:</p>
<pre><code>class Search(ndb.Model):
    city = ndb.StringProperty()
    counter = ndb.IntegerProperty(indexed = True)
    date = ndb.DateTimeProperty(auto_now_add=True)
</code></pre>
<p>When I run this part of code:</p>
<pre><code>keys = Search.query(Search.city == city).fetch()

if (len(keys)==0):
    luogo = Search(city = city, counter = 1)
    luogo.put()
else:
    for key in keys:
        luogo_1 = key.get()
        luogo_1.counter = luogo_1.counter+1
        luogo_1.put()
</code></pre>
<p>my terminal says that is missing in object Search attribute get</p>
<p>Do you know why?</p>
</div>
<div class="post-text" itemprop="text">
<p>Running </p>
<p><code>keys = Search.query(Search.city == city).fetch()</code></p>
<p>fetches a list of model <em>instances</em></p>
<p>so </p>
<pre><code>for key in keys:
    luogo_1 = key.get()
</code></pre>
<p>fails because <em>instances</em> don't have a <code>get</code> method.</p>
<p>You need to do:</p>
<p><code>keys = Search.query(Search.city == city).fetch(keys_only=True)</code></p>
<p>to fetch a list of keys, or treat <code>keys</code> as a list of instances rather than keys, and omit the <code>key.get()</code> call.</p>
</div>
<div class="post-text" itemprop="text">
<p>Maybe because <code>key</code> object doesn't have <code>get()</code> method:</p>
<pre><code>luogo_1 = key.get()
</code></pre>
<p>Use python <a href="https://docs.python.org/3/library/functions.html#dir" rel="nofollow noreferrer">dir()</a> function, it helps me a lot</p>
</div>
<span class="comment-copy">Thank you so much</span>
<span class="comment-copy">However this is somewhat redundant if the intent is to fetch the entities.  The result of <code>Search.query(Search.city == city).fetch()</code> is a list of entities so you don't need to use the key and fetch them.</span>
