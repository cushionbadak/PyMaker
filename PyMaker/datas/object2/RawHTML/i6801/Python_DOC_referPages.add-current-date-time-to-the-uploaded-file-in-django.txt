<div class="post-text" itemprop="text">
<p>I am trying to add <code>date</code> and <code>time</code> to the uploaded file.</p>
<p>If the filename is <code>filename.xml</code> then I would like to change the name to <code>filename-&lt;date&gt;-&lt;time&gt;.xml</code></p>
<pre><code>def handle_uploaded_file(self, f):
    name = "static/uploads/{0}".format(f.name)
    with open(name, 'wb+') as destination:
        for chunk in f.chunks():
            destination.write(chunk)
</code></pre>
<p>Any help is highly appreciated. Thanks in advance.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <code>datetime</code> module to get date and time separately.</p>
<p><strong>Solution</strong>:</p>
<pre><code>from datetime import datetime
def handle_uploaded_file(self, f):
    _datetime = datetime.now()
    datetime_str = _datetime.strftime("%Y-%m-%d-%H-%M-%S")
    # if there are more than one dots
    file_name_split = f.name.split('.')
    file_name_list = file_name_split[:-1]
    ext = file_name_split[-1]
    file_name_wo_ext = '.'.join(file_name_list)

    name = '/path/to/uploads/{0}-{1}.{2}'.format(file_name_wo_ext, datetime_str, ext)
    # rest of the code
</code></pre>
<p>Ref: <a href="https://docs.python.org/3/library/datetime.html#datetime-objects" rel="nofollow noreferrer">datetime module in Python 3 docs</a></p>
<p>Follow <a href="https://stackoverflow.com/questions/7999935/python-datetime-to-string-without-microsecond-component">this answer</a> if you want to remove the microsecond component from time. </p>
</div>
<div class="post-text" itemprop="text">
<p>You can use string concatenation with datetime module. Look below for the small snippet as an example.</p>
<pre><code>import datetime
name = 'filename.xml'
name = name[:-4] + '_'+str(today.ctime()) + '_.xml'
print(name)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>import datetime
date_time = datetime.datetime.now()
def handle_uploaded_file(self, f):
    name = "static/uploads/{0}".format(f.name)
    file_name,extension = name.split('.')
    modified_name = file_name+''+date_time
    name = modified_name+extension
    with open(name, 'wb+') as destination:
        for chunk in f.chunks():
            destination.write(chunk)
</code></pre>
</div>
<span class="comment-copy">What kind of issues are you facing in the current approach ?</span>
<span class="comment-copy">There are no issues currently. The file is uploading. How can I insert the date time with <code>format(f.name)</code></span>
<span class="comment-copy">Got this  -- <code>[Errno 22] Invalid argument: 'static/uploads/test.xml-2017-09-05-20:30:13.515619'</code></span>
<span class="comment-copy">I am using Python 3.4</span>
<span class="comment-copy">Are you on a Windows OS?</span>
<span class="comment-copy">Yes I am on windows. Sorry I would have told this to you before.</span>
<span class="comment-copy">colon (:) seem to be the issue in time. Let me update the answer.</span>
<span class="comment-copy">Getting an error  <code>date_time = datetime.now() AttributeError: 'module' object has no attribute 'now'</code></span>
<span class="comment-copy">Made the correction, it should have been datetime.datetime.now()</span>
<span class="comment-copy">Now getting - <code>import datetime.datetime ImportError: No module named 'datetime.datetime'; 'datetime' is not a package</code></span>
<span class="comment-copy">Made a slight correction, this code should work according to python 2.x but I'm not sure about 3.x</span>
