<div class="post-text" itemprop="text">
<p>How can I delete all items from DynamoDB using python (boto3)?</p>
<p>I'm trying to do that:</p>
<pre><code>scan = table.scan()
with table.batch_writer() as batch:
  for each in scan['Items']:
    batch.delete_item(Key=each)
</code></pre>
<p>But give me this error:</p>
<pre><code>botocore.exceptions.ClientError: An error occurred (ValidationException) when calling the BatchWriteItem operation: The provided key element does not match the schema
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>BatchWriteItem</code>. The <a href="https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_BatchWriteItem.html" rel="nofollow noreferrer">documentation</a> states</p>
<blockquote>
<p>The BatchWriteItem operation puts or deletes multiple items in one or more tables. A single call to BatchWriteItem can write up to 16 MB of data, which can comprise as many as 25 put or delete requests. Individual items to be written can be as large as 400 KB. </p>
</blockquote>
<p>I'm assuming that Boto3 API has this also, but might be with a different name.</p>
</div>
<div class="post-text" itemprop="text">
<p>I found a solution! I just mount the key with my table Id and search Id (compId) and It's worked :)</p>
<pre><code>scan = table.scan()
with table.batch_writer() as batch:
    for each in scan['Items']:
        batch.delete_item(
            Key={
                'uId': each['uId'],
                'compId': each['compId']
            }
        )
</code></pre>
</div>
<span class="comment-copy">Possible duplicate of <a href="https://stackoverflow.com/questions/9154264/what-is-the-recommended-way-to-delete-a-large-number-of-items-from-dynamodb">What is the recommended way to delete a large number of items from DynamoDB?</a></span>
<span class="comment-copy">Have a look at this: <a href="https://gist.github.com/Swalloow/9966d576a9aafff482eef6b59c222baa" rel="nofollow noreferrer">gist.github.com/Swalloow/9966d576a9aafff482eef6b59c222baa</a></span>
<span class="comment-copy">I already checked these links and it did not help :(</span>
<span class="comment-copy">How about calling delete_table and create_table?</span>
<span class="comment-copy">But why post a new question, if some other post already solves your OP requirements.... Maybe a little research beforehand....</span>
