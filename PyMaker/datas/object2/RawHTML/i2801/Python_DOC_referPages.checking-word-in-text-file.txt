<div class="post-text" itemprop="text">
<p>Hi I'm creating an anti link spam bot for Discord and I'm trying to delete a message that has certain keywords/urls in it. </p>
<p>A list of keywords are saved in a separate file called <strong>/banned_words.json</strong> and I'm wanting the bot to read from that file when a keyword is detected in a message and delete that message.</p>
<p>Here is a snippet of code I'm working with, I'm struggling with this line of code <code>if word in word_set:</code> so an example of how to define <code>word</code> would be appreciated.</p>
<pre><code>def __init__(self, bot):
    self.bot = bot
    self.bannedwords = dataIO.load_json('data/spamfilter/banned_words.json')

async def banned_words(self, message):
    word = word in line.split():
    word_set = set(self.bannedwords)
    if word in word_set:
        await self.bot.delete_message(message)
        msg = await self.bot.send_message(
            message.channel,
            "{}, **Avertisement is not allowed on this server.**".format(
                message.author.mention
            )
        )
        await asyncio.sleep(6)
        await self.bot.delete_message(msg)
        return
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Here's how I would set this up, using the built-in <a href="https://docs.python.org/3/library/functions.html#any" rel="nofollow noreferrer"><code>any</code></a> function:</p>
<pre><code>class MyCog:
    def __init__(self, bot):
        self.bot = bot
        self.bannedwords = set(dataIO.load_json('data/spamfilter/banned_words.json'))

    async def banned_words(self, message):
        words = set(message.content.split())
        word_set = self.bannedwords
        if any(word in word_set for word in words):
            await self.bot.delete_message(message)
            msg = await self.bot.send_message(
                message.channel,
                "{}, **Avertisement is not allowed on this server.**".format(
                    message.author.mention
                )
            )
            await asyncio.sleep(6)
            await self.bot.delete_message(msg)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This line is completely wrong:</p>
<pre><code>word = word in line.split():
</code></pre>
<p>First, there is an extraneous colon at the end. Second, <code>x in y</code> yields a boolean which represents whether or not <code>x</code> is in <code>y</code>.</p>
<p>You're going to have to iterate through all the words in the message, and perform the check for each one:</p>
<pre><code>word_set = set(self.bannedwords)
for word in line.split():
    if word in word_set:
</code></pre>
</div>
<span class="comment-copy">word_set  is defined as the json file containing the words.</span>
<span class="comment-copy">I have a question how would you for  delete a message contains an extension of words for example: "hellothere" rather than "hello there"  or a link for example  if the banned word is example.com a person posts something like  example.com/hello  it was to delete?</span>
<span class="comment-copy">@DaveHonley You could do a simple membership check for the substring <code>any(word in message.content for word in word_set)</code>, but that will also catch innocent substrings.  If you want to ban the word "sword", this would also catch "swordfish" and "password".  That's a non-trivial problem, and probably involves some degree of natural language processing and fuzzy string matching.</span>
<span class="comment-copy"><code>for word in line.split()</code> seems to be the wrong usage I'm attempting to read the words in .json here is how I have implemented your reply.   ` word_set = set(self.bannedwords)         for word in word_set:             if word in message.content:                 return                          await self.bot.delete_message(message)`  However this would delete any work I put is so maybe it should be defining something?</span>
<span class="comment-copy">What is it you want to do? Check if any words from the file are in the message, or check if any words from the message are in the file?</span>
<span class="comment-copy">Check if any words from the file are in the message</span>
