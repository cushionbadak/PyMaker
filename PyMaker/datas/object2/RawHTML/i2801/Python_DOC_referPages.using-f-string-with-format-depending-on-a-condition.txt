<div class="post-text" itemprop="text">
<p>How can I use f-string with logic to format an <code>int</code> as a <code>float</code>? I would like if <code>ppl</code> is <code>True</code> to format <code>num</code> to 2 decimal places, and if <code>ppl</code> is <code>False</code> to rformat it as whatever it is.</p>
<p>Something like <code>string = f'i am {num:.2f if ppl else num}'</code> but this does not work. The below code demonstrates the behaviour that I want to achieve with a simpler f-string if possible:</p>
<pre><code>ppl = True
num = 3
string = f'I am {num:.2f}' if ppl else f'I am {num}'
print(string)
#if ppl False
#=&gt; i am 3
#if ppl True
#=&gt; i am 3.00
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can nest expressions to evaluate inside expressions in an f-string. This means you can move the ternary right inside your f-string:</p>
<pre><code>string = f'I am {num:{".2f" if ppl else ""}}'
</code></pre>
<p>Note the additional pair of braces needed for nesting.</p>
<p>But I don't think this is <em>cleaner</em>. Personally I find it harder to parse what's going on here, as opposed to your clear original version. After all simple is better than complex; flat is better than nested.</p>
</div>
<div class="post-text" itemprop="text">
<p>I would recommend that you actually separate the fstring into two lines</p>
<pre><code>num_str = f'{num:.2f}' if ppl else f'{num}'
str = f'I am {num_str}'
</code></pre>
<p>That way each line is as simple as it can be.</p>
</div>
<span class="comment-copy">I don't understand, it seems to do exactly what you want.</span>
<span class="comment-copy">yes...but i would like to short f-string with even clean code</span>
<span class="comment-copy">this is disgusting and I like it</span>
<span class="comment-copy">Also the <code>}}</code> handling is kind of confusing - usually <code>}}</code> means a literal closing brace, but here, <code>}}</code> closes two nested replacement fields. Looking at the <a href="https://docs.python.org/3/reference/lexical_analysis.html#f-strings" rel="nofollow noreferrer">language reference</a>, I can see how the parsing rules work out that way, but it's still confusing.</span>
<span class="comment-copy">@user2357112 agreed, if anything I prefer Gamrix' two-step version.</span>
<span class="comment-copy">Or <code>form = '.2f' if ppl else ''</code> and <code>f'I am {num:{form}}'</code> on a similar note.</span>
