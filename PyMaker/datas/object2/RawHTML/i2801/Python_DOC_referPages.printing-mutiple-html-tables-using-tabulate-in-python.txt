<div class="post-text" itemprop="text">
<p>I want to produce two HTML tables using tabulate package, but I am only able to produce one table and send mail.</p>
<p>Is it possible to put more than one html table into a message sent with smtplib and email? Whenever I use attach() for more than one thing, it only adds the first.</p>
<pre><code>text = """
Hello, Friend.

Here is your data:

{table}

Regards,

Me
"""

html = """
&lt;html&gt;
&lt;body&gt;
    &lt;p&gt;Hello, Friend.&lt;/p&gt;
    &lt;p&gt;Here is your data:&lt;/p&gt;
    {table}
    &lt;p&gt;Regards,&lt;/p&gt;
    &lt;p&gt;Me&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
"""

with open('input.csv') as input_file:
    reader = csv.reader(input_file)
    data = list(reader)

    text = text.format(table=tabulate(data, headers="firstrow", tablefmt="grid"))
    html = html.format(table=tabulate(data, headers="firstrow", tablefmt="html"))

    message = MIMEMultipart(
       "alternative", None, [MIMEText(text), MIMEText(html,'html')]
    )
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Yes. First you have to change the number of fields you want to substitute as tables:</p>
<pre><code>text = """ [...] {table1} {table2} [...] """
</code></pre>
<p>Then you have to pass the content to format as kwargs:</p>
<pre><code>text = text.format(table1=tabulate(data, headers="firstrow", tablefmt="grid"),
                   table2=your_new_table_tabulation)
</code></pre>
<p>Same you can do for html</p>
<p>String formatting in Python is no sort of attachment, but rather a substitution of content into a pre-formatted field. You can substitute as many fields as you'd like, putting the names you'd like, and with the content you'd like. Then, when you send the email, you will send a normal HTML file with the tables rendered into as HTML/text</p>
<p>I encourage you to check out: <a href="https://docs.python.org/3/library/string.html#string.Formatter.format" rel="nofollow noreferrer">https://docs.python.org/3/library/string.html#string.Formatter.format</a></p>
<p>That is for Python's version 3.7. You have almost every Python's version available online.</p>
</div>
<span class="comment-copy">What exact Python version are you using? Mail composition is different for Python 2, Python 3.2- and Python 3.3+.</span>
