<div class="post-text" itemprop="text">
<p>I am trying to create a list comprehension, that improves upon one I already have.</p>
<p>I have a list of numbers representing the lengths of a month. </p>
<pre><code>months = [35, 28, 28, 35, 28, 28, 35, 28, 28, 35, 28, 28] 
</code></pre>
<p>I want to expand this array into an array with a length of the full year, and every value in that array representing which week that day (index) falls into. </p>
<p>Currently I am doing this with two list comprehensions. </p>
<pre><code>weeks = [w for w in range(sum(months)) if w % 7 == 0]
weeks_expanded = [day for week in [[d + 1] * 7 for d in range(len(weeks))] for day in week]
</code></pre>
<p>I wanted to know how I could add something to the new list 7 times without making it an array of length 7. I'm trying to get rid of the added step of flattening my inner list comprehension in weeks_expanded. <code>[[d + 1] * 7 for d in range(len(weeks))]</code></p>
<p>Thanks for the help. </p>
</div>
<div class="post-text" itemprop="text">
<p>You are basically generating a sequence of every 7th number for the <code>weeks</code> sequence, up to the year-total number of days, so this works too:</p>
<pre><code>weeks = range(0, sum(months), 7)
</code></pre>
<p><code>weeks_expanded</code> list is just a sequence of repeated integers, starting at 1, each repeated 7 times, up to and including <code>sum(months) // 7</code>, so you could just do this:</p>
<pre><code>weeks_expanded = [wn for wn in range(1, (sum(months) // 7) + 1) for __ in range(7)]
</code></pre>
<p>This uses a nested loop in the list comprehension, that just iterates 7 times. You could also use the <a href="https://docs.python.org/3/library/itertools.html#itertools.product" rel="nofollow noreferrer"><code>itertools.product()</code> iterator</a> to flatten this to a single loop:</p>
<pre><code>from itertools import product

weeks_expanded = [wn for wn, __ in product(range(1, (sum(months) // 7) + 1), (None,) * 7)]
</code></pre>
<p>This uses a tuple of 7 <code>None</code> references to add the repetition, the loop then ignores those values.</p>
<p>Neither version needs <code>weeks</code> to exist.</p>
</div>
<span class="comment-copy">That's an interesting deviation from the Gregorian calendar months; what calendar system is this?</span>
<span class="comment-copy"><code>weeks</code> can be defined as <code>range(0, sum(months), 7)</code></span>
<span class="comment-copy">Thanks for the solution. It's called a 4-5-4 calendar.</span>
