<div class="post-text" itemprop="text">
<p>I scraped a site for data and I was able to print the desired output with json format containing only value but what i actually needed is to get the data with both key and value pair and save it into output.json format so I can insert into my django database. Here is what I have done so far</p>
<pre><code>import requests
import json
URL ='http://tfda.go.tz/portal/en/trader_module/trader_module/getRegisteredDrugs_products'payload = "draw=1&amp;columns%5B0%5D%5Bdata%5D=no&amp;columns%5B0%5D%5Bname%5D=&amp;columns%5B0%5D%5Bsearchable%5D=True&amp;columns%5B0%5D%5Borderable%5D=True&amp;columns%5B0%5D%5Bsearch%5D%5Bvalue%5D=&amp;columns%5B0%5D%5Bsearch%5D%5Bregex%5D=False&amp;columns%5B1%5D%5Bdata%5D=certificate_no&amp;columns%5B1%5D%5Bname%5D=&amp;columns%5B1%5D%5Bsearchable%5D=True&amp;columns%5B1%5D%5Borderable%5D=True&amp;columns%5B1%5D%5Bsearch%5D%5Bvalue%5D=&amp;columns%5B1%5D%5Bsearch%5D%5Bregex%5D=False&amp;columns%5B2%5D%5Bdata%5D=brand_name&amp;columns%5B2%5D%5Bname%5D=&amp;columns%5B2%5D%5Bsearchable%5D=True&amp;columns%5B2%5D%5Borderable%5D=True&amp;columns%5B2%5D%5Bsearch%5D%5Bvalue%5D=&amp;columns%5B2%5D%5Bsearch%5D%5Bregex%5D=False&amp;columns%5B3%5D%5Bdata%5D=classification_name&amp;columns%5B3%5D%5Bname%5D=&amp;columns%5B3%5D%5Bsearchable%5D=True&amp;columns%5B3%5D%5Borderable%5D=True&amp;columns%5B3%5D%5Bsearch%5D%5Bvalue%5D=&amp;columns%5B3%5D%5Bsearch%5D%5Bregex%5D=False&amp;columns%5B4%5D%5Bdata%5D=common_name&amp;columns%5B4%5D%5Bname%5D=&amp;columns%5B4%5D%5Bsearchable%5D=True&amp;columns%5B4%5D%5Borderable%5D=True&amp;columns%5B4%5D%5Bsearch%5D%5Bvalue%5D=&amp;columns%5B4%5D%5Bsearch%5D%5Bregex%5D=False&amp;columns%5B5%5D%5Bdata%5D=dosage_form&amp;columns%5B5%5D%5Bname%5D=&amp;columns%5B5%5D%5Bsearchable%5D=True&amp;columns%5B5%5D%5Borderable%5D=True&amp;columns%5B5%5D%5Bsearch%5D%5Bvalue%5D=&amp;columns%5B5%5D%5Bsearch%5D%5Bregex%5D=False&amp;columns%5B6%5D%5Bdata%5D=product_strength&amp;columns%5B6%5D%5Bname%5D=&amp;columns%5B6%5D%5Bsearchable%5D=True&amp;columns%5B6%5D%5Borderable%5D=True&amp;columns%5B6%5D%5Bsearch%5D%5Bvalue%5D=&amp;columns%5B6%5D%5Bsearch%5D%5Bregex%5D=False&amp;columns%5B7%5D%5Bdata%5D=registrant&amp;columns%5B7%5D%5Bname%5D=&amp;columns%5B7%5D%5Bsearchable%5D=True&amp;columns%5B7%5D%5Borderable%5D=True&amp;columns%5B7%5D%5Bsearch%5D%5Bvalue%5D=&amp;columns%5B7%5D%5Bsearch%5D%5Bregex%5D=False&amp;columns%5B8%5D%5Bdata%5D=registrant_country&amp;columns%5B8%5D%5Bname%5D=&amp;columns%5B8%5D%5Bsearchable%5D=True&amp;columns%5B8%5D%5Borderable%5D=True&amp;columns%5B8%5D%5Bsearch%5D%5Bvalue%5D=&amp;columns%5B8%5D%5Bsearch%5D%5Bregex%5D=False&amp;columns%5B9%5D%5Bdata%5D=manufacturer&amp;columns%5B9%5D%5Bname%5D=&amp;columns%5B9%5D%5Bsearchable%5D=True&amp;columns%5B9%5D%5Borderable%5D=True&amp;columns%5B9%5D%5Bsearch%5D%5Bvalue%5D=&amp;columns%5B9%5D%5Bsearch%5D%5Bregex%5D=False&amp;columns%5B10%5D%5Bdata%5D=manufacturer_country&amp;columns%5B10%5D%5Bname%5D=&amp;columns%5B10%5D%5Bsearchable%5D=True&amp;columns%5B10%5D%5Borderable%5D=True&amp;columns%5B10%5D%5Bsearch%5D%5Bvalue%5D=&amp;columns%5B10%5D%5Bsearch%5D%5Bregex%5D=False&amp;columns%5B11%5D%5Bdata%5D=expiry_date&amp;columns%5B11%5D%5Bname%5D=&amp;columns%5B11%5D%5Bsearchable%5D=True&amp;columns%5B11%5D%5Borderable%5D=True&amp;columns%5B11%5D%5Bsearch%5D%5Bvalue%5D=&amp;columns%5B11%5D%5Bsearch%5D%5Bregex%5D=False&amp;columns%5B12%5D%5Bdata%5D=id&amp;columns%5B12%5D%5Bname%5D=&amp;columns%5B12%5D%5Bsearchable%5D=True&amp;columns%5B12%5D%5Borderable%5D=True&amp;columns%5B12%5D%5Bsearch%5D%5Bvalue%5D=&amp;columns%5B12%5D%5Bsearch%5D%5Bregex%5D=False&amp;order%5B0%5D%5Bcolumn%5D=0&amp;order%5B0%5D%5Bdir%5D=asc&amp;start=0&amp;length=3911&amp;search%5Bvalue%5D=&amp;search%5Bregex%5D=False"

with requests.Session() as s:
s.headers={"User-Agent":"Mozilla/5.0"}
s.headers.update({'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'})
res = s.post(URL, data = payload)

for data in res.json()['data']:
    serial = data['no']
    certno = data['certificate_no']
    brndname = data['brand_name']
    clssification = data['classification_name']
    common_name = data['common_name']
    dosage_form = data['dosage_form']
    expiry_date = data['expiry_date']
    manufacturer = data['manufacturer']
    manufacturer_country = data['manufacturer_country']
    product_strength = data['product_strength']
    registrant = data['registrant']
    registrant_country = data['registrant_country']
    output = (serial,certno,brndname,clssification,common_name,dosage_form,expiry_date,manufacturer, manufacturer_country,product_strength,registrant, registrant_country )
    my_list = output
    json_str = json.dumps(my_list)
    print (json_str)
</code></pre>
<p>And here is my attached output <a href="https://i.stack.imgur.com/9klSx.png" rel="nofollow noreferrer">screenshot</a>
So how do I approach this?</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/3/library/json.html#basic-usage" rel="nofollow noreferrer">json.dump</a></p>
<pre><code>with open(path, 'w') as file:
    [...]
    json.dump(myPythonList, file)
    file.write('\n')
</code></pre>
</div>
