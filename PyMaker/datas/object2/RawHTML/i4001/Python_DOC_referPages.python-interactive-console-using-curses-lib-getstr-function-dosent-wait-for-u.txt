<div class="post-text" itemprop="text">
<p>I'm trying to do an interactive console using the <a href="https://docs.python.org/3/library/curses.html#module-curses" rel="nofollow noreferrer">curses</a> lib.</p>
<p>similar to this :</p>
<pre><code>import curses

if __name__ == '__main__':
    stdscr = curses.initscr()
    stdscr.nodelay(False)
    curses.echo()
    curses.nonl()

while True:
    stdscr.addstr('#')
    stdscr.refresh()
    command = stdscr.getstr()

    if not command:
        continue

    if command == b'xys':
        stdscr.addstr('Execute xys block and print result')

    elif command == b'qwe':
        stdscr.addstr('Execute qwe block and print result')

    # ...
</code></pre>
<p>But it return this :</p>
<pre><code>#xys
Execute xys block and print result#
#qwe
Execute qwe block and print result#
#
#
#
</code></pre>
<p>(after the <code>Execute qwe block and print result#</code> line I pressed the <code>enter</code> key)</p>
<p>The <code>stdscr.getstr()</code> function only wait for input half the time. The other half <code>command = ''</code> without any input. This is why you see the double <code>#</code> sign or the <code>#</code> sign at the end of each output.</p>
<p>The expecting result should be : </p>
<pre><code>#xys
Execute xys block and print result
#qwe
Execute qwe block and print result
#
</code></pre>
<p>Any recommendation ?</p>
</div>
<div class="post-text" itemprop="text">
<p>I was using the pyCharm terminal (with the <code>run</code> &gt; <code>edit configurations...</code> &gt; <code>emulate terminal in output console</code> checked) but apparently curses lib and pyCharm are not compatible.</p>
<p>When running the script in the normal terminal, it worked perfectly.</p>
<p>Hope this will help someone!</p>
</div>
