<div class="post-text" itemprop="text">
<p>I wrote a script, and I assigned part of it to select random sample of 10% of the files in a dir and copy them to a new dir. This is my method below, but it gives less than 10% (~9.6%) each time, and never the same amount.</p>
<pre><code>for x in range(int(len(files) *.1)):
    to_copy = choice(files)
    shutil.copy(os.path.join(subdir, to_copy), os.path.join(output_folder))
</code></pre>
<p>this gave</p>
<pre class="lang-none prettyprint-override"><code>#files source       run 1        run 2
29841               2852         2845
1595                152          156
11324               1084         1082
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>By calling <a href="https://docs.python.org/3/library/random.html#random.choice" rel="nofollow noreferrer"><code>random.choice()</code></a> repeatedly, you are effectively choosing <a href="https://www.ma.utexas.edu/users/parker/sampling/repl.htm" rel="nofollow noreferrer"><em>with replacement</em></a>. This means that you might be choosing the same file twice, in separate trips around the loop.</p>
<p>Try <a href="https://docs.python.org/3/library/random.html#random.sample" rel="nofollow noreferrer"><code>random.sample()</code></a> instead:</p>
<pre><code>for to_copy in random.sample(files, int(len(files)*.1)):
    shutil.copy(...)
</code></pre>
<p>Consider this program:</p>
<pre><code>import random

seq = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j']

for _ in range(5):
    i = random.choice(seq)
    print(i, end=' ')
print()
for i in random.sample(seq, 5):
    print(i, end=' ')
print()
</code></pre>
<p>Here are two runs of the program:</p>
<pre><code>$ python x.py 
g f e c b 
c j b a d 
$ python x.py 
c e a a e 
j f e a i 
</code></pre>
<p>Notice that, in the first line of the second run <code>random.choice()</code> randomly selected <code>a</code> twice and <code>e</code> twice. If these were filenames, it would appear that only 3 files were copied. In fact, five copies are performed, but the redundant copies don't add to the file count. Of course the number of repeated identical choices is random, leading to the inconsistent behavior you see.</p>
<p>On the other hand, the second line, derived from <code>random.sample()</code> will never have repeated elements, since <code>random.sample()</code> chooses <em>without replacement.</em></p>
</div>
<span class="comment-copy">Are you positive that the "files" variable is the same length every time? As for the "9.6%" thing. You'll get a decimal if the number of files is not divisible by 10.</span>
<span class="comment-copy">Yes, I am running tests on the same source folder so in the least it should be the same # of files each time. I understand getting decimals with a 10 divisor, but 29841 should give around 2984 (give or take), not 2852 or 2854. I am confused as to why.</span>
<span class="comment-copy">What does <code>choice</code> do? Further, you never use the <code>x</code> variable; what is the point of your <code>for</code> loop?</span>
<span class="comment-copy">this solved it.. thanks</span>
