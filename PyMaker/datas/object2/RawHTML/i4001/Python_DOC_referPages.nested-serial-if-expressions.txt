<div class="post-text" itemprop="text">
<p>Can I do more complex <code>if expressions</code> than strict <code>a = b if c else d</code>. Can I string together serial expressions, or nest an <code>if expression</code> inside another <code>if expression</code>?  I cannot find an answer in the docs or online.</p>
<p>CONTEXT (some of it is only relevant to explain why I am seeking this, rather than another solution):     </p>
<ul>
<li><p>I have two scalar variables (<code>a</code> and <code>c</code>) that either have an actual value or are set to -1. If they have a value this is always true <code>c - a = 2</code> (they are list indexes, for specific items in a list, but the items are not always present. </p></li>
<li><p>If either <code>a</code> or <code>c</code> has a value other than -1 , then I want to create a third scalar variable <code>b</code> that has a specific value (the value between <code>a</code> and <code>c</code>).</p></li>
<li>if neither <code>a</code> nor <code>c</code> has a value, then I want to set <code>b = -1</code></li>
</ul>
<p>so would ideally write something like this: </p>
<p><code>b = a+1 if a != -1 else c-1 if c != -1 else -1</code> </p>
<p>I cannot figure out if this is allowed - legal. And if it is legal, does it get evaluated sequentially? An alternative specification would be hierarchical:</p>
<p><code>b = (a+1 if a != -1 else c-1) if (c != -1 or a != -1) else -1</code> </p>
<p>Is either of these legal? Advisable? Thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p>According to the <a href="https://docs.python.org/3/reference/expressions.html#conditional-expressions" rel="nofollow noreferrer">documentation</a>, the part after the <code>else</code> in a conditional can be any expression, explicitely including another conditional expression.</p>
<p>So the following is a valid Python expression:</p>
<pre><code>a+1 if a != -1 else b-1 if b != -1 else -1
</code></pre>
<p>its value is as expected:</p>
<ul>
<li>a+1 if a!=-1 (whatever value for b)</li>
<li>b-1 if a == -1 and b != -1</li>
<li>-1 if a== -1 and b == -1</li>
</ul>
<p>But as readability is a major concern in Python, please do not abuse of those nexted conditional expressions...</p>
</div>
<div class="post-text" itemprop="text">
<p>Just don't.... you should make sure your code is readable and maintainable over making it all fit on one line. So separate it out into multiple different if statements as required or look into refactoring the logic involved.</p>
<p>Above all, when you introduce real variable names you'll have trouble trying to make it conform to pep8 standards.</p>
</div>
<span class="comment-copy">The second one is certainly easier for a human to read, never mind the Python interpreter.</span>
<span class="comment-copy">Expressions are read left to right and the <i>nesting</i> happens in the same order. Either way - don't do it, it's hard to read and your code won't execute any faster while it's a bug waiting to happen.</span>
<span class="comment-copy">Is it me or is there a mess between <code>b</code> and <code>c</code> variable names?</span>
<span class="comment-copy">@SergeBallesta not just you -- fixed.</span>
