<div class="post-text" itemprop="text">
<p>Is there any way to delete the build cache while using <code>WebSupport.build</code> as in <code>make clean</code> in Sphinx? I need to delete the build cache because if the image with the same name but different image content is built one or more time using <code>WebSupport.build</code> the same old image will be shown unless and until the name of the image is changed.</p>
<p>I am using <code>Websupport.build</code> to build docs from <code>rst</code> format like as:</p>
<pre><code>from sphinxcontrib.websupport import WebSupport
support = WebSupport(srcdir=srcdir, builddir=builddir,search="xapian")
support.build()
document= support.getdocument("index")
</code></pre>
<p>and render accordingly in <code>flask</code> application</p>
<p>with following <code>jinja</code> template:</p>
<pre><code>{% extends 'baselayout.html' %}

{% block doc_sidebar %}
    {{ document.sidebar|safe }}
{% endblock %}

{% block doc_content %}
    {{ document.body|safe }}
{% endblock %}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This is the solution I have found working for me: Removing <code>builddir</code> if it exists only to remove the previous build. </p>
<pre><code>import os
import shutil
from sphinxcontrib.websupport import WebSupport

def build_doc(srcdir, builddir):
    if os.path.exists(builddir):
        shutil.rmtree(builddir)
    support = WebSupport(srcdir=srcdir, builddir=_builddir,search="xapian")
    support.build()
</code></pre>
<p>Thank you, Everyone!!!</p>
</div>
<span class="comment-copy">Sanity check: is the image cached in the web browser or on the file system? If the latter, you could always invoke <code>make clean</code> via an <a href="https://docs.python.org/3.5/library/os.html#os.system" rel="nofollow noreferrer"><code>os.system</code></a> call before building.</span>
<span class="comment-copy">Its cached in the file system. What do you mean by invoking<code>make clean</code> via <code>os.system</code> call before building please elaborate? You meant to remove <code>builddir</code>  before each build?</span>
<span class="comment-copy">Yes. Import <code>os</code>, then craft a command to pass into its method. I linked to the Python 3 docs for <code>os</code> earlier for more information.</span>
<span class="comment-copy">I suggest using <code>shutil.rmtree(builddir)</code> to remove <code>builddir</code>. <a href="https://docs.python.org/3/library/shutil.html#shutil.rmtree" rel="nofollow noreferrer">docs.python.org/3/library/shutil.html#shutil.rmtree</a></span>
<span class="comment-copy">Ok Thanks, I will go through it.</span>
