<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/17006641/single-line-nested-for-loops">Single Line Nested For Loops</a>
<span class="question-originals-answer-count">
                    3 answers
                </span>
</li>
</ul>
</div>
<p>I'm struggling to get an understanding of how Python treats for loops that come after variables.  I think it might have something to do with iterables/iterators in Python, but I'm not sure I really understand the usage.  Basically in the following code I understand the math of why it works to produces the combinations of the variables, but I don't get how this is a valid way to create a list.  In my experience with other languages, for loops always cone before the expressions and are properly nested when there is more than one.</p>
<pre><code>temp = [('CH', 'AG', 'ME', 'GS')]
[(temp[i],temp[j]) for i in range(len(temp)) for j in range(i+1, len(temp))]

#produces:[('CH', 'AG'), ('CH', 'ME'), ('CH', 'GS'),
#('AG', 'ME'),('AG', 'GS')('ME', 'GS')]
</code></pre>
<p>Can anyone explain what's going on here?</p>
</div>
<div class="post-text" itemprop="text">
<p>The inline <code>for</code> loops end up nested within each other. If you were to write it out, you'd do it like this:</p>
<pre><code>temp = [('CH', 'AG', 'ME', 'GS')]
ret = []
for i in range(len(temp)):
    for j in range(i+1, len(temp)):
        ret.append((temp[i], temp[j]))
</code></pre>
<p>Basically, if you have multiple inline for loops, they get nested such that the first one you declare is the outer loop and the last one you declare is the inner loop. See <a href="https://stackoverflow.com/questions/17006641/single-line-nested-for-loops">this Stackoverflow question</a> for a more detailed explanation.</p>
<p>Python allows these "list comprehensions" as a shorthand, because it's easier and more "pythonic" (for a definition of what this means, open a python console and type <code>import this</code>; the relevant platitude here is "Flat is better than nested"). You see how you can create the entire list in one line, in a very simple-to-understand manner, rather than having to write out four lines and build up the array slowly step-by-step like you'd have to in most other languages.</p>
</div>
<span class="comment-copy">It's a list comprehension. There are lots of references/tutorials online about them.</span>
<span class="comment-copy">Complexity-wise it will be similar to other languages. You should look for list comprehension</span>
<span class="comment-copy">I would start with the official Python documentation on <a href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions" rel="nofollow noreferrer">list comprehensions</a>.</span>
<span class="comment-copy">I'm a bit late though but let me add one thing that list comprehension is a bit fast than trivial for loop.</span>
<span class="comment-copy">Thank you!  I didn't know what to search in SO because I've never come across these before and didn't know what they were called, appreciate the help!</span>
