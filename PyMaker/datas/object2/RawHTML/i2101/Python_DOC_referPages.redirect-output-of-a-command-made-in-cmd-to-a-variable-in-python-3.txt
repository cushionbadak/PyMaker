<div class="post-text" itemprop="text">
<p>I want to get the output of a python script which is made to run in cmd to a <strong>variable</strong> in the host script. I am partially able to do it but not getting the desired output. Please guys before downvoting and closing this question, note that this is different from other questions regarding the same issue</p>
<p>Here is the code that i wrote as my script that needs to be run:</p>
<pre><code>import click  #--&gt;pip install click
import sys
import time
#number of iterations taken
iters = 5
#record the starting time
start = time.time()
#iterate through loop
for j in range(1, iters + 1):
    print(f"iteration {j} out of {iters}.")
    #Generate progressbar
    with click.progressbar(range(1)) as bar:
        for i in bar:
            pass
    #End of Progressbar
#Record the Ending time
end = time.time()
print(f"Execution took approximately {round((end-start), 3)} seconds") #print the time taken rounded off to 3 decimals
</code></pre>
<p>Here is the out that i need(i get the output when i run the script natively):</p>
<pre><code>iteration 1 out of 5.
  [####################################]  100%
iteration 2 out of 5.
  [####################################]  100%
iteration 3 out of 5.
  [####################################]  100%
iteration 4 out of 5.
  [####################################]  100%
iteration 5 out of 5.
</code></pre>
<p>Note that i want the output to be stored in my variable every time a new character is printed on the screen. i.e in realtime. </p>
<p>here is the code that i wrote using subprocesses to get the output of the file:</p>
<pre><code>import subprocess
from subprocess import run, PIPE
cmd = 'python iter.py'
output = subprocess.run(cmd, shell=True, universal_newlines=True, stdout=PIPE, stderr=PIPE) #variable that i want to store the value in.
print(output.stdout)
</code></pre>
<p>But unfortunately, it is outputting only this:</p>
<pre><code>iteration 1 out of 5.

iteration 2 out of 5.

iteration 3 out of 5.

iteration 4 out of 5.

iteration 5 out of 5.

Execution took approximately 0.001 seconds
</code></pre>
<p>Clearly, i have <strong>lost my progressbar!</strong> and that is essential for what i'm working on! How do i make sure that even the progressbar is stored in the variable.</p>
<p>NOTE - I STRICTLY NEED THE OUTPUT TO BE STORED IN A VARIABLE SO THAT I CAN REFERENCE IT IN THE FUTURE.</p>
</div>
<div class="post-text" itemprop="text">
<p>The progress bar will only be displayed in a terminal.</p>
<p><a href="https://click.palletsprojects.com/en/7.x/api/#click.progressbar" rel="nofollow noreferrer">https://click.palletsprojects.com/en/7.x/api/#click.progressbar</a></p>
<blockquote>
<p>By default, this progress bar will not be rendered if the file is not a terminal.</p>
</blockquote>
</div>
<span class="comment-copy">Please help me out guys!</span>
<span class="comment-copy">Have you tried <code>subprocess.check_output</code> ? <a href="https://docs.python.org/3/library/subprocess.html#subprocess.check_output" rel="nofollow noreferrer">docs.python.org/3/library/…</a></span>
<span class="comment-copy">Yes i have used the check_output function sir, but im not able to get the progressbar to show up yet!</span>
<span class="comment-copy">why don't you add the progressbars manually then?</span>
<span class="comment-copy">Thanks Brother!</span>
<span class="comment-copy">Do you have any idea how to enable storing of the output in realtime. i.e every change in the cmd output should get changed in the variable in realtime.</span>
<span class="comment-copy">Don't know. But there are many other questions about this. <a href="https://stackoverflow.com/questions/17411966/printing-stdout-in-realtime-from-a-subprocess-that-requires-stdin" title="printing stdout in realtime from a subprocess that requires stdin">stackoverflow.com/questions/17411966/…</a></span>
<span class="comment-copy">Thank you so much sir! Youve helped me a lot god bless!</span>
