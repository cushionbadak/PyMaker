<div class="post-text" itemprop="text">
<p>I currently have a single folder containing x no. of .JPEG images. Image filenames are in a specific order: <code>label_randomNo._randomString.JPEG</code>.
Using a custom Python function, I want to be able to copy/paste images (in my local machine) in subfolders based on the 'label' mentioned in the filenames.</p>
<p>For example: if a filename has car_23_a23d.JPEG, the function should create a folder called car &amp; then copy paste that image from the source folder, into the sub folder. This needs to be done to all the images in the source folder based on the label in the filename. Obviously, when it loops, if (for example) a car subfolder has already been created, it should just copy/paste the image there and not create another subfolder called car.</p>
<p>My aim is to then take this organised folder structure and use ImageDataGenerator.flow_from_directory to load it as my raw dataset for my CNN model. 
Thanks!</p>
<p>Regards,
Abhay.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/3/library/shutil.html" rel="nofollow noreferrer">shutil</a> to copy the file from one source folder to the destination folder. mypath is the folder where all the files are stored. Then we use <a href="https://docs.python.org/2/library/os.html#os.listdir" rel="nofollow noreferrer">os.listdir()</a> that will get you everything that's in a directory. split the file name by "_" and use the 0th index to make a new directory.
First we check if hte directory already exists in the path. If it does not then create a new directory and copy the image. Otherwise just copy the image instead of making a new directory.</p>
<pre><code>import os, shutil
from os import listdir

def start():
    mypath = "source/"
    for files in listdir(mypath):
        directory = (files.split('_'))[0]
        if not os.path.exists(directory):
            os.makedirs(directory)
            shutil.copy("source/" + files, (directory))
        else:
            shutil.copy("source/" + files, (directory))
</code></pre>
</div>
<span class="comment-copy">What have you tried so far and what problems are you running into would be good things to include in a question</span>
