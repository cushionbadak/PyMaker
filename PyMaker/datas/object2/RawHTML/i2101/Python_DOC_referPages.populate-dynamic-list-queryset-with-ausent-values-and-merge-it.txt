<div class="post-text" itemprop="text">
<p>I'm trying create a list with 12 months and yours respect value, but if month/value ausent I need create a default "0" and merged with dynamic data.</p>
<pre><code>from collections import OrderedDict
_qs = CheckOut.objects.filter(date_service__year=datetime.datetime.now().year)\
    .values_list('date_service__month')\
    .annotate(total=Sum('checkoutitem__total_value'))\
    .order_by('date_service__month')

dt = OrderedDict(_qs)  # Wrap queryset with an OrderedDict

months = list(dt.keys())
valore = list(dt.values())
extra_context['profit'] = [months, valore]
</code></pre>
<p>And the result in template django:</p>
<pre><code> [[9, 10, 11], [Decimal('800.00'), Decimal('300.00'), Decimal('100.00')]] 
</code></pre>
<p>So, I need create the months: 1,2,3,4,5,6,7,8,12 and create the values (if not exists in queryset, default "0". And keep the Order.</p>
</div>
<div class="post-text" itemprop="text">
<p>you could simply work on the <code>dict</code> using <a href="https://docs.python.org/3/library/stdtypes.html#dict.setdefault" rel="nofollow noreferrer"><code>setdefault()</code></a>:</p>
<pre><code>dt = OrderedDict(_qs)  # Wrap queryset with an OrderedDict

for i in range(1, 13):
    dt.setdefault(i, Decimal('0.00'))
</code></pre>
<p>This only inserts the value 0 if the key is not present.</p>
<hr/>
<p>EDIT</p>
<p>If you want it sorted and as strings, you could create a new dict; because its a small dict, the cost will almost be neglible compared to the query.</p>
<pre><code>dt = OrderedDict(sorted(
    (k, str(v))
    for k, v in dt.items()))
</code></pre>
<p>This should use the <code>str()</code> of the <code>Decimal</code> numbers to get a string without the word "Decimal" in it.</p>
</div>
<span class="comment-copy">thanks, works fine. How I reorder now, this is the result: ` [[9, 10, 11, 1, 2, 3, 4, 5, 6, 7, 8, 12], [Decimal('800.00'), Decimal('300.00'), Decimal('100.00'), Decimal('0.00'), Decimal('0.00'), Decimal('0.00'), Decimal('0.00'), Decimal('0.00'), Decimal('0.00'), Decimal('0.00'), Decimal('0.00'), Decimal('0.00')]]`</span>
<span class="comment-copy">@RicardoPrado edited my answer to include sorting</span>
<span class="comment-copy">Thank you man! You're great. Last question, How I do to remove "Decimal" word, and put a list with the values [100,200,300, ... ] and not [Decimal(100.00), Decimal(200.00) ..]</span>
<span class="comment-copy">Use <code>str()</code> on the values; I edited my answer</span>
<span class="comment-copy">Thanks. Problem solved!</span>
