<div class="post-text" itemprop="text">
<p>I have gone through previous posts on this error. But, that does not help me. So I am putting for attention afresh. The code is as follows.</p>
<pre><code>import os
replacements = {':': '_', '+': '_'}

for fn in os.walk('/media/ambijat/Dataworld/f23/Dropbox/ttgis'):
    nn = fn
    for k, v in replacements.items():
        nn = nn.replace(str(k), str(v))
        if nn != fn:
             os.rename(fn, nn)
</code></pre>
<p>This on running gives the error <code>'tuple' object has no attribute 'replace'</code> and seems to be giving error. I am using dict for replacement of special characters in filenames, eg., <code>[,&amp;&lt;&gt;*?|\";+:'() ]</code>. Is there any better way of doing this. thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/os.html#os.walk" rel="nofollow noreferrer"><code>os.walk</code></a> yields tuples:</p>
<blockquote>
<p>For each directory in the tree rooted at
  directory top (including top itself), it yields a <strong>3-tuple (dirpath,
  dirnames, filenames)</strong>.</p>
</blockquote>
<p>To extract just the filename, either use indexing or sequence unpacking. Any of these will work:</p>
<pre><code>nn = fn[-1]
nn = fn[2]
_, _, nn = fn
</code></pre>
<p>Alternatively, as @AntonvBR points out, you can use sequence unpacking in the definition of your <code>for</code> loop iterable:</p>
<pre><code>for _, _, fn in os.walk('/media/ambijat/Dataworld/f23/Dropbox/ttgis'):
    nn = fn
    # as before..
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>In your first piece of code, <code>fn</code> is a tuple as <a href="https://docs.python.org/3/library/os.html#os.walk" rel="nofollow noreferrer"><code>os.walk()</code></a> returns a tuple of dirpath (string), dirnames (list), filenames (list). So when assigning it to <code>nn</code>, <code>nn</code> becomes the tuple and using <code>nn.replace(k, v)</code> in turn will not work because a tuple doesn't have the method <code>replace</code>.</p>
<p>In your second piece of code, <code>nn</code> is now equal to <code>fn[2]</code> (list of dirnames). Unfortunately, a list doesn't have a <code>replace</code> method either. Assuming that you are replacing all the <code>:</code> and <code>+</code> in your filenames, then you need to loop through each of these filenames:</p>
<p>Other things I have observed and changed in the code:</p>
<ul>
<li>the filenames returned by <code>os.walk</code> do not include the full path of the file, which means that <code>os.rename</code> may not find the file if the script is not run in the same directory as the directory you are renaming files. So I incorporated the <code>path</code> during the renaming as well.</li>
<li>after <code>os.rename</code>, the file in the directory will get renamed, but the name of the file that the code read would still be the same. As such, you have to change the name of the file in the code as well.</li>
</ul>
<p>So:</p>
<pre><code>import os
replacements = {':': '_', '+': '_'}

for fn in os.walk('/media/ambijat/Dataworld/f23/Dropbox/ttgis'):
    path = fn[0]
    nn = fn[2]
    for filename in nn:
        newname = filename
        for k, v in replacements.items():
            newname = newname.replace(str(k), str(v))
            if newname != filename:
                 os.rename(os.path.join(path, filename), os.path.join(path, newname))
                 filename = newname
</code></pre>
<p>Though I would cut one more code line through the following suggestion:</p>
<pre><code>import os
replacements = {':': '_', '+': '_'}

for path, _, filenames in os.walk('/media/ambijat/Dataworld/f23/Dropbox/ttgis'):
    for filename in filenames:
        newname = filename
        for k, v in replacements.items():
            newname = newname.replace(k, v)
            if newname != filename:
                 os.rename(os.path.join(path, filename), os.path.join(path, newname))
                 filename = newname
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The problem is the line</p>
<pre><code>nn = nn.replace(str(k), str(v))
</code></pre>
<p><code>os.walk</code> returns a sequence of tuples  in the form <code>(dirpath, dirnames, filenames)</code> according to <a href="https://docs.python.org/3.5/library/os.html#os.walk" rel="nofollow noreferrer">the Python docs</a>. So you're trying to call the <code>.replace()</code> method on a tuple, which is giving you an error because the <code>tuple</code> class has no such method. I assume you meant to use the <code>str.replace()</code> method.</p>
<p>Here's some code that should work (tested on some directories I made for the purpose on my machine):</p>
<pre><code>import os
replacements = {':': '_', '+': '_'}

for directory in os.walk('/media/ambijat/Dataworld/f23/Dropbox/ttgis'):
    filenames = directory[-1]

    for k, v in replacements.items():

        for filename in filenames:
            newname = filename.replace(k, v)

            if newname != filename:
                os.rename(directory[0]+'\\'+filename, directory[0]+'\\'+newname)
</code></pre>
</div>
<span class="comment-copy">Yes, well explained too. However, it would be more pythonic and I know you agree to change this line <code>for fn in os.walk('/media/ambijat/Dataworld/f23/Dropbox/ttgis')</code> instead of adding a new variable (to _, _, nn) for instance.</span>
<span class="comment-copy">@AntonvBR, Good point, thanks. Have updated with that option.</span>
<span class="comment-copy">running this by copy paste gives error as <code>FileNotFoundError: [Errno 2] No such file or directory:</code> ....</span>
<span class="comment-copy">I have made a request with re-coded lines, please see.</span>
<span class="comment-copy">@ambrishdhaka why are you not looping on <code>fn</code>? You are renaming only the 2nd file in the list of files in your edited code, that's why the second time. But that also made me realise an issue. I have edited my answer so that the filename gets renamed in the code as well.</span>
<span class="comment-copy">If I exactly copy paste your code I get this error <code>FileNotFoundError: [Errno 2] No such file or directory: 'SIPRI_military</code>......</span>
<span class="comment-copy">The reason why you see the weird behaviour is that the file name gets renamed, but not the file name string in the code. That's why I inserted <code>filename = newname</code> in one of my earlier edits.</span>
<span class="comment-copy">I can sense only some part of your explanation, but how to get into a code is simply miles away from me. Would be thankful to you if you could give some code lines replacement.</span>
<span class="comment-copy">@ambrishdhaka I have added more detail to my answer now, I hope this is helpful. Also I would recommend referring to the answer above, which offers alternative solutions.</span>
<span class="comment-copy">I applied the modifications as coded above. The <code>replace</code> thing now gives the list instead of tuple. Error remains the same.</span>
