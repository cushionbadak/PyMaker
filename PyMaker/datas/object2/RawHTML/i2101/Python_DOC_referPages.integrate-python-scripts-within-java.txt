<div class="post-text" itemprop="text">
<p>So, I don't really know how to formulate this correctly but I'll do my best.</p>
<p>I am writing a game engine (not really for anything, I am trying a lot of ways to get certain things working to practice with ways of programming). And for this I want scripting. And I know how to add scripts from within Java but I have seen game engines that use multiple languages.</p>
<p>So what I want is to add python scripts that are run from with the Java process and can interact with Java object.</p>
<p>Like this Java Object that has some parameters (just an example)</p>
<pre><code>public class Entity {

    Script script = new Script ( "example.py" );

    loc_x = 0;
    loc_y = 0;
    loc_z = 0;

    public void update () {
        script.run ();
    }
}
</code></pre>
<p>With the python script being this</p>
<pre><code>loc_x += 1
loc_z = loc_x
</code></pre>
<p>or</p>
<pre><code>entity.loc_x += 1
entity.loc_z = entity.loc_x
</code></pre>
<p>I just have no way how to implement this. If this question has already been asked than please show me. <code>If Runtime.getRuntime ().exec ( "example.py" );</code> is my best shot for this than that's fine. In that case I just want to know how to share those parameters.</p>
<p>Also, if another language (for example; LUA) is better for something like this then that's also fine. I am just completely blank on this subject.</p>
</div>
<div class="post-text" itemprop="text">
<p>So actually this is quite simple to do with Java having this built in from the box.</p>
<p>Java has this thing that is called 'ScriptEngineManager'. To use it you just do the following:</p>
<pre><code>ScriptEngineManager sem = new ScriptEngineManager ();
ScriptEngine se = sem.getEngineByName ( "python" );
</code></pre>
<p>Now there are a few ways to runa script. Simple call the <code>se.eval ()</code> method. You can give this either a String or a Reader and this way it will run the script.</p>
<p>Now to make it have some variables simply use the <code>se.put</code> method. You need to give this two parameters; a String and an Object.</p>
<p>For example:</p>
<pre><code>se.put ( "entity", entity ); // with entity being defined earlier
</code></pre>
<p>The onlt thing to keep in mind is that this script manager does not have built in python support. You need to either create your own ScriptEngine for this or use third party software. I found <a href="http://www.jython.org" rel="nofollow noreferrer">jython</a> and this seems to be working prety well. If you download the standalone jar and put that in your classpath it works. No need for any function calling.</p>
<p>Now in the Script you can call any public member of entity. All the objects, values and those sub-objects get passed through to the script.</p>
<p>My end-code:</p>
<p><strong>Entity class</strong></p>
<pre><code>public class Entity {

    String source =
            "entity.loc_x += 1\n" +
            "entity.loc_z = entity.loc_x";
    ScriptEngine se;

    loc_x = 0;
    loc_y = 0;
    loc_z = 0;

    public Entity () {
        ScriptEngineManager sem = new ScriptEngineManager ();
        se = sem.getEngineByName ( "python" );
        se.put ( "entity", this );
    }

    public void update () {
        se.eval ( source );
    }
}
</code></pre>
<p>I hope I helped anyone with this. It was pretty fun tinkering with all of this.</p>
</div>
<span class="comment-copy">It's more usual to integrate Python into programs written in C, or other languages that can naturally interface with the <a href="https://docs.python.org/3/extending/embedding.html" rel="nofollow noreferrer">C API</a>. With Java, the options for embedding Python are more clunky or outdated (like Jython).</span>
<span class="comment-copy">So would you recommend me using another language than Python or switch () from Java to another language like C# or so?</span>
<span class="comment-copy">I don't know what people do these days when they want scripting in a Java program. Maybe they just write more Java. Maybe they use Scala or some other JVM language. Maybe they use Jython. Maybe they embed CPython with something like JNI or JNA. There are a bunch of options, and I haven't tried most of them.</span>
<span class="comment-copy">Scala is a new language to me. I looked it up and has amazing integration with java but it didn't really make me as excited as python does... After some further searching I found something real easy and nice. Sometimes saying something out loud or (on the internet) posting a question seems to make the difference for one's brain to start acting. I'll post my own answer soon in case anyone else needs this in there project.</span>
