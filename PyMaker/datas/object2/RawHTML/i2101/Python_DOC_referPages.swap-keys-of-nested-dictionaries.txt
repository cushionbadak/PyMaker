<div class="post-text" itemprop="text">
<p>I have a dictionary as follows:</p>
<p>Each key has a dictionary associated with it.</p>
<pre><code>dict_sample = {'a': {'d0': '1', 'd1': '2', 'd2': '3'}, 'b': {'d0': '1'}, 'c': {'d1': '1'}}
</code></pre>
<p>I need the output as follows:</p>
<pre><code>output_dict = {'d0': {'a': 1, 'b': 1}, 'd1': {'a': 2, 'c': 1}, 'd2': {'a': 3}}
</code></pre>
<p>I'd appreciate any help on the pythonic way to achieve this. Thank You !</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <code>dict.setdefault</code> on a new dict with a nested loop:</p>
<pre><code>d = {}
# for each key and sub-dict in the main dict
for k1, s in dict_sample.items():
    # for each key and value in the sub-dict
    for k2, v in s.items():
        # this is equivalent to d[k2][k1] = int(v), except that when k2 is not yet in d,
        # setdefault will initialize d[k2] with {} (a new dict)
        d.setdefault(k2, {})[k1] = int(v)
</code></pre>
<p><code>d</code> would become:</p>
<pre><code>{'d0': {'a': 1, 'b': 1}, 'd1': {'a': 2, 'c': 1}, 'd2': {'a': 3}}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I believe this produces the desired output</p>
<pre><code>&gt;&gt;&gt; from collections import defaultdict
&gt;&gt;&gt; d = defaultdict(dict)
&gt;&gt;&gt;
&gt;&gt;&gt; dict_sample = {'a': {'d0': '1', 'd1': '2', 'd2': '3'}, 'b': {'d0': '1'}, 'c': {'d1': '1'}}
&gt;&gt;&gt;
&gt;&gt;&gt; for key, value in dict_sample.items():
...     for k, v in value.items():
...         d[k][key] = v
...
&gt;&gt;&gt; d
defaultdict(&lt;class 'dict'&gt;, {'d0': {'a': '1', 'b': '1'}, 'd1': {'a': '2', 'c': '1'}, 'd2': {'a': '3'}})
</code></pre>
</div>
<span class="comment-copy">Thank You ! Could you explain the code briefly. I am new to python.</span>
<span class="comment-copy">You're welcome. I've updated my code with inline comments that should help explain it.</span>
<span class="comment-copy">Thank You !. What is defaultdict ? How does it help as opposed to simply initializing d = {}. I am not following it. Kindly explain.</span>
<span class="comment-copy">@ChandanSingh <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="nofollow noreferrer">docs.python.org/3/library/â€¦</a></span>
