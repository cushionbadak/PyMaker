<div class="post-text" itemprop="text">
<p>I'm pretty new to coding and I'm stuck on this problem. Written in python.</p>
<pre><code>import logging
import os
import sys
import json
import pymysql
import requests
import csv

## set up logger to pass information to Cloudwatch ##
#logger = logging.getLogger()
#logger.setLevel(logging.INFO)

## define RDS variables ##
rds_host = 'host'
db_username = 'username'
db_password = 'password'
db_name = 'name'

## connect to rds database ##
try:
  conn = pymysql.connect(host=rds_host, user=db_username, password=db_password, db=db_name, port=1234,
                     connect_timeout=10)
except Exception as e:
  print("ERROR: Could not connect to MySql instance.")
  print(e)
  sys.exit()
print("SUCCESS: Connection to RDS mysql instance succeeded")


def main():
  with conn.cursor() as cur:
      cur.execute("SELECT Domain FROM domain_reg")
      domains = cur.fetchall()

  # logger.info(domains)

  conn.close()

 new_domains = []
 for x in domains:
      a = "http://" + x[0] + ("/orange/health")
      new_domains.append(a)



  print(new_domains)

  for y in new_domains:
      try:
          response = requests.get(y)
          if response.status_code == 200:
              print("Domain " + y + " exists")
          else:
              print("Domain " + y + " does not exist; Status code = " + str(response.status_code))
      except Exception as e:
          print("Exception: With domain " + y)

  with open("new_orangeZ.csv", "w", newline='') as csv_file:
      writer = csv.writer(csv_file, delimiter=',')
      for line in new_domains:
      writer.writerow([new_domains])

if __name__ == "__main__":
  main()
</code></pre>
<p>This code does create a CSV file, but it's not exactly exporting what I want it to export. It only creates a csv file listing only the "Y" and I understand that because i'm calling "new_domains" in writer.writerow. I'm trying to figure out how to also export the print function that matches with the if else statement into the csv, if that makes sense. Sorry if this may sounds gibberish, like I said, I'm super new to coding. Was hoping to post a picture of what I get in the csv file vs what I wanted but I'm new to stackoverflow also so it doesn't allow me to post pictures haha.</p>
<p>Thank you!!!</p>
</div>
<div class="post-text" itemprop="text">
<p>print() only displays the strings on the screen.
You need to remember them somewhere, like in a new list:</p>
<pre><code>result=[] #somewhere at the beginning
...
    print("Domain " + y + " exists")
    result.append([y,"Domain " + y + " exists"]) #after each print
</code></pre>
<p>and save both in the CSV file with something like:</p>
<pre><code>    for domain,status in new_domains:
        writer.writerow([domain, status])
</code></pre>
<p>It's easier to save the domains again, as the for / in may not keep their order.</p>
<p>By the way, with "for line in new_domains:" I guess you should have written "line" in the CSV insead of "new_domains"...</p>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<p><strong>Question</strong>: m trying to figure out how to also export the print function that matches with the if else statement into the csv</p>
</blockquote>
<p>If you want to <code>print</code> into a file, you have to give the file object to <code>print(..., file=&lt;my file object&gt;</code>. In your example, move the <code>for ...</code> inside of <code>with ...</code>.</p>
<blockquote>
<p><strong>Note: It's no good Idea to use <code>csv.writer(...</code> for <em>non</em> csv data"</strong></p>
<pre><code>with open("test", "w", newline='') as my_file_object:
    for y in new_domains:
</code></pre>
</blockquote>
<hr/>
<blockquote>
<p>From <a href="https://docs.python.org/3/library/functions.html#print" rel="nofollow noreferrer">Python Documentation - Built-in Functions</a></p>
<blockquote>
<p><strong>print(*objects, sep=' ', end='\n', file=sys.stdout, flush=False)</strong></p>
<p>Print <code>objects</code> to the text stream <code>file</code>, separated by <code>sep</code> and followed by <code>end</code>.<br/>
<code>sep</code>, <code>end</code>, <code>file</code> and <code>flush</code>, if present, must be given as keyword arguments.</p>
<p>The <code>file</code> argument must be an <strong>object with a write(string) method</strong>; if it is not present or None, <strong>sys.stdout</strong> will be used. </p>
</blockquote>
</blockquote>
</div>
<span class="comment-copy">please correct your indentation or show the rest of your code</span>
<span class="comment-copy">Do you want to print Domain 'y' exists in csv?</span>
<span class="comment-copy">hey @depperm sorry, uploaded the rest of the code.</span>
<span class="comment-copy">hey @IrfanuddinShafi Yes!</span>
<span class="comment-copy">Create a string variable with <code>y</code> in it and write them directly to your file.</span>
<span class="comment-copy">Hey! I tried what you suggested and it worked. Thank you</span>
