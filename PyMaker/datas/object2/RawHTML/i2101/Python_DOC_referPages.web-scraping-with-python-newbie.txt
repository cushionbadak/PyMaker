<div class="post-text" itemprop="text">
<p>I'm just learning about python &amp; web scraping, I'm trying to scrape sectional times from attheraces &amp; I can get the data into a spreadsheet but it is all vertical &amp; I want to get it as a horizontal table (like dispalyed on the website), so far I have this...</p>
<pre><code>from urllib.request import urlopen as uReq
from bs4 import BeautifulSoup as soup

my_url = "http://www.attheraces.com/ajax/getContent.aspx?ctype=sectionalsracecardresult&amp;raceid=1062194&amp;page=/racecard/Windsor/8-October-2018/1325&amp;dtype=times"

uClient = uReq (my_url)
page_html =uClient.read()
uClient.close()

page_soup=soup(page_html, "html.parser")

containers = page_soup.findAll ("div",{"class":"card-body__td card-body__td--centred card-cell__time card-cell__time--8-sectionals"})

filename = "sectionals.csv"
f= open (filename, "w")

headers = "sectional\n"

f.write(headers)

for container in containers:
    sectional = container.div.div.span.text

    print(sectional)


    f.write(sectional + "," + "\n")

f.close()   
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If you go directly to the cells, you'll have to make assumptions about the rows. Start with the rows:</p>
<pre><code>containers = page_soup.findAll("div", {"class":"card-cell card-cell--primary card-cell--primary--no-only"})

# Open a file handle here and use it to create a csv writer (I like to use DictWriter).

for container in containers:
    row = []

    for cell in container.findAll("div", {"class":"card-body__td card-body__td--centred card-cell__time card-cell__time--8-sectionals"}):
        sectional = cell.div.div.span.text
        row.append(sectional)

    # Write a row to your csv writer here.
    print(row)
</code></pre>
<p>Look into using Python's <a href="https://docs.python.org/3/library/csv.html" rel="nofollow noreferrer"><code>csv</code></a> module to avoid common issues. Also, the <code>with</code> syntax is a great way to make sure your resource management is correct; <a href="https://docs.python.org/3/library/csv.html#csv.DictWriter" rel="nofollow noreferrer"><code>csv</code> supports this</a>, as do files (<code>with open('...', 'r') as:</code>), and these <a href="https://stackoverflow.com/a/9283052/833881">can be used together</a>.</p>
</div>
