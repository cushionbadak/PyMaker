<div class="post-text" itemprop="text">
<p>Is there a convenient way to add another array with actual values to masked positions in another array?</p>
<pre><code>import numpy as np
arr1 = np.ma.array([0,1,0], mask=[True, False, True])
arr2 = np.ma.array([2,3,0], mask=[False, False, True])
arr1+arr2

Out[4]:
masked_array(data = [-- 4 --],
         mask = [ True False  True],
   fill_value = 999999)
</code></pre>
<p>Note: in arr2 the value 2 is not masked -&gt; should be in the resulting array
The result should be [2, 4, --]. I'd think there must be an easy solution for this?</p>
</div>
<div class="post-text" itemprop="text">
<p>Try this (choosing the logical operator that you want to use for your masks from <a href="http://docs.python.org/3/library/operator.html" rel="nofollow noreferrer">http://docs.python.org/3/library/operator.html</a>)</p>
<pre><code>&gt;&gt;&gt; from operator import and_
&gt;&gt;&gt; np.ma.array(arr1.data+arr2.data,mask=map(and_,arr1.mask,arr2.mask))
masked_array(data = [2 4 --],
             mask = [False False  True],
       fill_value = 999999)
</code></pre>
<p>In Python 3, <code>map()</code> returns an iterator and not a list, so it is necessary to add <code>list()</code>:</p>
<pre><code>&gt;&gt;&gt; np.ma.array(arr1.data+arr2.data,mask=list(map(and_,arr1.mask,arr2.mask)))
</code></pre>
</div>
<span class="comment-copy">I find your question confusing. you enter data as <code>[-- 4 --]</code>, and you expect <code>[2, 4, --]</code> as the output? What is the logic behind it?</span>
<span class="comment-copy">The value 2 in arr2 is not masked, so it should be included in the result. Why does the mask in arr1 "win"?</span>
<span class="comment-copy">the masks are added too, and <code>bool(False + True)</code> is True</span>
<span class="comment-copy">Thank you! That works.</span>
