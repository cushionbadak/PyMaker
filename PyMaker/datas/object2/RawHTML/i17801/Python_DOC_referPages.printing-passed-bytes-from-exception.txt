<div class="post-text" itemprop="text">
<p>This seems to be the code for the poplib.error_proto.</p>
<pre><code>class error_proto(Exception): pass
</code></pre>
<p>It just passes the bytes from the POP response in the exception.  What I would like to do is catch any exception, take those bytes, use .decode('ascii') on them, and print them as a string.  I've written my own test setup like so:</p>
<pre><code>class B(Exception): pass

def bex(): raise B(b'Problem')

try:
    bex()
except B as err:
    print(err.decode('ascii'))
</code></pre>
<p>I've tried replacing the last line with:</p>
<pre><code>    b = bytes(err)
    print(b.decode('ascii'))
</code></pre>
<p>But to no avail.  Is this possible and if so, how would I implement this?</p>
<p>UPDATE:  Though, as falsetru points out, the documentation says results are returned as strings, this is not the case:</p>
<pre><code>&gt;&gt;&gt; p = poplib.POP3('mail.site.com')
&gt;&gt;&gt; p.user('skillian@site.com')
b'+OK '
&gt;&gt;&gt; p.pass_('badpassword')
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "C:\Python33\lib\poplib.py", line 201, in pass_
    return self._shortcmd('PASS %s' % pswd)
  File "C:\Python33\lib\poplib.py", line 164, in _shortcmd
    return self._getresp()
  File "C:\Python33\lib\poplib.py", line 140, in _getresp
    raise error_proto(resp)
poplib.error_proto: b'-ERR authorization failed  Check your server settings.'
&gt;&gt;&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>According to <a href="http://docs.python.org/3/library/poplib.html#poplib.error_proto" rel="nofollow"><code>poplib.error_proto</code> documentation</a>:</p>
<blockquote>
<p>Exception raised on any errors from this module (errors from socket module are not caught). The reason for the exception is passed to the constructor as a <strong>string</strong>.</p>
</blockquote>
<p>So, you don't need to decode it.</p>
<hr/>
<p><strong>UPDATE</strong> It seems like the documentation does not match the actual implementation.</p>
<p>You can access the arguments passed to the exception constructor using <a href="http://docs.python.org/3/library/exceptions.html#BaseException.args" rel="nofollow"><code>args</code></a> attribute.</p>
<pre><code>p = poplib.POP3('mail.site.com')
try:
    p.user('skillian@site.com')
    p.pass_('badpassword')
except poplib.error_proto as e:
    print(e.args[0].decode('ascii')) # `'ascii'` is not necessary.
</code></pre>
</div>
<span class="comment-copy">Please see my update, doesn't the <code>b</code> prefix mean it is <code>bytes()</code>?</span>
<span class="comment-copy">@Sean, I updated the answer.</span>
<span class="comment-copy">Thank you very much, this is precisely what I was looking for.  And I always saw <code>decode('utf-8')</code>, so I figured <code>'ascii'</code> was required for ASCII.  That's a two-fer!</span>
<span class="comment-copy">@Sean, utf-8 encoding is designed to be backward compatible with ascii encoding. And <code>encoding</code> parameter of <a href="http://docs.python.org/3/library/stdtypes#bytes.decode" rel="nofollow noreferrer"><code>bytes.decode</code></a> defaults to <code>utf-8</code>; You can omit it. :)</span>
