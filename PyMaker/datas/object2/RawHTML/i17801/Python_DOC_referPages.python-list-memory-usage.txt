<div class="post-text" itemprop="text">
<p>I am trying to improve the memory usage of my script in python, therefore I need to know what's RAM usage of my list.
I measure the memory usage with</p>
<pre><code>print str(sys.getsizeof(my_list)/1024/1024)
</code></pre>
<p>which hopefully would give me the size of the list in RAM in Mb.</p>
<p>it outputs 12 Mb, however in <code>top</code> command I see that my script uses 70% of RAM of 4G laptop when running.</p>
<p>In addition this list should contain a content from file of ~500Mb.</p>
<p>So 12Mb is unrealistic.</p>
<p>How can I measure the real memory usage?</p>
</div>
<div class="post-text" itemprop="text">
<p><code>sys.getsizeof</code> only take account of the list itself, not items it contains.</p>
<p>According to <a href="http://docs.python.org/3/library/sys.html#sys.getsizeof" rel="noreferrer"><code>sys.getsizeof</code> documentation</a>:</p>
<blockquote>
<p>...
  Only the memory consumption directly attributed to the object is
  accounted for, not the memory consumption of objects it refers to.
  ...</p>
</blockquote>
<p>Use <a href="https://pypi.python.org/pypi/Pympler/" rel="noreferrer">Pympler</a>:</p>
<pre><code>&gt;&gt;&gt; import sys
&gt;&gt;&gt; from pympler.asizeof import asizeof
&gt;&gt;&gt;
&gt;&gt;&gt; obj = [1, 2, (3, 4), 'text']
&gt;&gt;&gt; sys.getsizeof(obj)
48
&gt;&gt;&gt; asizeof(obj)
176
</code></pre>
</div>
<span class="comment-copy">What's the object type contained in <code>my_list</code>? As Python's document shows: "Only the memory consumption directly attributed to the object is accounted for, not the memory consumption of objects it refers to." You may refer <a href="http://code.activestate.com/recipes/577504/" rel="nofollow noreferrer">this</a> to see an example usage of <code>getsizeof</code></span>
<span class="comment-copy">thank you very much, however it fails with MemoryError</span>
<span class="comment-copy">@user16168 please post a pastebin link with what you tried and the traceback...</span>
<span class="comment-copy">this is very helpful. most of the answer thinks getsizeof is the true memory usage.</span>
