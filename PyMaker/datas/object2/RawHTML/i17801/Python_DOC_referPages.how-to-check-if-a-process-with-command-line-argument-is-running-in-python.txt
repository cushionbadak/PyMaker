<div class="post-text" itemprop="text">
<p>I would like to check if a script is running with a specific command line argument within a python script.</p>
<p>For example I would like to check if:</p>
<pre><code>main.py testarg
</code></pre>
<p>Is running. Is there any way I can achieve this?</p>
<p>Thanks in advance</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use the <code>sys.argv</code> list:</p>
<pre><code>import sys

if "testarg" in sys.argv:
    # do something
</code></pre>
<p>For more complex argument parsing, it is recommended to use <a href="http://docs.python.org/3/library/argparse.html" rel="nofollow"><code>argparse</code></a>.</p>
<hr/>
<p>If instead you are looking to search through the current process list for that, you should use a library such as <a href="http://code.google.com/p/psutil/" rel="nofollow"><code>psutil</code></a> to ensure maximum platform compatiblity.</p>
<pre><code>import psutil

for process in psutil.process_iter():
    cmdline = process.cmdline
    if "main.py" in cmdline and "testarg" in cmdline:
        # do something
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use the <a href="http://code.google.com/p/psutil/" rel="nofollow"><code>psutil</code></a> library.</p>
<pre><code>import psutil

process_is_running = False

for process in psutil.process_iter():
    if process.cmdline == what_you_want:
        process_is_running = True
</code></pre>
<p>This will work on almost any OS and with python 2.4 up to 3.3.</p>
</div>
<div class="post-text" itemprop="text">
<p><strong>Here is my take of it:</strong></p>
<pre><code>import psutil

L=[(p.name(),p.cmdline()[1]) for p in psutil.process_iter() if p.name().startswith('py')]
</code></pre>
<p>Now if you print this list L out:</p>
<pre><code>('py.exe', 'programs\\pad29.py')
('python.exe', 'programs\\pad29.py')
('python.exe', '-u')
....
('python.exe', 'programs\\test_signal.py')
</code></pre>
<p>The list contains the command line parameters of every running process whose name starts with 'py'. That would include <strong>python.exe</strong> and <strong>py.exe</strong>. The condition is necessary otherwise you may run into some <strong><em>AccessDenied error</em></strong> if you try to poke on every running Windows process, like some <strong>smss.exe</strong>.
Once you have this list, finding out what you want is a no brainer:</p>
<pre><code>t=['what_you_want' == m[1] for m in L]
answer=True in t
</code></pre>
</div>
<span class="comment-copy">Are you checking this from another script, or from <code>main.py</code>?</span>
<span class="comment-copy">I think my explanation was a little poor. Within main.py I would like to check at runtime if another main.py with the same command line argument is already running. If there is another instance of "main.py testarg" then exit.</span>
<span class="comment-copy">I think perhaps they mean "can I tell if that process is running", not "can I tell if this process was called with this arg", something like <code>ps x | grep "main.py testarg"</code></span>
<span class="comment-copy">Ah yes, I guess that could be true.</span>
<span class="comment-copy">It should be cmdline = process.cmdline() instead of cmdline = process.cmdline</span>
<span class="comment-copy">This is not the answer to the problem asked. @Bakuriu's post is the answer.</span>
<span class="comment-copy">Thanks for your help, yours and Tom Leese's answers worked!</span>
<span class="comment-copy">+1 Just a minor point, in python3 <code>process.cmdline</code> is a method. So above should be changed to <code>if process.cmdline() == what_you_want:</code> (not sure about <code>python2</code>)</span>
