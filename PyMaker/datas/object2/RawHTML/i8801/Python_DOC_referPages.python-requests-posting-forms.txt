<div class="post-text" itemprop="text">
<p>I am trying to post a http form and get the response. I understand "requests" might be the way to go. I am trying to post to the login form on this page: www.dust2.dk/Login comparing the response to check if I recieved the error "Der er ikke registreret nogen bruger med den email" ("There is no user registered with that email")</p>
<p>Somehow the form is not being posted or the response is not being saved. I have tried searching around for a solution, to no avail. Here is my code</p>
<pre><code>#!/usr/bin/env python3
# -*- coding: utf-8 -*-

#imports
import requests

#code
def main():

        r = requests.post('http://dust2.dk/Login', data = {'email' : 'testmail@test.dk', 'password' : 'testest'})

        if 'Der er ikke registreret nogen bruger med den email' in r.text:
                print 'You done did it mate!'
        else:
                print 'Nope! Keep trying'
</code></pre>
<p>As you might guess the result is: "Nope! Keep trying" If I print out the response r, i simply get the source of the page www.dust2.dk/Login. Do you have any pointers of what I might be doing wrong here?</p>
</div>
<div class="post-text" itemprop="text">
<p>I had to do something similar the other day by sending a post request in Python. I followed <a href="https://docs.python.org/2/howto/urllib2.html#data" rel="nofollow noreferrer" title="this">this</a>. You need to import and use urllib and urllib2. </p>
<pre><code>import urllib
import urllib2

url = 'http://dust2.dk/Login'
values = {'email' : 'email@here',
          'password' : 'blahblah'}

data = urllib.urlencode(values)
req = urllib2.Request(url, data)
response = urllib2.urlopen(req)
the_page = response.read()
</code></pre>
<p>EDIT: actually follow <a href="https://docs.python.org/3/howto/urllib2.html#data" rel="nofollow noreferrer">this</a> guide instead if you're using Python 3.
See if that does what you want.</p>
</div>
<span class="comment-copy">Print out the content and response code of <code>r</code>. Why guess at what's going on when the answer is right there?</span>
<span class="comment-copy">Im not guessing :) That error is shown upon submitting the form with a wrong email. I simply make python search the html response for me, instead of scrolling through it myself. I forgot to mention, the response im getting is simply the code of the original page: www.dust2.dk/Login. I will update my question.</span>
<span class="comment-copy">How do you know the website is expecting fields named <code>email</code> and <code>password</code>? This question is too broad and can't be answered without a ton of back-and-forth. You should ask the website operator for help logging in via Python.</span>
<span class="comment-copy">Im not sure I understand your question. I simply look at the form in the pages source to see the names of these fields. Such as: &lt;input id="email" type="email" placeholder="Email" name="email" class="borderedBox"&gt;</span>
<span class="comment-copy">Thank you for your answer. I actually started out with urllib(2) on a more advanced site, which I could not get to work. I am going to try your code on the current site and report back the results.</span>
<span class="comment-copy">No luck with the example. Same issue. Upon printing the_page i simply get the original page. I will try the guide you mentioned aswell.</span>
