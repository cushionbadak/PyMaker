<div class="post-text" itemprop="text">
<p>I'm sending a message to slack using subprocess.check_output. The format is a mess, I was thinking about trying markdown == false, but only want it set per module, and am not sure how to do that. I'm not sure if that will solve my issue though, the larger issue is how to format the following text to be readable</p>
<p><a href="https://i.stack.imgur.com/jufrs.png" rel="nofollow noreferrer">bad formatting</a></p>
<p>should look like (or close to):</p>
<p><a href="https://i.stack.imgur.com/kdSDO.png" rel="nofollow noreferrer">clean formatting</a></p>
<p>Code:</p>
<pre><code>@botcmd
def find_vm(self, args, SearchString):
    output = subprocess.check_output(["C:\\WINDOWS\\system32\\WindowsPowerShell\\v1.0\\powershell.exe", ". \"C:\\Program Files\\Toolbox\\PowerShell Modules\\vmware\\./vmware.psm1\";", "find-vm", SearchString])
    return output
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Wrap your output in triple-backticks, which denotes a code block in Markdown. Also make note you should decode the output of <code>subprocess.check_output</code> because it returns a stream of bytes, not "text" as we tend to think of it:</p>
<pre><code>@botcmd
def find_vm(self, args, SearchString):
    output = subprocess.check_output(["C:\\WINDOWS\\system32\\WindowsPowerShell\\v1.0\\powershell.exe", ". \"C:\\Program Files\\Toolbox\\PowerShell Modules\\vmware\\./vmware.psm1\";", "find-vm", SearchString])
    return "```\n{output}\n```".format(output=output.decode("utf-8"))
</code></pre>
<p>Be sure to replace utf-8 with the encoding your actual system is using.</p>
</div>
<span class="comment-copy">Regular expressions could help here: <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">docs.python.org/3/library/re.html</a>. You have a pattern "text: text" with spaces in between.</span>
<span class="comment-copy">Excellent thank you very much! Do you happen to know how I would add three more backticks to make it a slack snippet? Is it as simple as adding three more backticks? ha</span>
<span class="comment-copy">No, snippets in slack are a type of file upload: <a href="https://api.slack.com/methods/files.upload" rel="nofollow noreferrer">api.slack.com/methods/files.upload</a>.  Errbot supports file uploads for slack, but not as a snippet I believe so if you wanted to do this you'd have to call down to the slack API yourself (some docs on this are available at <a href="http://errbot.io/en/latest/user_guide/plugin_development/backend_specifics.html" rel="nofollow noreferrer">errbot.io/en/latest/user_guide/plugin_development/â€¦</a>)</span>
