<div class="post-text" itemprop="text">
<p>Running the following code:</p>
<p><a href="https://i.stack.imgur.com/433qN.png" rel="nofollow noreferrer">click here</a></p>
<p>I got the next output:</p>
<p>3 ok 6 ok oops ok <strong>ok</strong> Boom</p>
<p>I don't understand why does he prints the bolded ok? he doesn't even enter the loop.</p>
<p>I would like to get <strong>in-depth</strong> understanding of how exceptions and finally in particular works.</p>
<p>Thanks in advance!</p>
</div>
<div class="post-text" itemprop="text">
<p>code in <code>finally</code> block is always executed before leaving the <code>try-catch</code> block. The code in <code>finally</code> block is executed even if an exception is caught.</p>
<p>For detailed explanation of <code>exception handling</code> in python, see <a href="https://docs.python.org/3/tutorial/errors.html" rel="nofollow noreferrer">python 3 documentation</a></p>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://docs.python.org/3/reference/compound_stmts.html#the-try-statement" rel="nofollow noreferrer">official spec</a> is</p>
<blockquote>
<p>If finally is present, it specifies a ‘cleanup’ handler. The try clause is executed, including any except and else clauses. If an exception occurs in any of the clauses and is not handled, the exception is temporarily saved. The finally clause is executed. If there is a saved exception it is re-raised at the end of the finally clause. If the finally clause raises another exception, the saved exception is set as the context of the new exception. If the finally clause executes a return or break statement, the saved exception is discarded:</p>
</blockquote>
<p>So what happens in the fourth iteration of your loop is <code>number</code> is set to <code>"a"</code> and when you try to convert it to <code>int</code> an exception is raised. Since there is no matching <code>except</code> in the inner <code>try</code> block the exception is saved, the <code>finally</code> block is executed which gives the fourth <code>ok</code> output and then the saved exception is reraised and caught by the outer <code>try</code> block.</p>
</div>
<span class="comment-copy">You should not show your code in an image. It is harder to help you, as anyone trying to help you would need to write your code by hand.</span>
<span class="comment-copy">Not including code <b>in the question itself</b> (but only behind a link) actually satisfies the conditions for close-as-lacking-MCVE. Per the wording of the rule: <i>Questions seeking debugging help ("why isn't this code working?") must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it <b>in the question itself</b>.</i></span>
