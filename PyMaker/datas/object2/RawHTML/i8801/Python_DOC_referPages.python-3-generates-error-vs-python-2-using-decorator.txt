<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/41593443/how-to-add-support-for-hex-function-to-class">How to add support for hex function to class</a>
<span class="question-originals-answer-count">
                    1 answer
                </span>
</li>
</ul>
</div>
<p><strong>Using Python 2.7, the following code works:</strong></p>
<pre><code>def AddHex(old_class):
   old_class.__hex__ = lambda self: 'I am a hex!'
   return old_class

@AddHex
class AClass(object):
   """'Empty' class"""
   pass

a = AClass()
print hex(a)
</code></pre>
<p><strong>output:</strong></p>
<pre><code>I am a hex!
</code></pre>
<p><strong>Using Python 3.6, I get the following error:</strong></p>
<blockquote>
<p>TypeError: 'AClass' object cannot be interpreted as an integer</p>
</blockquote>
<p>How do I make this code Python 3.6 compliant?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can't.</p>
<p>In Python 3, <a href="https://docs.python.org/3/library/functions.html#hex" rel="nofollow noreferrer"><code>hex</code></a> looks for an <code>__index__</code> function that returns <strong>an integer</strong>. You cannot use <code>hex</code> to print an arbitrary string.</p>
</div>
<span class="comment-copy">Can you give full stacktrace for error ?</span>
<span class="comment-copy">Python 3 has no <code>__hex__</code> method. At all. This is not a decorator issue; you could have tested this without the decorator ;-)</span>
