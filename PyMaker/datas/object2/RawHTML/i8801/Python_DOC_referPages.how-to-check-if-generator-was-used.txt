<div class="post-text" itemprop="text">
<p>Is it possible to know if generator was used? i.e.</p>
<pre><code>def code_reader(code):
   for c in code:
        yield c

code_rdr = code_reader(my_code)

a = code_rdr.next()

foo(code_rdr)
</code></pre>
<p>After <code>foo</code> call I would like to know if <code>.next()</code> was called on <code>code_rdr</code> by <code>foo</code> or not.
Of course I could wrap it by some class with a counter for <code>next()</code> calls. 
Is there any easy way to do so?</p>
</div>
<div class="post-text" itemprop="text">
<p>Python 3.2+ has <a href="https://docs.python.org/3/library/inspect.html#current-state-of-generators-and-coroutines" rel="noreferrer"><code>inspect.getgeneratorstate()</code></a>. So you can simply use <code>inspect.getgeneratorstate(gen) == 'GEN_CREATED'</code>:</p>
<pre><code>&gt;&gt;&gt; import inspect
&gt;&gt;&gt; gen = (i for i in range(3))
&gt;&gt;&gt; inspect.getgeneratorstate(gen)
'GEN_CREATED'
&gt;&gt;&gt; next(gen)
0
&gt;&gt;&gt; inspect.getgeneratorstate(gen)
'GEN_SUSPENDED'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I have used idea from attached possible answers, bellow is redefined <code>code_reader</code> function:</p>
<pre><code>def code_reader(code):
length = len(code)
i = 0
while i &lt; length:
    val = (yield i)
    if val != 'position':
        yield code[i]
        i += 1
</code></pre>
<p>by using .send('position') on I would have know position of next item to be generated, i.e.</p>
<pre><code>a = code_reader("foobar")

print a.next()
print a.send('position')
print a.next()
print a.send('position')
print a.send('position')
print a.next()
print a.send('position')
</code></pre>
<p>output:</p>
<pre><code>0
0
f
1
1
o
2
</code></pre>
</div>
<span class="comment-copy">how about getting the index of the item the <code>foo</code> would return like <code>code.index(foo(code_rdr))</code>? I know, it is not perfect in case of duplicates but its something</span>
<span class="comment-copy">@Ev.Kounis: but <code>foo</code> is likely a blackbox...</span>
<span class="comment-copy">Possible duplicate of <a href="http://stackoverflow.com/questions/17684908/is-there-a-python-function-that-checks-if-a-generator-is-started">Is there a Python function that checks if a generator is started?</a></span>
<span class="comment-copy">Another relevant dupe: <a href="http://stackoverflow.com/questions/41307038/how-can-i-tell-whether-a-generator-was-just-started" title="how can i tell whether a generator was just started">stackoverflow.com/questions/41307038/…</a></span>
<span class="comment-copy">@WillemVanOnsem meaning?... ☺</span>
<span class="comment-copy">it solves it in some special case when generator was not used pre &lt;code&gt;foo&lt;/code&gt;. In my use case code_rdr will be already started.</span>
<span class="comment-copy">Sorry I don't understand, it sounds like a different question though, if you're saying <code>next()</code> has already been called?</span>
<span class="comment-copy">yes, I have enriched a bit code example</span>
<span class="comment-copy">@www Ok, well you could compare the <code>return</code> value of <code>inspect.getgeneratorlocals()</code> before and after calling <code>foo</code> but it won't work in all cases (like if your generator is <code>(c for c in 'aaa')</code>). Anyway, I suggest you ask this as a new question with a different title etc, it's a rather different question and you'll get more attention that way</span>
