<div class="post-text" itemprop="text">
<p>I am trying to cache the metadata of images that are downloaded from the internet using a dictionary (I'm not interested in the images themselves). The id (int) of the image is the key and a <strong>custom class</strong> representing the metadata is the value.<br/>
I want to write this dictionary to a file before program exit so I don't have to download the information again on the next startup, but I have some trouble serializing it.</p>
<p>So far I tried:</p>
<ul>
<li>Serializing it to JSON using the builtin json module -&gt; JSON doesn't support numbers as keys, serializing complex types seems quite complicated and unreliable</li>
<li>Serializing it to XML using various snippets that I found online -&gt; complex type as the value generates a lot of trouble and most solutions seem to only work for specific use cases</li>
</ul>
<p><strong>How can I serialize a dictionary (int, custom_class)?</strong> The serialized format should be human readable and must be deserializable.</p>
<p>I'm using Python 3.4 and external dependencies would be ok, as long as I can install them using pip.</p>
</div>
<div class="post-text" itemprop="text">
<p>As you mentioned an external library is ok, use <a href="http://jsonpickle.github.io/" rel="nofollow">jsonpickle</a> .</p>
</div>
<div class="post-text" itemprop="text">
<p>You might try the built-in <a href="https://docs.python.org/3/library/pickle.html" rel="nofollow">pickle</a> module.  If you use <code>pickle.dumps(myobj, protocol=0)</code> it returns a "human readable" serialized string.  It is possible to read but most people will find it more difficult on your eyes than JSON or XML.  The advantage is that pickle can deal with a lot of complex data structures that are problematic in JSON.  It may also be attractive to avoid depending on another external library.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="http://yaml.org/" rel="nofollow">YAML</a> via the <a href="http://pyyaml.org/wiki/PyYAML" rel="nofollow">PyYAML</a> package. You can even <a href="http://pyyaml.org/wiki/PyYAMLDocumentation#Constructorsrepresentersresolvers" rel="nofollow">create custom markup tags</a> for your classes.</p>
</div>
