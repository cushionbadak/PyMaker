<div class="post-text" itemprop="text">
<p>After submitting a request I have received the following json back:</p>
<pre><code>{"type": [
{"ID": "all", "count": 1, "references": [
    { "id": "Boston,MA,02118", "text": "Boston,MA,02118", "val": "Boston,MA,02118", "type": 1 ,"zip": "02118","city": "Boston","state": "MA","lt": "42.3369","lg": "-71.0637","s": ""}
] }
] } 
</code></pre>
<p>I captured the response in variable j , </p>
<pre><code>&gt;&gt;&gt; j
'{"type": [\r\n\t{"ID": "all", "count": 1, "references": [\r\n\t\t{ "id": "Boston,MA,02118", "text": "Boston,MA,02118", "val": "Boston,MA,02118", "type": 1 ,"zip": "02118","city": "Boston","state": "MA","lt": "42.3369","lng": "-71.0637","s": ""}\r\n\t] }\r\n] }'
</code></pre>
<p>and am trying to parse it:</p>
<pre><code>&gt;&gt;&gt; j['types']
TypeError: string indices must be integers, not str      
</code></pre>
<p>What am I doing wrong?</p>
</div>
<div class="post-text" itemprop="text">
<p>You've got a JSON string representation of a dictionary. But you're trying to use that string as a dictionary. That won't work; you need to parse it first, using the <a href="https://docs.python.org/3/library/json.html" rel="noreferrer"><code>json</code></a> module:</p>
<pre><code>import json
obj = json.loads(j)
obj['types']
</code></pre>
<p>(There are libraries that can wrap up the whole "send a request, get a response, pull the body out of the response, make sure the content-type is right for JSON, parse it, raise an exception if anything goes wrong" for you. But if you're not using one, you can't skip any of the steps.)</p>
</div>
<span class="comment-copy">I think he also misspell the key <code>type</code></span>
<span class="comment-copy">@FlilyHsuL Yeah, I think you're right. But at least he'll get a <code>KeyError</code> instead of a <code>TypeError</code>, and hopefully that'll be easier to understand. (Or, hopefully, he'll read your commentâ€¦)</span>
<span class="comment-copy">Thank you, but that was just a typo - Bill</span>
