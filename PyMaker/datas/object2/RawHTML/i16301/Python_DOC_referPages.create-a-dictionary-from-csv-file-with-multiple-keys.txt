<div class="post-text" itemprop="text">
<p>Suppose I have a csv file and want a dictionary with multiple keys per value.</p>
<p>example csv:</p>
<pre><code>col1,col2,col2,col4,col5
a1,b1,c1,d1,e1
a2,b2,c2,d2,e2
a3,b3,c3,d3,e3
</code></pre>
<p>How would you go about creating a dictionary, such that you extract specifically columns 1,2,3 as the keys and use col5 as the value.</p>
<p>Output:</p>
<pre><code>{(a1,b1,c1):e1 , (a2,b2,c2):e2 , (a3,b3,c3):e3 }
</code></pre>
<p>Are there methods that help do this? </p>
</div>
<div class="post-text" itemprop="text">
<p>You can use a dict comprehension:</p>
<pre><code>import csv

with open(filename, 'rb') as infh:
    reader = csv.reader(infh)
    next(reader)  # skip the header row
    result = {tuple(row[:3]): row[4] for row in reader}
</code></pre>
<p>Keys for a dictionary must be immutable; the <code>csv.reader()</code> produces lists so to produce a tuple from the first 3 columns I used a slice and the <code>tuple()</code> function.</p>
<p>Demo:</p>
<pre><code>&gt;&gt;&gt; import csv
&gt;&gt;&gt; sample = '''\
... col1,col2,col2,col4,col5
... a1,b1,c1,d1,e1
... a2,b2,c2,d2,e2
... a3,b3,c3,d3,e3
... '''
&gt;&gt;&gt; reader = csv.reader(sample.splitlines())
&gt;&gt;&gt; next(reader)
['col1', 'col2', 'col2', 'col4', 'col5']
&gt;&gt;&gt; {tuple(row[:3]): row[4] for row in reader}
{('a3', 'b3', 'c3'): 'e3', ('a2', 'b2', 'c2'): 'e2', ('a1', 'b1', 'c1'): 'e1'}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You need to use a tuple for the dictionary key. Adapting from <a href="https://docs.python.org/3/library/csv.html" rel="nofollow">csv module documentation</a>, the following should work.</p>
<pre><code>import csv

with open('eggs.csv') as csvfile:
    spamreader = csv.reader(csvfile)

    next(spamreader) # skip header
    results = { (a, b, c): e for a, b, c, d, e in spamreader }
    # or for python &lt;= 2.6
    # results = dict(((a, b, c), e) for a, b, c, d, e in spamreader)

print(results)
</code></pre>
<p>prints out </p>
<pre><code>{('a3', 'b3', 'c3'): 'e3', ('a2', 'b2', 'c2'): 'e2', ('a1', 'b1', 'c1'): 'e1'}
</code></pre>
</div>
<span class="comment-copy">rather than writing " for a,b,c,d,e in ", can you save the entire header, like this: header = next(spamreader), and then replace the a,b,c,d,e?</span>
<span class="comment-copy">yes, and no; you could store the header and then make a dictionary... but it would not help here.</span>
<span class="comment-copy">Do you know why I'm getting a syntax error on the for loop?</span>
<span class="comment-copy">because you are using python 2.6</span>
