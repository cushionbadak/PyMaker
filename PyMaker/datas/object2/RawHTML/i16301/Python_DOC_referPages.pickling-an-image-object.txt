<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/4529815/saving-an-object-data-persistence">Saving an Object (Data persistence)</a>
<span class="question-originals-answer-count">
                    3 answers
                </span>
</li>
</ul>
</div>
<p>I'm a complete novice with pickle, and I have a bunch of (about 100,000) images that need to be pickled.</p>
<p>They are first loaded as image object, and converted to data as following:</p>
<pre><code>image = {
    'pixels': im.tostring(),
    'size': im.size,
    'mode': im.mode,
}
</code></pre>
<p>Now how do I pickle them into one pkl file?</p>
</div>
<div class="post-text" itemprop="text">
<p>You could do it like this:</p>
<pre><code>file = open('data.pkl', 'wb')

# Pickle dictionary using protocol 0.
pickle.dump(image, file)
file.close()
</code></pre>
<p>To read in the dictionary, you can do it like this:</p>
<pre><code>file = open('data.pkl', 'rb')

image = pickle.load(pkl_file)
print image
file.close()
</code></pre>
<p>It is also possible to dump the data twice:</p>
<pre><code>import pickle

# Write to file.
file = open("data.pkl", "wb")
pickle.dump(image1, file)
pickle.dump(image2, file)
file.close()

# Read from file.
file = open("data.pkl", "rb")
image1 = pickle.load(file)
image2 = pickle.load(file)
file.close()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Just call <code>pickle.dump</code>, the same way you would for anything else. You have a dict whose values are all simple types (strings, tuples of a couple numbers, etc.). The fact that it came from an image is irrelevant.</p>
<p>If you have a bunch of them, presumably they're stored in a list or some other structure, and you can pickle a list of pickleable objects.</p>
<p>So:</p>
<pre><code>with open('data.pkl', 'wb') as f:
    pickle.dump(images, f)
</code></pre>
</div>
<span class="comment-copy">Is there a reason you want to? Why not store them in, say, PNG format instead of pickle? It'll be a lot smaller, and probably load faster too.</span>
<span class="comment-copy">Also, what part are you not getting here? If you know how to pickle things, how do you not know how to pickle this dict?</span>
<span class="comment-copy">@abarnert I need to run it with <a href="http://deeplearning.net/tutorial/code/rbm.py" rel="nofollow noreferrer">deeplearning.net/tutorial/code/rbm.py</a> this code, and it seems to be working with pkl..</span>
<span class="comment-copy">@abarnert I'm a complete novice with pickle, and don't know how to pickle things in the first place.</span>
<span class="comment-copy">Have you read <a href="https://docs.python.org/3/library/pickle.html" rel="nofollow noreferrer">the docs</a>?</span>
<span class="comment-copy">if I have many image objects to pickle, then should I first put them in an array and then pickle it? or should I just keep dumping?</span>
<span class="comment-copy">Yes, your should. But it is also possible to dump the data twice. Look at my update.</span>
<span class="comment-copy">@CosmicRabbitMediaInc: Well, if you have many image objects to pickle, they should probably <i>already</i> be in a list. If you have the same code copied and pasted 40 times to use <code>image_1</code>, <code>image_2</code>, etc., don't do that.</span>
<span class="comment-copy">@CosmicRabbitMediaInc: You can write multiple object to the same pickle file, one by one, or put them all in a container like a list and write just that. The latter would probably be quicker. See <a href="http://stackoverflow.com/a/4529901/355230">my answer</a> to the question yours was marked as duplicating.</span>
