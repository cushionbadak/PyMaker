<div class="post-text" itemprop="text">
<p>i have program python script like this,</p>
<pre><code>import serial
import time

port = serial.Serial("/dev/ttyAMA0", baudrate=600, timeout= 3.0)

while True:
    rcv = port.read(5)
    value = (rcv)
    myString = str(value)
    b = open("/var/www/lampu1.txt","a")
    b.write(myString[1])
    b.close()
</code></pre>
<p>that program can receive data from serial and all data will be save into file "lampu1.txt".
i just want to take 1 string data from the data are received and write into file.
for example:
data receive=89435,
how i can take the string data, if for example i want to take string data [2]=9 and write into file "lampu1.txt".
because when i am execute this program occur error.
this the error occur on terminal.</p>
<pre><code>Traceback (most recent call last):
File "terima.py", line 11, in &lt;module&gt;
b.write(myString[1])
IndexError: string index out of range
</code></pre>
<p>anyone can help me to solved this problem,,,
thank you.</p>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<p>data receive=89435, how i can take the string data, if for example i want to take string data [2]=9 and write into file ...</p>
</blockquote>
<p>If the string is <code>89435</code> then the character at <code>[2]</code> is not <code>9</code>, it's <code>4</code>. The first character of the string is at <code>[0]</code>, the second at <code>[1]</code>, and so on - count your indexes starting at 0 when you code in Python.</p>
<p>Also:</p>
<pre><code>rcv = port.read(5)
value = (rcv)
myString = str(value)
</code></pre>
<p>Unless I'm missing something, reassigning <code>rcv</code> to <code>value</code> has no utility here. You're not changing its type with those parentheses, and there's no reason you have to use three lines to read those 5 bytes as a <code>str</code>; just do <code>myString = str(port.read(5))</code>.</p>
<p>In fact, you may not even need <code>str()</code> here. Depends what information you expect from the serial port - Integers? ASCII characters? Letters only, or whitespace characters? And so on.</p>
<p>Try this and see if it does what you want:</p>
<pre><code>import serial
import time

port = serial.Serial("/dev/ttyAMA0", baudrate=600, timeout= 3.0)

while True:
    rcv = port.read(5)
    b = open("/var/www/lampu1.txt","a")
    try:
        b.write(rcv[0])
    except IndexError:
        pass
    b.close()
</code></pre>
<p>You can replace <code>pass</code> with whatever logic you want to use to handle when 0 bytes are read from the port before it times out. You should probably also move <code>b.open()</code> and <code>b.close()</code> outside of the <code>while</code> block, unless you have some reason to open and close and open and close the file forever, but without some logic to exit the loop it wouldn't make sense so I'll leave you to deal with that on your own.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>import serial
import time

port = serial.Serial("/dev/ttyAMA0", baudrate=600, timeout= 3.0)

while True:
    rcv = port.read(5)
    value = (rcv)
    myString = str(value)
    b = open("/var/www/lampu1.txt","a")
    #I want to output first character (0th entry)
    if (len(b) &gt; 0):
        b.write(myString[0])
    else:
        b.write("Error condition")
    b.close()
</code></pre>
</div>
<span class="comment-copy">Please fix the indentation levels in your code</span>
<span class="comment-copy">Why are you writing <code>myString[1]</code> and not just <code>myString</code>?</span>
<span class="comment-copy"><code>.read(5)</code> can return <i>up to</i> 5 characters. It could return less data than that, and you need to take that into account.</span>
<span class="comment-copy">@Bill: because the OP apparently wants only one character from the received input.</span>
<span class="comment-copy">Python is indexed from 0, not 1.</span>
<span class="comment-copy">There's no <b>cast</b> notion in Python, since the type of a given object never changes: <i>"Like its identity, an object’s type is also unchangeable."</i> (<a href="http://docs.python.org/3/reference/datamodel.html#objects-values-and-types" rel="nofollow noreferrer">docs.python.org/3/reference/…</a>)</span>
<span class="comment-copy">Yeah, I guess "convert" or "decode" would have been the more appropriate term to use.</span>
<span class="comment-copy">thank you very much, it works. can you help me again? is it possible when i am put if in there? for example the data receive are a1234. if rcv[0]==a print "hai", else print "hello".</span>
<span class="comment-copy">@prima_mima Yes, you can add whatever conditional logic you like. It works the same way inside or outside of the <code>try</code> block.</span>
