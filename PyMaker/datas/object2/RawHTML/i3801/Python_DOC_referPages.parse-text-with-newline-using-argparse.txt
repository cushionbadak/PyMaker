<div class="post-text" itemprop="text">
<p>In Python, using <a href="https://docs.python.org/3/library/argparse.html#module-argparse" rel="nofollow noreferrer">argparse</a>, is there any way to parse text containing a newline character given as a parameter?</p>
<p>I have this script:</p>
<pre><code>#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import argparse

parser = argparse.ArgumentParser(formatter_class=argparse.RawTextHelpFormatter)
parser.add_argument('text', help='some text with newline')

args = parser.parse_args(["line1\nline2"])

print(args.text)
</code></pre>
<p>which prints as expected:</p>
<pre><code>line1
line2
</code></pre>
<p>but if I give the argument at the command-line (after changing to <code>args = parser.parse_args()</code> in the script above) it's not doing the same. For example:</p>
<pre class="lang-none prettyprint-override"><code>$ ./newline2argparse.py "line1\nline2"
line1\nline2
</code></pre>
<p>Any ideas on this?</p>
</div>
<div class="post-text" itemprop="text">
<p>Your <code>\n</code> is taken as <code>\</code> followed by <code>n</code> and not interpreted as it should. Use a command like <code>echo</code> or <code>printf</code> to correctly interpret it. This should work on almost any shell (<code>sh</code>, <code>bash</code>, <code>zsh</code>, etc).</p>
<pre class="lang-none prettyprint-override"><code>$ ./newline2argparse.py "$(echo -en 'line1\nline2')"
$ ./newline2argparse.py "$(printf 'line1\nline2')"
$ ./newline2argparse.py `printf "line1\nline2"`
</code></pre>
<p>There are plenty of alternatives.</p>
</div>
<div class="post-text" itemprop="text">
<p>If you want escape sequences to be processed in a shell string, surround it with <code>$''</code></p>
<pre><code>./newline2argparse.py $'line1\nline2'
</code></pre>
<p>Note that this is a <code>bash</code> extension, it may not be supported by all other shells.</p>
</div>
<span class="comment-copy">Your shell doesn't interpret <code>\n</code> as a line break. Is that bash you're using?</span>
<span class="comment-copy"><code>which $SHELL</code> prints <code>/bin/bash</code>. I'm on a Mac OS. But there should be a way to deal with this within the python script?</span>
<span class="comment-copy">According to <a href="https://stackoverflow.com/a/25269126/1222951">this answer</a> you can use <code>./newline2argparse.py $'line1\nline2'</code>.</span>
<span class="comment-copy">accepted this answer because it seems more "universal" across shells but @Barmar answer's is more concise for <code>bash</code>.</span>
