<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/5658369/how-to-input-a-regex-in-string-replace">How to input a regex in string.replace?</a>
<span class="question-originals-answer-count">
                    7 answers
                </span>
</li>
</ul>
</div>
<p>I'm trying to match, last letter in string 'onlin' as any and then replace it if it matches with word offline. No luck. Please give advice, cheers.</p>
<pre><code>import mitmproxy
import re

def response(flow):
    old = b'Onlin\w{1}'
    new = b'Offline'
    flow.response.content = flow.response.content.replace(old, new)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I guess you are using the wrong function for replacement. Try <code>re.sub</code>.</p>
<pre><code>def response(flow):
    old = b'Onlin\w'
    new = b'Offline'
    # https://docs.python.org/3/library/re.html#re.sub
    flow.response.content = re.sub(old, new, flow.response.content)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><code>str.replace()</code> does not recognize regular expressions.</p>
<p>To perform a substitution using a regular expression, use re.sub().</p>
<p>The pattern <code>Onlin.</code> matches any string that starts with Onlin and ends with any character. </p>
<pre><code>import re

old = re.compile('Onlin.')

def response(flow):
    new = 'Offline'
    flow.response.content = old.sub(new, flow.response.content)
</code></pre>
<p>Example:</p>
<pre><code>&gt;&gt;&gt; old = re.compile("Onlin.")
&gt;&gt;&gt; old.sub(new, "Onlin Onlina Online")
'offlineoffline offline'
</code></pre>
</div>
<span class="comment-copy">Does it work if you remove that <code>’</code> character in <code>Onlin\w{1}’</code>?</span>
<span class="comment-copy">It got in there by accident, doesn't help.</span>
<span class="comment-copy">It's not clear what you're asking. Can you explain what the expected output is?</span>
<span class="comment-copy">In flow.response.content.replace value of variable 'old' is replace by value of the variable 'new'.  Im trying to use regex to match value of variable old with the last character as wildcard. But it doesn't work. Basically 'onlin' + [a-z, 0-9]</span>
<span class="comment-copy">Works very well, cheers, I'm quite new to this</span>
<span class="comment-copy">This did not work, but thank You for your time.</span>
