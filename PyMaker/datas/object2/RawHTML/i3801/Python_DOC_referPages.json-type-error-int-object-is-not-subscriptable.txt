<div class="post-text" itemprop="text">
<p>Trying to search to see if quantity in stock is above <code>0</code> on: </p>
<p><a href="https://www.astro-bot.io/api/commerce/inventory/stock/?crumb=BQXy6KNmMGWENWE3YWQzMTc3MDU5NzE1ODdkNDNiM2RmZTEyNjg4&amp;itemId=5b0dc9172b6a283905dabe08" rel="nofollow noreferrer">https://www.astro-bot.io/api/commerce/inventory/stock/?crumb=BQXy6KNmMGWENWE3YWQzMTc3MDU5NzE1ODdkNDNiM2RmZTEyNjg4&amp;itemId=5b0dc9172b6a283905dabe08</a></p>
<p>getting:</p>
<pre><code>TypeError: 'int' object is not subscriptable
</code></pre>
<p>Code:</p>
<pre><code>import requests
from bs4 import BeautifulSoup as bs4
from threading import Thread
import json

s = requests.session()

def checkstock():
    global session
    response = s.get('https://www.astro-bot.io/api/commerce/inventory/stock/?crumb=BQXy6KNmMGWENWE3YWQzMTc3MDU5NzE1ODdkNDNiM2RmZTEyNjg4&amp;itemId=5b0dc9172b6a283905dabe08')
    data = json.loads(response.text)
    stock = data['results'][0]['qtyInStock'][0]['available']
    if stock in [0]:
        print("out of stock!")
    else:
        print("in stock")

checkstock()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>data = json.loads(response.text)
stock = data['results'][0]['qtyInStock'][0]['available']
</code></pre>
<p>This should be</p>
<pre><code>data = json.loads(response.text)
stock = data['results'][0]['qtyInStock']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You need to loop through your results as there may be more than on record. <code>requests</code> already provides an easy way to convert stuff to json.</p>
<p>A simpler way to write your code is:</p>
<pre><code>def checkstock():
    global session
    response = s.get('https://www.astro-bot.io/api/commerce/inventory/stock/?crumb=BQXy6KNmMGWENWE3YWQzMTc3MDU5NzE1ODdkNDNiM2RmZTEyNjg4&amp;itemId=5b0dc9172b6a283905dabe08')
    data = response.json()
    for results in data:
       if results['qtyInStock'] == 0:
          print('Out of stock')
       else:
          print('Available')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code> def checkstock():
     global session
     response = s.get('https://www.astro-bot.io/api/commerce/inventory/stock/?crumb=BQXy6KNmMGWENWE3YWQzMTc3MDU5NzE1ODdkNDNiM2RmZTEyNjg4&amp;itemId
 =5b0dc9172b6a283905dabe08')
     data = json.loads(response.text)
     results = data.get('results',[{}])[0] 
     try:          
         qtyInStock = [{}] if (results['qtyInStock'] == 0) else results['qtyInStock']                                                          
     except TypeError:
        qtyInStock = [{}]
     stock = qtyInStock[0].get('available',0)
     print('in stock') if (stock != 0) else print('out of stock!')
</code></pre>
</div>
<span class="comment-copy">Why are you adding <code>[0]['available']</code> then when <code>data['results'][0]['qtyInStock']</code> is clearly an integer? Also, what is <code>if stock in [0]:</code> supposed to mean? Why not just <code>if data['results'][0]['qtyInStock']:</code>? Maybe you should read some more on <a href="https://docs.python.org/3/tutorial/datastructures.html" rel="nofollow noreferrer"><b>Python Data Structures</b></a>.</span>
