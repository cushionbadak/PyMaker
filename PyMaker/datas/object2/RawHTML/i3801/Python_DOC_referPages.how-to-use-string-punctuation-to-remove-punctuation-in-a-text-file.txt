<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/265960/best-way-to-strip-punctuation-from-a-string-in-python">Best way to strip punctuation from a string in Python</a>
<span class="question-originals-answer-count">
                    24 answers
                </span>
</li>
</ul>
</div>
<p>Made a function to count 20 most common words in a book that I downloaded as a plain text format. The python textbook I am going off of said to use the <code>import string</code> and then the <code>replace</code> or the <code>translate</code> method to remove any punctuation, but when I print out the lines after the replace step, all the lines still have punctuation in it. I tried moving around the <code>line = line.strip()</code> and the <code>line = line.replace(string.punctuation,'')</code> step, but that did not work. I have never used replace so I may be using it wrong for all I know. Rest of my program works, just that step is frustrating me.</p>
<pre><code>import string
def function():
    infile = open('gutbook.txt','r',encoding='utf-8')
    count = dict()
    list2 = list()
    for line in infile:
        line = line.strip()
        line = line.replace(string.punctuation,'')
        line = line.lower().split()
        if line== []:
            continue
        for i in line:
            count[i] = count.get(i,0) + 1
    for key,value in count.items():
        newtuple = (value,key)
        list2.append(newtuple)
    list3 = sorted(list2,reverse = True)
    print(list3[:20])



function()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use Regex.</p>
<p><strong>Ex:</strong></p>
<pre><code>import re
import string

text = "Hello ! #$%&amp;'()*+,-./:;&lt;=&gt;?@[\]^_`{|}~ World"
print(re.sub("[" + re.escape(string.punctuation) + "]", "", text))
#or
print( re.sub(r'[^a-zA-Z0-9\s]','',text) )
</code></pre>
</div>
<span class="comment-copy"><a href="https://stackoverflow.com/q/50444346/7207392">related</a></span>
<span class="comment-copy">Your bug is trying to use <code>line.replace(string.punctuation,'')</code>, which tries to find the string of <i>all</i> punctuation in that order and remove it, not <i>each</i> individual character.</span>
<span class="comment-copy">true, thanks @ShadowRanger</span>
<span class="comment-copy">You've got a subtle bug here, that can be fixed by wrapping <code>string.punctuation</code> in <a href="https://docs.python.org/3/library/re.html#re.escape" rel="nofollow noreferrer"><code>re.escape</code></a>, e.g. <code>re.sub("[" +re.escape(string.punctuation) + "]", "", text)</code>. Without escaping it, it won't treat <code>\ </code> as punctuation (it interprets the <code>\ </code> as escaping the <code>]</code> in <code>string.punctuation</code>, which prevents everything exploding, but also omits <code>\ </code> from the set of characters to match).</span>
<span class="comment-copy">@ShadowRanger. Thank you so much.</span>
