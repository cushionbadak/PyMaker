<div class="post-text" itemprop="text">
<p>in python, need to substitute a group found in Regex string with a variable. but just substitute the group, not the entire regex result.</p>
<p>here is what I have so far:</p>
<pre><code>content = "FILE_NAME(
           /* name */ 
           'test_name_to_replace.stp',
           /* time_stamp */ '2018-05-28T14:34:32+02:00',
           /* author */ (''),
           /* organization */ (''),"

replaceVariable = "New_Name.stp"
regex = r"(name.*\n*').*.stp"
subst = r"$1%s" % re.escape(replaceVariable)

New_Content = re.sub(regex, subst, content, 0, re.MULTILINE)
</code></pre>
<p>the result I from the search "regex" is:</p>
<pre><code>name */ 
'test_name_to_replace.stp
</code></pre>
<p>where group 1 is</p>
<pre><code>name */ 
'
</code></pre>
<p>and group 0 is</p>
<pre><code>test_name_to_replace.stp
</code></pre>
<p>I need to keep group 1 and replace group 0
but the subs string isn't working the special character $1 before the variable, I get a result like this:</p>
<pre><code>New_Content = "FILE_NAME(
           $1New_Name.stp',
           /* time_stamp */ '2018-05-28T14:34:32+02:00',
           /* author */ (''),
           /* organization */ (''),"
</code></pre>
<p>it deletes the group1</p>
</div>
<div class="post-text" itemprop="text">
<p>The documentation is always your friend, as this is very clearly documented in <a href="https://docs.python.org/3/library/re.html#regular-expression-syntax" rel="nofollow noreferrer">Regular Expression Syntax</a>:</p>
<blockquote>
<ul>
<li><p><code>\number</code></p>
<p>Matches the contents of the group of the same number.</p></li>
</ul>
</blockquote>
<p>But you don't need matching groups here, try using:</p>
<p><a href="https://regex101.com/r/7fGPVL/1" rel="nofollow noreferrer"><code>\'(\w+\.stp)\'</code></a></p>
<p>And then:</p>
<pre><code>subst = "'{}'".format(replaceVariable)
re.sub(r"\'(\w+\.stp)\'", subst, content, 0, re.MULTILINE)

# Result
FILE_NAME(
           /* name */ 
           'New_Name.stp',
           /* time_stamp */ '2018-05-28T14:34:32+02:00',
           /* author */ (''),
           /* organization */ (''),
</code></pre>
</div>
<span class="comment-copy">Use <code>\1</code> to reference groups in python. Not <code>$1</code></span>
<span class="comment-copy">what if the file name has digits and other characters?? the /w will not work</span>
<span class="comment-copy"><code>\w</code> will match <code>[a-zA-Z0-9_]</code>  So if you have other characters just use that explicit list and add as necessary</span>
<span class="comment-copy">actually even better instead of \w I can use: [^']+.stp and I don't need to worry about the groups anymore. Its just mega slow!!!!!</span>
<span class="comment-copy">That might allow invalid characters in a filename, but if that's not a concern, go for it.</span>
