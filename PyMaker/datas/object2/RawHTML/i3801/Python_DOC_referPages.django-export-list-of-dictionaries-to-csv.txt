<div class="post-text" itemprop="text">
<p>I have created a list of dictionaries in views.py, </p>
<pre><code>my_list= [
{'user': 1000, 'account1': 100, 'account2': 200, 'account3': 100},
{'user': 1001, 'account1': 110, 'account2': 100, 'account3': 250},
{'user': 1002, 'account1': 220, 'account2': 200, 'account3': 100},
]
</code></pre>
<p>I want to export it to csv file.</p>
<pre><code>    response = HttpResponse(content_type='text/csv')
    response['Content-Disposition'] = 'attachment; filename="mylist.csv"'

    writer = csv.writer(response)
    for data in my_list:
        writer.writerow(data)

    return response
</code></pre>
<p>I know there is a error for "for data in my_list".
my_list contains all the keys and values.</p>
<p>How to get only keys for my_list? or there is another method to export list to csv?</p>
<p>(I'm using django 2 with python3.4)</p>
</div>
<div class="post-text" itemprop="text">
<p>You need <code>DictWriter</code></p>
<p><strong>Demo:</strong></p>
<pre><code>import csv
my_list= [
{'user': 1000, 'account1': 100, 'account2': 200, 'account3': 100},
{'user': 1001, 'account1': 110, 'account2': 100, 'account3': 250},
{'user': 1002, 'account1': 220, 'account2': 200, 'account3': 100},
]

with open(filename, "w") as infile:
    writer = csv.DictWriter(infile, fieldnames=my_list[0].keys())
    writer.writeheader()
    for data in my_list:
        writer.writerow(data)

with open(filename, 'rb') as infile:
    response = HttpResponse(infile, content_type='text/csv')
    response['Content-Disposition'] = 'attachment; filename=mylist.csv'
    return response
</code></pre>
</div>
<span class="comment-copy">is this what you're looking for? <a href="https://docs.python.org/3/library/csv.html?highlight=csv#csv.DictWriter" rel="nofollow noreferrer">docs.python.org/3/library/csv.html?highlight=csv#csv.DictWriter</a></span>
