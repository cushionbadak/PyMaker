<div class="post-text" itemprop="text">
<p>Hey I am new to python and am working on some project where I have a list of arrays like -</p>
<pre><code>some_list = [array([-12, 23]), array([-13, 22])]
</code></pre>
<p>These array represent unique property of some stuff. So I want to save this in a file like Json with some Id assigned to each array and then extract it back as the same list of arrays.</p>
</div>
<div class="post-text" itemprop="text">
<p>The <code>json</code> module only knows how to handle the basic Python types that it maps to the basic JSON types—<code>list</code>, <code>dict</code>, <code>str</code>, <code>float</code>, <code>bool</code>, and <code>NoneType</code>.</p>
<p>But you can override the JSON encoder and decoder objects to add in code to handle additional types in any way you want. This is <a href="https://docs.python.org/3/library/json.html#encoders-and-decoders" rel="nofollow noreferrer">documented, with some examples</a>, but isn't entirely trivial.</p>
<hr/>
<p>But, more simply, if you know the structure of the data you're trying to save and load, you can just transform it on the fly. For example:</p>
<pre><code>def save_stuff(f, list_of_arrays):
    list_of_lists = [list(arr) for arr in list_of_arrays]
    json.dump(f, list_of_lists)

def load_stuff(f):
    list_of_lists = json.load(f)
    list_of_arrays = [np.array(lst) for lst in list_of_lists]
    return list_of_arrays
</code></pre>
<p>Or you can go the opposite direction: convert the list of arrays to an array of arrays and use Numpy to save that.</p>
<p>Either way, this is less efficient, because you have to create those temporary lists. If you have gigantic arrays, or if you're doing this zillions of times, you will probably want to do the more complicated work of overriding the encoder and decoder.</p>
</div>
<span class="comment-copy">Are these Numpy arrays, stdlib <code>array.array</code>s, or something different?</span>
<span class="comment-copy">Yes they are Numpy arrays.</span>
<span class="comment-copy">Also, what do you mean by "some Id assigned to each array"? Getting them back in the same order as the original list makes sense, but you don't need IDs for that, and it's hard to see what you're do with them—you just want to preserve the order when you store and load them, which is exactly what happens when you save a Python <code>list</code> as a JSON <code>array</code>.</span>
<span class="comment-copy">These array represent property of some known objects. Now I want to save them in a file and when I get an unknown object I want to compare it with my stored list of arrays and If matched return its id or else append it to the list with a unique id.</span>
<span class="comment-copy">Related (?) <a href="https://stackoverflow.com/q/26646362/2823755">Numpy array is not JSON serializable</a>.. there are others.</span>
