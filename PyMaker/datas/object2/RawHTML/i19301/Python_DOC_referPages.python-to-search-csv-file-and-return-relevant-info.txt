<div class="post-text" itemprop="text">
<p>I have a csv file with information about some computers on our network.  I'd like to be able to type from the command line a quick line to bring me back the relevant items from the csv.  In the format:</p>
<pre><code>$ tag.py *hostname*
</code></pre>
<p>The csv has about 50 columns with information ranging from MAC address to last time seen on the network.  I only want to output a selection of these columns when I search.  I've written the necessary code and it works.  However I want the search to be more flexible.  As it stands, the search term needs to be exactly the same as the value I'm searching for.  aka</p>
<pre><code>$ tag.py mycomputer        # This returns nothing
$ tag.py mycomputer.co.uk  # This returns the information I want
$ tag.py 63746             # This returns nothing
$ tag.py 00063746          # This returns the information I want
</code></pre>
<p>So now for the code I have.</p>
<pre><code># Import Modules

import sys
import csv

# Get user Input
# I assume the script is used in the form script.py "search-term"
# If no input added to command, ask for user input

if len(sys.argv) &lt; 2:
    print("Please enter a hostname or asset number.")
    search_1 = input("Search for:")
else:
    search_1=sys.argv[1]

# Setup Variables
# Open cvs and setup csv.reader settings

csvfile = open("file.csv", "r", encoding="Latin-1")
csvfile.seek 
reader = csv.reader(csvfile, dialect='excel', delimiter=",", quotechar="'")

# Search cvs for the input string

for line in reader:
    if search_1 in line:
        print("------------------------------------------------------")
        print("  Hostname = " + line[10])
        print("  " + line[11])
        print("  AssetId = " + line[30])
        print("  IP = " + line[7])
        print("  MAC = " + line[6])
        print("  Owner = " + line[15])
        print("  Username = " +line[14])
        print("  Tel = " + line[17])
        print("  Last Seen = " + line[27])
        print("------------------------------------------------------")

csvfile.close()
</code></pre>
<p>I would like the code to be able to ignore the fqdn if I search for a hostname or to add the extra 0 characters to the asset number.  I think I can fix the asset number issue with a <code>len(search_1) &lt; 8</code> append some <code>0</code> to the front until it is 8 characters long but that's avoiding the fact that I really would prefer to just search for the string without manipulating it to match the thing I'm looking for.</p>
</div>
<div class="post-text" itemprop="text">
<p>Instead of testing if your input string is in the line, test if your input string is in any of the columns. The <a href="http://docs.python.org/3/library/functions.html#any" rel="nofollow"><code>any()</code> function</a> is ideally suited for that:</p>
<pre><code>if any(search_1 in col for col in line):
</code></pre>
<p>To break this down a little: each line in your <code>csv.reader()</code> iterable is itself a list of columns, you can loop over these. <code>for col in line</code> does just that. We test if <code>search_1</code> is present in each column with <code>search_1 in col</code>, and <code>any()</code> will execute the loop until it finds a column where <code>search_1 in col</code> is <code>True</code>, in which case it stops iterating over the loop and returns <code>True</code> itself. If no match was found <code>False</code> is returned instead.</p>
</div>
<span class="comment-copy">Thank you very much.  That is exactly what I needed.  It works perfectly now :)</span>
