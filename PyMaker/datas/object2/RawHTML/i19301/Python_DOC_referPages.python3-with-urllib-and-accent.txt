<div class="post-text" itemprop="text">
<p>I try to access an URL with an accent but it didn't work:</p>
<pre><code>#!/usr/bin/python3.3
# -*- coding: utf-8 -*- 

import urllib.request

response = urllib.request.urlopen("http://nominatim.openstreetmap.org/search.php?city=Lévis&amp;format=json")
content = response.read()
print(content)
</code></pre>
<p>When I execute this code I have this error in return </p>
<pre><code>UnicodeEncodeError: 'ascii' codec can't encode character '\xe9' in position 22: ordinal not in range(128)
</code></pre>
<p>So I try this</p>
<pre><code>response = urllib.request.urlopen("http://nominatim.openstreetmap.org/search.php?city=Lévis&amp;format=json".encode("UTF-8"))
</code></pre>
<p>But still an error</p>
<pre><code>AttributeError: 'bytes' object has no attribute 'timeout'
</code></pre>
<p>Do you have any ideas where is my mistake ?</p>
</div>
<div class="post-text" itemprop="text">
<p>You need to escape your query parameters, like @Cairnarvon said:</p>
<pre><code>import urllib.parse

city = 'Lévis'
query = "city=%s&amp;format=json" % (urllib.parse.quote(city),)
response = urllib.request.urlopen("http://nominatim.openstreetmap.org/search.php?" + query)
</code></pre>
</div>
<span class="comment-copy">URLs <a href="http://en.wikipedia.org/wiki/URL#List_of_allowed_URL_characters" rel="nofollow noreferrer">cannot contain arbitrary Unicode</a>. You'll need to escape the offending character <a href="http://docs.python.org/3/library/urllib.parse.html#url-quoting" rel="nofollow noreferrer">in some way</a>.</span>
