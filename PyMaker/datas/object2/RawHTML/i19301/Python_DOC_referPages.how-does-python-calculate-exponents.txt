<div class="post-text" itemprop="text">
<p>To calculate exponents in Python, we use the <code>**</code> command. For example, we type <code>x**3</code> for the cube of x. How does Python evaluate such polynomials? Is that 3 flops used in this calculation? What about non-integer exponents? Say <code>x**2.3</code>? </p>
</div>
<div class="post-text" itemprop="text">
<p>The <code>**</code> operator translates to the <code>BINARY_POWER</code> opcode in the bytecode, which the interpreter then translates to the C-API <a href="http://docs.python.org/2/c-api/number.html#PyNumber_Power" rel="nofollow"><code>PyNumber_Power</code> call</a> with the 3rd argument set to None.</p>
<p><code>PyNumber_Power</code> calls the <a href="http://docs.python.org/2/c-api/typeobj.html?highlight=nb_power#PyNumberMethods" rel="nofollow"><code>nb_power</code> slot</a> on the operands (see <a href="http://hg.python.org/cpython/file/2.7/Objects/abstract.c#l1006" rel="nofollow"><code>ternary_op</code></a>).</p>
<p>If both are integers, the <a href="http://hg.python.org/cpython/file/2.7/Objects/intobject.c#l728" rel="nofollow"><code>int_pow</code> C function</a> succeeds and its result used.</p>
<p>If however <code>x</code> is an integer and you use <code>2.3</code> as the power, the integer power function raises an error and <a href="http://hg.python.org/cpython/file/2.7/Objects/floatobject.c#l807" rel="nofollow"><code>float_pow</code></a> is tried next. In that case, provided <code>x</code> is greater than 0, the C library <code>pow()</code> function is used on two float values, which on most architectures is then handled by the floating point support in the CPU.</p>
</div>
<span class="comment-copy">possible duplicate of <a href="http://stackoverflow.com/questions/164964/how-are-exponents-calculated">How are exponents calculated?</a></span>
<span class="comment-copy"><code>x**3</code> would be just 2 operations (<code>t=x*x; t=t*x</code>)</span>
<span class="comment-copy">But what about x not being an integer and the exponent y being integer? Is in this case also <code>float_pow</code> being used or there is a special method?</span>
<span class="comment-copy">@loved.by.Jesus: that depends on the type of <code>x</code>. Python tries the left-hand operand first (by calling the <code>nb_power</code> slot, for Python types that's the <a href="https://docs.python.org/3/reference/datamodel.html#object.__pow__" rel="nofollow noreferrer"><code>__pow__</code> method</a>, and if that slot is missing or returns <code>NotImplemented</code> then <a href="https://docs.python.org/3/reference/datamodel.html#object.__rpow__" rel="nofollow noreferrer"><code>y.__rpow__</code></a> is tried. If the type you tried to use <code>**</code> is not a number, and doesn't implement <code>__pow__</code> then that'll probably just fail.</span>
