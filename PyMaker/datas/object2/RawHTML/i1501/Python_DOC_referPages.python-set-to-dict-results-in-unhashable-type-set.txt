<div class="post-text" itemprop="text">
<p>since one week I am building up knowledge in machine learning, using python + tensorflow. My main target is to get the tutorials presented by keras up and running, so my own introduction to python is getting these load-functions to work properly, bc I am stucked behind a firewall and pip ain't downloading. 
Now I've arrived at a problem which makes me loose my mind. 
Currently I am working at a basic regression, just like <a href="https://www.tensorflow.org/tutorials/keras/basic_text_classification" rel="nofollow noreferrer">https://www.tensorflow.org/tutorials/keras/basic_text_classification</a> - convert integer back to words</p>
<p>Every other tutorial just worked fine after a little modification, but this one is driving me crazy.</p>
<pre><code>def get_word_index(path='training\imdb_word_index.json'):
with open('training\imdb_word_index.json') as f: 
    json1_str = f.read()
    json1_data = json.loads(json1_str)
    return dict(json1_data)
</code></pre>
<p>this piece of code opens the dataset and returns it as a dictionary. 
the content looks like this:</p>
<pre><code>"the":1402
</code></pre>
<p>that's it. 
I am trying to reverse it, bc the built-in function doesn't seem to work like intended. 
Now the best practice I found was
<a href="https://stackoverflow.com/questions/13464152/typeerror-unhashable-type-list-when-using-built-in-set-function">TypeError: unhashable type: 'list' when using built-in set function</a>
which didn't help much. 
My code is</p>
<pre><code>reverse_word_ind = {}
reverse_word_ind = dict.fromkeys(word_index.items(), 0)
</code></pre>
<p>which raises the error:</p>
<blockquote>
<p>TypeError: unhashable type: 'set'</p>
</blockquote>
<p>After multiple experiments, turning it manually over and typecasting it to 'dict' my patience failed.
Please help...</p>
</div>
<div class="post-text" itemprop="text">
<p>You can reverse a dictionary with a <a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries" rel="nofollow noreferrer">dict comprehension</a>:</p>
<pre><code>reverse_word_ind = {v:k for k,v in word_index.items()}
</code></pre>
<p>Not every dictionary can be reversed. This is because while there are no restrictions on the types of objects that can be dictionary values, there are <a href="https://wiki.python.org/moin/DictionaryKeys" rel="nofollow noreferrer">restrictions as to what types can be keys</a>.</p>
<p>The error that you're getting implies that at least one of the values in your dictionary is a set, contrary to your expectations. You can debug what's going on and figure out the bad value by doing the dictionary reversal within a <code>try...except</code> clause:</p>
<pre><code>reverse_word_ind = {}
for k,v in word_index.items():
    try:
        reverse_word_ind[v] = k
    except TypeError as e:
        print('could not reverse pair (%s, %s) of types (%s, %s)' % (k, v, type(k), type(v)))
        raise e
</code></pre>
<p>Running the above code should result in the same <code>TypeError</code> as you were getting before, but now it'll first print out a helpful error message pointing out the bad value in your dictionary.</p>
</div>
<span class="comment-copy">@Pyr0m4ni4c I added some info about the likely issue you're having, and a way to debug it</span>
<span class="comment-copy">Thanks mate. I had the feeling something with the dataset might be wrong... but after a little regex using notepad I couldn't prove my feeling. This should help me.Thanks a thousand times :)</span>
