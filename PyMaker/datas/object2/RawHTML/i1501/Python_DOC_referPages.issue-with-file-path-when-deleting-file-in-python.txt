<div class="post-text" itemprop="text">
<p>Trying to write a small script in Python to delete files, but the os.remove function is having issues with the file path. Note if I comment out <code>os.remove("C:\\Users\The User\Downloads\test.txt")</code> it runs fine and will print 'gone'. I don't understand why when assigning the path to the variable it works but os.remove doesn't like the same thing. </p>
<pre><code>import os
import re

search ='test.txt'
path = "C:\\Users\The User\Downloads"


def find(search, path):
    for root, dirs, files in os.walk(path):
        if search in files:
           return True
        else:
           return False



result = find(search, path)
if(result == False):
    os.remove("C:\\Users\The User\Downloads\test.txt")
    print('gone')
</code></pre>
<p>Here's the error message:</p>
<p>OSError: [WinError 123] The filename, directory name, or volume label syntax is incorrect: 'C:\Users\The User\Downloads\test.txt'</p>
<blockquote>
<blockquote>
<blockquote>
<p></p>
</blockquote>
</blockquote>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>I think you should just return the full path of the file to delete, and if the path is not <code>None</code>, then call <code>os.remove()</code>. In your code, you check that <code>search</code> exists in <code>files</code>, but <code>files</code> is a list, and you need to go through and get the matching file to determine its current directory. Then you can get the full path using <code>root</code>, and use that later for deletion. </p>
<p><strong>Demo:</strong></p>
<pre><code>from os import environ
from os import walk
from os import remove
from os.path import join

def find(search, path):
    for root, _, files in walk(path):

        # Go through each file
        for file in files:

            # Check if the file matches the search
            if file == search:

                # return full path
                return join(root, file)

# Get path if any
result = find(search="test.txt", path=join(environ["USERPROFILE"], "Downloads"))

# Only delete file if not None
if result:
    remove(result)
    print('Deleted', result)
</code></pre>
<p>You can can also use <a href="https://docs.python.org/3/library/functions.html#next" rel="nofollow noreferrer"><code>next()</code></a> here to make <code>find()</code> shorter:</p>
<pre><code>def find(search, path):
    for root, _, files in walk(path):
        return next((join(root, file) for file in files if file == search), None)
</code></pre>
<p><strong>Note:</strong> You can use <code>os.path.join(os.environ['USERPROFILE'], 'Downloads')</code> instead of hardcoding <code>C:\\Users\The User\Downloads</code>. </p>
</div>
<span class="comment-copy">You should return <code>True</code> or <code>False</code> instead of <code>'yes'</code> and <code>'no'</code>.</span>
<span class="comment-copy">First of all, please include your actual code. There's a typo in <code>find()</code> that indicates this is not the exact code you are running. Also, please fix your indentation, as it's not clear what you're code is actually doing. Once you've done that, tell us what issues <code>os.remove</code> is having, and please include any errors in your question, in full.</span>
<span class="comment-copy">Regardless of my previous comment, <code>find()</code> is not going to work generally because, at best, it will tell you if <code>search</code> is a file somewhere under <code>path</code>, not whether it's in the top-level <code>path</code> directory.</span>
<span class="comment-copy">Can you be more specific than "the os.remove function is having issues"? What issues is it having? Is it raising an exception? If so, give us the full traceback (you can format it like code). If the issues are something else (e.g. it's not doing what you expect), you need to explain what it is doing, and what you expect it to do instead.</span>
<span class="comment-copy">I've cleaned it up and changed to true/false. I also added the error message.</span>
