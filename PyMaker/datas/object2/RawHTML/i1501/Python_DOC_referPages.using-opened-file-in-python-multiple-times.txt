<div class="post-text" itemprop="text">
<p>I am a new to python and I 
need a help to understand the codes below -</p>
<pre><code>def main():
    print('main')

    fh = open('C:\\Python\\lines.txt')
    for line in fh.readlines():
        print(line, end = '')

    fh = open('C:\\Python\\lines.txt')
    for index,line in enumerate(fh.readlines()):
        print(index, line, end = '')

if __name__ == "__main__":main()
</code></pre>
<p>When I remove the second fh = open..., then
the second for loop does not print. Why ?</p>
</div>
<div class="post-text" itemprop="text">
<p>You should read through a <a href="http://www.diveintopython3.net/files.html">primer or a tutorial on the best practices with dealing with file handlers</a>.  As you did not close the first instance of <code>fh</code>, in larger programs you will run into issues where the system kernel will fail your program for having too many open file handles, which is definitely a bad thing.  In traditional languages you have to do a lot more dancing, but in python you can just use the context manager:</p>
<pre><code>with open('C:\\Python\\lines.txt') as fh:
    for line in fh.readlines():
        print(line, end = '')
</code></pre>
<p>Naturally, the file position is something that is changed whenever the file is read, and that will put the position towards the end, so if you want to do this</p>
<pre><code>with open('C:\\Python\\lines.txt') as fh:
    for line in fh.readlines():
        print(line, end = '')

    for line in fh.readlines():
        print(index, line, end = '')
</code></pre>
<p>The second set of read will not be able to read anything unless you do <code>fh.seek(0)</code> in between the two for loops.</p>
</div>
<div class="post-text" itemprop="text">
<p>Your file handle contains a position pointer.  You can find out where you're at using <code>fh.tell</code>.  It will move through the file for each line.  Once you reach the end of the line, if you want to iterate through it again, you need to reset this pointer.  <code>fh.seek(0)</code> would accomplish that for you.</p>
</div>
<span class="comment-copy"><code>fh.seek(0)</code>?  You need to reset the handle's internal position.</span>
<span class="comment-copy">yes, and <code>fh.close()</code> must be put when fh is not used any longer.</span>
<span class="comment-copy">Not if you use <code>with</code>, as the file handler context manager will handle the closing for you.</span>
<span class="comment-copy">Thanks. Where is the API/Docs for this ?</span>
<span class="comment-copy">@BoratSagdiyev - <a href="http://docs.python.org/2.7/library/stdtypes.html#bltin-file-objects" rel="nofollow noreferrer">docs.python.org/2.7/library/stdtypes.html#bltin-file-objects</a></span>
<span class="comment-copy">Thanks. The python apis look cluttered and ugly. Java is so much cleaner. Anyway, I'll live with that.</span>
<span class="comment-copy">@BoratSagdiyev: Python 3 API: <a href="http://docs.python.org/3/library/io" rel="nofollow noreferrer">docs.python.org/3/library/io</a></span>
