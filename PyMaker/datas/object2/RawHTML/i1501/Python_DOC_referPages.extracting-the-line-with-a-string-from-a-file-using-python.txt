<div class="post-text" itemprop="text">
<p>Team,</p>
<p>I want to extract some lines using a string(starts with tg_) from a file and i get the output as per below regex..the question is,</p>
<ol>
<li><p>I am not sure how to extract the line if goes for 2 lines ends with <code>\</code> like below.</p></li>
<li><p>I don't know how to remove the special characters with the below existing below regexp.</p></li>
</ol>
<blockquote>
<p>*****from a file*******</p>
<p>tg_cr_counters dghbvcvgfv</p>
<p>tg_kk_bb a group1 bye bye bye hi hi hi 1 \ &lt;&lt;&lt;&lt;<br/>
              patch mac hdfh f dgf asadasf \<br/>
              dgfgmnhnjgfg</p>
<p>tg_cr_counters gthghtrhgh }} ]      &lt;&lt;&lt;&lt;&lt;</p>
<p>tg_cr_counters fkgnfkmngvd</p>
</blockquote>
<pre><code>import re

file = open("C:\\Users\\input.tcl", "r")
f1 = file.readlines()

output = open("extract.txt", "a+")

match_list = [ ]   

for item in f1:

    match_list = re.findall(r'[t][g][_]+\w+.*', item)
    if(len(match_list)&gt;0):
        output.write(match_list[0]+"\r\n")
        print(match_list)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use regex with flags for <a href="https://docs.python.org/3/library/re.html#re.M" rel="nofollow noreferrer">re.MULTILINE</a> and <a href="https://docs.python.org/3/library/re.html#re.S" rel="nofollow noreferrer">re.DOTALL</a>. </p>
<p>This way a <code>.</code> will also match <code>\n</code> and you can look for anything that starts with <code>tg_</code> (no need to put each in <code>[]</code>) and ends with a double <code>\n\n</code> (or end of text) <code>\Z</code>:</p>
<pre><code>fn = "t.txt"
with open (fn,"w") as f: 
    f.write("""*****from a file*******

tg_cr_counters dghbvcvgfv

tg_kk_bb a group1 bye bye bye hi hi hi 1 \ &lt;&lt;&lt;&lt;
patch mac hdfh f dgf asadasf \
dgfgmnhnjgfg

tg_cr_counters gthghtrhgh }} ] &lt;&lt;&lt;&lt;&lt;

tg_cr_counters fkgnfkmngvd
""")

import re

with open("extract.txt", "a+") as o, open(fn) as f:
    for m in re.findall(r'^tg_.*?(?:\n\n|\Z)', f.read(), flags=re.M|re.S):
        o.write("-"*40+"\r\n")
        o.write(m)
        o.write("-"*40+"\r\n")

with open("extract.txt")as f:
    print(f.read())
</code></pre>
<p>Output (each match is between a line of <code>----------------------------------------</code>):</p>
<pre><code>----------------------------------------
tg_cr_counters dghbvcvgfv

----------------------------------------
----------------------------------------
tg_kk_bb a group1 bye bye bye hi hi hi 1 \ &lt;&lt;&lt;&lt;
patch mac hdfh f dgf asadasf dgfgmnhnjgfg

----------------------------------------
----------------------------------------
tg_cr_counters gthghtrhgh }} ] &lt;&lt;&lt;&lt;&lt;

----------------------------------------
----------------------------------------
tg_cr_counters fkgnfkmngvd
----------------------------------------
</code></pre>
<p><code>re.findall()</code> result looks like:</p>
<pre><code>['tg_cr_counters dghbvcvgfv\n\n', 
 'tg_kk_bb a group1 bye bye bye hi hi hi 1 \\ &lt;&lt;&lt;&lt;\npatch mac hdfh f dgf asadasf dgfgmnhnjgfg\n\n', 
 'tg_cr_counters gthghtrhgh }} ] &lt;&lt;&lt;&lt;&lt;\n\n', 
 'tg_cr_counters fkgnfkmngvd\n']
</code></pre>
<p>To enable multiline-searches you need to read in more then one line at a time - if your file is <em>humongeous</em> this will lead to memory problems.</p>
</div>
<span class="comment-copy">Can we assume that when there is a single newline, then the line is continuing, and that if there are two consecutive newlines it is not? I'm not clear on what you want to extract.</span>
<span class="comment-copy">what  is the end  codition of a multiline match ?</span>
<span class="comment-copy">@JETM the line which i want to grep is a multiline ends with "\" , when i use regex it extracts only the first line which is ending with \, not second and third line</span>
<span class="comment-copy">thanks..but you are trying to extract form the output, it is there to extract from the input file where multilines are present starting with tg_</span>
<span class="comment-copy">@CharlesDaniel I am creating a file that holds all the lines on top of the code. Then I am extracting from the whole file ` f.read()` the lines you see between <code>--------------------</code> - they are multiline matches. I don't quite get what you imply... <code>t.txt</code> holds 4 multilines starting with <code>tg_</code> and a line in front with <code>'*****from a file*******'</code> in it that is not captured because it does not start with <code>tg_</code></span>
