<div class="post-text" itemprop="text">
<p>I am trying to find the index of the reference in a list of references. Let me illustrate:</p>
<p>This is a list of references I scraped off a website:</p>
<pre><code>ref = "&lt;p class="references" style="font-size:15px"&gt;1. Mcminn. (2003). Last's Anatomy. Elsevier Australia. ISBN:0729537528. &lt;a href="http://books.google.com/books?vid=ISBN0729537528"&gt;Read it at Google Books&lt;/a&gt; - &lt;a href="http://www.amazon.com/gp/product/0729537528"&gt;Find it at Amazon&lt;/a&gt;&lt;br&gt;
2. Netter, F. H. (2019). Atlas of human anatomy. Philadelphia, PA: Elsevier.&lt;/p&gt;"
</code></pre>
<p>I thought I could get the index of reference (i.e. "1." and "2.") by using this:</p>
<pre><code>result = list(map(int, [e for e in re.split("[^0-9]", ref) if e != '']))
</code></pre>
<p>But I'm getting all numbers: <code>[1, 2003, 729537528, 2, 2019]</code></p>
<p>How do I only get the list of reference index, i.e. <code>[1, 2]</code> One way I guess is to find numbers followed by a dot, but I don't know how.</p>
</div>
<div class="post-text" itemprop="text">
<p>You may use</p>
<pre><code>list(map(int, re.findall(r"(?&lt;![^\s&gt;])([0-9]+)\. ", ref)))
</code></pre>
<p>See <a href="https://ideone.com/NZJEDZ" rel="nofollow noreferrer">Python demo</a>:</p>
<pre><code>import re
p_text="""ref = &lt;p class="references" style="font-size:15px"&gt;1. Mcminn. (2003). Last's Anatomy. Elsevier Australia. ISBN:0729537528. &lt;a href="http://books.google.com/books?vid=ISBN0729537528"&gt;Read it at Google Books&lt;/a&gt; - &lt;a href="http://www.amazon.com/gp/product/0729537528"&gt;Find it at Amazon&lt;/a&gt;&lt;br&gt;
2. Netter, F. H. (2019). Atlas of human anatomy. Philadelphia, PA: Elsevier.&lt;/p&gt;"""
result = list(map(int, re.findall(r"(?&lt;![^\s&gt;])([0-9]+)\. ", p_text)))
print(result) # =&gt; [1, 2]
</code></pre>
<p><strong>Details</strong></p>
<ul>
<li><code>(?&lt;![^\s&gt;])</code> - a negative lookbehind that fails the match if, immediately to the left of the current location, there is a char other than whitespace and <code>&gt;</code></li>
<li><code>([0-9]+)</code> - Group 1: one or more digits (it will be the output value from <code>re.findall</code>)</li>
<li><code>. </code> - a <code>.</code> and a space (replace the regular space with <code>\s</code> to match any whitespace).</li>
</ul>
<p>See the <a href="https://regex101.com/r/QJPGtN/1" rel="nofollow noreferrer"><strong>regex demo</strong></a>.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can try this:</p>
<pre><code>import re
o = re.findall(r'[&gt;|\s](\d{1})\.', ref)
print(o)
</code></pre>
<p>Will output:</p>
<pre><code>['1', '2']
</code></pre>
<p>You might need to define a bit more structure, because just number (digit captured by \d) and dot will also capture '8.' at the end of the ISBN number: ISBN:0729537528. Here I used a few characters that (in this example) help distinguishing the two cases. One reference is preceded by a '&gt;' the other one by a space (\s).</p>
</div>
<div class="post-text" itemprop="text">
<p>You have to "escape" the period so something like "[0-9]*\." should work. That's off the top of my head so it may be slightly wrong; I'll also leave it up to you to figure out why * is there.</p>
<p>Be aware that Regex expressions in Python are slightly different from other implementations.  For definitive info see:</p>
<p>See : <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">https://docs.python.org/3/library/re.html</a></p>
<p>which suggests that you should start here:</p>
<p><a href="https://docs.python.org/3/howto/regex.html#regex-howto" rel="nofollow noreferrer">https://docs.python.org/3/howto/regex.html#regex-howto</a></p>
<p>Here's the relevant section of the library page (about 1/ 3 the way down): </p>
<p>The special sequences consist of '\' and a character from the list below. If the ordinary character is not an ASCII digit or an ASCII letter, then the resulting RE will match the second character. For example, \$ matches the character '$'.</p>
<p>For the eqivalent python 2.x page change the version selector found at the top left corner of the page.</p>
</div>
<span class="comment-copy">Try <code>result = list(map(int, re.findall(r"([0-9]+)\. ", p.text)))</code></span>
<span class="comment-copy">Thanks for that! I made a mistake using 'p.text' instead of 'ref' as the variable. I corrected it above.</span>
