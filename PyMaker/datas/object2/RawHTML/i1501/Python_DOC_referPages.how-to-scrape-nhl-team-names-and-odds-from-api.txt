<div class="post-text" itemprop="text">
<p>I am hoping for the following info:</p>
<p>1) NHL Team Names</p>
<p>2) Betting Odds</p>
<p>Here is the site: <a href="https://www.bovada.lv/services/sports/event/v2/events/A/description/hockey/nhl" rel="nofollow noreferrer">https://www.bovada.lv/services/sports/event/v2/events/A/description/hockey/nhl</a>.</p>
<p>Here is my code so far:</p>
<pre><code>import requests

source = requests.get("https://www.bovada.lv/services/sports/event/v2/events/A/description/hockey/nhl").json()   

data = source[0]    

for game in data['events'][2].items():
    print(game)
</code></pre>
<p>The code above only prints the data for one game. I was hoping for all of the games. Is there an easy way to loop through all of them? I am also not sure how to parse out the info I am looking for. </p>
<ul>
<li>Team Names</li>
</ul>
<p>I noticed the <em>team names</em> are located in the section titled 'competitors':</p>
<pre><code>competitors":[{"id":"3596982-510","name":"Philadelphia Flyers","home":true},{"id":"3596982-376","name":"New York Rangers","home":false}]
</code></pre>
<p>In the example above the info I am looking for is <strong>Philadelphia Flyers</strong> and <strong>New York Rangers</strong>, respectively. </p>
<ul>
<li>Odds</li>
</ul>
<p>(Note: the odds change so the numbers you see may be different)</p>
<p>I also noticed the <em>spread with odds</em> is located in the section titled 'display groups':</p>
<p><code>"displayGroups":[{"id":"100-128","description":"Game Lines","defaultType":true,"alternateType":false,"markets":[{"id":"57349611","description":"Total","key":"2W-OU","marketTypeId":"120743","status":"O","singleOnly":false,"notes":"","period":{"id":"1191","description":"Match","abbreviation":"M","live":false,"main":true},"outcomes":[{"id":"294606239","description":"Over","status":"O","type":"O","price":{"id":"1836755921","handicap":"6.5","american":"EVEN","decimal":"2.00","fractional":"1/1","malay":"1.00","indonesian":"1.00","hongkong":"1.00"}},{"id":"294606240","description":"Under","status":"O","type":"U","price":{"id":"1836755922","handicap":"6.5","american":"-125","decimal":"1.800","fractional":"4/5","malay":"0.80","indonesian":"-1.25","hongkong":"0.80"}}]},{"id":"57349614","description":"Moneyline","key":"2W-12","marketTypeId":"372","status":"O","singleOnly":false,"notes":"","period":{"id":"1191","description":"Match","abbreviation":"M","live":false,"main":true},"outcomes":[{"id":"294606235","description":"New York Rangers","status":"O","type":"A","competitorId":"3596982-376","price":{"id":"1836569815","american":"+125","decimal":"2.250","fractional":"5/4","malay":"-0.80","indonesian":"1.25","hongkong":"1.25"}},{"id":"294606236","description":"Philadelphia Flyers","status":"O","type":"H","competitorId":"3596982-510","price":{"id":"1836569814","american":"-155","decimal":"1.645161","fractional":"20/31","malay":"0.65","indonesian":"-1.55","hongkong":"0.65"}}]},{"id":"57349618","description":"Puck Line","key":"2W-HCAP","marketTypeId":"120744","status":"O","singleOnly":false,"notes":"","period":{"id":"1191","description":"Match","abbreviation":"M","live":false,"main":true},"outcomes":[{"id":"294606248","description":"New York Rangers","status":"O","type":"A","competitorId":"3596982-376","price":{"id":"1836755920","handicap":"1.5","american":"-210","decimal":"1.47619","fractional":"10/21","malay":"0.48","indonesian":"-2.10","hongkong":"0.48"}},{"id":"294606249","description":"Philadelphia Flyers","status":"O","type":"H","competitorId":"3596982-510","price":{"id":"1836569799","handicap":"-1.5","american":"+175"</code></p>
<p>In the example above the info I am looking for is <strong>1.5</strong> and <strong>-210</strong> (for the New York Rangers), and <strong>-1.5</strong> and <strong>+175</strong> (for the Philadelphia Flyers).  </p>
<p>Here is an example of the data I would like for one game:</p>
<pre><code>                            Spread       Win         Total
New York Rangers        +1.5 (-230)     +130     O 6.0 (-105)
Philadelphia Flyers     -1.5 (+190)     -150     O 6.0 (-115)
</code></pre>
<p>I would like the same info for all of the games if possible. </p>
<p>I am new to scraping and have no prior experience coding. Any help will be greatly appreciated. Thanks in advance for your time and efforts!</p>
<ul>
<li><strong>Update:</strong></li>
</ul>
<p>Here is the URL: <a href="https://www.bovada.lv/sports/hockey" rel="nofollow noreferrer">https://www.bovada.lv/sports/hockey</a></p>
<p>I am looking for the bet line info:</p>
<p><a href="https://i.stack.imgur.com/V2IXn.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/V2IXn.png"/></a></p>
</div>
<div class="post-text" itemprop="text">
<p>To get team name pairs try below:</p>
<pre><code>import requests

source = requests.get("https://www.bovada.lv/services/sports/event/v2/events/A/description/hockey/nhl").json()   

data = source[0] 
for game in data:
    for team in data['events']:
        try:
            team_1 = team['competitors'][0]['name']
            team_2 = team['competitors'][1]['name']
            try: odd_1_1 = team['displayGroups'][0]['markets'][0]['outcomes'][0]['price']['handicap'] 
            except KeyError: odd_1_1 = None
            try: odd_1_2 = team['displayGroups'][0]['markets'][0]['outcomes'][0]['price']['american'] 
            except KeyError: odd_1_2 = None
            try: odd_2_1 = team['displayGroups'][0]['markets'][0]['outcomes'][1]['price']['handicap'] 
            except KeyError: odd_2_1 = None
            try: odd_2_2 = team['displayGroups'][0]['markets'][0]['outcomes'][1]['price']['american'] 
            except KeyError: odd_2_2 = None
            print("{0} ({2}, {3}) vs {1} ({4}, {5})".format(team_1,team_2, odd_1_1, odd_1_2, odd_2_1, odd_2_2))
        except IndexError:
            pass
</code></pre>
<p>Output:</p>
<pre><code>Philadelphia Flyers (6.0, -115) vs New York Rangers (6.0, -105)
Washington Capitals (1.5, -150) vs Detroit Red Wings (-1.5, +125)
Anaheim Ducks (5.5, -110) vs Edmonton Oilers (5.5, -110)
...
</code></pre>
<p>Note that in some entries <code>competitors</code> key has no value, so I used <code>try</code>/<code>except</code> to handle this case...</p>
</div>
<div class="post-text" itemprop="text">
<p>This is a JSON formatted data, so use the python <a href="https://docs.python.org/3/library/json.html" rel="nofollow noreferrer">json module</a> </p>
<pre><code>import json
json.loads('["foo", {"bar":["baz", null, 1.0, 2]}]')
&gt;&gt;&gt; ['foo', {'bar': ['baz', None, 1.0, 2]}]
</code></pre>
<p>You can use the debugger to observe the datastructure, the <code>loads(str)</code> function will return. It will be a <code>dict</code> in your case. Then navigate in the lists and dictionaries.</p>
</div>
<span class="comment-copy">For now I cannot find required <code>+1.5 -210</code> and <code>-1.5 +175</code> under <code>displayGroups</code>... but I'll try to find :)</span>
<span class="comment-copy">@Able Archer Can you tell me where exactly you found these values? :) Still cannot find them. Or they probably were updated...</span>
<span class="comment-copy">The odds change @Andersson so the values might not be the same. I added a pic and the URL. Thanks for your help and I appreciate the try/except... Much respect!</span>
<span class="comment-copy">Your code is extremely helpful sir @Andersson. I am now able to print the teams like requested. My first request is complete... I would love to add the odds if possible. The info I am looking for is located after the words 'handicap' and 'american' (-1.5 and +175, for example).</span>
<span class="comment-copy">@AbleArcher , check updated. For some games <code>handicap</code> key might be absent, so I added some more <code>try</code>/<code>except</code> blocks to handle this issue.. It doesn't look pretty, but should work as expected :)</span>
<span class="comment-copy">Thanks for your response @handras! I will spend some time trying to learn from this.</span>
