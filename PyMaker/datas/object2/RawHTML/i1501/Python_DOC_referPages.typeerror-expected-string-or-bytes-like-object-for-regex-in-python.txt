<div class="post-text" itemprop="text">
<p>I am trying to search some files through regular expression, my target files look like: 'Myfile_200_2018.csv';'Myfile_100_2018.csv'....</p>
<p>For example, the following code keeps give the error: expected string or bytes-like object for Regex in Python.</p>
<p>I searched same error from Google, but I think my game_id is a string right? So I am not sure which part causes the error.</p>
<pre><code>import os
import re

allfiles = os.listdir('.')

csv_files = [filename for filename in allfiles if filename.endswith('.csv')]


game_id='100'

re.search(r'(Myfile_%s_\d{4}.csv$)'%game_id, csv_files)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You are already looping through the files in your folder. Why not filter the list when you create it? </p>
<pre><code>import os
import re

allfiles = os.listdir('.')
game_id='100'

csv_files = [
                filename for filename in allfiles if filename.endswith('.csv') and 
                re.search((r"Myfile_%s_\d{4}.csv$" % game_id), filename)
            ]

print csv_files
</code></pre>
<p>Or if you want to keep the original list as well, you could use filter to create a new filtered list.</p>
<pre><code>csv_files = [filename for filename in allfiles if filename.endswith('.csv')]

filtered_list = filter(lambda filename: re.search((r"Myfile_%s_\d{4}.csv$" % game_id), filename), csv_files)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use the substring search in your list, if you just want to seach whether the game_id is present in the filename or not</p>
<pre><code>import os
import re

allfiles=['Myfile_100_2018.csv', 'Myfile_100_2017.csv','Yourfile_100_2016.csv','Myfile_200_2018.csv','Myfile_100_2018.csv']

csv_files = [filename for filename in allfiles if filename.endswith('.csv')]


game_id='100'

print([file for file in csv_files if re.search((r"Myfile_%s_\d{4}.csv$" % game_id),file)])
</code></pre>
<p>output:</p>
<pre><code>['Myfile_100_2018.csv', 'Myfile_100_2017.csv', 'Myfile_100_2018.csv']
</code></pre>
</div>
<span class="comment-copy"><code>csv_files</code> needs to be a string, not a list of strings.</span>
<span class="comment-copy">But in this folder there are several csv files, the csv_files contains list of csv files, and when the game_id='100", just want to return all csv files match the format, it yams contains:'Myfile_100_2018.csv', 'Myfile_100_2017.csv','Myfile_100_2016.csv'</span>
<span class="comment-copy">That's not how <a href="https://docs.python.org/3/library/re.html#re.search" rel="nofollow noreferrer">re.search</a> works. Use a different method; you can't look up a function, plug in whatever arguments you <i>think</i> will work, and expect it to do so.</span>
<span class="comment-copy">You are already looping through the list of files. Why don't you filter it there at the time when you create the list? like <code>csv_files = [filename for filename in allfiles if filename.endswith('.csv') and re.search((r"Myfile_%s_\d{4}.csv$" % game_id), filename)]</code> ?</span>
<span class="comment-copy">But i want to return a list which match the regex, since in this folder there are several csv files, the csv_files contains list of csv files, and when the game_id='100", just want to return all csv files match the format, it yams contains:'Myfile_100_2018.csv', 'Myfile_100_2017.csv','Myfile_100_2016.csv'</span>
<span class="comment-copy">I have changed the code to return the files instead of bool values</span>
<span class="comment-copy">I doubt OP wants the zeros in the list, so use <code>[file for file in csv_files if game_id in file]</code> instead.</span>
<span class="comment-copy">Thanks for the correction. Edited the solution</span>
<span class="comment-copy">How about if there is a file calls 'Yourfile_100_2018.csv, it will still return as a result</span>
