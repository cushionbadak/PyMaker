<div class="post-text" itemprop="text">
<p>I have created a client server app, where when i am in need to update the Client code, i am pushing an update using a string match and whenever that string matches the infinitely running client code process that.
The update is nothing but a string that contains python code in it, let's say this:</p>
<pre><code>while True:
    if data == "exit":
        connection_status = 'Exit Request Received, Exiting'
        MessageBox(None, connection_status, "Connection Status", 0x40000 | MB_OK | ICON_STOP)               
        break
</code></pre>
<p>And in my client main code, i have something like this:</p>
<pre><code>if 'update' in data:
    new_source = data.split('###_CODEBLOCK_###')
    exec(new_source[1]) 
</code></pre>
<p>From the server, i am sending something like this:</p>
<pre><code>Enter you Message  : update code is here ###_CODEBLOCK_###while True : if data == "mad": connection_status = "Exit Request Received, Exiting" ; MessageBox(None, connection_status, "Connection Status", 0x40000 | MB_OK | ICON_STOP) ; break
</code></pre>
<p>Problem :</p>
<ol>
<li><p>CLI doesn't like new line, therefore i have to use one-liner python code to achieve this</p></li>
<li><p>Because, it's a one-liner and while and if loop are compound statements, i can't use them the way i put in, so i need to know how can i achieve it in one-line code</p></li>
<li><p>Is this really a good hack to send updates? This is bonus question for me, if you don't answer it, that's fine</p></li>
</ol>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/functions.html#exec" rel="nofollow noreferrer">exec()</a> function in Python and convert that multiline code into a single line string to be used as <code>exec()</code> argument. Make sure you use <code>\n</code> to indicate newline and still keep the proper spacing to indicate indentation.</p>
</div>
<span class="comment-copy">You have basically reinvented a trojan.</span>
<span class="comment-copy">You can create a function with your code and call it when you need it.</span>
