<div class="post-text" itemprop="text">
<p>I want to index all the USB files in a dictionary with the path to them and the name of the file. I know I'll have to use recursion to analyse all the nested folders. I'm just not sure how to list those files, and access the USB drive. I looked around and found how to write to a USB but not how to list all the files in it. Thanks in advance.</p>
</div>
<div class="post-text" itemprop="text">
<p>Sure, you can use a script like this (filling in your own path to the USB):</p>
<pre><code>import subprocess


def main():
    cmd = 'find /Path/To/Your/USB/Here'
    p = subprocess.Popen(cmd, shell=True)
    print p.communicate()[0]


if __name__ == '__main__':
    main()
</code></pre>
<p>Now to run this, e.g. in unix/mac:</p>
<pre><code>$ python nameOfThisPythonScript.py  &gt; somefile.txt
</code></pre>
<p>Then you should see the contents of the USB listed in somefile.txt.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use this script with your usb path</p>
<pre><code>import os
f=open('path to the list file',"w")
for root, dirs, files in os.walk('path to usb'):
    for dir in dirs:
        for file in files:
            f.write(os.path.join(root, file) + '\n')
f.close()
</code></pre>
</div>
<span class="comment-copy">do you have the option of executing a command from a python script to see the files? You could use the subprocess module and have it run <code>find .</code> from the USB drive itself then write this list to a file. Let me know if you'd like details on that.</span>
<span class="comment-copy">Yes I have that option. Could you write a answer explaining how to use the module to do that?</span>
<span class="comment-copy">If you want to use python, you could also try using the <a href="https://docs.python.org/3/library/glob.html" rel="nofollow noreferrer">glob package</a> which allows for unix style glob expressions and can return an iterable.</span>
<span class="comment-copy">I'm using a Windows machine at the moment, and I can't test it, but would changing the cmd to <code>cmd = 'touch file_list.txt &amp;&amp; find /path/to/your/usb/here &gt; file_list.txt</code> do that directly inside of the code?</span>
<span class="comment-copy">Yes you can do that.</span>
