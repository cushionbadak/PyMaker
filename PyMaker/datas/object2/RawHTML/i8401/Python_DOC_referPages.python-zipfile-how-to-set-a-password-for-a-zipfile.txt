<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/2195747/python-code-to-create-a-password-encrypted-zip-file">Python code to create a password encrypted zip file? [duplicate]</a>
<span class="question-originals-answer-count">
                    5 answers
                </span>
</li>
</ul>
</div>
<p>I have a zipfile in (sav.zip) and I'm trying to set a Password for it:</p>
<p>zf = zipfile.ZipFile("sav.zip")</p>
<p>zf.setpassword("1234")</p>
<p>but... I get a TypeError: expected Bytes, got str</p>
<p>Where's my mistake?</p>
</div>
<div class="post-text" itemprop="text">
<p>It is not mentioned in the documentation, but on Python 3, the password should be <code>bytes</code>, not <code>str</code>. So:</p>
<pre><code>zf.setpassword(b"1234")
</code></pre>
<p>Note that the password is <em>only</em> used for <em>reading</em>, not writing! See the docstring for <code>ZipFile.open</code> in Python 3.</p>
<p>The <code>ZipFile</code> class can read "pkzip 2.0" encryption, which is not considered very strong (it has <a href="http://delaat.net/rp/2014-2015/p57/presentation.pdf" rel="nofollow noreferrer">known weaknesses</a> [pdf]). That could probably be the reason that <em>writing</em> them is not currently (as of Python 2.7.13 and 3.6) implemented in Python. </p>
<p><em>Note:</em> The protection afforded by a password on a zipfile might not very strong, depending on what you want to use it for. An attacker can e.g. <em>replace</em> a password-protected entry in a zipfile <em>without knowing the password</em>! See e.g. <a href="https://security.stackexchange.com/a/35879">this answer</a> on security.stackexchange.</p>
<p><em>Note2:</em> More recent versions of e.g. winzip can use AES to encrypt the contents of zipped files. AFAIK, Python cannot read those.</p>
</div>
<span class="comment-copy">Please read <a href="https://docs.python.org/3/library/zipfile.html#zipfile.ZipFile.setpassword" rel="nofollow noreferrer">the documentation for <code>ZipFile.setpassword()</code></a>. It doesn't do what you think it does.</span>
<span class="comment-copy">try this <code>zf.setpassword(b"1234")</code>, basically password param should be bytes instead of string.</span>
<span class="comment-copy">By "set a password" do you want to convert it to a password-protected zipfile, or is it already password-protected and you want to set the password for reading?</span>
<span class="comment-copy">I don't think so: <a href="https://docs.python.org/3/library/zipfile.html#zipfile.ZipFile.setpassword" rel="nofollow noreferrer"><code>ZipFile.setpassword(pwd)</code></a> sets "<i>pwd</i> as default password to extract encrypted files". It doesn't have anything to do with creating password-protected zip files.</span>
<span class="comment-copy">Edited to reflect that.</span>
<span class="comment-copy">Thank you - it was just the 'b', problem solved :-)</span>
