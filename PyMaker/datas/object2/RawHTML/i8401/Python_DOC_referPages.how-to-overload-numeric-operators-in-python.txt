<div class="post-text" itemprop="text">
<p>I was recently working with Python and wanted to use another way of finding square roots. For example I wanted to find square root of n with Newton-Raphson approximation. I need to overload the overload the <code>**</code> (only when you raise a number to 0.5),o perator as well as <code>math.sqrt()</code>, because I have several older projects that could be sped up by doing so and replacing all <code>math.sqrt()</code> and <code>**(0.5)</code> with another function isn't ideal.</p>
<p>Could this be done in Python?</p>
<p>Is it possible to overload either <code>**</code> or <code>math.sqrt</code>?</p>
<p>Any helpful links are also much appreciated.</p>
<pre><code>def Square_root(n):
    r = n/2
    while(abs(r-(n/r)) &gt; t):
        r = 0.5 * (r + (n/r))
    return r

print(2**(0.5)) ## changes to print(Square_root(2))
print(math.sqrt(2)) ## that also becomes print(Square_root(2))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>In short: you can't change the behavior of <a href="https://docs.python.org/3/reference/datamodel.html#emulating-numeric-types" rel="nofollow noreferrer"><code>__pow__</code></a> for built-in types.</p>
<p>Long answer: you can subclass the <code>float</code>, but it will require additional coding and refactoring of the input values of the program, to the new <code>float</code> class with overwritten operators and functions.</p>
<p>And you can overwrite the <code>math.sqrt</code>, but this is not <strong>recommended</strong>:</p>
<pre><code>import math
math.sqrt = lambda x, y: print(x, y)
math.sqrt(3, 2)
# 3 2
</code></pre>
<p>This will require the custom function to have the same signature.</p>
</div>
<div class="post-text" itemprop="text">
<p>If you really want to overload languages <em>int</em> and <em>float</em> objects - you can use variants of <a href="http://www.python-course.eu/python3_magic_methods.php" rel="nofollow noreferrer">magic functions</a>. In order to be consistent, you'll have to write a lot of code.</p>
<p>A lot of work. Python is for lazy people - if you like to write a lot, stick to Java or C++ :)</p>
</div>
<span class="comment-copy">You can overload <code>**</code> (or any other operator) only for the members of your custom classes. I do not believe you can redefine <code>math.sqrt()</code>.</span>
<span class="comment-copy">Yes, that's possible, but you really shouldn't do it. Anyone else looking through the source code of the program will expect <code>**</code> and <code>math.sqrt()</code> to work like they do normally, so the different behavior will probably cause a lot of confusion...</span>
<span class="comment-copy">Thank you. The code snippet was what I was looking for. As for <b>pow</b> I guess I will have to leave that as is.</span>
