<div class="post-text" itemprop="text">
<p>Suppose my text file is something like:
    <p>OK/INFO - 1070083 - Using waited I/O for the index and data files..</p>
<p>OK/INFO - 1006069 - Data cache size ==&gt; [100000] Kbytes, [2380] data pages.</p>
<p>OK/INFO - 1006070 - Data file cache size ==&gt; [0] Kbytes, [0] data file 
    pages.</p>
<p>OK/INFO - 1200551 - Allocated TRIGMAXMEMSIZE: [4096] Bytes. .</p>
<p>OK/INFO - 1007046 - Restructuring of Database [Finstmt] Succeeded.</p>
<p>OK/INFO - 1007067 - Total Restructure Elapsed Time : [8.36] seconds.</p>
<p>OK/INFO - 1013273 - Database NA_PLN.Finstmt altered.</p>
Now I have to search for Elapsed from this text file. If Elapsed is present print something, and if it is not present print some other quote.
What i have tried is:</p>
<pre><code>for line in inputFile:
    if 'Elapsed' in line:
        print 'Present'
    if 'Elapsed' not in line:
        print 'Not present'
</code></pre>
<p>But this gives not present for nearly all the lines except for the one in which the required string is present.</p>
<p>Is there any way by which I can check for presence and absence and print only once??</p>
</div>
<div class="post-text" itemprop="text">
<p>When you loop through the file line by line, the following statements will be executed for every line. What you want is some code that can basically say </p>
<pre><code>if "Elapsed" in file: 
    print("Present") 
else:
    print("Not present")
</code></pre>
<p>Since in python the read() function reads in the file as a literal string, new line characters and all, you can implement this code as the following:</p>
<pre><code>file = open("filepath.txt") #this is your file's path
text = file.read()
if "Elapsed" in text: 
    print("Present") 
else:
    print("Not present")
</code></pre>
<p>This saves you the trouble of looping over the file.</p>
</div>
<div class="post-text" itemprop="text">
<p>If you want the check to be performed for the entire file and not line by line you can do it like this:</p>
<pre><code>lines_in_file = open(inputFile).readlines()
test = 'Present' if any('Elapsed' in line for line in lines_in_file) else 'Not present'
print(test)
</code></pre>
<p>You can read more about <code>any</code> <a href="https://docs.python.org/3/library/functions.html#any" rel="nofollow noreferrer">here</a>. Also note that <code>any</code> is <em>lazy</em> meaning that it does not have to go through the whole <code>lines_in_file</code> container. It will exit as soon as its predicate (<code>'Elapsed' in line</code> in this case) evaluates to <code>True</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>Did you know that loops can have an <code>else</code> clause?</p>
<pre><code>for line in inputFile:
    if 'Elapsed' in line:
        print 'Present'
        break
else:
    print 'Not present'  
</code></pre>
<p>This will let you know if Elapsed appears at least once in your file, which is what i understand you want to achieve<br/>
The else clause will only be called if the loop is allowed to complete, that is if "Elapsed" isn't in your file</p>
</div>
<div class="post-text" itemprop="text">
<p>Unless the file is very long, you can just read the entire file content into a string and test it.</p>
<pre><code>&gt;&gt;&gt; from pathlib import Path
&gt;&gt;&gt; 'Elapsed' in Path('filename.txt').read_text()
True
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This should work:</p>
<pre><code>present = False
    for line in inputFile:
        if 'Elapsed' in line:
            present = True 
            break
if present:
    print 'Present'
else:
    print 'Not present'
</code></pre>
</div>
<span class="comment-copy">the code is sort of correct and so is the output.. What is the problem exactly? Keep in mind that when you have multiple <code>if</code>s all of them will be checked. This does not happen with <code>if-elif-else</code> blocks.</span>
<span class="comment-copy">But I don't want to print Not Present for all lines. Only if I get the info that 'Elapsed' is not present anywhere, I should get Not present... Right now I am getting for all lines except one.\</span>
<span class="comment-copy">There is no need for the second if. If its in the string it cant be not in the string (and vice versa). You can just replace <code>if 'Elapsed' not in line:</code> with <code>else:</code>.</span>
<span class="comment-copy">Ev. Kounis's answer is even more efficient because mine takes the time to read in the file completely before checking if the string is in the file, his stops as soon as it finds the intended string without doing that extra step of reading in, so I'd suggest you use his unless you're unfamiliar with the <code>any</code> function.</span>
<span class="comment-copy">you should probably break out of the loop once the if triggers</span>
<span class="comment-copy">yes good point, that would save computational time, if the file is very big. added it in.</span>
