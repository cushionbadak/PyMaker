<div class="post-text" itemprop="text">
<p>I'm trying to pipe h264 to vlc in python.  I'm having trouble opening the cvlc program while calling it in Popen.  This is the code.</p>
<pre><code>    self.vlc = subprocess.Popen([
    "cvlc", "-vvv", "stream:///dev/stdin", "--sout \'#rtp{sdp=rtsp://:8554/}\' :demux=h264"
    ], stdin=subprocess.PIPE)
</code></pre>
<p>This is the vlc error </p>
<pre><code>vlc: unknown option or missing mandatory argument `--sout '#rtp{sdp=rtsp://:8554/}' :demux=h264'
</code></pre>
<p>I've been trying to figure this out for hours with different types of string formatting.</p>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<p><strong>Question</strong>:  I'm having trouble opening the cvlc program while calling it in Popen.  </p>
</blockquote>
<p>Use <code>shlex.quote(..</code>. to get a shell-escaped version of your Parameters.</p>
<blockquote>
<p>Python 3.6 Documentation:<a href="http://docs.python.org/3/library/shlex.html#shlex.quote" rel="nofollow noreferrer">shlex.quote</a> </p>
<p><strong><code>shlex.quote(s)</code></strong><br/>
  Return a shell-escaped version of the string s. The returned value is a string that can safely be used as one token in a shell command line, for cases where you cannot use a list</p>
</blockquote>
</div>
<span class="comment-copy">There is an --sout parameter as seen <a href="https://wiki.videolan.org/Documentation:Streaming_HowTo/Command_Line_Examples/#RTSP_live_streaming" rel="nofollow noreferrer">here</a> and turns out subprocess doesn't handle spaces in parameters well.  <a href="https://stackoverflow.com/questions/25655173/is-python-subprocess-popen-accept-space-in-path/25655627#25655627">This turned out to be my solution.</a></span>
<span class="comment-copy">shlex.split works even better, I posted working code <a href="https://raspberrypi.stackexchange.com/questions/59512/raspberry-streaming-using-vlc-picamera-python/68806#68806">here</a>.  Thanks for you help, don't think I would have gotten it working otherwise</span>
