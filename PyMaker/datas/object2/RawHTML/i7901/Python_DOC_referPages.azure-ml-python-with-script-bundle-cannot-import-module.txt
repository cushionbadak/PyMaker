<div class="post-text" itemprop="text">
<p>In Azure ML, I'm trying to execute a Python module that needs to import the module pyxdameraulevenshtein (<a href="https://pypi.python.org/pypi/pyxDamerauLevenshtein" rel="nofollow noreferrer">https://pypi.python.org/pypi/pyxDamerauLevenshtein</a>).</p>
<p>I followed the usual way, which is to create a zip file and then import it; however for this specific module, it seems to never be able to find it. The error message is as usual:</p>
<p><em>ImportError: No module named 'pyxdameraulevenshtein'</em></p>
<p>Has anyone included this pyxdameraulevenshtein module in Azure ML with success ?</p>
<p>(I took the package from <a href="https://pypi.python.org/pypi/pyxDamerauLevenshtein" rel="nofollow noreferrer">https://pypi.python.org/pypi/pyxDamerauLevenshtein</a>.)</p>
<p>Thanks for any help you can provide,</p>
<p>PH</p>
</div>
<div class="post-text" itemprop="text">
<p>I viewed the <code>pyxdameraulevenshtein</code> module page, there are two packages you can download which include a wheel file for MacOS and a source code tar file. I don't think you can directly use the both on Azure ML, because the MacOS one is just a share library <code>.so</code> file for darwin which is not compatible with Azure ML, and the other you need to first compile it.</p>
<p>So my suggestion is as below for using <code>pyxdameraulevenshtein</code>.</p>
<ol>
<li>First, compile the source code of <code>pyxdameraulevenshtein</code> to a DLL file on Windows, please refer to the document for Python <a href="https://docs.python.org/2/extending/windows.html" rel="nofollow noreferrer">2</a>/<a href="https://docs.python.org/3/extending/windows.html" rel="nofollow noreferrer">3</a> or search for doing this.</li>
<li>Write a Python script using the DLL you compiled to implement your needs, please refer to the SO thread <a href="https://stackoverflow.com/questions/252417/how-can-i-use-a-dll-file-from-python">How can I use a DLL file from Python?</a> for how to use DLL from Python and refer to the Azure offical <a href="https://docs.microsoft.com/en-us/azure/machine-learning/machine-learning-execute-python-scripts" rel="nofollow noreferrer">tutorial</a> to write your Python script</li>
<li>Package your Python script and DLL file as a zip file, then to upload the zip file to use it in <code>Execute Python script</code> model of Azure ML.</li>
</ol>
<p>Hope it helps.</p>
</div>
<div class="post-text" itemprop="text">
<p>Adding the path to <code>pyxdameraulevenshtein</code> to your system path should alleviate this issue. The script checks the system path that the python script is running on and doesn't know where else to look for anything other than the default packages. If your python script is in the same directory as the <code>pyxdameraulevenshtein</code> package in your ZIP file, this should do the trick. Because you are running this within Azure ML and can't be sure of the exact location of your script each time you run it, this solution should account for that.</p>
<pre><code>import os
import sys

sys.path.append(os.path.join(os.getcwd(), 'pyxdameraulevenshtein'))

import pyxdameraulevenshtein
</code></pre>
</div>
<span class="comment-copy">Ok thanks a lot for the explanations Peter. I'm trying that now and will let you know how it goes.</span>
<span class="comment-copy">Ok, thanks a lot @PeterSmith, it works! In fact I used a slightly different way: from the package location I ran a "python setup.py bdist" and obtained a .pyd file. I zipped this file and used it as the script bundle, and the Python module in Azure ML worked successfully. You saved me a lot of time!! Thanks again...</span>
<span class="comment-copy">Thanks for the reply stevedem, I did try and although it works with some other packages, for this one it doesn't - I believe it's something to do with the extension of the file, the pyxdameraulevenshtein module has a .pyx extension with a corresponding .c file, whereas typical modules have a .py extension. I'm not sure if .pyx extension can be imported in Azure ML ?</span>
