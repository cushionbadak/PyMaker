<div class="post-text" itemprop="text">
<p>So, I'm trying to build a Flask app that keep track off my TV shows (just doing for fun)... but right now I'm trying to deal with the API itself (TVmaze), I'm gonna use "Arrow" as an example. What I want to do is create a <code>dict</code> like this <code>all_seasons = {season_number:{'ep_number':{'ep_name':'Exemple...', ep_num: ep_number}}}</code> so for example if I want to get the name of the season 4 22th episode I would do like this <code>all_seasons[4][22]['ep_name']</code>
and somehow I manage to do that (sort of), but that is what I'm getting:</p>
<pre><code>{1: {23: {'ep_name': 'Sacrifice', 'ep_num': 23}},
2: {23: {'ep_name': 'Unthinkable', 'ep_num': 23}},
3: {23: {'ep_name': 'My Name is Oliver Queen', 'ep_num': 23}},
4: {23: {'ep_name': 'Schism', 'ep_num': 23}},
5: {23: {'ep_name': 'Lian Yu', 'ep_num': 23}}}
</code></pre>
<p>I'm only getting the 23th episode of each season. The code that I'm using:</p>
<pre><code>for i in range(len(seasonNum) +1):
    while e &lt;= total2:
        if e_data[e]['season'] == i+1:
            temp = i + 1
            ep_num = e_data[e]['number']
            ep_title = e_data[e]['name']
            all_seasons[temp] = {ep_num:{'ep_name':ep_title, 'ep_num':ep_num}}
            print("Season %d Episode %d - %s"%(temp, ep_num, ep_title))
        else:
            i+=1
        e+=1
</code></pre>
<p>I put the print statment just for debug, and with the print it works. Shows all of the episodes per season</p>
<pre><code>Season 1 Episode 1 - Pilot
Season 1 Episode 2 - Honor Thy Father
Season 1 Episode 3 - Lone Gunmen
Season 1 Episode 4 - An Innocent Man
Season 1 Episode 5 - Damaged
Season 1 Episode 6 - Legacies
Season 1 Episode 7 - Muse of Fire
Season 1 Episode 8 - Vendetta
Season 1 Episode 9 - Year's End
Season 1 Episode 10 - Burned
Season 1 Episode 11 - Trust But Verify
Season 1 Episode 12 - Vertigo
Season 1 Episode 13 - Betrayal
Season 1 Episode 14 - The Odyssey
...
</code></pre>
<p>and it goes on.</p>
</div>
<div class="post-text" itemprop="text">
<p>You are replacing the dictionaries on each iteration instead of adding the new data. Try something like this:</p>
<pre><code>i = 0
e = 0
while e &lt;= total2:
    if e_data[e]['season'] == i+1:
        temp = i + 1
        ep_num = e_data[e]['number']
        ep_title = e_data[e]['name']
        all_seasons.setdefault(temp, {})[ep_num] = {'ep_name':ep_title, 'ep_num':ep_num}}
        print("Season %d Episode %d - %s"%(temp, ep_num, ep_title))
        e += 1
    else:
        i +=1
</code></pre>
<p><code>all_seasons.setdefault(temp, {})</code> will add a new entry in <code>all_seasons</code> with key <code>temp</code> and value <code>{}</code> only if it didn't exist already, and then return <code>all_seasons[temp]</code> (either the already existing value or the newly set one) (see <a href="https://docs.python.org/3/library/stdtypes.html#dict.setdefault" rel="nofollow noreferrer"><code>dict.setdefault</code></a>).</p>
</div>
<span class="comment-copy">What is <code>seasonNum</code>, <code>total2</code>, <code>e_data</code>, etc.?</span>
<span class="comment-copy"><code>seasonNum</code> is the number of seasons of the show is a <code>dict {1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6}</code>, <code>total2</code> is the number of episodes witch in this case is 114 or 115, <code>e-data</code> is what i get from the api 'show episodes list' at <a href="http://www.tvmaze.com/api" rel="nofollow noreferrer">tvmaze.com/api</a>, returns a json with every episode.</span>
<span class="comment-copy">i think that the <code>seasonNum</code> could be a simple list.</span>
<span class="comment-copy">it works, but i dont get the first episode off the season, execept from season 1</span>
<span class="comment-copy">@ViniciusBarbosa Well, that is actually a different question, and honestly I'd need to know more about the data and the program to answer right, but anyway I've edited with what I <i>think</i> may be a solution (removing the apparently unnecessarily <code>for</code> loop). If that's the case, it's not the best way to do it, but I tried to minimize the changes.</span>
<span class="comment-copy">okay. i'll try to figure oute here, anyway thanks!</span>
<span class="comment-copy">It's working now! have to change to this <code>all_seasons.setdefault(temp, {})[ep_num] = {'ep_name':ep_title, 'ep_num':ep_num}</code> and remove the for loop</span>
