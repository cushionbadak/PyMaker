<div class="post-text" itemprop="text">
<p>I want to create a YAML file from scratch inside a python program (with PyYAML), to send it inside a HTTP request body. The closest thing I've found in the <a href="http://pyyaml.org/wiki/PyYAMLDocumentation" rel="nofollow noreferrer">PyYAML docs</a> is this:</p>
<pre><code>import yaml
document = """
  a: 1
  b:
    c: 3
    d: 4
"""
yaml.load(document)
send_req(document)
</code></pre>
<p>However, I find it <em>ugly</em> and not very maintainable, so I would like to be able to do something like this:</p>
<pre><code>document = {'a': 1, 'b': {'c': 3, 'd': 4}}
yaml.load(document)
send_req(document)
</code></pre>
<p>So I can modify its structure in a programmatic way, with variables and so.</p>
<p>How can I create a YAML document from a python object structure?</p>
</div>
<div class="post-text" itemprop="text">
<p>I think what you want is <a href="http://pyyaml.org/wiki/PyYAMLDocumentation#DumpingYAML" rel="nofollow noreferrer"><code>yaml.dump</code></a>.</p>
<pre><code>document = {'a': 1, 'b': {'c': 3, 'd': 4}}
print(yaml.dump(document))
&gt;&gt;&gt; a: 1
b: {c: 3, d: 4}
</code></pre>
<p>For simple Python objects you can even serialize <a href="https://docs.python.org/3/library/stdtypes.html#object.__dict__" rel="nofollow noreferrer"><code>.__dict__</code></a> directly:</p>
<pre><code>class MyClass(object):
    def __init__(self, a, b):
        self.a = a
        self.b = b

my_obj = MyClass(1, 2)
print(yaml.dump(my_obj.__dict__))
&gt;&gt;&gt; {a: 1, b: 2}
</code></pre>
</div>
<span class="comment-copy">You have your terminology all mixed up and that is why you probably couldn't Google an answer for this yourself. You never <code>load</code> a YAML <b>structure</b>. You <code>load</code> a YAML document (from a file or a string). You instead have a Python data structure that you want to represent as a YAML document. You do that by  <code>dump</code>-ing it to a stream using <code>safe_dump(document, stream)</code>.  Apart from that you better use <code>safe_load()</code> instead of <code>load()</code>, since PyYAML's <code>load()</code> is unsafe. To answer your question: yes, that is possible.</span>
<span class="comment-copy">@Anthon have you considered turning your useful comment into an answer?</span>
<span class="comment-copy">So should I do something like <code>myyaml= yaml.dump(document)</code> ? And then, <code>yaml.load(myyaml)</code> ?</span>
<span class="comment-copy">@agsergi Yes, the output of <code>yaml.dump</code> can be used directly as input of <code>yaml.load</code>.</span>
<span class="comment-copy">Perfect. Thank you.</span>
