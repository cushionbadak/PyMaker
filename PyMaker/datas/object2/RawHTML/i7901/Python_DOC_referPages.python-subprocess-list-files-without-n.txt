<div class="post-text" itemprop="text">
<p>I'm using <code>subprocess</code> on python to list all the files/folders in one folder:</p>
<pre><code>def subprocess_list(command):
  p = subprocess.Popen(command,stdout=subprocess.PIPE, shell=True)
  proc_stdout = p.communicate()[0].strip()
  lista.append(proc_stdout.decode('utf-8'))
  retcode = p.wait()
subprocess_list('ls | grep aa')
</code></pre>
<p>When I print "lista" I get all the paths in a single-element list:</p>
<pre><code>lista=[aaa\naab\naac\n]
</code></pre>
<p>So in order to separate them and get each file I first export them to a .txt, call it back and delete <code>\n</code></p>
<pre><code>with open('%s/files.txt'%Path_Desktop,'w') as file:
    for item in lista:
        file.write(item)

with open('%s/files.txt'%Path_Desktop) as file:
    content = file.readlines()
content = [x.strip() for x in content]
</code></pre>
<p>Print "content":</p>
<pre><code>content=['aaa','aab','aac']
</code></pre>
<p>Is there a way to do it directly without the export part? Thanks in advance!</p>
</div>
<div class="post-text" itemprop="text">
<p>first, you souldn't use subprocess to call ls. For your purpose the glob or os module is the better choice.</p>
<p>Why do you get "\n" strings? Well, you just call a subprocess which will return it's output as string.</p>
<p>With your suprocess-ls solution, you could now go on and split your string by "\n", to get a real python list.</p>
<pre><code>list = list.split("\n")
</code></pre>
<p>Much better would be using glob instead. <a href="https://docs.python.org/3/library/glob.html" rel="nofollow noreferrer">https://docs.python.org/3/library/glob.html</a></p>
<pre><code>import glob
list = glob.glob("*aa*")
</code></pre>
<p>You would get exactly what you want, but it's the much faster, safer, pythonic and better solution.</p>
</div>
<div class="post-text" itemprop="text">
<p>I changed the subprocess for this, don't know if correct or the same but so far it's working well.</p>
<pre><code>lista = (os.popen('ls | grep aa').read()).split('\n')
</code></pre>
</div>
<span class="comment-copy">How about <code>output.split('\n')</code> (<code>list</code> is not a good variable name). Or <code>os.listdir()</code>?</span>
<span class="comment-copy">why do you want to use a subprocess for a task, python can do natively and even better?</span>
<span class="comment-copy">Well, I started to python a few weeks ago, I started looking for info on the web and subprocess was what I found first. I tried os once but I had the problem with the split plart so I chose subprocess, list and export/import to txt</span>
