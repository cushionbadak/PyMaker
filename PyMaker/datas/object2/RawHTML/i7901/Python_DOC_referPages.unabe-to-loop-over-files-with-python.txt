<div class="post-text" itemprop="text">
<p>I have a folder with 40 files in it which I want to loop through. When I print out the name of the file my code works fine:</p>
<pre><code>import os
source = 'pathtofile'
for root, dirs, filenames in os.walk(source):
    for file in filenames:
        print file
</code></pre>
<p>It will print :</p>
<p>File1</p>
<p>File2</p>
<p>File 3</p>
<p>.....</p>
<p>File 40</p>
<p>But if I try to open the file / files in the loop I get the following error. IO error: <strong>IOError: [Errno 2] No such file or directory: 'file.txt'</strong></p>
<p>This is the code I am having issues with :</p>
<pre><code>import os
import re

destdir = 'pathtofile'
files = [ f for f in os.listdir(destdir) if 
os.path.isfile(os.path.join(destdir,f)) ]

for f in files:
    with open(f, 'r') as var1:
        for line in var1: 
            if re.match('(.*)exception(.*)', line):
                print line
</code></pre>
<p>I have verified , and the string I am searching for, it does exist in the files.</p>
<p>Can you please provide some insight as to what is wrong with my code ? Thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p>This is what you want: </p>
<pre><code>from os.path import join, isfile

files = [join(destdir, x) for x in os.listdir(destdir) if isfile(join(destdir, x))]
</code></pre>
<p>or if you know all files have <code>.txt</code> extension, you can do:</p>
<pre><code>from glob import glob

files = glob(join(destdir, '*.txt'))
</code></pre>
</div>
<span class="comment-copy"><code>f</code> is still just the filename because you define it that way:  <code>for f in filenames:</code>  Why did you replace the <code>with open(...) as f:</code> line with <code>log = open(...)</code> line?</span>
<span class="comment-copy">Yes, but the <code>log =</code> messed it up. You don't use <code>log</code> anywhere, and when you do <code>for line in f</code>, <code>f</code> is the <i>filename</i>. Your first attempt was closer, but was missing the full path.</span>
<span class="comment-copy">What they are getting at is just replace your <code>log</code> statement with the <code>open</code> statement in the original code and it should work.</span>
<span class="comment-copy">Because you got rid of the <code>os.path.join(...)</code> call again.</span>
<span class="comment-copy">Really, go get one of those Python debuggers and learn how to step through your code and look at variables along the way. It will make things so easy for you!</span>
<span class="comment-copy">Thank you very much !!! It is working now. So, for the record, when working with files, we need to add the full path every single time ?</span>
<span class="comment-copy">You're welcome.  <code>listdir</code> returns only names of content files/directories in the given path. Please check the docs: <a href="https://docs.python.org/3/library/os.html#os.listdir" rel="nofollow noreferrer">docs.python.org/3/library/os.html#os.listdir</a></span>
<span class="comment-copy">I will definitely do that.</span>
