<div class="post-text" itemprop="text">
<p>I have few lines of python below and it runs fine under 3.61 but not 2.7.12. It looks like file=log_file throws the error for some reasons. How do I fix it?</p>
<p>Also, I think my codes are not best practice, what is a better approach?</p>
<p>Thank you for your help everyone.</p>
<pre><code>#!/usr/bin/python
import os
import shutil
import time

file_location = 'C:\\Users\\pdo\\Desktop\\testing'
current_time = time.time()
delete_time = current_time - 86400

tm = time.strftime('%a, %d %b %Y %H:%M:%S')

for files in os.listdir(file_location):
    file_path = os.path.join(file_location, files)
    try:

        # Created before 24 hours
        if os.stat(file_path).st_mtime &lt; delete_time:
            if os.path.isfile(file_path):
                os.unlink(file_path)
                with open(file_location + '\\clean_log.txt', 'a') as log_file:
                    print(str(tm) + " - Deleted File: " + file_path, file=log_file)
            elif os.path.isdir(file_path):
                shutil.rmtree(file_path)
                with open(file_location + '\\clean_log.txt', 'a') as log_file:
                    print(str(tm) + " - Deleted Folder: " + file_path, file=log_file)

        # Created within 24 hours
        elif os.stat(file_path).st_mtime &gt;= delete_time:
            if os.path.isfile(file_path):
                with open(file_location + '\\clean_log.txt', 'a') as log_file:
                    print(str(tm) + " - Created within 24 hours: " + file_path, file=log_file)
            elif os.path.isdir(file_path):
                with open(file_location + '\\clean_log.txt', 'a') as log_file:
                    print(str(tm) + " - Created within 24 hours: " + file_path, file=log_file)

    # Error handling
    except Exception as e:
        with open(file_location + '\\clean_log.txt', 'a') as log_file:
            print(str(tm) + " - Error: " + e.strerror + ": " + file_path, file=log_file)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Python3 is significantly different from Python2. <a href="https://docs.python.org/3/whatsnew/3.0.html" rel="nofollow noreferrer">Changelist for Python3</a></p>
<p>To use "file=" (which was introduced to print() in Py3), add</p>
<pre><code>from __future__ import print_function 
</code></pre>
</div>
<span class="comment-copy">Note that this line needs to go at the top of the file, before all other <code>import</code>s.</span>
<span class="comment-copy">Yes, the line need to go at the top. It works now. Thank you.</span>
