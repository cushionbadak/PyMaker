<div class="post-text" itemprop="text">
<p>I have a pickled file in a path that contains non-ascii characters:</p>
<p><code>D:/s채mple_d체rectory/31.0mm_e_e1.oes</code></p>
<p>As you can see, this is on a Windows machine. When I try to unpickle it, I get an encoding error:</p>
<pre><code>filename = 'D:/s채mple_d체rectory/31.0mm_e_e1.oes'
with open(filename, 'rb') as file_in:
    loaded = pickle.load(file_in)
</code></pre>
<p>results in:</p>
<pre><code>UnicodeDecodeError                        Traceback (most recent call last)
&lt;ipython-input-10-ff988755db3a&gt; in &lt;module&gt;()
      1 with open(filename, 'rb') as file_in:
----&gt; 2     pickle.load(file_in)

UnicodeDecodeError: 'ascii' codec can't decode byte 0xca in position 616: ordinal not in range(128)
</code></pre>
<p>Oddly enough, this is not a problem when I try to open <code>numpy</code> array (.npy) in the same location, even when <code>numpy</code> actually also uses pickle, so there clearly must be a way how to do it.  </p>
</div>
<div class="post-text" itemprop="text">
<p>The problem is not the path at all, its an issue of the pickled file.</p>
<p>Maybe you pickled with one version of python an tried to unpickle with another?</p>
<p>Try setting the encoding of the pickled object (Only works if you are using python3) like this:</p>
<pre><code>with open(filename, 'rb') as file_in:
    d = pickle.load(file_in, encoding='latin1') 
</code></pre>
<p>Maybe try another encoding!</p>
<p>EDIT:</p>
<p>If you are on python 2.7, try:</p>
<pre><code>with open(filename, 'rb') as file_in:
    u = pickle._Unpickler(file_in)
    u.encoding = 'latin1'
    p = u.load()
</code></pre>
</div>
<span class="comment-copy">Are you sure the filename is the problem and not the contents of the pickled file? Can you try with a trivial (string-free) file at the same path?</span>
<span class="comment-copy">Oh, string-free file also works. This seems really like a problem with my file. Thank you very much for your tip!</span>
<span class="comment-copy">No worries. I'm not familiar with pickling but the <a href="https://docs.python.org/3/library/pickle.html#pickle.load" rel="nofollow noreferrer"><code>encoding</code> kwarg of <code>pickle.load</code></a> seems relevant.</span>
