<div class="post-text" itemprop="text">
<p>I am new to python. Here my target is to put data into a file in zip. Following is the code I have written, in which I am write data to a unzipped_file, then writing unzipped_file in zipped_file.zip and then removing unzipped file.</p>
<pre><code>import os
import zipfile

##Some code above.............
for some_data in big_data:
    with open('unzipped_file', 'a+') as unzipped_f:
        unzipped_f.write(some_data)

##Some code in between...........

with zipfile.ZipFile('zipped_file.zip', 'w') as zipped_f:
    zipped_f.write("unzipped_file")

os.remove("unzipped_file")
</code></pre>
<p>Instead of creating an intermediate unzipped_file. Can I directly write my data in zipped_file in one step.</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/zipfile.html#zipfile.ZipFile.writestr" rel="nofollow"><code>zipfile.writestr(file_name, bytes)</code></a> writes  raw data represented by <code>bytes</code> into an archive.  <code>file_name</code> is the name of a file the archive will contain. </p>
<pre><code>with zipfile.ZipFile('zipped_file.zip', 'w') as zipped_f:
    zipped_f.writestr("file_name", some_data)
</code></pre>
<p><strong>EDIT:</strong> the only thing you can do to write multiple pieces of data to some file in an archive is to write all of it at once:</p>
<pre><code>with zipfile.ZipFile('zipped_file.zip', 'w') as zipped_f:
    zipped_f.writestr("file_name", ''.join(x for x in big_data))
</code></pre>
<p>The method above will work only if <code>big_data</code> contains strings. Otherwise you could try <code>pickle.dumps(big_data)</code> or <code>pickle.dumps(list(big_data))</code>.</p>
<p>Note that then a copy of <code>big_data</code> (unless it's a generator) will be constructed in memory and then written to a file. It's impossible to update a file inside an existing <code>ZipFile</code> archive without extracting it and then zipping again.  </p>
</div>
<div class="post-text" itemprop="text">
<p>According to <a href="https://docs.python.org/2/library/zipfile.html#zipfile-objects" rel="nofollow noreferrer">docs</a>, You could use:</p>
<pre><code>with zipfile.ZipFile('someZipFile.zip', 'a') as myzip:
    myzip.write('someFileToBeAdded.txt')
</code></pre>
<p>to add <code>someFileToBeAdded.txt</code> to existing <code>someZipFile.zip</code> file. If <code>someZipFile.zip</code> doesn't exist, it will be created.</p>
</div>
<span class="comment-copy">Sorry for the mis-communication, but here I am trying to append data into one unzipped_file then keeping it in zipped_file. I have edited the code for reference</span>
<span class="comment-copy">@Eudie, please see my edit</span>
<span class="comment-copy">It'is recommended to use <code>with statement</code> with files.</span>
<span class="comment-copy">Thanks for suggestion, although main focus here was on adding file to zip file, rather than 'correct' way to open file.</span>
<span class="comment-copy">Sorry for the mis-communication, but here I am trying to append data into one unzipped_file then keeping it in zipped_file. I have edited the code for reference</span>
