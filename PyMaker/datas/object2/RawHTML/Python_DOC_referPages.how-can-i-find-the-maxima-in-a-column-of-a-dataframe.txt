<div class="post-text" itemprop="text">
<p>I have a dataframe that looks like:</p>
<pre><code>Date                           Location          NO2
2017-11-24 23:00:00             toronto          0.038
2017-11-24 22:00:00             toronto          0.031
2017-11-24 21:00:00             toronto          0.025
2017-11-24 20:00:00             toronto          0.033
2017-11-24 19:00:00             toronto          0.026
2017-11-24 18:00:00             toronto          0.021
2017-11-24 17:00:00             toronto          0.017
</code></pre>
<p>This is recorded for each day for 24 hours for a week. How can I find the highest value in NO2 over this period? </p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <code>np.where()</code>:</p>
<p>Import data:</p>
<pre><code>import sys
if sys.version_info[0] &lt; 3: 
    from StringIO import StringIO
else:
    from io import StringIO

data = StringIO('''Date,Location,NO2
2017-11-24 23:00:00,toronto,0.038
2017-11-24 22:00:00,toronto,0.031
2017-11-24 21:00:00,toronto,0.025
2017-11-24 20:00:00,toronto,0.033
2017-11-24 19:00:00,toronto,0.026
2017-11-24 18:00:00,toronto,0.021
2017-11-24 17:00:00,toronto,0.017''')

df = pd.read_csv(data, sep=',')
</code></pre>
<p>Use <code>np.where()</code> to find the index of the row that matches the max NO2 value:</p>
<pre><code>max_time = df.loc[np.where(df.NO2.values == df.NO2.max())[0], 'Date'].values[0]
max_time = df.loc[np.where(df.NO2.values == df.NO2.max())[0], 'Date'].values[0]
print('Max time:',max_time)
print('Max NO2:',df.NO2.max())
</code></pre>
<pre><code>Max time: 2017-11-24 23:00:00
Max NO2: 0.038
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can create timeseries with DatetimeIndex and for date by maximum <code>NO</code> use <a href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.idxmax.html" rel="nofollow noreferrer"><code>Series.idxmax</code></a>, for maximum value use <code>max</code>:</p>
<pre><code>s = df.set_index('Date')['NO2']

print (s.idxmax())
2017-11-24 23:00:00

print (s.max())
0.038
</code></pre>
<p>If need maximum dates per days:</p>
<pre><code>print (df)
                 Date Location    NO2
0 2017-11-24 23:00:00  toronto  0.038
1 2017-11-24 22:00:00  toronto  0.031
2 2017-11-24 21:00:00  toronto  0.025
3 2017-11-25 20:00:00  toronto  0.033
4 2017-11-25 19:00:00  toronto  0.026
5 2017-11-26 18:00:00  toronto  0.021
6 2017-11-26 17:00:00  toronto  0.017

df1 = df.set_index('Date').groupby(pd.Grouper(freq='24H'))['NO2'].idxmax().reset_index()
print (df1)
        Date                 NO2
0 2017-11-24 2017-11-24 23:00:00
1 2017-11-25 2017-11-25 20:00:00
2 2017-11-26 2017-11-26 18:00:00

df2 = (df.set_index('Date')
         .groupby(pd.Grouper(freq='24H'))['NO2']
         .agg([('maxdate','idxmax'),('maxval','max')]))
print (df2)
                       maxdate  maxval
Date                                  
2017-11-24 2017-11-24 23:00:00   0.038
2017-11-25 2017-11-25 20:00:00   0.033
2017-11-26 2017-11-26 18:00:00   0.021
</code></pre>
<p>Or if need maximum time:</p>
<pre><code>print (df)
                 Date Location    NO2
0 2017-11-24 23:00:00  toronto  0.038
1 2017-11-24 22:00:00  toronto  0.031
2 2017-11-24 21:00:00  toronto  0.025
3 2017-11-25 20:00:00  toronto  0.033
4 2017-11-25 21:00:00  toronto  0.026
5 2017-11-26 21:00:00  toronto  0.021
6 2017-11-26 22:00:00  toronto  0.017

s = (df.groupby(df['Date'].dt.time)['NO2'].mean())
print (s)
Date
20:00:00    0.033
21:00:00    0.024
22:00:00    0.024
23:00:00    0.038
Name: NO2, dtype: float64

print (s.idxmax())
23:00:00

print (s.max())
0.038
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Try this:</p>
<p><code>df.iloc[np.argmax(df.NO2),:]</code></p>
</div>
<span class="comment-copy">Can you please rewrite your title to be more general? "peak time of NO2 level" is not something many people will search for. Perhaps you want to "find the maxima for a rolling period".</span>
<span class="comment-copy">I have 24 hours for 7days and I want to average each hour before finding max.</span>
<span class="comment-copy">@h_musk - What is expected output from sample data? Can you create <a href="http://stackoverflow.com/help/mcve">minimal, complete, and verifiable example</a> with expected output?</span>
<span class="comment-copy">@h_musk - I try edit your data and add some solutions, but not sure if understand what need. Please check it.</span>
