<div class="post-text" itemprop="text">
<p>I am trying to use a Python package called bidi.
In a module in this package (algorithm.py) there are some lines that give me error, although it is part of the package.</p>
<p>Here are the lines:</p>
<pre><code>_LEAST_GREATER_ODD = lambda x: (x + 1) | 1
_LEAST_GREATER_EVEN = lambda x: (x + 2) &amp; ~1

X2_X5_MAPPINGS = {
    'RLE': (_LEAST_GREATER_ODD, 'N'),
    'LRE': (_LEAST_GREATER_EVEN, 'N'),
    'RLO': (_LEAST_GREATER_ODD, 'R'),
    'LRO': (_LEAST_GREATER_EVEN, 'L'),
}

# Added 'B' so X6 won't execute in that case and X8 will run its course
X6_IGNORED = X2_X5_MAPPINGS.keys() + ['BN', 'PDF', 'B']
X9_REMOVED = X2_X5_MAPPINGS.keys() + ['BN', 'PDF']
</code></pre>
<p>If I run the code in Python 3 I get this error message:</p>
<pre><code>Traceback (most recent call last):
  File "&lt;pyshell#9&gt;", line 1, in &lt;module&gt;
    from bidi.algorithm import get_display
  File "C:\Python33\lib\site-packages\python_bidi-0.3.4-py3.3.egg\bidi\algorithm.py", line 41, in &lt;module&gt;
    X6_IGNORED = X2_X5_MAPPINGS.keys() + ['BN', 'PDF', 'B']
TypeError: unsupported operand type(s) for +: 'dict_keys' and 'list'
</code></pre>
<p>Why there is this error although this is part of the bidi package? Does it have anything to do with my Python version? I appreciate any help on this.</p>
</div>
<div class="post-text" itemprop="text">
<p>In Python 3.x, <code>dict.keys</code> returns a <a href="https://stackoverflow.com/questions/8957750/what-are-python-dictionary-view-objects">dictionary view</a>:</p>
<pre><code>&gt;&gt;&gt; a = {1:1, 2:2}
&gt;&gt;&gt; a.keys()
dict_keys([1, 2])
&gt;&gt;&gt; type(a.keys())
&lt;class 'dict_keys'&gt;
&gt;&gt;&gt;
</code></pre>
<p>You can get what you want by putting those views in <a href="http://docs.python.org/2.7/library/functions.html#list" rel="noreferrer"><code>list</code></a>:</p>
<pre><code>X6_IGNORED = list(X2_X5_MAPPINGS.keys()) + ['BN', 'PDF', 'B']
X9_REMOVED = list(X2_X5_MAPPINGS.keys()) + ['BN', 'PDF']
</code></pre>
<p>Actually, you don't even need <code>.keys</code> anymore since iterating over a dictionary yields its keys:</p>
<pre><code>X6_IGNORED = list(X2_X5_MAPPINGS) + ['BN', 'PDF', 'B']
X9_REMOVED = list(X2_X5_MAPPINGS) + ['BN', 'PDF']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Yes, it has something to do with your Python version. In Python 2.x, <code>dict.keys</code> returns a list of a dictionaryâ€™s keys. In Python 3.x, it provides a <a href="http://docs.python.org/3/library/stdtypes.html#dict-views" rel="noreferrer">view object</a> of the keys.</p>
<p>You can call <code>list()</code> on the result to make it a list, <a href="http://docs.python.org/3/library/stdtypes.html#dict" rel="noreferrer">or just call <code>list()</code> on the entire dictionary as a shortcut</a>.</p>
</div>
<div class="post-text" itemprop="text">
<p>In Python 3.x, <code>dict.keys</code> doesn't return a list, but instead a <code>view</code> object, <code>dict_keys</code>.</p>
<p>To achieve what you wanted, you need to convert it to a list:</p>
<pre><code>X6_IGNORED = list(X2_X5_MAPPINGS.keys()) + ['BN', 'PDF', 'B']
</code></pre>
</div>
<span class="comment-copy">in docs it is called <a href="http://docs.python.org/3.3/tutorial/datastructures.html#id3" rel="nofollow noreferrer"><code>dictionary view</code></a></span>
<span class="comment-copy">@alko - True.  I adjusted my post and added a sweet link I found explaining views in detail.</span>
