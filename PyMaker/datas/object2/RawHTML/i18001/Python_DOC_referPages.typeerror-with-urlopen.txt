<div class="post-text" itemprop="text">
<p>I am a bit confused with using Request, urlopen and JSONDecoder().decode().</p>
<p>Currently I have:</p>
<pre><code>hdr = {'User-agent' : 'anything'}  # header, User-agent header describes my web browser
</code></pre>
<p>I am assuming that the server uses this to determine which browsers are acceptable? Not sure</p>
<p>my url is:</p>
<pre><code>url = 'http://wwww.reddit.com/r/aww.json'
</code></pre>
<p>I set a req variable</p>
<pre><code>req = Request(url,hdr)  #request to access the url with header
json = urlopen(req).read()   # read json page
</code></pre>
<p>I tried using urlopen in terminal and I get this error:</p>
<pre><code>TypeError: must be string or buffer, not dict # This has to do with me header?

data = JSONDecoder().decode(json)   # translate json data so I can parse through it with regular python functions?
</code></pre>
<p>I'm not really sure why I get the <code>TypeError</code></p>
</div>
<div class="post-text" itemprop="text">
<p>If you look at the documentation of <a href="http://docs.python.org/3/library/urllib.request.html#urllib.request.Request" rel="nofollow"><code>Request</code></a>, you can see that the constructor signature is actually <code>Request(url, data=None, headers={}, …)</code>. So the second parameter, the one after the URL, is the <em>data</em> you are sending with the request. But if you want to set the headers instead, you will have to specify the <code>headers</code> parameter.</p>
<p>You can do this in two different ways. Either you pass <code>None</code> as the data parameter:</p>
<pre><code>Request(url, None, hdr)
</code></pre>
<p>But, well, this requires you to pass the <code>data</code> parameter explicitely and you have to make sure that you pass the default value to not cause any unwanted effects. So instead, you can tell Python to <em>explicitely</em> pass the <code>header</code> parameter instead, without specifying <code>data</code>:</p>
<pre><code>Request(url, headers=hdr)
</code></pre>
</div>
<span class="comment-copy">hdr is a <code>dict</code> and <code>Request</code> is expecting a string.</span>
<span class="comment-copy">I tried using <code>header=hdr</code> but I get <code>TypeError: __init__() got an unexpected keyword argument 'header'</code> The <code>None</code> method ran without errors. Would you happen to know why?</span>
<span class="comment-copy">@Liondancer Oops, apparently I don’t follow my own advice and don’t read the signature in the documentation well enough :D It should be <code>headers=hdr</code> (plural headers, not header).</span>
<span class="comment-copy">sweet ran like a charm thank you!</span>
<span class="comment-copy">You’re welcome :)</span>
