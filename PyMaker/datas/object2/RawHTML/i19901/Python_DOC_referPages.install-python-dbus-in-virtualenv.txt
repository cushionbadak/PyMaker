<div class="post-text" itemprop="text">
<p>I am running an application in a virtual environment that needs access to DBus (to interact with the Network Manager, mainly).</p>
<p>I tried to install Dbus-Python with easyinstall and pip, but both fail. </p>
<p>When I try to do this:</p>
<pre><code>(myvirtualenv)borrajax@borrajax-computer:~/Documents/Projects/VirtualEnvs/current_env$ bin/pip install dbus-python
</code></pre>
<p>Pip yells at me with:</p>
<pre><code>Downloading/unpacking dbus-python
  Downloading dbus-python-1.1.1.tar.gz (596kB): 596kB downloaded
  Running setup.py egg_info for package dbus-python
    Traceback (most recent call last):
      File "&lt;string&gt;", line 16, in &lt;module&gt;
    IOError: [Errno 2] No such file or directory: '/home/borrajax/Documents/Projects/VirtualEnvs/current_env/build/dbus-python/setup.py'
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "&lt;string&gt;", line 16, in &lt;module&gt;

IOError: [Errno 2] No such file or directory: '/home/borrajax/Documents/Projects/VirtualEnvs/current_env/build/dbus-python/setup.py'

----------------------------------------
Command python setup.py egg_info failed with error code 1 in /home/borrajax/Documents/Projects/VirtualEnvs/current_env/build/dbus-python
Storing complete log in /home/borrajax/.pip/pip.log
</code></pre>
<p>I've had some issues with the python dbus bindings and their "accessibility" from my Python modules in the past, so I don't really know what may be the best way to set Dbus-Python in a virtual environment. Has anyone successfully achieved this? Or does anyone have an idea on how to do this?</p>
<p>Thank you in advance.</p>
</div>
<div class="post-text" itemprop="text">
<p>When <code>pip</code> tries to install a package, it looks for <code>setup.py</code>, which <code>dbus-python</code> doesn't have, so you'll have to <a href="http://dbus.freedesktop.org/releases/dbus-python/" rel="nofollow">download the source</a> and compile it manually. Shouldn't be too hard:</p>
<pre><code>PYTHON=python3.3 ./configure --prefix=/tmp/dbus-python
make
make install
</code></pre>
<p>then you can move the compiled files to your virtualenv.</p>
<hr/>
<p>edit: starting with dbus-python-1.2.2 (released 2016-02-22) dbus-python has a <code>setup.py</code>, so pip should be able to install it</p>
</div>
<div class="post-text" itemprop="text">
<p>My suggestion is to install the system package for the Python DBUS bindings and then create the <em>virtualenv</em> with the <code>--system-site-packages</code> command line option to enable access to the system-wide Python packages (including the <code>dbus</code> package) from the activated <em>virtualenv</em>. For example on Debian/Ubuntu (or a derived distribution):</p>
<pre><code>$ sudo apt-get install python-dbus
$ virtualenv --system-site-packages dbus-venv
</code></pre>
<p>To use the built in Python 3 <a href="https://docs.python.org/3/library/venv.html" rel="nofollow noreferrer"><code>venv</code></a> module instead of <code>virtualenv</code>:</p>
<pre><code>$ sudo apt-get install python-dbus
$ sudo apt-get install python3-venv
$ python3 -m venv --system-site-packages my_venv
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Another workaround is to just manually copy the <code>dbus</code> files/libraries directly to your virtualenv:</p>
<pre><code>cp -r /usr/lib/pythonX.X/{site or dist}-packages/dbus myvirtenv/usr/lib/pythonX.X/site-packages/    
cp -r /usr/lib/pythonX.X/{site or dist}-packages/_dbus_*.so myvirtenv/usr/lib/pythonX.X/site-packages/
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The OP appears to have opened a <a href="https://bugs.freedesktop.org/show_bug.cgi?id=55439" rel="noreferrer">ticket on freedesktop.org</a> for this, which remains open; however there is a <a href="https://bugs.freedesktop.org/attachment.cgi?id=80061" rel="noreferrer">patch attached to that ticket</a> that could be applied to most any version of python-dbus and then repackaged as a new tarball.</p>
</div>
<div class="post-text" itemprop="text">
<p>@TheMeaningfulEngineer thank so much, i have being having a few problem to install dbus through pip and that was what i needed i hope you have a good day wherever you are ;)</p>
<p>to check if there is in local - <code>sudo apt list --installed | grep pakage-name</code></p>
<p><code>sudo apt-get install libdbus-glib-1-dev libdbus-1-dev</code></p>
<p>and after this line i did install <code>dbus</code> and <code>networkmanager</code> without any errors</p>
<p>this is exactly what i did, and before that i checked out all my dbus version and networkmanager after do what  @TheMeaningfulEngineer said is working, if i am doing something wrong in this comment try to explaind me what or why  , and so sorry for my english. </p>
</div>
<div class="post-text" itemprop="text">
<p>Go to your Venv follow this 2 steps :</p>
<pre><code>1)sudo apt-get install libdbus-glib-1-dev libdbus-1-dev

2)pip install dbus-python
</code></pre>
<p>verify with:</p>
<pre><code>3) pip freeze
</code></pre>
<blockquote>
<p>if installed properly you will see:     dbus-python==1.2.8</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>For Python as <strong>dbus-python</strong> is now obsolete, you should be using <strong>pydbus</strong>:</p>
<hr/>
<pre><code>pip install pydbus
</code></pre>
<p>This have worked for me.</p>
</div>
<span class="comment-copy">I like this idea as a lot of systems are going to have dbus-python due to internally used scripts and it can work well with the virtualenvwrapper <code>postmkvirtualenv</code> script.</span>
<span class="comment-copy">While this solution is not exactly what I would characterized as perfectly clean, I like it for simplicity. Upvoting. :-)</span>
<span class="comment-copy">Oh! That wasn't me. I hadn't seen that patch, but thanks for the info :)</span>
<span class="comment-copy">Can confirm it's working correctly for <code>dbus-python==1.2.4</code> in virtualenv. Building it succesfully needs <code>sudo apt-get install libdbus-glib-1-dev libdbus-1-dev</code></span>
<span class="comment-copy">Thanks @TheMeaningfulEngineer, your comment answered this question for me.</span>
<span class="comment-copy">(This post does not seem to provide a <a href="https://stackoverflow.com/help/how-to-answer">quality answer</a> to the question. Please either edit your answer, or just post it as a comment to the question).</span>
