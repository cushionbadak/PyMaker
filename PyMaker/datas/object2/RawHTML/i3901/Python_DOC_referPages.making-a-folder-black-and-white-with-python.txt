<div class="post-text" itemprop="text">
<p>I have a folder of JPEGs. They are all RGB. I want to convert them all to greyscale with scikit-image.</p>
<pre><code>import glob
from skimage.color import rgb2gray
from skimage.io import imread, imsave
from skimage.filters import threshold_otsu
from skimage import img_as_uint
import os
from PIL import Image


list = os.chdir("C:/Users/Images/RGB")
for file in list:
    image1 = Image.open(file)
    image_converted = color.rgb2gray(image1)
    io.imsave("C:/Users/Images/Greyscale", image_converted)
</code></pre>
<p>I get the error message : </p>
<pre><code>    AttributeError: 'JpegImageFile' object has no attribute 'ndim'
</code></pre>
<p>What am I doing wrongly here ? </p>
</div>
<div class="post-text" itemprop="text">
<p>Give this code a try:</p>
<pre><code>from skimage import io, color
import os
import imghdr

source = r'C:\Users\Images\RGB'
destination = r'C:\Users\Images\Greyscale'

image_files = [os.path.join(root, filename) 
                   for root, dirs, files in os.walk(source) 
                   for filename in files 
                   if imghdr.what(os.path.join(root, filename))]

for fn in image_files:
    rgb = io.imread(fn)
    grey = color.rgb2gray(rgb)
    head, tail = os.path.split(fn)
    io.imsave(os.path.join(destination, tail), grey)
</code></pre>
<p>Notice that <code>image_files</code> is a list containing the full path name of all the image files found in <code>source</code> and its subdirectories (recursively). The complete list of image types being detected can be found at the documentation of the <a href="https://docs.python.org/3/library/imghdr.html" rel="nofollow noreferrer">imghdr</a> module.</p>
</div>
<div class="post-text" itemprop="text">
<p>It looks like you are not running the script in the directory the files are located.</p>
<p>Either use the full file path for <code>Image.open(file)</code> or <code>os.chdir</code> into <code>"C:/Users/Images/RGB"</code>.</p>
</div>
<span class="comment-copy"><code>os.chdir()</code> doesn't return you a list of files, it just changes directory. After that, you need <code>list=glob.glob('*.jpg')</code></span>
<span class="comment-copy">When you save the result, you need <code>os.path.join()</code> to join the filename to the directory name.</span>
<span class="comment-copy">Thank you very much, that solved my first issue. I've updated my question. Any idea what might solve this issue ?</span>
