<div class="post-text" itemprop="text">
<p>I'm in the process of learning python and sqlite3 through a book named Practical Programming: 2nd Edition.
Within the book itself, it has conflicting code.</p>
<p>If this is the start of my code:</p>
<pre><code>import sqlite3

con = sqlite3.connect('stackoverflow.db')

cur = conn.cursor()
</code></pre>
<p>To commit, would I use con.commit(), or cur.commit(). Or are there different times to use the different one?</p>
<p>Here are pictures from the book:</p>
<p>This shows con.commit()
<a href="https://i.stack.imgur.com/yzwLm.png" rel="nofollow noreferrer"><img alt="con commit" src="https://i.stack.imgur.com/yzwLm.png"/></a></p>
<p>This shows cur.commit()
<a href="https://i.stack.imgur.com/wdc8k.png" rel="nofollow noreferrer"><img alt="cur.commit()" src="https://i.stack.imgur.com/wdc8k.png"/></a></p>
<p>I checked online at <a href="https://docs.python.org/3/library/sqlite3.html" rel="nofollow noreferrer">https://docs.python.org/3/library/sqlite3.html</a> and shows con.commit()
<a href="https://i.stack.imgur.com/OyLKS.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/OyLKS.png"/></a></p>
<p>Just wanna make sure whether the book has an error of using <code>cur.commit()</code>, or whether there is a special condition to use it.</p>
<p>Thanks in advance</p>
</div>
<div class="post-text" itemprop="text">
<p><code>con.commit()</code> and <code>conn.commit()</code> are the same ... they are created object types ... in both cases they are otherwise named ... important is mainly <code>.commit()</code> and not the naming that the programmer has specified</p>
<p>There are object types that use a different name (con and cur - as you asked) to calling the method. You can also use a different name in your code, for example:</p>
<pre><code>db = sqlite3.connect('/tmp/filename.db')
cursor = db.cursor()
cursor.execute("CREATE TABLE ....
               .... some DB-API 2.0 commands ....
               ")
db.commit()
</code></pre>
<p>Please check again the webpage <a href="https://docs.python.org/3/library/sqlite3.html" rel="nofollow noreferrer">https://docs.python.org/3/library/sqlite3.html</a> . 
You forgot to copy these two lines from the webpage:</p>
<pre><code>import sqlite3
conn = sqlite3.connect('example.db')
</code></pre>
<p>And then continuing the code (just copied it):</p>
<pre><code>c = conn.cursor()

# Create table
c.execute('''CREATE TABLE stocks
             (date text, trans text, symbol text, qty real, price real)''')

# Insert a row of data
c.execute("INSERT INTO stocks VALUES ('2006-01-05','BUY','RHAT',100,35.14)")

# Save (commit) the changes
conn.commit()

# We can also close the connection if we are done with it.
# Just be sure any changes have been committed or they will be lost.
conn.close()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I took unutbu's advice and tried it myself.</p>
<p>Sample code:</p>
<pre><code>import sqlite3

con = sqlite3.connect('db.db')
cur = con.cursor()

data = [('data', 3), ('data2', 69)]

cur.execute('CREATE TABLE Density(Name TEXT, Number INTEGER)')

for i in data:
    cur.execute('INSERT INTO Density VALUES (?, ?)', (i[0], i[1]))

cur.commit()
</code></pre>
<p>PyCharm Run:</p>
<pre><code>Traceback (most recent call last):
  File "/Users/User/Library/Preferences/PyCharmCE2018.1/scratches/scratch_2.py", line 13, in &lt;module&gt;
    cur.commit()
AttributeError: 'sqlite3.Cursor' object has no attribute 'commit'
</code></pre>
<p>Error in textbook. <code>cur.commit()</code> does not exist. </p>
<p>Thanks unutbu and s3n0</p>
</div>
<div class="post-text" itemprop="text">
<p>I think if you're using a specified cursor to commit changes, in your case, it should be cur.connection.commit().
You can always use connect to commit in the end of your code, whether it's named db, or con or conn.
But when your code gets complicated, you'll have different function to do certain operation to the database, if you only use connection commit, when there is a bug, you gonna have a hard time to find which function failed. So you create specific cursor for specific operation, when that failed, the traceback message will show you which specific cursor when wrong.</p>
</div>
<span class="comment-copy">Have you tried the code? What did you discover?</span>
<span class="comment-copy">Best advice. I'm new to programming, so I always feel like I'm going to mess something up if I write the wrong code ':) cur.commit does not work. I'll post a solution with details. Thank you for helping me learn more :)</span>
<span class="comment-copy">I was comparing cur. commit() vs con/conn.commit()</span>
<span class="comment-copy">Sorry, but in your question is not fully code from the education book. In the second image <a href="https://i.stack.imgur.com/wdc8k.png" rel="nofollow noreferrer">i.stack.imgur.com/wdc8k.png</a> is there mistake maybe and you may be right. Cursor commit is a mistake I think... the sqlite3 database object may be commited, not the cursor.</span>
<span class="comment-copy">Look here: <a href="https://docs.python.org/3/library/sqlite3.html#connection-objects" rel="nofollow noreferrer">docs.python.org/3/library/sqlite3.html#connection-objects</a> and <a href="https://docs.python.org/3/library/sqlite3.html#cursor-objects" rel="nofollow noreferrer">docs.python.org/3/library/sqlite3.html#cursor-objects</a> There is no object named as .commit for cursor. But for connection is it there.</span>
