<div class="post-text" itemprop="text">
<p>Hi guys I'm pretty lost with this simple problem. I have a dictionary and a list of dictionaries in python and I want to loop over the list to add each dictionary to the first dictionary but somehow it just adds the last dictionary with the solution I came up with. I'm using <code>Python 3.6.5</code></p>
<p>This is what I've tried:</p>
<pre><code>res = []
dictionary = {"id": 1, "name": "Jhon"}
dictionary_2 = [
  {"surname": "Doe", "email": "jd@example.com"}, 
  {"surname": "Morrison", "email": "jm@example.com"},
  {"surname": "Targetson", "email": "jt@example.com"}
  ]
for info in dictionary_2:
  aux_dict = dictionary
  aux_dict["extra"] = info
  res.append(aux_dict)

print(res)
</code></pre>
<p>What I <strong>expect</strong> is:</p>
<pre><code>[{'id': 1, 'name': 'Jhon', 'extra': {'surname': 'Doe', 'email': 'jd@example.com'}}, 
  {'id': 1, 'name': 'Jhon', 'extra': {'surname': 'Morrison', 'email': 'jm@example.com'}}, 
  {'id': 1, 'name': 'Jhon', 'extra': {'surname': 'Targetson', 'email': 'jt@example.com'}}]
</code></pre>
<p>And this is what I <strong>get</strong></p>
<pre><code>[{'id': 1, 'name': 'Jhon', 'extra': {'surname': 'Targetson', 'email': 'jt@example.com'}}, 
   {'id': 1, 'name': 'Jhon', 'extra': {'surname': 'Targetson', 'email': 'jt@example.com'}}, 
   {'id': 1, 'name': 'Jhon', 'extra': {'surname': 'Targetson', 'email': 'jt@example.com'}}]
</code></pre>
<p>This is probably a duplicate of some other question but I can't manage to find it</p>
</div>
<div class="post-text" itemprop="text">
<p>This is because you keep adding the <em>same</em> <code>aux_dict</code> to <code>res</code>.</p>
<p>What you probably want to do is make a <em>copy</em> of <code>dictionary</code>; just assigning it to <code>aux_dict</code> does <em>not</em> make a copy.</p>
<p>This is how you make a (shallow) copy:</p>
<pre><code>aux_dict = dictionary.copy()
</code></pre>
<p>That would be sufficient in your case.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can achieve this in one line using <a href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions" rel="nofollow noreferrer">list comprehension</a> and <a href="https://docs.python.org/3/library/stdtypes.html#dict" rel="nofollow noreferrer">dict constructor</a>:</p>
<pre><code>dictionary = {"id": 1, "name": "Jhon"}
dictionary_2 = [
    {"surname": "Doe", "email": "jd@example.com"}, 
    {"surname": "Morrison", "email": "jm@example.com"},
    {"surname": "Targetson", "email": "jt@example.com"}
]

# ...

res = [dict(dictionary, extra=item) for item in dictionary_2]

# ...

print(res)
</code></pre>
</div>
<span class="comment-copy"><code>aux_dict = dictionary</code> your are appending the <b>same dictionary</b> every time. Assignment <i>never copies</i>. Use <code>aux_dict = dictionary.copy()</code></span>
<span class="comment-copy">Closely related: <a href="https://stackoverflow.com/questions/240178/list-of-lists-changes-reflected-across-sublists-unexpectedly" title="list of lists changes reflected across sublists unexpectedly">stackoverflow.com/questions/240178/â€¦</a></span>
<span class="comment-copy">Or <code>aux_dict = dict(extra=info, **dictionary)</code></span>
