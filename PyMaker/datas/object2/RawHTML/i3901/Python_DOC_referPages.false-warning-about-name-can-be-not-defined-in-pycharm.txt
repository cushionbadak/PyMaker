<div class="post-text" itemprop="text">
<p>I wrote a python code to give a value to a variable if it is not defined, but nevertheless PyCharm warns me that the variable can be not defined:</p>
<pre><code>if 'TEST' not in globals():
    TEST = "test"

print(TEST)
</code></pre>
<p><code>Name 'TEST' can be not defined</code></p>
<p>Is there an other way to define undefined variables such that PyCharm understand it?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use a nonconditional initializer, e.g. with <a href="https://docs.python.org/3/library/stdtypes.html#dict.get" rel="nofollow noreferrer"><code>get</code></a>, to get rid of the warning:</p>
<pre><code>TEST = globals().get('TEST', 'test')
print(TEST)
</code></pre>
</div>
<span class="comment-copy">Problem is with pycharm.you can ignore the warning</span>
<span class="comment-copy">PyCharm can't really tell that the logic of this ensures that the name must be defined. It only looks at syntax, it can't figured out the implication of the test.</span>
<span class="comment-copy">@Barmar I disagree with this because if I add the statement <code>else:     TEST = globals().get('TEST')</code> I get rid of the warning. I think the problem comes more from the fact that we access to the variable via a string, which I find ugly but apparently there is no way to do otherwise.</span>
<span class="comment-copy">@JeanPaul It has nothing to do with accessing variable through a string. It gets rid of the warning only because you provided an <code>else</code> block. PyCharm can't understand the logic <code>if 'TEST' not in globals()</code> is <code>False</code> then it is already defined</span>
<span class="comment-copy">@JeanPaul Consider this piece of code: <code>x = 1 ; if x == 1: foo = 2 ; print(foo)</code> Here we also get the warning that <code>foo</code> may not be defined even though we hardcoded the condition which defines <code>foo</code> to always be <code>True</code>. Pycharm follows all possible branches according to the syntax, not logically.</span>
<span class="comment-copy">If <code>TEST</code> is in <code>globals()</code> then it's already defined.</span>
<span class="comment-copy">@Barmar Indeed. However using <code>get</code> <i>will</i> get rid of the warning (and the unnecessary <code>if</code>). I changed the wording a bit.</span>
