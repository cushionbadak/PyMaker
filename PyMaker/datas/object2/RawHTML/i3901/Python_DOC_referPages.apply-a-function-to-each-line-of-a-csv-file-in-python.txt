<div class="post-text" itemprop="text">
<p>I have a regular expression that I want to apply to each line of a CSV file.</p>
<p>Here's the function which basically removes all comma's encountered before a single digit number. The <em>function is working perfectly fine</em> for the string.</p>
<pre><code>Input : text = "52A, XYZ Street, ABC District, 2, M, Brown
Function : re.sub('(?&lt;!\s[\dA-Z]),(?!\s+\d,?)', '', text)
Output : '52A XYZ Street ABC District, 2, M, Brown'
</code></pre>
<p>However, I have a CSV file containing hundreds of such lines. For instance</p>
<pre><code>1, 5273249, 1061/72, 150-CF, S/O:XVZ, 1, ABX, 45, 0, Husband, 9213
1, 5272849, 1063/36, 150-AS, S/O:XVZ, 1, ABX, 45, 0, Wife, 9253
1, 5274549, 10626/12, 150-RT, S/O:XVZ, 1, ABX, 45, 0, Son, 9214
</code></pre>
<p>I tried to read it using CSV reader and apply the function but unfortunately, it's not producing any output. What did I do wrong here:</p>
<pre><code>def myFunction(text):
    return re.sub('(?&lt;!\s[\dA-Z]),(?!\s+\d,?)', '', text)

import csv
with open('temp1.csv', 'r') as csvfile:
    spamreader = csv.reader(csvfile, delimiter=',')
    for row in spamreader:
        l = ','.join(row)    
        myFunction(l)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>There's a handy module called <a href="https://docs.python.org/3/library/fileinput.html" rel="nofollow noreferrer"><code>fileinput</code></a> that allows you to easily edit files line by line.</p>
<p>Take a look at:</p>
<pre><code>import re
import fileinput

# For each line
for line in fileinput.input(files='example.csv', inplace=True, backup='.bak'):
    # Replace it with the regex you provided
    print(re.sub('(?&lt;!\s[\dA-Z]),(?!\s+\d,?)', '', line), end='')
</code></pre>
<p>Output: </p>
<pre><code>Before:
1,  5273249, 1061/72, 150-CF, S/O:XVZ, 1, ABX, 45, 0, Husband, 9213
1,  5272849, 1063/36, 150-AS, S/O:XVZ, 1, ABX, 45, 0, Wife, 9253
1,  5274549, 10626/12, 150-RT, S/O:XVZ, 1, ABX, 45, 0, Son, 9214

After:
1,  5273249, 1061/72, 150-CF S/O:XVZ, 1, ABX, 45, 0, Husband, 9213
1,  5272849, 1063/36, 150-AS S/O:XVZ, 1, ABX, 45, 0, Wife, 9253
1,  5274549, 10626/12, 150-RT S/O:XVZ, 1, ABX, 45, 0, Son, 9214
</code></pre>
<p>This also creates a handy <code>example.csv.bak</code> file for you in case you need it!</p>
</div>
<span class="comment-copy">what output do you expect ? nothing is printed or written in a file in this code</span>
<span class="comment-copy">Does <code>myFunction</code> return anything? If so, the first thing you should do is assign it to a variable or else the output would be lost.</span>
<span class="comment-copy">@MatiasCicero Yes, myFunction is returning the correct output as a standalone function. But not when I'm calling it inside the read CSV method. For some reason the output is getting lost.</span>
<span class="comment-copy">@PRMoureu I expect the commas to get removed before the second occurence of 1 right after S/0:XYZ</span>
<span class="comment-copy">@RohitGirdhar It was always returning the value, but if you don't handle it in any way it'd just be lost on the void. The output won't get written on a file by itself.</span>
<span class="comment-copy">Never heard of file input before, but it does the job perfectly. This saved me a lot of time. Appreciate your help!</span>
