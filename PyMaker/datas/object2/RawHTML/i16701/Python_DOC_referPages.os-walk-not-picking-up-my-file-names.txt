<div class="post-text" itemprop="text">
<p>I'm trying to use a python script to edit a large directory of .html files in a loop. I'm having trouble looping through the filenames using os.walk(). This chunk of code just turns the html files into strings that I can work with, but the script does not even enter the loop, as if the files don't exist. Basically it prints <code>point1</code> but never reaches <code>point2</code>. The script ends without an error message. The directory is set up inside the folder called "amazon", and there is one level of 20 subfolders inside of it with 20 html files in each of those.</p>
<p>Oddly the code works perfectly on a neighboring directory that only contains .txt files, but it seems like it's not grabbing my .html files for some reason. Is there something I don't understand about the structure of the <code>for root, dirs, filenames in os.walk()</code> loop? This is my first time using os.walk, and I've looked at a number of other pages on this site to try to make it work.</p>
<pre><code>import os

rootdir = 'C:\filepath\amazon'
print "point1"
for root, dirs, filenames in os.walk(rootdir):
    print "point2"
    for file in filenames:
        with open (os.path.join(root, file), 'r') as myfile:
             g = myfile.read()
        print g
</code></pre>
<p>Any help is much appreciated.</p>
</div>
<div class="post-text" itemprop="text">
<p>The backslash is used as an escape.  Either double them, or use "raw strings" by putting a prefix "r" on it. </p>
<p>Example:</p>
<pre><code>&gt;&gt;&gt; 'C:\filepath\amazon'
'C:\x0cilepath\x07mazon'
&gt;&gt;&gt; r'\x'
'\\x'
&gt;&gt;&gt; '\x'
ValueError: invalid \x escape
</code></pre>
<p>Explanation: <a href="https://stackoverflow.com/questions/4780088/in-python-what-does-preceding-a-string-literal-with-r-mean">In Python, what does preceding a string literal with “r” mean?</a></p>
</div>
<div class="post-text" itemprop="text">
<p>You can avoid having to explicitly handle slashes of any sort by using <code>os.path.join</code>:</p>
<pre><code>rootdir = os.path.join('C:', 'filepath', 'amazon')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Your problem is that you're using backslashes in your path:</p>
<pre><code>&gt;&gt;&gt; rootdir = 'C:\filepath\amazon'
&gt;&gt;&gt; rootdir
'C:\x0cilepath\x07mazon'
&gt;&gt;&gt; print(rootdir)
C:
  ilepathmazon
</code></pre>
<p>Because Python strings use the backslash to escape special characters, in your <code>rootdir</code> the <code>\f</code> represents an ASCII <a href="http://en.wikipedia.org/wiki/Page_break#Form_feed" rel="nofollow">Form Feed</a> character, and the <code>\a</code> represents an ASCII <a href="http://en.wikipedia.org/wiki/Bell_character" rel="nofollow">Bell</a> character.</p>
<p>You can either use a raw string (note the <code>r</code> before the apostrophe) to avoid this:</p>
<pre><code>&gt;&gt;&gt; rootdir = r'C:\filepath\amazon'
&gt;&gt;&gt; rootdir
'C:\\filepath\\amazon'
&gt;&gt;&gt; print(rootdir)
C:\filepath\amazon
</code></pre>
<p>... or just use regular slashes, which <a href="https://docs.python.org/3/library/os.html?highlight=slash#os.altsep" rel="nofollow">work fine</a> on Windows anyway:</p>
<pre><code>&gt;&gt;&gt; rootdir = 'C:/filepath/amazon'
&gt;&gt;&gt; rootdir
'C:/filepath/amazon'
&gt;&gt;&gt; print(rootdir)
C:/filepath/amazon
</code></pre>
<p>As Huu Nguyen points out, it's considered good practice to construct paths using <a href="https://docs.python.org/3/library/os.path.html#os.path.join" rel="nofollow"><code>os.path.join()</code></a> when possible ... that way you avoid the problem altogether:</p>
<pre><code>&gt;&gt;&gt; rootdir = os.path.join('C:', 'filepath', 'amazon')
&gt;&gt;&gt; rootdir
'C:\\filepath\\amazon'  # presumably ... I don't use Windows.
&gt;&gt;&gt; print(rootdir)
C:\filepath\amazon
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I had an issue that sounds similar to this with <code>os.walk</code>. The escape character (<code>\</code>) added to filepaths on Mac due to spaces in the path was causing the problem.</p>
<p>For example, the path:</p>
<p><code>/Volumes/MacHD/My Folder/MyFiles/...</code></p>
<p>when accessed via Terminal is shown as:</p>
<p><code>/Volumes/MacHD/My\ Folder/MyFiles/...</code></p>
<p>The solution was to read the path to a string and then create a new string that removed the escape characters, e.g:</p>
<pre><code># Ask user for directory tree to scan for master files
masterpathraw = raw_input("Specify directory of master files:")
# Clear escape characters from the path
masterpath = masterpathraw.replace('\\', '')
# Provide this path to os.walk
for fullpath, _, filenames in os.walk(masterpath):
    # Do stuff
</code></pre>
</div>
<span class="comment-copy">I would include Huu's note about <code>os.path.join</code>. Interoperability is one of the best things about Python, so we may as well use the stdlib function included to join filenames together! :)</span>
