<div class="post-text" itemprop="text">
<p>I am trying to make a web page using Bottle.py, Mongodb and Python.</p>
<p>I had this tag on top of my python 2.7 code: </p>
<pre><code># #-- coding: latin1 --
</code></pre>
<p>I use the coding for getting bottle requests such as:</p>
<pre><code>CheckboxTr= bottle.request.forms.getlist("CheckboxTr")
tags = bottle.request.forms.get("tags")
</code></pre>
<p>I also have <code>meta charset="•ISO-8859-1"</code> on top of each web page, and everything worked fine. However, when I tried to migrate to python 3.4 I get no error message, but my coding seems to be UTF-8 instead of Latin-1 (accent characters won't print as they should).</p>
<p>I hope you can help me. I am missing something for the migration to work, maybe they updated the coding name or something, but I have been reading python 3.4 coding and can´t find my error. </p>
<p>This is the code:</p>
<pre><code>@bottle.post('/newpost')
def post_newpost():
    title = bottle.request.forms.get("subject")
    post = bottle.request.forms.get("body")
    beneficios = bottle.request.forms.get("beneficios")
    CheckboxTramite= bottle.request.forms.getlist("CheckboxTramite")
    cookie = bottle.request.get_cookie("session")
    username = sessions.get_username(cookie)
    dependencia = sessions.get_dependencia(cookie)

return bottle.template("newpost_template1", dict(subject="", body = "", errors="", tags="", username=username, dependencia=dependencia, beneficios="", CheckboxTramite=[],))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I don't know why the encoding for Bottle's output would change, since it's documented as being <code>utf-8</code> by default. However <a href="http://bottlepy.org/docs/dev/tutorial.html#generating-content" rel="nofollow">the documentation</a> states that you can change it by setting the <code>Response.charset</code> attribute. Have a look at the example under "Changing the Default Encoding".</p>
<p>This has nothing to do with the encoding of your Python source files, as some of the comments to the question are hinting.</p>
</div>
<span class="comment-copy">I'm pretty sure that's the <a href="https://docs.python.org/3/tutorial/interpreter.html#source-code-encoding" rel="nofollow noreferrer">wrong <code>coding</code> syntax</a>. You're missing the stars. It only "worked" in Python 2 because the default encoding was ASCII instead of UTF-8.</span>
<span class="comment-copy">I have tried: # -<i>- coding: latin-1 -</i>-, # -<i>- coding: iso-8859-15 -</i>- , # coding=latin-1</span>
<span class="comment-copy">@HenryKeiter: no, that's fine; it'll match the regular expression used (see <a href="http://legacy.python.org/dev/peps/pep-0263/" rel="nofollow noreferrer">PEP 263</a>). But without source code there is little we can do but speculate here.</span>
<span class="comment-copy">@MartijnPieters Ahh, right you are. Still looks weird.</span>
<span class="comment-copy">@HenryKeiter: No; the regular expression is <code>coding[:=]\s*([-\w.]+)"</code>. So <code>coding</code> followed by a colon or equals sign, followed by optional whitespace and the actual codec name. It has to be a comment and the first or second line, any other characters on that line are sugar coating for whatever editor you want to recognise the comment too.</span>
