<div class="post-text" itemprop="text">
<p>I'm trying define a proxy handler to use http.client behind a proxy company. I know just how to use or define a proxy handler to urllib.:</p>
<pre><code>http_proxy_full_auth_string = "http://"+"%s:%s@%s:%s" % (http_proxy_user,
                        http_proxy_passwd,
                        http_proxy_server,
                        http_proxy_port)
proxy_handler = urllib.request.ProxyHandler({"http": http_proxy_full_auth_string})
opener = urllib.request.build_opener(proxy_handler)
urllib.request.install_opener(opener)
resp = urllib.request.urlopen(uri).read()
</code></pre>
<p>And using http.client...?</p>
<p>P.S: sorry for the low english skills...</p>
</div>
<div class="post-text" itemprop="text">
<p>See the <a href="https://docs.python.org/3/library/http.client.html#http.client.HTTPConnection.set_tunnel" rel="nofollow"><code>httplib</code></a> python 3 documentation</p>
<pre><code>import http.client
conn = http.client.HTTPSConnection("proxy_domain", 8080)
conn.set_tunnel("www.python.org")
conn.request("HEAD","/index.html")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This might be old thread but folks may stumble upon it like I did and dont know how to authenticate.</p>
<pre><code>import http.client
import base64
auth_hash = base64.b64encode(b"username:password").decode("utf-8")

conn = http.client.HTTPSConnection("proxy-ip or hostname", port="proxy-port")
conn.set_tunnel(
  "example.com", 
  headers={"Proxy-Authorization": f"Basic {auth_hash}"})

conn.request("GET", "/")
</code></pre>
<p>This is how you do it with basic authentication.</p>
</div>
<span class="comment-copy">how to set authenticated proxy?</span>
