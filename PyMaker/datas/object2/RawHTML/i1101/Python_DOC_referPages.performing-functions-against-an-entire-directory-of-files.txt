<div class="post-text" itemprop="text">
<p><strong>How do I best run a function (eventually multiple functions) against a directory of files?</strong>  In this specific example, I am trying to run the function against each file individually, so it only needs to run on one file at a time.  Long term I want to have scripts that will check for things more holistically, but for now one at a time suffices.</p>
<p>In my current case, it will be outputs of network devices.  For instance, below takes an output from "show cdp neighbor detail" on a switch and cleans up the output slightly.</p>
<p>The variable "thefile" is used to run against a single file, but I need to run against any different number of files in a directory.  Multiple scripts?  Some kind of os.walk() code in this script?</p>
<pre><code>hostcheck = "hostname"
devicecheck = "Device ID"
ipaddresscheck = "IP address"
platformcheck = "Platform"
interfacecheck = "Interface"
hyphencheck = "---"

thefile = "core-cdp-detail.log"

with open(thefile) as search:
    for line in search:
        line = line.rstrip()  # remove '\n' at end of line
        if hostcheck in line:
            hostentry = line.split("hostname ")[1]
            print("Below CDP information is from " + hostentry)
        elif devicecheck in line:
            print("Remote " + line)
        elif ipaddresscheck in line:
            print("Remote " + line.lstrip())
        elif platformcheck in line:
            print(line.split(",")[0])
        elif interfacecheck in line:
            print("Remote Interface: " + line.split("port):")[1])
        elif hyphencheck in line:
            print(line)
            print("\n")
            print("Local Device ID: " + hostentry)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>import glob

for file in glob.glob('*.log'):
    with open(file) as search:
        ...
</code></pre>
<p>(or whatever files you want to perform this on, you could replace <code>'*.log'</code> by <code>'*.*'</code> or <code>'logs/*.log'</code> etc.)</p>
<p>For more info see the docs on the <a href="https://docs.python.org/3/library/glob.html" rel="nofollow noreferrer"><code>glob</code></a> module.</p>
</div>
<div class="post-text" itemprop="text">
<p>you can traverse directory using <code>os.walk</code></p>
<pre><code>import os

hostcheck = "hostname"
devicecheck = "Device ID"
ipaddresscheck = "IP address"
platformcheck = "Platform"
interfacecheck = "Interface"
hyphencheck = "---"


def check_content(file_path):
    with open(thefile) as search:
        for line in search:
            line = line.rstrip()  # remove '\n' at end of line
            if hostcheck in line:
                hostentry = line.split("hostname ")[1]
                print("Below CDP information is from " + hostentry)
            elif devicecheck in line:
                print("Remote " + line)
            elif ipaddresscheck in line:
                print("Remote " + line.lstrip())
            elif platformcheck in line:
                print(line.split(",")[0])
            elif interfacecheck in line:
                print("Remote Interface: " + line.split("port):")[1])
            elif hyphencheck in line:
                print(line)
                print("\n")


def check_dir_content(dir_path):

    for subdir, dirs, files in os.walk(dir_path):
        for file in files:
            check_content(os.path.join(subdir, file))

if __name__ == '__main__':
    check_dir_content('/Users/gaurang.shah/Documents')
</code></pre>
</div>
<span class="comment-copy">you mean loop on <code>glob.glob("*.log")</code> ?</span>
<span class="comment-copy">I tried this code, and it completes with exit code 0, but the output isn't getting printed.  Under the check_content function it says "with open(thefile)."  I had previously configured thefile as a variable but it's not in the response.  Should it be "file?"  If so, that does not produce output either.  Thoughts?</span>
<span class="comment-copy">@tjp what you need to do is call <code>check_dir_content</code> function and pass the path of the directory in which you have files on which you want to run your code.  I have updated the question, hope that will help/</span>
