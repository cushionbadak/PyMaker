<div class="post-text" itemprop="text">
<p>I am trying to test the function <code>map</code> with the method <code>append</code> and got a wrong output.</p>
<h3>Code</h3>
<pre><code>numbers = [
    [34, 63, 88, 71, 29], 
    [90, 78, 51, 27, 45], 
    [63, 37, 85, 46, 22], 
    [51, 22, 34, 11, 18]
]

numbers_tmp = []

def mean_append(num_list):
    numbers_tmp.append(sum(num_list) / len(num_list))
    return numbers_tmp

print(list(map(mean_append, numbers)))
</code></pre>
<h3>Expected output</h3>
<pre><code>[57.0, 58.2, 50.6, 27.2]
</code></pre>
<h3>Actual output</h3>
<pre><code>[
    [57.0, 58.2, 50.6, 27.2], 
    [57.0, 58.2, 50.6, 27.2], 
    [57.0, 58.2, 50.6, 27.2], 
    [57.0, 58.2, 50.6, 27.2]
]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Built-in <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow noreferrer"><code>map</code></a> works on <strong>each value</strong> in an iterable. So your function should include logic which can be applied to <em>each sublist</em>:</p>
<pre><code>def mean_calculator(num_list):
    return sum(num_list) / len(num_list)

res = list(map(mean_calculator, numbers))

print(res)

[57.0, 58.2, 50.6, 27.2]
</code></pre>
<p>Alternatively, you can use <a href="https://docs.python.org/3/library/statistics.html#statistics.mean" rel="nofollow noreferrer"><code>statistics.mean</code></a> from the standard library:</p>
<pre><code>from statistics import mean

res = list(map(mean, numbers))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><code>map</code> returns one output object for each object in the input sequence. Your input sequence has 4 objects, so the output has 4 objects. They're all same since your function always returns same <code>numbers_tmp</code> <em>object</em>. To fix the problem stop using global variables in <code>map</code>.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>numbers = [[34, 63, 88, 71, 29], [90, 78, 51, 27, 45], [63, 37, 85, 46, 22], [51, 22, 34, 11, 18]]
def mean_append(num_list):
    return sum(num_list) / len(num_list)

print(list(map(mean_append, numbers)))
</code></pre>
</div>
<span class="comment-copy">Why did you make <code>numbers_tmp</code> a global variable, and then ignore its contents in favor of what <code>map</code> returns anyway?</span>
<span class="comment-copy">Do <b>not</b> use side effects in <code>map</code>. Just use a for loop</span>
<span class="comment-copy">And side effects.</span>
<span class="comment-copy">Please consider explaining your code.</span>
