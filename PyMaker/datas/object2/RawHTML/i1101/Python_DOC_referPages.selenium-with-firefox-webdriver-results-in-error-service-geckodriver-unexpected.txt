<div class="post-text" itemprop="text">
<p>I have been wracking my brain over this. I'm getting the error:</p>
<blockquote>
<p>System geckodriver unexpectedly exited. Status code: -11. </p>
</blockquote>
<p>I am using a Linux server that is a shared hosting web server. I have everything set up in a virtual environment.</p>
<ul>
<li>Linux Server - CentOS, Release: 7.4.1708</li>
<li>Selenium version 3.141.0</li>
<li>geckodriver version 0.23.0</li>
<li>Firefox 60.3.0</li>
<li>Python 3.6.2 and cannot use a newer version</li>
</ul>
<p>Python, Selenium and Geckodriver reside on a virtual environment on a Linux web server. Firefox resides outside of the virtual environment</p>
<pre><code>export PATH=$PATH:/path/to/geckodriver
</code></pre>
<p>to my terminal to have geckodriver be used in the <code>PATH</code> environment variable.</p>
<p>Below is my code:</p>
<pre><code>#!/home/DIRECTORY/DIRECTORY/DIRECTORY/venv/bin/python

# -*- coding: UTF-8 -*-
import cgitb
import cgi
from selenium import webdriver
from selenium.webdriver import FirefoxOptions

cgitb.enable()
print ("Content-Type: text/html; charset=utf-8\n\n")
path = r'/home/DIRECTORY/DIRECTORY/DIRECTORY/venv/bin/geckodriver'
binary = FirefoxBinary(r'/usr/lib64/firefox')

opts = FirefoxOptions()
opts.add_argument("--headless")

browser = webdriver.Firefox(firefox_options=opts, firefox_binary=binary, executable_path=path)
rowser.get("http://google.com/")
print ("Headless Firefox Initialized")
browser.quit()
</code></pre>
<p>Here is my traceback error:</p>
<pre><code>Traceback (most recent call last):
File "selen.py", line 20, in &lt;module&gt;
browser = webdriver.Firefox(firefox_options=opts, executable_path=path)
File "/home/DIRECTORY/DIRECTORY/DIRECTORY/venv/lib/python3.6/site-packages/selenium/webdriver/firefox/webdriver.py", line 164, in __init__
self.service.start()
File "/home/DIRECTORY/DIRECTORY/DIRECTORY/venv/lib/python3.6/site-packages/selenium/webdriver/common/service.py", line 98, in start
self.assert_process_still_running()
File "/home/DIRECTORY/DIRECTORY/DIRECTORY/venv/lib/python3.6/site-packages/selenium/webdriver/common/service.py", line 111, in assert_process_still_running
% (self.path, return_code)
selenium.common.exceptions.WebDriverException: Message: Service /home/DIRECTORY/DIRECTORY/DIRECTORY/venv/bin/geckodriver unexpectedly exited. Status code was: -11
</code></pre>
<p>Why am I getting this error and how do I fix it?</p>
</div>
<div class="post-text" itemprop="text">
<p>This is at least a partial answer to your question.</p>
<ul>
<li>Status code <code>-11</code> means that <code>subprocess</code> experiences a segmentation fault. Read more about it at <a href="https://stackoverflow.com/questions/18731791/determining-if-a-python-subprocess-segmentation-faults">Determining if a python subprocess segmentation faults</a></li>
</ul>
<hr/>
<p>In the past, there were some problems with certain versions of Selenium not working well together with certain versions of Firefox and/or geckodriver. Find out your versions, update them to the most recent versions if possible and look for existing bug reports for your versions.</p>
<p>The following versions work well together on my Ubuntu 18.04 LTS Bionic Beaver system:</p>
<ul>
<li><p>Check Python version</p>
<pre><code>$ python3 --version
Python 3.6.7
</code></pre></li>
<li><p>Check Selenium version</p>
<pre><code>$ python3 -c "import selenium; print(selenium.__version__)"
3.141.0
</code></pre></li>
<li><p>Check Firefox version</p>
<pre><code>$ firefox --version
Mozilla Firefox 64.0
</code></pre></li>
<li><p>Check geckodriver version</p>
<pre><code>$ geckodriver --version
geckodriver 0.23.0 ( 2018-10-04)

The source code of this program is available from
testing/geckodriver in https://hg.mozilla.org/mozilla-central.

This program is subject to the terms of the Mozilla Public License 2.0.
You can obtain a copy of the license at https://mozilla.org/MPL/2.0/.
</code></pre></li>
</ul>
<hr/>
<p>If you have to browse to a special path to make those commands work and those commands don't work directly in your terminal or virtual environment, you might need to set one of the following keyword arguments in your call to <a href="https://seleniumhq.github.io/selenium/docs/api/py/webdriver_firefox/selenium.webdriver.firefox.webdriver.html" rel="nofollow noreferrer"><code>webdriver.Firefox</code></a>:</p>
<blockquote>
<ul>
<li><code>firefox_binary</code> – Instance of FirefoxBinary or full path to the Firefox binary. If undefined, the system default Firefox installation will be used.</li>
<li><code>executable_path</code> – Full path to override which geckodriver binary to use for Firefox 47.0.1 and greater, which defaults to picking up the binary from the system path.</li>
</ul>
</blockquote>
<hr/>
<p>Run nothing fancy as a test, but a minimal example of Selenium with Firefox in headless mode only, for example <code>minimal_selenium_test.py</code>:</p>
<pre><code>import selenium.webdriver

options = selenium.webdriver.FirefoxOptions()
options.add_argument("--headless")

driver = selenium.webdriver.Firefox(firefox_options=options)
driver.get('https://www.python.org/')
print(driver.title)
driver.close()
</code></pre>
<p>This should work on your local laptop as well as on a virtual server as well as inside a Docker container and should print:</p>
<pre><code>$ python3 minimal_selenium_test.py 
Welcome to Python.org
</code></pre>
</div>
<span class="comment-copy">-11 means a segmentation fault in the child process, if that helps.</span>
<span class="comment-copy">@Jayjayyy: It appears in the <a href="https://docs.python.org/3/library/subprocess.html#using-the-subprocess-module" rel="nofollow noreferrer"><code>subprocess</code> documentation</a>.  (True <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/exit.html" rel="nofollow noreferrer">exit status values</a> are non-negative, so you know they’re special somehow.)</span>
<span class="comment-copy">@Jayjayyy: <code>subprocess</code> <b>represents</b> the termination of a child because of a signal (rather than an <code>exit</code>, which is the only other choice) with a negative number that indicates the signal (and can’t be confused with an exit code).  (Segmentation faults happen during execution, not before it, although one could theoretically happen after <code>fork</code> and before <code>exec</code>.)</span>
<span class="comment-copy">Thanks guys! How do I fix the segmentation fault for geckodriver.exe?  I tried running 'geckodriver --version' through a terminal for the server yesterday, and it came back with the same error: segmentation fault. The permissions for the driver is set to 755.</span>
<span class="comment-copy">Please run <code>file /home/DIRECTORY/DIRECTORY/DIRECTORY/venv/bin/geckodriver</code> and post the output.</span>
