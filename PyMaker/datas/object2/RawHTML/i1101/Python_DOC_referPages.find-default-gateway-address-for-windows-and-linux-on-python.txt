<div class="post-text" itemprop="text">
<p>I want to save my default gateway in a variable for future using, like printing it, or send a ping to it....
I want the code will work on Windows and Linux, so I worte this code:</p>
<pre><code>import os
if os.name == "Linux":
    dgw = os.system('ip r | grep default | awk {"print $3"}')
    print dgw
if os.name == "Windows":
    dgw = os.system('ifconfig | findstr /i "Gateway"')
    print dgw
</code></pre>
<p>But the dgw variable is not saving my default gateway...</p>
<p>python 2.7</p>
</div>
<div class="post-text" itemprop="text">
<p>It is because os.system does not return the stdout.
you should use a sub process.</p>
<pre><code>#For Linux
import subprocess
p = subprocess.Popen(["ip r"], stdout=subprocess.PIPE, shell=True)
out = p.stdout.read()
print out
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Firstly, <code>os.name</code> for Windows is <code>'nt'</code>, and Linux it is <code>'posix'</code>.</p>
<p>This is also highlighted in the <a href="https://docs.python.org/3/library/os.html#os.name" rel="nofollow noreferrer">documentation</a>:</p>
<blockquote>
<p>The name of the operating system dependent module imported. The following names have currently been registered: 'posix', 'nt', 'java'.</p>
</blockquote>
<p>If you want to target more specific platforms, using <a href="https://docs.python.org/3/library/sys.html#sys.platform" rel="nofollow noreferrer"><code>sys.platform</code></a> is the better option. </p>
<p>Secondly, using the <a href="https://pypi.org/project/netifaces/" rel="nofollow noreferrer"><code>netifaces</code></a> module works well for Windows and Linux:</p>
<pre><code>import netifaces
gateways = netifaces.gateways()
default_gateway = gateways['default'][netifaces.AF_INET][0]
print(default_gateway)
</code></pre>
<p>Which you can can install with <code>pip install netifaces</code>. The benefit of this approach is that you don't need to differentiate approaches between Windows and Linux. </p>
</div>
<span class="comment-copy">Possible duplicate of <a href="https://stackoverflow.com/questions/2761829/python-get-default-gateway-for-a-local-interface-ip-address-in-linux">Python: get default gateway for a local interface/ip address in linux</a></span>
<span class="comment-copy">I think you mean <code>ipconfig</code> instead of <code>ifconfig</code>.</span>
<span class="comment-copy">As you said- it works only for Linux.</span>
<span class="comment-copy">@Eitan Altschuler no worries. If this answer helped you, please mark it as correct.</span>
