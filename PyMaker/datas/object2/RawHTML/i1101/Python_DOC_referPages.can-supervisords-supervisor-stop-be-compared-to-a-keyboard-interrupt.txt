<div class="post-text" itemprop="text">
<p>I have a python script and the script is run in background as a supervisor job.</p>
<p>If I were to give the command:</p>
<p><code>$ sudo supervisorctl stop myscript</code></p>
<p>What's going on behind the scenes?</p>
<p>If I had not handled the exception, will this be considered a graceful shutdown?</p>
</div>
<div class="post-text" itemprop="text">
<p>While your question is not fully complete-</p>
<p>at its most basic, <em>not exactly</em>. If you mean how Python handles the <code>Exception</code>, it really depends on how you are calling the command and handling any codes or errors from it. All python Exceptions should inherit from <a href="https://docs.python.org/3/library/exceptions.html#exception-hierarchy" rel="nofollow noreferrer">BaseException</a>, but you shouldn't catch that normally and instead catch <code>Exception</code> or some form of <code>subprocess.SubprocessError</code> (which inherits from Exception).</p>
<p>However, if you mean how <code>supervisorctl</code> handles this internally, it probably has similar logic to what you are expecting: sending an exit signal for the process to handle. As you seem most familiar with Python, the <a href="https://docs.python.org/3/library/signal.html" rel="nofollow noreferrer">signal library</a> may be insightful for you.</p>
</div>
<span class="comment-copy">Thanks for the answer @ti7. I have handled exception in my script and have mentioned to print the output to a file, if at all I hit one. My assumption was that if i stop the supervisor job, it's more of an interruption, right? Contradicting my expectation, the script gracefully exited, and no file was created.</span>
<span class="comment-copy">It is being "interrupted", but in a way that alerts the program "it's time to exit". I suspect that it may simply be sending <a href="https://en.wikipedia.org/wiki/Signal_(IPC)#SIGTERM" rel="nofollow noreferrer"><code>SIGTERM</code></a> (instruct the program to exit), while you are thinking it would send <a href="https://en.wikipedia.org/wiki/Signal_(IPC)#SIGKILL" rel="nofollow noreferrer"><code>SIGKILL</code></a> (immediately end/remove the resources)</span>
<span class="comment-copy">is there by anyway, I could handle the exits due to sigterm?</span>
