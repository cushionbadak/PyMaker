<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/34009980/return-a-download-and-rendered-page-in-one-flask-response">Return a download and rendered page in one Flask response</a>
<span class="question-originals-answer-count">
                    1 answer
                </span>
</li>
<li>
<a dir="ltr" href="/questions/20646822/how-to-serve-static-files-in-flask">How to serve static files in Flask</a>
<span class="question-originals-answer-count">
                    13 answers
                </span>
</li>
<li>
<a dir="ltr" href="/questions/13081532/return-json-response-from-flask-view">Return JSON response from Flask view</a>
<span class="question-originals-answer-count">
                    10 answers
                </span>
</li>
</ul>
</div>
<p>I am trying to test this code with postman but I get: <code>TypeError: Object of type 'File' is not JSON serializable</code>.</p>
<pre><code>from flask import Flask, request, jsonify
from flask_sqlalchemy import SQLAlchemy
from flask_marshmallow import Marshmallow
import os
app = Flask(__name__)
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = True
basedir = os.path.abspath(os.path.dirname(__file__))
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///' + os.path.join(basedir, 'upload.sqlite')
db = SQLAlchemy(app)
ma = Marshmallow(app)
class File(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    filename = db.Column(db.String(80), unique=True)
    version = db.Column(db.Integer, unique=True)
    def __init__(self, filename, version):
        self.filename = filename
        self.version = version
class FileSchema(ma.Schema):
    class Meta:
        # Fields to expose
        fields = ('filename', 'version')
file_schema = FileSchema()
files_schema = FileSchema(many=True)
# endpoint to create new file
@app.route("/upload", methods=["POST"])
def add_file():
    filename = request.json['filename']
    version = request.json['version']
    new_file = File(filename, version)
    db.session.add(new_file)
    db.session.commit()
    return jsonify(new_file)
if __name__ == '__main__':
    app.run(debug=True)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>A file can be downloaded as attachment and not as json. </p>
<pre><code>from flask import send_file

@app.route('/download')
def downloadFile ():
    return send_file(path, as_attachment=True)
</code></pre>
</div>
