<div class="post-text" itemprop="text">
<p>How does <code>ctypes.cdll.LoadLibrary()</code> call work with <code>None</code> passed in as an argument? When I try the code below, it seems that the <code>math</code> library gets loaded automatically:</p>
<pre><code>&gt;&gt;&gt; import ctypes
&gt;&gt;&gt; lib = ctypes.cdll.LoadLibrary(None)
&gt;&gt;&gt; lib.sin
&lt;_FuncPtr object at 0x7f36dd65f430&gt;
&gt;&gt;&gt; lib.exp
&lt;_FuncPtr object at 0x7f36dd65f4f8&gt;
&gt;&gt;&gt; 
</code></pre>
<p>How does the <code>math</code> library get loaded without being explicitly specified? Do all shared libraries in the standard library get loaded? There is something happening behind the scenes that I don't understand.</p>
</div>
<div class="post-text" itemprop="text">
<p><strong>Note</strong>: You encountered this on <em>Nix</em> (on <em>Win</em> it isn't reproducible).</p>
<p>Take a look at <a href="https://stackoverflow.com/questions/82831/how-to-check-whether-a-file-exists/44661513#44661513">[SO]: How to check whether a file exists without exceptions? (@CristiFati's answer)</a>.<br/> There, in the last part (the <strong>Notes</strong> section) of <strong>item <em>#4</em></strong>, I explained this exact scenario, quoting the following passage from <a href="http://man7.org/linux/man-pages/man3/dlopen.3.html" rel="nofollow noreferrer">[man7]: DLOPEN(3)</a>:</p>
<blockquote>
<p>If <em>filename</em> is NULL, then the returned handle is for the main
  program.  When given to <strong>dlsym</strong>(), this handle causes a search for a
  symbol in the main program, followed by all shared objects loaded at
  program startup, and then all shared objects loaded by <strong>dlopen</strong>() with
  the flag <strong>RTLD_GLOBAL</strong>.</p>
</blockquote>
<p>which is used when loading libraries, according to <a href="https://docs.python.org/3/library/ctypes.html#loading-shared-libraries" rel="nofollow noreferrer">[Python 3]: Loading shared libraries</a>:</p>
<blockquote>
<p>All these classes can be instantiated by calling them with at least one argument, the pathname of the shared library. If you have an existing handle to an already loaded shared library, it can be passed as the <code>handle</code> named parameter, otherwise the underlying platforms <code>dlopen</code> or <code>LoadLibrary</code> function is used to load the library into the process, and to get a handle to it.</p>
</blockquote>
</div>
