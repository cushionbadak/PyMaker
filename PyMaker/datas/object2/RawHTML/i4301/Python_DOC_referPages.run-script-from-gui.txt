<div class="post-text" itemprop="text">
<p>I wrote a script (test.py) for Data Analysis. Now I'm doing a GUI in PyQt.
What I want is when I press a button 'Run', the script test.py will run and show the results (plots).</p>
<p>I tried <code>subprocess.call('test1.py')</code> and <code>subprocess.Popen('test1.py')</code> but it only opens the script and don't run it.
I also tried <code>os.system</code>, doesn't work either.</p>
<p>The script below is not complete (there are more buttons and functions associated but is not relevant and aren't connect to the problem described).</p>
<p>I'm using Python 3.6 on Spyder and PyQt5.</p>
<p>Is there any other function or module that can do what I want? </p>
<pre><code>class Window(QMainWindow):

    def __init__(self):
        super(Window, self).__init__()
        self.setGeometry(50, 50, 500, 300)
        self.setWindowTitle("TEMP FILE")

        self.home()

    def home (self):
        btn_run = QPushButton("Run", self)
        btn_run.clicked.connect(self.execute)

        self.show()

    def execute(self):
        subprocess.Popen('test1.py', shell=True)
        subprocess.call(["python", "test1.py"])

if not QtWidgets.QApplication.instance():
    app = QtWidgets.QApplication(sys.argv)
else:
    app = QtWidgets.QApplication.instance()

GUI = Window()
app.exec_()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>What you need to do is create a text label, then pipe stdout / stderr to <a href="https://docs.python.org/3/library/subprocess.html#subprocess.PIPE" rel="nofollow noreferrer"><code>subprocess.PIPE</code></a>:</p>
<pre><code>p = subprocess.Popen(
    "python test1.py",
    shell=True,
    stdout=subprocess.PIPE,
    stderr=subprocess.PIPE
)
</code></pre>
<p>Then call <a href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen.communicate" rel="nofollow noreferrer"><code>subprocess.Popen.communicate()</code></a>:</p>
<pre><code>stdout, stderr = p.communicate()
# Display stdout (and possibly stderr) in a text label
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can import test1.py and call functions from within it whenever you wish</p>
<p>Use this <a href="https://stackoverflow.com/questions/7974849/how-can-i-make-one-python-file-run-another">How can I make one python file run another?</a></p>
</div>
<div class="post-text" itemprop="text">
<p>QProcess class is used to start external programs and to communicate with them.</p>
<p>Try it: </p>
<pre><code>import sys
import subprocess

from PyQt5 import Qt
from PyQt5.QtWidgets import QMainWindow, QApplication, QPushButton
from PyQt5.QtCore import QProcess

class Window(QMainWindow):
    def __init__(self):
        super(Window, self).__init__()
        self.setGeometry(50, 50, 500, 300)
        self.setWindowTitle("TEMP FILE")
        self.home()

    def home (self):
        btn_run = QPushButton("Run", self)
        #btn_run.clicked.connect(self.execute)                                   # ---
        filepath = "python test1.py"                                             # +++
        btn_run.clicked.connect(lambda checked, arg=filepath: self.execute(arg)) # +++

        self.show()

    def execute(self, filepath):                                         # +++
        #subprocess.Popen('test1.py', shell=True)
        #subprocess.call(["python", "test1.py"])

        # It works
        #subprocess.run("python test1.py")

        QProcess.startDetached(filepath)                                 # +++



if not QApplication.instance():
    app = QApplication(sys.argv)
else:
    app = QApplication.instance()

GUI = Window()
app.exec_()
</code></pre>
<p><a href="https://i.stack.imgur.com/n8NlE.jpg" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/n8NlE.jpg"/></a></p>
</div>
<span class="comment-copy">Do you mean you want to capture and display the program's output?</span>
<span class="comment-copy">Correct, display the program's output.</span>
<span class="comment-copy">In future, I want that with GUI, I can choose the programs that I want to run. Is that also possible?</span>
<span class="comment-copy">Sure, but we aren't just gonna write that code for you. Take a look at the <a href="http://pyqt.sourceforge.net/Docs/PyQt5/" rel="nofollow noreferrer">PyQt5 reference guide</a>.</span>
<span class="comment-copy">Of course. For now I just tried several ways of doing this and I couldn't understand why it was not working. I'm checking that Guide. Thanks.</span>
<span class="comment-copy">Still not working, probably I have some software issue, because if I paste the code directly in the GUI script it will run perfectly.</span>
<span class="comment-copy">Tried that too, but only works once. When I click a second time on button, the script won't run.</span>
<span class="comment-copy">I suggest you add to your question the things you tried and the problems you had with each</span>
<span class="comment-copy">Still not working, probably I have some software issue, because if I paste the code directly in the GUI script it will run perfectly.</span>
