<div class="post-text" itemprop="text">
<p>if we want to construct a list from a set, we can do </p>
<pre><code>[k for k in set]
</code></pre>
<p>This is O(n) operation, meanwhile:</p>
<pre><code>dict.keys()
</code></pre>
<p>is O(1) 
according to <a href="https://www.ics.uci.edu/~pattis/ICS-33/lectures/complexitypython.txt" rel="nofollow noreferrer">https://www.ics.uci.edu/~pattis/ICS-33/lectures/complexitypython.txt</a></p>
<p>Thus, as far as I know, dict is using set as its keys underlying data structure, is <code>list(set)</code> O(1)? And how is this implemented?</p>
<pre><code>a = set(range(n))
s = list(a) # is this operation O(1)?
</code></pre>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<p>Thus, as far as I know, dict is using set as its keys underlying data structure.</p>
</blockquote>
<p>Hmm, no not really.  The opposite way around is a closer analogy: in the implementation, <code>set</code> is like a <code>dict</code> with all null values.  The <code>dict</code> came first in Python, and <code>set</code> did not appear until Python 2.2 (July 2000) - see <a href="https://www.python.org/dev/peps/pep-0218/" rel="nofollow noreferrer">PEP 218</a>.</p>
<p>Also worth mentioning that <code>dict.keys()</code> is O(1) since Python 3.  In Python 2 it's O(n) and you should use <code>dict.viewkeys()</code> for the keys "view" (set-like interface).</p>
<blockquote>
<p>is <code>list(set)</code> O(1)? </p>
</blockquote>
<p>No, it's O(n) - just the same as the list comprehension.</p>
<blockquote>
<p>And how is this implemented?</p>
</blockquote>
<p>Sets support <a href="https://docs.python.org/3/c-api/iter.html" rel="nofollow noreferrer">the iterator protocol</a>.</p>
</div>
<span class="comment-copy">What do you mean by <code>list(set)</code>? Note that <code>dict.keys()</code> returns a view, which is neither a list nor a set.</span>
<span class="comment-copy">@RyÔ∏Å that's in python3, python2 still returns a list.</span>
<span class="comment-copy">Your document is about Python 3. The complexity of <code>dict.keys()</code> is O(n) in Python 2.</span>
