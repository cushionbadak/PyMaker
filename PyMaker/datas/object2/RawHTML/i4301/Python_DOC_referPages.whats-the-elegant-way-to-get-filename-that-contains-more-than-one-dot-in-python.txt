<div class="post-text" itemprop="text">
<p>I need to process linux file with multiple parts in the name like:</p>
<p>abc.def.gh.bz2</p>
<p>bz2 is the real extension, I need to get abc.def.gh</p>
<p>Can anyone tell me an elegant way to do this in python?</p>
<p>Thank you very much.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>os.path.splitext</code>:</p>
<pre><code>import os.path
os.path.splitext("abc.def.gh.bz2") # -&gt; ("abc.def.gh", ".bz2")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/os.path.html#os.path.splitext" rel="nofollow noreferrer"><code>os.path.splitext</code></a> does just what you want. It returns a tuple with the filename and the extension. Use <code>[0]</code> to get just the filename.</p>
<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; os.path.splitext('abc.def.gh.bz2')[0]
'abc.def.gh'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This one uses <a href="http://python-reference.readthedocs.io/en/latest/docs/str/rsplit.html" rel="nofollow noreferrer"><code>rsplit()</code></a>:</p>
<pre><code>s = "abc.def.gh.bz2"
print(s.rsplit('.', 1)[0])
# abc.def.gh
</code></pre>
</div>
<div class="post-text" itemprop="text">
<ul>
<li><code>.rfind()</code> to find the last dot.</li>
</ul>
<p>e.g <code>"abc.def.gh.bz2".rfind(".")</code> would find the index of the last dot</p>
<p>Any dot below that index would not often* be indicator of filetype. So you could then do e.g <code>filename = "abc.def.gh.bz2"[:"abc.def.gh.bz2".rfind(".")]</code> which should slice away the extension, making filename to be a string of <code>abc.def.gh</code></p>
<p><strong>*Though, keep in mind that in some cases e.g <em>tar.gz</em> or <em>gh.bz2</em> should perhaps be counted as filename extensions. So keep in mind that <em><code>what is a filename</code></em> is a rather fleetly subject</strong></p>
<p><em>Using <code>import os.path.splitext</code> is no guarantee at all to getting the "filename". and all it will do is slice the <strong>.</strong> extension from the string passed to it</em></p>
</div>
<div class="post-text" itemprop="text">
<p>All you need is the <code>split</code> function. </p>
<pre><code>a = "abc.def.gh.bz2"
print a.split(".")
</code></pre>
<p>So the full solution you need is </p>
<pre><code>a = "abc.def.gh.bz2"
parts = a.split(".")
result = ""
for i in range(len(parts)-1):
  result += parts[i]

print result
</code></pre>
</div>
<span class="comment-copy">this is the right way to do it for sure</span>
<span class="comment-copy">yes it is, I didn't test out all the replies, this is the one I used and it is working, thanks to every reply</span>
<span class="comment-copy">I didn't test out all the replies, this is the one I used and it is working, thanks to every reply</span>
<span class="comment-copy">this returns a list not the desired output</span>
<span class="comment-copy">downvoters, please explain yourselves.  This is a working solution.</span>
