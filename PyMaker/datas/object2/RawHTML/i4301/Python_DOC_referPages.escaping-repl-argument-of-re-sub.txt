<div class="post-text" itemprop="text">
<p>I would like to make sure the <code>repl</code> argument of <code>re.sub</code> is escape, so that any special sequences like <code>\1</code> are not interpreted:</p>
<pre><code>&gt;&gt;&gt; repl = r'\1'
&gt;&gt;&gt; re.sub('(X)', repl, 'X')
'X'
&gt;&gt;&gt; re.sub('(X)', desired_escape_function(repl), 'X')
'\\1'
</code></pre>
<p>Is there a function that can do this? I know that <a href="https://docs.python.org/3/library/re.html#re.escape" rel="nofollow noreferrer"><code>re.escape</code></a> exists, should this be used?</p>
</div>
<div class="post-text" itemprop="text">
<p>Do not use <code>re.escape</code> for this purpose. <code>re.escape</code> is meant to be used in the <code>pattern</code> argument, not the <code>repl</code> argument.</p>
<p>Instead, follow <a href="https://docs.python.org/3/library/re.html#re.escape" rel="nofollow noreferrer">the advice of Python's documentation</a>, and just replace all backslashes with two backslashes manually:</p>
<pre><code>&gt;&gt;&gt; repl = r'\1'
&gt;&gt;&gt; re.sub('(X)', repl.replace('\\', '\\\\'), 'X')
'\\1'
</code></pre>
</div>
<span class="comment-copy">Why the downvote?</span>
<span class="comment-copy">Ok, not quite a dupe, but people really can think it is a dupe. If I find a good close reason, I will close.</span>
<span class="comment-copy">@WiktorStribi≈ºew Dupes should get close votes, not downvotes.</span>
<span class="comment-copy">I can't find an exact duplicate, so upvoted.</span>
