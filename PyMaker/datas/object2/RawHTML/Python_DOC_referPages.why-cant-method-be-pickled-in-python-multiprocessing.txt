<div class="post-text" itemprop="text">
<p>I'm new with all the multiprocessing stuff and my current program doesnt work. I read the last hours about the problem and I tried a lot, the method in or out of the class and within a different class and it didnt work.</p>
<pre><code>import multiprocessing as mp

class A:
    @staticmethod
    def multi():
        a = [1,2,3]
        b = 4
        prepared = list()
        for x in a:
            prepared.append((x, b))
        pool = mp.Pool(mp.cpu_count()-1)
        result = pool.starmap(method, prepared)
        pool.close()
        pool.join()
        print(result)


def method(a, x):
    return (a-x, a+x)


if __name__ == "__main__":
    a = A()
    a.multi()
</code></pre>
<p>This is just an example how my class/method structure looks like (and this one does work, even though I changed nothing in the multiprocessing part). </p>
<p>This is the exception I get:</p>
<pre><code>AttributeError: Can't pickle local object 'FeatureExtracter.&lt;locals&gt;.feature_extracter_fwd'
</code></pre>
<p>It would be nice if someone knows the solution or at least why the method cant be pickled.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>import multiprocessing as mp

class A:
    @staticmethod
    def multi():
        b = 4
        return [(x, b) for x in [1,2,3]]

def method(a,x): return (a-x, a+x)

if __name__ == "__main__":
    with mp.Pool(mp.cpu_count() - 1) as p:
        result = p.starmap(method, A().multi())
    print(result)
</code></pre>
</div>
<span class="comment-copy">you start your pool before the pool knows about the method ... create the pool under the if <b>name</b> == '<b>main</b>'</span>
<span class="comment-copy">show us the example code that gives you the error.</span>
<span class="comment-copy">Thanks for your answer, but due to the class stucture in my project its not possible to put the multiprocessing part out of that. Is there maybe another way?</span>
<span class="comment-copy">your code works for me with no issues with python3.7</span>
<span class="comment-copy">yes I know, I just gave an example of the class structure and hoped maybe someone knows what could have caused that problem</span>
<span class="comment-copy">if you have developed some code and experience an issue with it then create sample of the code which gives the error. dont expect people to guess the issue out of the thin air. share with us the sample so we can reproduce the error at our end. what is the point of sharing the code which does not give the issue?</span>
<span class="comment-copy">I have told you in my top comment below your question what gives you the error.</span>
