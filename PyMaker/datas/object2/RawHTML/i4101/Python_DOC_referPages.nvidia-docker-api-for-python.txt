<div class="post-text" itemprop="text">
<p>I am currently running a lot of similar Docker containers which are created and run by a Python script via the official API. Since Docker natively doesn't support GPU mapping, I tested Nvidia-Docker, which fulfills my requirements, but I'm not sure how to integrate it seamlessly in my script.</p>
<p>I tried to find the proper API calls for Nvidia-Docker using Google and the docs, but I didn't manage to find anything useful. </p>
<p>My current code looks something like this: </p>
<pre><code># assemble a new container using the params obtained earlier
container_id = client.create_container(img_id, command=commands, stdin_open=True, tty=True, volumes=[folder], host_config=client.create_host_config(binds=[mountpoint,]),detach=False) 
# run it 
client.start(container_id)
</code></pre>
<p>The documentation for the API can be found <a href="https://docker-py.readthedocs.io/en/stable/" rel="nofollow noreferrer">here.</a></p>
<p>From <a href="https://github.com/NVIDIA/nvidia-docker/wiki/Advanced-topics#default-runtime" rel="nofollow noreferrer">Nvidia-Dockers Github</a> page: </p>
<blockquote>
<p>The default runtime used by the DockerÂ® Engine is
  runc, our runtime can become the default one by configuring the docker
  daemon with --default-runtime=nvidia. Doing so will remove the need to
  add the --runtime=nvidia argument to docker run. It is also the only
  way to have GPU access during docker build.</p>
</blockquote>
<p>Basically, I want to add the --runtime=nvidia-docker argument to my create_container call, but there is no support for that as it seems.</p>
<p>But since I need to switch between runtimes multiple times during the script execution (mixing Nvidia-Docker and native Docker containers) the quick and dirty way would be to run a bash command using <a href="https://docs.python.org/3/library/subprocess.html" rel="nofollow noreferrer">subprocess</a> but I feel like there has to be a better way.  </p>
<p>TL;DR: I am looking for a way to run Nvidia-Docker containers from a Python script.</p>
</div>
<div class="post-text" itemprop="text">
<p><code>run()</code> and <code>create()</code> methods have <code>runtime</code> parameter according to <a href="https://docker-py.readthedocs.io/en/stable/containers.html" rel="nofollow noreferrer">https://docker-py.readthedocs.io/en/stable/containers.html</a> </p>
<p>Which has sense because <code>docker</code> cli tool is pretty simple and every command translate in a call to the docker engine service REST API</p>
</div>
<span class="comment-copy">I must have overlooked that, thank you very much!</span>
