<div class="post-text" itemprop="text">
<p>Hi I'm new to Python and I just started learning how to implement array based list in Python. I made my list iterable with an iterator. I raised an error to stop iteration when the index is greater than length of list. However, when I'm writing my unit test I got this error, but I clearly raised StopIteration in my list iterator?</p>
<pre><code>Traceback (most recent call last):
  File "C:\Users\User\Desktop\task1unitTest.py", line 110, in testIter
    self.assertRaises(StopIteration, next(it1))
  File "C:\Users\User\Desktop\ListIterator.py", line 10, in __next__
   raise StopIteration
StopIteration
</code></pre>
<p>This is my list iterator:</p>
<pre><code>class ListIterator:
    def __init__(self,array):
        self.current=array
        self.index=0

    def __iter__(self):
        return self
    def __next__(self):
        if self.current[self.index]==None:
            raise StopIteration
        else:
            item_required=self.current[self.index]
            self.index+=1
            return item_required
</code></pre>
<p>Any help will be appreciated!</p>
<p>EDIT:
Okay this is how I tested it:</p>
<pre><code>def testIter(self):
    a_list=List()
    a_list.append(1)
    a_list.append(2)
    a_list.append(3)
    it1=iter(a_list)
    self.assertEqual(next(it1),1)
    self.assertEqual(next(it1),2)
    self.assertEqual(next(it1),3)
    #self.assertRaises(StopIteration, next(it1))
</code></pre>
<p>The error occurs at <code>self.assertRaises</code></p>
</div>
<div class="post-text" itemprop="text">
<p>This isn't the correct usage of <a href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertRaises" rel="nofollow noreferrer"><code>unittest.assertRaises</code></a>.</p>
<pre><code>self.assertRaises(StopIteration, next(it1))
</code></pre>
<p>Try this:</p>
<pre><code>with self.assertRaises(StopIteration):
    next(it1)
</code></pre>
<p>Or this:</p>
<pre><code>self.assertRaises(StopIteration, next, it1)
</code></pre>
</div>
<span class="comment-copy">An initial glance at this suggests that you stop iterating if your list contains <code>None</code>, which isn't...exactly desirable in my mind.  Could you show us how you're testing it?  That is, what list do you feed it initially and what your expectation is?</span>
<span class="comment-copy">His <a href="https://stackoverflow.com/q/50162089/1126841">previous question</a> implies he is initializing the array with something like <code>self.array = [None] * 50</code>, and that only non-<code>None</code> values are stored.</span>
<span class="comment-copy">Alright thanks for the help.Will accept your answer when Ithe system allows me</span>
<span class="comment-copy">The reason why it fails is that <code>next(it1)</code> gets evaluated <i>before</i> <code>assertRaises</code> gets called</span>
