<div class="post-text" itemprop="text">
<p>Which python libraries can be used to get detailed file attributes on a MacOSX file system?  I have a hunch that it uses the <code>os</code> module, but I've been unable to gain access to these attributes through python.  </p>
<p>The most important attribute I want to access would be file 'kind'.  Note that I'm not talking about the extension, but rather the 4th column from the screenshot below (taken from <a href="https://superuser.com/questions/263311/on-os-x-how-do-you-change-a-files-kind">this SuperUser question</a>).  For example, when I loop through these files in this directory, how can I get "Plain text document" as the kind for license.txt? My application is a file-handling script that should discern directories from keynote/pages/numbers package files.</p>
<p>A note on duplication:</p>
<p>Also note that I have seen this <a href="https://stackoverflow.com/questions/1974724/is-there-a-python-equivalent-of-the-unix-file-utility">particular SO question</a>, which is in respect to general *nix file systems.  My question is a subset of this question for MacOS file systems which may have some idiosyncrasies not discussed in that question.  If a user can supply an example of <em>HOW</em> <code>python-magic</code> can be used to get the file kind, then this will provide a more useful solution than the aforementioned article.</p>
<p><a href="https://i.stack.imgur.com/fDlDU.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/fDlDU.png"/></a></p>
</div>
<div class="post-text" itemprop="text">
<p>You can get the last modified date and the file size in one go from os.stat().</p>
<p>File kind is more complicated, as there are at least two different ways to get a human readable description from the OS. For this, the library you want is pyobjc, which will allow you to a) query NSWorkspace and LaunchServices for UTI related data, or b) create NSURLs for individual files and query them for their resource type. I believe b) is closer to what Finder does.</p>
<p>Here's an example illustrating both of these methods:</p>
<pre><code>from AppKit import NSWorkspace
from LaunchServices import UTTypeCopyDescription

from Cocoa import NSURL, NSURLLocalizedTypeDescriptionKey

from datetime import datetime
import os

for f in os.listdir("."):
    uti = NSWorkspace.sharedWorkspace().typeOfFile_error_(f, None)[0]
    desc = UTTypeCopyDescription(uti)

    url = NSURL.fileURLWithPath_(f)
    urlType = url.getResourceValue_forKey_error_(None, NSURLLocalizedTypeDescriptionKey, None)[1]

    sr = os.stat(f)
    size = sr.st_size
    date = datetime.fromtimestamp(sr.st_mtime).strftime('%Y-%m-%d %H:%M:%S')

    print("%-20s size=%s modified=%s uti=%s desc=%s url=%s" % (f, size, date, uti, desc, urlType))
</code></pre>
</div>
<span class="comment-copy">Does this help? <a href="https://stackoverflow.com/questions/1974724/is-there-a-python-equivalent-of-the-unix-file-utility" title="is there a python equivalent of the unix file utility">stackoverflow.com/questions/1974724/â€¦</a></span>
<span class="comment-copy">If you just want to distinguish between plain files and directories, see <a href="https://docs.python.org/3/library/os.path.html#os.path.isfile" rel="nofollow noreferrer"><code>os.path.isfile</code></a> and <code>os.path.isdir</code>. Also see <a href="https://docs.python.org/3/library/os.path.html#os.path.isfile" rel="nofollow noreferrer">Path.is_dir</a>.</span>
<span class="comment-copy">@PM2Ring I'm not sure how to use that SO article that you sent me for my specific purpose -- that will take some time to figure out.  <code>os.path.isfile</code> and <code>os.path.isdir</code> don't work because the package files I'm using are incorrectly seen as directories, and I want to handle these types of files and NOT actual directories, so I have to rely on file kind instead.</span>
<span class="comment-copy">Sorry, I'm not that familiar with MacOSX. <code>file</code> is a standard *nix command, you can read about it <a href="https://linux.die.net/man/1/file" rel="nofollow noreferrer">here</a>. I assume Mac has <code>file</code>, although Mac does some "special" things with the way it handles files.</span>
<span class="comment-copy">Also see <a href="https://stackoverflow.com/a/1974737/1110636">stackoverflow.com/a/1974737/1110636</a></span>
