<div class="post-text" itemprop="text">
<p>I have a problem with replace variable inside method which i have to test, namely:</p>
<pre><code>def find_files(path):
    path_dir = os.listdir(path)
    ...
</code></pre>
<p>and for needs of test I have to replace <code>path_dir</code> from real result of <code>os.listdir</code> to some test list i.e. <code>['whatever1.txt', 'whatever2.txt', 'whatever3.txt']</code></p>
<p>How to do it?
BR, Damian</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch" rel="nofollow noreferrer"><code>mock.patch</code></a> to set return value for your variable.
For example</p>
<pre><code>with patch('os.listdir') as mocked_listdir:
    mocked_listdir().return_value = ['.', '..']
    find_files(path)
</code></pre>
<p>or alternatively you can set a <a href="https://docs.python.org/3/library/unittest.mock-examples.html#side-effect-functions-and-iterables" rel="nofollow noreferrer">side effect</a></p>
<pre><code>with patch('os.listdir') as mocked_listdir:
    mocked_listdir().side_effect = some_other_function
    find_files(path)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You should try mock os.listdir to return the mock test data.</p>
</div>
<span class="comment-copy">You may want to look into the <code>patch</code> functionality of <a href="https://pypi.org/project/pytest-mock/" rel="nofollow noreferrer"><code>pytest-mock</code></a>.</span>
<span class="comment-copy">Thanks, I had a kind of eclipse of the mind because i know it, and I used it. Doesn't matter. Thanks for your help :)</span>
<span class="comment-copy">Ok I can mock <code>os.listdir</code> but i need to variable <code>path_dir</code>.</span>
<span class="comment-copy">If you mock it with the result you need to return, it will return that when it is called so it will be automatically stored to path_dir</span>
