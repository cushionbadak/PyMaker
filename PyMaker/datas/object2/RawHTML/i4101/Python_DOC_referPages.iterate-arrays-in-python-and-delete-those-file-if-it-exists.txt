<div class="post-text" itemprop="text">
<p>I have a Python script as shown below which reads four files and give the difference between those files for each <code>clientId</code> and it works fine:</p>
<pre><code>#!/usr/bin/python
import os, sys, re, json

with open(sys.argv[1]) as old_primary, open(sys.argv[2]) as new_primary, \
    open(sys.argv[3]) as old_second, open(sys.argv[4]) as new_second:

    prepare_json = lambda f: json.loads(re.sub(r'([0-9]+)=', '"\\1":', f.read())) 
    old_pr_data = prepare_json(old_primary)
    new_pr_data = prepare_json(new_primary)
    old_snd_data = prepare_json(old_second)
    new_snd_data = prepare_json(new_second)

    k = sys.argv[5]
    print('ClientId ' + k)
    print('pri=({})'.format(' '.join(map(str, set(old_pr_data[k]) ^ set(new_pr_data[k])))))
    print('snd=({})\n'.format(' '.join(map(str, set(old_snd_data[k]) ^ set(new_snd_data[k])))))
</code></pre>
<p>Here is how I am running it:</p>
<pre><code>python test.py old_primary_mapping.txt new_primary_mapping.txt old_secondary_mapping.txt new_secondary_mapping.txt 1
</code></pre>
<p><strong>Problem Statement</strong></p>
<p>This is the output I get for <code>clientId 1</code> after running above script:</p>
<pre><code>ClientId 1
pri=(192 196 176)
snd=(1482 1485 1491 1494)
</code></pre>
<p>Now I want to iterate <code>pri</code> and <code>snd</code> array and make a file string like as shown below and delete those files if it exists. I am having <code>*</code> regex in the file.</p>
<p>For pri, delete these files:</p>
<pre><code>/primary/proc_192_for_*.log
/primary/proc_196_for_*.log
/primary/proc_176_for_*.log
</code></pre>
<p>For snd, delete these files:</p>
<pre><code>/secondary/proc_1482_for_*.log
/secondary/proc_1485_for_*.log
/secondary/proc_1491_for_*.log
/secondary/proc_1494_for_*.log
</code></pre>
<p>I just need to make sure that I am deleting these files only what is there in <code>pri</code> and <code>snd</code> array. Is this possible to do in python?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can delete those files by using <a href="https://docs.python.org/3/library/glob.html" rel="nofollow noreferrer"><code>glob</code></a> like (untested):</p>
<pre><code>for dir_name, numbers in (('primary', pri), ('secondary', snd)):
    for number in numbers:
        for filename in glob.glob('/{}/proc_{}_for_*.log'.format(dir_name, number)):
             os.unlink(filename)
</code></pre>
</div>
<span class="comment-copy">When I run this, I get an error like this <code>NameError: name 'pri' is not defined</code></span>
<span class="comment-copy"><code>pri</code> was just my attempt to match your variable name....</span>
<span class="comment-copy">yeah I just realized it. So how can I do this in my case? I dont have proper array since I am just printing it out.</span>
<span class="comment-copy">try <code>map(int ...</code> instead of <code>(map(str ...</code> or just don't call the <code>join</code> to get a list.</span>
<span class="comment-copy">after making that change, I get this error <code>print('pri=({})'.format(' '.join(map(int, set(old_pr_data[k]) ^ set(new_pr_data[k]))))) TypeError: sequence item 0: expected string, int found</code></span>
