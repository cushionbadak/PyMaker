<div class="post-text" itemprop="text">
<p>What is the meaning of the following line in Python? </p>
<pre><code>x = defaultdict(lambda: defaultdict(dict))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Let's resolve it from the inside out. Firstly, <a href="https://docs.python.org/3/library/stdtypes.html#mapping-types-dict" rel="noreferrer"><code>dict</code></a> is the dictionary type. Like other types, calling it creates an instance (also known as object) of that type. A <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="noreferrer"><code>defaultdict</code></a> is a type that takes a callable parameter: something that, when called, produces an item to put in the dictionary. This happens when an entry is accessed that was not present, instead of producing a <a href="https://docs.python.org/3/library/exceptions.html#KeyError" rel="noreferrer"><code>KeyError</code></a> like an ordinary <code>dict</code>. Thirdly, <a href="https://docs.python.org/3/reference/expressions.html#lambda" rel="noreferrer"><code>lambda</code></a> is a way to create unnamed functions based on a single expression, so these two are similar (the second holds a function that knows its own name, the first doesn't):</p>
<pre><code>y = lambda: defaultdict(dict)

def y():
    return defaultdict(dict)
</code></pre>
<p>And finally the whole thing is wrapped in another <code>defaultdict</code>. So the result is that <code>x</code> is a <code>defaultdict</code> that produces <code>defaultdict</code>s that produce <code>dict</code> instances. At the third level there aren't defaults anymore. </p>
</div>
<span class="comment-copy"><a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="nofollow noreferrer"><code>collections.defaultdict</code></a></span>
<span class="comment-copy">thanks for the detailed explanation!</span>
<span class="comment-copy">great explanation , I was struggling to explain it to the OP. thanks.</span>
