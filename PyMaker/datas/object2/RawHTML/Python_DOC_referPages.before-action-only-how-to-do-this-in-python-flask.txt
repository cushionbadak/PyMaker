<div class="post-text" itemprop="text">
<p>I need to change a ruby code to python and I am also new to this. Can someone tell me is there any function like before_action ... only: in python flask?
This is the function I want to change:</p>
<pre><code>class IftttController &lt; ActionController::Base
  before_action :return_errors_unless_valid_service_key
  before_action :return_errors_unless_valid_action_fields, only: :create_new_thing

def return_errors_unless_valid_service_key
      unless request.headers["HTTP_IFTTT_SERVICE_KEY"] == IFTTT_SERVICE_KEY
        return render plain: { errors: [ { message: "401" } ] }.to_json, status: 401
      end
    end

    def return_errors_unless_valid_action_fields
      if params[:actionFields] &amp;&amp; params[:actionFields][:invalid] == "true"
        return render plain: { errors: [ { status: "SKIP", message: "400" } ] }.to_json, status: 400
      end
    end
end
</code></pre>
<p>And as I read on internet, @app.before_request is equal to it, but I don't how to use it for specific action (before_action :return_errors_unless_valid_action_fields, only: :create_new_thing) like on the ruby on rails, Here is my code, I don't know whether it correct or not:</p>
<pre><code>@ifttt.before_request
def return_errors_unless_valid_action_fields():
    if request.args.get("actionFields") and request.args["actionFields"]["invalid"] == True:
        return render_template_string(jsonify(errors = [{status= "SKIP", message = "400"}]), 400
</code></pre>
<p>Can anyone help me? Thank you very much.</p>
</div>
<div class="post-text" itemprop="text">
<p>Flask applications have a few hooks that let the user run a function before or after a request:</p>
<pre><code>app = Flask(...)

@app.before_request
def i_have_been_called():
    print('I have been called')
</code></pre>
<p>This should output "I have been called" to the console before every request.</p>
<p>Other hooks built into Flask include <code>before_request</code>, <code>before_first_request</code>, <code>after_request</code>, <code>teardown_appcontext</code> and more.</p>
<p>As for the <code>only:</code> params, there are no such things in Flask. You must simply write your function to check for such a case:</p>
<pre><code>@app.before_request
def i_prefer_post():
    from flask import request
    if request.method == 'POST':
        print('I prefer POST')
</code></pre>
</div>
<span class="comment-copy">To get an answer to your question here, you probably need to give a lot more details. Maybe "before_action" a ruby-ism that I don't know anything about, but as a Python programmer, your question gives me absolutely nothing to go on. Can you give some of your code (both the relevant part of the Ruby code you're trying to convert and the Python code you've written so far?</span>
<span class="comment-copy">I put some code now</span>
