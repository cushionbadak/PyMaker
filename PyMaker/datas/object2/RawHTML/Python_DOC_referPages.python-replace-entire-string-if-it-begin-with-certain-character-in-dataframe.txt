<div class="post-text" itemprop="text">
<p>I have data that contains 'None ...' string at random places. I am trying to replace a cell in the dataframe with empty character only when it begin with 'None ..'. Here is what I tried, but I get errors like 'KeyError'.</p>
<pre><code>df = pd.DataFrame({'id': [1,2,3,4,5], 
                   'sub': ['None ... ','None ... test','math None ...','probability','chemistry']})


df.loc[df['sub'].str.replace('None ...','',1), 'sub'] = '' # getting key error
</code></pre>
<p>output looking for: (I need to replace entire value in cell if 'None ...' is starting string. Notice, 3rd row shouldn't be replaced because 'None ...' is not starting character)</p>
<pre><code>id  sub
1   
2   
3   math None ...
4   probability
5   chemistry
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use the below to identify the cells to replace and then assign them an empty value:</p>
<pre><code>df.loc[df['sub'].str.startswith("None"), 'sub'] = ""

df.head()

   id            sub
0   1
1   2
2   3  math None ...
3   4    probability
4   5      chemistry
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can simpy replace 'None ...' and by using a regular expression you can apply this replacement only for strings that start with None.</p>
<pre><code>df['sub'] = df['sub'].str.replace(r'^None \.\.\.*','',1)
</code></pre>
<p>the output looks like this:</p>
<pre><code>   id            sub
0   1               
1   2           test
2   3  math None ...
3   4    probability
4   5      chemistry
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>df['sub'] = df['sub'].str.replace('[\w\s]*?(None \.\.\.)[\s\w]*?','',1)
</code></pre>
<p>Out:</p>
<pre><code>    sub
id  
1   
2   test
3   
4   probability
5   chemistry
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Look at <code>startswith</code>, then after we find the row need to be replaced we using <code>replace</code> </p>
<pre><code>df['sub']=df['sub'].mask(df['sub'].str.startswith('None ... '),'')
df
Out[338]: 
   id            sub
0   1               
1   2               
2   3  math None ...
3   4    probability
4   5      chemistry
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>First, you are using the sub strings as index, that is why you received key error.</p>
<p>Second you can do this by:
df['sub']=df['sub'].apply(lambda x: '' if x.find('None')==0 else x)</p>
</div>
<span class="comment-copy">See my edit. Fixed for removing the entire string</span>
