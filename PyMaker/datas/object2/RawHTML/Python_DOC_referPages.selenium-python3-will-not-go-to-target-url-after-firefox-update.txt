<div class="post-text" itemprop="text">
<p>Below is the beginning of my Python scraper code that successfully pulled data all of this past year. My FireFox browser (version 65.0.2 64-bit) recently updated and now the code will not go directly to the target url. Instead, it uploads FireFox and remains on a blank browser page until the code times out. I have recently uploaded my Selenium package (version 3.141.0) and have tried changing the set_preferences in the code, but I have been unable to fix this issue. Would anyone know how to go about fixing this problem? Thanks in advance!</p>
<pre><code>import sys
import pandas as pd
import os
import time
from datetime import datetime
from selenium import webdriver
from selenium.webdriver.firefox.firefox_profile import FirefoxProfile
from sqlalchemy import create_engine


button_text_to_url_type = {
    'dashboard': 8,
    'standard': 0,
     'advanced': 1,
     'batted_ball': 2,
     'win_probability': 3,
     'pitch_type': 4,
     'pitch_values': 7,
     'plate_discipline': 5,
     'value': 6,
     'h_movement': 18,
     'v_movement': 19

}

download_dir = os.getcwd()
profile = FirefoxProfile("C:/Users/nhwal_000/AppData/Roaming/Mozilla/Firefox/Profiles/zd6yzhfi.FG_Scrape")
profile.set_preference("browser.helperApps.neverAsk.saveToDisk", 'text/csv')
profile.set_preference("browser.download.manager.showWhenStarting", False)
profile.set_preference("browser.download.dir", download_dir)
profile.set_preference("browser.download.folderList", 2)
driver = webdriver.Firefox(firefox_profile=profile)


today = datetime.today()
for button_text, url_type in button_text_to_url_type.items():

    default_filepath = os.path.join(download_dir, 'Fangraphs Leaderboard.csv')
    desired_filepath = os.path.join(download_dir,
                                    '{}_{}_{}_LeaderboardPIT_{}.csv'.format(datetime.today().year, today.month, today.day,
                                                                         button_text))

    driver.get(
        "https://www.fangraphs.com/leaders.aspx?pos=all&amp;stats=pit&amp;lg=all&amp;qual=0&amp;type={}&amp;season=2018&amp;month=0&amp;season1=2018&amp;ind=0&amp;team=&amp;rost=&amp;age=&amp;filter=&amp;players=".format(
            url_type)) 
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I don't see a reference to geckodriver, so you may just need to install the latest version of <a href="https://github.com/mozilla/geckodriver/releases" rel="nofollow noreferrer">GeckoDriver</a></p>
<p>Once you've installed it, you can add its path to webdriver like:</p>
<p><code>driver = webdriver.Firefox(executable_path=r'your\path\to\geckodriver.exe', firefox_profile=profile)</code></p>
<p>And it should run.</p>
</div>
<span class="comment-copy">Can you add what version of FireFox you are using and what version of Selenium you are using?</span>
<span class="comment-copy">Yup! Just edited the question. Version 65.0.2 (64-bit) for Firefox, version 3.141.0 for Selenium. Thanks!</span>
<span class="comment-copy">Thanks, Stemado! Just to clarify, do I use your <code>webrdriver.firefox</code> in place of my <code>driver=webdriver.firefox</code> or add it to the current code? Also, I had GeckoDriver installed when this code ran successfully a few weeks ago. Are you saying I need to update the version or just specify the path in the code? Thanks again!</span>
<span class="comment-copy">Ah, sorry. Yes specify the path to the geckodriver was the emphasis I was trying to add.</span>
<span class="comment-copy">Thanks for the clarification. I adjusted the code, and now the error is saying I need to put geckodriver in my PATH. I am not sure why this is occuring. Geckodriver was already in my environment variables as evident by the fact that I've run selenium with geckodriver successfully before. Could this be a PyCharm issue?</span>
<span class="comment-copy">Figured it out, it was actually because the geckodriver was not the latest version. Thanks for leading me in the right direction!</span>
<span class="comment-copy">Great! Glad you got it figured it out!!</span>
