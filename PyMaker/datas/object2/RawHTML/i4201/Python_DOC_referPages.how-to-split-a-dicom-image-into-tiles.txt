<div class="post-text" itemprop="text">
<p>I'm trying to use the image_slicer function to split a DICOM image into tiles, but it's not recognizing the DICOM. </p>
<p>I've already read the DICOM and converted them into np arrays:</p>
<p>dcm_files[0]</p>
<pre><code>array([[-1024, -1024, -1024, ..., -1024, -1024, -1024],
       [-1024, -1024, -1024, ..., -1024, -1024, -1024],
       [-1024, -1024, -1024, ..., -1024, -1024, -1024],
       ...,
       [-1024, -1024, -1024, ..., -1024, -1024, -1024],
       [-1024, -1024, -1024, ..., -1024, -1024, -1024],
       [-1024, -1024, -1024, ..., -1024, -1024, -1024]], dtype=int16)
</code></pre>
<p>and am able to view the image through:</p>
<pre><code>from PIL import Image
import numpy as np

img = Image.fromarray(dcm_files[0])
img.show()
</code></pre>
<p>and then trying to slice it:</p>
<pre><code>import image_slicer
image_slicer.slice(img, 64)
</code></pre>
<p><em>Error: 'Image' object has no attribute 'read'</em></p>
<p>thanks! </p>
</div>
<div class="post-text" itemprop="text">
<p>The module <code>image_slicer</code> uses filenames, not file instances. Therefore you have to save the array to some localisation. You can use <a href="https://docs.python.org/3/library/tempfile.html" rel="nofollow noreferrer"><code>tempfile</code> module</a> for that purpose. </p>
<pre><code>from PIL import Image
import numpy as np
import image_slicer
import tempfile

array = np.random.randint(0,200, size=(128,128), dtype='int32')

img = Image.fromarray(array)

temp = tempfile.NamedTemporaryFile()
img.save(temp.name, format="png")

image_slicer.slice(temp.name, 4)
#if you want to play with the slices:
tiles = image_slicer.slice(temp.name, 4, save=False)
</code></pre>
</div>
