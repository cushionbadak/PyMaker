<div class="post-text" itemprop="text">
<p>I want a program that will help clean up the title and structure of a bunch of files so they will be in a suitable format for my media center program. I wrote a program that cleans up the name of the parent folder as I want "Name (year)". I've been having trouble with working out the cleanup of the subfiles. This is the basic pseudocode I have:</p>
<pre><code>Find all folders in given directory
Open each folder and copy or move files in child folders to main folder
Sort files by size
Rename the largest file the same name as the parent directory

Search for .srt files
if no .srt files delete all but largest file
if one .srt file found rename it same name as parent directory + .eng.srt
if multiple .srt files found search for "english" or "eng"
if one matching file found rename it same name as parent directory + .eng.srt
if multiple english or eng files found pick one without "SDH" and rename as above

Delete all files except renamed largest file and renamed .srt if found
</code></pre>
<p>I used os.rename() to rename the parent directories but managing the subfiles is confusing to me. os.walk seems to be recommended but it is not at all intuitive. How do I manage directories as objects if there is such a thing?</p>
</div>
<div class="post-text" itemprop="text">
<p>Supposing, that renaming of a file equals to flagging it for keeping it (your pseudo code needs to be altered a bit):</p>
<pre><code>from os import listdir, remove
from os.path import isfile, join

mainpath = "/tmp/"

renamed_files = []
</code></pre>
<p>Every time when renaming a file, add it to "to be kept list":</p>
<pre><code>renamed_files.append(fname)
</code></pre>
<p>In the end:</p>
<pre><code>onlyfiles = [f for f in listdir(mainpath) if isfile(join(mainpath, f))]

for fname in onlyfiles:
   if mainpath+fname not in renamed_files:
       remove(mainpath+fname) # os.remove()
</code></pre>
</div>
<span class="comment-copy">There is <a href="https://docs.python.org/3/library/pathlib.html" rel="nofollow noreferrer">pathlib</a>.</span>
