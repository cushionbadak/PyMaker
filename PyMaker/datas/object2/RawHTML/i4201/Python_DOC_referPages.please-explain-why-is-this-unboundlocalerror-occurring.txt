<div class="post-text" itemprop="text">
<p>This is my code -
urls.py</p>
<pre><code>path('post/&lt;int:pk&gt;/edit/',views.Edit_View, name = 'edit_view'),
</code></pre>
<p>views.py</p>
<pre><code>def Edit_View(request,pk):
    try:
        my_form = Profile.objects.get(pk=pk)
    except:
        raise Http404('Page Doesnt Found')
    form = ProfileForm(request.POST or None, instance=my_form)
    if request.method == 'POST':

        if form.is_valid():
            form.save()
            return redirect('detail_view',pk=pk)
    else:
        return render (request, 'edit_view.html',{'form':form})
</code></pre>
<p>template</p>
<pre><code>&lt;form method="post"&gt;
{% csrf_token %}
{{form.as_p}}
&lt;input type="submit" value="OK"&gt;
</code></pre>
<p></p>
<p>This is working fine, but when writing <code>form = ProfileForm(request.POST or None, instance=my_form)</code> after <code>if request.method == 'POST':</code> like</p>
<pre><code>def Edit_View(request,pk):
    try:
        my_form = Profile.objects.get(pk=pk)
    except:
        raise Http404('Page Doesnt Found')

    if request.method == 'POST':
        form = ProfileForm(request.POST or None, instance=my_form)
        if form.is_valid():
            form.save()
            return redirect('detail_view',pk=pk)
    else:
        return render (request, 'edit_view.html',{'form':form})
</code></pre>
<p>it gives </p>
<p><code>UnboundLocalError at /post/2/edit/
local variable 'form' referenced before assignment</code> error, i want to know why such thing happening ! why earlier this didn't happen and later such error occurred and what is this UnboundLocalError?</p>
<p>Please be guiding me.
Thanks in Advance</p>
</div>
<div class="post-text" itemprop="text">
<p>In side else part write this:</p>
<pre><code>else:
    form = ProfileForm()
    return render (request, 'edit_view.html',{'form......
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The variable <code>form</code> in the <code>else</code> has not been assigned any value:</p>
<p><code>else:
        return render (request, 'edit_view.html',{'form':form})
</code></p>
<p>The variable <code>form</code> was only assigned in the <code>if</code>. Python has specific scoping rules, and if those rules are broken, Python throws an exception. Python won't execute your code because your variable is unassigned in the event that the <code>else</code> is executed.</p>
<p>This question is answered in detail here: <a href="https://docs.python.org/3/faq/programming.html#why-am-i-getting-an-unboundlocalerror-when-the-variable-has-a-value" rel="nofollow noreferrer">https://docs.python.org/3/faq/programming.html#why-am-i-getting-an-unboundlocalerror-when-the-variable-has-a-value</a></p>
</div>
<span class="comment-copy">Hint: What happens if the method isn't POST?</span>
<span class="comment-copy">You are trying to use <code>form</code> when <code>request.method</code> equals <code>"POST"</code>, but it was never assigned.</span>
<span class="comment-copy">@IgnacioVazquez-Abrams Sir, then its GET probably</span>
<span class="comment-copy">@pault yeah Sir, have fixed my question..</span>
<span class="comment-copy">The difference between the working code and the non-working version is the placement of the <code>form = ...</code> line. As the other commenters have stated, you are using the variable <code>form</code> in the <code>else</code> statement without first defining it.</span>
<span class="comment-copy">Also, make sure the you return a response when you have a POST'ed but invalid form. Right now, you aren't handling that.</span>
<span class="comment-copy">Well, it compiles, but dies when run.</span>
<span class="comment-copy">Good point, @IgnacioVazquez-Abrams. I gave incorrect wording. This isn't a matter of compiling; it's a matter of Python throwing an exception based on its own scope rules. I'll edit my answer.</span>
