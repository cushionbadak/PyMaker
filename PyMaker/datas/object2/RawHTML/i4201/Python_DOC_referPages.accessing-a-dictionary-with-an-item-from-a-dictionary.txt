<div class="post-text" itemprop="text">
<p>I am trying to access a dictionary in python. I have a list containing airport codes and for each code I want to use the code to enter in my dictionary and get the airport information that is in airportDict from my Airport class </p>
<pre><code>    for i in range(len(itinerary) - 1):
         a1 = Airport.airportDict.get(itinerary[i])
</code></pre>
<p>I used something like this earlier in my code to make a weighted directed graph. </p>
<pre><code>    graph = {}
    for i in range(len(airportInput)):
         graph[airportInput[i]] = {}
         a1 = Airport.airportDict.get(airportInput[i])
</code></pre>
<p>this worked fine but in the one above I get an error TypeError: unhashable type: 'list'</p>
<p>In the above case airport input is also a list and was declared as such </p>
<pre><code>    airportInput = [row[0], row[1], row [2], row[3], row[4]]
</code></pre>
<p>Just for more clarification this is the main function that I am trying to use </p>
<pre><code>     def shortestPath (row):

        airportInput = [row[0], row[1], row [2], row[3], row[4]]
        aircraftInput = row[5]
        graph = createGraph(airportInput, aircraftInput)
        airportsToVisit = [row[1], row [2], row[3], row[4]]
        originAirport = [row[0]]
        iteneries = permute(airportsToVisit)
        for perm in iteneries:
           #perm.insert(0, originAirport)
           perm.extend([originAirport, perm[0]])
           print(perm)
           print(cost(perm, aircraftInput))
</code></pre>
<p>my permute function is</p>
<pre><code>   def permute(destinationList): 
      permutationTuples = permutations(destinationList) 
      return list([list(_) for _ in permutationTuples])
</code></pre>
<p>and cost is </p>
<pre><code>  def cost(itinerary, aircraft):
     air = Aircraft.airplaneDict.get(aircraft)
     if air.units == 'imperial':
         fuelCapacity = float(air.range) * 1.60934
     else:
         fuelCapacity =float(air.range)
     distanceList = []
     for i in range(len(itinerary) - 1):
         a1 = Airport.airportDict.get(itinerary[i])
         country = a1.country
         currencyCode = CurrencyCode.currencyCodeDict.get(country).currencyCode
         toEuroRate = float(currencyRate.currencyRateDict.get(currencyCode).toEuroRate)
         lat1 = a1.lat
         long1 = a1.long
         a2 = Airport.airportDict.get(itinerary[i])
         country = a2.country          
         lat2 = a2.lat
         long2 = a2.long
         distance = greatcircledist(long1, lat1, long2, lat2)
         if distance &gt; fuelCapacity:
             return none
         else:
             distance *= toEuroRate
        distanceList.append(distance)
     return sum(distanceList) 
</code></pre>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<p>@rhanly, what does print(perm) print?</p>
<p>@palivek ['LHR', 'SYD', 'JFK', 'AAL', ['DUB'], 'LHR']</p>
</blockquote>
<p>There's your problem. If <code>i == 4</code>, then <code>itinerary[i] == ['DUB']</code>. <code>['DUB']</code> is a list, which is not a valid dictionary key, because it's mutable. </p>
</div>
<div class="post-text" itemprop="text">
<p>Looks like your trying to use a list as a Key to a dictionary.</p>
<p><code>airportInput = [row[0], row[1], row [2], row[3], row[4]]</code></p>
<p>Error is probably here <code>graph[airportInput[0]]</code>, and also here <code>a1 = Airport.airportDict.get(airportInput[0])</code></p>
<p>You are effectively trying to do, <code>graph(row[0])</code></p>
<p>The error suggests <code>row[0]</code> is of type List?</p>
<p>Either way, try adding a few print statements to see what the actual values are just before the exception is raised. I think you will be surprised.</p>
<p>As an aside, do you know about splices... you can <code>airportInput = row[0:5]</code>. If you haven't already, perhaps take the time to go through the latest Python tutorial <a href="https://docs.python.org/3/tutorial/index.html" rel="nofollow noreferrer">Python 3 Tutorial</a> or <a href="https://docs.python.org/2/tutorial/index.html" rel="nofollow noreferrer">Python 2 Tutorial</a>. It doesn't take long, but it should really help you.</p>
<p>Hope this helps.</p>
</div>
<span class="comment-copy">Are you saying that airportDict is a dictionary? I think its definitely a dictionary</span>
<span class="comment-copy">@TCouch that's not the case, since a dictionary is also not hashable. It seems that somewhere <code>airportInput[i]</code> is also a list, but if it returned a dictionary it would still throw <code>TypeError</code></span>
<span class="comment-copy">If you hope to get any useful answer, please post a MCVE.</span>
<span class="comment-copy">Could you also provide an example of <code>itinerary</code>? I have a feeling that might be the culprit.</span>
<span class="comment-copy">@palivek I think it may be my permute function that it my issue.</span>
<span class="comment-copy">Ah I see, so I just need to think of a way of appending dublin to the start and end of each permutation.. thanks!!</span>
<span class="comment-copy">So for that part my code is working it's when I try to use my permutation list to access my dictionary I'm getting the error. Thanks for the tip also!</span>
