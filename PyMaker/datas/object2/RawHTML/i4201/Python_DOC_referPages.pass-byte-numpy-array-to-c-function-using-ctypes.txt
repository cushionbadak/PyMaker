<div class="post-text" itemprop="text">
<p>I want to pass byte numpy array to a <code>C</code> function using <code>ctypes</code>. The <code>C</code> function takes <code>void *mem_address</code> so I thought to pass it as the following:</p>
<pre><code>lst = np.random.choice(np.array(range(0, 100), dtype=np.int), size=(100, 5))
lst = np.asarray(lst).tobytes()

# Pass
lst.ctypes.data_as(ctypes.c_void_p)
</code></pre>
<p>This gives the error <code>AttributeError: 'bytes' object has no attribute 'ctypes'</code> which means <code>ctypes</code> does not handle numpy. Is there a workaround?</p>
</div>
<div class="post-text" itemprop="text">
<p><code>lst = np.asarray(lst).tobytes()</code> generates a plain <em>bytes</em> object (<a href="https://docs.python.org/3/library/stdtypes.html#bytes" rel="nofollow noreferrer">[Python 3]: class <strong>bytes</strong>(<em>[source[, encoding[, errors]]]</em>)</a> which is not handled by <em>ctypes</em>.</p>
<p>The original <em>lst</em> object on the other hand (<a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html" rel="nofollow noreferrer">[SciPy]: numpy.ndarray</a>), is. So, removing the above line of code, would fix the error.</p>
</div>
<div class="post-text" itemprop="text">
<p><code>lst</code> is now a python <code>bytes</code> object, not a <code>numpy</code> array. Thats what <code>.tobytes()</code> does. </p>
<p>Why not do </p>
<pre><code>lst = np.random.choice(np.array(range(0, 100), dtype=np.int), size=(100, 5))
lst.ctypes.data_as(ctypes.c_void_p)
</code></pre>
<p>? </p>
<p>I'm not even sure why you tried to convert to a byte which is 8 bit when c pointers are 32 or 64 bit.</p>
</div>
<span class="comment-copy">Thank you for your clarification</span>
<span class="comment-copy">You're welcome!</span>
<span class="comment-copy">Thank you for spotting the fact that  c pointers are 32 or 64 bit.</span>
