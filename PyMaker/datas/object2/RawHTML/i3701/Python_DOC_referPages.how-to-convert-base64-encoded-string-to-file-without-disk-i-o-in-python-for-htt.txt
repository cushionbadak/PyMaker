<div class="post-text" itemprop="text">
<p>I want to send a file through requests library in Python, it accepts <code>file</code> type input. Here is a piece of working code I've tested myself.</p>
<pre><code>FILES = []
f = open('/home/dummy.txt', 'rb')
# f : &lt;type 'file'&gt;
FILES.append(('file', f))
response = requests.post(url = 'https://dummy.com/dummy', headers = {'some_header':'content'}, data={'some_payload':'content'}, files=FILES)
</code></pre>
<p>This works just fine, now I have a base64 encoded string I just got from my database</p>
<pre><code>base64_string = "Q3VyaW91cywgYXJlbid0IHlvdT8="
FILES = []
f = convert_base64_to_file(base64_string, "dummy.txt")
# f : &lt;type 'file'&gt;
FILES.append(('file', f))
response = requests.post(url = 'https://dummy.com/dummy', headers = {'some_header':'content'}, data={'some_payload':'content'}, files=FILES)
</code></pre>
<p>I need the <code>convert_base64_to_file</code> (which is an imaginary method). How do I achieve this without any disk I/O?</p>
<p>My <code>base64_string</code> doesn't have a filename. How do I simulate the filename so that it behaves just like I open a file from my disk?</p>
<p>I need the http request to post this:</p>
<pre><code>------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="dummy.txt"
Content-Type: application/x-object

... contents of file goes here ...
</code></pre>
<p>That's why I need to specify the filename.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use the <a href="https://docs.python.org/3/library/io.html" rel="nofollow noreferrer"><code>io</code> module</a>:</p>
<pre><code>import io
FILES = {}
f = io.BytesIO()
FILES{'file'] = ("dummy.txt", f)
response = requests.post(url = 'https://dummy.com/dummy', headers = {'some_header':'content'}, data={'some_payload':'content'}, files=FILES)
</code></pre>
<p>Here is the <code>convert_base64_to_file</code> function:</p>
<pre><code>import base64
import io
def convert_base64_to_file(data):
    return io.BytesIO(base64.b64decode(data))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>To complete Megalng answer which solves half of my problem, we can add a name to the constructed file by doing this:</p>
<pre><code>import base64
import io
def convert_base64_to_file(base64_string,filename):
    f = io.BytesIO(base64.b64decode(base64_string))
    f.name = filename
    return f
</code></pre>
</div>
<span class="comment-copy">What is <code>convert_base64_to_file</code>?</span>
<span class="comment-copy">@MegaIng it is an imaginary method that I'm looking for.</span>
<span class="comment-copy">Where do I put the <code>base64_string</code>?</span>
<span class="comment-copy">@William Better now?</span>
<span class="comment-copy">@Megalng much better :), now there is a problem, there is no filename information in my <code>base64_string</code> so when I send it, it just says 'file', how do I simulate the filename as well?</span>
<span class="comment-copy">@William look at the <code>FILES.append(('file', f))</code> what can you try changing to add a filename, that is not <code>'file'</code>?</span>
<span class="comment-copy">@William Now? Does that work?</span>
