<div class="post-text" itemprop="text">
<p>Let's say the name of the module is available in form of a string rather than module object. How do I locate its source code location and load the abstract syntax tree (if the source code is present)?</p>
</div>
<div class="post-text" itemprop="text">
<p>I'd take the problem in three steps:</p>
<ol>
<li>Import the module by name. This should be relatively easy using <a href="https://docs.python.org/3/library/importlib.html#importlib.import_module" rel="nofollow noreferrer"><code>importlib.import_module</code></a>, though you could bodge up your own version with the builtin <code>__import__</code> if you needed to.</li>
<li>Get the source code for the module. Using <a href="https://docs.python.org/3/library/inspect.html#inspect.getsource" rel="nofollow noreferrer"><code>inspect.getsource</code></a> is probably the easiest way (but you could also just try <code>open(the_module.__file__).read()</code> and it is likely to work).</li>
<li>Parse the source into an AST. This should be easy with <a href="https://docs.python.org/3/library/ast.html#ast.parse" rel="nofollow noreferrer"><code>ast.parse</code></a>. Even for this step, the library isn't essential, as you can use the builtin <code>compile</code> instead, as long as you pass the appropriate flag (<code>ast.PyCF_ONLY_AST</code> appears to be <code>1024</code> on my system, so <code>compile(source, filename, 'exec', 1024)</code> should work).</li>
</ol>
</div>
