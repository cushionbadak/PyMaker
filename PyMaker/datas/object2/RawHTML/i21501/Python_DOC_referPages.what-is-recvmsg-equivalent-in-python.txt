<div class="post-text" itemprop="text">
<p>I am implementing a python script to do fuse mount programatically. I have written an equivalent in C, by making use of socketpair and recvmsg api's. But in python recvmsg is not implemented, so I am stuck. Can anyone of you tell me a python equivalent of this? Any help would be appreciated.</p>
<p>Let me tell why do I need recvmsg, I require to send the fd of the fuse mount from the child to the parent.</p>
</div>
<div class="post-text" itemprop="text">
<p>What you could look at is using pyx or a C module for Python that implements the required functionality in C and then you can manipulate and or use it from your Python script. This would allow you to send over the file descriptor and have the Python script act upon it.</p>
<p>Other things you can do is write a small C wrapper, that handles the recvmsg and not until it gets that fd and has opened it does it do a fork. All file descriptors that are open will stay open when you fork, and then exec or even just plain old exec meaning you don't have to worry about Python receiving it.</p>
</div>
<div class="post-text" itemprop="text">
<p>As part of Python3 <a href="https://docs.python.org/3/library/socket.html#socket.socket.recvmsg" rel="nofollow noreferrer">socket.recvmsg</a> is now available in the <code>socket</code> module which, according to the docs, should allow you to do what you want (albeit rather late!):</p>
<blockquote>
<p>On some systems, sendmsg() and recvmsg() can be used to pass file
  descriptors between processes over an AF_UNIX socket. When this
  facility is used (it is often restricted to SOCK_STREAM sockets),
  recvmsg() will return, in its ancillary data, items of the form
  (socket.SOL_SOCKET, socket.SCM_RIGHTS, fds), where fds is a bytes
  object representing the new file descriptors as a binary array of the
  native C int type. If recvmsg() raises an exception after the system
  call returns, it will first attempt to close any file descriptors
  received via this mechanism.</p>
</blockquote>
</div>
<span class="comment-copy">It has not yet landed in Python, see <a href="http://bugs.python.org/issue6560" rel="nofollow noreferrer">bugs.python.org/issue6560</a></span>
<span class="comment-copy">Is there a equivalent of it?</span>
<span class="comment-copy">No. As far as I am aware there is no way to implement recvmsg using what is currently available in Python.  What data are you sending with recvmsg? Would it be possible to use a standard socket instead?</span>
<span class="comment-copy">I ran into this too. I took a stab at it but didn't get very far.</span>
