<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/1112343/how-do-i-capture-sigint-in-python">How do I capture SIGINT in Python?</a>
<span class="question-originals-answer-count">
                    11 answers
                </span>
</li>
</ul>
</div>
<p>I am using Python's default <a href="https://docs.python.org/3.5/library/cmd.html" rel="nofollow">cmd module</a> to create a command-line-based app.</p>
<p>According to the <a href="https://docs.python.org/3.5/library/cmd.html#cmd.Cmd.cmdloop" rel="nofollow">docs</a> <kbd>CTRL</kbd>+<kbd>D</kbd> (which signals EOF to the command line) can be captured by implementing a function called <code>do_EOF</code>, which works pretty well.</p>
<p>However, is there a way to capture <kbd>CTRL</kbd>+<kbd>C</kbd> as well? I want to execute a specific function (which saves all unsaved changes) before terminating the Python-script, which is the main motivation for doing this.</p>
<p>Currently, I capture <code>KeyboardInterrupts</code> using a <code>try-except-block</code> like the following:</p>
<pre><code>if __name__ == '__main__':
    try:
        MyCmd().cmdloop()
    except KeyboardInterrupt:
        print('\n')
</code></pre>
<p>I tried to extend this into:</p>
<pre><code>if __name__ == '__main__':
    try:
        app = MyCmd().cmdloop()
    except KeyboardInterrupt:
        app.execute_before_quit()
        print('\n')
</code></pre>
<p>Which leads to the following <code>NameError</code>:</p>
<pre><code>name 'app' is not defined
</code></pre>
<p>How can I capture <kbd>CTRL</kbd>+<kbd>C</kbd>?</p>
<p>I think <a href="https://docs.python.org/3/library/signal.html" rel="nofollow"><code>signal</code></a> could somehow do the trick, but I am not sure...</p>
<hr/>
<p>Remark: The script needs to be running on both Unix- and Windows-based systems.</p>
</div>
<div class="post-text" itemprop="text">
<p>Ctrl C activates system exit which is like an exception, I'm pretty sure you can catch it with try and except. Note: to catch SystemExit you must specify it in the except explicitly.</p>
</div>
<span class="comment-copy">Have you considered using <code>atexit</code> instead?  <a href="https://docs.python.org/3/library/atexit.html" rel="nofollow noreferrer">docs.python.org/3/library/atexit.html</a></span>
