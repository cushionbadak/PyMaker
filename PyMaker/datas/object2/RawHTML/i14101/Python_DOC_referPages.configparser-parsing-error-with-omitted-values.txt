<div class="post-text" itemprop="text">
<p>I'm using Python's old-fashioned <a href="https://docs.python.org/3/library/configparser.html#supported-ini-file-structure" rel="nofollow"><code>configparser</code></a> module to read config-files from the filesystem.</p>
<p>To check whether a user-provided config-file uses correct 'syntax' I compare all section keys and subkeys to a reference config-file <code>ref_config.ini</code> containing all allowed section keys and subkeys with ommited values.</p>
<p>Parsing the user-specific file is not a big deal and works pretty well. However, reading the reference-config leads to a <a href="https://docs.python.org/3/library/configparser.html#configparser.ParsingError" rel="nofollow"><code>ParsingError</code></a> as follows:</p>
<pre><code>ParsingError: Source contains parsing errors: 'ref_config.ini'
    [line  2]: 'rotations_to_simulate\n'
    [line  3]: 'number_of_segments\n'
    [line  4]: 'material_data\n'
    [line  7]: 'rpm\n'
</code></pre>
<p>The file <code>ref_config.ini</code> contains of the following lines:</p>
<pre><code>[GENERAL DATA]
rotations_to_simulate
number_of_segments
material_data

[TECHNICAL DATA]
rpm
</code></pre>
<p>To read the above mentioned config-file I use the following code:</p>
<pre><code>#!/usr/bin/env python3
# coding: utf-8

import configparser
import os.path

def read_ref_config():
    config = configparser.ConfigParser()
    if not os.path.isfile('ref_config.ini'):
        return False, None
    else:
        config.read('ref_config.ini')
        return True, config
</code></pre>
<p>However, ommiting values in a config file should not cause a ParsingError since the <a href="https://docs.python.org/3/library/configparser.html#supported-ini-file-structure" rel="nofollow">docs</a> tell:</p>
<blockquote>
<p>Values can be omitted, in which case the key/value delimiter may also
  be left out.</p>
<pre><code>[No Values]
key_without_value
empty string value here =
</code></pre>
</blockquote>
<hr/>
<p>Update:</p>
<p>I just copied and pasted the contents of the given <a href="https://docs.python.org/3/library/configparser.html#supported-ini-file-structure" rel="nofollow">example from the docs</a> into my <code>ref_config.ini</code> file and got a similar ParsingError with NoValue-keys not containing any whitespaces:</p>
<pre><code>ParsingError: Source contains parsing errors: 'ref_config.ini'
    [line 20]: 'key_without_value\n'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The easy way:</p>
<pre><code>configparser.ConfigParser(allow_no_value=True)
</code></pre>
<p>according to <a href="https://docs.python.org/3/library/configparser.html#customizing-parser-behaviour" rel="nofollow">configparse docs</a></p>
<pre><code>&gt;&gt;&gt; import configparser

&gt;&gt;&gt; sample_config = """
... [mysqld]
...   user = mysql
...   pid-file = /var/run/mysqld/mysqld.pid
...   skip-external-locking
...   old_passwords = 1
...   skip-bdb
...   # we don't need ACID today
...   skip-innodb
... """
&gt;&gt;&gt; config = configparser.ConfigParser(allow_no_value=True)
&gt;&gt;&gt; config.read_string(sample_config)

&gt;&gt;&gt; # Settings with values are treated as before:
&gt;&gt;&gt; config["mysqld"]["user"]
'mysql'

&gt;&gt;&gt; # Settings without values provide None:
&gt;&gt;&gt; config["mysqld"]["skip-bdb"]

&gt;&gt;&gt; # Settings which aren't specified still raise an error:
&gt;&gt;&gt; config["mysqld"]["does-not-exist"]
Traceback (most recent call last):
  ...
KeyError: 'does-not-exist'
</code></pre>
</div>
