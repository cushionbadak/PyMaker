<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/2592764/what-does-a-b-prefix-before-a-python-string-mean">What does a b prefix before a python string mean?</a>
<span class="question-originals-answer-count">
                    2 answers
                </span>
</li>
</ul>
</div>
<h1>Summery</h1>
<p>With which statement can :</p>
<pre><code>b'10.0.3.15'
</code></pre>
<p>be converted into :</p>
<pre><code>'10.0.3.15'
</code></pre>
<p><a href="https://stackoverflow.com/questions/2592764/what-does-a-b-prefix-before-a-python-string-mean">What does a b prefix before a python string mean?</a>  explains the meaning of 'b' but not answer this question.</p>
<p>An working answer on this question will be of course voted as solved.</p>
<h1>Full</h1>
<p>From shell can find my IP address with the complex statement :</p>
<pre><code>ip addr show eth0 | awk '$1 == "inet" {gsub(/\/.*$/, "", $2); print $2}'
</code></pre>
<p>(source : <a href="https://stackoverflow.com/questions/23934425/bash-parse-ifconfig-to-get-only-my-ip-address/23934702#23934702">Parse ifconfig to get only my IP address using Bash</a> )</p>
<p>Which returns for me: <code>10.0.3.15</code></p>
<p>That is Ok. </p>
<p>Now I want this statement, or any statement, to be executed in Python. Because the statement has all kind of specific tokens, I just write to file, and read the file into variable <code>cmd</code></p>
<p>I checked the content of <code>cmd</code> is identical to the above statement. Now I execute this command in Python :</p>
<pre><code>p = subprocess.Popen(cmd, shell=True,
                     stdout=subprocess.PIPE,
                     stderr=subprocess.STDOUT)
b = p.communicate()  
</code></pre>
<p>The result is a tuple, I only need the content: </p>
<pre><code>value = b[0]
</code></pre>
<p>The value is <code>b'10.0.3.15\\n'</code></p>
<p>In <a href="https://docs.python.org/3/library/string.html" rel="nofollow noreferrer">Format Specification Mini Language</a> I see 'b' is a type which stand for binary. </p>
<p>I only need <code>'10.0.3.15'</code>. How to achieve that?</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>out, _ = p.communicate()</code>. Then your output is saved as a string in the variable <code>out</code>. To remove <code>\n</code>. you can use <code>strip()</code> (e.g. <code>out.strip()</code>).</p>
<pre><code>import subprocess

device = 'em1'
cmd = "ip addr show %s | awk '$1 == \"inet\" {gsub(/\/.*$/, \"\", $2); print $2}'" % device

p = subprocess.Popen(cmd, shell=True,
                     stdout=subprocess.PIPE,
                     stderr=subprocess.STDOUT)
out, _ = p.communicate()
print(out.strip())
</code></pre>
<p>But you should have a look at the Python module <a href="https://pypi.python.org/pypi/netifaces/" rel="nofollow">netifaces</a>.</p>
<pre><code>import netifaces
device = 'em1'
print(netifaces.ifaddresses(device)[netifaces.AF_INET])
</code></pre>
<p>This will output something like this:</p>
<pre><code>[{'broadcast': '192.168.23.255', 'netmask': '255.255.255.0', 'addr': '192.168.23.110'}]
</code></pre>
</div>
<span class="comment-copy"><code>b'10.0.3.15\n'.decode('utf-8').strip()</code></span>
<span class="comment-copy">b stands for "Bytes" in this context.</span>
<span class="comment-copy">The linked duplicate was not really the question of the OP.</span>
<span class="comment-copy">@ChristianBerendt AFAICT the OP has already successfully applied <code>subprocess.Popen</code> and got the correct result. The question itself is about the meaning of the <code>b''</code> prefix and how to get a "regular" string.</span>
<span class="comment-copy">With this POV the linked duplicate makes sense.</span>
<span class="comment-copy">The output for me is : b'10.0.3.15' so still with the prefix 'b'</span>
<span class="comment-copy">Netifaces looks real powerfull, so I tried to install, according the instruction, but without success. Learned from the past I will not dig into it, to much work with limited results.</span>
