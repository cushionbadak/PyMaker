<div class="post-text" itemprop="text">
<p>I'm create new project</p>
<p>I create two function. First func normally run, but second function not working</p>
<p><strong>First func:</strong></p>
<pre><code>#it's work

def twitter(adress):
    reqURL = request.urlopen("https://cdn.api.twitter.com/1/urls/count.json?url=%s" % adress)
    encodingData = reqURL.headers.get_content_charset()
    jsonLoad = json.loads(reqURL.read().decode(encodingData))
    print("Sharing:", jsonLoad['count'])
</code></pre>
<p><strong>Second func:</strong></p>
<pre><code>#Doesn't work

def facebook(adress):
    reqURL = request.urlopen("https://api.facebook.com/method/links.getStats?urls=%s&amp;format=json" % adress)
    encodingData = reqURL.headers.get_content_charset()
    jsonLoad = json.loads(reqURL.read().decode(encodingData))
    print("Sharing:", jsonLoad['share_count'])
</code></pre>
<p>How to fix second func(facebook)</p>
<p><strong>I get the error for facebook func:</strong></p>
<pre><code>Traceback (most recent call last):
  File "/myproject/main.py", line 24, in &lt;module&gt;
    facebook(url)
  File "/myproject/main.py", line 15, in facebook
    jsonLoad = json.loads(reqURL.read().decode(encodingData))
TypeError: decode() argument 1 must be str, not None
</code></pre>
<p><strong>twitter func out:</strong></p>
<pre><code>Sharing: 951
</code></pre>
<p>How can I solve this problem?</p>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>The Facebook response doesn't include a <code>charset</code> parameter indicating the encoding used:</p>
<pre><code>&gt;&gt;&gt; from urllib import request
&gt;&gt;&gt; adress = 'www.zopatista.com'
&gt;&gt;&gt; reqURL = request.urlopen("https://cdn.api.twitter.com/1/urls/count.json?url=%s" % adress)
&gt;&gt;&gt; reqURL.info().get('content-type')
'application/json;charset=utf-8'
&gt;&gt;&gt; reqURL = request.urlopen("https://api.facebook.com/method/links.getStats?urls=%s&amp;format=json" % adress)
&gt;&gt;&gt; reqURL.info().get('content-type')
'application/json'
</code></pre>
<p>Note the <code>charset=utf-8</code> part in the Twitter response.</p>
<p>The JSON standard states that the <em>default</em> characterset is UTF-8, so pass that to the <a href="https://docs.python.org/3/library/email.message.html#email.message.Message.get_content_charset" rel="nofollow"><code>get_content_charset()</code> method</a>:</p>
<pre><code>encodingData = reqURL.headers.get_content_charset('utf8')
jsonLoad = json.loads(reqURL.read().decode(encodingData))
</code></pre>
<p>Now, when no content <code>charset</code> parameter is set, the default <code>'utf8'</code> is returned instead.</p>
<p>Note that Facebook's JSON response contains a <em>list</em> of matches; because you are passing in just one URL, you could take just the first result:</p>
<pre><code>print("Sharing:", jsonLoad[0]['share_count'])
</code></pre>
</div>
<span class="comment-copy">how to making? I don't understand</span>
<span class="comment-copy">Thanks but i get new error :/ i'm sorry :/  <code>facebook(url)   File "/myproject/main.py", line 17, in facebook     print("Sharing:", jsonLoad['share_count']) TypeError: list indices must be integers, not str</code></span>
<span class="comment-copy">@Ali: Facebook returns a <b>list</b>; use <code>jsonLoad[0]['share_count']</code></span>
<span class="comment-copy">@Marjijn Pieters thank you it's work :) i'm so happy thank you :)</span>
