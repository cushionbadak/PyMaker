<div class="post-text" itemprop="text">
<p>I am a beginner in python, I have faced some problem. I have an object list like this :</p>
<pre><code>[  
    {  
        'balance':-32399.0,
        'code':u'1011',
        'name':u'Stock Valuation Account'
    },
    {  
        'balance':-143503.34,
        'code':u'1011',
        'name':u'Stock Interim Account (Received)'
    },
    {  
        'balance':117924.2499995,
        'code':u'1011',
        'name':u'Stock Interim Account (Delivered)'
    },
    {  
        'balance':-3500000.0,
        'code':u'1101',
        'name':u'Cash'
    },
    {  
        'balance':-50000.0,
        'code':u'1101',
        'name':u'Other Cash'
    },
]
</code></pre>
<p>I need to sum it based on the code, so the result will be.</p>
<pre><code>[  
    {  
        'balance':6819,91,
        'code':u'1011',
    },
    {  
        'balance':-3550000.0,
        'code':u'1101',
    },
]
</code></pre>
<p>have search over StackOverflow, but still not got what I need.
any help?...</p>
</div>
<div class="post-text" itemprop="text">
<p>Exactly, using <code>groupby</code> and <code>sum</code> within some <code>comprehensions</code>:
As said in the comments, for using groupby the list need to be presorted.
In addition you can use <code>operator.attrgetter</code> instead of lambdas in the <code>key</code> parameters of <code>sorted</code> and <code>groupby</code>.</p>
<pre><code>l = [  
    {  
        'balance':-32399.0,
        'code':u'1011',
        'name':u'Stock Valuation Account'
    },
    ...
]

from itertools import groupby
import operator 

selector_func = operator.attrgetter("code")
l = sorted(l, key=selector_func)
result = [{"code" : code, "balance" : sum(x["balance"] for x in values)} for code, values in groupby(l, selector_func)]
print(result)
</code></pre>
<p>Result:</p>
<pre><code>[{'code': '1011', 'balance': -57978.0900005}, {'code': '1101', 'balance': -3550000.0}]
</code></pre>
<p>Here you have the <a href="https://repl.it/repls/CuteQuaintWebsites" rel="nofollow noreferrer">live example</a></p>
</div>
<div class="post-text" itemprop="text">
<p>Here is an oneliner without any import :</p>
<pre><code>a = ...
result = [{'balance' : sum([i['balance'] for i in a if i['code']==j]), 'code' : j} for j in set([k['code'] for k in a])]
</code></pre>
<p><strong>OUTPUT</strong> : </p>
<pre><code>[{'balance': -3550000.0, 'code': '1101'}, {'balance': -57978.0900005, 'code': '1011'}]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>data = [
    {
        'balance':-32399.0,
        'code':u'1011',
        'name':u'Stock Valuation Account'
    },
    ...
]
d = {}
for entry in data:
    d[entry['code']] = d.get(entry['code'],0) + entry['balance']
print([{'balance':b,'code':c} for c,b in d.items()])
</code></pre>
<p>Would print:</p>
<pre><code>[{'balance': -57978.0900005, 'code': '1011'}, {'balance': -3550000.0, 'code': '1101'}]
</code></pre>
</div>
<span class="comment-copy">Possible duplicate of <a href="https://stackoverflow.com/questions/38647928/sum-list-of-list-elements-in-python-like-sql-group-by">Sum list of list elements in python like sql group by</a></span>
<span class="comment-copy">Tip: use Google to search StackOverflow instead of the built-in search engine (unless searching for tags).</span>
<span class="comment-copy">@meowgoesthedog already read that answer, I am still new, so don't know if sum value on an object with key inside the array. on your mentioned that sum on array.</span>
<span class="comment-copy">Would help to remind OP that <code>groupby</code> requires the items to be pre-sorted by the key.</span>
<span class="comment-copy">Indeed @meowgoesthedog, good point, thanks!</span>
