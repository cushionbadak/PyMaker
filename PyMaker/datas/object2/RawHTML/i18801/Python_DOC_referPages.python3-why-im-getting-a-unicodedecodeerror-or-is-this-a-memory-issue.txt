<div class="post-text" itemprop="text">
<p>I'm writing a program to iterate my Robocopy-Log (&gt;25 MB). It's by far not ready, cause I'm stuck with a problem.</p>
<p>The problem is that after iterating ~1700 lines of my log -&gt; I get an "UnicodeError":</p>
<pre><code>Traceback (most recent call last):
  File "C:/Users/xxxxxx.xxxxxx/SkyDrive/#Python/del_robo2.py", line 6, in &lt;module&gt;
    for line in data:
  File "C:\Python33\lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
UnicodeDecodeError: 'charmap' codec can't decode byte 0x81 in position 7869: character maps to &lt;undefined&gt;
</code></pre>
<p>The program looks as follows:</p>
<pre><code>x="Error"
y=1
arry = []
data = open("Ausstellungen.txt",mode="r")
for line in data:
    arry = line.split("\t")
    print(y)
    y=y+1
    if x in arry:
        print("found")
        print(line)
data.close()   
</code></pre>
<p>If I reduce the txt file to 1000 lines then the program works.
If I delete line 1500 to 3000 and run again, I get again the unicode error around line 1700.</p>
<p>So have I made an error or is this some memory limiting problem of Python?</p>
</div>
<div class="post-text" itemprop="text">
<p>Given your data &amp; snippet, I would be surprised if this is a memory issue. It's more likely the encoding: Python is using your system's default encoding to read the file, which is "cp1252" (the default MS Windows encoding), but the file contains byte sequences/bytes which cannot be decoded in that encoding. A candidate for the file's actual encoding might be "latin-1", which you can make Python 3 use by saying</p>
<pre><code>open("Ausstellungen.txt",mode="r", encoding="latin-1")
</code></pre>
<p>A possibly similar issue is <a href="https://stackoverflow.com/questions/3284827/python-3-chokes-on-cp-1252-ansi-reading">Python 3 chokes on CP-1252/ANSI reading</a>. A nice talk about the whole thing is here: <a href="http://nedbatchelder.com/text/unipain.html" rel="nofollow noreferrer">http://nedbatchelder.com/text/unipain.html</a></p>
</div>
<div class="post-text" itemprop="text">
<p>Python decodes all file data to Unicode values. You didn't specify an encoding to use, so Python uses the default for your system, the <a href="https://en.wikipedia.org/wiki/Windows-1252" rel="nofollow noreferrer"><code>cp1252</code> Windows Latin codepage</a>.</p>
<p>However, that is the wrong encoding for your file data. You need to specify an explicit codec to use:</p>
<pre><code>data = open("Ausstellungen.txt",mode="r", encoding='UTF8')
</code></pre>
<p>What encoding to use exactly, is unfortunately something you need to figure out yourself. I used UTF-8 as an example codec.</p>
<p>Be aware that <a href="https://superuser.com/questions/295934/robocopy-unilog-output-is-gibberish">some versions of RoboCopy have problems producing valid output</a>.</p>
<p>If you don't yet know what Unicode is, or want to know about encodings, see:</p>
<ul>
<li><p><a href="http://joelonsoftware.com/articles/Unicode.html" rel="nofollow noreferrer">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</a> by Joel Spolsky</p></li>
<li><p>The <a href="http://docs.python.org/3/howto/unicode.html" rel="nofollow noreferrer">Python Unicode HOWTO</a></p></li>
<li><p><a href="http://nedbatchelder.com/text/unipain.html" rel="nofollow noreferrer">Pragmatic Unicode</a> by Ned Batchelder</p></li>
</ul>
<p>The reason you see the error crop up for different parts of your file is that your data contains more than one codepoint that the cp1252 encoding cannot handle.</p>
</div>
<span class="comment-copy">It's a encoding issue, not a memory issue.</span>
<span class="comment-copy">You should pass the <code>encoding</code> argument to <code>open</code>(if you are on python3, in python2 use <code>codecs.open</code>).</span>
<span class="comment-copy">THX a lot, setting the encoding to latin was in this case the right thing. My first Python Log checker program slowly gets substance :).</span>
<span class="comment-copy">THX for the wealth of information. Choosing UTF8 didn't work for me, but you clearly wrote that maybe the log isn't in the right format.</span>
<span class="comment-copy">@polYtoX: If you used <code>/unilog</code>, then the output would (should) be in UTF16.</span>
