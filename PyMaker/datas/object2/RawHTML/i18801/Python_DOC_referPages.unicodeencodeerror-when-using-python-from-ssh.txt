<div class="post-text" itemprop="text">
<p>I made a small application that prints unicode special characters(i.e. superscript, subscript...). When it runs locally there are no problems but when it runs in a ssh session I always get a UnicodeEncodeError. 
Specifically: <code>UnicodeEncodeError 'ascii' can't encode characters in position 0-1: ordinal not in range(128)</code>
I tried different ssh clients, computers and double checked the sessions encoding but the result is the same.
This is really weird. Why does this happen? Is this really related to ssh?</p>
</div>
<div class="post-text" itemprop="text">
<p>The problem might be not your Python code, check your ssh ENV. LANG should be en_US.UTF-8 (containing UTF-8) not ASCII</p>
</div>
<span class="comment-copy">Most likely because Python cannot determine the terminal encoding, and falls back to ASCII. See the <a href="http://docs.python.org/3/howto/unicode.html" rel="nofollow noreferrer">docs.python.org/3/howto/unicode.html</a> python Unicode Howto.</span>
<span class="comment-copy">Does <code>python your_script.py | cat</code> work locally? Try <code>PYTHONIOENCODING=utf-8 python your_script.py | cat</code>.</span>
<span class="comment-copy">@J.F.Sebastian Yes, is working. Even without that enviroment variable set.</span>
<span class="comment-copy">@J.F.Sebastian With <code>PYTHONIOENCODING=utf-8</code> it also work in ssh. Thanks.</span>
<span class="comment-copy">what does <a href="https://gist.github.com/5898423" rel="nofollow noreferrer"><code>test_io_encoding.py</code></a> print?</span>
<span class="comment-copy"><code>LANG</code> is set to utf-8. Setting <code>PYTHONIOENCODING=utf-8</code> will solve the issue but the strange thing is that <code>sys.getdefaultencoding()</code> already return utf-8. So this shouldn't change anything.</span>
