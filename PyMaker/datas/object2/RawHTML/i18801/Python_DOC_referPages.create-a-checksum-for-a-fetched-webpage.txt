<div class="post-text" itemprop="text">
<p>I am using python 2.7 and use <code>requests</code> to fetch web pages.</p>
<p>I would like to know if the fetched object has changed.  </p>
<pre><code>r = requests.get(url,headers=None,proxies=None,timeout=int(parms['timeout']))
html = r.text

if checksum(html)!=checksum_last: 
   then do something
else:
    do nothing
</code></pre>
<p>I will save the checksum in a db.  How do I create a checksum?</p>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>As Jon Clements mentions, you can use the <a href="http://docs.python.org/2/library/hashlib.html#module-hashlib" rel="noreferrer"><code>hashlib</code></a> module:</p>
<pre><code>&gt;&gt;&gt; import requests
&gt;&gt;&gt; import hashlib
&gt;&gt;&gt; page = requests.get('http://www.stackoverflow.com')
&gt;&gt;&gt; hashlib.sha256(page.text.encode('utf-8')).hexdigest()
'807ea5e7c419aefc7a40ba1140ba6ef4001c60f3c21142eb743bc1d393c1bb62'
&gt;&gt;&gt; 
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Assuming you don't need a cryptographic hash function, you can use <a href="http://docs.python.org/3/library/zlib.html#zlib.adler32" rel="nofollow">Adler-32</a> or <a href="http://docs.python.org/3/library/zlib.html#zlib.crc32" rel="nofollow">CRC-32</a> from <code>zlib</code>.</p>
<pre><code>r = requests.get(url,headers=None,proxies=None,timeout=int(parms['timeout']))
html = r.text
if zlib.adler32(html.encode("utf-8")) != checksum_last:
    print("New page!")
</code></pre>
</div>
<span class="comment-copy">Have a look at the builtin <code>hashlib</code> module...</span>
<span class="comment-copy">Both of those have <a href="http://docs.python.org/2/library/zlib.html#zlib.crc32" rel="nofollow noreferrer">compatibility problems</a> between versions of Python that can make them inconvenient to use in some situations.</span>
<span class="comment-copy">@agf With the <code>.encode("utf-8")</code>, this code seems to work identically in 2.7 and 3.3..</span>
<span class="comment-copy">@agf interesting - do you have a reference handy?</span>
<span class="comment-copy">@JonClements Checkout the <a href="http://docs.python.org/2/library/zlib.html#zlib.crc32" rel="nofollow noreferrer">version 2.x docs</a>: <code>Changed in version 2.6: The return value is in the range [-2**31, 2**31-1] regardless of platform. In older versions the value would be signed on some platforms and unsigned on others.  Changed in version 3.0: The return value is unsigned and in the range [0, 2**32-1] regardless of platform.</code></span>
<span class="comment-copy">@agf They specifically mentioned that they're using Python 2.7, so that shouldn't be a problem. You can find a serious problem in just about any module in Python &lt; 2.6.</span>
