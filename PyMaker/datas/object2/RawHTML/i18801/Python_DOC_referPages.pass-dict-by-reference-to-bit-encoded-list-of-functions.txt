<div class="post-text" itemprop="text">
<p>I seem to have an issue with a <code>Manager.dict()</code> that gets passed to a list of functions (within a sub process) as when I modify it within the function, the new value isn't available outside.
I create my list of functions like this:</p>
<pre><code>gwfuncs = [reboot, flush_macs, flush_cache, new_gw, revert_gw, send_log]
gw_func_dict = dict((chr(2**i), gwfuncs[i]) for i in xrange(0,min(len(gwfuncs),8)))
</code></pre>
<p>and then call it like this:</p>
<pre><code>for bit in gw_func_dict.keys():
    if gwupdate &amp; ord(bit) == ord(bit):
        gw_func_dict[bit](fh, maclist)
</code></pre>
<p>Now assume we're talking about <code>flush_macs()</code>, whatever I do in the function to maclist, doesn't seem to be affecting the maclist outside of my function - why is this? How can I modify it the way that my changes are available outside?</p>
</div>
<div class="post-text" itemprop="text">
<p><code>==</code> has higher <a href="http://docs.python.org/3/reference/expressions.html#operator-precedence" rel="nofollow">precedence</a> than <code>&amp;</code>, so your <code>if</code> statement really acts like this:</p>
<pre><code>if gwupdate &amp; (ord(bit) == ord(bit)):
</code></pre>
<p>Add some parentheses and it'll work:</p>
<pre><code>if (gwupdate &amp; ord(bit)) == ord(bit):
</code></pre>
<p>Also, you can simplify your code a little:</p>
<pre><code>gw_func_dict = dict((chr(2**i), func) for i, func in enumerate(gwfuncs[:8]))
</code></pre>
<p>And if you're using Python 2.7+:</p>
<pre><code>gw_func_dict = {chr(2**i): func for i, func in enumerate(gwfuncs[:8])}
</code></pre>
<p>Also, iterating over a dictionary iterates over its keys by default, so you can remove <code>.keys()</code> from your <code>for</code> loop:</p>
<pre><code>for bit in gw_func_dict:
</code></pre>
</div>
