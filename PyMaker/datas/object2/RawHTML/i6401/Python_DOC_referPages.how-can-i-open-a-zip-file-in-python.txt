<div class="post-text" itemprop="text">
<p>What are the changes that i have to make in this code in order to open a .zip file instead of .gz?</p>
<pre><code>import gzip
embeddingsIn = gzip.open(embeddingsPath, "r") if embeddingsPath.endswith('.gz') else open(embeddingsPath, encoding="utf8")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>According to the <a href="https://docs.python.org/3/library/gzip.html" rel="nofollow noreferrer">gzip documentation</a>, there's no simple or immediate way to do this:</p>
<blockquote>
<p>The GzipFile class reads and writes gzip-format files, [...]
  Note that additional file formats which can be decompressed by the gzip and gunzip programs, such as those produced by compress and pack, are not supported by this module.</p>
</blockquote>
<p>A possible workaround could be the use of the <a href="https://docs.python.org/3/library/zipfile.html" rel="nofollow noreferrer">zipfile module</a>, which does indeed support <code>.zip</code> files, and put together a custom <code>my_open</code> function to open <code>.gz</code>, <code>.zip</code> and generic files</p>
<pre><code>import zipfile, gzip

def my_open(path):
    if zipfile.is_zipfile(path):
        return zipfile.ZipFile(path)
    elif path.endswith('.gz'):
        return gzip.GzipFile(path)
    else:
        return open(path, encoding="utf8")
</code></pre>
<p>as a note, I used the <code>ZipFile</code> and <code>GzipFile</code> constructor because, according to their respective documentations (<a href="https://docs.python.org/3/library/zipfile.html#zipfile.ZipFile" rel="nofollow noreferrer">zipfile</a>, <a href="https://docs.python.org/3/library/gzip.html#gzip.open" rel="nofollow noreferrer">gzipfile</a>) they are both functionally equivalent to <code>gzip.open</code>, which is not implementd in <code>zipfile</code>.</p>
</div>
<span class="comment-copy">What have you tried so far? You've tagged this question with the <code>zipfile</code> tag, which happens to be the name of the Python module that you would use.  Maybe read the documentation for that module?</span>
<span class="comment-copy">Sorry i have removed that tag actually i am new to python so i dont have any idea about the syntax..</span>
<span class="comment-copy">Well, start <a href="https://docs.python.org/3/library/zipfile.html" rel="nofollow noreferrer">here</a>.</span>
<span class="comment-copy">Thanks for your response and can you please also guide me how the resulted file willbe passed to the variable embeddingsIn as mentioned above.</span>
<span class="comment-copy">It should be as simple as <code>embeddingsIn = my_open("path/to/file")</code></span>
<span class="comment-copy">Thanks alot it must solve the issue. Now i got an other error related to the variable                                                                                                     for line in embeddingsIn:  TypeError: 'ZipFile' object is not iterable                                                             I will figure something out</span>
