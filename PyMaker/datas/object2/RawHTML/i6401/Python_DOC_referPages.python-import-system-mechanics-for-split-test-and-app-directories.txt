<div class="post-text" itemprop="text">
<p>I am struggling to successfully import my project to the test-suite in my project, as well as being able to run the program from the command-line. I've been able to run my test-suite for some time, under the impression that if the tests work, so does the command-line stuff--evidently this isn't the case. I do not <em>yet</em> intend on using my program as a library. The <code>api.py</code> acts is the entry-point for the program.</p>
<p>I have a project with the following structure (the same directory hierarchy as <a href="https://github.com/requests/requests" rel="nofollow noreferrer">requests</a>):</p>
<pre><code>myapp/
    myapp/
        __init__.py
        api.py # depends on commands.py
        commands.py # depends on utils.py
        utils.py
    tests/
        context.py
        test_api.py # depends on api.py
        test_commands.py # depends on commands.py, utils.py
</code></pre>
<p>In the file <code>context.py</code> I have a path modification adding <code>myapp</code> to the <code>PYTHONPATH</code>, so I can successfully run the tests on my code. Here is the contents of that file</p>
<pre><code>import os
import sys

sys.path.insert(0, os.path.abspath('..'))
import myapp
</code></pre>
<p>I've tried imaginable import combination I can think of. Far too many to list! I have also perused the Python reference <a href="https://docs.python.org/3/reference/import.html" rel="nofollow noreferrer">import system page</a>, and this <a href="http://docs.python-guide.org/en/latest/writing/structure/" rel="nofollow noreferrer">tutorial</a>.</p>
<p>How should I import my dependencies?</p>
</div>
<div class="post-text" itemprop="text">
<p>Turns out this was the correct layout, I mistook the error for something else. Although for future reference, relative imports in Python 3 must be explicit: when in the <code>myapp</code> package directory you can't say <code>import commands</code>, you must instead import it as <code>from . import commands</code>. This was defined in <a href="https://www.python.org/dev/peps/pep-0328/" rel="nofollow noreferrer">PEP 328</a> also see <a href="https://stackoverflow.com/questions/16981921/relative-imports-in-python-3">this</a> SO post on the topic. Run your package with <code>python -m mutil.api</code> not <code>python ./mutil/api.py</code> as the latter won't give the interpreter context of the current path.</p>
</div>
