<div class="post-text" itemprop="text">
<p>I have a input matrix looks like this </p>
<pre><code>grid = [[1,1,2],[1,2,3],[3,2,4]]
</code></pre>
<p>I am using the following code to construct a matrix of sets. </p>
<pre><code>m,n = len(grid), len(grid[0])
valuesets = [[set()]*n for _ in range(m)]

for j in range(n):
    s = sum(grid[0][:j+1])
    valuesets[0][j].add(s)
    print valuesets[0][0]
</code></pre>
<p>The output gives me </p>
<pre><code>set([1])
set([1, 2])
set([1, 2, 4])
</code></pre>
<p>I am wondering why valuesets[0][0] is being updated each time in the for loop but not stays the same value set([1]) like I expected? Thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p>The reason is <code>[set()] * n</code> creates a list by copying the same <code>set()</code> instance.</p>
<p>If you want to get a list of distinct set objects, use <code>[set() for _ in range(n)] instead</code>.</p>
</div>
<span class="comment-copy">Default Argument Values: <a href="https://docs.python.org/3/tutorial/controlflow.html#default-argument-values" rel="nofollow noreferrer">docs.python.org/3/tutorial/â€¦</a></span>
<span class="comment-copy">Don't do that <code>[set()]*n</code>. Use <code>[set() for _ in range(n)]</code> instead.</span>
