<div class="post-text" itemprop="text">
<p>I have a bunch of strings that are like: </p>
<pre><code>Bought MSFT@Arca ABCD
Bought Yahoo@Nasdaq 
Sold Google@Nasdaq ABCD
</code></pre>
<p>I want to create a dataframe of ABCD for all the strings. </p>
<p>So the desired dataframe should say something like:</p>
<pre><code>ACBD
NaN
ABCD
</code></pre>
<p>How can I parse the strings out first using regex? I tried <code>(ABCD|)</code> but that returns blank.</p>
</div>
<div class="post-text" itemprop="text">
<p>As a whole snippet:</p>
<pre><code>import pandas as pd, numpy as np

string = """Bought MSFT@Arca ABCD
Bought Yahoo@Nasdaq 
Sold Google@Nasdaq ABCD"""

needle = 'ABCD'

def search(line):
    return needle if line.endswith(needle) else np.nan

df = pd.DataFrame((search(line) for line in string.split("\n")))

print(df)
</code></pre>
<p>This makes use of <code>.endswith()</code>, a function <code>search()</code> and a list comprehension and will yield</p>
<pre><code>      0
0  ABCD
1   NaN
2  ABCD
</code></pre>
<p>Even shorter using a lambda function:</p>
<pre><code>df = pd.DataFrame(map(lambda x: needle if x.endswith(needle) else np.nan, string.split("\n")))
print(df)
</code></pre>
<p>For a more individual solution, you'd need to elaborate on the actual input strings.</p>
</div>
<span class="comment-copy">What have you tried already? If you want to use regex, did you check <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">docs.python.org/3/library/re.html</a> python's re documentation?</span>
<span class="comment-copy">you can use <code>split</code> and then take the last element</span>
<span class="comment-copy">You can use <code>@\w+[ \t]+(\w+)?</code>. If there's no capture group, you know it's <code>NaN</code></span>
<span class="comment-copy">Wouldn't be better to take the last 4 chars of the string and check if it is <code>== "ABCD"</code>?</span>
