<div class="post-text" itemprop="text">
<p>I have a (normal, unordered) dictionary that is holding my data and I extract some of the data into a numpy array to do some linear algebra.  Once that's done I want to put the resulting ordered numpy vector data back into the dictionary with all of data.  What's the best, most Pythonic, way to do this?</p>
<p>Joe Kington <a href="https://stackoverflow.com/questions/10838982/writing-to-numpy-array-from-dictionary">suggests in his answer to "Writing to numpy array from dictionary"</a> that two solutions include:</p>
<ol>
<li>Using <a href="https://docs.python.org/3/library/collections.html#ordereddict-objects" rel="nofollow noreferrer">Ordered Dictionaries</a></li>
<li>Storing the sorting order in another data structure, such as a dictionary</li>
</ol>
<p>Here are some (possibly useful) details:</p>
<p>My data is in nested dictionaries.  The outer is for groups: {groupKey: groupDict} and group keys start at 0 and count up in order to the total number of groups.  groupDict contains information about items: (itemKey: itemDict}.  itemDict has keys for the actual data and these keys typically start at 0, but can skip numbers as not all "item locations" are populated.  itemDict keys include things like 'name', 'description', 'x', 'y', ...</p>
<p>Getting to the data is easy, dictionaries are great:
data[groupKey][itemKey]['x'] = 0.12</p>
<p>Then I put data such as x and y into a numpy vectors and arrays, something like this:</p>
<pre><code> xVector = numpy.empty( xLength )
 vectorIndex = 0
 for groupKey, groupDict in dataDict.items()
      for itemKey, itemDict in groupDict.items()
           xVector[vectorIndex] = itemDict['x']
           vectorIndex += 1
</code></pre>
<p>Then I go off and do my linear algebra and calculate a z vector that I want to add back into dataDict.  The issue is that dataDict is unordered, so I don't have any way of getting the proper index.</p>
<p>The Ordered Dict method would allow me to know the order and then index through the dataDict structure and put the data back in.</p>
<p>Alternatively, I could create another dictionary while inside the inner for loop above that stores the relationship between vectorIndex, groupKey and itemKey:</p>
<pre><code> sortingDict[vectorIndex]['groupKey'] = groupKey
 sortingDict[vectorIndex]['itemKey'] = itemKey
</code></pre>
<p>Later, when it's time to put the data back, I could just loop through the vectors and add the data:</p>
<pre><code> vectorIndex = 0
 for z in numpy.nditer(zVector):
      dataDict[sortingDict[vectorIndex]['groupKey']][sortingDict[vectorIndex]['itemKey']]['z'] = z
</code></pre>
<p>Both methods seem equally straight forward to me.  I'm not sure if changing dataDict to an ordered dictionary will have any other effects elsewhere in my code, but probably not.  Adding the sorting dictionary also seems pretty easy as it will get created at the same time as the numpy arrays and vectors.  Left on my own I think I would go with the sortingDict method.</p>
<p>Is one of these methods better than the others?  Is there a better way I'm not thinking of?  My data structure works well for me, but if there's a way to change that to improve everything else I'm open to it.</p>
</div>
<div class="post-text" itemprop="text">
<p>I ended up going with option #2 and it works quite well.</p>
</div>
<span class="comment-copy">It is helpful if you give concrete examples of what you are working with.</span>
<span class="comment-copy">If you're in Python 3.6, <a href="https://stackoverflow.com/questions/39980323/dictionaries-are-ordered-in-python-3-6">dictionaries are ordered</a> -it's considered an implementation detail for now, but I read somewhere that it's popular enough to become spec in future.</span>
<span class="comment-copy">Welcome to SO. Please take the time to read <a href="https://stackoverflow.com/questions/how-to-ask">How to Ask</a> and the links it contains.</span>
<span class="comment-copy">I imagine the <code>most Pythonic</code> way would be one that works.</span>
<span class="comment-copy">@wwii:  Thanks for the welcome.  I've read the How to Ask, and aside from the lack of concrete examples, what are the other problems you see with my question?  I don't have a specific example because I haven't tried it yet.  I think both ways will work fine, I was just hoping for some specific thoughts on why one might be better than the other.  From my perspective they have minor differences, none of which make one better than the other.  I tried to lay this out in the question, but clearly I didn't do a very good job.  I'm going to try ordered dictionaries first</span>
