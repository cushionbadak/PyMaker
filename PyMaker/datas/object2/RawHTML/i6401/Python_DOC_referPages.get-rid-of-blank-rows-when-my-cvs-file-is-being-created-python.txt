<div class="post-text" itemprop="text">
<p>When I run the below code and it creates the CSV. In my CSV file there are blank rows. I am wondering how to get rid of the blank rows.</p>
<p>For example.</p>
<p>Row 1 – will have the data I need</p>
<p>Row 2 – will be blank</p>
<p>Row 3 – will have the data I need</p>
<p>Row 4 – will be blank</p>
<p>Row 5 – will have the data I need</p>
<p>Etc</p>
<p>I would like the CSV file when its created to present</p>
<p>Row 1– will have the data I need</p>
<p>Row 2 will have the data I need</p>
<p>Row 3 – will have the data I need</p>
<p>Etc</p>
<p>My code is below</p>
<pre><code>from elasticsearch import Elasticsearch
import csv

es = Elasticsearch(["9200"])

# Replace the following Query with your own Elastic Search Query
res = es.search(index="search", body=
                {
                    "_source": ["DTDT", "TRDT", "SPLE", "RPLE"],
                    "query": {
                        "bool": {
                            "should": [
                                {"wildcard": {"CN": "TEST1"}}

                            ]
                        }
                    }
}, size=10)



header_names = { 'DTDT': 'DATE', 'TRDT': 'TIME', ...}

with open('mycsvfile.csv', 'w') as f:  # Just use 'w' mode in 3.x
    header_present  = False
    for doc in res['hits']['hits']:
        my_dict = doc['_source'] 
        if not header_present:
            w = csv.DictWriter(f, my_dict.keys())
            w.writerow(header_names)  # will write DATE, TIME, ... in correct place
            header_present = True


        w.writerow(my_dict)
</code></pre>
<p>Could someone show me how to so this place. Been stuck on this all day.</p>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>Try this: </p>
<p><code>with open('mycsvfile.csv', 'w', newline='') as f:</code></p>
<p>Here is the <a href="https://docs.python.org/3/library/csv.html#csv.writer" rel="nofollow noreferrer">doc</a></p>
<p>As the documentation says in the <a href="https://docs.python.org/dev/library/csv.html#id3" rel="nofollow noreferrer">footnote</a>:</p>
<blockquote>
<p>If newline=' ' is not specified, newlines embedded inside quoted fields
  will not be interpreted correctly, and on platforms that use \r\n
  linendings on write an extra \r will be added. It should always be
  safe to specify newline=' ', since the csv module does its own
  (universal) newline handling.</p>
</blockquote>
<p>Hope it helps!</p>
</div>
<div class="post-text" itemprop="text">
<p>I'm not saying this is the best way to do this as I normally handle CSV stuff manually myself, however if you need a quick and dirty fix, try executing this directly after your code.</p>
<pre><code>with open('mycsvfile.csv', 'r+') as f:
    data = f.read().replace("\n\n", "\n");
    f.seek(0);
    f.write(data);
</code></pre>
<p>This takes your CSV as it is generated, reads it in, replaces any double new lines with single ones, and writes it all back out. Not remotely efficient, but it will work for now.</p>
</div>
<div class="post-text" itemprop="text">
<p>Try using the <code>newline=''</code> argument with <code>writerow()</code>. </p>
<p>i.e. <code>w.writerow(my_dict, newline='')</code></p>
</div>
<span class="comment-copy">Can you provide an example of what the <code>docs</code> in <code>res['hits']['hits']</code> looks like?</span>
<span class="comment-copy">Use pandas <code>df.dropna(how='all')</code> <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.dropna.html" rel="nofollow noreferrer">pandas.pydata.org/pandas-docs/stable/generated/…</a></span>
<span class="comment-copy">thanks, that worked for me and i ticked your answer are the correct one!!</span>
