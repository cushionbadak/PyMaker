<div class="post-text" itemprop="text">
<p>I want to carry out a mathematical operation on all list objects:</p>
<pre><code>swl = ['0', '0', '0', '', '', '', '1', '1', '1', '1', '1', '0.25']
</code></pre>
<p>Mathematical operation: <code>sgu = 1 - swl</code>, where I want to format sgu as:</p>
<pre><code>sgu_compact = ['3*1', '3*', '5*0', '0.75']
</code></pre>
<p>This is what I have:</p>
<pre><code>sgu = []
for ii in range(0, int(len(swl))):
    if len(swl[ii]) == 0:
        sgu.append(swl[ii])
    else:
        sgu.append(1-float(swl[ii]))

sguflt = [float(x) for x in swl]
sgu2 = ['{:g}'.format(float('{:.6g}'.format(i))) for i in sgu]

sgu_compact = ['%s*' % len(l) * (len(l) &gt; 1) + k for k, g in groupby(sgu2)
                for l in (list(g),)]

print sgu_compact
</code></pre>
<p>But I get <code>ValueError</code> due to empty list objects. Could someone please help me with this?</p>
</div>
<div class="post-text" itemprop="text">
<p>This can probably be optimized more, but as it stands seems to do what you said you wanted. Basically it just checks for and passes-though any empty string values encountered within each step.</p>
<pre><code>from itertools import groupby

swl = ['0', '0', '0', '', '', '', '1', '1', '1', '1', '1', '0.25']

sgu = []
for value in swl:
    if len(value):
        sgu.append(1 - float(value))
    else:
        sgu.append(value)

sguflt = [float(x) if x is not '' else '' for x in swl]

sgu2 = ['{:g}'.format(float('{:.6g}'.format(i))) if i is not '' else '' for i in sgu]

sgu_compact = ['%s*' % len(l) * (len(l) &gt; 1) + k for k, g in groupby(sgu2)
                for l in (list(g),)]

print sgu_compact  # -&gt; ['3*1', '3*', '5*0', '0.75']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Just filter out the empty values:</p>
<pre><code>swl = ['0', '0', '0', '', '', '', '1', '1', '1', '1', '1', '0.25']
swl = [x for x in swl if len(x)]
</code></pre>
</div>
<span class="comment-copy"><code>swl</code> contains empty strings. You cannot convert an empty string to a <code>float</code>, but your list comprehension <code>sguflt = [float(x) for x in swl]</code> tries on every value anyway</span>
<span class="comment-copy">This does the job, thank you.</span>
<span class="comment-copy">No need to call <code>len()</code>. Just <code>swl = [x for x in swl if x]</code>. Empty strings are <i>falsey</i></span>
<span class="comment-copy">I need the empty strings in the new list though. The list format needs to be same as sgu_compact, so I cannot filter out empty objects.</span>
<span class="comment-copy">@sool <code>swl = [float(x) if x else x for x in swl]</code>?</span>
