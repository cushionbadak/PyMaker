<div class="post-text" itemprop="text">
<p>I want to create a graph from a Mongodb collection. Nodes of this graph should be inventors of patents and they should be linked by a common id (that represents the patent in common). 
Here is the code I wrote in order to print only nodes.</p>
<pre><code> from pymongo import MongoClient
from pymongo import ASCENDING, DESCENDING
import networkx as nx
import matplotlib.pyplot as plt


uri ="mongodb://127.0.0.1:27017/Patent"
client = MongoClient(uri)

righe ={1:'CODINV2', 2:'INCY', 3:'INNAME', 4:'INADDR',5:'INADOTH',6:'INCITY',7:'INCOUNTY',8:'INREGION',9:'INSTATE',10:'INZIP',11:'nuts3',12:'alive',13:'APPLN_ID',14:'PROGR'}
db = client['Patent']
collection2 = db['projects']
collection = db['myprova']

nodi={}
i=0
G=nx.Graph()

k=1   #this parameter represents the fact that an inventor is still alive

db.projects.aggregate([{"$match": {"$and": [{"alive": k}, {"INCY": "IT"}]}}, {"$group": {"_id": "$CODINV2"}}, {"$out": "myprova"}], allowDiskUse=True)
inventor = collection.find()
newList=[]

for inv in inventor:
    newList.append(inv)

print newList

for idi in newList:
    nodi[idi] = i
    G.add_node(i)
    i += 1



#print(G.number_of_nodes())


nx.draw(G)

plt.show()
</code></pre>
<p>The attribute CODINV2 represents each inventor's id.
Running this code this errors appear in console:</p>
<p><a href="http://i.stack.imgur.com/BC9wd.png" rel="nofollow">http://i.stack.imgur.com/BC9wd.png</a></p>
<p>How can I solve this problem? Do you know another solution to reach my goal? I'm new in MondoDB and Python </p>
</div>
<div class="post-text" itemprop="text">
<p>From the error, I infer that <code>idi</code> is a dictionary. A dictionary cannot be hashed and therefore cannot be used as a key to another dictionary. It seems that your <code>find</code> query is returning a a set of dictionaries.</p>
</div>
<div class="post-text" itemprop="text">
<p>You are trying to store a dictionary as key for another dictionary and that is not allowed because dictionary is not hashable. See <a href="https://docs.python.org/3/library/stdtypes.html#mapping-types-dict" rel="nofollow">below</a> </p>
<blockquote>
<p>A dictionaryâ€™s keys are almost arbitrary values. Values that are not
  hashable, that is, values containing lists, dictionaries or other
  mutable types (that are compared by value rather than by object
  identity) may not be used as keys.</p>
</blockquote>
<p>Basically you have </p>
<pre><code>nodi = {} //which is a dictionary 
</code></pre>
<p>And below code tries to store dictionary <code>idi</code> as key of nodi </p>
<pre><code>for idi in newList:
    nodi[idi] = i
</code></pre>
<p>Because <code>idi</code> is a dictionary (as shown below) you get error</p>
<pre><code>{"uid": xxxxxx} where xxx is numbers
</code></pre>
<p>if you replace the following</p>
<pre><code>nodi[idi] = i 
</code></pre>
<p>With </p>
<pre><code>nodi[i] = idi
</code></pre>
<p>Then you won't get an error because <code>i</code> is hashable (just like string unlike list and dictionary). </p>
<p>You might then need to change the way you add node to G, so something like: </p>
<p><code>G.add_node(nodi[i])</code> where <code>nodi[i]</code> is nothing but <code>{"uid": xxxxx}</code></p>
</div>
<span class="comment-copy">There is absolutely no need for a screen shot, copy the error message to your original question and make sure it shows dict or even better provide details about that type. Obviously it is missing hash support.</span>
