<div class="post-text" itemprop="text">
<p>Python recognizes the following as instruction which defines file's encoding:</p>
<pre><code># -*- coding: utf-8 -*-
</code></pre>
<p>I definitely saw this kind of instructions before (<code>-*- var: value -*-</code>). Where does it come from? What is the full specification, e.g. can the value include spaces, special symbols, newlines, even <code>-*-</code> itself?</p>
<p>My program will be writing plain text files and I'd like to include some metadata in them using this format.</p>
</div>
<div class="post-text" itemprop="text">
<p>This way of specifying the encoding of a Python file comes from <a href="http://www.python.org/dev/peps/pep-0263/" rel="noreferrer">PEP 0263 - Defining Python Source Code Encodings</a>.</p>
<p>It is also recognized by GNU Emacs (see <a href="http://www.network-theory.co.uk/docs/pylang/Encodingdeclarations.html" rel="noreferrer">Python Language Reference, 2.1.4 Encoding declarations</a>), though I don't know if it was the first program to use that syntax.</p>
</div>
<div class="post-text" itemprop="text">
<p>This is so called file local variables, that are understood by Emacs and set correspondingly.  See corresponding <a href="https://www.gnu.org/software/libtool/manual/emacs/Specifying-File-Variables.html#Specifying-File-Variables" rel="noreferrer">section in Emacs manual</a> - you can define them either in header or in footer of file</p>
</div>
<div class="post-text" itemprop="text">
<p>In PyCharm, I'd leave it out. It turns off the UTF-8 indicator at the bottom with a warning that the encoding is hard-coded. Don't think you need the PyCharm comment mentioned above.</p>
</div>
<span class="comment-copy">This is easier to remember and works in my editor, PyCharm. <code># coding: utf-8</code></span>
<span class="comment-copy">Using <code># coding: utf8</code> works out of the box with Python 2.7, even outside of PyCharm. (I use SublimeText).</span>
<span class="comment-copy"><a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Specifying-File-Variables.html" rel="nofollow noreferrer">File local variable in Emacs</a>, <a href="https://www.scintilla.org/SciTEDoc.html#Encodings" rel="nofollow noreferrer">cookie in SciTE</a>, <a href="https://docs.python.org/3/reference/lexical_analysis.html#encoding-declarations" rel="nofollow noreferrer">Encoding declarations in Python</a> and <a href="http://vimdoc.sourceforge.net/htmldoc/usr_21.html#21.6" rel="nofollow noreferrer">Modeline in Vim</a>.</span>
<span class="comment-copy">@Cbhihe This question is not about Python, not about what the instruction does or how it works. It is asking which pre-Python software invented it and if there is more to it than just file encoding.</span>
<span class="comment-copy">From what I can conclude from Emacs manual, value can be any LISP expression, particularly, a double-quoted string</span>
<span class="comment-copy">Good to know. If the answer satisfies you, why don't you accept it? :)</span>
<span class="comment-copy">Thanks for the pep link.  I was formerly under the impression that the directive was only used by the text editor.  Until now, I never knew that the python interpreter actually parsed the comment if it is present on the first two lines of the file.</span>
