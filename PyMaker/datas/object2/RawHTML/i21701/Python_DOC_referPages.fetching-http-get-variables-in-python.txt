<div class="post-text" itemprop="text">
<p>I'm trying to set up a HTTP server in a Python script. So far I got the server it self to work, with a code similar to the below, from <a href="https://stackoverflow.com/questions/2617615/slow-python-http-server-on-localhost">here</a>.</p>
<pre><code>from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer

class MyHandler(BaseHTTPRequestHandler):
    def do_GET(self):
        print("Just received a GET request")
        self.send_response(200)
        self.send_header("Content-type", "text/html")
        self.end_headers()

        self.wfile.write('Hello world')

        return

    def log_request(self, code=None, size=None):
        print('Request')

    def log_message(self, format, *args):
        print('Message')

if __name__ == "__main__":
    try:
        server = HTTPServer(('localhost', 80), MyHandler)
        print('Started http server')
        server.serve_forever()
    except KeyboardInterrupt:
        print('^C received, shutting down server')
        server.socket.close()
</code></pre>
<p>However, I need to get variables from the GET request, so if <code>server.py?var1=hi</code> is requested, I need the Python code to put <code>var1</code> into a Python variable and process it (like print it). How would I go about this? Might be a simple question to you Python pros, but this Python beginner doesn't know what to do! Thanks in advance!</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/2.7/library/urlparse.html?highlight=urllib%20parse%20parse_qs#urlparse.parse_qs" rel="nofollow noreferrer"><code>urlparse.parse_qs()</code></a></p>
<pre><code>print urlparse.parse_qs(os.environ['QUERY_STRING'])
</code></pre>
<p>Or if you care about order or duplicates, <a href="https://docs.python.org/2.7/library/urlparse.html?highlight=urllib%20parse%20parse_qs#urlparse.parse_qsl" rel="nofollow noreferrer"><code>urlparse.parse_qsl()</code></a>.</p>
<p><a href="https://docs.python.org/3/library/urllib.parse.html" rel="nofollow noreferrer"><strong>Import in Python 3:</strong></a> <code>from urllib.parse import urlparse</code></p>
</div>
<div class="post-text" itemprop="text">
<p>Import <code>urlparse</code> and do:</p>
<pre><code>def do_GET(self):
    qs = {}
    path = self.path
    if '?' in path:
        path, tmp = path.split('?', 1)
        qs = urlparse.parse_qs(tmp)
    print path, qs
</code></pre>
</div>
<span class="comment-copy">I did come across that, but I'm not sure how to integrate this... Could you give me a short example?</span>
<span class="comment-copy"><code>urlparse.parse_qs()</code> returns a dictionary. Use it as you would any other dictionary in Python.</span>
<span class="comment-copy">Just checked this answer, and I can't find where BaseHTTPServer sets environment variables. CGIHTTPServer does.</span>
<span class="comment-copy">Thank you for your answer! I love SO already! :D</span>
<span class="comment-copy">Thanks, this did the trick alright!</span>
<span class="comment-copy">One can also apply <code>parse_qs</code> to <code>urlparse(self.path).query</code> instead of splitting <i>path</i> manually.</span>
