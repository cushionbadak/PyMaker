<div class="post-text" itemprop="text">
<p>I'm trying to append a parameter <code>no_rep</code> at the end of my question url as a signal to show different views. I'm using <strong>Django 1.8</strong> and following the url pattern from askbot.</p>
<p>This is the <strong>url.py</strong>:</p>
<pre><code>url(
        (r'^%s(?P&lt;id&gt;\d+)/' % QUESTION_PAGE_BASE_URL.strip('/') +
        r'(%s)?' % r'/no-rep:(?P&lt;no_rep&gt;\w+)'),
        views.readers.question,
        name='question'
    ),
</code></pre>
<p>I'm trying to show different displays depending on the value of <code>no_rep</code> in my url.</p>
<p>This is the <strong>view</strong>:</p>
<pre><code>def question(request, id, no_rep):
    if no_rep == '1':
        request.session['no_rep'] = True
    else:
        request.session['no_rep'] = False
</code></pre>
<p>I couldn't find information on what the +,%,? do, which is probably where the problem is. Could someone explain how the regex work with the base url? When I enter the url <code>http://localhost:8000/question6/test-question/no_rep:1</code>, <code>request.session['no_rep']</code> should be set to true, but it's not. What am I missing?</p>
</div>
<div class="post-text" itemprop="text">
<p>Your url looks like this after all substitutions (%): <code>r'^question(?P&lt;id&gt;\d+)/(/no-rep:(?P&lt;no_rep&gt;\w+))?'</code>, so:<br/>
1. Missing part for <code>test-question</code><br/>
2. You have odd grouping around named group <code>no_rep</code> (which is legal, but <a href="https://docs.djangoproject.com/en/2.0/topics/http/urls/#using-unnamed-regular-expression-groups" rel="nofollow noreferrer">not recommended</a>)  </p>
<p>So for url like <code>http://localhost:8000/question6/test-question/no_rep:1</code> your url pattern should look like this:<br/>
<code>r'^%s(?P&lt;id&gt;\d+)/test-question/(?:no_rep:(?P&lt;no_rep&gt;\d+))?' % QUESTION_PAGE_BASE_URL.strip('/')</code> (you can change \d+ in the last group for \w+ if you want letters to match too).</p>
<p>About non-capturing groups <code>(?:...)</code> and meaning of + and ? you can read in the <a href="https://docs.python.org/3/library/re.html#regular-expression-syntax" rel="nofollow noreferrer">documentation</a> of Python re module.</p>
</div>
<div class="post-text" itemprop="text">
<p>Change your url patterns to something like this,<br/></p>
<pre><code>urlpatterns = [
                  url(r'question/(?P&lt;id&gt;\d+)/no-rep/(?P&lt;no_rep&gt;\w+)/', question),

              ]
</code></pre>
<p><strong>OR</strong></p>
<pre><code>QUESTION_PAGE_BASE_URL = "question"
urlpatterns = [
                  url(r'{QUESTION_PAGE_BASE_URL}/(?P&lt;id&gt;\d+)/no-rep/(?P&lt;no_rep&gt;\w+)/'.format(
                      QUESTION_PAGE_BASE_URL=QUESTION_PAGE_BASE_URL), question),

              ] + router.urls
</code></pre>
<p><br/><br/>
<strong>NOTE :</strong> <br/>It's not good idea to use <strong><code>named groups</code></strong> like <strong><code>id</code></strong> along with some <em>string or char</em> like urls, (<code>localhost:8000/question6/</code>)</p>
</div>
<span class="comment-copy">have you tried <code>http://localhost:8000/question6/test-question?no_rep=1</code>?</span>
<span class="comment-copy">When I enter that it automatically became <code>http://localhost:8000/question6/test-question/?no_rep=1</code> with the <code>/</code>, but it didn't work either.</span>
