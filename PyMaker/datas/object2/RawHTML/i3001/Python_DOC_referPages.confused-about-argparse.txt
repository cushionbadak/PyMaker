<div class="post-text" itemprop="text">
<p>I am having some trouble understanding how argparse works and I've combed through the documentation but am still having some difficulty understanding.</p>
<pre><code>def arguments():
parser = argparse.ArgumentParser(description='Test..')
parser.add_argument("-i", "--input-file", required=True, help="input file name")
parser.add_argument("-o", "--output-file", required=True, help="output file name")
parser.add_argument("-r", "--row-limit", required=True, help="row limit to split", type=int)
args = parser.parse_args()

is_valid_file(parser, args.input_file)

is_valid_csv(parser, args.input_file, args.row_limit)

return args.input_file, args.output_file, args.row_limit

def is_valid_file(parser, file_name):
"""Ensure that the input_file exists"""
if not os.path.exists(file_name):
    parser.error("The file {} does not exist".format(file_name))
    sys.exit(1)

def is_valid_csv(parser, file_name, row_limit):
"""
Ensure that the # of rows in the input_file
is greater than the row_limit.
"""
row_count = 0
for row in csv.reader(open(file_name)):
    row_count += 1
if row_limit &gt; row_count:
    parser.error("More rows than actual rows in the file")
    sys.exit(1) 
</code></pre>
<p>The code above works fine, but once I remove "--row-limit" on line 5, I get a </p>
<pre><code>Traceback (most recent call last):
 File ".\csv_split.py", line 95, in &lt;module&gt;
  arguments = arguments()
 File ".\csv_split.py", line 33, in arguments
  is_valid_csv(parser, args.input_file, args.row_limit)
AttributeError: 'Namespace' object has no attribute 'row_limit'
</code></pre>
<p>Why does removing the "--row-limit" present me with this error?</p>
</div>
<div class="post-text" itemprop="text">
<p><code>args = parser.parse_args()</code> actually adds an attribute to the namespace <code>args</code> for each <code>parser.add_argument</code> call. The name of the attribute is generated from your argument name, here <code>--row-limit</code> is transformed to <code>row_limit</code> because you can't have dashes in variable names. See the <a href="https://docs.python.org/3/library/argparse.html#parsing-arguments" rel="nofollow noreferrer">argparse documentation</a> for details.</p>
<p>So when you call <code>parser.add_argument(..., "--row-limit", ...)</code>, it creates <code>args.row_limit</code> once you invoke <code>parse_args()</code>. As <a href="https://stackoverflow.com/users/240443/amadan">Amadan</a> mentioned, you use <code>args.row_limit</code> later on in your code. But if you remove the <code>--row-limit</code> argument from the parser, the attribute  <code>row_limit</code> won't exist in <code>args</code>.</p>
</div>
<span class="comment-copy">You are wondering why when you remove the parameter it is no longer there?</span>
<span class="comment-copy">In <code>is_valid_csv(parser, args.input_file, args.row_limit)</code> you're using <code>args.row_limit</code>. If you don't parse it, it won't exist in <code>args</code>, and accessing it produces an error.</span>
<span class="comment-copy">Print <code>args</code> after parsing so you have a clear idea of the the parser has done.</span>
<span class="comment-copy">Makes total sense now, thank you Carsten and Amadan!</span>
