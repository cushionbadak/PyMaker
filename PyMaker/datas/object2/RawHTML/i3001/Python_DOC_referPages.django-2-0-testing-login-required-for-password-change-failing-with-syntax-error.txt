<div class="post-text" itemprop="text">
<p>I am working through the tutorial <a href="https://simpleisbetterthancomplex.com/series/beginners-guide/1.11/" rel="nofollow noreferrer">https://simpleisbetterthancomplex.com/series/beginners-guide/1.11/</a> from Vitor Freitas.</p>
<p>I am using Django 2.0.7 for this task. I know that the tutorial was written for 1.11 and I have been fixing any challenges that have come up during the process. Currently I am having issues with one test that is failing to run due to this error</p>
<blockquote>
<pre><code>====================================================================== ERROR: accounts.tests.test_view_password_change
</code></pre>
<p>(unittest.loader._FailedTest)
  ---------------------------------------------------------------------- ImportError: Failed to import test module:
  accounts.tests.test_view_password_change Traceback (most recent call
  last):   File "/usr/lib/python3.5/unittest/loader.py", line 428, in
  _find_test_path
      module = self._get_module_from_name(name)   File "/usr/lib/python3.5/unittest/loader.py", line 369, in
  _get_module_from_name
      <strong>import</strong>(name)   File "/home/lance/dev/proj/accounts/tests/test_view_password_change.py",
  line 44
      self.assertRedirects(response, f'{login_url}?next={url}')</p>
</blockquote>
<p>The test code is question looks like this</p>
<pre><code>class PasswordChangeTests(TestCase):
    def setUp(self):
        username = 'john'
        password = 'secret123'
        user = User.objects.create_user(username=username, email='john@doe.com', password=password)
        url = reverse('password_change')
        self.client.login(username=username, password=password)
        self.response = self.client.get(url)


class LoginRequiredPasswordChangeTests(TestCase):
    def test_redirection(self):
        url = reverse('password_change')
        login_url = reverse('login')
        response = self.client.get(url)
        self.assertRedirects(response, f'{login_url}?next={url}')
</code></pre>
<p>The invalid syntax seems to come from the last line </p>
<blockquote>
<p>self.assertRedirects(response, f'{login_url}?next={url}')</p>
</blockquote>
<p>Can someone help me out as to why this is invalid?
As I understand it the test is looking for the pattern that is listed in the single quotes and I have tested that it is there.</p>
<p>I can't understand why the single quotes is incorrect.</p>
</div>
<div class="post-text" itemprop="text">
<p><code>f</code>-strings were introduced in Python 3.6. They are a syntax error in earlier versions. Might that be your problem?</p>
</div>
<div class="post-text" itemprop="text">
<p>Since the <a href="https://docs.python.org/3/whatsnew/3.6.html#pep-498-formatted-string-literals" rel="nofollow noreferrer"><code>F string literals</code></a> is implemented <strong><code>Python 3.6</code></strong> onwards. So make sure you are using <code>Python 3.6+</code>.
<br/><br/>You can also use <code>str.format()</code> method as,<br/>
<strong><code>self.assertRedirects(response, '{}?next={}'.format(login_url, url))</code></strong></p>
</div>
<span class="comment-copy">f-strings were introduced in Python 3.6. They are a syntax error in earlier versions. Might that be your problem?</span>
<span class="comment-copy">I just checked and I believe that you are correct. Can you create an answer so I can credit you with it?</span>
<span class="comment-copy">Answer created as requested</span>
<span class="comment-copy">Thanks for the extra tip. I will try your solution to change the test URL. I realised my virtualenv was on 3.5 and updated to 3.6</span>
