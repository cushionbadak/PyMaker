<div class="post-text" itemprop="text">
<p>I have a huge folder with a lot of documents (<code>.txt</code>files). I would like to check if there are some identical content of some files. The filenames are all unique.</p>
<p>I know how to compare two files as follow:</p>
<pre><code>&gt;&gt;&gt; import filecmp
&gt;&gt;&gt; filecmp.cmp('file1.txt', 'file1.txt')
True
&gt;&gt;&gt; filecmp.cmp('file1.txt', 'file2.txt')
False
</code></pre>
<p>But I would like to compare all files at once. Does somebody know how I could do that?</p>
</div>
<div class="post-text" itemprop="text">
<p>Here's a simple way to classify all your .txt files by MD5 sum:</p>
<pre><code>import glob
import hashlib
import json
from collections import defaultdict


def md5(filename):
    hash_md5 = hashlib.md5()
    with open(filename, "rb") as f:
        for chunk in iter(lambda: f.read(4096), b""):
            hash_md5.update(chunk)
    return hash_md5.hexdigest()


dct = defaultdict(list)

for filename in glob.iglob('**/*.txt', recursive=True):
    dct[md5(filename)].append(filename)
</code></pre>
<p>So if you just want to check which ones will have the same content you just query like:</p>
<pre><code>print([v for k, v in dct.items() if len(v) &gt; 1])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You don't need python for that, just run:</p>
<pre><code>md5sum * | sort &gt;filelist.txt
</code></pre>
<p>and then see if the consecutive files have the same MD5 sum.</p>
</div>
<span class="comment-copy">1) compute hash or checksum of all files. 2) use <a href="https://docs.python.org/3/library/collections.html#collections.Counter" rel="nofollow noreferrer">collections.Counter</a> to count occurences. 3) keep entries with a count â‰¥ 2.</span>
