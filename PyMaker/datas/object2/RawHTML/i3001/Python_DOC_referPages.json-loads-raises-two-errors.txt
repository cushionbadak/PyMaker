<div class="post-text" itemprop="text">
<p>This fragment of code raises errors. </p>
<pre><code>while True:
data = s.recv(1024)
js = json.loads(data)
print js

&gt; Traceback (most recent call last):
  File "test.py", line 10, in &lt;module&gt;
    js = json.loads(data)
  File "/usr/lib/python2.7/json/__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python2.7/json/decoder.py", line 367, in decode
    raise ValueError(errmsg("Extra data", s, end, len(s)))
ValueError: Extra data: line 9 column 3 - line 9 column 4 (char 303 - 304)
</code></pre>
<p>Here is the json: </p>
<pre><code>{"B49":{
        "Time":1533208501.720,
        "PacketID":2358,
        "Loss":0,
        "RSSI":-57,
        "*****":[50.4,49.8,49.8,51,51.7,49.1,49.8,49.8,50.1,48.5],
        "*****":[-10.1,-9.8,-9.8,-7.9,-11.4,-9.2,-9.8,-10.1,-9.5,-9.2],
        "*****":[-23.6,-21.2,-21.3,-20.9,-20.5,-22.4,-23.8,-23.4,-21.5,-23.9]
}}
</code></pre>
<p>I don't understand because when I try <code>type(data)</code> I get <code>type&lt;str&gt;</code> which means that I am passing a string argument as this method requires. </p>
</div>
<div class="post-text" itemprop="text">
<p>The error you see shows exactly that there is some character after closing <code>}</code> in a <code>data</code> buffer in which you received that json.</p>
<p>Here is my test:</p>
<pre><code>In [3]: x = '''{"B49":{
"Time":1533208501.720,
"PacketID":2358,
"Loss":0,
"RSSI":-57,
"MagnetometerX":[50.4,49.8,49.8,51,51.7,49.1,49.8,49.8,50.1,48.5],
"MagnetometerY":[-10.1,-9.8,-9.8,-7.9,-11.4,-9.2,-9.8,-10.1,-9.5,-9.2],
"MagnetometerZ":[-23.6,-21.2,-21.3,-20.9,-20.5,-22.4,-23.8,-23.4,-21.5,-23.9]
}}'''

In [4]: json.loads(x)
Out[4]:
{'B49': {'Time': 1533208501.72,
'PacketID': 2358,
'Loss': 0,
'RSSI': -57,
'MagnetometerX': [50.4, 49.8, 49.8, 51, 51.7, 49.1, 49.8, 49.8, 50.1, 48.5],
'MagnetometerY': [-10.1,
-9.8,
-9.8,
-7.9,
-11.4,
-9.2,
-9.8,
-10.1,
-9.5,
-9.2],
'MagnetometerZ': [-23.6,
-21.2,
-21.3,
-20.9,
-20.5,
-22.4,
-23.8,
-23.4,
-21.5,
-23.9]}}
</code></pre>
<p>So this works correctly. But look what happens, when I add <code>\0</code> at the end of json data:</p>
<pre><code>In [5]: x1= '''{"B49":{
"Time":1533208501.720,
"PacketID":2358,
"Loss":0,
"RSSI":-57,
"MagnetometerX":[50.4,49.8,49.8,51,51.7,49.1,49.8,49.8,50.1,48.5],
"MagnetometerY":[-10.1,-9.8,-9.8,-7.9,-11.4,-9.2,-9.8,-10.1,-9.5,-9.2],
"MagnetometerZ":[-23.6,-21.2,-21.3,-20.9,-20.5,-22.4,-23.8,-23.4,-21.5,-23.9]
}}\0'''

In [6]: json.loads(x)
---------------------------------------------------------------------------
JSONDecodeError                           Traceback (most recent call last)
&lt;ipython-input-18-f896d9a0a2ca&gt; in &lt;module&gt;()
----&gt; 1 json.loads(x)

~\AppData\Local\Continuum\anaconda3\lib\json\__init__.py in loads(s, encoding, cls, object_hook, parse_float, parse_int, parse_constant, object_pairs_hook, **kw)
352             parse_int is None and parse_float is None and
353             parse_constant is None and object_pairs_hook is None and not kw):
--&gt; 354         return _default_decoder.decode(s)
355     if cls is None:
356         cls = JSONDecoder

~\AppData\Local\Continuum\anaconda3\lib\json\decoder.py in decode(self, s, _w)
340         end = _w(s, end).end()
341         if end != len(s):
--&gt; 342             raise JSONDecodeError("Extra data", s, end)
343         return obj
344

JSONDecodeError: Extra data: line 9 column 3 (char 290)
</code></pre>
<p>This means that if you have additional null character at the end of received json or any other character, you will get this error. It is quite possible that you receive that json using <a href="https://docs.python.org/3/library/socket.html#socket.socket.recv" rel="nofollow noreferrer">socket.recv</a> from external system with this trailing 0 and you should get rid of it before trying to parse as json.</p>
</div>
<div class="post-text" itemprop="text">
<p>Apparently the last character was unrecognised and couldn't be passed as argument to the json.loads method so I did like so to get rid of the last character of the data str object and then it worked fine. </p>
<pre><code>while True:
    data = s.recv(1024)
    j=json.loads(data [0:(len(data)-1)]) #trunking the last character of data otherwise is not a valid argument for loads
</code></pre>
</div>
<span class="comment-copy">This error probably means that your input json has incorrect format. Probably somethin is wrong in line 9 and column 3 of input json. Please download that json and check manually what is wrong with it.</span>
<span class="comment-copy">Here is the Json file:</span>
<span class="comment-copy">{"B49":{         "Time":1533208501.720,         "PacketID":2358,         "Loss":0,         "RSSI":-57,         "MagnetometerX":[50.4,49.8,49.8,51,51.7,49.1,49.8,49.8,50.1,48.5],         "MagnetometerY":[-10.1,-9.8,-9.8,-7.9,-11.4,-9.2,-9.8,-10.1,-9.5,-9.2],         "MagnetometerZ":[-23.6,-21.2,-21.3,-20.9,-20.5,-22.4,-23.8,-23.4,-21.5,-23.9] }}</span>
<span class="comment-copy">JSON cannot be loaded in batches. First donwload the whole data record, then convert it. To process multiple JSON data records in a loop, some kind of delimiter must be used.</span>
<span class="comment-copy">It's real time data stored in the buffer data which apparently contains json (type&lt;str&gt;) + other invalid characters ...</span>
<span class="comment-copy">I think you're right but how can I filter what's in the buffer only to get the json ? I don't understand the doc. about this issue</span>
<span class="comment-copy">@JulienBlomme: get the data, make sure it is converted to string (as it is probably byte object), and then try removing leading and trailing white characters, for example using <a href="https://docs.python.org/2/library/stdtypes.html#str.strip" rel="nofollow noreferrer">strip</a> function.</span>
<span class="comment-copy">@JulienBlomme: you asked the question with all json fields included, you got my answer which actually shows exactly what is wrong with your code, and on top of this you created your own and did not even care to upvote or comment mine. And then you ask me to edit my because you think "MagnetometerX", "MagnetometerY" is <b>confidential</b>? Why should I care about that at all?</span>
<span class="comment-copy">I am sorry I am not familiar with this website good practices ! I voted up but as you probably can see on my profile I got 5 reput and I need at least 15 of reput for making a vote up. I'm an intern in a company in R&amp;D and I have to keep some private datas and I would apprecialte I could replace some of them by just some * if you dont mind ?</span>
