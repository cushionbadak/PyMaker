<div class="post-text" itemprop="text">
<p>Below is a scraper that uses Beautiful Soup to scrape physician information off of this <a href="https://sportmedbc.com/practitioners" rel="nofollow noreferrer">webpage</a>. As you can see from the html code directly below, each physician has an individual profile on the webpage that displays the physician's name, clinic, profession, taxonomy, and city. </p>
<pre><code>&lt;div class="views-field views-field-title practitioner__name" &gt;&lt;a href="/practitioners/41824"&gt;Marilyn Adams&lt;/a&gt;&lt;/div&gt;
              &lt;div class="views-field views-field-field-pract-clinic practitioner__clinic" &gt;&lt;a href="/clinic/fortius-sport-health"&gt;Fortius Sport &amp;amp; Health&lt;/a&gt;&lt;/div&gt;
              &lt;div class="views-field views-field-field-pract-profession practitioner__profession" &gt;Physiotherapist&lt;/div&gt;
              &lt;div class="views-field views-field-taxonomy-vocabulary-5 practitioner__region" &gt;Fraser River Delta&lt;/div&gt;
              &lt;div class="views-field views-field-city practitioner__city" &gt;&lt;/div&gt;
</code></pre>
<p>As you can see from the sample html code, the physician profiles occasionally have information missing. If this occurs, I would like the scraper to print 'N/A'. I need the scraper to print 'N/A' because I would eventually like to put each div class category (name, clinic, profession, etc.) into an array where the lengths of each column are exactly the same so I can properly export the data to a CSV file. Here is an example of what I want the output to look like compared to  what is actually showing up.</p>
<pre><code>Actual            Expected

[Names]            [Names]
Greg               Greg
Bob                Bob

[Clinic]           [Clinic]
Sport/Health       Sport/Health
                   N/A

[Profession]       [Profession]
Physical Therapist  Physical Therapist
Physical Therapist  Physical Therapist

[Taxonomy]          [Taxonomy]
Fraser River        Fraser River
                    N/A

[City]              [City]
Vancouver           Vancouver
Vancouver           Vancouver
</code></pre>
<p>I have tried writing an if statement nested within each for loop, but the code does not seem to be looping correctly as the "N/A" only shows up once for each div class section. Does anyone know how to properly nest an if statement with a for loop so I am getting the proper amount of "N/As" in each column? Thanks in advance!</p>
<pre><code>import requests
import re
from bs4 import BeautifulSoup

page=requests.get('https://sportmedbc.com/practitioners')
soup=BeautifulSoup(page.text, 'html.parser')

#Find Doctor Info

for doctor in soup.find_all('div',attrs={'class':'views-field views-field-title practitioner__name'}):
    for a in doctor.find_all('a'):
        print(a.text)

for clinic_name in soup.find_all('div',attrs={'class':'views-field views-field-field-pract-clinic practitioner__clinic'}):
    for b in clinic_name.find_all('a'):
        if b==(''):
            print('N/A')

profession_links=soup.findAll('div',attrs={'class':'views-field views-field-field-pract-profession practitioner__profession'})
for profession in profession_links:
    if profession.text==(''):
        print('N/A')
    print(profession.text)

taxonomy_links=soup.findAll('div',attrs={'class':'views-field views-field-taxonomy-vocabulary-5 practitioner__region'})
for taxonomy in taxonomy_links:
    if taxonomy.text==(''):
        print('N/A')
    print(taxonomy.text)

city_links=soup.findAll('div',attrs={'class':'views-field views-field-taxonomy-vocabulary-5 practitioner__region'})
for city in city_links:
    if city.text==(''):
        print('N/A')
    print(city.text)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>For this problem you can use <code>ChainMap</code> from <code>collections</code> module (<a href="https://docs.python.org/3/library/collections.html#collections.ChainMap" rel="nofollow noreferrer">docs here</a>). That way you can define your default values, in this case <code>'n/a'</code> and only grab information that exists for each doctor:</p>
<pre><code>from bs4 import BeautifulSoup
import requests
from collections import ChainMap

url = 'https://sportmedbc.com/practitioners'
soup = BeautifulSoup(requests.get(url).text, 'lxml')

def get_data(soup):
    default_data = {'name': 'n/a', 'clinic': 'n/a', 'profession': 'n/a', 'region': 'n/a', 'city': 'n/a'}

    for doctor in soup.select('.view-practitioners .practitioner'):
        doctor_data = {}

        if doctor.select_one('.practitioner__name').text.strip():
            doctor_data['name'] = doctor.select_one('.practitioner__name').text

        if doctor.select_one('.practitioner__clinic').text.strip():
            doctor_data['clinic'] = doctor.select_one('.practitioner__clinic').text

        if doctor.select_one('.practitioner__profession').text.strip():
            doctor_data['profession'] = doctor.select_one('.practitioner__profession').text

        if doctor.select_one('.practitioner__region').text.strip():
            doctor_data['region'] = doctor.select_one('.practitioner__region').text

        if doctor.select_one('.practitioner__city').text.strip():
            doctor_data['city'] = doctor.select_one('.practitioner__city').text

        yield ChainMap(doctor_data, default_data)

for doctor in get_data(soup):
    print('name:\t\t', doctor['name'])
    print('clinic:\t\t',doctor['clinic'])
    print('profession:\t',doctor['profession'])
    print('city:\t\t',doctor['city'])
    print('region:\t\t',doctor['region'])
    print('-' * 80)
</code></pre>
<p>Prints:</p>
<pre><code>name:        Jaimie Ackerman
clinic:      n/a
profession:  n/a
city:        n/a
region:      n/a
--------------------------------------------------------------------------------
name:        Marilyn Adams
clinic:      Fortius Sport &amp; Health
profession:  Physiotherapist
city:        n/a
region:      Fraser River Delta
--------------------------------------------------------------------------------
name:        Mahsa Ahmadi
clinic:      Wellpoint Acupuncture (Sports Medicine)
profession:  Acupuncturist
city:        Vancouver
region:      Vancouver &amp; Sea to Sky
--------------------------------------------------------------------------------
name:        Tracie Albisser
clinic:      Pacific Sport Northern BC, Tracie Albisser
profession:  Strength and Conditioning Specialist, Exercise Physiologist
city:        n/a
region:      Cariboo - North East
--------------------------------------------------------------------------------
name:        Christine Alder
clinic:      n/a
profession:  n/a
city:        Vancouver
region:      Vancouver &amp; Sea to Sky
--------------------------------------------------------------------------------
name:        Steacy Alexander
clinic:      Go! Physiotherapy Sports and Wellness Centre
profession:  Physiotherapist
city:        Vancouver
region:      Vancouver &amp; Sea to Sky
--------------------------------------------------------------------------------
name:        Page Allison
clinic:      AET Clinic, .
profession:  Athletic Therapist
city:        Victoria
region:      Vancouver Island - Central Coast
--------------------------------------------------------------------------------
name:        Dana Alumbaugh
clinic:      n/a
profession:  Podiatrist
city:        Squamish
region:      Vancouver &amp; Sea to Sky
--------------------------------------------------------------------------------
name:        Manouch Amel
clinic:      Mountainview Kinesiology Ltd.
profession:  Strength and Conditioning Specialist
city:        Anmore
region:      Vancouver &amp; Sea to Sky
--------------------------------------------------------------------------------
name:        Janet Ames
clinic:      Dr. Janet Ames
profession:  Physician
city:        Prince George
region:      Cariboo - North East
--------------------------------------------------------------------------------
name:        Sandi Anderson
clinic:      n/a
profession:  n/a
city:        Coquitlam
region:      Fraser Valley
--------------------------------------------------------------------------------
name:        Greg Anderson
clinic:      University of the Fraser Valley
profession:  Exercise Physiologist
city:        Mission
region:      Fraser Valley
--------------------------------------------------------------------------------
</code></pre>
<p><strong>EDIT:</strong></p>
<p>For getting the output in columns, you can use this example:</p>
<pre><code>def print_data(header_text, data, key):
    print(header_text)
    for d in data:
        print(d[key])
    print()

data = list(get_data(soup))
print_data('[Names]', data, 'name')
print_data('[Clinic]', data, 'clinic')
print_data('[Profession]', data, 'profession')
print_data('[Taxonomy]', data, 'region')
print_data('[City]', data, 'city')
</code></pre>
<p>This prints:</p>
<pre><code>[Names]
Jaimie Ackerman
Marilyn Adams
Mahsa Ahmadi
Tracie Albisser
Christine Alder
Steacy Alexander
Page Allison
Dana Alumbaugh
Manouch Amel
Janet Ames
Sandi Anderson
Greg Anderson

[Clinic]
n/a
Fortius Sport &amp; Health
Wellpoint Acupuncture (Sports Medicine)
Pacific Sport Northern BC, Tracie Albisser
n/a
Go! Physiotherapy Sports and Wellness Centre
AET Clinic, .
n/a
Mountainview Kinesiology Ltd.
Dr. Janet Ames
n/a
University of the Fraser Valley

[Profession]
n/a
Physiotherapist
Acupuncturist
Strength and Conditioning Specialist, Exercise Physiologist
n/a
Physiotherapist
Athletic Therapist
Podiatrist
Strength and Conditioning Specialist
Physician
n/a
Exercise Physiologist

[Taxonomy]
n/a
Fraser River Delta
Vancouver &amp; Sea to Sky
Cariboo - North East
Vancouver &amp; Sea to Sky
Vancouver &amp; Sea to Sky
Vancouver Island - Central Coast
Vancouver &amp; Sea to Sky
Vancouver &amp; Sea to Sky
Cariboo - North East
Fraser Valley
Fraser Valley

[City]
n/a
n/a
Vancouver
n/a
Vancouver
Vancouver
Victoria
Squamish
Anmore
Prince George
Coquitlam
Mission
</code></pre>
</div>
<span class="comment-copy">Could you add expected output vs. actual output? That would be very helpful, though not strictly necessary.</span>
<span class="comment-copy">Not a problem! Just made those edits. Thanks!</span>
<span class="comment-copy">That worked perfectly! Thanks for the help Andrej! I've never used ChainMap before so this was very helpful!</span>
