<div class="post-text" itemprop="text">
<p>I am searching for files in a path but some subfolders are empty. Therefore an exception should be used.</p>
<p>If an encounter with an empty folder takes place this error occurs.</p>
<blockquote>
<p>FionaValueError: No dataset found at path
  '/Users\user\Desktop\testn\43003\CBOUND' using drivers: *</p>
</blockquote>
<p>So I made an exception for this error:</p>
<pre><code>folder = Path(r"C:\Users\user\Desktop\testn")
shapefiles =glob('/*/*/Desktop/testn/*/*')
#shapefiles =glob('/*/*/Desktop/testm/*/*,recursive = True')

shapefiles
try:
    gdf = pandas.concat([
    geopandas.read_file(shp)
    for shp in shapefiles
    ],sort=True).pipe(geopandas.GeoDataFrame)
    gdf.to_file(folder / 'compiled.shp')
except FionaValueError as ex:
    if shp==[]: #if subfolder is empty print name of folder and subfolder is empty
        print(shp + 'is empty')
</code></pre>
<p>and gives</p>
<pre><code>NameError: name 'FionaValueError' is not defined
</code></pre>
<p>So what I need is:</p>
<p>1.Print the name of the folder and subfolder that is empty </p>
<p>2.Fix the error that is not recognized in the exception.</p>
</div>
<div class="post-text" itemprop="text">
<p>You should import this error - also see the <a href="http://toblerity.org/fiona/fiona.html" rel="nofollow noreferrer">docs</a>:</p>
<pre><code>from fiona.errors import FionaValueError
</code></pre>
<p>To check if a folder is empty you can use a pattern as:</p>
<pre><code>if not os.listdir(path):
    print(f'{path} is empty')
</code></pre>
<p>To print the actual empty paths you can rewrite the list comprehension to a standard loop:</p>
<pre><code>from fiona.errors import FionaValueError
import os
import glob
import geopandas as gpd
import pandas as pd 
import path

folder = path.Path(r"C:\Users\user\Desktop\testn")
shapefiles = []
for shpfile in glob.iglob('/*/*/Desktop/testn/*/*'):
    try:
        shapefiles.append(geopandas.read_file(shpfile))
    except FionaValueError as ex:
        if not os.listdir(shpfile):
            print(f'{shpfile} is empty')

gdf = pd.concat(shapefiles, sort=True).pipe(gpd.GeoDataFrame)
gdf.to_file(folder / 'compiled.shp')
</code></pre>
</div>
<span class="comment-copy">You need to import FionaValueError from wherever it is defined.</span>
<span class="comment-copy">You could also check if the folder is empty before working on it. This can be done with os.listdir (<a href="https://docs.python.org/3/library/os.html" rel="nofollow noreferrer">docs.python.org/3/library/os.html</a>).</span>
<span class="comment-copy">can you also help with the first subquestion? <code>1.Print the name of the folder and subfolder that is empty. and check if it is empty  </code></span>
<span class="comment-copy">Yes but what about using it in the loop I have and through the glob process? Check the code I have posted to see the specific case.</span>
<span class="comment-copy">says: AttributeError: 'str' object has no attribute 'Path'</span>
<span class="comment-copy">haha apologies, overused a name.</span>
<span class="comment-copy">Do you know why this isn't working? <code>for shpfile in glob.glob('/*/*/Desktop/testm/** ,recursive = True'):</code></span>
