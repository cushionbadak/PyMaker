<div class="post-text" itemprop="text">
<p>I have an old file written using python2, which contains things like <code>148191387849281587952L</code>.
When I try to read it (using <a href="https://docs.python.org/3/library/ast.html" rel="nofollow noreferrer"><code>ast.literal_eval</code></a>) in python3, I, naturally, get <code>SyntaxError: invalid syntax</code>.</p>
<p>Is there anything I could do to read the file into python3?</p>
<p>PS. The only solutions I see at this time require modifying the file:</p>
<ol>
<li><p>Convert to JSON: read the file into python2, write it using json, then read into python3 using json.</p></li>
<li><p>Remove the offending <code>L</code> using <code>sed -i 's/([0-9]+)L/\1/g'</code>.</p></li>
<li><p>Convert the file using <a href="https://docs.python.org/3.7/library/2to3.html" rel="nofollow noreferrer"><code>2to3</code></a> (suggested by @user3080953).</p></li>
</ol>
<p>Is there anything better?</p>
</div>
<div class="post-text" itemprop="text">
<p>After your clarification, there is a simple answer:</p>
<p>No, you cannot modify <code>ast.leteral_eval()</code> or the python interpreter to be "backwards compatible" with the <code>L</code> syntax. </p>
</div>
<span class="comment-copy">I like the idea of using a version-agnostic serialization approach, such as JSON, but I think your solution #1 seems a little roundabout. It sounds like your idea is "write the file using python2, then read it in python2, then write it with json, then read it in python 3 using json", it seems like it would be easier to modify your original program so it writes json in the first place. That'll save you two steps.</span>
<span class="comment-copy">You shouldn't have a file with python object representations in first place - they are not a reliable storage method!</span>
<span class="comment-copy">@Kevin: I have a bunch of old files written by python2, and I need to read them into python3</span>
<span class="comment-copy">@nosklo: <a href="https://stackoverflow.com/q/45681702/850781">JSON takes up too much screen real estate</a> ;-) but you are right, JSON is, alas, the way to go...</span>
<span class="comment-copy">@sds time to put those ultrawide monitors to use</span>
<span class="comment-copy">(Nor would I consider it to be a good idea, changing the interpreter in order to read  external data)</span>
