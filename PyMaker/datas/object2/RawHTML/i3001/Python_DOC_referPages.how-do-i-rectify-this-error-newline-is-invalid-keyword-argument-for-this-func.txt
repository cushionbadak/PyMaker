<div class="post-text" itemprop="text">
<p>I'm currently working with raspberry pi and using DHT11 to read temperature and humidity values every second. I have to save these values into a database in real time. Here's my code that showing sensor data every second. </p>
<pre><code>import RPi.GPIO as GPIO
import dht11
import time
import datetime
import csv
import os


# initialize GPIO
GPIO.setwarnings(False)
GPIO.setmode(GPIO.BCM)
GPIO.cleanup()

instance = dht11.DHT11(pin=dht11_pin)
with open('file_name.csv', 'w', newline='') as csvfile:
    field_names = ['Date', 'Time', 'Status', 'Temperature', 'Humidity']
    writer = csv.DictWriter(csvfile, fieldnames=field_names)
    writer.writerow(
        {'Date': 'Date', 'Time': 'Time',
         'Status': 'Status', 'Temperature': 'Temperature', 'Humidity': 'Humidity'})

    while True:

        cnt += 1
        if cnt%limit_sec == 0 or cnt == 1:

            result = instance.read()
            if result.is_valid():

                if previous_temperature != result.temperature or previous_humidity != result.humidity:

                    previous_temperature = result.temperature
                    previous_humidity = result.humidity

                    counter += 1
                    rightnow = datetime.datetime.now()

                    if result.humidity&gt;=40:
                        status = 'Your plant is on the good condition.'
                        print(str(counter)+". Last valid input: " )
                        print("Date: " + rightnow.strftime("%d/%m/%Y"))
                        print("Time: " + rightnow.strftime("%H:%M:%S"))
                        print("Status: Your plant is on the good condition.")
                        print("Temperature: %d C" % result.temperature)
                        print("Humidity: %d %%" % result.humidity)
                        print("*******************************************")


                    else:
                        status = 'Your plant is on the bad condition. Please open the water supply.'
                        print(str(counter)+". Last valid input: " )
                        print("Date: " + rightnow.strftime("%d/%m/%Y"))
                        print("Time: " + rightnow.strftime("%H:%M:%S"))
                        print("Status: Your plant is on the bad condition. Please open the water supply.")
                        print("Temperature: %d C" % result.temperature)
                        print("Humidity: %d %%" % result.humidity)
                        print("*******************************************")
                    writer.writerow(
                        {'Date': rightnow.strftime("%d/%m/%Y"), 'Time': rightnow.strftime("%H:%M:%S"),
                         'Status': status, 'Temperature':result.temperature, 'Humidity': result.humidity})
            else:
                print "Invalid result!"
                pass

        time.sleep(sleep_time)
</code></pre>
<p>When I run the script I get the following error:
<a href="https://i.stack.imgur.com/8j4GU.png" rel="nofollow noreferrer"><img alt="When I run the script I get the following error:" src="https://i.stack.imgur.com/8j4GU.png"/></a></p>
</div>
<div class="post-text" itemprop="text">
<p>Check if you are using Python 3. It might be that you are using a previous version of Python that does not support newline (Python 2 and below). Newline argument was added on Python 3. <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer">https://docs.python.org/3/library/functions.html#open</a></p>
</div>
<span class="comment-copy"><code>python -V</code> shows what?</span>
<span class="comment-copy">Please paste your error text as text, not a scaled-down screenshot.</span>
<span class="comment-copy">function 'open' clearly doesn't have 'newline' as an argument</span>
<span class="comment-copy">At any rate, it looks like you’re trying to write a mix of Python 2 code and Python 3 code that wouldn’t be valid in either version. Python 3 will give a SyntaxError for that <code>print</code> statement in the <code>else</code>; Python 2 will give errors for at least the extra keyword arguments in <code>open</code>, and maybe elsewhere. You appear to be running this code with Python 2, not 3 as you think. But with either one, you have to fix your code.</span>
<span class="comment-copy">Type <code>python -V</code> at your prompt, it will show the version of python you are using.</span>
