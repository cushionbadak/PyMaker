<div class="post-text" itemprop="text">
<p>I have an opencv python program that runs correctly and prints the values.  However when I try to write the printed values to a csv file, I am getting errors.
The following is the code:</p>
<pre><code>for testingPath in paths.list_images(args["testing"]):
    # load the image and make predictions
    image = cv2.imread(testingPath)
    boxes = detector(cv2.cvtColor(image, cv2.COLOR_BGR2RGB))
    # loop over the bounding boxes and draw them
    for b in boxes:
        (x, y, w, h) = (b.left(), b.top(), b.right(), b.bottom())
        cv2.rectangle(image, (x, y), (w, h), (0, 255, 0), 2)
        #print(basename(testingPath),"CX:"+str(x),"CY:"+str(y),"Width:"+str(w),"Height:"+str(h),brandname,"Number of brands detected: {}".format(len(boxes))) -----this prints all the required values without problem on the console
</code></pre>
<p>I tried doing this:</p>
<p>I added an argument before the for loop starts:</p>
<pre><code>ap.add_argument("-i", "--index", required=True, help="Path to directory of output")
output = open(args["index"], "w")
</code></pre>
<p>and used the loop as follows:</p>
<pre><code>for testingPath in paths.list_images(args["testing"]):
    # load the image and make predictions
    image = cv2.imread(testingPath)
    #filename = testingPath[testingPath.rfind("/") + 1:]
    boxes = detector(cv2.cvtColor(image, cv2.COLOR_BGR2RGB))
    #print(basename(testingPath), brandname,"Number of brands detected: {}".format(len(boxes)))
    # loop over the bounding boxes and draw them
    for b in boxes:
        (x, y, w, h) = (b.left(), b.top(), b.right(), b.bottom())
        cv2.rectangle(image, (x, y), (w, h), (0, 255, 0), 2)
        #print(basename(testingPath),"CX:"+str(x),"CY:"+str(y),"Width:"+str(w),"Height:"+str(h),brandname,"Number of brands detected: {}".format(len(boxes)))
        dat = str([x, y, w, h, brandname, len(boxes)])
        output.write("{},{}\n".format(testingPath, "".join(dat)))
</code></pre>
<p>The above code prints the values as follows:</p>
<pre><code>/home/mycomp/VideoExtract/28157.jpg,[83, 349, 164, 383, 'Pirelli', 1]
</code></pre>
<p>I am trying to get rid of the [] brackets.  The desired action is to write the values that gets printed into a csv / text file.</p>
</div>
<div class="post-text" itemprop="text">
<p>Writing data in CSV format is a very common task - there is a <a href="https://docs.python.org/3/library/csv.html?highlight=csv#module-csv" rel="nofollow noreferrer">library called csv</a> you could use.</p>
<p>Make your output variable a CSV writer</p>
<pre><code>output = csv.writer(open(args["index"], "w"))
</code></pre>
<p>Replace your last two lines</p>
<pre><code>dat = str([x, y, w, h, brandname, len(boxes)])
output.write("{},{}\n".format(testingPath, "".join(dat)))
</code></pre>
<p>with this line</p>
<pre><code>output.writerow((testingPath, x, y, w, h, brandname, len(boxes)))
</code></pre>
</div>
<span class="comment-copy">this sample code does not intend to make suggestions to improve code quality and/or readability.</span>
<span class="comment-copy">Thank you....This change worked.</span>
