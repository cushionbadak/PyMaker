<div class="post-text" itemprop="text">
<p>I need to count the number of characters in a given file. The problem is, I am not splitting the file properly. If my input file has content "The! dog-ate #####the,cat", I don't need the special characters in the output.
o/p: t:4 h:2 e:3 !:1 d:1 o:1 g:1 -:1 #:5.... Also, I need to remove the "-" sign and make sure that the word does not concatenate.</p>
<pre><code>    from collections import Counter
    import sys
    filename = sys.argv[1]
    reg = '[^a-zA-Z+]'
    f = open(filename, 'r')
    x = f.read().strip()
    lines=[]
    for line in x:
       line = line.strip().upper()
       if line:
           lines.append(line)
    print(Counter(lines))
</code></pre>
<p>Could someone please help me with this ?</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>re.sub</code> and remove special characters.</p>
<pre><code>import re

with open(filename) as f:
    content = re.sub('[^a-zA-Z]', '', f.read(), flags=re.M)    
counts = Counter(content)
</code></pre>
<hr/>
<p>Demo:</p>
<pre><code>In [1]: re.sub('[^a-zA-Z]', '', "The! dog-ate #####the,cat")
Out[1]: 'Thedogatethecat'

In [2]: Counter(_)
Out[2]: 
Counter({'T': 1,
         'a': 2,
         'c': 1,
         'd': 1,
         'e': 3,
         'g': 1,
         'h': 2,
         'o': 1,
         't': 3})
</code></pre>
<p>Note that if you want to count uppercase and lowercase counts together, you could convert <code>content</code> to lowercase: </p>
<pre><code>counts = Counter(content.lower())
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Simply delete the values you do not want:</p>
<pre><code>c = Counter(lines)
del c['#']
del c['-']
del c[',']
print(c)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>foo.txt</p>
<pre><code>asdas

!@#!@


asdljh


12j3l1k23j
</code></pre>
<p>From:</p>
<p><a href="https://docs.python.org/3/library/string.html#string.ascii_letters" rel="nofollow noreferrer">https://docs.python.org/3/library/string.html#string.ascii_letters</a></p>
<pre><code>import string
from collections import Counter

with open('foo.txt') as f:
    text = f.read()

filtered_text = [char for char in text if char in in string.ascii_letters]
counted = Counter(filtered_text)
print(counted.most_common())
</code></pre>
<p>Output</p>
<pre><code>[('a', 3), ('j', 3), ('s', 3), ('d', 2), ('l', 2), ('h', 1), ('k', 1)]
</code></pre>
</div>
<span class="comment-copy">Conversion of <code>ascii_letters</code> to a set before hand will improve efficiency. Lookups on strings are linear time.</span>
