<div class="post-text" itemprop="text">
<p>I'm trying to parse a webpage and create a site map using python. I've written the below piece of code -</p>
<pre><code>import urllib2
from bs4 import BeautifulSoup
mypage = "http://example.com/"
page = urllib2.urlopen(mypage)

soup = BeautifulSoup(page,'html.parser')

all_links = soup.find_all('a')

for link in all_links:
    print link.get('href')
</code></pre>
<p>The above code prints all the links in <code>example.com</code>(external and internal). </p>
<ul>
<li>I need to filter out the external links and print only the internal links, I know I can differentiate them using domain name "example.com" and "somethingelse.com" or whatever the name is, but I'm unable to the RE format to get this - or if there is any built in library that helps in achieveing this</li>
<li>Once I get all the internal links - how do I map them. For instance <code>"example.com"</code> has link to <code>"example.com/page1"</code> which has link to <code>"example.com/page3"</code>. What is the ideal way to create a map for this kind of flow ? I'm looking for a library or logic which shows <code>"example.com" -&gt; "example.com/page1" -&gt; "example.com/page3"</code> or something similar</li>
</ul>
</div>
<div class="post-text" itemprop="text">
<p>For your first question, you can use <a href="https://docs.python.org/3/library/urllib.parse.html" rel="nofollow noreferrer">urlparse</a> to parse hostnames and check the domain. Do not use hand rolled regex to do that, it is much easier with a core library like that. See:</p>
<pre><code>from urllib.parse import urlparse
parsed = urlparse(url)
hostname = parsed.hostname`
</code></pre>
<p>For your second question, your data structure looks like a graph doesn't it? You could use a custom graph data structure with nodes and links between them. Or you could use a graph database made for this purpose. Both of these solutions will be much complex for your needs though. I think it might be better to just use a dictionary data type where key is the page's URL and value is a list of links in that page for example. You can't easily follow links in this case as in a graph but it will still do the trick. You can also keep another set data type for tracking links you have visited.</p>
</div>
