<div class="post-text" itemprop="text">
<p>Is there a way to generate the offset rule string accepted by <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.resample.html" rel="nofollow noreferrer">DataFrame.resample</a> (e.g. 'T', '3W', '2D', <a href="http://pandas.pydata.org/pandas-docs/stable/timeseries.html#offset-aliases" rel="nofollow noreferrer">etc</a>) starting from a TimeDelta or another object representing a time frequency? </p>
<p>I know that DataFrame.resample can accept a TimeDelta, but I like to know how to generate the string programmatically without having to invent my own function. </p>
<pre><code>td = pd.TimeDelta('3min')
str(td)
</code></pre>
<p>Output</p>
<pre><code>'0 days 00:03:00'
</code></pre>
<p>Actually I would like to obtain an offset rule string: e.g. '3T'</p>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://docs.python.org/3/library/datetime.html#timedelta-objects" rel="nofollow noreferrer">docs</a> explain that str(t)</p>
<blockquote>
<p>Returns a string in the form [D day[s], ][H]H:MM:SS[.UUUUUU], where D is negative for negative t.</p>
</blockquote>
<p>You wanted to know if <code>timedelta</code> offers support for output like '3W' without having a user function (trivially) format its numeric output into such a format. No, it does not offer such support.</p>
<p>You may find <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DatetimeIndex.to_perioddelta.html#pandas.DatetimeIndex.to_perioddelta" rel="nofollow noreferrer">to_perioddelta()</a> helpful when you write such a function.</p>
</div>
<div class="post-text" itemprop="text">
<p>In case someone else needs to write their own function like myself, here is the code:</p>
<pre><code>def timedelta_to_string(timedelta):
    """
    Converts a pandas.Timedelta to a string rappresentation
    compatible with pandas.Timedelta constructor format
    """
    c = timedelta.components
    format = ''
    if c.days != 0:
        format += '%dD' % c.days
    if c.hours &gt; 0:
        format += '%dh' % c.hours
    if c.minutes &gt; 0:
        format += '%dm' % c.minutes
    if c.seconds &gt; 0:
        format += '%ds' % c.seconds
    if c.milliseconds &gt; 0:
        format += '%dms' % c.milliseconds
    if c.microseconds &gt; 0:
        format += '%dus' % c.microseconds
    if c.nanoseconds &gt; 0:
        format += '%dns' % c.nanoseconds
return format
</code></pre>
</div>
<span class="comment-copy">could you give an example of what you mean? maybe even link to <code>.resample</code> as well?</span>
