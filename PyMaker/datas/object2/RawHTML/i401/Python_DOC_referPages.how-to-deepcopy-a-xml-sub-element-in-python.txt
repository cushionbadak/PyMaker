<div class="post-text" itemprop="text">
<p>I am very new to XML and Python and putting things together from posts in this site and others. I am trying to deepcopy an element and append to another element using ElementTree. Starting with the input table below:  </p>
<pre><code>&lt;Company&gt;
    &lt;Identifier&gt;Benesolv&lt;/Identifier&gt;
    &lt;Employee&gt;
        &lt;EESSN&gt;111111111&lt;/EESSN&gt;
        &lt;Dependent&gt;
            &lt;SSN&gt;222222222&lt;/SSN&gt;
        &lt;/Dependent&gt;
    &lt;/Employee&gt;
&lt;/Company&gt;
</code></pre>
<p>This is the code I have that works, but not how I want it to ultimately.</p>
<pre><code>import xml.etree.ElementTree as ET
import copy

tree = ET.parse("file.xml")
root = tree.getroot()

x = copy.deepcopy(root[0])
for elem in tree.findall("Company/Employee/Dependent"):
    elem.append(copy.deepcopy(x))

tree.write("file.xml")
</code></pre>
<p>Here is the output which copies the <code>&lt;Identifier&gt;</code> element and appends to the <code>&lt;Dependent&gt;</code> element:</p>
<pre><code>&lt;Company&gt;
    &lt;Identifier&gt;Benesolv&lt;/Identifier&gt;
    &lt;Employee&gt;
        &lt;EESSN&gt;111111111&lt;/EESSN&gt;
        &lt;Dependent&gt;
            &lt;SSN&gt;222222222&lt;/SSN&gt;
        &lt;Identifier&gt;Benesolv&lt;/Identifier&gt;
    &lt;/Dependent&gt;
    &lt;/Employee&gt;
&lt;/Company&gt;
</code></pre>
<p>What I want to do is copy the  <code>&lt;EESSN&gt;</code>  element and append to the <code>&lt;Dependent&gt;</code> element, but I do not know how. I figure that I just replace the <code>root[0]</code> with something that will identify the <code>&lt;EESSN&gt;</code> element, but everything I've tried isn't working. Thanks for the help.</p>
<p>Desired output:</p>
<pre><code>&lt;Company&gt;
    &lt;Identifier&gt;Benesolv&lt;/Identifier&gt;
    &lt;Employee&gt;
        &lt;EESSN&gt;111111111&lt;/EESSN&gt;
        &lt;Dependent&gt;
            &lt;SSN&gt;222222222&lt;/SSN&gt;
        &lt;EESSN&gt;111111111&lt;/EESSN&gt;
        &lt;/Dependent&gt;
    &lt;/Employee&gt;
&lt;/Company&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You shouldn't need to deepcopy anything; just assign the <code>EESSN</code> element to a variable and <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.append" rel="nofollow noreferrer">append</a> it to <code>Dependent</code>.</p>
<p><strong>XML Input</strong></p>
<pre class="lang-xml prettyprint-override"><code>&lt;Company&gt;
    &lt;Identifier&gt;Benesolv&lt;/Identifier&gt;
    &lt;Employee&gt;
        &lt;EESSN&gt;111111111&lt;/EESSN&gt;
        &lt;Dependent&gt;
            &lt;SSN&gt;222222222&lt;/SSN&gt;
        &lt;/Dependent&gt;
    &lt;/Employee&gt;
&lt;/Company&gt;
</code></pre>
<p><strong>Python</strong></p>
<pre class="lang-py prettyprint-override"><code>import xml.etree.ElementTree as ET

tree = ET.parse("input.xml")

for employee in tree.findall("Employee"):
    eessn = employee.find("EESSN")
    for dependent in employee.findall("Dependent"):
        dependent.append(eessn)

tree.write("output.xml")
</code></pre>
<p><strong>XML Output</strong></p>
<pre class="lang-xml prettyprint-override"><code>&lt;Company&gt;
    &lt;Identifier&gt;Benesolv&lt;/Identifier&gt;
    &lt;Employee&gt;
        &lt;EESSN&gt;111111111&lt;/EESSN&gt;
        &lt;Dependent&gt;
            &lt;SSN&gt;222222222&lt;/SSN&gt;
        &lt;EESSN&gt;111111111&lt;/EESSN&gt;
        &lt;/Dependent&gt;
    &lt;/Employee&gt;
&lt;/Company&gt;
</code></pre>
</div>
<span class="comment-copy">Thank you Daniel!! Huge help. I believe this answers everything from my previous post too. Saved me man. Much appreciated.</span>
