<div class="post-text" itemprop="text">
<p>I am trying to use Python <code>defaultdict(list)</code> with complex numbers keys.
The result is that different values with the same keys are inserted to different lists, instead of to the same list. How can this be solved?</p>
<pre><code>comp_arr = np.array([5+6j, 7+8j, 5+6j, 7+8j, 8+3j])
comp_dict= defaultdict(list)

for i in comp_arr.shape:
    (comp_dict[comp_arr [i]]).append(i)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I think you are looping on the wrong thing, try using <a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow noreferrer"><code>enumerate()</code></a> for the loop:</p>
<h3>Code:</h3>
<pre><code>for i, x in enumerate(comp_arr):
    comp_dict[x].append(i)
</code></pre>
<h3>Test Code:</h3>
<pre><code>from collections import defaultdict
import numpy as np

comp_arr = np.array([5 + 6j, 7 + 8j, 5 + 6j, 7 + 8j, 8 + 3j])
comp_dict = defaultdict(list)

for i, x in enumerate(comp_arr):
    comp_dict[x].append(i)

print(comp_dict)
</code></pre>
<h3>Results:</h3>
<pre><code>defaultdict(&lt;class 'list'&gt;, {(5+6j): [0, 2], (7+8j): [1, 3], (8+3j): [4]})
</code></pre>
</div>
<span class="comment-copy">Your <code>defaultdict</code> looks fine. Your <code>for i in comp_arr.shape</code> doesn't do what you think it does. Try <code>for i in range(len(comp_arr)):</code></span>
<span class="comment-copy">Be careful about using complex and/or float values as keys.  The inexactness of floats could mean that apparently equal values will be filed as different keys.  In this simple case this doesn't seem to be a problem, but watch out in more realistic cases.</span>
<span class="comment-copy">@hpaulj indeed, this was my problem. Thanks a lot</span>
<span class="comment-copy">Thanks a lot. Can you please explain the action of looping with both i, and x?</span>
<span class="comment-copy">@AL_P, This is not looping on <code>i</code> and <code>x</code>.  It is looping on the contents of <code>comp_arr</code>.  <code>i</code> is the index of <code>x</code> in <code>comp_arr</code>.  Check the docs for <code>enumerate</code>, which I linked to.</span>
<span class="comment-copy">@AL_P: <a href="https://stackoverflow.com/q/22171558/364696">What does enumerate mean?</a></span>
