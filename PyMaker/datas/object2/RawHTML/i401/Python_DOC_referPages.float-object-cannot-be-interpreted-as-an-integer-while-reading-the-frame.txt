<div class="post-text" itemprop="text">
<p>I am trying to read the frames using <code>imageio</code> API. I have a <code>reader</code> as an object which I have received using <code>imageio.get_reader(video_path,"ffmpeg")</code>. 
I have the following frame reader function </p>
<pre><code>def read_frames(reader, frame_q, use_webcam):
    if use_webcam:
        time.sleep(15)
        frame_cnt = 0
        while True:
            #if frame_cnt % 5 == 0:    
            #    ret, frame = reader.read()
            #    cur_img = frame[:,:,::-1]
            #    frame_q.put(cur_img)
            #else:
            #    ret, frame = reader.read()
            ret, frame = reader.read()
            cur_img = frame[:,:,::-1] # bgr to rgb from opencv reader
            frame_q.put(cur_img)
            if frame_q.qsize() &gt; 100:
                time.sleep(1)
            else:
                time.sleep(DELAY/1000.)

            #print(cur_img.shape)

    else:
        #for cur_img in reader: # this is imageio reader, it uses rgb
        nframes = reader.get_length() **#getting error here**
        # if nframes == float('inf') or nframes ==float('-inf'):
        #     return float("nan")
        # return int(nframes)  

        for ii in range(nframes):
            while frame_q.qsize() &gt; 500: # so that we dont use huge amounts of memory
                time.sleep(1)
            cur_img = reader.get_next_data()
            frame_q.put(cur_img)
            #shape = cur_img.shape
            #noisy_img = np.uint8(cur_img.astype(np.float) + np.random.randn(*shape) * 20)
            #frame_q.put(noisy_img)
            if ii % 100 == 0:
                print("%i / %i frames in queue" % (ii, nframes))
        print("All %i frames in queue" % (nframes))
</code></pre>
<p>Traceback:</p>
<pre><code>    Traceback (most recent call last):
  File "/home/prashantb/anaconda3/envs/demo/lib/python3.6/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/home/prashantb/anaconda3/envs/demo/lib/python3.6/multiprocessing/process.py", line 93, in run
    self._target(*self._args, **self._kwargs)
  File "multiprocess_detect_actions.py", line 67, in read_frames
    for ii in range(nframes):
TypeError: 'float' object cannot be interpreted as an integer
</code></pre>
<p>I tried to use <code>float('inf')</code>as commented in the code but it is not useful in this case. I also tried to convert a float value to integer but it showing the same error. I would appreciate your advice on this. thank you.</p>
</div>
<div class="post-text" itemprop="text">
<p>In the release notes for the version 2.5.0 of imageio they mention some changes they introduced to the ffmpeg plugin:</p>
<p>"The reader of the ffmpeg plugin now always reports inf as the number of frames. Use reader.count_frames() to get the actual number, or estimate it from the fps and duration in the meta data."</p>
<p><a href="https://imageio.readthedocs.io/en/stable/releasenotes.html#version-2-5-0-06-02-2019" rel="nofollow noreferrer">https://imageio.readthedocs.io/en/stable/releasenotes.html#version-2-5-0-06-02-2019</a></p>
<p>That should fix your problem.</p>
</div>
<span class="comment-copy">Where is the line <code>for ii ,_ in enumerate(nframes)</code> in your code? I do not see it anywhere except in the <code>Traceback</code>.</span>
<span class="comment-copy">@AneeshPalsule sorry I have updated the traceback now</span>
<span class="comment-copy">When the argument you pass to <code>range()</code> has to be of type <code>int</code>. It looks like your <code>nframes</code> is a <code>float</code>. Could you try printing <code>nframes</code> to make sure?</span>
<span class="comment-copy">Python docs define <code>range()</code> as follows: Rather than being a function, range is actually an immutable sequence type. Source <a href="https://docs.python.org/3/library/functions.html#func-range" rel="nofollow noreferrer">docs.python.org/3/library/functions.html#func-range</a> More documentation on ranges  <a href="https://docs.python.org/3/library/stdtypes.html#typesseq" rel="nofollow noreferrer">docs.python.org/3/library/stdtypes.html#typesseq</a> says this: The arguments to the range constructor must be integers.</span>
<span class="comment-copy">nframes  is showing&gt;  inf</span>
<span class="comment-copy">@Mr.K thank you very much. I was stuck on this from last two days. Thanks a ton.</span>
