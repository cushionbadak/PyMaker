<div class="post-text" itemprop="text">
<p>I'm trying to create an 'import' and 'export' button in my program - using a slight adaptation of the technique found <a href="https://stackoverflow.com/questions/4719159/python-and-sqlite3-importing-and-exporting-databases">here</a>. However, I find that the import function will only work if the tables in the database do not already exist. Ideally, I want the function to copy all data into the tables, regardless of whether or not it exists.</p>
<p>For example, say we had "myTable" with only one entry, "myRow1". When we import "myData", which has a table named "myTable", with entries "myRow2" and "myRow3", the result should be that "myTable" will have each of the entries "myRow1", "myRow2", and "myRow3".</p>
<p>Here's my current code:</p>
<pre><code>def exportDB():
        filePath, ok = QFileDialog.getSaveFileName(self, "Export file",
                                                   "./exports", "SQL files (*.sql)")
        # QFileDialog provided by PyQt to allow user to select their own filepath
        if ok:
            with open(filePath, 'w') as file:
                for line in connection.iterdump():
                    file.write('%s\n' % line)

def importDB():
    filePath, ok = QFileDialog.getOpenFileName(self, "Import file",
                                               "./exports", "SQL files (*.sql)")
    if ok:
        with open(filePath, 'r') as file:
            data = file.read()
            cursor.executescript(data)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If you examine the export file you should expect to see a "CREATE TABLE" statement and "INSERT INTO" statements for each table/row in the database. I would expect the importDB to fail on the first conflicting "CREATE TABLE". </p>
<p>The sqlite dump functionality is not intended to sync databases. The <a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection.iterdump" rel="nofollow noreferrer">python doc</a> on iterdump says "<em>This function provides the same capabilities as the .dump command in the sqlite3 shell.</em>". The <a href="https://www.sqlite.org/cli.html" rel="nofollow noreferrer">sqlite doc</a> on .dump says it gives you what you need  "<em>to reconstruct the database at a later time, or on another machine.</em>"</p>
<p>Since the export file is a plain ol' text file, perhaps you could <em>parse</em> it into a useful sync tool. </p>
</div>
