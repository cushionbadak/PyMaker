<div class="post-text" itemprop="text">
<p>Consider the following example:</p>
<pre><code>&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; a = np.array([1.0, 2.1j])
&gt;&gt;&gt; b = np.array(a, dtype=np.float64)
/Users/goerz/anaconda3/bin/ipython:1: ComplexWarning: Casting complex values to real discards the imaginary part
  #!/Users/goerz/anaconda3/bin/python
</code></pre>
<p>How can I catch the ComplexWarning as an Exception?</p>
<p>I have tried <code>np.seterr</code>, but this has no effect (as it only relates to floating point warnings such as underflows/overflows).</p>
<p>I've also tried the <code>with warnings.catch_warnings():</code> context manager from the standard library, but it also has no effect.</p>
</div>
<div class="post-text" itemprop="text">
<p>Using <a href="https://docs.python.org/3/library/warnings.html#the-warnings-filter" rel="nofollow noreferrer">stdlib warnings filter</a> causes these to raise instead of print:</p>
<pre><code>&gt;&gt;&gt; warnings.filterwarnings(action="error", category=np.ComplexWarning)
&gt;&gt;&gt; b = np.array(a, dtype=np.float64)
ComplexWarning: Casting complex values to real discards the imaginary part
</code></pre>
<p>You can reset it to default filters with <a href="https://docs.python.org/3/library/warnings.html#warnings.resetwarnings" rel="nofollow noreferrer"><code>warnings.resetwarnings</code></a>.</p>
</div>
<span class="comment-copy"><code>numpy.seterr(all='raise')</code></span>
<span class="comment-copy">I tried that, but it has no effect. According to the <code>seterr</code> documentation it only handles floating errors (which this isn't)</span>
<span class="comment-copy">@Prune This is not a duplicate. I've seen the linked question, and as far as I can tell it only relates to floating errors (overflows etcs). A ComplexWarning is not such a floating error and is not caught be <code>seterr</code></span>
<span class="comment-copy">Then try the <code>warning</code> module in the standard library. You should put what you've tried in your question. Edit your question so I can remove my downvote.</span>
<span class="comment-copy">@MichaelGoerz: Thanks; I see the difference.  Reopened.  My apologies.</span>
