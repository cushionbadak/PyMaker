<div class="post-text" itemprop="text">
<p>I need to extract some text files compressed to .xz files using python. </p>
<p>My code is just</p>
<pre><code>import tarfile 

tarfile.open('file.xz')
</code></pre>
<p>But this fails with the error</p>
<pre><code>Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/usr/lib/python3.4/tarfile.py", line 1558, in open
    raise ReadError("file could not be opened successfully")
tarfile.ReadError: file could not be opened successfully
</code></pre>
<p>I have tried this on many .xz files and got the same result. The .xz files are not broken and can be opened fine with gnome archive manager.</p>
<p>I searched the problem and found <a href="https://bugs.python.org/issue8978" rel="nofollow">this bug report</a> but I'm not sure what to try now.</p>
</div>
<div class="post-text" itemprop="text">
<p>If it's not a <code>.tar.xz</code> file, but a <code>.xz</code> file, you need to use <a href="https://docs.python.org/3/library/lzma.html" rel="nofollow"><code>lzma</code> module</a>, not <code>tarfile</code> module:</p>
<pre><code>import lzma

with lzma.open("file.xz") as f:
    file_content = f.read()
</code></pre>
<p>To save the extracted content:</p>
<pre><code>with lzma.open("file.xz") as f, open('extracted', 'wb') as fout:
    file_content = f.read()
    fout.write(file_content)
</code></pre>
</div>
<span class="comment-copy">Shouldn't it be: <code>tarfile.open('file.xz')</code></span>
<span class="comment-copy">Is a <code>.tar.xz</code> or simply a <code>.xz</code> file?</span>
<span class="comment-copy">@hjpotter92 Yes it should be. My actual code had the ''</span>
<span class="comment-copy">@falsetru Its just .xz</span>
<span class="comment-copy">I had a similar issue and didn't find any answers on the internet, so I untar'd and retar'd the file, and that worked around the issue.</span>
<span class="comment-copy">Ah, I see. I got it mixed up because <a href="https://stackoverflow.com/questions/17217073/how-to-decompress-a-xz-file-which-has-multiple-folders-files-inside-in-a-singl">this question</a> uses tarfile but I see they where using tar.xz</span>
<span class="comment-copy">@Qwertie, Ah.. another answer by me ;)</span>
<span class="comment-copy">Just one last question. How would I save the file after extracting because extractall('.') no longer works.</span>
<span class="comment-copy">@Qwertie, I updated the answer to include it: Open file with "write" mode, and write the content there.</span>
