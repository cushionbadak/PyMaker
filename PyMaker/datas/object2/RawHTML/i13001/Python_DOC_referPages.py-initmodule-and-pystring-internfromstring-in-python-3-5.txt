<div class="post-text" itemprop="text">
<p>I want to update my Python version from 2.7 to 3.5.</p>
<p>When compiling code that uses <code>PyString_InternFromString</code> and this <code>Py_InitModule</code></p>
<p>I get error messages:</p>
<pre><code>Error   199 error C3861: 'Py_InitModule': identifier not found
Error   196 error C3861: 'PyString_InternFromString': identifier not found
</code></pre>
<p>My question is,  What is the equivalent to those identifiers in python 3.5?</p>
</div>
<div class="post-text" itemprop="text">
<p>For <code>Py_InitModule</code>, you're now using <a href="https://docs.python.org/3/c-api/module.html#c.PyModule_Create" rel="nofollow"><code>PyModule_Create</code></a>. You can see <a href="https://docs.python.org/3/extending/extending.html#a-simple-example" rel="nofollow">example usage in the tutorial example on the Python docs page</a>.</p>
<p>For interning, Py3's <code>str</code> is based on the Py2 <code>unicode</code> type; at the C-layer, you're using <code>PyUnicode</code> methods, e.g. <a href="https://docs.python.org/3/c-api/unicode.html#c.PyUnicode_InternFromString" rel="nofollow">PyUnicode_InternFromString</a>. You're still interning Python level <code>str</code>s, but the implementation type has changed.</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://stackoverflow.com/a/28306354/320546">https://stackoverflow.com/a/28306354/320546</a> will help you with <code>Py_InitModule</code>
and <code>PyStr_InternFromString</code> is the Python 3 equivalent of <code>PyString_InternFromString</code>  (see <a href="http://py3c.readthedocs.org/en/latest/reference.html#c.PyStr_InternFromString" rel="nofollow noreferrer">http://py3c.readthedocs.org/en/latest/reference.html#c.PyStr_InternFromString</a>)</p>
</div>
<span class="comment-copy">for <code>py_InitModule</code> <a href="http://stackoverflow.com/questions/28305731/compiler-cant-find-py-initmodule-is-it-deprecated-and-if-so-what-should-i">python 3 uses a different structure</a> and for <code>PyString_InternFromString</code>, it is just <a href="https://docs.python.org/2/c-api/string.html#c.PyString_InternFromString" rel="nofollow noreferrer">unavailable for python 3</a></span>
<span class="comment-copy">@RNar: <a href="https://docs.python.org/3/c-api/unicode.html#c.PyUnicode_InternFromString" rel="nofollow noreferrer">Interning is still there, it's just that the C level type of the Python <code>str</code> changed.</a></span>
<span class="comment-copy"><code>PyStr_InternFromString</code> is from a third party compatibility library, it's not the "Python 3 equivalent" of anything, it's a wrapper that calls the Py2 or Py3 version of the function, as appropriate.</span>
