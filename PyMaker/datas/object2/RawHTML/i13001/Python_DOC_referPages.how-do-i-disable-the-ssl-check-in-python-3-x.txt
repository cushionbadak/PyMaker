<div class="post-text" itemprop="text">
<p>I'm using urllib.request.urlretrieve to download a file to local.</p>
<pre><code>urllib.request.urlretrieve(url_string,file_name)
</code></pre>
<p>It throws error:</p>
<blockquote>
<p>ssl.CertificateError was unhandled by user code
  Message: hostname 'foo.net' doesn't match either of 'a248.e.akamai.net', '<em>.akamaihd.net', '</em>.akamaihd-staging.net', '<em>.akamaized.net', '</em>.akamaized-staging.net'</p>
</blockquote>
<p>If you copy the url into Chrome, it will show you a notification and you need to say something like "keep going to the url". </p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen" rel="noreferrer"><code>urllib.request.urlopen</code></a> with <a href="https://docs.python.org/3/library/ssl.html#ssl-contexts" rel="noreferrer">custom ssl context</a>:</p>
<pre><code>import ssl
import urllib.request

ctx = ssl.create_default_context()
ctx.check_hostname = False
ctx.verify_mode = ssl.CERT_NONE

with urllib.request.urlopen(url_string, context=ctx) as u, \
        open(file_name, 'wb') as f:
    f.write(u.read())
</code></pre>
<p>Alternatively, if you use <a href="https://docs.python.org/3/library/urllib.request.html#urllib.request.urlretrieve" rel="noreferrer"><code>requests</code> library</a>, it could be simpler:</p>
<pre><code>import requests

with open(file_name, 'wb') as f:
    resp = requests.get(url_string, verify=False)
    f.write(resp.content)
</code></pre>
</div>
<span class="comment-copy">I think you meant "ssl check" in the title.</span>
<span class="comment-copy">I <i>think</i> you can just pass <code>verify=False</code></span>
<span class="comment-copy">@JoranBeasley, <a href="https://docs.python.org/3/library/urllib.request.html#urllib.request.urlretrieve" rel="nofollow noreferrer"><code>urllib.request.urlretrieve</code></a> does not accept <code>verify</code> keyword argument. Maybe you're confused with <a href="https://python-requests.org" rel="nofollow noreferrer"><code>requests</code> library</a>.</span>
<span class="comment-copy">I guess there are some typo for the first solution, This works fine :D  with urllib.request.urlopen(url_string, context=ctx) as u: 		f = open(file_name, 'wb') 		f.write(u.read()) Not sure if we have requests library in Python3 tho</span>
<span class="comment-copy">@BingGan, I fixed the typo. Thank you for your feedback. <code>requests</code> supports Python 3.x. <code>pip install requests</code> and benefit. :)</span>
<span class="comment-copy">I am getting <code>Cannot set verify_mode to CERT_NONE when check_hostname is enabled.</code> even after setting <code>check_hostname=False</code>. Any idea?</span>
<span class="comment-copy">ok, so we have to set the <code>check_hostname</code> before the <code>verify_mode</code></span>
