<div class="post-text" itemprop="text">
<p>I'm a newbie in Python and embedding it too. And I have one problem:</p>
<p>There is function in my python module that recieves buffer created with <strong>ctypes.create_string_buffer(size)</strong> and fills it by content from some memory address:</p>
<pre><code>def get_mem(self, address, size, data):
    self.mem.read_ram_block(address, size, data)
</code></pre>
<p>How should I call this method with using of <strong>(char *)</strong> buffer? I want fill my C++ buffer with recieved from python.</p>
</div>
<div class="post-text" itemprop="text">
<p>If you only want to call the Python function <code>ctypes.create_string_buffer(size)</code>, you could easily mirror the Python coding on the C++ side:</p>
<pre><code>static PyObject* create_string_buffer(unsigned long size) {
  PyObject *ctypes = PyImport_ImportModule("ctypes");
  if (!ctypes) return 0;
  PyObject *buf = PyObject_CallMethod(ctypes, "create_string_buffer", "k", size);
  Py_DECREF(ctypes);
  return buf;
}
</code></pre>
<p>If you'd like to use another type than <code>unsigned long</code> for the size, you'd need to change the <code>format</code> in <a href="https://docs.python.org/3/c-api/object.html#c.PyObject_CallMethod" rel="nofollow">PyObject_CallMethod</a> as well. For example <code>O</code> is used for <code>PyObject*</code>. For a complete list of formats see the documentation for <a href="https://docs.python.org/3/c-api/arg.html#building-values" rel="nofollow">Building values</a>.</p>
</div>
<span class="comment-copy">Could you elaborate a little more. It's not perfectly clear for me what you're asking and what you'd like to achieve.</span>
<span class="comment-copy">Function "get_mem" should recieve "data", which should be created with "ctypes.create_string_buffer(size)" function from C++. But I don't know, how to create such buffer from C++</span>
