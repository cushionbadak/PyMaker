<div class="post-text" itemprop="text">
<p>why do i get exception in this code:
I get output: </p>
<blockquote>
<p>[*] Error creating your key</p>
<p>[*] Error creating your key</p>
</blockquote>
<pre><code>import os, hashlib
from Crypto.Cipher import AES
from Crypto.PublicKey import RSA

raw_key = RSA.generate(2048)
private_key = raw_key.exportKey('PEM')
try:
with open('master_private.pem', 'w+') as keyfile:
    keyfile.write(private_key)
    keyfile.close()
print ("[*] Successfully created your MASTER RSA private key")
except:
print ("[*] Error creating your key")

make_public = raw_key.publickey()
public_key = make_public.exportKey('PEM')
try:
with open("master_public.pem", "w+") as keyfile:
    keyfile.write(public_key)
    keyfile.close()
print ("[*] Successfully created your MASTER RSA public key")
except:
print ("[*] Error creating your key")
</code></pre>
<p>File is created successfully but it is not filled with anything. I am just starting Python.</p>
</div>
<div class="post-text" itemprop="text">
<p>you should catch exeception and show to know the problem, but i think your problem is the write method, private_key its bytes but you must be pass a str to write method them you can try:</p>
<pre class="lang-py prettyprint-override"><code>   keyfile.write(private_key.decode())
</code></pre>
<p>other problem could be your permission permissions, mabe not have permission to create a file, try catching the excaption and printing to know what happen</p>
<pre class="lang-py prettyprint-override"><code>try:
    with open('master_private.pem', 'w+') as keyfile:
    keyfile.write(private_key)
    keyfile.close()
    print ("[*] Successfully created your MASTER RSA private key")
except Exception as e:
    print ("[*] Error creating your key", e)
</code></pre>
<p>also check your syntax why that code is not well tried</p>
</div>
<span class="comment-copy">And you're sure <code>public_key</code> and <code>private_key</code> contains data? <code>print(len(public_key))</code></span>
<span class="comment-copy">Either remove the try except block or capture the exception which program is returning using <code>except Exception as e</code>. Then print <code>e</code>.</span>
<span class="comment-copy">@RiteshAgrawal print (e) shows me <code>write() argument must be str, not bytes</code></span>
<span class="comment-copy">Thank you, it needed to be decoded. <code>write() argument must be str, not bytes</code></span>
