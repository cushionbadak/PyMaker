<div class="post-text" itemprop="text">
<p>Today I upgraded from pip 7.1.0 to 7.1.2, and now it doesn't work.</p>
<pre><code>$ pip search docker-compose
Exception:
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/pip/basecommand.py", line 223, in main
    status = self.run(options, args)
  File "/Library/Python/2.7/site-packages/pip/commands/search.py", line 43, in run
    pypi_hits = self.search(query, options)
  File "/Library/Python/2.7/site-packages/pip/commands/search.py", line 60, in search
    hits = pypi.search({'name': query, 'summary': query}, 'or')
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 1240, in __call__
    return self.__send(self.__name, args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 1599, in __request
    verbose=self.__verbose
  File "/Library/Python/2.7/site-packages/pip/download.py", line 788, in request
    return self.parse_response(response.raw)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 1490, in parse_response
    return u.close()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 799, in close
    raise Fault(**self._stack[0])
Fault: &lt;Fault 1: "&lt;type 'exceptions.KeyError'&gt;:'hits'"&gt;
</code></pre>
<p>So I tried reinstalling:</p>
<pre><code>sudo -H pip install --force-reinstall -U pip
</code></pre>
<p>The reinstall ran without error, but when I tried to search, I got the same error.    </p>
<p>So, I tried reinstalling the old version:</p>
<pre><code>sudo -H pip install --force-reinstall -U pip==7.1.0
</code></pre>
<p>Again, the reinstall worked, but searching was still broken after the reinstall. In addition to the error, I did get the version upgrade message:</p>
<pre><code>You are using pip version 7.1.0, however version 7.1.2 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
</code></pre>
<p>Disabling the cache also gives the same error:</p>
<pre><code>pip search docker-compose --no-cache-dir --disable-pip-version-check
</code></pre>
<p>The problem seems to only be with the search function, as pip still functions well enough to reinstall itself and such.</p>
<p>I believe I have only installed one other package today, which was docker-compose. The problem occurs when I search for packages other than docker-compose, as in my examples.</p>
<p>Any ideas?</p>
</div>
<div class="post-text" itemprop="text">
<p>I wasn't able to reproduce this with pip 7.1.2 and either Python 2.7.8 or 3.5.1 on Linux.</p>
<p>The <a href="https://docs.python.org/3/library/xmlrpc.client.html" rel="nofollow noreferrer">xmlrpclib docs</a> have this to say on 'faults':</p>
<blockquote>
<p>Method calls may also raise a special Fault instance, used to signal
  XML-RPC server errors</p>
</blockquote>
<p>This implies that pip is reporting a problem on the server (pypi) side.</p>
<p>The <a href="https://status.python.org/incidents/dfpvdhyj0w8y" rel="nofollow noreferrer">Python Infrastructure Status site</a> reports problems with pip search on 2015-09-11 and 2015-09-12.  </p>
<p>I suspect that this is not a bug in pip, but a problem with pypi.python.org on the dates in question.This question was asked on 2015-09-11.</p>
<p>A similar error was logged on the <a href="https://bitbucket.org/pypa/pypi/issues/338/pypi-search-and-pip-search-failing" rel="nofollow noreferrer">pypi bitbucket repo</a> on 2015-09-11, reinforcing my theory.</p>
<p>Interestingly, there is another similar <a href="https://github.com/pypa/pip/issues/3327" rel="nofollow noreferrer">bug logged at pypi's github repo</a>.  In this case the search term is a regex:</p>
<p><code>pip search "^docker-compose$"</code></p>
<p>I can reproduce this error on Python 2.7.8 and Python3.5.1, pip-7.1.2 and pip-8.1.1 on Linux; however I can't see anything in the pip documentation to suggest that pip search supports regex, and <a href="https://stackoverflow.com/a/23176820/5320906">this answer</a> states regex is unsupported, so I think this is a separate issue unrelated to the OP's question.</p>
</div>
<div class="post-text" itemprop="text">
<p><code>pip</code> does this sometimes if no matches (hits) are found:</p>
<p><code>$ pip search ''</code>:</p>
<p><code>Fault: &lt;Fault 1: "&lt;type 'exceptions.KeyError'&gt;:'hits'"&gt;</code></p>
<p><code>$ pip search 'something'</code>:</p>
<p>OK</p>
<p>Could also be a server side bug, one that fails to provide the needed info. So, the fixing has to be done by <code>pip</code> devs, or server devs, or both.</p>
</div>
<div class="post-text" itemprop="text">
<p>When I didn't receive an answer to this question last year, I posted <a href="https://github.com/pypa/pip/issues/3100" rel="nofollow">an issue on GitHub</a>, and it was determined my issue was caused by the PyPi/pip server being down (just the search part, I guess). </p>
<p>I can't be certain, but it seems like there were more comments/answers to this question when it was active last year. I really thought someone had posted that answer here (at least in a comment or something), but it's obviously not here now.</p>
<p>I think @tedder42 is having a different problem than I did because  <a href="https://status.python.org/history" rel="nofollow">there hasn't been any recent downtime</a> at PyPi. Even if someone posted the real answer to his question, I would have no way to verify it. So, I think the best course of action is to ignore his bounty, and if he's still having the problem, it should be turned into a new question.</p>
</div>
<span class="comment-copy">Ok, I added the tag.</span>
<span class="comment-copy">In August 2016, <code>pip search docker-compose</code> finds packages with <code>docker</code> OR <code>compose</code> in the package name. (Does anyone know if this is documented anywhere ?)</span>
<span class="comment-copy"><code>pip search</code> uses <a href="https://wiki.python.org/moin/PyPIXmlRpc" rel="nofollow noreferrer">wiki.python.org/moin/PyPIXmlRpc</a> <code>search</code>, which matches only fixed strings. (The way to support REs e.g. <code>'^aa.*bb'</code> would be to search <code>"aa"</code>, then do the RE.)</span>
