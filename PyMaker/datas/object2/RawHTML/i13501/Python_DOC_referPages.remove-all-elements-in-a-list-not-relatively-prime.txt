<div class="post-text" itemprop="text">
<p>I have a list <code>m</code> in python, and I want to remove all the elements in m that are not relatively prime to all previous elements. So if <code>m=[2,3,4]</code> I want the output to be <code>[2,3]</code>.</p>
<p>I tried iterating through the values of <code>m</code>, but it doesnt work since the size of <code>m</code> changes and then the index value is out of range.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow"><code>enumerate</code></a> and <a href="https://docs.python.org/3/library/functions.html#any" rel="nofollow"><code>any</code></a> within a list comprehension and use <code>fractions.gcd</code> function to get the gcd for each pairs : </p>
<pre><code>&gt;&gt;&gt; from fractions import gcd
&gt;&gt;&gt; [j for i,j in enumerate(m) if not any(gcd(j,t)!=1 for t in m[:i])]
[3, 100, 7, 11, 17]
</code></pre>
<p>Also as @mgilson mentioned in comment as a more efficient way instead of simple slicing in <code>any</code> you can use <code>itertools.islice</code> function.</p>
</div>
<span class="comment-copy">Can you add the code that you are talking about?</span>
<span class="comment-copy">possible duplicate of <a href="http://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python">Remove items from a list while iterating in Python</a></span>
<span class="comment-copy">are you assuming sorted order?</span>
<span class="comment-copy">@JohnColeman No it's just about previous elements.</span>
<span class="comment-copy">It's possible that your <code>any</code> clause could be made more efficient by using <code>itertools.islice</code> rather than an actual list slice (though you'd have to <code>timeit</code> with real data to make any real claims)</span>
<span class="comment-copy">I think this fails for m = [4,15,20,25]. Maybe need <code>gcd</code> from the <code>fractions</code> module.</span>
<span class="comment-copy">@JohnColeman I added that alternative!</span>
