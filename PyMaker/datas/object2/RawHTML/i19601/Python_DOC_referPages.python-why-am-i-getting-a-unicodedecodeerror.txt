<div class="post-text" itemprop="text">
<p>I have the following code that search through files using RE's and if any matches are found it move the file into a different directory. </p>
<pre><code>import os
import gzip
import re
import shutil

def regEx1():
    os.chdir("C:/Users/David/myfiles")
    files = os.listdir(".")
    os.mkdir("C:/Users/David/NewFiles")
    regex_txt = input("Please enter the string your are looking for:")
    for x in (files):
        inputFile = open((x), "r")
        content = inputFile.read()
        inputFile.close()
        regex = re.compile(regex_txt, re.IGNORECASE)
        if re.search(regex, content)is not None:
            shutil.copy(x, "C:/Users/David/NewFiles")
</code></pre>
<p>When I run it i get the following error message:</p>
<pre><code>Traceback (most recent call last):
  File "&lt;interactive input&gt;", line 1, in &lt;module&gt;
  File "C:\Python33\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
UnicodeDecodeError: 'charmap' codec can't decode byte 0x9d in position 367: character maps to &lt;undefined&gt;
</code></pre>
<p>Please could someone explain why this message appears</p>
</div>
<div class="post-text" itemprop="text">
<p>In python 3, when you open a file for reading in text mode (<code>r</code>) it'll decode the contained text to unicode.</p>
<p>Since you didn't specify what encoding to use to read the file, the platform default (from <a href="http://docs.python.org/3/library/locale.html#locale.getpreferredencoding" rel="noreferrer"><code>locale.getpreferredencoding</code></a>) is being used, and that fails in this case.</p>
<p>You need to either specify an encoding that <em>can</em> decode the file contents, or open the file in binary mode instead (and use <code>b''</code> bytes patterns for your regular expressions).</p>
<p>See the <a href="http://docs.python.org/3/howto/unicode.html" rel="noreferrer">Python Unicode HOWTO</a> for more information.</p>
</div>
<div class="post-text" itemprop="text">
<p>I'm not too familiar with python 3x, but the below may work. </p>
<pre><code>inputFile = open((x, encoding="utf8"), "r")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>There's a similar question here: 
<a href="https://stackoverflow.com/questions/12213178/python-traceback-codecs-charmap-decodeinput-self-errors-decoding-table0">Python: Traceback codecs.charmap_decode(input,self.errors,decoding_table)[0]</a></p>
<p>But you might want to try: </p>
<pre><code> open((x), "r", encoding='UTF8')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Thank you very much for this solution. It helps me for another subject, I used :</p>
<pre><code>exec (open ("DIP6.py").read ())
</code></pre>
<p>and I got this error because I have this symbol in a comment of DIP6.py :</p>
<pre><code> #       ● en première colonne
</code></pre>
<p>It works fine with :</p>
<pre><code>exec (open ("DIP6.py", encoding="utf8").read ())
</code></pre>
<p>It also solves a problem with :</p>
<pre><code>print("été") for example
</code></pre>
<p>in DIP6.py</p>
<p>I got :</p>
<pre><code>Ã©tÃ©
</code></pre>
<p>in the console.</p>
<p>Thank you  :-)  .</p>
</div>
<span class="comment-copy">where would i add the "b''"</span>
<span class="comment-copy">@LWH91: Read the HOWTO to understand what that <i>means</i> first.</span>
<span class="comment-copy">Python 3 has <code>open(fname, mode, encoding='whatever')</code>, Python 2 has <code>codecs.open(fname, mode, encoding='whatever')</code></span>
<span class="comment-copy">@JochenRitzel: Let's focus this on Python 3; no need to confuse matters more for the OP. :-)</span>
<span class="comment-copy">@MartijnPieters ive read it, understand the problem but still dont know how to fix it</span>
<span class="comment-copy">when i try that i get an error saying <code>SyntaxError: non-keyword arg after keyword arg</code></span>
<span class="comment-copy">isn't it "utf-8"??</span>
