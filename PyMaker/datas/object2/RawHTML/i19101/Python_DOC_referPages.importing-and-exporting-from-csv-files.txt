<div class="post-text" itemprop="text">
<p><img alt="enter image description here" src="https://i.stack.imgur.com/JLcmi.png"/>So I am trying to create a code which can search the data file:</p>
<ol>
<li>By surname to retrieve and display the details for a contact</li>
<li>By date of birth to retrieve and display all contacts with a birthday in a particular month.</li>
</ol>
<p>Here is the code I have created:</p>
<pre><code>def search():
    option = input('Please select to search by \n1. Surname\n2. D.O.B\n')
    if option == '1':
        surname = input('Please enter surname: ')
        while not surname.isalpha():
            surname = str(input('Please enter a valid surname: '))
        Myfile = open('Address book.csv', 'rt')
        for line in Myfile:
            if ',' + str(surname) + ',' in line:
                print(line)
            else:
                 print('No contacts found')
    elif option == '2':
        Validmonth = False
        while Validmonth == False:
            month = input('Please enter the birth month')
            if month &gt;='13' and month &lt;='0':
                print('Please enter a valid month')
            else:
                Validmonth = True
            Myfile = open ('Address book.csv', 'rt')
            for line in Myfile:
                if str(month) in line:
                    print(line)
                else:
                    print('No contacts found')
    else:
        print('Error, select a valid option')
        search()

search()
</code></pre>
<p>I keep getting this result when I try the code:</p>
<pre><code>Please select to search by 
1. Surname
2. D.O.B
1
Please enter surname: Vickers
No contacts found
No contacts found
No contacts found
No contacts found
No contacts found
No contacts found
No contacts found
No contacts found
</code></pre>
<p>I want to know why? someone please help?</p>
</div>
<div class="post-text" itemprop="text">
<p>You test for the surname on <em>every row</em>, then print <code>No contacts found</code> for every row that doesn't match.</p>
<p>Break out of the loop when you find the name, and use the <code>else</code> suite for the <code>for</code> loop instead:</p>
<pre><code>for line in Myfile:
    if ',' + str(surname) + ',' in line:
        print(line)
        break
else:
    print('No contacts found')
</code></pre>
<p><code>else</code> on a <code>for</code> loop only is executed if you exhausted the iterable, so when you did <em>not</em> break out of the loop early.</p>
<p>Your surnames are the <em>first</em> value on the line, so you would be better off testing if the line <em>starts</em> with the surname:</p>
<pre><code>if line.startswith(surname + ','):
</code></pre>
<p>Pro tip: when reading CSV files, use the <a href="http://docs.python.org/3/library/csv.html" rel="nofollow"><code>csv</code> module</a>:</p>
<pre><code>import csv

with open('Address book.csv', newline='') as myfile:
    reader = csv.reader(myfile)
    for row in reader:
        if row[0] == surname:
            print(row)
            break
    else:
         print('No contacts found')
</code></pre>
</div>
<span class="comment-copy">I hope the credentials in the picture here are fake ... if not, perhaps you may better obfuscate them</span>
<span class="comment-copy">Could you please not destroy your question? By removing the bulk you remove all context for people to assess if they have the same problem and if my answer would help them too.</span>
<span class="comment-copy">Thanks! Can you help me with one more thing?</span>
<span class="comment-copy">If it is within the scope of this question, sure. If it is a whole new question, post a new question (after searching for answers here on Stack Overflow).</span>
<span class="comment-copy">No, it's the same question. With the code above, my code isn't functioning at all. I keep getting the same response 'No contacts found').</span>
<span class="comment-copy">@ConfusedChild24: Are you 100% certain that the text <code>,Vickers,</code> appears on a line in the file? You did not post a sample of your CSV file, so I cannot verify that for you.</span>
<span class="comment-copy">I have now added the data I am using in my question. I'm definitely sure that it is there.</span>
