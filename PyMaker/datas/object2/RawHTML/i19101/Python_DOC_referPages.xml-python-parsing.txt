<div class="post-text" itemprop="text">
<p>I am new to trying to parse XML with python I have provided the xml below. I am need to get the following data Instrmt afg="AG" and Qty Typ="FIN" QTYL="149" I need the AG and the 149.</p>
<p>I have tried the following:</p>
<pre><code>from xml.dom import minidom

xmldoc = minidom.parse(test.xml)

batch = xmldoc.getElementsByTagName('Batch')[0]

rpt = batch.getElementsByTagName('PosRpt')

for ag in rpt:
    sym = ag.getElementsByTagName('Instrmt')
    print(sym)
</code></pre>
<p>When I do this I get a DOM object and not sure how to get the results I am trying for.</p>
<pre><code>- &lt;XML r="20030517" s="20042209" v="4.4" xr="FIA" xv="1"&gt;
- &lt;Batch&gt;
- &lt;PosRpt RptID="175" BizDt="2013-01-03" ReqTyp="0" &gt;
  &lt;Pty ID="Ade" R="21" /&gt; 
- &lt;Pty ID="000" R="4"&gt;
  &lt;Sub ID="F" Typ="29" /&gt; 
  &lt;/Pty&gt;
  &lt;Instrmt afg="AG" ID="AG" Src="8" CFI="FFI" MMY="2013" Matf="2013"/&gt; 
  &lt;Qty Typ="AOD" QTYL="134" QTYS="0" /&gt; 
  &lt;Qty Typ="FIN" QTYL="149" QTYS="0" /&gt; 
  &lt;Amt Typ="FMTM" Amt="155065.44" /&gt; 
  &lt;/PosRpt&gt;
  &lt;/Batch&gt;
  &lt;/XML&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>To extract values of an attribute use <code>elt.getAttribute("attribute_name")</code>, for example:</p>
<pre><code>print(sym.getAttribute("afg"), sym.getAttribute("ID"))
</code></pre>
<p>In your case <code>sym</code> is still a node list, not a node (tag), so you can access particular elements of the list like this, for example:</p>
<pre><code>sym = ag.getElementsByTagName('Instrmt')
for e in sym:
    print e.getAttribute("afg")
</code></pre>
<p>Or just:</p>
<pre><code>print sym[0].getAttribute("afg")
</code></pre>
<p>if you know there is only one element on the list.</p>
<p>You can check what your tag is with an expression like:</p>
<pre><code>e.tagName == 'Instrmt'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Take a look at <a href="http://docs.python.org/3/library/xml.etree.elementtree.html?highlight=elementtree#module-xml.etree.ElementTree" rel="nofollow">ElementTree</a> and <a href="http://docs.python.org/3/library/xml.etree.elementtree.html?highlight=elementtree#xpath-support" rel="nofollow">XPATH</a> specifications:</p>
<pre><code>from xml.etree import ElementTree as et

data = '''\
&lt;XML r="20030517" s="20042209" v="4.4" xr="FIA" xv="1"&gt;
- &lt;Batch&gt;
- &lt;PosRpt RptID="175" BizDt="2013-01-03" ReqTyp="0" &gt;
  &lt;Pty ID="Ade" R="21" /&gt; 
- &lt;Pty ID="000" R="4"&gt;
  &lt;Sub ID="F" Typ="29" /&gt; 
  &lt;/Pty&gt;
  &lt;Instrmt afg="AG" ID="AG" Src="8" CFI="FFI" MMY="2013" Matf="2013"/&gt; 
  &lt;Qty Typ="AOD" QTYL="134" QTYS="0" /&gt; 
  &lt;Qty Typ="FIN" QTYL="149" QTYS="0" /&gt; 
  &lt;Amt Typ="FMTM" Amt="155065.44" /&gt; 
  &lt;/PosRpt&gt;
  &lt;/Batch&gt;
  &lt;/XML&gt;
'''

#tree = et.parse('test.xml')
tree = et.fromstring(data)

# Find the first Instrmt node anywhere in the tree
print(tree.find('.//Instrmt').attrib['afg'])

# Find a Qty node with a particular attribute.
print(tree.find(".//Qty[@Typ='FIN']").attrib['QTYL'])
</code></pre>
<p>Output:</p>
<pre><code>AG
149
</code></pre>
</div>
<span class="comment-copy">I get this:    AttributeError: 'NodeList' object has no attribute 'getAttribute'</span>
<span class="comment-copy">Thanks so interating over sym turns it into a tag?</span>
<span class="comment-copy">@Adam I edited the answer.</span>
<span class="comment-copy">Not exactly, your sym is a collection (list) of tags, whatever you get from <code>getElementsByTagName</code> is a list, even if it's just one element, so you must treat it as a list.</span>
