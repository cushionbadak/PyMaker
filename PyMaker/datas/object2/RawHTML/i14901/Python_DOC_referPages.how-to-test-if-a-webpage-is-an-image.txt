<div class="post-text" itemprop="text">
<p>Sorry that the title wasn't very clear, basically I have a list with a whole series of url's, with the intention of downloading the ones that are pictures. Is there anyway to check if the webpage is an image, so that I can just skip over the ones that arent?</p>
<p>Thanks in advance</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="http://docs.python-requests.org/en/latest/" rel="nofollow">requests</a> module. Make a head request and check the content type. Head request will not download the response body. </p>
<pre><code>import requests
response = requests.head(url)
print response.headers.get('content-type')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>There is no reliable way. But you could find a solution that might be "good enough" in your case.</p>
<p>You could look at the file extension if it is present in the url e.g., <code>.png</code>, <code>.jpg</code> could indicate an image:</p>
<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; name = url2filename('http://example.com/a.png?q=1')
&gt;&gt;&gt; os.path.splitext(name)[1]
'.png'
&gt;&gt;&gt; import mimetypes
&gt;&gt;&gt; mimetypes.guess_type(name)[0]
'image/png'
</code></pre>
<p>where <a href="https://gist.github.com/zed/c2168b9c52b032b5fb7d" rel="nofollow noreferrer"><code>url2filename()</code> function is defined here</a>.</p>
<p>You could inspect <code>Content-Type</code> http header:</p>
<pre><code>&gt;&gt;&gt; import urllib.request
&gt;&gt;&gt; r = urllib.request.urlopen(url) # make HTTP GET request, read headers
&gt;&gt;&gt; r.headers.get_content_type()
'image/png'
&gt;&gt;&gt; r.headers.get_content_maintype()
'image'
&gt;&gt;&gt; r.headers.get_content_subtype()
'png'
</code></pre>
<p>You could check the very beginning of the http body for magic numbers indicating image files e.g., <a href="http://en.wikipedia.org/wiki/List_of_file_signatures" rel="nofollow noreferrer">jpeg may start with <code>b'\xff\xd8\xff\xe0'</code></a> or:</p>
<pre><code>&gt;&gt;&gt; prefix = r.read(8)
&gt;&gt;&gt; prefix # .png image
b'\x89PNG\r\n\x1a\n'
</code></pre>
<p><a href="https://stackoverflow.com/a/14646324/4279">As @pafcu suggested in the answer to the related question</a>, you could use <a href="https://docs.python.org/3/library/imghdr.html#imghdr.what" rel="nofollow noreferrer"><code>imghdr.what()</code> function</a>:</p>
<pre><code>&gt;&gt;&gt; import imghdr
&gt;&gt;&gt; imghdr.what(None, b'\x89PNG\r\n\x1a\n')
'png'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use <code>mimetypes</code> <a href="https://docs.python.org/3.0/library/mimetypes.html" rel="nofollow">https://docs.python.org/3.0/library/mimetypes.html</a></p>
<pre><code>import urllib
from mimetypes import guess_extension

url="http://example.com/image.png"
source = urllib.urlopen(url)
extension = guess_extension(source.info()['Content-Type'])
print extension
</code></pre>
<p>this will return "png"</p>
</div>
<span class="comment-copy">similar question: <a href="http://stackoverflow.com/questions/14644880/how-to-guess-image-mime-type" title="how to guess image mime type">stackoverflow.com/questions/14644880/â€¦</a></span>
<span class="comment-copy">you can <a href="http://stackoverflow.com/a/29047487/4279">get Content-Type header using only stdlib</a></span>
<span class="comment-copy">it won't work on Python 3 (the question has <a href="https://stackoverflow.com/questions/tagged/python-3.x">python-3.x</a> tag)</span>
<span class="comment-copy">You can make it work if you fix the imports. Also, it is not clear why do you want to guess the file extension here. Content-Type is clear by itself: it even may have the word 'image' in it (you could extract it as shown in <a href="http://stackoverflow.com/a/29047487/4279">my answer</a>)</span>
<span class="comment-copy">Ok, thanks for the remark</span>
