<div class="post-text" itemprop="text">
<p>I would like to use file arguments in python argparse with lines in the file that look like this:</p>
<pre><code>--contour_levels=-4 -2 0 2 4
</code></pre>
<p>or:</p>
<pre><code>--contour_levels -4 -2 0 2 4
</code></pre>
<p>Is there an easy way to do this? I know I can use the first one and then list the other levels one per line but this looks ridiculous.</p>
<p>Thanks!</p>
</div>
<div class="post-text" itemprop="text">
<p>From the docs:</p>
<p><a href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.convert_arg_line_to_args" rel="nofollow">https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.convert_arg_line_to_args</a></p>
<pre><code>def convert_arg_line_to_args(self, arg_line):
    for arg in arg_line.split():
        if not arg.strip():
            continue
        yield arg
</code></pre>
<p>This function replaces the one the parser uses to read lines from your file.  You could subclass <code>ArgumentParser</code> and add this function.  Or you could 'kludge' it by replacing the bound method of the parser with this function (without the <code>self</code> - see comment).</p>
<pre><code>parser = argparse.ArgumentParser(...)
parser.convert_arg_line_to_args = convert_arg_line_to_args
</code></pre>
<p>The idea is to take a line from your file, and return (as a generator) strings one by one.  If this doesn't work as given, it shouldn't be hard to tweak.</p>
<p>p.s. The default version, which returns one string per line is</p>
<pre><code>def convert_arg_line_to_args(self, arg_line):
    return [arg_line]
</code></pre>
<p>look at the code for <code>ArgumentParser._read_args_from_files</code> if you have more questions on how it is used.  This is the function takes the list of strings from <code>sys.argv[1:]</code> and returns a new one with your file contents added.</p>
</div>
<span class="comment-copy">Thanks. I did try this and got frustrated early on. Two addenda for anyone blindly cutting and pasting like me: the usage above applies only to the override. The kludge should not have the "self" argument.</span>
