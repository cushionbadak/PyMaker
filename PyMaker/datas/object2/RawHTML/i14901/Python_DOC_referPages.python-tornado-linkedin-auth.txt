<div class="post-text" itemprop="text">
<p>I would like to authenticate to <code>linkedin.com</code> and get some content</p>
<p>I use <code>requests</code> python module and do something like this:</p>
<pre><code>import requests
from BeautifulSoup import BeautifulSoup

client = requests.Session()

HOMEPAGE_URL = 'https://www.linkedin.com'
LOGIN_URL = HOMEPAGE_URL + '/uas/login-submit'

html = client.get(HOMEPAGE_URL).content
soup = BeautifulSoup(html)
csrf = soup.find(id="loginCsrfParam-login")['value']

login_information = {
    'session_key':'my_login',
    'session_password':'my_password',
    'loginCsrfParam': csrf,
}

client.post(LOGIN_URL, data=login_information)

content = client.get(HOMEPAGE_URL + 'vsearch/c').content
</code></pre>
<p>And, got the content, all right,</p>
<p>But, now I want to use tornado framework to do the same work</p>
<p>I get <code>loginCsrfParam</code> in the similar way and make post request:</p>
<pre><code>login_information = {
    'session_key':'my_login',
    'session_password':'my_password',
    'loginCsrfParam':csrf
}

body = urllib.urlencode(login_information)
http_client.fetch(LOGIN_URL,
          handle_request_post,
          method='POST', 
          headers=None,
          body=body)
</code></pre>
<p>And after arriving response</p>
<pre><code>http_client.fetch(HOMEPAGE_URL + '/vsearch/c', 
          handle_request_get_content,
          method = 'GET')
</code></pre>
<p>But I get simply a login page </p>
<p>What's wrong?</p>
</div>
<div class="post-text" itemprop="text">
<p>Tornado's AsyncHTTPClient doesn't have any concept of a session; each request is independent. It looks like requests.Session is transferring something from the login request to the vsearch request, probably cookies. You'll need to handle the Set-Cookie header from the login request and transfer the cookies to any following requests (perhaps using the <a href="https://docs.python.org/3/library/http.cookiejar.html" rel="nofollow">http.cookiejar</a> module)</p>
</div>
