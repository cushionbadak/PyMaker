<div class="post-text" itemprop="text">
<p>I'm trying to import a text file and return the text into a list of strings for each word while also returning lower case and no punctuation. </p>
<p>I've created the following code but this doesn't split each word into a string. Also is it possible to add <code>.lower()</code> into the comprehension?</p>
<pre><code>def read_words(words_file):
    """Turns file into a list of strings, lower case, and no punctuation"""
    return [word for line in open(words_file, 'r') for word in line.split(string.punctuation)]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Yes, you can add <code>.lower</code> to the comprehension. It should probably happen in <code>word</code>. Also the following code probably does not split each word because of <code>string.punctuation</code>. If you are just trying to split on whitespace calling <code>.split()</code> without arguments will suffice.</p>
</div>
<div class="post-text" itemprop="text">
<p>Here's a list comprehension that should do everything you want:</p>
<pre><code>[word.translate(None, string.punctuation).lower() for line in open(words_file) for word in line.split()]
</code></pre>
<p>You need to split on whitespace (the default) to separate the words. Then you can transform each resulting string to remove the punctuation and make it lowercase.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>import string
def read_words(words_file):
    """Turns file into a list of strings, lower case, and no punctuation"""
    with open(words_file, 'r') as f:
        lowered_text = f.read().lower()
    return ["".join(char for char in word if char not in string.punctuation) for word in lowered_text.split()]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use a <a href="https://docs.python.org/3/library/stdtypes.html#str.maketrans" rel="nofollow">mapping to translate the words</a> and use it in a generator function.</p>
<pre><code>import string
def words(filepath):
    '''Yield words from filepath with punctuation and whitespace removed.'''

    # map uppercase to lowercase and punctuation/whitespace to an empty string
    t = str.maketrans(string.ascii_uppercase,
                      string.ascii_lowercase,
                      string.punctuation + string.whitespace)

    with open(filepath) as f:
        for line in f:
            for word in line.strip().split():
                word = word.translate(t)
                # don't yield empty strings
                if word:
                    yield word
</code></pre>
<p>Usage</p>
<pre><code>for word in words('foo.txt'):
    print(word)
</code></pre>
</div>
<span class="comment-copy">Please add example input, what you want to get as output, and the actual output you are getting.</span>
<span class="comment-copy">Why does the process need to be a list comprehension?</span>
<span class="comment-copy">This doesn't need to be a comprehension. Just figured it would be the smallest amount of code</span>
