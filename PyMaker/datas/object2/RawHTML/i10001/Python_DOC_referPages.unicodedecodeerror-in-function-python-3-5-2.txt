<div class="post-text" itemprop="text">
<p>UnicodeDecodeError </p>
<pre><code>def getWordFreqs(textPath, stopWordsPath):
    wordFreqs = dict()
    #open the file in read mode and open stop words
    file = open(textPath, 'r')
    stopWords = set(line.strip() for line in open(stopWordsPath))
    #read the text
    text = file.read()
    #exclude punctuation and convert to lower case; exclude numbers as well
    punctuation = set('!"#$%&amp;\()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~')
    text = ''.join(ch.lower() for ch in text if ch not in punctuation)
    text = ''.join(ch for ch in text if not ch.isdigit())
    #read through the words and add to frequency dictionary
    #if it is not a stop word
    for word in text.split():
        if word not in stopWords:
            if word in wordFreqs:
                wordFreqs[word] += 1
            else:
                wordFreqs[word] = 1
</code></pre>
<p>I get the following error everytime i try and run this function in python 3.5.2 but it works fine in 3.4.3, I cannot figure out what is causing this error. </p>
<pre><code>line 9, in getWordFreqs
    text = file.read()
  File "/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/encodings/ascii.py", line 26, in decode
    return codecs.ascii_decode(input, self.errors)[0]
UnicodeDecodeError: 'ascii' codec can't decode byte 0x97 in position 520: ordinal not in range(128)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>In Python 3, <code>open</code> defaults to using the encoding returned by <code>locale.getpreferredencoding(False)</code>.  It isn't usually <code>ascii</code>, though, but it can be if running under some kind of framework, which your error message indicates.</p>
<p>Instead, specify the encoding of the file you are trying to read.  If the file was created under Windows, it is likely the encoding is <code>cp1252</code>, especially since the byte <code>\x97</code> is an <code>EM DASH</code> under that encoding.</p>
<p>Try:</p>
<pre><code>file = open(textPath, 'r', encoding='cp1252')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I believe One way to solve your question is by putting this code at the top of your file.</p>
<pre><code>import sys
reload(sys)
sys.setdefaultencoding("UTF8")
</code></pre>
<p>This will set the encoding to UTF8</p>
<p>Another (better) solution is a library called codecs, that is very easy to use.</p>
<pre><code>import codecs
fileObj = codecs.open( "someFile", "r", "utf-8" )
</code></pre>
<p>The fileObj is then a normal file object that can be read from and written to. </p>
<p><a href="https://stackoverflow.com/questions/2276200/changing-default-encoding-of-python">Source for Method 1</a>
<a href="http://www.evanjones.ca/python-utf8.html" rel="nofollow noreferrer">Source for Method 2</a></p>
<p><strong><em>Note for Method 1</em></strong> <br/>
This can be extremely dangerous when using third party apps that use ASCII as their encoding. Use with caution.</p>
</div>
<span class="comment-copy">use button <code>{}</code> to correctly display code.</span>
<span class="comment-copy">Please format your code correctly by copy-and-paste from the original source code, then highlighting the code and clicking the <code>{}</code> button in the editor.</span>
<span class="comment-copy">Probably Python tries to decode file to unicode when it read file but it doesn't know what encoding is used in file so it treats it as ASCII. Maybe try <code>encoding=</code> in <code>open()</code>: <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer">docs.python.org/3/library/functions.html#open</a></span>
<span class="comment-copy">I tried this but now it kicks back this error... UnicodeDecodeError: 'utf-8' codec can't decode byte 0x97 in position 520: invalid start byte &gt;&gt;&gt;</span>
<span class="comment-copy">This worked great. Thank you</span>
<span class="comment-copy"><a href="https://anonbadger.wordpress.com/2015/06/16/why-sys-setdefaultencoding-will-break-code/" rel="nofollow noreferrer">Why sys.setdefaultencoding will break code</a>.  Definitely not the "best way".  The function doesn't work without the <code>reload(sys)</code> trick for a reason.</span>
<span class="comment-copy">@MarkTolonen I clarified what I meant to say</span>
