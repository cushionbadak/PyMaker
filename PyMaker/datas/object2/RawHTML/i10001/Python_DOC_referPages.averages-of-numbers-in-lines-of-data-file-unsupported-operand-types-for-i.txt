<div class="post-text" itemprop="text">
<p>I'm trying to write some code that analyses a .csv file and then returns the average of the numbers on each line of the file as a list.</p>
<p>This is the code I have but I get this error which I don't understand!</p>
<pre><code>def mean(values):
return sum(values) / len(values)


def line_averages(filename):
   """ compute the average value for every line, and return the average
   values in a list in the file "filename" """
   f = open(filename, "r")
   x = f.read()
   f.close()
   no_lines = x.split('\n')       # remove lines
   means = []
   for i in no_lines:
       no_commas = i.split(',')    # remove commas
       means.append(mean(no_commas))
   return means
</code></pre>
<p>An example file of data is:</p>
<pre><code>1,2
1,1,1,1
-1,0,1
42,17
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This is better done with the <a href="https://docs.python.org/2/library/csv.html#module-csv" rel="nofollow noreferrer"><code>csv</code></a> module. You can use the <a href="https://docs.python.org/2/library/csv.html#csv.reader" rel="nofollow noreferrer"><code>csv.reader</code></a> method which takes a file object as parameter and whose default delimiter is a comma:</p>
<p>Here's one way to do it using a <em>list comprehension</em> with the <a href="https://docs.python.org/2/library/csv.html#csv.reader" rel="nofollow noreferrer"><code>csv.reader</code></a> object:</p>
<pre><code>import csv

def line_averages(filename):
    with open(filename) as f:
        reader = csv.reader(f)
        means = [sum(map(float, row))/len(row) for row in reader]
    return means
</code></pre>
<p>The <a href="https://docs.python.org/2/reference/compound_stmts.html#the-with-statement" rel="nofollow noreferrer"><code>with</code></a> statement opens the file within a <em>context</em> and closes the file automatically once we move out of that context. You can wrap the list comp. in a <code>try/except</code> that handles <a href="https://docs.python.org/2/library/exceptions.html#exceptions.ZeroDivisionError" rel="nofollow noreferrer"><code>ZeroDivisionError</code></a> should in case there are rows with zero length in your file.</p>
</div>
<span class="comment-copy">You are getting those values as strings. You have to cast the numerical string values to <code>int</code>. Also, why aren't you using the <a href="https://docs.python.org/3/library/csv.html" rel="nofollow noreferrer">csv</a> module to do this?</span>
