<div class="post-text" itemprop="text">
<p>I need to copy various files for several times with a specific name and I wanted to make the process automate. This is my python code: </p>
<pre><code>number_of_copies = int(raw_input("enter number of copies "))

copy_number = 1

infile = raw_input("file to be copied ")
new_file = raw_input("What's the name of the new file?")
extension = ".fastq"
indata = open(infile)

file_to_copy = str(indata.read())

while copy_number &lt; number_of_copies:

    copy = open(new_file + "-" + str(copy_number) + extension, 'w')
    copy.write(file_to_copy)
    copy_number = copy_number + 1    

indata.close()
copy.close()
</code></pre>
<p>In this case I know the extension of my file so I have hard coded it and I just change that variable in the script accordingly. 
The script works fine with my .fastq files (basically text files) but as soon as I try it on a fastq.gz file (compressed) the copy has size 1kb (from original &gt;300 Mb size). I believe the problem is with the fact that the .gz is a compressed file but I don't know how to solve this. Any help is greatly appreciated. </p>
<p>p.s. of course, when I try it with the .gz files I change the "extension" variable as well.</p>
<p>Thank you in advance!</p>
</div>
<div class="post-text" itemprop="text">
<p>As noted in the comments, using <code>shutil</code> is more efficient. </p>
<p>You're getting errors because your OS does <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer">newline translation</a> on text files. So to use the above code correctly on all files you need to open them in binary mode, eg </p>
<pre><code>open(infile, 'rb') 
</code></pre>
<p>and </p>
<pre><code>open(new_file + "-" + str(copy_number) + extension, 'wb')
</code></pre>
<p>Here are the Python 2 docs for <a href="https://docs.python.org/2/library/functions.html#open" rel="nofollow noreferrer">open</a>. And <a href="https://stackoverflow.com/a/1466036/4014959">this answer</a> has a handy table of the standard file modes.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>with open('recipes.tar.gz', 'r') as raw_file:
    with open('new.gz', 'w') as new_file:
        new_file.write(raw_file.read())
</code></pre>
<p>I think your question is can't open the ".gz" extension file, so I try it, does not happened any problem. Of course if your file is very lage, it will be another problem.</p>
</div>
<span class="comment-copy">Check this link <a href="https://docs.python.org/2/library/shutil.html" rel="nofollow noreferrer">docs.python.org/2/library/shutil.html</a>, I think better to use function  shutil.copyfile</span>
<span class="comment-copy">Is this on Windows?</span>
<span class="comment-copy">Yes, taken from the  documentation 'On Windows, file owners, ACLs and alternate data streams are not copied.'</span>
<span class="comment-copy">Also see <a href="http://stackoverflow.com/questions/16627465/copying-files-with-python" title="copying files with python">stackoverflow.com/questions/16627465/copying-files-with-python</a></span>
<span class="comment-copy">Thank you! I had a look at that! Pretty interesting and useful indeed!</span>
<span class="comment-copy">@Faber No worries. I've added a couple of Python 2 links to my answer. BTW, you should seriously consider moving to Python 3 because Python 2 won't be supported after 2020.</span>
