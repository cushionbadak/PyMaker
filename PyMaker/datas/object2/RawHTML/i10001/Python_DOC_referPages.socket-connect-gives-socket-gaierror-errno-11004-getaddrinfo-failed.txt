<div class="post-text" itemprop="text">
<p>I have already checked answers regarding my problem, but I couldn't find what's wrong. I am new to Python and that might be a problem. I have written this simple code to connect to a site, but I get this error:</p>
<blockquote>
<p><code>socket.gaierror: [Errno 11004] getaddrinfo failed</code></p>
</blockquote>
<p>This is my code:</p>
<pre><code>import socket
mysock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
mysock.connect(('http://www.py4e.com', 80))
mysock.send('GET http://www.py4e.com/code3/mbox-short.txt HTTP/1.0\n\n')
while True:
    data = mysock.recv(512)        
    if(len(data) &lt; 1):
        break
    print (data)
mysock.close()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>import socket
mysock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
mysock.connect(('www.py4e.com', 80))
mysock.send('GET http://www.py4e.com/code3/mbox-short.txt HTTP/1.0\n\n')
while True:
    data = mysock.recv(512)        
    if(len(data) &lt; 1):
        break
    print (data)
mysock.close()
</code></pre>
<p>Quite simple, don't use <code>http://</code> in your host declaration on <code>.connect()</code>.<br/>
<code>http://</code> is a <strong>protocol</strong> and <code>www.py4e.com</code> is a <strong>host</strong> (or A record in a DNS server). The standard socket library doesn't know anything regarding protocols and there for requires only a <strong>host</strong> and a <strong>port</strong> number.<br/>
If you want automated processes check out <a href="https://docs.python.org/3/library/urllib.request.html" rel="nofollow noreferrer">urllib.request</a> or @Mego's answer using <a href="http://docs.python-requests.org/en/master/" rel="nofollow noreferrer">Requests</a> which handles the connection and HTTP parsing for you.</p>
<p>Also if you're using <code>Python3</code> which you probably should, you need to send <code>bytes</code> data when doing <code>.send()</code>.</p>
<p>There's two ways of converting your string to <code>bytes</code> data:</p>
<pre><code>mysock.send(b'GET http://www.py4e.com/code3/mbox-short.txt HTTP/1.0\n\n')
mysock.send(bytes('GET http://www.py4e.com/code3/mbox-short.txt HTTP/1.0\n\n', 'UTF-8'))
</code></pre>
<p>Both does the same thing basically.</p>
<p>Finally, in a <code>GET</code> request you don't request <code>http://</code> either.<br/>
Instead you just send the path to the file you want to retrieve:</p>
<pre><code>mysock.send(b'GET /code3/mbox-short.txt HTTP/1.0\n\n')
</code></pre>
<p>The reason is (again) that <code>http://</code> is a protocol descriptor and not part of the actual protocol data being sent. You also don't need the <strong>host</strong> declaration in your <code>GET</code> request because the server that you connected to already knows which host you're on - since you're... connected to it.<br/>
Instead the server expects you to supply a <code>Host: &lt;hostname&gt;\r\n</code> header if the host is serving multiple virtual hosts.<br/>
You might need a few other headers tho to be able to request actual content from certain web-servers.<br/></p>
<p>But this is the basic jist of things.</p>
<h2>Continue reading</h2>
<p>Here's a good start:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Client_request" rel="nofollow noreferrer">https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Client_request</a></li>
</ul>
<p>It shows you what a raw <code>GET</code> request looks like.<br/>
An in the future I recommend using your browsers built-in <a href="https://developers.google.com/web/tools/chrome-devtools/network-performance/resource-loading" rel="nofollow noreferrer">Network Debugger</a> which can show raw headers, raw responses and a whole bunch of other things.</p>
</div>
<div class="post-text" itemprop="text">
<p>I would highly recommend you use the <a href="http://docs.python-requests.org/en/master/" rel="nofollow noreferrer">Requests module</a> instead of dealing with sockets directly.</p>
<p>To install Requests, simply run the following in a shell (you will need <code>sudo</code> on a Linux system):</p>
<pre><code>pip install requests
</code></pre>
<p>Then, your code is as simple as:</p>
<pre><code>import requests
req = requests.get('http://www.py4e.com/code3/mbox-short.txt')
data = r.text
print(data)
</code></pre>
</div>
<span class="comment-copy">Possible duplicate of <a href="http://stackoverflow.com/questions/15246088/what-does-this-socket-gaierror-mean">What does this socket.gaierror mean?</a></span>
<span class="comment-copy">Hostnames do <i>not</i> include the scheme (<code>xxx://</code>).</span>
<span class="comment-copy">@MichaelFoukarakis The duplicate is for binding a socket which in term works completely different during a hostname lookup. But it's worth noting tho.</span>
<span class="comment-copy">There are dozens of duplicate questions with the same error too, e.g. <a href="http://stackoverflow.com/questions/37469680/gaierror-errno-11004-getaddrinfo-failed">this</a>. Even if the exact MVCE isn't the same, looking at any one of them for this error code or description would resolve this problem.</span>
<span class="comment-copy">Thank you for your precious suggestions guys!</span>
<span class="comment-copy">Thank you very much for the help! I will check the link you sent as well.</span>
<span class="comment-copy">@A.Drosi You're welcome, and welcome to SO! If you feel like mine or any other answer solved your question, feel free to mark any of the answers you deem fit as a accepted solution. Best of luck.</span>
<span class="comment-copy">Thanks! I will check it.</span>
