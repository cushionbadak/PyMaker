<div class="post-text" itemprop="text">
<p>I have a .txt file with several paths to files and different extensions. Essentially it's a list of all resources used in a large project. There are often more than one file on a line.</p>
<p>What I want to do is get every file name with extension .png from this file and put them into a new text file.</p>
<p>This way I can take this .png file list, and compare it with the list I have already created which grabs all the file names and extensions of .png within my resource directory.</p>
<p>The code I am using for that part is:</p>
<pre><code>resourceList = [file for file in os.listdir('.') 
                if file.endswith('.png')]
</code></pre>
<p>My end goal is to compare file name lists and delete all the files from the resource directory that don't have a match.</p>
<p>I have been playing with <code>re</code> ,<code>glob</code> , and <code>strip</code> with little success.</p>
<p>Any help would be greatly appreciated. My programming skills are fair at best and I have been banging my head against this for a while now. Thanks!</p>
<p><strong>UPDATE #2</strong></p>
<pre><code>with open('Resource_PNGs.txt') as f:
    for line in f:
        if '.png' in line:
            (head, tail) = os.path.split(line)
            print('%s' % (tail))
</code></pre>
<p><strong>To Clarify:</strong> 
The resource list I have figured out is a list of file names taken out of a directory. Example:
<code>'Button.png', 'Switch.png', etc</code>.
The one I am having trouble with is a text file copied from a search done in Visual Studio for '*.png' so I have the file the .png is being referenced in with path, some other C++ garbage, and the filename.png that i am looking to capture. I eventually would like to compare the 2 lists, and see which files don't have a match. The lines look like this:</p>
<pre><code>  C:\BaseProjects\Source\FileManagerGeneralSettings.qml(86):        buttonImageName: imgDirUrlString + "/WizBack_titleBar.png"
  C:\BaseProjects\Source\FileSendPage.qml(35):            source: imgDirUrlString + "/TabEmpty.png"
  C:\BaseProjects\Source\FileSendPage.qml(224):                buttonIcon: imgDirUrlString + "/DialogConfirm.png"
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You should look at the <a href="http://docs.python.org/3/library/os.path.html" rel="nofollow">os.path</a> module. It does all the managing of file paths and directories across platforms.</p>
<p>To get the file name except the extension look at basename</p>
<p>On in this case use join to add .png to the end of all your entries in the list to be compared as this will mean the filenames are complete and can be passed to the delete function.</p>
</div>
<div class="post-text" itemprop="text">
<p>Yea!</p>
<p>I am one step closer to my final goal. I now have two lists that I can iterate through comparing the strings to find which ones match.</p>
<p>To create a list of .pngs within the directory I am using:</p>
<pre><code>resourceList = [file for file in os.listdir('.') if file.endswith('.png')]
</code></pre>
<p>To create the second list which pulls all the .pngs out of a mess of text in a text file I am using this:</p>
<pre><code>with open('Resource_PNGs.txt', 'rU') as f:
    for line in f:
        usedPngs = (re.findall('([-\w]+\.(?:png))', f.read()))
</code></pre>
<p>I was not aware of all the different "wildcard" characters for strings, but it seemed like the only to do it. I was having little luck with <code>os.path</code> because it was giving me all the other paths found. I'm sure with some of the same <code>re</code> magic I could have gotten it.</p>
<p>Hopefully my problem can help others. Now off to comparing!</p>
</div>
<span class="comment-copy"><i>"There are often more than one file on a line."</i>  But the files names are always separated with blanks, when it's the case, I suppose ?</span>
<span class="comment-copy"><i>"Essentially it's a list of all resources used in a large project"</i> The use of the word RESOURCE in this sentence makes it unclear (for me). What do you mean by resource ? Files names ? Files paths ? Directories names or paths ?</span>
<span class="comment-copy"><i>"all the files from the resource directory "</i> What is the resource directory ? I don't understand your problem.</span>
<span class="comment-copy">I have tried to <b>Clarify</b> above.</span>
<span class="comment-copy">How about goving the actual example</span>
<span class="comment-copy">I'll take a look. Thanks!</span>
<span class="comment-copy">I have been working with 'split' and 'basename' and it is clearing out a lot of stuff, but there is a lot of garbage left over yet.</span>
<span class="comment-copy">You are incredibly foggy. In <code>with open('Resource_PNGs.txt', 'rU') as f: etc....</code> : why to open in universal newline support mode 'U' ? Where is identifier <code>line</code> used after <code>for line in f</code> ? (nowhere). Why is there the character <code>-</code> in <code>[-\w]+</code> ?? Why do you put <code>png</code> between brackets, thus making a group of these characters, and making then a non captured group thanks to the two characters <code>?:</code> after the first brackets ?</span>
<span class="comment-copy">And last, I inform you that <code>f</code> is a kind of pointer in the content of the file, that goes forward in the file each time there is  reading. So when <code>for line in f</code> is executed, the file's pointer <code>f</code> proceeds until the end of each line at each turn of the loop. That, is what is supposed to happen in general when one writes sucha loop. But in your case, the instruction <code>f.read()</code> makes the entire file to be read. So as soon as the first turn of the loop is executed, the file's pointer <code>f</code> reaches the end of the file. And there is no second turn of the loop. All the file has been read</span>
<span class="comment-copy">You'll obtain exactly the same result if you remove the line <code>for line in f</code> : the whole file will be read in one chunk and <code>findall()</code> will search inside the whole of this chunk. - What is <code>findall()</code> supposed to catch, by the way ? The strings <code>"/WizBack_titleBar.png"</code> , <code>"/TabEmpty.png"</code> , <code>"/DialogConfirm.png"</code> ?</span>
<span class="comment-copy">@eyquem I used the <code>U</code> mode to make it compatible on all systems, maybe? I was unaware of how <code>f</code> worked. I suspected that <code>f</code> was the file and the best way to read it was to go line by line. I am not sure what the <code>-</code> does in <code>[-\w]</code> to be honest. I found the bulk of this expression elsewhere. The <code>?:</code> when removed puts parenthesis around each item, and that conflicts with the output I have in similar lists. The <code>f.read()</code> felt redundant, but the <code>findall</code> required another argument, so I thought that's what it wanted.</span>
<span class="comment-copy">I have removed the <code>for line in f</code> piece and the <code>-</code> and nothing foreseeable has changed.  You are correct. I am trying to pull just the file names out that end in .png.</span>
