<div class="post-text" itemprop="text">
<p>I am trying to create a hashing function with user interaction.
The idea is that the user chooses which hash he/she wants (i.e. md5, sha1 and so forth) and the program does the rest. </p>
<p>My code:</p>
<pre><code>hashstring = "hashlib" + finalHash

    filePath = open(chosenFile, 'rb')

    data = filePath.read(8192)

    if not data:
        return

    hashstring.update(data) # The line that causes error

    return hashstring.hexdigest()
</code></pre>
<p><code>finalHash</code> is from a dictionary containing (lets say md5 is chosen) <code>'.md5()'</code> so the string from <code>hashstring</code> is <code>'hashlib.md5()</code>.</p>
<p>I get the error: <code>AttributeError: 'str' object has no attribute 'update'</code>, the error points me to the obvious: <code>hashstring</code> is a string (as i declared it), my question goes: How do i convert or in other way make it useable as it is intended?</p>
</div>
<div class="post-text" itemprop="text">
<p>You could use <a href="http://docs.python.org/3/library/functions.html#getattr" rel="nofollow"><code>getattr</code></a>:</p>
<pre><code>import hashlib
chosenFile = '/etc/passwd'
finalHash = input('Which hash function?') # raw_input in Python 2
assert finalHash in ['md5', 'sha1'] # Optional
h = getattr(hashlib, finalHash)
h.update(open(chosenFile, 'rb').read())
print(h.hexdigest())
</code></pre>
<p>Note that the input must not contain dots or parentheses. If you want to allow the user to input <code>md5()</code> or so, you'll have to strip the parentheses first.</p>
</div>
