<div class="post-text" itemprop="text">
<p>I am attempting to pull out multiple (50-100) sequences from a large .txt file seperated by new lines ('\n'). The sequence is a few lines long but not always the same length so i can't just print lines x-y. The sequences end with " and the next line always starts with the same word so maybe that could be used as a keyword. </p>
<p>I am writing using python 3.3</p>
<p>This is what I have so far:</p>
<pre><code>searchfile = open('filename.txt' , 'r')

cache = [] 
for line in searchfile:
    cache.append(line)

for line in range(len(cache)):
    if "keyword1" in cache[line].lower():
        print(cache[line+5])
</code></pre>
<p>This pulls out the starting line (which is 5 lines below the keyword line always) however it only pulls out this line.</p>
<p>How do I print the whole sequence?</p>
<p>Thankyou for your help.</p>
<p>EDIT 1:</p>
<p>Current output =  ABCDCECECCECECE ...</p>
<p>Desired output = ABCBDBEBSOSO ...</p>
<pre><code>             ABCBDBDBDBDD ...

             continued until " or new line
</code></pre>
<p>Edit 2 </p>
<p>Text file looks like this:</p>
<pre><code>Name (keyword):
Date
Address1
Address2
Sex
Response"................................" 
Y/N
</code></pre>
<p>The sequence between the " and " is what I need</p>
<p>TL;DR -  How do I print from line + 5 to end when end = keyword</p>
</div>
<div class="post-text" itemprop="text">
<p>Not sure if I understand your sequence data but if you're searching for each 'keyword' then the next " char then the following should work:</p>
<pre><code>keyword_pos =[]
endseq_pos = []
for line in range(len(cache)):
    if 'keyword1' in cache[line].lower():
        keyword_pos.append(line)
    if '"' in cache[line]:
        endseq_pos.append(line)

for key in keyword_pos:
    for endseq in endseq_pos:
        if endseq &gt; key:
            print(cache[key:endseq])
            break
</code></pre>
<p>This simply compiles a list of all the positions of all the keywords and " characters and then matches the two and prints all the lines in between.</p>
<p>Hope that helps.</p>
</div>
<div class="post-text" itemprop="text">
<p>I agree with @Michal Frystacky that regex is the way forward.  However as I now understand the problem, we need two searches one for the 'keyword' then again 5 lines on, to find the 'sequence'</p>
<p>This should work but may need the regex to be tweaked:</p>
<pre><code>import re

with open('yourfile.txt') as f:
    lines = f.readlines()

for i,line in enumerate(lines):
    #first search for keyword
    key_match = re.search(r'\((keyword)',line)
    if key_match:
        #if successful search 5 lines on for the string between the quotation marks
        seq_match = re.search(r'"([A-Z]*)"',lines[i+5])
        if seq_match:
            print(key_match.group(1) +' '+ seq_match.group(1))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>1This can be done rather simply with <a href="https://docs.python.org/3/library/re.html" rel="nofollow">regex</a></p>
<pre><code>import re

lines = 'Name (keyword):','Date','Address1','Address2','Sex','Response"................................" '
for line in lines:
    match = re.search('.*?"(:?.*?)"?',line)
    if match:
        print(match.group(1))
</code></pre>
<p>Eventually to use this sample code we would <code>lines = f.readlines()</code> from the dataset. Its important to note that we catch only things between <code>"</code> and  another <code>"</code>, if there is no " mark at the end, we will miss this data, but accounting for that isn't too difficult.</p>
</div>
<span class="comment-copy"><code>print(cache[line:line + 5])</code> maybe?</span>
<span class="comment-copy">I am afraid it didn't work thankyou though</span>
<span class="comment-copy">Can you add a shortened version of what the text file is supposed to look like?</span>
<span class="comment-copy">GIven that you want to start at line+5 to the end wounld <code>print(cache[line+5:])</code> work to extend the slice to the end?</span>
<span class="comment-copy">it only prints line 5 rather than the next few lines as the problem is they are treated as seperate lines because of the array format</span>
<span class="comment-copy">The code seems to run fine but wont print so I can't check the output any suggestions?</span>
<span class="comment-copy">The code runs well but there is no printout for the output any suggestions</span>
<span class="comment-copy">@M.Smith12 if you are using python 2.7 try removing the brackets around the print function i.e. print key_match.....</span>
<span class="comment-copy">still no luck thankyou though</span>
<span class="comment-copy">@M.Smith12 looks like a RegEx problem then.  If can post a full unformated sample of say first 6 lines, then I may be able to help adjust the search string for you.</span>
<span class="comment-copy">I got: NameError: name 'text' is not defined</span>
<span class="comment-copy">Sorry it was supposed to be line and <code>file</code> is the file path/text name</span>
<span class="comment-copy">I am afraid that didn't work</span>
<span class="comment-copy">I have simplified the code to show how it would work based upon your sample file</span>
