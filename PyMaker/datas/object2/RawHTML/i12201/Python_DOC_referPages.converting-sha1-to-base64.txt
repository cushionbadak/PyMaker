<div class="post-text" itemprop="text">
<p>struggling to convert sha1 to base64</p>
<pre><code>import hashlib
import hmac
import base64

base_string = "POST&amp;https%3A%2F%2Fsecure.trademe.co.nz%2FOauth%2FRequestToken&amp;oauth_callback%3Dhttp%253A%252F%252Fwww.website-tm-access.co.nz%252Ftrademe-callback%26oauth_consumer_key%3DC74CD73FDBE37D29BDD21BAB54BC70E422%26oauth_nonce%3D7O3kEe%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1285532322%26oauth_version%3D1.0%26scope%3DMyTradeMeRead%252CMyTradeMeWrite".encode()
KEY = b"3B61C8A3FF9F1F6C0DBE436F9B507E08EF&amp;"
hmac.new(KEY, base_string, hashlib.sha1).base64()
</code></pre>
<p>AttributeError: 'HMAC' object has no attribute 'base64'</p>
</div>
<div class="post-text" itemprop="text">
<p>I think you need to call <a href="https://docs.python.org/2/library/base64.html#base64.b64encode" rel="nofollow"><code>base64.b64encode()</code></a> on the digest:</p>
<pre><code>import hashlib
import hmac
import base64

base_string = "POST&amp;https%3A%2F%2Fsecure.trademe.co.nz%2FOauth%2FRequestToken&amp;oauth_callback%3Dhttp%253A%252F%252Fwww.website-tm-access.co.nz%252Ftrademe-callback%26oauth_consumer_key%3DC74CD73FDBE37D29BDD21BAB54BC70E422%26oauth_nonce%3D7O3kEe%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1285532322%26oauth_version%3D1.0%26scope%3DMyTradeMeRead%252CMyTradeMeWrite".encode()
KEY = b"3B61C8A3FF9F1F6C0DBE436F9B507E08EF&amp;"

digest = hmac.new(KEY, base_string, hashlib.sha1).digest()
print(base64.b64encode(digest))
</code></pre>
</div>
<span class="comment-copy">Why did you assume the HMAC object had a <code>base64</code> method? <a href="https://docs.python.org/3/library/hmac.html" rel="nofollow noreferrer">The docs</a> don't show this.</span>
<span class="comment-copy">Possible duplicate of <a href="http://stackoverflow.com/questions/8338661/implementaion-hmac-sha1-in-python">Implementaion HMAC-SHA1 in python</a></span>
<span class="comment-copy">I honestly love you so much ! works like a charm :D :D :D :D :D :D :D :D :D so much relieffffffff</span>
