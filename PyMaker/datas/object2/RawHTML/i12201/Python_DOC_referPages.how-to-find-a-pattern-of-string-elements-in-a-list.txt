<div class="post-text" itemprop="text">
<p>what is the most efficient approach for finding the index of 'A's that are both immediately preceded and immediately followed by the letter 'C'? </p>
<p>In other words i'm looking to find the index of all the examples of the pattern ['C','A','C'] in the list below.</p>
<pre><code>import random
letterlist = [random.choice('ABC') for i in range(1000)]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Unfortunately, <code>list.index</code> only allows you to search for individual elements, not for sublists. However, you can search for substrings in strings, both with <code>str.find</code> and <code>str.index</code> as well as with regular expressions.</p>
<p>Thus, the easiest way would be to convert the list to a string (or to not convert the string to a list in the first place) and then using <a href="https://docs.python.org/3/library/re.html#re.finditer" rel="nofollow"><code>re.finditer</code></a>:</p>
<pre><code>&gt;&gt;&gt; letterstring = ''.join(letterlist)
&gt;&gt;&gt; [m.start() for m in re.finditer("CAC", letterstring)]
[15, 104, some more, 986, 990]
</code></pre>
<p>Note that this will give you the starting position of the pattern as a whole. If you want to have the positions of all the <code>A</code>s, you have to <code>+1</code> accordingly.</p>
<p>If the strings in the list are each one character long, you can just use the index in the string to index the list:</p>
<pre><code>&gt;&gt;&gt; indices = [m.start() + 1 for m in re.finditer("CAC", letterstring)]
&gt;&gt;&gt; all(letterlist[i] == "A" for i in indices)
True
</code></pre>
<p>If the strings can be longer, the convert-to-string approach is not as feasible, for one because it's harder to map the index in the string back to the list, for another because strings could be substrings of other strings. And of course it would not work at all for lists holding other stuff than strings.</p>
<p>In this case, you could work directly on the list, comparing slices of the list to some pattern:</p>
<pre><code>&gt;&gt;&gt; [i for i in range(len(letterlist)) if letterlist[i-1:i+2] == ["C","A","C"]]
</code></pre>
</div>
<span class="comment-copy">When you say "preceded and followed by", do you mean <i>immediately</i> preceeded and followed? Have tried <code>text.find("A,C,A")</code>? Also, didn't you mean <code>CAC</code> rather than <code>ACA</code>? Also, why do you <code>','.join</code> just to <code>split(',')</code> right afterwards?</span>
<span class="comment-copy">thanks for the suggestions. could you post your solution as an answer to the example above?</span>
