<div class="post-text" itemprop="text">
<p>I have two INI files <code>a , b</code> like below</p>
<p>File a.ini</p>
<pre><code>##########################################
## Application

## Var                          Values                  Comment
## --------                     ------------------      ----------------- 
------------------------------
## Application                   1,2                    Each server is attached to a valid point
##                                                      t2
##                                                      1 = dummy, 2 = hds
app=3
sv=2
type=ort
serv=t2
val=d7
</code></pre>
<p>File b.ini</p>
<pre><code>##########################################
## Application

## Var                          Values                  Comment
## --------                     ------------------      -------------------- 
---------------------------
## Application                   1                      Each server is attached to a valid point
##                                                      t2
##                                                      1 = dummy, 
app=3
sv=2
type=ort3
serv=t22
stage=5
</code></pre>
<p>I want to compare the un commented keys of <code>a.ini</code> with un commented keys of <code>b.ini</code>. So If keys are matched then I want copy the values of matched keys of <code>a.ini</code> to <code>b.ini</code> without disturbing the comments because this is well structured file. If the new keys are present in <code>a.ini</code> then that key, values blindly copy to <code>b.ini</code>. and when we write the matched keys of values to <code>b.ini</code> the position of keys should not change.</p>
<p>so the final output will be like below</p>
<pre><code>##########################################
## Application

## Var                          Values                  Comment
## --------                     ------------------      -------------------- 
---------------------------
## Application                   1                      Each server is attached to a valid point
##                                                      t2
##                                                      1 = dummy, 
app=3
sv=2
type=ort
serv=t2
stage=5
val=d7
</code></pre>
<p>I have followed the below way but it worked until read data of two <code>INI</code> files and print matched dictionary key-pairs.</p>
<pre><code>separator = "="
keys = {}
with open('test.ini') as f:
    for line in f:
        if separator in line:
            name, value = line.split(separator, 1)
            keys[name.strip()] = value.strip()
separator1 = "="
keys1 = {}
with open('temp.ini') as f1:
    for line in f1:
       if separator1 in line:
            name, value = line.split(separator1, 1)
            keys1[name.strip()] = value.strip()
for key, value in keys.viewitems() &amp; keys1.viewitems():
    print(key, value)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Your last loop isn't quite right.  <code>for x in y &amp; z</code> doesn't work the way you think it does.  Also, you have to use <code>and</code> instead of <code>&amp;</code>.</p>
<p>Try this instead:</p>
<pre><code>for key, value in keys.items():
    if key in keys1 and keys1[key] == value:
        print(key, value)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use the following code</p>
<pre><code>with open("out.ini", 'w') as outfile_handle:
   for key, value in keys1.iteritems():
      outfile_handle.write("%s\n" % separator.join([key, keys.get(key, value)]))
</code></pre>
<h2>Update</h2>
<p>In case you want union of all keys from both files, you can first create a union of both key sets and then iterate over that to form the file. See code below. </p>
<pre><code>with open("out.ini", 'w') as outfile_handle:
   all_keys = set(keys.keys() + keys1.keys())
   for key in all_keys:
      val1 = keys.get(key)
      val2 = keys1.get(key)
      outfile_handle.write("%s\n" % separator.join([key, val2 or val1]))
</code></pre>
<p>Here, val2 or val1 is used to make sure that we prefer the second file's value over the first file's one. You shall use val1 or val2 if you need to prefer first file's value over the second one.</p>
</div>
<span class="comment-copy">Use Python's <a href="https://docs.python.org/3/library/configparser.html" rel="nofollow noreferrer">configparser</a> module</span>
<span class="comment-copy">It worked for me..@Arun Kumar. But here I need to copy new key-pairs to <code>temp.ini</code>. like if any new key values are found in <code>test.ini</code> then those key-values should be copied to <code>temp.ini</code></span>
<span class="comment-copy">See the updated answer</span>
<span class="comment-copy">Hi Arun.. Can you please check my updated question?</span>
