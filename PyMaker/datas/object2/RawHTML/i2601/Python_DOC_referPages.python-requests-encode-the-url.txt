<div class="post-text" itemprop="text">
<p>I am trying to search in google via parameters, it's working when I search one word, but one I do space its broken I know there is a way to encode the url.</p>
<pre><code>import urllib.request
from urllib.parse import urlencode, quote_plus
from fake_useragent import UserAgent
import time
import requests
from bs4 import BeautifulSoup

keyword = "host free"
url = "https://www.google.co.il/search?q=%s" % (keyword)
print(url)

thepage = urllib.request.Request(url, headers=request_headers)
page = urllib.request.urlopen(thepage)

//Continue...
</code></pre>
<p>Traceback:</p>
<pre><code>https://www.google.co.il/search?q=host free
Traceback (most recent call last):
  File "C:\Users\Maor Ben Lulu\Desktop\Maor\Python\google\Google_Bot_new.py", line 42, in &lt;module&gt;
    page = urllib.request.urlopen(thepage)
  File "C:\Program Files (x86)\Python37-32\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Program Files (x86)\Python37-32\lib\urllib\request.py", line 531, in open
    response = meth(req, response)
  File "C:\Program Files (x86)\Python37-32\lib\urllib\request.py", line 641, in http_response
    'http', request, response, code, msg, hdrs)
  File "C:\Program Files (x86)\Python37-32\lib\urllib\request.py", line 569, in error
    return self._call_chain(*args)
  File "C:\Program Files (x86)\Python37-32\lib\urllib\request.py", line 503, in _call_chain
    result = func(*args)
  File "C:\Program Files (x86)\Python37-32\lib\urllib\request.py", line 649, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 400: Bad Request
[Finished in 0.7s with exit code 1]
[shell_cmd: python -u "C:\Users\Maor Ben Lulu\Desktop\Maor\Python\google\Google_Bot_new.py"]
[dir: C:\Users\Maor Ben Lulu\Desktop\Maor\Python\google]
[path: C:\Program Files (x86)\Python37-32\Scripts\;C:\Program Files (x86)\Python37-32\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;D:\Program Files\Git\cmd;C:\Users\Maor Ben Lulu\AppData\Local\Microsoft\WindowsApps;]
</code></pre>
<p>Also once I write in hebrew its saying :</p>
<blockquote>
<p>UnicodeEncodeError: 'ascii' codec can't encode characters in position 14-18: ordinal not in range(128)</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>There is a way to encode url with <a href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote" rel="nofollow noreferrer">urllib.parse.quote</a>
but there is <a href="https://pypi.org/project/requests/" rel="nofollow noreferrer">requests</a> module which is very helpful in all such case and you can use it as below:</p>
<pre><code>import requests
base_url = 'https://www.google.co.il/search'
res = requests.get(base_url, params={'q': 'host free'})  # query parameter and value in dict format to be passed as params kwarg
</code></pre>
<p>As you can see above you can pass query parameters as keyword argument</p>
</div>
<span class="comment-copy">I need it with headers</span>
<span class="comment-copy">Also need to do soup = BeautifulSoup(res, "html.parser") to the response</span>
<span class="comment-copy">I gave answer to suffice the question requirement, what you do with response is another thing, you can store response to file, mutate it or whatever you desire you can do with it</span>
