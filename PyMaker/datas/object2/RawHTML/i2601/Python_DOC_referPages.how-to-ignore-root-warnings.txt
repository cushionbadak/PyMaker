<div class="post-text" itemprop="text">
<p>I generate monochromatic images and save them using <code>imageio.imwrite</code>. Every time I save a file I get a following warning:</p>
<pre><code>WARNING:root:Lossy conversion from float64 to uint8. Range [-0.24890179009891278, 2.35786261304524]. Convert image to uint8 prior to saving to suppress this warning.
</code></pre>
<p>I don't care for this "lossy conversion". Everything looks well and works fine. </p>
<p>However, every ~100 generated images I got different warning which I want to catch. Thus I want to ignore the above one.</p>
<p>I tried to ignore it, but even if I call</p>
<pre><code>import warnings
warnings.simplefilter('ignore')
</code></pre>
<p>beforehand I still get this warning.</p>
</div>
<div class="post-text" itemprop="text">
<p>The library doesn't use the <code>warnings</code> module. Instead, it logs a message using the <a href="https://docs.python.org/3/library/logging.html" rel="nofollow noreferrer"><code>logging</code> framework</a>, by calling the top-level <a href="https://docs.python.org/3/library/logging.html#logging.Logger.warning" rel="nofollow noreferrer"><code>logging.warning()</code> function</a>. See the <a href="https://github.com/imageio/imageio/blob/5c8c440a55eb22e0ec8526e47bf405eb84b9a164/imageio/core/util.py#L56-L61" rel="nofollow noreferrer"><code>imageio.core.util._precision_warn()</code> function</a>:</p>
<pre><code>from logging import warning as warn

# ...

def _precision_warn(p1, p2, extra=""):
    t = (
        "Lossy conversion from {} to {}. {} Convert image to {} prior to "
        "saving to suppress this warning."
    )
    warn(t.format(p1, p2, extra, p2))
</code></pre>
<p>This is... unfortunate, as you can't easily disable this using the <code>logging</code> API. Best practice is to use a dedicated named logger for libraries.</p>
<p>As such, it is probably best to <em>patch</em> the library no make the above function a no-op:</p>
<pre><code>import imageio.core.util

def silence_imageio_warning(*args, **kwargs):
    pass

imageio.core.util._precision_warn = silence_imageio_warning
</code></pre>
<p>You could also silence <em>all logging</em>, adjusting configurion on the root logger. This is not ideal, as you may want to use logging yourself or use third-party libraries that are better behaved.</p>
<p>I've <a href="https://github.com/imageio/imageio/issues/376" rel="nofollow noreferrer">filed an issue with the project</a> to ask them to fix their logging story.</p>
</div>
<div class="post-text" itemprop="text">
<p>try</p>
<pre><code>warnings.filterwarnings("ignore")
</code></pre>
</div>
<span class="comment-copy">This is very enlightening for me. Thanks a lot!</span>
<span class="comment-copy">It is still popping</span>
<span class="comment-copy">That's because the warning is <b>not a <code>warnings</code> warning</b>. You can see this from the output, the <code>WARNING:root:</code> prefix shows it is a <code>logging.warning()</code> message instead.</span>
<span class="comment-copy">thanks for the information! @MartijnPieters</span>
