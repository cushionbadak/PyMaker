<div class="post-text" itemprop="text">
<p>I'm making program that open txt file and replace first 0 with 1 of given line. Now it only print the edited line, but I want that it prints all the lines. I'm using python 3.1.</p>
<pre><code>line_number = 3
with open(filename, "r") as f:
    number = 0
    for line in f:
        number += 1
        if line_number == number:
            content = line.replace("0","1",1)
savefile = filename[:4] + ".tmp"
with open(savefile, "w") as f:
    f.write(content)
os.remove(filename)
os.rename(savefile, filename)
</code></pre>
<p>Text file:</p>
<pre><code>0 Dog
0 Cat
0 Giraffe
0 Leopard
0 Bear
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You need to write each unchanged line to the <code>savefile</code>:</p>
<pre><code>import os
filename = 'input.txt'

line_number = 3
savefile = filename[:4] + ".tmp"
with open(filename, "r") as f:
    with open(savefile, "w") as fout:
        number = 0
        for line in f:
            number += 1
            if line_number == number:
                content = line.replace("0","1",1)
                fout.write(content)
            else:
                # Write unchanged lines here
                fout.write(line)
os.remove(filename)
os.rename(savefile, filename)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Did you try something like this:</p>
<pre><code>filename = "./test.txt"

with open(filename) as f:
    lines = f.readlines()
# the element with index 2 is the 3-th element
lines[2] = lines[2].replace("0","1",1)

with open(filename, 'w') as f:
        [f.write(line) for line in lines]
</code></pre>
<p>Output(<code>./test.txt</code>):</p>
<pre><code>0 Dog
0 Cat
1 Giraffe
0 Leopard
0 Bear
</code></pre>
<p>You can read the file and save it to a list. Then you can then perform a certain action for each item(or for a specific element) in the list and save the result in the same file. You don't need of <code>.tmp</code> file or to remove and rename a file. </p>
<p><strong>Edit:</strong><br/>
There is an another approach with <a href="https://docs.python.org/3/library/fileinput.html#fileinput.input" rel="nofollow noreferrer"><code>fileinput</code></a> (thanks to @PeterWood)</p>
<pre><code>import fileinput

with fileinput.input(files=('test.txt',), inplace=True) as f:
    for line in f:
        if fileinput.lineno() is 3:
            print(line.replace("0", "1", 1).strip())
        else:
            print(line.strip())
</code></pre>
</div>
<span class="comment-copy">Output in the loop</span>
<span class="comment-copy">I think you do not need of <code>tmp</code> file to to this. <code>remove</code> and <code>rename</code> are also redundant.</span>
<span class="comment-copy">See <a href="https://docs.python.org/3/library/fileinput.html#fileinput.input" rel="nofollow noreferrer"><b><code>fileinput</code></b></a> for in-place editing of files.</span>
<span class="comment-copy">@PeterWood, very good idea. <code>fileinput</code> will be a more "natural" solution of the problem.</span>
<span class="comment-copy">he only wants to change 0 to 1 in line 3, it wasn't super clear to me at first either.</span>
<span class="comment-copy">@d_kennetz, you are right. I already edited the answer. Thanks.</span>
