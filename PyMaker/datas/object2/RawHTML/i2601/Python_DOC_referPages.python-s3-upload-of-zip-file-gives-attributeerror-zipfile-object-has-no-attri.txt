<div class="post-text" itemprop="text">
<pre><code>I try to upload a zip file to my S3 bucket, but getting 
</code></pre>
<blockquote>
<p>AttributeError: 'ZipFile' object has no attribute 'tell' error</p>
</blockquote>
<pre><code>conn = boto.s3.connect_to_region(region_name=s3region,
                                             aws_access_key_id=userid,
                                             aws_secret_access_key=accesskey,
                                      calling_format=boto.s3.connection.OrdinaryCallingFormat())

            bucket = conn.get_bucket(s3bucket)

            k = boto.s3.key.Key(bucket, zipf)

            k.send_file(zipf) //&lt;----Gives Exception
</code></pre>
<p>What is wrong here? (zipf is my zipfile)</p>
<p>if I modify the code like this;</p>
<pre><code>   with open(zipf) as f:
            k.send_file(f)
</code></pre>
<p>I get </p>
<blockquote>
<p>TypeError: coercing to Unicode: need string or buffer, ZipFile found</p>
</blockquote>
<p>I created zip file like;</p>
<pre><code>zipfilename = 'AAA_' + str(datetime.datetime.utcnow().replace(microsecond=0)) + '.zip'
    zipf = zipfile.ZipFile(zipfilename, mode='w')

    for root, dirs, files in os.walk(path):
        for f in files:
            zipf.write(os.path.join(root, f))
    zipf.close()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Your zipfile is created with <code>zipf = zipfile.ZipFile(zipfilename, mode='w')</code>. </p>
<p>Following the <a href="https://docs.python.org/3/library/zipfile.html#zipfile.ZipFile.open" rel="nofollow noreferrer">zipfile documentation</a>, the <code>tell()</code> attribute is only defined for <code>mode='r'</code>.</p>
<p>There is no reason to use a zipfile object, moreover in write mode, to upload a file (be it zip or whatever) that we want read, in order to upload it to S3.</p>
<p>Just use <code>open(zipfilename, 'r')</code> before calling <code>send_file()</code> on the key.</p>
</div>
<span class="comment-copy">as an experienced user, i am sure you are well aware of the important of complete stacktrace</span>
<span class="comment-copy">@e4c5 updated my question.Only one line exception i get</span>
<span class="comment-copy">Still your code is disjointed.</span>
<span class="comment-copy">I did like this ;    with open(zipf,'r') as f:             k.send_file(f) but getting TypeError: coercing to Unicode: need string or buffer, ZipFile found</span>
<span class="comment-copy">ah, sorry, you changed your question when I was answering to it :/</span>
<span class="comment-copy">You need to open the zipfilename, not zipf. Once more, you are working with a ZipFile object rather than a filename. Thus, My first answer was correct.</span>
<span class="comment-copy">But S3 gives following error. Do you know what is the issue here? boto.exception.S3ResponseError: S3ResponseError: 400 Bad Request.An error occurred when parsing the HTTP request</span>
<span class="comment-copy">what about using <code>set_contents_from_file()</code> instead of <code>send_file()</code> ?</span>
