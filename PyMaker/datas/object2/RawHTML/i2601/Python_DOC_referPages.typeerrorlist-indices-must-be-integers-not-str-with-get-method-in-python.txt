<div class="post-text" itemprop="text">
<p>I am trying to convert JSON files to CSV using below code. The PARENT_ID and PARENT_TYPE fields can be NULL most of the times. If I use result["parent"]["id"] it returns KeyError. That's why I thought of using get() to return whatever value they hold. But I am getting <strong>TypeError('list indices must be integers, not str',)</strong> for these fields. Can anyone suggest any workaround? 
Thanks in advance!   </p>
<blockquote>
<p>"parent" is a list within "result" dict.</p>
</blockquote>
<pre><code>my_dict_list =[]
try:
    for f in os.listdir(file_dir):
        if f.endswith('.json') and f.startswith('folders_'):
            file_path = os.path.join(file_dir, f)
            data = open(file_path, 'r')
            for line in data:
                my_dict = {}
                parsed_data = json.loads(line)
                my_dict["REQUEST_ID"] = parsed_data["requestId"]
                my_dict["SUCCESS"] = parsed_data["success"]
                for result in parsed_data["result"]:
                    my_dict["NAME"] = result["name"]
                    my_dict["DESCRIPTION"] = result["description"]
                    my_dict["FOLDER_ID"] = result["folderId"]["id"]
                    my_dict["FOLDER_ID_TYPE"] = result["folderId"]["type"]
                    my_dict["FOLDER_TYPE"] = result["folderType"]
                    my_dict["PARENT_ID"] = result.get(["parent"]["id"])
                    my_dict["PARENT_TYPE"] = result.get(["parent"]["type"])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Currently you are trying to access the member "id" from a list with the string "parent" in the following line:</p>
<pre><code>my_dict["PARENT_ID"] = result.get(["parent"]["id"])
</code></pre>
<p>You have to check if the result dict contains the key "parent".
The <a href="https://docs.python.org/3/library/stdtypes.html#dict.get" rel="nofollow noreferrer">get method</a> of your result dict can be used for this.</p>
<p>It returns <em>None</em> if the dict does not contain the key "parent".
Otherwise use the get method and try to get the <em>id</em> of the parent</p>
<p>Your code has to be</p>
<pre><code>my_dict["PARENT_ID"] = result["parent"].get("id") if result.get("parent") else None
</code></pre>
</div>
<span class="comment-copy">as a tip try using continue statement on your if conditions, it will help your code indentation.</span>
<span class="comment-copy">is <code>result['parent']</code> a list of objects? Can you post the json/structure of json please?</span>
<span class="comment-copy">Thank you! It worked.</span>
<span class="comment-copy">You're welcome!</span>
