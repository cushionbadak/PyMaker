<div class="post-text" itemprop="text">
<p>I run celeryd in prefork mode with cuncurrency &gt; 1 like below:</p>
<pre><code>celery worker -c 100 -A x.y.z.tasks -f mylogfile.log --loglevel=INFO -n myworker
</code></pre>
<p>As Pythons's logging from multiple processes into one file is not safe (<a href="https://docs.python.org/3/howto/logging-cookbook.html#logging-to-a-single-file-from-multiple-processes" rel="nofollow">link</a>), does Celery do something about this? Like dispatching logging to main process and open file just once?</p>
<p>What if I redirect all logs to <code>stderr</code> (no <code>-f</code>) and pipe <code>stderr</code> to a file with supervisor?</p>
</div>
<div class="post-text" itemprop="text">
<p>only master process is handling this log file, so you are safe</p>
</div>
<span class="comment-copy">Take a gander at <a href="https://github.com/celery/celery/blob/aee706ad5a743e3a51ed40f827bc02e61947902d/celery/app/log.py" rel="nofollow noreferrer">celery/app/log.py</a> and <a href="https://github.com/celery/celery/blob/d676150e7b45618618d2e5cf2ac4e9bfb108231b/celery/utils/log.py" rel="nofollow noreferrer">celery/utils/log.py</a> and see if it use a SocketHandler and separate process for handling the job.</span>
