<div class="post-text" itemprop="text">
<p>I noticed a very strange behavior when working with python that binds 2 variables, that are set equal, to the same changes and I want to know if anyone has an explanation for this behavior and if there is a better solution than mine for it.</p>
<p>For example, I have an array called schema1. I later need to expand schema1 with a new set of variables but I can't mess up the original array so I create schema2 by setting it equal to schema1 like so:</p>
<pre><code>    from someFileICreated import SomeClass

      schema1 = SomeClass.SomeSchema 
</code></pre>
<p>Suppose schema1 has array [a, b, c], then I:</p>
<pre><code>      schema2 = schema1
      schema2.append(d, e, f)
</code></pre>
<p>Now, schema2 should have [a, b, c, d, e, f]
However, for some reason, schema1 also has [a, b, c, d, e, f]</p>
<p>I don't understand this behavior, so if you have an explanation that would be great. As far as solutions go, this will work, but I'm wondering if there is another way that is better and can avoid a loop.</p>
<p>Instead of setting schema2 = schema1 I just do this:</p>
<pre><code>    schema2 = []
    for x in schema1:
        schema2.append(x)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>It's important to remember that in Python, variables are not little boxes that hold stuff, they're just handy names that are attached to stuff.</p>
<p>So when you do</p>
<pre><code>schema1 = SomeClass.SomeSchema
schema2 = schema1
</code></pre>
<p>You're just attaching two names to the same piece of data, which is why the value of both variables changes.</p>
<p>You need to copy the actual value. For lists, one way of doing this is:</p>
<pre><code>schema2 = schema1[:]
</code></pre>
<p>See <a href="https://stackoverflow.com/questions/2612802/how-to-clone-or-copy-a-list-in-python">this question</a> for more on copying lists.</p>
</div>
<div class="post-text" itemprop="text">
<p>On this line:</p>
<pre><code>schema2 = schema1
</code></pre>
<p>you are not creating a <strong>new</strong> array, but instead you are just setting the reference <code>schema2</code> to point at the <strong>same</strong> array that <code>schema1</code> is pointing at. </p>
<p>Writing</p>
<pre><code>schema2 = schema1[:]
</code></pre>
<p>will actually create a new list by <strong>copying</strong> <code>schema1</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>both answer above are right but instead of doing schema1[:]
you can do</p>
<pre><code>from copy import copy
schema2 = copy(scheme1)
</code></pre>
<p>which makes it more readable and can work with other object such as dict</p>
</div>
<div class="post-text" itemprop="text">
<p>When you assign an object to a variable, you are binding that name to that object. If you then set that variable to another variable, the second variable name is binding to the original object. </p>
<pre><code>schema1 = SomeClass.someSchema
schema2 = schema1
</code></pre>
<p>In this example, schema1 and schema2 are bound to the same object. You could either use the python <code>copy</code> library or if the class you are working with accepts an object of that class as parameter in the constructor you can create a new object that way. For example if you are copying a dict you can do:</p>
<pre><code>from copy import copy
schema1 = { 'foo': 'bar' }
schema2 = copy(schema1)
</code></pre>
<p>or</p>
<pre><code>schema1 = { 'foo' : 'bar' }
schema2 = dict(schema1)
</code></pre>
<p>The name binding is talked about in python's execution model. <a href="https://docs.python.org/3/reference/executionmodel.html" rel="nofollow">https://docs.python.org/3/reference/executionmodel.html</a></p>
<p>This might be a good start if you want to learn more: <a href="https://jeffknupp.com/blog/2012/11/13/is-python-callbyvalue-or-callbyreference-neither/" rel="nofollow">https://jeffknupp.com/blog/2012/11/13/is-python-callbyvalue-or-callbyreference-neither/</a></p>
</div>
<span class="comment-copy">Python variables are references to objects; you have a single object with more than one reference.</span>
<span class="comment-copy">Thank you sir, that was a bit of D'oh moment on my part.</span>
