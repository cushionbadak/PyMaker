<div class="post-text" itemprop="text">
<p>I have been having problems with some code I am writing. Basically, when I run the code I enter an 8 digit number and it should scan the CSV file to see if the number is inside the file. If it is, the row should be written to the text file. However, when I run it and I enter a number, I get this:</p>
<pre><code>TypeError: must be str, not list
</code></pre>
<p>(EDIT) And even when it is fixed, the output is:</p>
<pre><code>&lt;_io.TextIOWrapper name='receipt.txt' mode='a' encoding='cp1252'&gt; 
</code></pre>
<p>My code is as follows:</p>
<pre><code>import csv
import sys
import re

addItem = ""
gtinNum = ""
quantity = 0
totalPrice = 0

receipt = open("receipt.txt", "r+")
f = open("ChocolateCSV.csv", "rt")

def scanGTIN():
    rows = re.split('\n', f.read())

    for index, row in enumerate(rows):
        global cells
        cells = row.split(',')
        if gtinNum in cells:
            receipt.write(cells)

def gtinQuestion():
    global gtinNum
    gtinNum = input("Please enter the GTIN-8 Code of the product you would like to order:")

    if gtinNum.isdigit() == False or len(gtinNum) != 8:
        gtinQuestion()
    elif gtinNum.isdigit() == True and len(gtinNum) == 8:
        scanGTIN()


gtinQuestion()
</code></pre>
<p>Any help is appreciated, thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p>The <code>write</code> method of a Python text file takes a string (<code>str</code>), not a list.</p>
<p>If you want to duplicate matching rows from the input file to the output, as your description implies, I think you want to either replace your </p>
<pre><code>receipt.write(cells)
</code></pre>
<p>with </p>
<pre><code>receipt.write(",".join(cells))
</code></pre>
<p><strong>or</strong> replace:</p>
<pre><code>rows = re.split('\n', f.read())
</code></pre>
<p>with</p>
<pre><code>rows = f.readlines()
</code></pre>
<p>and</p>
<pre><code>receipt.write(cells)
</code></pre>
<p>with </p>
<pre><code>receipt.write(row)
</code></pre>
<p>The first example joins the elements of <code>cells</code> back into a string, inserting a comma between each one. The second one means that <code>rows</code> is a list containing all the rows of the input file, rather than an iterator that reads one row at a time. The first method is probably better as it avoids reading a large file into memory, just as long as you realise what it means to get an iterator rather than a list.</p>
</div>
<div class="post-text" itemprop="text">
<p><code>write</code> call in <code>receipt.write(cells)</code> expects a string, whereas you give it a list.</p>
<p>You can use <a href="https://docs.python.org/2/library/stdtypes.html#str.join" rel="nofollow">join</a> if you want everything to be concatenated (in this example, the values would be separated by dashes) :</p>
<pre><code>receipt.write('-'.join(cells))
</code></pre>
<p>Hope it'll be helpful</p>
</div>
<span class="comment-copy"><code>cells = row.split(',')</code> either <code>.write(row)</code> or put cells back to a string with <code>.write(",".join(cells))</code></span>
<span class="comment-copy">@TadhgMcDonald-Jensen Get the error, as I have mentioned in the other suggestions, &lt;_io.TextIOWrapper name='receipt.txt' mode='r+' encoding='cp1252'&gt;</span>
<span class="comment-copy">I'm not exactly sure what you mean, but I notice you are not closing your files, I'd recommend you do that and see if that fixes your issue.</span>
<span class="comment-copy">@TadhgMcDonald-Jensen Sorry if it didnt sound right. Basically, when I want to print the contents back I get     &lt;_io.TextIOWrapper name='receipt.txt' mode='a' encoding='cp1252'&gt;</span>
<span class="comment-copy">@TadhgMcDonald-Jensen Even if i close it before or after I print it, I still is the same output</span>
<span class="comment-copy">Writing row into it, gives something different. The code has no errors but I get this as my outcome:</span>
<span class="comment-copy">&lt;_io.TextIOWrapper name='receipt.txt' mode='r+' encoding='cp1252'&gt;</span>
<span class="comment-copy">I didn't spot that the way you've defined <code>rows</code> actually makes it an iterable. That's fine, but <code>.write(row)</code> will then return the object, not the data. See my edit.</span>
<span class="comment-copy">Thank you for your help! Solution chosen</span>
<span class="comment-copy">I think the first method would also work if you replace <code>rows = re.split('\n', f.read())</code> with <code>rows = f.readline()</code>, which might help you understand the iterator concept.</span>
<span class="comment-copy">I get this error when trying it:&lt;_io.TextIOWrapper name='receipt.txt' mode='r+' encoding='cp1252'&gt;</span>
<span class="comment-copy">@Jordan mode 'a' (append) should be used if you intend to write the file. You can have more details <a href="https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files" rel="nofollow noreferrer">here</a></span>
<span class="comment-copy">even using append, I get the same output. And plus, I want the contents to delete itself after the program restarts.</span>
