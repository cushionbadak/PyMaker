<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/6545023/how-to-sort-ip-addresses-stored-in-dictionary-in-python">How to sort IP addresses stored in dictionary in Python?</a>
<span class="question-originals-answer-count">
                    6 answers
                </span>
</li>
</ul>
</div>
<p>I have a list in Python that shows the network location of some machines:</p>
<pre><code>[{"address": "54.23.65.111", "role": "logic"}, 
{"address": "51.63.68.115", "role": "logic"},    
{"address": "79.23.65.111", "role": "output"},    
{"address": "52.23.65.111", "role": "logic"}]
</code></pre>
<p>And I would like this sorted by role first and then numerically by address, so the output should look like:</p>
<pre><code>[{"address": "51.63.68.115", "role": "logic"},    
{"address": "52.23.65.111", "role": "logic"},    
{"address": "54.23.65.111", "role": "logic"},     
{"address": "79.23.65.111", "role": "output"}]
</code></pre>
<p>So far I have:</p>
<pre><code>for machine_dict in sorted(machine_list, key=lambda machine_role: (machine_role["role"], machine_role["address"])):
</code></pre>
<p>But this doesn't sort the IPs numerically, it reckons <code>11.something</code> is less than <code>2.something</code> for example.</p>
</div>
<div class="post-text" itemprop="text">
<p>To numerically sort the IPs you need to split the address but the general approach of @sparkandshine still works, with just a slight update to the key:</p>
<pre><code>&gt;&gt;&gt; list_dicts = [{"address": "11.23.65.111", "role": "logic"},
...               {"address": "2.63.68.115", "role": "logic"},
...               {"address": "79.23.65.111", "role": "output"},
...               {"address": "52.23.65.111", "role": "logic"}]
&gt;&gt;&gt; sorted(list_dicts, key=lambda d: (d['role'], tuple(map(int, d['address'].split('.')))))
[{'address': '2.63.68.115', 'role': 'logic'},
 {'address': '11.23.65.111', 'role': 'logic'},
 {'address': '54.23.65.111', 'role': 'logic'},
 {'address': '79.23.65.111', 'role': 'output'}]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>To sort by IP addresses like you want, this could work :</p>
<pre><code>import socket
print sorted(machine_list, 
             key = lambda machine_role: (machine_role["role"],
                                         socket.inet_aton(machine_role["address"])))
</code></pre>
<p>Input </p>
<pre><code>[
    {'role': 'logic',  'address': '1.2.3.4'}, 
    {'role': 'logic',  'address': '1.11.2.3'}, 
    {'role': 'logic',  'address': '1.1.2.3'}, 
    {'role': 'logic',  'address': '2.3.4.5'}
]
</code></pre>
<p>Output </p>
<pre><code>[
    {'role': 'logic', 'address': '1.1.2.3'}, 
    {'role': 'logic', 'address': '1.2.3.4'}, 
    {'role': 'logic', 'address': '1.11.2.3'}, 
    {'role': 'logic', 'address': '2.3.4.5'}
]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Convert ip address as a list of <code>int</code>s using <code>.split('.')</code>, i.e., <code>[int(i) for i in d['address'].split('.')]</code></p>
<pre><code>list_dicts = [  {"address": "11.23.65.111", "role": "logic"},
                {"address": "2.63.68.115", "role": "logic"},
                {"address": "79.23.65.111", "role": "output"},
                {"address": "52.23.65.111", "role": "logic"}]


result = sorted(list_dicts, key=lambda d: (d['role'], [int(i) for i in d['address'].split('.')]))

print(result)
# Output
[{'role': 'logic', 'address': '2.63.68.115'}, {'role': 'logic', 'address': '11.23.65.111'}, {'role': 'logic', 'address': '52.23.65.111'}, {'role': 'output', 'address': '79.23.65.111'}]
</code></pre>
<hr/>
<p>Or use the Python module <a href="https://docs.python.org/3/library/ipaddress.html#module-ipaddress" rel="nofollow"><code>ipaddress</code></a>,</p>
<pre><code>import ipaddress

result = sorted(list_dicts, key=lambda d: (d['role'], ipaddress.ip_address(unicode(d['address']))))  # unicode for Python2
</code></pre>
</div>
<span class="comment-copy"><i>"it reckons <code>11.something</code> is less than <code>2.something</code>"</i> - that <i>is</i> sorting the IPs lexicographically...</span>
<span class="comment-copy">I think you mean numerically sort the IPs?</span>
<span class="comment-copy">Yeah sorry, I think I did mean numerically sort the IPs. Thanks for the replies.</span>
<span class="comment-copy">That's exactly what the OP is currently using...</span>
<span class="comment-copy">@jonrsharpe, thx for pointing out this. I just edited my answer. Expecting your feedback.</span>
