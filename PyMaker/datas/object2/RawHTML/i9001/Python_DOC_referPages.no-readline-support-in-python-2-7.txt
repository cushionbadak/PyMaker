<div class="post-text" itemprop="text">
<p>I'm not getting any readline functionality in my python interactive sessions. Arrow keys just move the cursor around the screen or print <code>^[[A</code> etc. Some web searching led me to try to manually import the <code>readline</code> package, but this resulted in the following error:</p>
<blockquote>
<p>&gt;&gt;&gt; import readline <br/> Traceback (most recent call last): <br/>
    File "&lt;stdin&gt;", line 1, in &lt;module&gt; <br/>
  ImportError: /opt/readline-6.3/lib/libreadline.so.6: undefined symbol: PC</p>
</blockquote>
<p>I think this is a version-specific problem as this doesn't occur in the 2.6 environment that's on the machine I'm working on by default (I'm working in 2.7.10 in a virtualenv - this is the most recent python 2.7 version I can load on the machine, as far as I'm aware). It's running linux, by the way - CentOS 6.8.</p>
<p>It seems like <a href="https://github.com/ContinuumIO/anaconda-issues/issues/152" rel="nofollow noreferrer">others have had this problem in some form or another</a> but I can't tell if their solution is out of date (do I need the readline package that has <a href="https://pypi.python.org/pypi/readline" rel="nofollow noreferrer">since been deprecated</a>?) and even if it wasn't I am not sure how to install the fixed version of the package (I'm not very python-savvy yet and I haven't gotten much beyond your basic <code>pip install</code> or <code>conda install</code>).</p>
<p>How can I resolve this error? If it's not to much to ask, a solution that wouldn't require me to switch from pip to conda would be ideal, as I'm sshing into a machine I don't have full control over and would like to do as much as possible with the tools I already have or can easily install.</p>
</div>
<div class="post-text" itemprop="text">
<p>I was able to resolve this problem (albeit in a somewhat hacky way) by configuring python to import the <code>gnureadline</code> package at startup:</p>
<ol>
<li>Create a script, <code>pythonstartup.py</code>, that runs <code>import gnureadline</code></li>
<li>Modify <code>~/.bashrc</code> to export the environment variable <code>PYTHONSTARTUP='pythonstartup.py'</code></li>
</ol>
<p>(<a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONSTARTUP" rel="nofollow noreferrer">Documentation</a> on <code>PYTHONSTARTUP</code>)</p>
<p>Putting <code>import gnureadline</code> in my <code>.pdbrc</code> file made the fix work for pdb sessions too. For some reason it still doesn't work when entering an interactive session after running script from command line with <code>python -i</code>, though.</p>
</div>
<span class="comment-copy">is it similar to this <a href="http://stackoverflow.com/questions/893053/seeing-escape-characters-when-pressing-the-arrow-keys-in-python-shell">Seeing escape characters when pressing the arrow keys in python shell</a></span>
<span class="comment-copy">i'm guessing the environment you're sshed into doesn't support <code>ncurses</code> based on <a href="https://github.com/ContinuumIO/anaconda-issues/issues/152#issuecomment-64094914" rel="nofollow noreferrer">this comment from the github link in your question</a></span>
<span class="comment-copy">@downshift I followed the top answer from the question you linked, and indeed I have no bash variable PYTHONSTARTUP (nor does /etc/pythonstart exist in either my virtual environment or out of it). Is the <code>ncurses</code> problem something that can be easily fixed?</span>
<span class="comment-copy">@downshift wrt <code>ncurses</code>, it seems like perhaps the machine does have it: running <code>rpm -qa | grep ncurse</code> gives me <code>ncurses-devel-5.7-4.20090207.el6.x86_64  ncurses-base-5.7-4.20090207.el6.x86_64  ncurses-libs-5.7-4.20090207.el6.x86_64 ncurses-5.7-4.20090207.el6.x86_64</code></span>
<span class="comment-copy">that does sound promising for <code>ncurses</code>, however seems like maybe the <code>readline</code> python package is clashing with CentOS's package <code>libreadline</code>. If you're working in a virtualenv, check if you <i>did</i> install <code>readline</code> in the virtual environment in the output of <code>pip list</code>, if so <code>pip uninstall</code> it</span>
