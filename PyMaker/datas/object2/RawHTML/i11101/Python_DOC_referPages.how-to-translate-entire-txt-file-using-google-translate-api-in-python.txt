<div class="post-text" itemprop="text">
<p>I am trying to translate an entire <code>.txt</code> file using Google Translate API in Python.  </p>
<p>The default code is: </p>
<pre><code>print(service.translations().list(source='zh',
                                  target='en',
                                  q=['上海熙缘节能环保科技服务有限公司',
                                     '广东宏德科技物业有限公司']).execute())

if __name__ == '__main__':
    main()
</code></pre>
<p>How can I modify this code so it can translate a .txt file?</p>
</div>
<div class="post-text" itemprop="text">
<p>The simple and efficient solution from my own perspective without knowing the complex details and I assume the parameter <code>q</code> is the sequence of sentences/words that you want to translate will be: </p>
<pre><code>print(service.translations().list( source='zh', target='en', q= (line.rstrip() for line in open('file.txt') ).execute())
</code></pre>
<p>I see your expression to be really unpythonic, you nest a lot of expressions into one single line. </p>
</div>
<span class="comment-copy">Are you asking how to read text from a file?</span>
<span class="comment-copy">Yes but with Chinese characters so the file is in UTF or Unicode.  The default decoder is in cp1252</span>
<span class="comment-copy">Possible duplicate of <a href="http://stackoverflow.com/questions/9404628/python-script-to-translate-via-google-translate">Python script to translate via google translate</a></span>
<span class="comment-copy">Thanks direprobs, using what Google provided.  Now that I've done that I get a UnicodeDecodeError: 'charmap' codec can't decode byte 0x9d in position 50: character maps to &lt;undefined&gt; error.  Google Translate's API is using cp1252 but my Chinese text has to be saved in Unicode to keep their values, otherwise they disappear.</span>
<span class="comment-copy">Here is a piece of the code Google uses as a Decoder       class IncrementalDecoder(codecs.IncrementalDecoder):     def decode(self, input, final=False):         return codecs.charmap_decode(input,self.errors,decoding_table)[0]  class StreamWriter(Codec,codecs.StreamWriter):     pass  class StreamReader(Codec,codecs.StreamReader):     pass  ### encodings module API  def getregentry():     return codecs.CodecInfo(         name='cp1252',         encode=Codec().encode,</span>
<span class="comment-copy">@shj997 Refer to this page from Python Documentation: <a href="https://docs.python.org/3/howto/unicode.html" rel="nofollow noreferrer">Unicode HOWTO</a>.</span>
