<div class="post-text" itemprop="text">
<p>I'm trying to write a small REPL using the <a href="https://docs.python.org/3/library/cmd.html" rel="nofollow"><code>cmd</code></a> library in Python. One of the features that it provides is automatic tab completion, which I do not want.</p>
<p>Luckily, the docs mention "If completekey is not None and readline is available, command completion is done automatically." So I set <code>completekey=None</code> when I instantiated my <code>cmd.Cmd</code> subclass, which worked.</p>
<p>However, the main functionality of the <code>cmd</code> module, the use of <code>readline</code> which gives support for up-arrow history, was also disabled, and now I'm back to <code>^[[A</code>'s.</p>
<p>Why is this happening, and is there a solution?</p>
</div>
<div class="post-text" itemprop="text">
<p>The <code>readline</code> module is only imported if <code>completekey</code> has a non-None value. It looks like the only way to use <code>readline</code> and disable completion is to specify a do-nothing completer.</p>
<pre><code>class CmdSubclass(Cmd):
    # Other configuration
    # ...

    def complete(self, *args):
        pass
</code></pre>
</div>
<span class="comment-copy">It likely happens because when <code>completekey=None</code>, the <code>readline</code> module is never loaded (see <a href="https://hg.python.org/cpython/file/3.5/Lib/cmd.py" rel="nofollow noreferrer">the source</a>. You may be able to work around by subclassing <code>cmd.Cmd</code>, overriding either the <code>cmdloop</code> or overriding <code>complete</code> methods.</span>
<span class="comment-copy">Nice, thanks! accepting.</span>
<span class="comment-copy">this does prevent one from entering raw tabs, but I guess I can live with that.</span>
<span class="comment-copy">You can also set <code>completekey</code> to something else that you don't need to use as often.</span>
