<div class="post-text" itemprop="text">
<p>I am trying to test the flask-edits package (<a href="https://github.com/nathancahill/Flask-Edits" rel="nofollow">https://github.com/nathancahill/Flask-Edits</a>)   </p>
<p>Can anyone help with this error: AttributeError: 'TokenStream' object has no attribute 'next' </p>
<pre><code>@app.route('/')
    def hello_world():
        return render_template('test.html')

    if __name__ == '__main__':
        app.run(debug=True)
</code></pre>
<p>The template:</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Haldane&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;p&gt;Test&lt;/p&gt;

{% editable 'Section name' %}
    Python is a programming language that lets you work quickly and integrate systems more effectively.
{% endeditable %}

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>The error occurs here:</p>
<pre><code>"""Jinja extensions to mark sections as editable
"""
import hashlib
from collections import OrderedDict
from jinja2.nodes import Output, Template, TemplateData
from jinja2.ext import Extension

class EditableExtension(Extension):
    tags = set(['editable'])

    def parse(self, parser):
        _db = self.environment.edits

        # Skip begining node
        parser.stream.next()
</code></pre>
<p>The error:</p>
<pre><code>File "/anaconda/lib/python3.5/site-packages/flask_edits/editable.py", line 18, in parse
parser.stream.next()
AttributeError: 'TokenStream' object has no attribute 'next'
</code></pre>
<p>Gist including the code:
<a href="https://gist.github.com/archienorman11/98993d66fc30283ba113f8a4f2b39669" rel="nofollow">https://gist.github.com/archienorman11/98993d66fc30283ba113f8a4f2b39669</a></p>
</div>
<div class="post-text" itemprop="text">
<p>Assuming Flask-Edits wants to support Python 3, this is a bug in Flask-Edits.  It should use the builtin <a href="https://docs.python.org/3/library/functions.html#next" rel="nofollow"><code>next</code></a> function to advance iterators: <code>next(parser.stream)</code>.  The method on the iterator changed from <code>next</code> to <code>__next__</code> between Python 2 and 3.  The builtin function works for both.</p>
</div>
