<div class="post-text" itemprop="text">
<p>I am having trouble figuring this out.</p>
<p>I have a Class which prints the the console "inside" the class. I want to be able to print "outside" of the class so that I can use the data stream for other things. How can I get the stream from the code below?</p>
<pre><code>from ws4py.client.threadedclient import WebSocketClient
import json

class FooClient(WebSocketClient):

    msg=0

    def opened(self):
        self.send(json.dumps({"One": "bah", "Two": "bah"}))

    def closed(self, code, reason=None):
        print "Closed down", code, reason

    def received_message(self, m):
        if len(m) == 175:
            self.close(reason='Remote server closed socket')
        msg = json.loads(str(m))
        #print msg 


ws = FooClient('wss://ws-feed.foobar.com', protocols=['http-only', 'chat'])
ws.connect()
ws.run_forever()
</code></pre>
<p>I tried a number of different things but have yet to understand the right way to achieve this. Conceptually i want:</p>
<pre><code>    ws = FooClient('wss://ws-feed.foobar.com', protocols=['http-only', 'chat'])
    ws.connect()
    ws.run_forever()
    print msg
</code></pre>
<p>But obviously this does not work.</p>
</div>
<div class="post-text" itemprop="text">
<p>Why not print the messages in <code>received_message()</code>? Once you call <code>run_forever()</code>, it will only return when your client dies (or gets disconnect?). You have to handle events INSIDE the execution loop.</p>
<pre><code>run_forever() --&gt; 
   code handling web-sockets --&gt;
      event handlers &lt;-- do it here
</code></pre>
<p>It seems to me that what you REALLY want to do here is run this code in the context of a different process/thread or executor, so you can continue performing other actions.</p>
<p>Have a look: <a href="https://docs.python.org/3/library/concurrent.futures.html" rel="nofollow">https://docs.python.org/3/library/concurrent.futures.html</a></p>
</div>
<span class="comment-copy">What? It sounds like you just want to <code>return</code> something from one of your methods and print it. I don't understand.</span>
<span class="comment-copy">I "think" this is what I want. Since the data is streaming json I want to be able to manipulate it, use it to trigger other actions, etc. OUTSIDE of the 'received_message()'. I am not really sure what I can do with this just printing to console. Anyway, the 'run_forever()' NOT returning anything makes until the client dies makes sense and now I understand why my 'return' experiments did not work. On the other hand the link you send might go a little over my head ... I will have to read up. I am assuming now there is no SIMPLE solution I am missing.</span>
