<div class="post-text" itemprop="text">
<p>How can I get a position of where did UnicodeDecodeError occurred?
I found material over <a href="https://docs.python.org/3/library/exceptions.html#UnicodeError" rel="nofollow">here</a> and tried to implement it below. But I just get an error <code>NameError: name 'err' is not defined</code></p>
<p>I searched all over the internet already and here on StackOverflow, but cannot find any hint how to use it. In python docs it says that this particular exception has start attribute, so it must be possible.</p>
<p>Thank you.</p>
<pre><code>    data = buffer + data
    try:
        data = data.decode("utf-8")
    except UnicodeDecodeError:
        #identify where did the error occure?
        #chunk that piece off -&gt; copy troubled piece into buffer and 
        #decode the good one -&gt; then go back, receive the next chunk of 
        #data and concatenate it to the buffer.

        buffer = err.data[err.start:]
        data = data[0:err.start]
        data = data.decode("utf-8")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>That information is stored in the exception itself.  You can get the exception object with the <code>as</code> keyword, and use the <code>start</code> attribute:</p>
<pre><code>while True:
    try:
        data = data.decode("utf-8")
    except UnicodeDecodeError as e:
        data = data[:e.start] + data[e.end:]
    else:
        break
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>In case you just want to ignore the error and decode the rest, you can do:</p>
<pre><code>data = data.decode("utf-8", errors='ignore')
</code></pre>
</div>
<span class="comment-copy">Voting to close as trivial 'cuz the answer is an essential syntax detail. Might still be useful for future reference.</span>
<span class="comment-copy">that was simple. Thanks so much :)</span>
<span class="comment-copy">In the documentation they say: "For example, err.object[err.start:err.end] gives the particular invalid input that the codec failed on."   What does this: err.object[err.start:err.end] actually mean? It is not the same as e.start., not even close.</span>
<span class="comment-copy">@Cooper: Good catch!  I should edit my answer.  Actually, it is close.  That is a <a href="https://docs.python.org/3/reference/expressions.html#slicings" rel="nofollow noreferrer">slice</a>.  It means to take all of the characters between the positions <code>err.start</code> and <code>err.end</code>.  That does include <code>err.start</code>, but does not include <code>err.end</code>.  In most cases, the end is just one character after the start, so my solution will work.  I believe there are cases, however, when <code>err.end</code> is more than one higher.</span>
<span class="comment-copy">And in err.object is where object is actually some attribute. Got it, thank you :)</span>
<span class="comment-copy">Thanks, I'll keep that in mind :)</span>
