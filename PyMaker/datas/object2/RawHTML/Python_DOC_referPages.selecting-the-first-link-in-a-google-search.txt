<div class="post-text" itemprop="text">
<p>When I inspect the website(google search), I'm able to select my desired href by searching for this <code>//div[@class="r"]/a/@href</code> through the finder. But when using scrapy and accessing by <code>response.xpath('//div[@class="r"]/a/@href'</code>) this will return empty. Many other Xpath such as link title will also result empty. Strangely enough,  I'm able to get something when using <code>response.xpath('//cite').get()</code>, which is basically the href but incomplete. </p>
<p>If I do <code>response.body</code> I'm able to see my desired href deep into the code but I have no idea how to access it. Trying to select it through traditional methods css or xpath that would work in any other website has been futile. </p>
</div>
<div class="post-text" itemprop="text">
<p>The reason the xpath you're using work on your browser but no in the response, is because Google displays the page differently if JS is disabled, which is the case for scrapy but not your browser, so you'll need to use an XPath that will work for both or just the first case.</p>
<p>This one works for no JS but won't work in the browser (if JS is enabled):</p>
<pre><code>//div[@id='ires']//h3/a[1]/@href
</code></pre>
<p>This will return the first URL of the first result.</p>
</div>
<div class="post-text" itemprop="text">
<p>Try the below.</p>
<pre><code>response.xpath("//div[@class='r']").xpath("//a/@href").extract()
</code></pre>
</div>
<span class="comment-copy">Welcome to SO. Have you tried <code>response.xpath('//div[@class="r"]/a/@href").extract()</code>?</span>
<span class="comment-copy">yes of course. extract() would just clean it up but you should still always get some kind of response first. thank you.</span>
<span class="comment-copy">I am trying to install scrapy on my new machine, getting <code>error: Microsoft Visual C++ 14.0 is required. Get it with "Microsoft Visual C++ Build Tools": https://visualstudio.microsoft.com/downloads/</code>. Have to fix this first and then get back to you.</span>
<span class="comment-copy">I was literally writing my own answer, when you responded. Thank you. While I was expecting the body response from scrapy I realized that the class was not the same that when I inspected the website. But I didn't know that it was because JS was enabled. I can't upvote you because not enough reputation.</span>
<span class="comment-copy">empty. =/ I would think google is doing something to prevent me of getting it because I don't have this problem in any other website, however, I do get all the website code when I do response(body) so I have no idea what is going on. I've been stuck for like 5 hours on this little thing.fml.</span>
