<div class="post-text" itemprop="text">
<p>How can I avoid exceptions from <code>urllib.request.urlopen</code> if <code>response.status_code</code> is not 200? Now it raise <code>URLError</code> or <code>HTTPError</code> based on request status.</p>
<p>Is there any other way to make request with python3 basic libs?</p>
<p>How can I get response headers if <code>status_code != 200</code> ?</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>try except</code>, the below code:</p>
<pre><code>from urllib.request import Request, urlopen
from urllib.error import URLError, HTTPError
req = Request("http://www.111cn.net /")
try:
    response = urlopen(req)
except HTTPError as e:
    # do something
    print('Error code: ', e.code)
except URLError as e:
    # do something
    print('Reason: ', e.reason)
else:
    # do something
    print('good!')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I found a solution from py3 docs</p>
<pre><code>&gt;&gt;&gt; import http.client
&gt;&gt;&gt; conn = http.client.HTTPConnection("www.python.org")
&gt;&gt;&gt; # Example of an invalid request
&gt;&gt;&gt; conn.request("GET", "/parrot.spam")
&gt;&gt;&gt; r2 = conn.getresponse()
&gt;&gt;&gt; print(r2.status, r2.reason)
404 Not Found
&gt;&gt;&gt; data2 = r2.read()
&gt;&gt;&gt; conn.close()
</code></pre>
<p><a href="https://docs.python.org/3/library/http.client.html#examples" rel="nofollow">https://docs.python.org/3/library/http.client.html#examples</a></p>
</div>
<span class="comment-copy">I dont understand, if there is an error opening the url what do you want to receive?</span>
<span class="comment-copy">Can you give us some code to explain what you're doing?</span>
<span class="comment-copy">@lapinkoira the question is legit, the fact that a webpage returned HTTP 400 mean the the HTTP has error, but it's not a programmatic error, and in some cases you would to read everything (response code, payload, headers) without an exception being thrown.</span>
<span class="comment-copy">So how can I get headers in this case?</span>
