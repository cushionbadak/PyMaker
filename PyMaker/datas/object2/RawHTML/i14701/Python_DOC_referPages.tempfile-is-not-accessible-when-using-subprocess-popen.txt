<div class="post-text" itemprop="text">
<p>When I run the following script, the error"Command line argument error: Argument "query". File is not accessible" occurs. I'm using python 3.4.2.</p>
<pre><code>from Bio import SeqIO
from Bio.Seq import Seq
from Bio.SeqRecord import SeqRecord
import subprocess
import tempfile
import sys

def main():

    # read name file and put all identifications into a list

    infile_I = open('OTU_name.txt','r')
    name = infile_I.read().split('&gt;')
    infile_I.close()

    # extract sequence segments to a temporary file one at a time
    for i in name:
        i = i.replace('\n','')
        for j in SeqIO.parse("GemSIM_OTU_ids.fa","fasta"):
            if str(i) == str(j.id):
                f = tempfile.NamedTemporaryFile()
                record = j.seq
                f.write(bytes(str(record),'UTF-8'))
                f.seek(0)
                f = f.read().decode()
                Result = subprocess.Popen(['blastn','-remote','-db','chromosome','-query',f,'-out',str(i)],stdout=subprocess.PIPE)
                output = Result.communicate()[0]

if __name__== '__main__': main()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><code>f = tempfile.NamedTemporaryFile()</code> returns a file-like object which you're trying to provide as a command line argument. Instead, you want the <em>actual filename</em> which is available via its <code>.name</code> attribute - although I'm somewhat confused why you're creating a tempfile, writing to it, seeking back to position 0, then replacing your tempfile <code>f</code> object with the contents of the file? I suspect you don't want to do that replacement and use <code>f.name</code> for your query.</p>
<pre><code>Result = subprocess.Popen(['blastn','-remote','-db','chromosome','-query',f.name,'-out',str(i)],stdout=subprocess.PIPE)
</code></pre>
<p>Also, there's some convenient wrapper functions around <code>subprocess.Popen</code> such as <a href="https://docs.python.org/3/library/subprocess.html#subprocess.check_output" rel="nofollow">subprocess.check_output</a> which are also somewhat more explicit as to your intent which could be used here instead.</p>
</div>
<span class="comment-copy">You are right! I don't know what I was doing. Regardlessly, The f.name trick does work! thank you!</span>
<span class="comment-copy">@shuoyangli If you feel that my answer solved your problem - please feel free to <a href="http://meta.stackexchange.com/a/5235/204922">Accept my Answer</a></span>
