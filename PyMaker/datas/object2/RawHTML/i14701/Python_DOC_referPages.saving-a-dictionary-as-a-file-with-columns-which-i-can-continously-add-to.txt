<div class="post-text" itemprop="text">
<p>I have a dictionary of currencies <a href="http://openexchangerates.org/api/currencies.json" rel="nofollow">here</a> in <a href="http://en.wikipedia.org/wiki/JSON" rel="nofollow"><code>JSON</code></a>. </p>
<p>I will give a sample for simplicity:</p>
<pre><code>{
    "AED": "united Arab Emirates Dirham",
    "AFN": "Afghan Afghani",
    ...
    "ZWL": "Zimbabwean Dollar"
}
</code></pre>
<p>And I wish to add them to a file where i can continuously add different sets of currencies at different times. The file should have a column for the code name of <strong>currency</strong> (e.g. "AED") and another column for <strong>name</strong>.</p>
<p>I really don't know where to start. Help to point me in the right direction will be very much appreciated.</p>
<p>My code for the dictionary is as follows:</p>
<pre><code>import json
import urllib.request
def _fetch_currencies():
    f = urllib.request.urlopen(
        'http://openexchangerates.org/api/currencies.json')
    charset = f.info().get_param('charset', 'utf8')
    data = f.read()
    decoded = json.loads(data.decode(charset))
    print(json.dumps(decoded, indent=4))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You could simply save your data in <a href="http://en.wikipedia.org/wiki/Comma-separated_values" rel="nofollow"><code>csv</code></a> with one line per currency:</p>
<pre><code>AED, united Arab Emirates Dirham
AFN, Afghan Afghani
ZWL, Zimbabwean Dollar
</code></pre>
<p>To do that, you might want to transform your dictionary into rows, but in this case, it's trivial, since it's just the pair <code>(key, value)</code>:</p>
<pre><code>rows = decoded.items()
</code></pre>
<p>Note, however, that the items will be in a random order, if you want the entries sorted, you can sort them before writing to the file:</p>
<pre><code>rows.sort()
</code></pre>
<p>In the end, using the <a href="https://docs.python.org/3.4/library/csv.html#csv.writer" rel="nofollow"><code>csv</code> module</a>:</p>
<pre><code>import csv
with open('local_file.csv', 'w') as my_csv:
    csv_writer = csv.writer(my_csv, delimiter=',')
    csv_writer.writerows(sorted(decoded.items()))
</code></pre>
<p>Putting it all together:</p>
<pre><code>import json
import urllib.request
import csv

def fetch_currencies():
    f = urllib.request.urlopen('http://openexchangerates.org/api/currencies.json')
    charset = f.info().get_param('charset', 'utf8')
    data = f.read()
    decoded = json.loads(data.decode(charset))
    return decoded

def save_currencies(currencies, filename):
    sorted_currencies = sorted(currencies.items())
    with open(filename, 'w') as my_csv:
        csv_writer = csv.writer(my_csv, delimiter=',')
        csv_writer.wrtiterows(sorted_currencies)

save_currencies(fetch_currencies(), 'currencies.csv')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/csv.html#csv.DictWriter" rel="nofollow"><code>csv.DictWriter</code></a> to handle easily the save file process. As <code>DictWriter</code> handles with dictionaries and the result of <code>json.loads</code> is dict, <code>DictWriter</code> do the job simpler.</p>
<pre><code>import csv
import json
import urllib.request

def _fetch_currencies():
    f = urllib.request.urlopen('http://openexchangerates.org/api/currencies.json')
    charset = f.info().get_param('charset', 'utf8')
    data = f.read()
    decoded = json.loads(data.decode(charset))
    with open('names.csv', 'w') as csvfile:
        fieldnames = ['code', 'country']
        writer = csv.DictWriter(csvfile, fieldnames=fieldnames)
        writer.writeheader()
        for code, country in decoded.items():
            writer.writerow({'code': code, 'country': country})
</code></pre>
</div>
<span class="comment-copy">There are multiple ways to do this.  1. Use csv as suggested in the answer  2. write json data to file ref. <a href="http://stackoverflow.com/questions/12309269/write-json-data-to-file-in-python" title="write json data to file in python">stackoverflow.com/questions/12309269/â€¦</a>.  3. Write a configParser file using configPraser <a href="https://docs.python.org/2/library/configparser.html" rel="nofollow noreferrer">docs.python.org/2/library/configparser.html</a></span>
<span class="comment-copy">Thank you very much, this will help a lot.</span>
<span class="comment-copy">Yes, it's fairly easy, plain text, well supported by any programming language, and editable with a standard text editor without really learning a syntax (look at the wikipedia link and the module documentation).</span>
<span class="comment-copy">Dont you need a csvwriter handle to write to a csv file ? something like <code>csv.writer(my_csv,delimiter=',')</code></span>
<span class="comment-copy">Yep, you're right. Fixed.</span>
<span class="comment-copy">When using the word decoded i get an "code analysis error" saying it is undefined, is there any modules i need to import before using it?</span>
<span class="comment-copy">File "C:\Users\daniel\Documents\Python Coursework_fetch_currencies().py", line 16, in _fetch_currencies     writer.writerow({'code': code, 'country': country})   File "C:\Users\daniel\Anaconda3\lib\csv.py", line 153, in writerow     return self.writer.writerow(self._dict_to_list(rowdict))   File "C:\Users\daniel\Anaconda3\lib\encodings\cp1252.py", line 19, in encode     return codecs.charmap_encode(input,self.errors,encoding_table)[0] UnicodeEncodeError: 'charmap' codec can't encode character '\u02bb' in position 13: character maps to &lt;undefined&gt;</span>
<span class="comment-copy">There is nothing wrong with the answer. Take a look <a href="http://stackoverflow.com/questions/25127935/unicodeencodeerror-charmap-codec-cant-encode-character-problems">here</a></span>
