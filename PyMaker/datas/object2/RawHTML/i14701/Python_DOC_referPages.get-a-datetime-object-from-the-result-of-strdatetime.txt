<div class="post-text" itemprop="text">
<p>If I print a <code>datetime</code> object in python with a simple <code>print myDateTime</code> (or <code>print(myDateTime)</code> in python3), how can I recover the <code>datetime</code> object from the resulting string?</p>
<p>I could have asked "what is the python <code>strftime</code> format used by <code>datetime.__str__()</code>"?</p>
<p>ps: There are many questions about conversion of strings to python datetime objects. In the spirit of using stack overflow as a repository of quickly available, useful programming tips, I'm asking this since none of those questions answer this rather specific and oft needed query.</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/datetime.html#datetime.datetime.__str__" rel="nofollow noreferrer">By definition, <code>str(datetime_obj)</code> is <code>datetime_obj.isoformat(' ')</code></a>. There is <a href="http://bugs.python.org/issue15873" rel="nofollow noreferrer">no method that would parse the ISO 8601 format back</a>; you have to provide the format to <code>strptime()</code> explicitly:</p>
<pre><code>&gt;&gt;&gt; from datetime import datetime, timezone
&gt;&gt;&gt; now = datetime.now(timezone.utc)
&gt;&gt;&gt; s = str(now)
&gt;&gt;&gt; s
'2015-04-06 10:31:08.256426+00:00'
&gt;&gt;&gt; s[:26]
'2015-04-06 10:31:08.256426'
&gt;&gt;&gt; datetime.strptime(s[:26]+s[26:].replace(':',''), '%Y-%m-%d %H:%M:%S.%f%z')
datetime.datetime(2015, 4, 6, 10, 31, 8, 256426, tzinfo=datetime.timezone.utc)
</code></pre>
<p><code>%z</code> supports <code>+HHMM</code> but it doesn't support <code>+HH:MM</code> that is why the <code>replace()</code> call is used here.</p>
<p><code>datetime.timezone</code> is available since Python 3.2. For older versions, see </p>
<ul>
<li><a href="https://stackoverflow.com/q/127803/4279">How to parse ISO formatted date in python?</a></li>
<li><a href="https://stackoverflow.com/q/12281975/4279">Convert timestamps with offset to datetime obj using strptime</a>.</li>
</ul>
</div>
<div class="post-text" itemprop="text">
<p>If the datetime object doesn't have timezone info (perhaps interpreted as UTC time), you can do something like this (python 2 in this case, but the same in python 3):</p>
<pre><code>import datetime
unprintStrptimeFmt = "%Y-%m-%d %H:%M:%S.%f"
d = datetime.datetime.utcnow()
print d
# produces e.g.: 2015-04-06 03:11:23.840526
dd = datetime.datetime.strptime("2015-04-06 03:11:23.840526",unprintStrptimeFmt)
print dd == d 
# produces: True
</code></pre>
</div>
