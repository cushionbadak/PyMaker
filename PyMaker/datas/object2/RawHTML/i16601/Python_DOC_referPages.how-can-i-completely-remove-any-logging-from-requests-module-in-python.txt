<div class="post-text" itemprop="text">
<p>How can I completely remove any logging from requests module in Python? I don't need to set even CRITICAL level. Smth like this</p>
<pre><code>import logging
requests_log = logging.getLogger("requests")
requests_log.setLevel(logging.CRITICAL)
</code></pre>
<p>but without any messages, even CRITICAL.</p>
</div>
<div class="post-text" itemprop="text">
<p>First of all, <code>requests</code> <em>doesn't log anything</em>; only the <code>urllib3</code> library that <code>requests</code> depends on does. That library only logs messages at <code>INFO</code> and <code>DEBUG</code> levels, so setting the log level to <code>logging.CRITICAL</code> <em>disables all messages already</em>:</p>
<pre><code>urllib3_log = logging.getLogger("urllib3")
urllib3_log.setLevel(logging.CRITICAL)
</code></pre>
<p>You could also just disable propagation:</p>
<pre><code>logging.getLogger("urllib3").propagate = False
</code></pre>
<p>That's enough to completely disable all logging that the <code>urllib3</code> library does.</p>
<p>The <code>urllib3</code> project has installed a <a href="https://docs.python.org/library/logging.handlers.html#nullhandler" rel="nofollow noreferrer"><code>NullHandler()</code></a> handler object on the project root logger, which ensures that the <a href="https://docs.python.org/3/library/logging.html#logging.lastResort" rel="nofollow noreferrer"><code>lastResort</code> handler</a> is not used for unhandled messages, even when propagation has been disabled.</p>
<p>That said, if you don't trust that future versions of <code>requests</code> won't use <code>sys.maxint</code> as a log level, and at the same time neglect to set a <code>NullHandler()</code>, then by all means add your own <code>NullHandler()</code> on the project root logger object, and then disable propagation there:</p>
<pre><code>import logging

requests_log = logging.getLogger("requests")
requests_log.addHandler(logging.NullHandler())
requests_log.propagate = False
</code></pre>
<p>Now all logging within the <code>requests</code> hierarchy will be directed to the <code>NullHandler()</code> instance, and with <code>propagate</code> set to <code>False</code> logging stops there. You can use this to silence any logger in the hierarchy.</p>
<p>In my opinion, that's overkill, no <code>requests</code> release made so far uses logging, and the project is staffed with capable developers that are unlikely to misconfigure the logging setup if they ever did add logging.</p>
</div>
<span class="comment-copy">The <code>requests</code> module <i>doesn't log messages</i>. The embedded <code>urllib3</code> library does, but doesn't log any <code>CRITICAL</code> level messages. Your code <i>more than suffices</i>.</span>
<span class="comment-copy">Possible duplicate of <a href="http://stackoverflow.com/questions/11029717/how-do-i-disable-log-messages-from-the-requests-library">How do I disable log messages from the Requests library?</a></span>
<span class="comment-copy">I'm on python version 2.7.6 (requests 2.12.4, urllib3 1.7.1). Even after I do all these I get log entry per request. There's no indication where these logs are from though.</span>
<span class="comment-copy">@chanux: I'm sorry, why are you telling me your versions?</span>
<span class="comment-copy">Sorry I pressed enter accidentally :). Any help is appreciated.</span>
<span class="comment-copy">@chanux: I updated the answer to be more clear that you'd need to disable logging for <code>urllib3</code>, not <code>requests</code>.</span>
<span class="comment-copy">What is the purpose of the line <code>requests_log.addHandler(logging.NullHandler())</code>? The <i><a href="https://docs.python.org/3/howto/logging.html#library-config" rel="nofollow noreferrer">Logging HOWTO</a></i> recommends to attach a <code>logging.NullHandler</code> to the top-level logger of your <i>library</i>, and only if you don't want your library's users to get your library's event messages of severity <code>logging.WARNING</code> or greater printed to <code>sys.stderr</code> in the absence of a logging configuration in their application. But here this is not the library code, this is the application code. So no need to redirect anything since <code>propagate</code> is <code>False</code>.</span>
