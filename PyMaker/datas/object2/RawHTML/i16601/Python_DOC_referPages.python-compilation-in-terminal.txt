<div class="post-text" itemprop="text">
<p>I am participating in a CodeForces competition tomorrow, and the rules say that Python is compiled with the following line (where %1 is the filename): </p>
<pre><code>python -c "compile(open('%1').read(), '%1', 'exec')"
</code></pre>
<p>I tried to compile a test file with this line, but it does not do anything at all:</p>
<pre><code>import sys
a = sys.stdin.readline()
sys.stdout.write(a)
</code></pre>
<p>However, the program works when I compile with <code>python test.py</code></p>
<p>How can I make this test file work with the compilation line above?</p>
<p>EDIT: I am using terminal on a mac.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can see what is happening if you try it in the interactive interpreter:</p>
<pre><code>&gt;&gt;&gt; compile(open('test.py').read(), 'read.py', 'exec')
&lt;code object &lt;module&gt; at 0x10b916130, file "read.py", line 1&gt;
</code></pre>
<p>The <a href="https://docs.python.org/3/library/functions.html#exec" rel="nofollow">compile built-in</a> compiles the source lines into a code object.  To actually run the code object, you need to <a href="https://docs.python.org/3/library/functions.html#exec" rel="nofollow">exec</a> it:</p>
<pre><code>&gt;&gt;&gt; codeobj = compile(open('test.py').read(), 'read.py', 'exec')
&gt;&gt;&gt; exec(codeobj)
Hello, world!
Hello, world!
&gt;&gt;&gt;
</code></pre>
<p>Note that there are some differences here between Python 2 and Python 3, primarily that <code>exec</code> is a statement in Py2 but a built-in function in Py3.  The above should work in either.</p>
</div>
<span class="comment-copy">How do you specify %1 ?</span>
<span class="comment-copy"><code>%1</code> is the filename to be compiled. I replaced <code>%1</code> with <code>test.py</code>.</span>
<span class="comment-copy"><a href="https://docs.python.org/2/library/functions.html?highlight=compile#compile" rel="nofollow noreferrer">Here is a link to the docs for reference</a></span>
