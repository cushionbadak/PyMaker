<div class="post-text" itemprop="text">
<p>I want to create an intelligent DiscFree indicator.</p>
<p>Code:</p>
<pre><code>import os
os.system("df -h") 
</code></pre>
<p>I want to use regular expression (to cut the size in MB), but I can't, because the function returns disk space and value "0".</p>
<pre><code>result = os.system("df -h")
</code></pre>
<p>Variable "result" is "0".</p>
<p>How can I access to disk space and use it?</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/2/library/subprocess.html" rel="nofollow"><code>subprocess</code></a> for invoking console commands:</p>
<pre><code>import subprocess

def command(cmd):
    try:
        p = subprocess.Popen(cmd, shell = True, stdin = subprocess.PIPE, stdout = subprocess.PIPE, stderr = subprocess.STDOUT, close_fds = True)
        stdout = p.communicate()
        return stdout[0]
    except Exception as ex:
        raise Exception(ex)

df = command("df -h")

print(df)
</code></pre>
<p>Which prints:</p>
<pre><code>Filesystem      Size   Used  Avail Capacity  iused    ifree %iused  Mounted on
/dev/disk0s2   233Gi  160Gi   72Gi    69% 42083619 18985821   69%   /
devfs          187Ki  187Ki    0Bi   100%      648        0  100%   /dev
map -hosts       0Bi    0Bi    0Bi   100%        0        0  100%   /net
map auto_home    0Bi    0Bi    0Bi   100%        0        0  100%   /home
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>As an alternative, you can consider using some library functions to get the free space:</p>
<pre><code>import os
s = os.statvfs('/')
print (s.f_bavail * s.f_frsize) / 1024**2
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>use <a href="https://docs.python.org/2/library/os.html#os.popen" rel="nofollow"><code>os.popen</code></a> instead of os.system</p>
<pre><code>import os
result = os.popen("df -h").read()
print result
</code></pre>
<p><strong>Note:</strong> os.popen is deprecated as of Python 2.6 and <a href="https://docs.python.org/2/library/subprocess.html" rel="nofollow"><code>subprocess</code></a> is available since python 2.4 so if you want code to work on Python &gt;= 2.6 use <code>subprocess</code> and if support for Python &lt; 2.4 is important use <code>os.popen</code>.</p>
</div>
<span class="comment-copy">Use <code>subprocess</code>, in particular <a href="https://docs.python.org/3/library/subprocess.html#subprocess.check_output" rel="nofollow noreferrer"><code>subprocess.check_output</code></a>.</span>
<span class="comment-copy">possible duplicate of <a href="http://stackoverflow.com/questions/1996518/retrieving-the-output-of-subprocess-call">Retrieving the output of subprocess.call()</a></span>
<span class="comment-copy">The <code>0</code> you are seeing is the return code of the successfull <code>df -h</code> call.</span>
