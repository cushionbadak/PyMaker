<div class="post-text" itemprop="text">
<p>I have a strange case for search and replace a string in text file using python. </p>
<p>Input Data: I have a text file which looks similar as shown below.</p>
<pre><code>QA1,QBFLUX,1.0
many lines
QA2,QBFLUX,1.0
many lines
QA3,QBFLUX,1.0
many lines
QA4,QBFLUX,1.0
many lines
QA5,QBFLUX,1.0
many lines
QA6,QBFLUX,1.0
many lines.
</code></pre>
<p>I have 2 problems to be addressed</p>
<ol>
<li><p>Search and replace <code>1.0</code> with <code>0.0</code>. The desired output is: </p>
<pre><code>QA1,QBFLUX,0.0
many lines
QA2,QBFLUX,0.0
many lines
QA3,QBFLUX,0.0
</code></pre></li>
<li><p>In the above lines I want to increment the values by some value like <code>0.2</code> or <code>0.4</code>. The desired output is:</p>
<pre><code>QA1,QBFLUX,0.0
many lines
QA2,QBFLUX,0.2
many lines
QA3,QBFLUX,0.4.
</code></pre></li>
</ol>
<p>The "<code>many lines</code>" above indicates there will many lines in that section. </p>
<p>In simple words my issues can be summarized as below</p>
<ol>
<li><p>Firstly search for all the lines which contains <code>QA1</code>, <code>QA2</code>, etc. and replace all the values in the last entry to <code>0.0</code>.</p></li>
<li><p>Secondly increment the values by given increment like <code>0.2</code> or <code>0.4</code> in the last columns of lines with <code>QA1</code>, <code>QA2</code>, etc.</p></li>
</ol>
<p>Note:</p>
<ul>
<li><p>I have tried file open and replace option but that did not solve my problem</p></li>
<li><p>I have not tried regular expression because of lack of knowledge in regular expression.</p></li>
<li><p>The text file might contain about 5000-6000 lines, the lines <code>QA1</code>, <code>QA2</code>, etc. lines will be about 100-150 lines.</p></li>
</ul>
</div>
<div class="post-text" itemprop="text">
<p>Python provides a module, <a href="https://docs.python.org/3/library/fileinput.html" rel="nofollow">fileinput</a>, which is particularly convenient for this task:</p>
<pre><code>import fileinput
import sys
count = 0
for line in fileinput.input([filename], inplace=True, backup='.bak'):
    if line.startswith('QA'):
        pre, post = line.rsplit(',', 1)
        sys.stdout.write('{},{:0.1f}\n'.format(pre, count))
        count += 0.2
    else:
        sys.stdout.write(line)
</code></pre>
<hr/>
<p>I don't think you need to replace all the <code>1.0</code>s with <code>0.0</code> before replacing the <code>0.0</code>s with a number incrementing by 0.2. Instead, just find the lines that begin with <code>QA</code>, and replace the last number with the desired number.</p>
</div>
<div class="post-text" itemprop="text">
<p>u can acheive this in following steps:</p>
<ol>
<li>open a new file to write the data</li>
<li>search for the word 'QBFLUX' in line</li>
<li><p>now replace the 1.0 with the 0.0(val)</p></li>
<li><p>increment the val by 0.2</p>
<pre><code>out= open('output.txt','a') 
with open('data.txt','r') as file:
    val=0.0
    for line in file:
        if 'QBFLUX' in line:
            tmp=line.split(',')
            tmp[-1]=str(val)+'\n'
            out.write(','.join(tmp))
            val+=0.2

        else:
            out.write(line)
</code></pre></li>
</ol>
</div>
<span class="comment-copy">is there any code for the problem . we cann't write code for you. If you have specific problem please feel free to ask</span>
<span class="comment-copy">It's always important to tell people <a href="http://whathaveyoutried.com/" rel="nofollow noreferrer">what you have tried</a>, including snippets of any failed attempts so that they can understand what avenues you have missed. It's important because it motivates people to answer and it's important because it makes it <i>easier</i> to give high quality, relevant answers. With the current state of the question, this hasn't been achieved. If you edit the question, it's possible that the question can be prevented from being closed and the quantity, quality and clarity of answers you get will improve as well.</span>
<span class="comment-copy">Note that "I have tried file open and replace option but that did not solve my problem" is far too unclear to be of help. What was your attempt? You mention <code>regex</code>; did you <i>try</i> and learn it? If so, what avenues did you attempt?</span>
<span class="comment-copy"><code>readline()</code>, <code>split(',')</code>, <code>element[0] in ['QA1','QA2']</code>, <code>element[3] = 0.0</code>, <code>join()</code>, <code>write()</code></span>
<span class="comment-copy">+1 excellent answer. ilearned a new function thankyou</span>
