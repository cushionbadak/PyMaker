<div class="post-text" itemprop="text">
<p>How can I get a CIDR notation representing a range of IP addresses, given the start and end IP addresses of the range, in Python? I can find CIDR to IP Range but cannot find any code for the reverse.</p>
<p>Example of the desired output:</p>
<pre><code>startip = '63.223.64.0'
endip = '63.223.127.255'

return '63.223.64.0/18'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You may use <code>iprange_to_cidrs</code> provided by <a href="https://pypi.python.org/pypi/netaddr" rel="noreferrer">netaddr</a> module. Example:</p>
<pre class="lang-py prettyprint-override"><code>cidrs = netaddr.iprange_to_cidrs(startip, endip)
</code></pre>
<p>Here are the official docs: <a href="https://netaddr.readthedocs.io/" rel="noreferrer">https://netaddr.readthedocs.io/</a></p>
</div>
<div class="post-text" itemprop="text">
<p>Starting Python 3.3 the bundled <a href="https://docs.python.org/3/library/ipaddress.html" rel="nofollow noreferrer">ipaddress</a> can provide what you want. The function <a href="https://docs.python.org/3/library/ipaddress.html#ipaddress.summarize_address_range" rel="nofollow noreferrer">summarize_address_range</a> returns an iterator with the networks resulting from the start, end you specify:</p>
<pre><code>&gt;&gt;&gt; startip = ipaddress.IPv4Address('63.223.64.0')
&gt;&gt;&gt; endip = ipaddress.IPv4Address('63.223.127.255')
&gt;&gt;&gt; [ipaddr for ipaddr in ipaddress.summarize_address_range(startip, endip)]
[IPv4Network('63.223.64.0/18')]
</code></pre>
</div>
<span class="comment-copy">cidrs = netaddr.ip_range_to_cidrs(ip1 , ip2 ) AttributeError: 'module' object has no attribute 'ip_range_to_cidrs'</span>
<span class="comment-copy">@ChrisHall Sorry for the typo, I have updated my answer.</span>
<span class="comment-copy">Here's how to do it in Python3:  from ipaddress import ip_address, summarize_address_range; start,end = ip_address(startip), ip_address(endip); return summarize_address_range(start,end).</span>
<span class="comment-copy">To tidy up @JJC's answer for <code>python 2.7</code>.................................................................................................  <code>from ipaddress import ip_address,summarize_address_range; summarize_address_range(ip_address(unicode(startip)), ip_address(unicode(endip)))</code></span>
