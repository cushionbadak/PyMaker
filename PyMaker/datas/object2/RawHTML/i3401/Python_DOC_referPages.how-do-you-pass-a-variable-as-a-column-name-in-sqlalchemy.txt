<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/10251724/how-to-give-column-name-dynamically-from-string-variable-in-sql-alchemy-filter">How to give column name dynamically from string variable in sql alchemy filter?</a>
<span class="question-originals-answer-count">
                    4 answers
                </span>
</li>
</ul>
</div>
<p>I have recently created a script which allows a user to both filter a table and then sort the remaining columns into ascending and descending order. This is what i wrote: </p>
<pre><code>    if 'desc' in request.form:
        if request.form['desc'] == 'date_time':
            display_test_results = test_result.query.order_by(desc(test_result.date_time)).filter(or_(test_result.date_time.like('%' +global_value_detailed+ '%'),                                                          
                                                    test_result.place_of_test.like('%' +global_value_detailed+ '%'),
                                                    test_result.part_number.like('%' +global_value_detailed+ '%'),
                                                    test_result.serial_number.like('%' +global_value_detailed+ '%'),
                                                    test_result.test_details.like('%' +global_value_detailed+ '%'),
                                                    test_result.result.like('%' +global_value_detailed+ '%')))

            return render_template('/detailed_test_data.html', title='Database Full', display_test_results=display_test_results)

        elif request.form['desc'] == 'part_number':
</code></pre>
<p>Then repeated this for all of my columns, the issue here is that i have 17 columns ( not all have been used in this example.) So to get ascending and descending sorting working I have 34 batches of code accounting to 900 lines. This is a huge amount of code which will slow down the productivity of my search/sorting feature ( i presume.)    </p>
<p>Is there way of using a refined code, where the request.form['desc'] value is saved as a variable, then that variable used to tell the query which column to look at? I assume it would eventually look something similar to the code bellow. But when i run this code i get the error trackback bellow it.  </p>
<pre><code> if request.form['desc'] != '':
                    order_column = request.form['desc']

                    display_test_results = test_result.query.order_by(desc(test_result.order_column)).filter(or_(test_result.date_time.like('%' +global_value_primary+ '%'),
                                                                                                            test_result.place_of_test.like('%' +global_value_primary+ '%'),
                                                                                                            test_result.serial_number.like('%' +global_value_primary+ '%'),
                                                                                                            test_result.result.like('%' +global_value_primary+ '%'))).filter(test_result.test_details=='Overall').all()
                    return render_template('/primary_test_data.html', title='', display_test_results=display_test_results)

 elif request.form['asc'] != '':
                    order_column = request.form['asc'] ... 
</code></pre>
<p>AttributeError: type object 'test_result' has no attribute 'order_column'</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/3/library/functions.html#getattr" rel="nofollow noreferrer"><strong>getattr</strong></a></p>
<p><code>.order_by(desc(getattr(test_result, request.form['desc'])))</code></p>
</div>
