<div class="post-text" itemprop="text">
<p>I am testing python's singledispatch: <a href="https://docs.python.org/3/library/functools.html?highlight=singledispatch#functools.singledispatch" rel="nofollow noreferrer">https://docs.python.org/3/library/functools.html?highlight=singledispatch#functools.singledispatch</a></p>
<p>Block A is supposed to work as Block B according to the document. But as you can see in the output, only Block B works accordingly.</p>
<p>What's is the problem here?? Thanks.</p>
<pre><code>from functools import singledispatch


# Block A
@singledispatch
def divider(a, b=1):
    print(a, b)

@divider.register
def _(a: int, b=1):
    print(a/b)

@divider.register
def _(a: str, b=1):
    print(a[:len(a)//b])

divider(25, 2)
divider('single dispatch practice', 2)


# Block B
@singledispatch
def div(a, b=1):
    print(a, b)


@div.register(int)
def _(a: int, b=1):
    print(a/b)


@div.register(str)
def _(a: str, b=1):
    print(a[:len(a)//b])

div(25 , 2)
div('single dispatch practice', 2)
</code></pre>
<p>Output:</p>
<pre><code>25 2
single dispatch practice 2
12.5
single dispa
</code></pre>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<p>I am testing python's singledispatch (...) What's is the problem here?</p>
</blockquote>
<p>You are correct to use type annotations, however <code>@singledispatch</code> only uses them <a href="https://docs.python.org/3/whatsnew/3.7.html#functools" rel="nofollow noreferrer">since Python 3.7</a> (annotations were introduced in Python 3.0, singledispatch in 3.4). Thus</p>
<pre><code># works since 3.4
@foo.register(str)
def foo_str(a: str):
    ...

# works since 3.7
@foo.register
def foo_str(a: str)
    ...
</code></pre>
</div>
<span class="comment-copy">What version of python are you using? The type annotation feature is new in Python 3.7</span>
<span class="comment-copy">thanks. I changed the python interpreter to 3.7 and now it works!</span>
<span class="comment-copy">@PatrickHaugh actually type annotations were introduced in 3.0, however <code>@singledispatch</code> only uses then since 3.7, <a href="https://docs.python.org/3/whatsnew/3.7.html#functools" rel="nofollow noreferrer">docs.python.org/3/whatsnew/3.7.html#functools</a></span>
<span class="comment-copy">@miraculixx That's what I meant by "the type annotation feature".  I suppose that's a little unclear.</span>
