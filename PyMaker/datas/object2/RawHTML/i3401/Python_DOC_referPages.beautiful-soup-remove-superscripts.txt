<div class="post-text" itemprop="text">
<p>How do I remove the superscripts from all of the text? I have code below that gets all visible text, but the superscripts for footnoting are messing things up. How do I remove them?</p>
<p>for example <code>Active accounts (1),(2)</code>, <code>(1),(2)</code> are visible superscripts. </p>
<pre><code>from bs4 import BeautifulSoup
from bs4.element import Comment
import requests


f_url='https://www.sec.gov/Archives/edgar/data/1633917/000163391718000094/exhibit991prq12018pypl.htm'

def tag_visible(element):
    if element.parent.name in ['style', 'script', 'head', 'title', 'meta', '[document]']:
        return False
    if isinstance(element, Comment):
        return False
    return True


def text_from_html(body):
    soup = BeautifulSoup(body, 'html.parser')
    texts = soup.findAll(text=True)
    visible_texts = filter(tag_visible, texts)  
    return u" ".join(t.strip() for t in visible_texts)

html = requests.get(f_url)
text= text_from_html(html.text)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The BeautifulSoup function <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#find-all" rel="nofollow noreferrer"><code>find_all</code></a> returns a list of all single discrete HTML elements in the input (<code>find_all</code> is the proper function to use in BeautifulSoup 4 and preferred over <code>findAll</code>). The next function, <a href="https://docs.python.org/3/library/functions.html#filter" rel="nofollow noreferrer"><code>filter</code></a>, goes through this list and removes the items for which its callback routine returns <code>False</code>. The callback function tests the tag name of each snippet and returns <code>False</code> if it's in the not-wanted list, <code>True</code> otherwise.</p>
<p>If these superscripts are always indicated by the proper HTML tag <code>sup</code> then you can add it to the not-wanted list in the callback function.</p>
<p>Possible pitfalls are:</p>
<ol>
<li>It is assumed that the literal (semantically correct) tag <code>sup</code> is used, and not, for example, a class or a span that merely <em>specifies</em> <code>vertical-align: superscript;</code> in its CSS;</li>
<li>It is assumed that you want to get rid of <em>all</em> elements that are in this superscript tag. If there are exceptions ("the 20<sup>th</sup> century"), you can check the text contents; for example, only remove if its contents are all numerical. If there are exceptions to <em>that</em> ("a<sup>2</sup> = b<sup>2</sup> + c<sup>2</sup>"), you will have to check for a wider context, or build a whitelist or blacklist of inclusions/exclusions.</li>
</ol>
</div>
<span class="comment-copy">wow... didn't know <code>sup</code> was an option. put it in the answer below and I will give you credit for it.</span>
<span class="comment-copy">Glad I could help â€“ and good thing the most basic solution worked! (Per the possible reasons it could <i>not</i> have worked.) If you run into one of those reasons need help with fine-tuning the <code>tag_visible</code> function, just say so. It would probably need an example of your HTML.</span>
