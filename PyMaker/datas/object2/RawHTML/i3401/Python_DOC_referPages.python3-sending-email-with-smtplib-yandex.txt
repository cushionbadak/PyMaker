<div class="post-text" itemprop="text">
<p>I'm trying to send emails using yandex but my function doesn't work. It's just waiting forever there is no error either. Here is my function : </p>
<pre><code>def send_emails(title,msg):
    server = smtplib.SMTP('smtp.yandex.com.tr:465')
    server.ehlo()
    server.starttls()
    server.login(yandex_mail,yandex_pass)
    message = 'Subject: {}\n\n{}'.format(title,msg)
    server.sendmail(yandex_mail,send_to_email,message)
    server.quit()
    print('E-mails successfully sent!')

send_emails('Test Mail', 'Yes its a test mail!')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>i think your problem is here:</p>
<pre><code>server = smtplib.SMTP('smtp.yandex.com.tr:465')
</code></pre>
<p>you need to use <a href="https://docs.python.org/3/library/smtplib.html#smtplib.SMTP_SSL" rel="nofollow noreferrer">smtplib.SMTP_SSL</a> because connection is security with <code>SSL</code> <a href="https://yandex.com/support/mail/mail-clients.html#imap" rel="nofollow noreferrer">docs</a>, also <code>smtplib.SMTP_SSL</code> get many params, first is <code>host</code> and second is <code>port</code> and other params, but you need now only this two, you need to give <code>host</code> and <code>port</code> separately, try this</p>
<pre><code>def send_emails(title,msg):
    server = smtplib.SMTP_SSL('smtp.yandex.com.tr', 465)
    ...
</code></pre>
</div>
<span class="comment-copy">Nothing changed it's still waiting forever.</span>
<span class="comment-copy">but without <code>tr</code> ? <code>smtp.yandex.com</code> only</span>
<span class="comment-copy">I tried both same behaviour. I found old question : <a href="https://stackoverflow.com/questions/39516200/python-get-gmail-server-with-smtplib-never-ends" title="python get gmail server with smtplib never ends">stackoverflow.com/questions/39516200/â€¦</a> - but there is no solution either</span>
<span class="comment-copy">try to put another <code>server.ehlo()</code> after <code>server.starttls()</code></span>
<span class="comment-copy">i update my answer try to use <code>smtplib.SMTP_SSL('smtp.yandex.com', 465)</code>, important <code>smtplib.SMTP_SSL()</code> if i print out any thing after this it works</span>
