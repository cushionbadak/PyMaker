<div class="post-text" itemprop="text">
<p>I am using Pymongo. I have successfully connected to my MongoDB. Collection name is <code>test_collection</code>. In the document, there is a key called <code>request_time</code> . I am trying to fetch the documents in a specific range of <code>request_time</code>. </p>
<p>In the mongodb shell, this command works,</p>
<pre><code>db.getCollection('test_collection').find({ request_time: { $gte: new Date('2018-06-22'), $lt: new Date('2018-06-26') }});
</code></pre>
<p>But, when I am using pymongo. It is not accepting <code>$</code> and giving syntax error. </p>
<pre><code>collection = db['test_collection']

cursor = collection.find({request_time: { $gte: new Date('2018-06-22'), $lt: new Date('2018-06-26') }})
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You write commands in Javascript in mongo shell, don't copy-paste them into python.
Python is not Javascript.</p>
<p>Python does not have neither <code>new</code> nor builtin <code>Date</code> type.</p>
<p><a href="http://api.mongodb.com/python/current/api/pymongo/collection.html#pymongo.collection.Collection.find" rel="nofollow noreferrer"><code>find</code></a> method of the <code>pymongo.collection.Collection</code> class expects dictionary with string keys, put keys in quotes.</p>
<p>Use <a href="https://docs.python.org/3/library/datetime.html#datetime-objects" rel="nofollow noreferrer"><code>datetime.datetime</code></a> if respective fields in documents from the mongo collection are <code>ISODate</code>s.</p>
<pre><code>import datetime 
cursor = collection.find({"request_time": { 
                          "$gte": datetime.datetime(2018, 6, 22), 
                          "$lt": datetime.datetime(2018, 6, 26) }
                         })
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use <strong>'$gt'</strong> and <strong>'$lt'</strong> in code.</p>
<pre><code>cursor = collection.find({request_time: { '$gte': new Date('2018-06-22'), '$lt': new Date('2018-06-26') }})
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Try put brasket in each condition</p>
<p>({ { $gte: new Date('2018-06-22') }, { $lt: new Date('2018-06-26') } })</p>
</div>
<span class="comment-copy">It is now showing request_time not defined. request_time key is present in the document itself. Do I need to define it somehow ?</span>
<span class="comment-copy">Pymongo receives all functions and fields as strings. So the final query would be cursor = collection.find({'request_time': { '$gte': new Date('2018-06-22'), '$lt': new Date('2018-06-26') }})</span>
<span class="comment-copy">python doesn't have neither <code>new</code> nor builtin <code>Date</code> type</span>
<span class="comment-copy">@wl2776 thanks for notifying</span>
<span class="comment-copy">still showing SyntaxError: invalid syntax</span>
<span class="comment-copy">Just for sanity check... replace quotes to double quotes</span>
<span class="comment-copy">or try put double quotes at $gt and $lt</span>
