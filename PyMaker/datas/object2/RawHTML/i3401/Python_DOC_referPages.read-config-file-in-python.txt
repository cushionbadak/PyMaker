<div class="post-text" itemprop="text">
<p>I would like to read following config file having IPs defined for workers and managers. I tried configparser module but it requires key-value pairs. Anyone has any idea to read the below file using python, I would be thankful.   </p>
<blockquote>
<p>[managers]<br/>
    1.2.3.4<br/>
    [workers]<br/>
    2.3.45.5<br/>
    3.5.6.7<br/>
    5.7.8.9  </p>
</blockquote>
<p>File may have random number of IPs.</p>
</div>
<div class="post-text" itemprop="text">
<p>If you reformat your data file as follows, you can then use <code>configparser</code> module to parse it. You can install it by doing <code>pip install configparser</code></p>
<p><strong>Data file</strong></p>
<pre><code>[managers]
ip = 1.2.3.4
[workers]
ip = 2.3.45.5
     3.5.6.7
     5.7.8.9
</code></pre>
<p><strong>Sample Usage</strong></p>
<pre><code>from configparser import ConfigParser
# from ConfigParser import ConfigParser # for python3 
data_file = 'tmp.txt'

config = ConfigParser()
config.read(data_file)

config.sections()
# ['managers', 'workers']

config['managers']['ip']
# '1.2.3.4'

config['workers']['ip']
#'2.3.45.5\n3.5.6.7\n5.7.8.9'

config['workers']['ip'].splitlines()
#['2.3.45.5', '3.5.6.7', '5.7.8.9']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Using a simple iteration.</p>
<p><strong>Demo:</strong></p>
<pre><code>res = {}
temp = []
with open(filename, "r") as infile:
    for line in infile:                      #Iterate over each line
        line = line.strip()
        if line.startswith("["):             #Check if line is header
            line = line.strip("[]")
            res[line] = []                   #Create Key
            temp.append(line)
        else:
            res[temp[-1]].append(line)        #Append Values.
print(res)
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>{'workers': ['2.3.45.5', '3.5.6.7', '5.7.8.9'], 'managers': ['1.2.3.4']}
</code></pre>
</div>
<span class="comment-copy"><code>with open("path/to/your/file.ext") as f:</code> and then parse the file. It's quite easy to find out where a "section" begins, so it shouldn't take more than a few minutes to parse this into a dict.</span>
<span class="comment-copy">you may wish to have a look at <a href="https://docs.python.org/3/library/configparser.html" rel="nofollow noreferrer">configparser â€” Configuration file parser</a>. See also <a href="https://stackoverflow.com/questions/3220670/read-all-the-contents-in-ini-file-into-dictionary-with-python">Read all the contents in ini file into dictionary with Python</a></span>
<span class="comment-copy">all these solutions are talking about key value pairs. however, I dont have any key value pair in my config file. If I understood your solution wrongly, please correct me.</span>
<span class="comment-copy">...Above solution is giving me errors like <code>AttributeError:  instance has no attribute '__getitem__'</code>. I am using <code>python 2.7</code>. Do I need to add extra things in the above solution ??</span>
<span class="comment-copy">@YogeshJilhawar. Above code works fine for me on both python2.7 and python3. Can you try again by importing configparser as <code>from backports.configparser import ConfigParser</code></span>
<span class="comment-copy">@Sunitha..Yes its working for me too.  Thanks for your kind help.</span>
