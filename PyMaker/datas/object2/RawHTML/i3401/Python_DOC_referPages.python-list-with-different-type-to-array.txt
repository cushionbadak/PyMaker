<div class="post-text" itemprop="text">
<p>I have a problem about list to array conversion. I have a list from a csv file, like </p>
<p><code>a=[['1','a'],['2','b']]</code></p>
<p>Now I only want the first column, the number '1' and '2', and convert them to a numpy array. How do I accomplish this? Using <code>b = np.array(a)</code> put all items as string into the array.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.fromiter.html" rel="nofollow noreferrer"><code>numpy.fromiter</code></a> with <a href="https://docs.python.org/3/library/operator.html#operator.itemgetter" rel="nofollow noreferrer"><code>operator.itemgetter</code></a>. Note a standard NumPy array is not a good choice for mixed types (dtype <code>object</code>), as this will cause all data to be stored in pointers.</p>
<pre><code>a = [['1', 'a'], ['2', 'b']]

from operator import itemgetter

res = np.fromiter(map(itemgetter(0), a), dtype=int)

print(res)

array([1, 2])
</code></pre>
<p>Some performance benchmarking:</p>
<pre><code>a = [['1', 'a'], ['2', 'b']] * 10000

%timeit np.fromiter(map(itemgetter(0), a), dtype=int)  # 4.31 ms per loop
%timeit np.array(a)[:, 0].astype(int)                  # 15.1 ms per loop
%timeit np.array([i[0] for i in a]).astype(int)        # 8.3 ms per loop
</code></pre>
<p>If you need a <a href="https://docs.scipy.org/doc/numpy/user/basics.rec.html" rel="nofollow noreferrer">structured array</a> of mixed types:</p>
<pre><code>x = np.array([(int(i[0]), i[1]) for i in a],
             dtype=[('val', 'i4'), ('text', 'S10')])

print(x)

array([(1, b'a'), (2, b'b')], 
      dtype=[('val', '&lt;i4'), ('text', 'S10')])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You'd first need to create a new list`, that only contains the first values of the lists in a. For example</p>
<pre><code>c = []
for row in a:
    c.append(row[0])
b = np.array(c)
</code></pre>
<p>More Pythonic would probably be a list comprehension:</p>
<pre><code>c = [x[0] for x in a]
b = np.array(c)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>import numpy as np

a = [['1', 'a'], ['2', 'b']]
print(np.array(a)[:, 0].astype(int))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>try this:</p>
<pre><code>a=array([int(i[0]) for i in a])
</code></pre>
</div>
<span class="comment-copy">Thanks. This is an elegant solution. But what if I do not know which column is number? I have a very big list and I do not want to check which row is number. I simply want the code to select the number from string. How do I do this?</span>
<span class="comment-copy">In each row, will be same column be a number? Choosing <i>which column</i> to convert is likely beyond the scope of your question. I'd advise you <a href="https://stackoverflow.com/questions/ask">post a new question</a> with <i>exactly</i> the scenario you want to handle.</span>
<span class="comment-copy">Yes, one column has a certain type, for example all number in the first column and all string in the 10th column. I want to choose which row is number and which row is string and then convert all number row to an array. I will edit my question.</span>
<span class="comment-copy">@ZhaoHao, You shouldn't change your question. This may seem harsh, but there are already 4 answers. All of them will have to be updated or deleted. Some people may be asleep by now, depending on their time zone and miss this completely. Please <a href="https://stackoverflow.com/questions/ask">ask a new question</a> instead.</span>
<span class="comment-copy">You are right. Thanks.</span>
