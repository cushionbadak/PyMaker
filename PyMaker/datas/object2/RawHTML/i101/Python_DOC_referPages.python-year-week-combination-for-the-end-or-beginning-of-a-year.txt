<div class="post-text" itemprop="text">
<p>I want to construct YYYY_WW information from dates (where WW is a number of week). I am struggling with the years' endings (beginnings), where a part of a week can fall into the neighbouring year:</p>
<pre><code>import datetime
import pandas as pd

# generate range of dates and extract YYYY_WW
dates_range = pd.date_range(start='2018-12-29', end='2019-01-02')
weeks = dates_range.strftime("%Y_%V")
print(weeks)

#Index(['2018_52', '2018_52', '2018_01', '2019_01', '2019_01'], dtype='object')
</code></pre>
<p><code>2018_01</code> is obviously incorrect. Any hint for a simple workaround?</p>
</div>
<div class="post-text" itemprop="text">
<p>You are looking for the <code>%G</code> directive:</p>
<blockquote>
<p>ISO 8601 year with century representing the year that contains the
  greater part of the ISO week (%V).</p>
</blockquote>
<p>See <a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior" rel="noreferrer">strftime() and strptime() behavior</a> for details.</p>
<p>For example:</p>
<pre><code>import datetime
import pandas as pd

dates_range = pd.date_range(start='2018-12-29', end='2019-1-2')
weeks = dates_range.strftime('%G_%V')
print(weeks)
# Index(['2018_52', '2018_52', '2019_01', '2019_01', '2019_01'], dtype='object')
</code></pre>
</div>
<span class="comment-copy">What behavior do you want? ISO definition, meaning 2018-12-31 is in week 1 of 2019?</span>
<span class="comment-copy">I need <code>['2018_52', '2018_52', '2019_01', '2019_01', '2019_01']</code>, which should be in line with ISO, see e.g. <a href="https://www.staff.science.uu.nl/~gent0113/calendar/isocalendar_text_2.htm" rel="nofollow noreferrer">here</a></span>
