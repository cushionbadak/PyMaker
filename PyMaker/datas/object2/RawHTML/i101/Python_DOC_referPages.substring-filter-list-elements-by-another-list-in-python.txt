<div class="post-text" itemprop="text">
<p>I have two lists looking like:</p>
<pre><code>list1 = ['bj-100-cy','bj-101-hd','sh-200-pd','sh-201-hp']
list2 = [100, 200]
</code></pre>
<p>I want to substring filter <code>list1</code> by elements of <code>list2</code> and get expected output as follows:</p>
<pre><code>outcome = ['bj-100-cy', 'sh-200-pd']
</code></pre>
<p>When doing:</p>
<pre><code>list1 = str(list1)
list2 = str(list2)
outcome = [x for x in list2 if [y for y in list1 if x in y]]
</code></pre>
<p>I get a result like this: <code>['[', '1', '0', '0', ',', ' ', '2', '0', '0', ']']</code>. 
How can I filter it correctly? Thanks.</p>
<p>Reference related:</p>
<p><a href="https://stackoverflow.com/questions/46028725/is-it-possible-to-filter-list-of-substrings-by-another-list-of-strings-in-python">Is it possible to filter list of substrings by another list of strings in Python?</a></p>
</div>
<div class="post-text" itemprop="text">
<p>List comprehension and <code>any</code>:</p>
<pre><code>[i for i in list1 if any(i for j in list2 if str(j) in i)]
</code></pre>
<p><code>any</code> to check if any element of <code>list2</code> is a substring of the <code>list1</code> item (<code>__contains__</code>) being iterated over.</p>
<p><strong>Example:</strong></p>
<pre><code>In [92]: list1 = ['bj-100-cy','bj-101-hd','sh-200-pd','sh-201-hp']
    ...: list2 = [100, 200]
    ...: 

In [93]: [i for i in list1 if any(i for j in list2 if str(j) in i)]
Out[93]: ['bj-100-cy', 'sh-200-pd']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use <code>any</code>:</p>
<pre><code>list1 = ['bj-100-cy','bj-101-hd','sh-200-pd','sh-201-hp']
list2 = [100, 200]
list2 = [str(x) for x in list2]

outcome = [s for s in list1 if any(x in s for x in list2)]
</code></pre>
<p><code>any</code> returns <code>True</code> if any of the conditions you give it are <code>True</code>.</p>
</div>
<div class="post-text" itemprop="text">
<pre class="lang-py prettyprint-override"><code>list1 = str(list1)
list2 = str(list2)
</code></pre>
<p>You are converting your list into a string with the above statements. So when you iterate in a for loop, you are iterating each characters, instead of each word.</p>
<p>So you should remove string conversion and instead do a list comprehension as follows.
Also, in your outcome file instead of checking if the word in list2 is in list1, you are checking the opposite. So you got like 100 and 200 as chars which are in list 2.</p>
<pre class="lang-py prettyprint-override"><code>list1 = ['bj-100-cy','bj-101-hd','sh-200-pd','sh-201-hp']
list2 = [100, 200]
outcome = [x for x in list1 for y in list2 if str(y) in x]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can try this one:</p>
<pre><code>list1 = ['bj-100-cy','bj-101-hd','sh-200-pd','sh-201-hp']
list2 = [100, 200]

outcome = []
for item in list1:
    if any(str(i) in item for i in list2):
        outcome.append(item)
</code></pre>
<p>output:</p>
<pre><code>['bj-100-cy', 'sh-200-pd']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Another alternative list comprehension :</p>
<pre><code>&gt;&gt;&gt; list1 = ['bj-100-cy','bj-101-hd','sh-200-pd','sh-201-hp']
&gt;&gt;&gt; list2 = [100, 200]
&gt;&gt;&gt; occur = [i for i in list1  for j in list2 if str(j) in i]
&gt;&gt;&gt; occur
['bj-100-cy', 'sh-200-pd']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use builtin <a href="https://docs.python.org/3/library/functions.html#filter" rel="nofollow noreferrer">filter</a> method to filter the list based on your condition. Your condition requires python <code>in</code> operator to search for needle<code>([100, 200])</code> in haystack <code>([['bj-100-cy','bj-101-hd',...]])</code>.
We can use <a href="https://docs.python.org/3/library/operator.html#operator.contains" rel="nofollow noreferrer"><code>contains</code></a> method to simplify search syntax.</p>
<p><strong>Code</strong></p>
<pre><code>from operator import contains
filter(lambda x: any(contains(x,str(y)) for y in list2), list1)
</code></pre>
<p><strong>Example</strong></p>
<pre><code>&gt;&gt;&gt; list1 = ['bj-100-cy','bj-101-hd','sh-200-pd','sh-201-hp']
&gt;&gt;&gt; list2 = [100, 200]
&gt;&gt;&gt; for item in filter(lambda x: any(contains(x,str(y)) for y in list2), list1):
...     print(item)
...
bj-100-cy
sh-200-pd
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use regex:</p>
<pre><code>import re

list1 = ['bj-100-cy', 'bj-101-hd', 'sh-200-pd', 'sh-201-hp']
list2 = [100, 200]

pattern = re.compile('|'.join(map(str, list2)))
list(filter(lambda x: pattern.search(x), list1))
# ['bj-100-cy', 'sh-200-pd']
</code></pre>
</div>
<span class="comment-copy">Thanks, I try with your script for my real data (which quasi same as example data here), I need to add <code>list2 = [str(x) for x in list2]</code> otherwise I got <code>TypeError: 'in &lt;string&gt;' requires string as left operand, not int</code></span>
<span class="comment-copy">@ahbon Thats strange, because i did type conversion in <code>str(j)</code>: <code>any(i for j in list2 if str(j) in i)</code></span>
<span class="comment-copy">Yeah, I reread the data and tried again, it's ok right now, thanks for all helps for this poster.</span>
