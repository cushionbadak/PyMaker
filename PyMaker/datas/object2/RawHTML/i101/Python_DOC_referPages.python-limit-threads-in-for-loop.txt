<div class="post-text" itemprop="text">
<p>i'm trying to limit this loop to 4 concurrent jobs:</p>
<pre><code>def testSSH(host, user, password, port):
s = pxssh.pxssh()
try:
    if not s.login (host, username=user, password=password, port=port):
        print(password)
        return False
    else:
        print(password)
        return True
except:
    print(password)
    return False




passes = "r", "1234", "12345", "123456!", "1234567", "a", "b", "e", "s", "A", "d", "66"

jobs = []
for passw in passes:
    thread = threading.Thread(target=testSSH, args=("localhost", "myuser", passw, "22",))
    jobs.append(thread)

for j in jobs:
        print(threading.active_count())
        j.start()

for j in jobs:
        j.join()
</code></pre>
<p>the code runs fine. however, i cannot seem to limit the concurrent jobs.
the threading.active_count() is always the value of passes.
any tips? i've tried <a href="https://stackoverflow.com/questions/19369724/the-right-way-to-limit-maximum-number-of-threads-running-at-once">this question</a> but could make little of it
thanks!</p>
</div>
<div class="post-text" itemprop="text">
<p>OK guys, found something myself:</p>
<pre><code>threads = 0
def testSSH(host, user, password, port):
s = pxssh.pxssh()
try:
    if not s.login (host, username=user, password=password, port=port):
        print(password)
        return False
    else:
        print(password)
        return True
except:
    print(password)
    return False




passes = "r", "1234", "12345", "123456!", "1234567", "a", "b", "e", "s", "A", "d", "66"

jobs = []
for passw in passes:
    thread = threading.Thread(target=testSSH, args=("localhost", "myuser", passw, "22",))
    jobs.append(thread)

for j in jobs:
    threads = threading.active_count()
    while threads &gt; 4:
    time.sleep(0.05)
    threads = threading.active_count()
        j.start()

for j in jobs:
        j.join()
</code></pre>
<p>hope this helps someone down the road...</p>
</div>
<span class="comment-copy">for limiting the resources like this, would you consider using <a href="https://docs.python.org/3/library/threading.html#semaphore-objects" rel="nofollow noreferrer">semaphores</a>?</span>
<span class="comment-copy">Possible duplicate of <a href="https://stackoverflow.com/questions/19369724/the-right-way-to-limit-maximum-number-of-threads-running-at-once">The right way to limit maximum number of threads running at once?</a></span>
<span class="comment-copy">can you send an example of using semaphores in a code like this one?</span>
