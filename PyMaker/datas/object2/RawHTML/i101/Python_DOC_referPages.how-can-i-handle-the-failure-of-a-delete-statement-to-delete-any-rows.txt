<div class="post-text" itemprop="text">
<p>I wrote this code to delete a row from a table – but if I enter a name which is not in the table, it still outputs "Data Deleted Successfully":</p>
<pre><code>n = input("Enter Student name you want to delete:")
try:
    cur.execute('DELETE FROM studentdata WHERE name=?', (n,))
    print("Data Deleted Successfully")
    conn.commit()
except:
    print("No data found with this name: ")
</code></pre>
<p>How can I handle this properly?</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Cursor.execute" rel="nofollow noreferrer"><code>Cursor.execute()</code></a> will only raise an exception if the SQL statement it attempts to execute fails – for example:</p>
<pre><code>&gt;&gt;&gt; cur.execute("This is not SQL")
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
sqlite3.OperationalError: near "This": syntax error
</code></pre>
<p>or</p>
<pre><code>&gt;&gt;&gt; cur.execute("SELECT * FROM nonexistent_table;")
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
sqlite3.OperationalError: no such table: nonexistent_table
</code></pre>
<p>A valid SQL statement which correctly does nothing has succeeded, not failed, and so doesn't raise an exception. Your <code>DELETE</code> statement is correct to do nothing when it doesn't find the provided value for <code>name</code>, so there's no error.</p>
<p>You can find out how many rows were affected by an SQL statement using the <a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Cursor.rowcount" rel="nofollow noreferrer"><code>Cursor.rowcount</code></a> attribute. Rewriting your code to make use of the attribute would look something like this:</p>
<pre><code>name = input("Enter Student name you want to delete:")
cur.execute('DELETE FROM studentdata WHERE name = ?;', [name])
if cur.rowcount &gt; 0:
    print("Data Deleted Successfully")
    conn.commit()
else:
    print("No data found with this name:", name)
</code></pre>
<p>Note: I've left the <code>commit()</code> where it was in your code … depending on your application, it may be that it should in fact be moved outside the <code>if</code>/<code>else</code> block.</p>
</div>
<span class="comment-copy">Deleting 0 rows is not an error like you seem to think.</span>
<span class="comment-copy">You may find the <a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Cursor.rowcount" rel="nofollow noreferrer">rowcount attribute</a> of the cursor class of interest.</span>
