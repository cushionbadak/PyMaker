<div class="post-text" itemprop="text">
<p>I have couple of positional and optional arguments (using argparser) , now need to add a flag which takes no argument/values and essentially calls a method.</p>
<p>let's say this is the current parser :</p>
<pre><code>./run.py arg1 arg2 -i input
</code></pre>
<p>here's the brief sample code</p>
<pre><code>parser.add_argument("arg1",
                    help="arg1 handler")
parser.add_argument("arg2",
                    help="arg2 handler")
parser.add_argument('-i', dest='input_handler',
                    help="input handler")
</code></pre>
<p>what I'm looking for is something similar when you use <code>--help</code> which results in showing the help (and <strong>takes precedences on other flags</strong>).
So I want to support a special flag (like --help) without worrying about providing all the other flags in the command line. </p>
<p>So something like this should work as well:</p>
<pre><code>./run.py --list
</code></pre>
<p>I was thinking to use <code>'store_true'</code> to take the flag with no value, but it does not have the precedence over other flags.</p>
<p>any comments/suggestions is really appreciated</p>
</div>
<div class="post-text" itemprop="text">
<p>You could use soemthing like this: <br/></p>
<pre><code>parser = argparse.ArgumentParser()
parser.add_argument('--list',action='store_true',help='perform some task')
parser.add_argument('--input',type=str, required=False, help='input variable')

args = parser.parse_args()

if args.list:
    perform_function()
elif args.input is not None:
    function(args.input)
...
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You're missing the <a href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.add_argument" rel="nofollow noreferrer"><code>nargs</code></a> field.</p>
<pre class="lang-py prettyprint-override"><code>#!/usr/bin/env python
"""Runs using two args and an option input

Usage: ./run.py arg1 arg2 -i input

Arguments:
    arg1/arg2: any order

Options:
   -i input
"""
import argparse

parser = argparse.ArgumentParser(usage=__doc__)
parser.add_argument("pos_args", help="Unknown pos args sequence", nargs=2)  # '+' for any number of args
parser.add_argument('-i', dest='input_handler', help="input handler")

args = parser.parse_args()

arg1, arg2 = args.pos_args
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><code>-h</code> help takes precedence because it forces sys.exit when encountered.  That is, it has a Action class that prints the help and then exits.</p>
<p>There is a <code>version</code> action class that does something similar - display a message and exit.</p>
<p>All other actions store something in the <code>args</code> Namespace, and continue parsing.  The <code>missing arguments</code> complaint is produced at the end of parsing when it deduces that some positional (or other required) arguments have not been filled.</p>
<p>I can think of several solutions:</p>
<ul>
<li><p>define a new Action subclass modeled on <code>help</code> or <code>version</code>.  If you take this route, you should do the development, so you know exactly what is happening.</p></li>
<li><p>change your positionals to something that is optional.  <code>nargs='?'</code> is a possibility, but making flagged is better.  In this case <code>input_handler</code> could be a simple <code>store_true</code> action.</p></li>
<li><p>use subparsers.  <code>input_handler</code> would be parser that takes no arguments.  The othe subparser would take the 2 positionals.  Look at the subparsers documentation, and the <code>set_defaults</code> note.</p></li>
</ul>
</div>
<span class="comment-copy">Could be useful if you also shared some code. That might help people to understand what exactly you are trying to achieve.</span>
<span class="comment-copy">Why do you need precedence? You can parse your arguments and then check if <code>--list</code> is there before acting on your other arguments.</span>
<span class="comment-copy">I want <code>./run.py --list</code> to work. Similar to <code>./run --help</code> which does not required any other flags/arguments. If I don't provide all the other arguments, argparser complains about missing arguments.</span>
<span class="comment-copy">Did you actually try this?  <code>nargs="2"</code> probably raises some sort of error, either on creation, parsing, or displaying a help.</span>
<span class="comment-copy">Fixed: don't use quotes where it's expecting an integer.</span>
