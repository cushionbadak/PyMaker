<div class="post-text" itemprop="text">
<p>I am new to Python. I am trying to extract one string ("concluded that our disclosure controls were effective as of") from a txt file ("infile.txt"). The file is relatively large, and I need to look for the above string in one particular section (between the "ITEM &amp; nbsp;9A" and the "ITEM &amp; nbsp;9B"). An example of such section follows:</p>
<pre><code>&lt;/A&gt;ITEM&amp;nbsp;9A. CONTROLS AND PROCEDURES. &lt;/B&gt;&lt;/FONT&gt;&lt;/P&gt; &lt;P STYLE="margin-top:6px;margin-bottom:0px"&gt;&lt;FONT STYLE="font-family:Times New Roman" SIZE="2"&gt;&lt;B&gt;Evaluation of Disclosure Controls and Procedures &lt;/B&gt;&lt;/FONT&gt; STYLE="margin-top:6px;margin-bottom:0px; text-indent:4%"&gt;&lt;FONT STYLE="font-family:Times New Roman" SIZE="2"&gt;Under the supervision and with the participation of our management, including our Chief Executive Officer and Chief Financial Officer, we conducted an evaluation of the effectiveness of our disclosure controls and procedures (as defined in Rules 13a-15(e) and 15d-15(e) under the Securities Exchange Act of 1934, as amended (Exchange Act)), as of the end of the period covered by this Annual Report on Form 10-K. Management recognizes that any controls and procedures, no matter how well designed and operated, can provide only reasonable assurance of achieving their objectives and management necessarily applies its judgment in evaluating the cost-benefit relationship of possible controls and procedures. Based on such evaluation, our Chief Executive Officer and Chief Financial Officer concluded that our disclosure controls and procedures were effective as of September&amp;nbsp;28, 2012. &lt;/FONT&gt;&lt;/P&gt; &lt;P STYLE="margin-top:18px;margin-bottom:0px"&gt;&lt;FONT STYLE="font-family:Times New Roman" SIZE="2"&gt;&lt;B&gt;Management&amp;#146;s Annual Report on Internal Control over Financial Reporting &lt;/B&gt;&lt;/FONT&gt; &lt;P STYLE="margin-top:6px;margin-bottom:0px; text-indent:4%"&gt;&lt;FONT STYLE="font-family:Times New Roman" SIZE="2"&gt;This Annual Report does not include a report of management&amp;#146;s assessment regarding internal control over financial reporting or an attestation report of the company&amp;#146;s registered public accounting firm due to a transition period established by rules of the Securities and Exchange Commission for newly public companies. &lt;/FONT&gt; &lt;P STYLE="margin-top:18px;margin-bottom:0px"&gt;&lt;FONT STYLE="font-family:Times New Roman" SIZE="2"&gt;&lt;B&gt;Changes in Internal Control over Financial Reporting &lt;/B&gt;&lt;/FONT&gt;&lt;/P&gt; &lt;P STYLE="margin-top:6px;margin-bottom:0px; text-indent:4%"&gt;&lt;FONT STYLE="font-family:Times New Roman" SIZE="2"&gt;There were no changes in our internal control over financial reporting (as defined in Rule&amp;nbsp;13a-15(f) under the Exchange Act) during the quarter ended September&amp;nbsp;28, 2012, that have materially affected, or are reasonably likely to materially affect, our internal control over financial reporting. &lt;/FONT&gt; &lt;P STYLE="margin-top:18px;margin-bottom:0px"&gt;&lt;FONT STYLE="font-family:Times New Roman" SIZE="2"&gt;&lt;B&gt;&lt;A NAME="tx431171_16"&gt;&lt;/A&gt;ITEM&amp;nbsp;9B. OTHER INFORMATION.
</code></pre>
<p>If the section has the desired string "concluded that our disclosure controls were effective as of" (the above section has it aprox. in the middle), then I would like to print a "1" in a separate "output.csv" file, if it does not, print "not found". The starting point of the section does not always coincide with the start of a line. I am sorry but could not figure out how to start.... I am using Python 3.6.</p>
<p>Thank you very much in advance!</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <code>re.findall</code>:</p>
<pre><code>import re

the_data = re.findall("&lt;/A&gt;ITEM&amp;nbsp;9A. (.*?)&lt;/B&gt;", string_data_from_file)

if len(the_data) &gt;0:
    print "1"

else:
    print "Not found"
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/re.html#module-re" rel="nofollow noreferrer">regular expressions</a> to extract text between a given opener and closer:</p>
<pre><code>import re

opener = re.escape(r"ITEM&amp;nbsp;9A")
closer = re.escape(r"ITEM&amp;nbsp;9B")
</code></pre>
<p>You can look over the extracts by with <code>re.finditer</code> and then filter the extracts with the target string using the in-operator:</p>
<pre><code>target_string = "concluded that our disclosure controls were effective as of"
for mo in re.finditer(opener + '(.*?)' + closer, inputstring, re.DOTALL):
    extract = mo.group(1)
    if target_string in extract:
        ...
</code></pre>
<p>Hopefully, this is enough to get you started :-)</p>
</div>
<span class="comment-copy">Thank you Ajax 1234. It still seems it doesn't work your way. I don't understand why you asked the re.findall("&lt;/A&gt;ITEM&amp;nbsp;9A. (.*?)&lt;/B&gt;"). Shouldn't it be re.findall("&lt;/A&gt;ITEM&amp;nbsp;9A. (.*?)&lt;/A&gt;ITEM&amp;nbsp;9B.")? Even like this, it does not found the desired string between these two sections... Btw, in your "string_data_from_file" I plugged in my desired string "concluded that our disclosure controls were effective as of". Hope this was ok. Thanks again.</span>
<span class="comment-copy">Thanks Raymond Hettinger. It seems it doesn't quite give anything. Btw, I replaced your "s" before the re.DOTALL by "target_string". I suspect this is what you meant. After the "target_string in extract:" I asked for a simple "print(extract)" and does report anything... Any idea of what is going on?</span>
<span class="comment-copy">Raymond did not intend to have <code>target_string</code> as argument to <code>finditer</code>, but rather expected your input string to be stored in the variable named <code>s</code>. I edited the code to read <code>inputstring</code> instead, to clarify this.  Also, there were a couple of superfluous spaces in the <code>opener</code> and <code>closer</code> patterns, which I removed.  Still, this code doesn't find any matches, but that is simply because the string you are looking for ("concluded that our disclosure controls were effective as of") doesn't appear in the input string you provided in the question.</span>
