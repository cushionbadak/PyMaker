<div class="post-text" itemprop="text">
<pre><code> class MyDict(dict):
        pass

 def nest_dict(dct):
     dct = MyDict(dct)
     for k, v in dct.items():
         if isinstance(v, dict):
             dct[k] = MyDict(v)
             nest_dict(v)
     return dct 

dct = {'a':{'b':{'c':'d'}}}
print(type(nest_dict(dct)['a']['b']))
</code></pre>
<p>Here's a piece of code I have now. What I want to do is covert each sub-dictionary in a nested dictionary to a child class of dict, which is MyDict. 
However, my recursion logic only change the first level of sub dictionary. How to modify this recursion function?</p>
</div>
<div class="post-text" itemprop="text">
<p>You're not updating your nested structures properly, try:</p>
<pre><code>def nest_dict(dct):
    dct = MyDict(dct)
    for k, v in dct.items():
        if isinstance(v, dict):
            dct[k] = nest_dict(v)
    return dct

dct = {'a': {'b': {'c': 'd'}}}
print(type(dct['a']['b']))  # &lt;class 'dict'&gt;
my_dct = nest_dict(dct)
print(type(my_dct['a']['b']))  # &lt;class '__main__.MyDict'&gt;
</code></pre>
<p>Although I'd advise you not to extend <code>dict</code> and use <a href="https://docs.python.org/2/library/collections.html#collections.MutableMapping" rel="nofollow noreferrer"><code>collections.MutableMapping</code></a> instead. On Python 3.x it's moved to <a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.MutableMapping" rel="nofollow noreferrer"><code>collections.abc.MutableMapping</code></a>.</p>
</div>
<div class="post-text" itemprop="text">
<p>You could use depth-first search to traverse the <code>dict</code>.</p>
<pre><code>class MyDict(dict):
    pass

dct = {'a':{'b':{'c':'d'}}}


def nest_dict(dct):
    dct = res = MyDict(dct)
    candidates = [(k, dct) for k in dct]
    while candidates:
        k, dct = candidates.pop()
        if isinstance(dct[k], dict):
            dct[k] = MyDict(dct[k])
            candidates.extend((k_, dct[k]) for k_ in dct[k])

    return res

dct2 = nest_dict(dct)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>define a function dict_to_defaultdict(), inside the function looping it through</p>
</div>
<span class="comment-copy">An obvious flaw is that you never invoke the <code>nest_dict()</code> function. Also, <code>pass</code> is misspelled. Also, <code>dct['a']['b']['c']</code> is the string <code>d</code>. It will never be affected by <code>nest_dict()</code>. Please create a short, complete program that actually runs and actually demonstrates your question. Copy-paste that program (never retype) into your question along with its actual and hoped-for output. See <a href="https://stackoverflow.com/help/mcve">Minimal, Complete, and Verifiable example</a> for more information.</span>
<span class="comment-copy">This works well for me. Thanks a lot. I will try to learn MutableMapping. Could you tell more detail about why my solution fail?</span>
