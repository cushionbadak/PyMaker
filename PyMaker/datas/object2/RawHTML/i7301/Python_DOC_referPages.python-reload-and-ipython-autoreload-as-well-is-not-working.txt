<div class="post-text" itemprop="text">
<p>I am using Python + IPython for Data Science. I made a folder that contains all the modules I wrote, organised in packages, something like</p>
<pre><code>python_workfolder
|
|---a
|   |---__init__.py
|   |---a1.py
|   |---a2.py
|
|---b
|   |---__init__.py
|   |---b1.py
|   |---b2.py
|
|---c
|   |---__init__.py
|   |---c1.py
|   |---c2.py
|
|
|---script1.py
|---script2.py
</code></pre>
<p>At the beginning of each session I ask IPython to autoreload modules:</p>
<pre><code>%load_ext autoreload
%autoreload 2
</code></pre>
<p>Now... let's say a1.py contains a class, <code>A1</code>, that I want to call from one of the scripts. In the <code>__init__.p</code> of package <code>a</code> I import the module</p>
<pre><code>import a1
</code></pre>
<p>Then in the script I import the class I need</p>
<pre><code>from a.a1 import A1
</code></pre>
<p>If there is some error in class A1 and I modify it, there is no way to have Python reload it without restarting the kernel.</p>
<p>I tried with <code>del a1</code>, <code>del sys.modules['a1']</code>, <code>del sys.modules['a']</code>. Each time it uses the old version of the class until I don't restart the kernel... anyone can give me some suggestions?</p>
</div>
<div class="post-text" itemprop="text">
<p>This is funny. It seems that my problem is not due to IPython but to Pyzo (the IDE I'm using). I added a TestClass to a1:</p>
<pre><code>class TestClass:
    def __init__(self):
        pass
    def disp(self):
        print('AAA')
</code></pre>
<p>This is the output I get from running the commands in an IPython shell:</p>
<pre><code>In [2]: from a.a1 import TestClass
In [3]: t=TestClass()
In [4]: t.disp()
AAA
</code></pre>
<p>Now I modify <code>disp</code> to print 'BBB'</p>
<pre><code>In [5]: t.disp()
BBB
</code></pre>
<p>So it was actually reloaded... also because if I skip running the autoreload commands at the beginning, it prints 'AAA' again. So it's working.</p>
<p>Instead if I run the commands through Pyzo (create a script, select the lines and press F9 or right click on the editor tab and select 'Run file')  it doesn't get reloaded!</p>
<pre><code>In [2]: (executing lines 1 to 3 of "testscript.py")
AAA
</code></pre>
<p>Again I modify <code>disp</code> to print 'BBB'</p>
<pre><code>In [3]: (executing lines 1 to 3 of "testscript.py")
AAA
</code></pre>
</div>
<span class="comment-copy">You may want to re-read the FineManual before stating that "reload doesn't work" ? The caveats and limitations are clearly explained: <a href="https://docs.python.org/3/library/imp.html#imp.reload" rel="nofollow noreferrer">docs.python.org/3/library/imp.html#imp.reload</a></span>
<span class="comment-copy">I found out that <code>reload</code> works if I type the commands in the IPython shell but it does not if I run them through Pyzo (the IDE I'm using). That was the problem...</span>
