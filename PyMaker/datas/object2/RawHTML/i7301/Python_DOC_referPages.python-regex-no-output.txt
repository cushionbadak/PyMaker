<div class="post-text" itemprop="text">
<p>I am trying to use regex to get the url from the text file. And I am taking XML in the form of .txt format 
My text file is locations.txt. This is the text file</p>
<pre><code>This XML file does not appear to have any style information associated with it. The document tree is shown below. 
&lt;sitemapindex xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"&gt;

&lt;sitemap&gt; 
&lt;loc&gt;https://www.apple.com/jp/shop/sitemap-index.xml&lt;/loc&gt;  &lt;/sitemap&gt;
 &lt;sitemap&gt;
 &lt;loc&gt;https://www.apple.com/ph/shop/sitemap-index.xml&lt;/loc&gt;
&lt;/sitemap&gt; 
&lt;sitemap&gt;
 &lt;loc&gt;https://www.apple.com/hk-zh/shop/sitemap-index.xml&lt;/loc&gt;
 &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/kr/shop/sitemap-      index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/nz/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/th/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/sg/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/au/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/my/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/tw/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/cn/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/hk/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/uk/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/be-nl/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/it/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/lu/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/hu/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/at/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/cz/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/fi/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/tr/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/de/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/es/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/ie/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/pl/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/se/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/ae/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/be-fr/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt; &lt;loc&gt;https://www.apple.com/dk/shop/sitemap-index.xml&lt;/loc&gt; &lt;/sitemap&gt; &lt;sitemap&gt;
</code></pre>
<p>The script I am using :</p>
<pre><code>import re
re.findall('&lt;(loc)&gt;(https?://)([^\s]+)(&lt;/\1&gt;)', open('locations.txt', 'r').read())
</code></pre>
<p>But there is no output.</p>
</div>
<div class="post-text" itemprop="text">
<ol>
<li><p>Do not use regular expressions to parse XML files (or any hierarchical/nested structures)</p></li>
<li><p><a href="https://stackoverflow.com/a/1732454/7553525"><strong>DO NOT USE REGULAR EXPRESSIONS TO PARSE XML FILES</strong></a></p></li>
<li><p>If you insist to pick up content between the nearest <code>&lt;loc&gt;</code> and <code>&lt;/loc&gt;</code>tags with regex:</p></li>
</ol>
<p>.</p>
<pre><code>import re

with open("locations.txt", 'r') as f:
    locations = re.findall(r"&lt;loc&gt;(https?\S+)&lt;/loc&gt;", f.read())
    # ['https://www.apple.com/jp/shop/sitemap-index.xml',
    #  'https://www.apple.com/ph/shop/sitemap-index.xml',
    #  'https://www.apple.com/hk-zh/shop/sitemap-index.xml', ...]
</code></pre>
<p>Yours fails mostly because you're not escaping your backslashes, but even if you did you'd be getting three more groups instead of just the URL.</p>
</div>
<span class="comment-copy"><b>1.</b> "I am trying to use regex to get the url from the text file" should be fixed to "I am trying to use regex to get the url from XML file", and <b>2.</b> Don't use regex to parse XML files. Use proper XML parsers.</span>
<span class="comment-copy">@DeepSpace  what if it is in the text format and not in xml format ?</span>
<span class="comment-copy">@emon what do you mean? What is the difference between those except the file extension? Take a look if the <a href="https://docs.python.org/3/library/xml.etree.elementtree.html" rel="nofollow noreferrer"><code>ElementTree</code></a> module can help you.</span>
<span class="comment-copy">@Bit Okay ! that's cool . But what if i want to use regex. Can anything be done here?</span>
