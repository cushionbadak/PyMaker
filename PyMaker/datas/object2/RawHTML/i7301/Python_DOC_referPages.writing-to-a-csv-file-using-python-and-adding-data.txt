<div class="post-text" itemprop="text">
<p>I have a python script that tell me what 'period' it is (for school) which then outputs into a csv file:</p>
<pre><code>import datetime
import csv

format = "%H%M"
today = datetime.datetime.today()
s = today.strftime(format)
period = 0

ofile = open('Period.csv', "wb")
writer = csv.writer(ofile, delimiter=',')

if s &gt; "0845" &lt; "0945":
 period = 1
if s &gt;= "0945" &lt; "1120":
 period = 2
if s &gt;= "1120" &lt; "1220":
 period = 3
if s &gt;= "1220" &lt; "1335":
 period = 4 
if s &gt;= "1335" &lt; "1430":
 period = 5

print
print s
print period

writer.writerow([period])
ofile.close() 
</code></pre>
<p>I have another python script that grabs a student's name once they swipe their student card through a magnetic card reader and then outputs that into a CSV file.</p>
<p>What I want to happen is when they swipe their card their name gets imported into the CSV then the period gets imported next to it (ex. <code>john,4</code>). Then the next student will swipe their card and their name and period will be placed under the last students </p>
<pre><code> John,4
 Marcus,4
</code></pre>
<p>But every time a card it swiped the csv file gets erased and then the current students name is the only one left in there.</p>
<pre><code> import csv
 import datetime

 ## EQ ID

 eqid = "john" ## Output from magnetic card reader


 ## CSV writer

 ofile = open('attendance.csv', "wb")
 writer = csv.writer(ofile, delimiter=',')
 writer.writerow([eqid])
 ofile.close() 
</code></pre>
<p>This is just a temp mock up the final code will have both codes in it.</p>
<p>TL;DR - how do I have python add data to a CSV file instead of just rewriting the whole file?</p>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<p>But every time a card it swiped the csv file gets erased and then the current students name is the only one left in there.</p>
</blockquote>
<p>This is because you are writing (<code>"wb"</code>) the file every time the card is swiped, which means a new file is created (an existing file with the same name will be erased). So You should use <code>"ab"</code> mode which is appending values in existing file.
So the line </p>
<pre><code>ofile = open('attendance.csv', "wb")
</code></pre>
<p>should be changed to </p>
<pre><code>ofile = open('attendance.csv', "ab")
</code></pre>
<p>Now everytime card is swiped the values will be appended.</p>
<p>you can check File Operations at <a href="http://Python%20official%20Docs" rel="nofollow noreferrer">https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files</a></p>
</div>
<span class="comment-copy">Similar question here: <a href="https://stackoverflow.com/questions/4706499/how-do-you-append-to-a-file" title="how do you append to a file">stackoverflow.com/questions/4706499/how-do-you-append-to-a-file</a></span>
<span class="comment-copy">open the csv in <code>a+</code> mode</span>
<span class="comment-copy"><i>Aside</i>: <code>if s &gt; "0845" &lt; "0945":</code> doesn't do what you think it does. Perhaps you meant <code>if "0845" &lt; s &lt; "0945":</code>.</span>
<span class="comment-copy">@Robáµ© It seems to work when I have been testing it. what is the difference between having 's' at the start or 's' in the middle??</span>
<span class="comment-copy">Did you read the docs for <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer">open</a>?  You should open fit appending.</span>
