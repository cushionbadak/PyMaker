<div class="post-text" itemprop="text">
<p>So I am working on a project, my code is:</p>
<pre><code>    def show_product():
        choose_a_product = input("OK. Please specify the product's 
    identifier: ")
        product = [p for p in products if p["id"] == choose_a_product][0]
        if product:
            print("SHOWING A PRODUCT HERE!")
            print(dict(product))
        else:
            print("COULDN'T FIND A PRODUCT WITH IDENTIFIER", dict(product))
</code></pre>
<p>The number of products are around 20. When I input 500000, it can't be run and the mistake is:</p>
<blockquote>
<pre><code>  File "xx.py", line 35, in show_product
      product = [p for p in products if p["id"] == product_id][0]
  IndexError: list index out of range
</code></pre>
</blockquote>
<p>I think the "else" should work, while it doesn't...</p>
<p>Thanks for any help!</p>
</div>
<div class="post-text" itemprop="text">
<p>The problem is that there is no product with the input id, so the list length is zero and there is no element that you can get at index 0. Break the code in two lines: </p>
<pre><code>selected_products = [p for p in products if p["id"] == choose_a_product]
if len(selected_products)&gt;0:
    product = selected_products[0]
    print("SHOWING A PRODUCT HERE!")
    print(dict(product))
else:
    print("COULDN'T FIND A PRODUCT WITH IDENTIFIER", dict(product))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If <code>[p for p in products if p["id"] == choose_a_product]</code> returns an empty list object, i.e. there is no match, trying to access the empty list with <code>[0]</code> will result in an IndexError.</p>
<p>It can be re-written as:</p>
<pre><code>def show_product(products):
    choose_a_product = input("OK. Please specify the product's identifier: ")
    product = {k: v for k, v in products.items() if v['id'] == choose_a_product}

    if not product:
        print("COULDN'T FIND A PRODUCT WITH IDENTIFIER", choose_a_product)
    else:
        print("SHOWING A PRODUCT HERE!")
        print(product)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Your error doesn't match your code.</p>
<p>Also the error occurs with trying to get the first object in an empty list</p>
<pre><code>product = [p for p in products if p["id"] == product_id]**[0]**
</code></pre>
<p>If <code>product</code> is an empty list, it will crash, and <code>else</code> will not prevent it from crashing.</p>
<p>To prevent it from crashing you can try either a <a href="https://docs.python.org/3/tutorial/errors.html" rel="nofollow noreferrer">Try-Except statement</a> or checking the length of the list before attempting to get any members from it via the <code>len()</code> command.</p>
</div>
<span class="comment-copy">It can never get the <code>[0]</code>th element because nothing is returned. You are correct in your thinking with the loop, but it never gets that far</span>
<span class="comment-copy">Thank you very much and it works!</span>
<span class="comment-copy">But another question, for the "else:" syntax, I wrote dict(product) and you accepted it. Now I realized that I can only print the input of choose_a_product because there is no product. May I ask why you accept it? Because it makes sense or you didn't notice it? Thank you!</span>
<span class="comment-copy">Sorry, I didn't looked at the dict(product) part. It doesn't matter here, product is already a dictionary, so print(product) will print the dictionary. dict(product) will return a dictionary created using product that is already a dictionary, so product or dict(product) should give you the same output.</span>
<span class="comment-copy">Thank you very much! But another question, for the "else:" syntax, I wrote dict(product) and you accepted it and modified it to dict(product[0]. Now I realized that I can only print the input of choose_a_product because there is no product. May I ask why you accept it? Because it makes sense or you didn't notice it? I tried your version and it doesn't work... Thank you!</span>
<span class="comment-copy">@lilyyyyyyyyy see my update - you can actually use a dictionary comprehension to get the result I think you want.</span>
<span class="comment-copy">The error does match the provided code, and they are not trying to get the first letter of a string, they are trying to get the first object (and only I believe) of a list.</span>
<span class="comment-copy">I can't follow your step based on my shallow knowledge, but thank you very much for your help! Hope I can know what it is in the near further:). And that's true, I am trying to get the first object of the list! @flevinkelming</span>
<span class="comment-copy">@flevinkelming I realized that after i posted the answer(misread the number of brackets at the end) and thought i had changed all instances in the answer from string to list. Guess i missed some.</span>
