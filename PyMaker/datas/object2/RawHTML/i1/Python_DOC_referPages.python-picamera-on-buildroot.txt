<div class="post-text" itemprop="text">
<p><code>from picamera import PiCamera</code> gives the following errors in python3.7 on buildroot-generated linux image.  Appreciate advice on how to fix.  Thanks!</p>
<pre><code>/usr/bin/python3.7: symbol 'mmal_port_pool_create': can't resolve symbol
/usr/bin/python3.7: symbol 'mmal_list_push_front': can't resolve symbol
/usr/bin/python3.7: symbol 'mmal_list_destroy': can't resolve symbol
/usr/bin/python3.7: symbol 'mmal_rational_to_fixed_16_16': can't resolve symbol
/usr/bin/python3.7: symbol 'mmal_status_to_string': can't resolve symbol
/usr/bin/python3.7: symbol 'mmal_list_push_back': can't resolve symbol
/usr/bin/python3.7: symbol 'mmal_list_create': can't resolve symbol
/usr/bin/python3.7: symbol 'mmal_list_insert': can't resolve symbol
/usr/bin/python3.7: symbol 'mmal_rational_equal': can't resolve symbol
/usr/bin/python3.7: symbol 'mmal_list_pop_front': can't resolve symbol
/usr/bin/python3.7: symbol 'mmal_port_type_to_string': can't resolve symbol
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/usr/lib/python3.7/site-packages/picamera/__init__.py", line 72, in &lt;module&gt;
    from picamera.exc import (
  File "/usr/lib/python3.7/site-packages/picamera/exc.py", line 41, in &lt;module&gt;
    import picamera.mmal as mmal
  File "/usr/lib/python3.7/site-packages/picamera/mmal.py", line 49, in &lt;module&gt;
    _lib = ct.CDLL('libmmal.so')
  File "/usr/lib/python3.7/ctypes/__init__.py", line 356, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: dlopen() error
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You need to select the <code>rpi-userland</code> package.</p>
<p>I'm assuming you work on a Raspberry Pi, otherwise picamera is not for you to begin with.</p>
<p>picamera tries to open the libmmal.so shared library. The <code>rpi-userland</code> Buildroot package will download, build and install this library.</p>
<p>If you made a Buildroot package for <code>python-picamera</code>, you should add <code>select BR2_PACKAGE_RPI_USERLAND</code> to its <code>Config.in</code> file, and also copy the dependencies of the rpi-userland package. In the <code>python-picamera.mk</code> file, you should add <code>PYTHON_PICAMERA_DEPENDENCIES += rpi-userland</code>. This will make sure that the package is always selected and built when you enable picamera.</p>
<p>Also, if you have a working <code>python-picamera</code> package, please consider sending it upstream following the <a href="https://buildroot.org/downloads/manual/manual.html#submitting-patches" rel="nofollow noreferrer">contribution guidelines</a>.</p>
<p>If you did not make a Buildroot package for <code>python-picamera</code>, that might be the source of the problem. The picamera package from PyPI is linked with a specific version of libmmal, which may be a different version than the one in Buildroot. This might lead to the errors you see when importing the module.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>sudo apt-get update
sudo apt-get upgrade

sudo raspi-config
</code></pre>
<h1>Enable camera and reboot</h1>
</div>
<span class="comment-copy">Hello and welcome to Stack Overflow, you are expected to show your attempt first, please go through <a href="https://stackoverflow.com/help/how-to-ask">How to ask</a> and <a href="https://stackoverflow.com/help/mcve">How to create a minimum complete verifiable example</a></span>
<span class="comment-copy">Sorry if I didn't put it in a code block originally but its just one line of python that causes the above errors:  <code>from picamera import PiCamera</code></span>
<span class="comment-copy">Thanks for the tips.  I had already selected rpi-userland in buildroot and  libmmal.so is in /usr/lib but I stil got the above errors.  As far as python-picamera package I did not include it in buildroot (I would like to but I am a complete novice with buildroot and makefiles in general so I am doing everything using the menuconfig).  Instead I just installed picamera with pip on the pi itself running the  linux image I'd made with buildroot. If you'd be willing to walk me through how to include the picamera package in buildroot, I'd appreciate it.</span>
<span class="comment-copy">Those symbols do exist in libmmal.so AFAICS (to check on your side, you can do <code>readelf -s output/target/usr/lib/libmmal.so</code> and verify that all those symbols are there). Maybe there's a binary incompatibility between the package from PyPI and your Buildroot build.</span>
<span class="comment-copy">Thanks for the further suggestion.  When I run <code>readelf -s output/target/usr/lib/libmmal.so</code> on the Ubuntu VM hosting buildroot I see three of those symbols listed: mmal_port_pool_create, mmal_status_to_string and mmal_port_type_to_string but the rest are missing.  Does that give any clue?</span>
<span class="comment-copy">I realize now: if you download the binary from pypi instead of building yourself, it's possible that that binary was linked with a different version of the library that is using different symbols. I think you <i>have</i> to build it yourself, i.e. add it as a Buildroot package. It could be sufficient to run <code>utils/scanpypi picamera</code> and update <code>package/Config.in</code>.</span>
<span class="comment-copy">Thanks, those steps seemed to work for adding as a buildroot package but now the make fails when it gets to the install part:</span>
<span class="comment-copy">thanks, but I am not using raspbian, so that won't work.</span>
<span class="comment-copy">@NJS if you want any help you must provide more specific information</span>
