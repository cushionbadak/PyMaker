<div class="post-text" itemprop="text">
<p>Can someone help explain why this is happening? If I scrape HTML from a site using the requests module and use hashlib to get the md5 checksum I get one answer. Then if I save the html as an html file, open it, and do the same md5 checksum it gives me a different checksum. </p>
<pre><code>import requests
import hashlib

resp = requests.post("http://casesearch.courts.state.md.us/", timeout=120)
html = resp.text
print("CheckSum 1: " + hashlib.md5(html.encode('utf-8')).hexdigest())

f = open("test.html", "w+")
f.write(html)
f.close()

with open('test.html', "r", encoding='utf-8') as f:
    html2 = f.read()
print("CheckSum 2: " + hashlib.md5(html2.encode('utf-8')).hexdigest())
</code></pre>
<p>The results look like:</p>
<pre class="lang-none prettyprint-override"><code>CheckSum 1: e0b253903327c7f68a752c6922d8b47a
CheckSum 2: 3aaf94e0df9f1298d61830d99549ddb0
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>When reading from a file in <em>text mode</em>, Python may convert newline characters depending on the value of the <a href="https://docs.python.org/3/library/io.html#io.TextIOWrapper" rel="nofollow noreferrer">newlines</a> argument provided to <code>open</code>.  </p>
<blockquote>
<p>When reading input from the stream, if newline is None, universal newlines mode is enabled. Lines in the input can end in '\n', '\r', or '\r\n', and these are translated into '\n' before being returned to the caller. If it is '', universal newlines mode is enabled, but line endings are returned to the caller untranslated.</p>
</blockquote>
<p>This difference will affect the generated hash value.</p>
</div>
<span class="comment-copy">The content must be different. Are the lengths the same? What happens if you compare html and html2?</span>
<span class="comment-copy">Try: <code>print(type(html), len(html), type(html2), len(html2))</code>.</span>
<span class="comment-copy">You may want to add <code>, encoding='utf-8'</code> to the 1st <code>open(...)</code> call as well.</span>
<span class="comment-copy">newlines conversion?</span>
<span class="comment-copy">Use <code>rb</code> instead of <code>r</code> and <code>wb</code> instead of <code>w</code> in open to avoid newline conversion.</span>
