<div class="post-text" itemprop="text">
<p>Hi am trying to create an online house shopping site but when i to add the items(houses) to the cart i get the following error</p>
<pre><code>    Internal Server Error: /cart/
Traceback (most recent call last):
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\core\handlers\exception.py", line 34, in inner
    response = get_response(request)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\core\handlers\base.py", line 126, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\core\handlers\base.py", line 124, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\user\myprojects\byarent\buyandrent\cart\views.py", line 31, in cart_detail
    return render(request, 'cart/detail.html', {'cart': cart})
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\shortcuts.py", line 36, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\backends\django.py", line 61, in render
    return self.template.render(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\base.py", line 937, in render
    bit = node.render_annotated(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\base.py", line 904, in render_annotated
    return self.render(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\loader_tags.py", line 150, in render
    return compiled_parent._render(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\base.py", line 937, in render
    bit = node.render_annotated(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\base.py", line 904, in render_annotated
    return self.render(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\loader_tags.py", line 62, in render
    result = block.nodelist.render(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\base.py", line 937, in render
    bit = node.render_annotated(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\base.py", line 904, in render_annotated
    return self.render(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\defaulttags.py", line 209, in render
    nodelist.append(node.render_annotated(context))
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\base.py", line 904, in render_annotated
    return self.render(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\defaulttags.py", line 512, in render
    return self.nodelist.render(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\base.py", line 937, in render
    bit = node.render_annotated(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\base.py", line 904, in render_annotated
    return self.render(context)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\template\defaulttags.py", line 442, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\urls\base.py", line 90, in reverse
    return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
  File "C:\Users\user\myprojects\byarent\env\lib\site-packages\django\urls\resolvers.py", line 622, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'cart_add' with arguments '('',)' not found. 1 pattern(s) tried: ['cart/add/(?P&lt;house_id&gt;[0-9]+)/$']
</code></pre>
<p>I have a shop and cart app here are the relevant views
/cart/view.py</p>
<pre><code>@require_POST
def cart_add(request, house_id):
    cart = Cart(request)
    house = get_object_or_404(House, id=house_id)
    form = CartAddHouseForm(request.POST)
    if form.is_valid():
        cd = form.cleaned_data
        cart.add(house=house,
                 quantity=cd['quantity'],
                 update_quantity=cd['update'])
    return redirect('cart:cart_detail')

def cart_remove(request, house_id):
    cart = Cart(request)
    house = get_object_or_404(House, id=house_id)
    cart.remove(house)
    return redirect('cart:cart_detail')

def cart_detail(request):
    cart = Cart(request)
    for item in cart:
        item['update_quantity_form'] = CartAddHouseForm(
                          initial={'quantity': item['quantity'],
                          'update': True})
    return render(request, 'cart/detail.html', {'cart': cart})
</code></pre>
<p>/shop/views.py</p>
<pre><code>def house_list(request, category_slug=None):
    category = None
    categories = Category.objects.all()
    houses = House.objects.filter(available=True)
    if category_slug:
        category = get_object_or_404(Category, slug=category_slug)
        houses = houses.filter(category=category)
    return render(request,
                  'shop/house/list.html',
                  {'category': category,
                   'categories': categories,
                   'houses': houses})

def house_detail(request, id, slug):
    house = get_object_or_404(House,
                            id=id,
                            slug=slug,
                            available=True)
    cart_house_form = CartAddHouseForm()
    return render(request,
                'shop/house/detail.html',
                {'house': house,
                'cart_house_form':cart_house_form})
</code></pre>
<p>Here is the urls.py for the cart app</p>
<pre><code>urlpatterns = [
    path('', views.cart_detail, name='cart_detail'),
    path('add/&lt;int:house_id&gt;/',
         views.cart_add,
         name='cart_add'),
    path('remove/&lt;int:house_id&gt;/',
         views.cart_remove,
         name='cart_remove'),
]
</code></pre>
<p>The urls.py for my project</p>
<pre><code>urlpatterns = [
    path('admin/', admin.site.urls),
    path('cart/', include('cart.urls', namespace='cart')),
    # path('orders/', include('orders.urls', namespace='orders')),
    path('', include('shop.urls', namespace='shop')),
]
</code></pre>
<p>The template where the error is being raised
/templates/shop/base.html</p>
<pre><code>{% load static %}
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8" /&gt;
  &lt;title&gt;{% block title %}My shop{% endblock %}&lt;/title&gt;
  &lt;link href="{% static "css/base.css" %}" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="header"&gt;
    &lt;a href="/" class="logo"&gt;My shop&lt;/a&gt;
  &lt;/div&gt;
  &lt;div id="subheader"&gt;
    &lt;div class="cart"&gt;
      {% with total_items=cart|length %}
          {% if cart|length &gt; 0 %}
            Your cart: 
            &lt;a href="{% url "cart:cart_detail" %}"&gt;
              {{ total_items }} item{{ total_items|pluralize }},
              ${{ cart.get_total_price }}
            &lt;/a&gt;
          {% else %}
            Your cart is empty.
          {% endif %}
        {% endwith %}
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div id="content"&gt;
    {% block content %}
    {% endblock %}
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>/templates/cart/detail.html</p>
<pre><code>{% extends "shop/base.html" %}
{% load static %}

{% block title %}
  Your shopping cart
{% endblock %}

{% block content %}
  &lt;h1&gt;Your shopping cart&lt;/h1&gt;
  &lt;table class="cart"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th&gt;Image&lt;/th&gt;
        &lt;th&gt;House&lt;/th&gt;
        &lt;th&gt;Quantity&lt;/th&gt;
        &lt;th&gt;Remove&lt;/th&gt;
        &lt;th&gt;Unit price&lt;/th&gt;                
        &lt;th&gt;Price&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      {% for item in cart %}
        {% with house=item.house %}
          &lt;tr&gt;
            &lt;td&gt;
              &lt;a href="{{ house.get_absolute_url }}"&gt;
                &lt;img src="{% if house.image %}{{ house.image.url }}{% else %}{% static "img/no_image.png" %}{% endif %}"&gt;                    
              &lt;/a&gt;
            &lt;/td&gt;
            &lt;td&gt;{{ house.name }}&lt;/td&gt;
            &lt;td&gt;
                &lt;form action="{% url "cart:cart_add" house.id %}" method="post"&gt;
                    {{ item.update_quantity_form.quantity }}
                    {{ item.update_quantity_form.update }}
                    &lt;input type="submit" value="Update"&gt;
                    {% csrf_token %}
                &lt;/form&gt;
            &lt;/td&gt;
            &lt;td&gt;&lt;a href="{% url "cart:cart_remove" house.id %}"&gt;Remove&lt;/a&gt;&lt;/td&gt;
            &lt;td class="num"&gt;${{ item.price }}&lt;/td&gt;
            &lt;td class="num"&gt;${{ item.total_price }}&lt;/td&gt;
          &lt;/tr&gt;
        {% endwith %}
      {% endfor %}
      &lt;tr class="total"&gt;
        &lt;td&gt;Total&lt;/td&gt;
        &lt;td colspan="4"&gt;&lt;/td&gt;
        &lt;td class="num"&gt;${{ cart.get_total_price }}&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
  &lt;p class="text-right"&gt;
    &lt;a href="{% url "shop:house_list" %}" class="button light"&gt;Continue shopping&lt;/a&gt;
    &lt;a href="#" class="button"&gt;Checkout&lt;/a&gt;
  &lt;/p&gt;
{% endblock %}
</code></pre>
<p>Am still getting a hang of Django any help would be appreciated</p>
</div>
<div class="post-text" itemprop="text">
<p>Try to change your url to this:</p>
<pre><code>re_path(add/(?P&lt;house_id&gt;[0-9]+)/$',view.cart_add)
</code></pre>
</div>
<span class="comment-copy">Please show <code>cart/detail.html</code>.</span>
<span class="comment-copy">@EndreBoth I have included it</span>
<span class="comment-copy">From the error message it seems that you are passing an empty argument to <code>cart_add</code>. In places where you use <code>cart_add</code> in <code>detail.html</code>, comment it out and instead just display the argument you would pass to it (<code>house.id</code>). If no id is displayed, you need to find out why.</span>
