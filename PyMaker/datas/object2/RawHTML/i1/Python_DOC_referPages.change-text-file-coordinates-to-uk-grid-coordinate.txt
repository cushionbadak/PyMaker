<div class="post-text" itemprop="text">
<p>I have a text file with lat/long which I would like to convert it to UK map grid base coordinates.</p>
<p>in the text file each line is like this: </p>
<p>51.505046,-0.12687</p>
<p>51.505046,-0.12687</p>
<p>51.508369,-0.120969</p>
<p>51.508369,-0.120969</p>
<p>51.508369,-0.120969</p>
<p>51.508646,-0.195893</p>
<p>51.508646,-0.195893</p>
<p>51.507841,-0.127332</p>
<p>51.507841,-0.127332</p>
<p>and I would like to change these values to:</p>
<p>530100,180120</p>
<p>530100,180120</p>
<p>530500,180500</p>
<p>530500,180500</p>
<p>530500,180500</p>
<p>525300,180400</p>
<p>525300,180400</p>
<p>530060,180430</p>
<p>530060,180430</p>
<p>I have written the following code, but get an error which cannot convert the coordinates. Do you have any idea?</p>
<blockquote>
<blockquote>
<blockquote>
<p>from OSGridConverter import latlong2grid</p>
<p>filepath = 'C:/Users/Desktop/coo1.txt'</p>
<p>file= open(filepath)</p>
<p>for line in file:</p>
<p>...fields=line.split(",")</p>
<p>...field1=fields[0]</p>
<p>...field2=fields[1]</p>
<p>...g=latlong2grid (field1, field2)</p>
<p>...print(g.E, g.N)</p>
</blockquote>
</blockquote>
</blockquote>
<p>Err: OSGridConverter.base.OSGridError: OSGridConverter error: Cannot parse argument 51.505046</p>
<p>I could convert each line separately by:</p>
<blockquote>
<blockquote>
<blockquote>
<p>g=latlong2grid(52.657977,1.716038)</p>
<p>(g.E,g.N)</p>
</blockquote>
</blockquote>
</blockquote>
<p>but not for a whole text.</p>
</div>
<div class="post-text" itemprop="text">
<p>I think the issue is that you are passing a string to your function, convert it to float:</p>
<pre><code>g=latlong2grid (float(field1), float(field2))
</code></pre>
</div>
