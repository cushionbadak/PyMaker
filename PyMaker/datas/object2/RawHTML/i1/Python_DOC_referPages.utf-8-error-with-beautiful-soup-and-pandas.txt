<div class="post-text" itemprop="text">
<p>Below is a Python beautiful soup scraper that was once successful in scraping team rosters off of MLB.com. Now when I try to run the code, I get the following error.</p>
<pre><code>UnicodeDecodeError: 'utf-8' codec can't decode byte 0x97 in position 0: invalid start byte
</code></pre>
<p>After reading multiple Stackoverflow threads, I think I have to alter the "with open" line, but I am confused on how to alter my current code format without having to sacrifice the CSV writer and df to MYSQL format. Does anyone know how to adjust the code to fix this utf-8 issue? Thanks in advance!</p>
<pre><code>import requests
import csv
import pandas as pd
from bs4 import BeautifulSoup
from sqlalchemy import create_engine

team_list={'orioles','yankees','redsox','rays','indians','twins','tigers','whitesox','royals','astros','mariners','athletics',
           'angels','rangers','phillies','braves','nationals','marlins','mets','cubs','brewers','cardinals','pirates','reds',
           'dodgers','dbacks','rockies','giants','padres','bluejays'}

header_added = False

for team in team_list:
    page = requests.get('http://m.{}.mlb.com/roster/'.format(team))
    soup = BeautifulSoup(page.text, 'html.parser')

    soup.find(class_='nav-tabset-container').decompose()
    soup.find(class_='column secondary span-5 right').decompose()

    roster = soup.find(class_='page page-index')
    names = [n.contents[0] for n in roster.find_all('a')]
    ids = [n['href'].split('/')[2] for n in roster.find_all('a')]
    number = [n.contents[0] for n in roster.find_all('td', index='0')]
    handedness = [n.contents[0] for n in roster.find_all('td', index='3')]
    height = [n.contents[0] for n in roster.find_all('td', index='4')]
    weight = [n.contents[0] for n in roster.find_all('td', index='5')]
    DOB = [n.contents[0] for n in roster.find_all('td', index='6')]
    team = [soup.find('meta',property='og:site_name')['content']] * len(names)

    with open('MLB_Active_Roster.csv', 'a', newline='') as fp:
        f = csv.writer(fp)
        if not header_added:
            f.writerow(['Name', 'ID', 'Number', 'Hand', 'Height', 'Weight', 'DOB', 'Team'])
            header_added=True
        f.writerows(zip(names, ids, number, handedness, height, weight, DOB, team))

    df = pd.read_csv('MLB_Active_Roster.csv')

    engine = create_engine("mysql+pymysql://{user}:{pw}@localhost/{db}"
                           .format(user="user",
                                   pw="password",
                                   db="mlb"))
    conn = engine.connect()
    df.to_sql(con=engine, name='mlbactiveroster', if_exists='replace')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Change this line </p>
<pre><code>df = pd.read_csv('MLB_Active_Roster.csv')
</code></pre>
<p>to </p>
<pre><code>df = pd.read_csv('MLB_Active_Roster.csv', encoding='ISO-8859-1')
</code></pre>
<p>in order to deal with files in different formats.</p>
</div>
<span class="comment-copy">For which line in your code is this error reported?</span>
<span class="comment-copy">The error actually triggered in line 37 which is the <code>df = pd.read_csv('MLB_Active_Roster.csv')</code> line</span>
