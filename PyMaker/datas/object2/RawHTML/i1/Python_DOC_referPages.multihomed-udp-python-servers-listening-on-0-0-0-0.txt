<div class="post-text" itemprop="text">
<p>Since there is no support of <a href="https://bugs.python.org/issue31203" rel="nofollow noreferrer">IP_PKTINFO</a> in python(for IPv4), are there no multihomed UDP python servers out there in production?</p>
<p>If there are ( and I expect there shall be), how do they handle the problem of sending the response UDP packets to the interface from which they received the request!</p>
<hr/>
<p><strong>EDIT</strong> for clarification</p>
<p>Lets say I have a UDP server with multiple interfaces (consider 2 here), each with IP 172.217.163.68 and 172.217.163.69 respectively. The server has socket bind call on 0.0.0.0. Now if a request packet comes on 172.217.163.68, the server processes it, forms a response packet, and then sends on what interface? There is no way it knows about the interface from which request packet arrived, so it can't fill the sending interface IP. This is because there is no support for IP_PKTINFO in python.</p>
<p>Also it should be noted that we can't make use of the default route here. If default route gets used, then from the perspective of the client, it sent request to 172.217.163.68 but is getting response from 172.217.163.69, which is obviously wrong.</p>
</div>
<div class="post-text" itemprop="text">
<p>UDP servers use <a href="https://linux.die.net/man/2/recvfrom" rel="nofollow noreferrer">recvfrom</a> and <a href="https://linux.die.net/man/2/sendto" rel="nofollow noreferrer">sendto</a> to get the source IP address and to send back the response:</p>
<p>Receive:<code>message, address = socket.recvfrom(1024)</code></p>
<p>Send: <code>socket.sendto(message, address)</code> </p>
<p>You can see an example UDP server in python in <a href="https://stackoverflow.com/questions/27893804/udp-client-server-socket-in-python">this question</a></p>
</div>
<span class="comment-copy"><code>sendto</code> and <code>recvfrom</code> are used w.r.t. to the client. On the server side, I am more of interested in something like 'sendfrom' so that I have a control on from which interface should I send a packet. Edited the question for clarification.</span>
