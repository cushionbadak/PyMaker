<div class="post-text" itemprop="text">
<p>I am setting a fact in Ansible and that variable has a value with hyphens, like this "<strong>dos-e1-south-209334567829102380</strong>". i want to split , so i  only get <strong>"dos-e1-south"</strong></p>
<p>Here is the play</p>
<pre><code>- set_fact:
    config: "{{ asg.results|json_query('[*].launch_configuration_name') }}"

- debug:
    var: config
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>another option is ansibles regular expression filter, you find here: <a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_filters.html#regular-expression-filters" rel="nofollow noreferrer">https://docs.ansible.com/ansible/latest/user_guide/playbooks_filters.html#regular-expression-filters</a></p>
<pre><code>vars:
  var: dos-e1-south-209334567829102380
tasks:
  - debug:
      msg: '{{ var | regex_replace("^(.*)-[^-]+$", "\\1") }}'
</code></pre>
<p>has the same result:</p>
<pre><code>"msg": "dos-e1-south"
</code></pre>
<h3>Explanation for the regex:</h3>
<pre><code>^(.*)
</code></pre>
<p>keep everything from the start of the string in the first backreference</p>
<pre><code>-[^-]+$
</code></pre>
<p>find the last "-" followed by non-"-" characters till the end of string.</p>
<pre><code>\\1
</code></pre>
<p>replaces the string with the first backreference.</p>
</div>
<div class="post-text" itemprop="text">
<p>An option would be to use <em>split()</em>. The play below</p>
<pre><code>vars:
  var1: dos-e1-south-209334567829102380
tasks:
  - set_fact:
      var2: "{{ var1.split('-') }}"
  - debug:
      msg: "{{ var2.0 }}-{{ var2.1 }}-{{ var2.2 }}"
</code></pre>
<p>gives</p>
<pre><code>"msg": "dos-e1-south"
</code></pre>
</div>
<span class="comment-copy">not sure how to use it exactly. throwing errors. i am using jinja filter.</span>
<span class="comment-copy">Thank you so much for the detailed explanation.</span>
<span class="comment-copy">Excellent , works like a charm . :)</span>
