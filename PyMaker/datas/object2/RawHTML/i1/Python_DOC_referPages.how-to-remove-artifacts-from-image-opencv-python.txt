<div class="post-text" itemprop="text">
<p>I have the following image (see below) which I am trying to preprocess in order to remove all form text and keep handwritten inputs.  I'm doing all preprocessing in python using PIL and OpenCV.  Which filters can I use to remove the noise from my image?</p>
<p><img alt="image" src="https://i.stack.imgur.com/lbMyI.png"/></p>
</div>
<div class="post-text" itemprop="text">
<p>Assuming the images are BGR or grayscale (not binary) and that the color of the pen used to fill the document is atleast slightly different then the printed text.
Probably the only way to do this is to cluster the colors of the image in to two clusters, 
one cluster will be the color of the pen and the second will be the color of the text,
For clustering you can use <a href="https://www.google.com/url?sa=t&amp;source=web&amp;rct=j&amp;url=https://docs.opencv.org/3.4.1/de/d63/kmeans_8cpp-example.html&amp;ved=2ahUKEwiQ6tzT0YXhAhWCbVAKHaDtAUIQFjAAegQIAxAB&amp;usg=AOvVaw2g0vU304wWo9aMIl-mU2ZJ&amp;cshid=1552704141941" rel="nofollow noreferrer">Kmeans</a>
Algorithm with k=2.</p>
</div>
<div class="post-text" itemprop="text">
<p>Using ImageMagick, one can do the following. You can probably get similar functionality from Python Wand, which is based upon ImageMagick.</p>
<p>Input:
<a href="https://i.stack.imgur.com/r4L9O.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/r4L9O.png"/></a></p>
<p>Make a copy of the image. Then invert it (negate) and blur it. Then threshold it. Then put that into the alpha channel of the input. Then flatten it over a white background.</p>
<pre><code>convert image.png -alpha off \
\( -clone 0 -negate -blur 0x2 -threshold 50% \) \
-alpha off -compose copy_opacity -composite \
-background white -compose over -flatten \
result.png
</code></pre>
<p><br/>
<a href="https://i.stack.imgur.com/PA9Ac.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/PA9Ac.png"/></a></p>
</div>
