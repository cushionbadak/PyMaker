<div class="post-text" itemprop="text">
<p>I'm beginning with data science and pandas, I'm trying to populate a pandas dataframe with XML infos here is my code :</p>
<pre><code>import xml.etree.cElementTree as et
import pandas as pd
import sys

def getvalueofnode(node):
    """ return node text or None """
    return node.text if node is not None else None


def main():
    parsed_xml = et.parse("test2.xml")
    dfcols = ['Country','Club', 'Founded']
    df_xml = pd.DataFrame(columns=dfcols)

    for node in parsed_xml.getroot():
        Country = node.attrib.get('country')
        Club = node.find('Name')
        Founded = node.find('Founded')

        df_xml = df_xml.append(
            pd.Series([Country, getvalueofnode(Club),getvalueofnode(Founded)], index=dfcols),
            ignore_index=True)

    print(df_xml)

main()
</code></pre>
<p>Here is my output : </p>
<blockquote>
<p>Country  Club Founded</p>
<p>0    None  None    None</p>
</blockquote>
<p>Here is my XML file :</p>
<pre><code>&lt;?xml version="1.0"?&gt;
&lt;SoccerFeed timestamp="20181123T153249+0000"&gt;
  &lt;SoccerDocument Type="SQUADS Latest" competition_code="FR_L1" competition_id="24" competition_name="French Ligue 1" season_id="2016" season_name="Season 2016/2017"&gt;
    &lt;Team country="France" country_id="8" country_iso="FR" region_id="17" region_name="Europe" &gt;
      &lt;Founded&gt;1919&lt;/Founded&gt;
      &lt;Name&gt;Angers&lt;/Name&gt;
   &lt;...&gt;
   &lt;Team country="France" country_id="8" country_iso="FR" region_id="17" region_name="Europe" &gt;
      &lt;Founded&gt;1905&lt;/Founded&gt;
      &lt;Name&gt;Bastia&lt;/Name&gt;
</code></pre>
<p>Why can't I get a Panda Data Frame with the informations I need ? Did I miss something in my code ? Thank you for your help</p>
</div>
<div class="post-text" itemprop="text">
<p>In the XML, <code>&lt;Founded&gt;</code> and <code>&lt;Name&gt;</code> are child tags for the <code>&lt;Team&gt;</code> tag and the <code>country</code> attribute is also part of the <code>&lt;Team&gt;</code> tag. Hence, we should <code>iter</code>ate over the XML DOM of the <code>&lt;Team&gt;</code> tag. Next, there should be some way to store the values of the <code>for</code> loop on each iteration as these would be the row values for each column. We can do this by creating a dictionary(<code>df_dict</code>) of the three columns with their values set to empty lists. We append the corresponding lists for each <code>Country</code>, <code>Club</code> and <code>Founded</code> on each iteration. Finally, we create the Dataframe(<code>df</code>) from this dictionary.</p>
<pre><code>import xml.etree.cElementTree as et
import pandas as pd

def main():
    parsed_xml = et.parse("test.xml")
    df_dict = {'Country':[],'Club':[], 'Founded':[]}    
    root = parsed_xml.getroot()
    for country in root.iter('Team'):
        Country = country.attrib.get('country')
        Club = country.find('Name').text
        Founded = country.find('Founded').text 
        df_dict['Country'].append(Country)
        df_dict['Club'].append(Club)
        df_dict['Founded'].append(Founded) 

    print('Dict for dataframe: {}'.format(df_dict))
    df = pd.DataFrame(df_dict)
    print("Dataframe: \n{}".format(df))

main()
</code></pre>
<p>The following is the Output on running this script:</p>
<pre><code>#Output:
Dict for dataframe: {'Country': ['France', 'France'], 'Club': ['Angers', 'Bastia'], 'Founded': ['1919', '1905']}
Dataframe:
  Country    Club Founded
0  France  Angers    1919
1  France  Bastia    1905
</code></pre>
</div>
<span class="comment-copy">Can you share a valid xml as I get an error when trying to parse through the XML DOM with your code?</span>
<span class="comment-copy">Never mind, I fixed it by adding the closing tags.</span>
