<div class="post-text" itemprop="text">
<p>Getting <code>FileNotFoundError: [Errno 2] No such file or directory: 'bash'</code> error while running my gunicorn python app form .service file. </p>
<p><strong>However running gunicorn command by itself(not from .service file) works fine.</strong></p>
<p>gunicorn command to run the app</p>
<pre><code>gunicorn -k geventwebsocket.gunicorn.workers.GeventWebSocketWorker -w 1 --bind &lt;server_ip&gt;:8080 wsgi
</code></pre>
<p>app.service file</p>
<pre><code>[Service]
User=user
WorkingDirectory=/home/user/app
Environment="PATH=/home/user/app/app_venv/bin"
ExecStart=/home/user/app/app_venv/bin/gunicorn -k geventwebsocket.gunicorn.workers.GeventWebSocketWorker --workers 1 --bind &lt;server_ip&gt;:8080 wsgi
</code></pre>
<p>Python code that is generating the error</p>
<pre><code>import subprocess

cmd = ['bash', 'script.sh' , args.get('arg')]
try:
    process = subprocess.Popen(cmd,
                               cwd=/path/to/bash_script,
                               stdout=subprocess.PIPE,
                               stderr=subprocess.STDOUT,
                               universal_newlines=True)
    while process.poll() is None:
        output = process.stdout.readline()
        if(output==''):
            break
        emit('tg_output', output)

except subprocess.CalledProcessError as error:
    pass
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You are explicitly setting</p>
<pre><code>Environment="PATH=/home/user/app/app_venv/bin"
</code></pre>
<p>You need for <code>PATH</code> to contain all the directories of any external binaries you want to use (and in fact, there is no need really for it to contain the directory of your script, if you are running it by full path anyway; so the best solution is probably simply to remove this <code>PATH</code> assignment from the file altogether).</p>
<p>Your Bash script doesn't seem to need Python to run it, and the Python wrapper you created to run it seems to have bugs (in particular, the blanket <code>except</code> looks unnerving); perhaps a better solution would be to run a separate Bash process altogether.</p>
</div>
<div class="post-text" itemprop="text">
<p>IMO the <code>bash</code> command is not in the <em>user</em> PATH. Itâ€™s better to always use the full path of the <code>bash</code> command. </p>
<pre><code>cmd = ['/bin/bash', 'script.sh' , args.get('arg')]
</code></pre>
<p>Use <code>which bash</code> to get the full path.</p>
</div>
<span class="comment-copy">Environment="PATH=/home/user/app/app_venv/bin:$PATH"</span>
