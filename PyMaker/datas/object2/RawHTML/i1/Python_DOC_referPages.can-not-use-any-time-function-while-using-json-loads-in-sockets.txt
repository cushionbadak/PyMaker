<div class="post-text" itemprop="text">
<p>I am trying to make a console based multiplayer snake game using sockets in python. However, I am facing an unorthodox problem. Whenever, I use any time function say, time.sleep() or win.timeout() the json.loads() raises exception: <em>json.decoder.JSONDecodeError: Extra data: line 1 column 72 (char 71)</em>
I have looked up the error and am not decoding multiple JSON objects. I have also tried to use pickle but the error presists untill I donot comment out the time functions.</p>
<p>Client:</p>
<pre><code>while 1:
x = s.recv(1024)
snake = json.loads(x)['snake']
snake2 = json.loads(x)['me']
win.border(0)
win.addstr(0, 2, 'Score : ' + str(score) + ' ')
win.addstr(0, 27, ' SNAKE ')
#win.timeout(75) Works fine untill this is commented out
#or this time.sleep(1)
prevKey = key
event = win.getch()
key = key if event == -1 else event
if key not in [KEY_LEFT, KEY_RIGHT, KEY_UP, KEY_DOWN, 27]:
    key = prevKey
win.addch(snake[0][0], snake[0][1], '0')
win.addch(snake2[0][0], snake2[0][1], '0')
last = snake.pop()
win.addch(last[0], last[1], ' ')
last = snake2.pop()
win.addch(last[0], last[1], ' ')
</code></pre>
<p>Server:</p>
<pre><code>me = [[4,10], [4,9], [4,8]] 
snake1 = [[6,10], [6,9], [6,8]]
snakes.append(snake1)
snakes.append(me)
while True: 
    time.sleep(0.001)

    x = {
         "snake":snake1 , 
         "me" :me
        }
    c.send(bytes(json.dumps(x) , 'utf8'))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Your server code encodes the JSON string into bytes using UTF-8 before sending it, and so your client should decode the bytes into a string with UTF-8 before loading it as JSON:</p>
<pre><code>x = s.recv(1024)
data = json.loads(x.decode('utf8'))
snake = data['snake']
snake2 = data['me']
</code></pre>
</div>
