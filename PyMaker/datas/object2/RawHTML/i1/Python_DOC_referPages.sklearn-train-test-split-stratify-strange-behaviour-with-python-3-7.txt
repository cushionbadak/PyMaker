<div class="post-text" itemprop="text">
<p>I used a 70-30 balanced dataset and try to split it in train / test with a stratification using train_test_split sklearn function.
It works as expected in python 3.5 but not really in 3.7.  </p>
<p>There is the code I'm using to reproduce :</p>
<pre><code>import numpy as np
from sklearn.model_selection import train_test_split

data = np.random.rand(1000000).reshape(100000, 10)

y_0 = [0]*30000
y_1 = [1]*70000
y_2 = y_0 + y_1

x_train, x_test, y_train, y_test = train_test_split(data, y_2, test_size=0.2, random_state=0, stratify=y_2)

print('Train set size : {}'.format(len(y_train)))
print('Value 1 repartition in train set : {}'.format(sum(y_train)/len(y_train)))
print('Test set size : {}'.format(len(y_test)))
print('Value 1 repartition in test set : {}'.format(sum(y_test)/len(y_test)))
</code></pre>
<p><strong>Output Python 3.7 :</strong></p>
<pre><code>Train set size : 24102
Value 1 repartition in train set : 0.5414903327524687
Test set size : 20000
Value 1 repartition in test set : 0.53775
</code></pre>
<p><strong>Output Python 3.5 :</strong></p>
<pre><code>Train set size : 80000
Value 1 repartition in train set : 0.7
Test set size : 20000
Value 1 repartition in test set : 0.7
</code></pre>
<p><strong>Libraries Versions 3.7 :</strong> </p>
<pre><code>Python 3.7.2
    numpy==1.16.1
    pandas==0.24.1
    python-dateutil==2.8.0
    pytz==2018.9
    scikit-learn==0.20.2
    scipy==1.2.1
    six==1.12.0
</code></pre>
<p><strong>Libraries Versions 3.5 :</strong></p>
<pre><code>Python 3.5.1
    numpy==1.16.1
    pandas==0.24.1
    python-dateutil==2.8.0
    pytz==2018.9
    scikit-learn==0.20.2
    scipy==1.2.1
    six==1.12.0
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This kind of issue can be related to processor architecture.
Please check than both of your Python version have the same architecture (32bits or 64bits).</p>
</div>
<span class="comment-copy">Oh yeah thanks my 3.7 was in 32bits and my 3.5 was in 64bits. The behaviour are the same in 64bits.</span>
