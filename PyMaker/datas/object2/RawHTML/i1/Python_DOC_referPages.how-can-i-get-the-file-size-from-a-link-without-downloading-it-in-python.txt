<div class="post-text" itemprop="text">
<p>I have a list of links that I am trying to get the size of to determine how much computational resources each file need. Is it possible to just get the file size with a get request or something similar?</p>
<p>Here is an example of one of the links: <a href="https://sra-download.ncbi.nlm.nih.gov/traces/sra46/SRR/005150/SRR5273887" rel="nofollow noreferrer">https://sra-download.ncbi.nlm.nih.gov/traces/sra46/SRR/005150/SRR5273887</a></p>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>To do this use the HTTP HEAD method which just grabs the header information for the URL and doesn't download the content like an HTTP GET request does.</p>
<pre><code>$curl -I https://sra-download.ncbi.nlm.nih.gov/traces/sra46/SRR/005150/SRR5273887
HTTP/1.1 200 OK
Server: nginx
Date: Mon, 18 Mar 2019 16:56:35 GMT
Content-Type: application/octet-stream
Content-Length: 578220087
Last-Modified: Tue, 21 Feb 2017 12:13:19 GMT
Connection: keep-alive
Accept-Ranges: bytes
</code></pre>
<p>The file size is in the 'Content-Length' header. In Python 3.6:</p>
<pre><code>&gt;&gt;&gt; import urllib
&gt;&gt;&gt; req = urllib.request.Request('https://sra-download.ncbi.nlm.nih.gov/traces/sra46/SRR/005150/SRR5273887', 
                                 method='HEAD')
&gt;&gt;&gt; f = urllib.request.urlopen(req)
&gt;&gt;&gt; f.status
200
&gt;&gt;&gt; f.headers['Content-Length']
'578220087'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If you're using Python 3, you can do it using <a href="https://docs.python.org/3.6/library/urllib.request.html#urllib.request.urlopen" rel="nofollow noreferrer"><code>urlopen</code></a> from <a href="https://docs.python.org/3.6/library/urllib.request.html" rel="nofollow noreferrer"><code>urllib.request</code></a>:</p>
<pre><code>from urllib.request import urlopen
link =  "https://sra-download.ncbi.nlm.nih.gov/traces/sra46/SRR/005150/SRR5273887"
site = urlopen(link)
meta = site.info()
print(meta)
</code></pre>
<p>This will output:</p>
<pre><code>Server: nginx
Date: Mon, 18 Mar 2019 17:02:40 GMT
Content-Type: application/octet-stream
Content-Length: 578220087
Last-Modified: Tue, 21 Feb 2017 12:13:19 GMT
Connection: close
Accept-Ranges: bytes
</code></pre>
<p>The <code>Content-Length</code> property is the size of your file in bytes.</p>
</div>
<div class="post-text" itemprop="text">
<p>You need to use the <code>HEAD</code> method. The example uses requests (<code>pip install requests</code>).</p>
<pre class="lang-python prettyprint-override"><code>#!/usr/bin/env python
# display size of remote file without downloading

import sys
import requests

# pass URL as first argument
response = requests.head(sys.argv[1], allow_redirects=True)

size = response.headers.get('content-length', -1)

# print size in megabytes
print('\t{:&lt;40}: {:.2f} MB'.format('FILE SIZE', int(size) / float(1 &lt;&lt; 20)))
</code></pre>
<p>Also see <a href="https://stackoverflow.com/questions/107405/how-do-you-send-a-head-http-request-in-python-2">How do you send a HEAD HTTP request in Python 2?</a> if you want standard-library based solutions.</p>
</div>
<span class="comment-copy">You can take a look <a href="https://stackoverflow.com/questions/5909/get-size-of-a-file-before-downloading-in-python">here</a>.</span>
<span class="comment-copy"><code>urlopen</code> will do a <code>GET</code> request and will in fact download the document.</span>
