<div class="post-text" itemprop="text">
<p>given a list of indices that match a condition, where there will be many spans in the list that are sequentially adjacent, how can I easily select only the first of each span.</p>
<p>such that </p>
<pre><code>magicallySelect([1,2,3,10,11,12,100,101,102]) == [1,10,100]
</code></pre>
<p>but -- importantly, this should also work for other indicies, like dates (which is the case in my data). The actual code I'm hoping to get working is:</p>
<pre><code>original.reset_index(inplace=True)

predict = {}
for app in apps:
    reg = linear_model.LinearRegression()
    reg.fit(original.index.values.reshape(-1, 1), original[app].values)

    slope = reg.coef_.tolist()[0]
    delta = original[app].apply(lambda x: abs(slope - x))

    forecast['test_delta'] = forecast[app].apply(lambda x: abs(slope - x))
    tdm = forecast['test_delta'].mean()
    tds = forecast['test_delta'].std(ddof=0)

    # identify moments that are Ïƒ&gt;2 abnormal
    forecast['z'] = forecast['test_delta'].apply(lambda x: abs(x - tdm / tds))
    sig = forecast.index[forecast[forecast['z'] &gt; 2]].tolist()

    predict[app] = FIRST_INDEX_IN_EACH_SPAN_OF(sig)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>l = [1,2,3,10,11,12,100,101,102]
indices =  [l[i] for i in range(len(l)) if l[i-1]!=l[i]-1]
</code></pre>
<p>Reordering this slightly to work for datetimes, this would give you all items in the list where the gap from the previous item is greater than 1 day (plus the first item by default):</p>
<pre><code>indices = [l[0]] + [l[i] for i in range(len(l)) if (l[i]-l[i-1]).days&gt;1]
</code></pre>
<p>For a difference in time measured in minutes, you can convert to seconds and substitute this in. E.g. for 15 minutes (900 seconds) you can do:</p>
<pre><code>indices = [l[0]] + [l[i] for i in range(len(l)) if (l[i]-l[i-1]).seconds&gt;900]
</code></pre>
</div>
<span class="comment-copy">it has to work for datetimes</span>
<span class="comment-copy">Ok now updated. Assuming you want greater gap than 1 day</span>
<span class="comment-copy">actually, the indices in my time series are separate by 15 minutes. it looks like I can just use raw subtrtraction on pd.datetimes though??</span>
<span class="comment-copy">Yes assuming subtracting one date from the next in the list returns a timedelta object, then you can just replace <code>.days&gt;1</code> with <code>.seconds&gt;900</code></span>
<span class="comment-copy">I've updated my answer</span>
