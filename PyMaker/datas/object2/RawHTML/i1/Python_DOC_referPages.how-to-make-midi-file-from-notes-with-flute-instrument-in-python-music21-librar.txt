<div class="post-text" itemprop="text">
<p>I have some notes and what I want is create the MIDI file with Flute instrument. But what happens is that the output MIDI file plays Piano, instead of Flute. I tried other instruments, but it's always the same, Piano. What is going on?</p>
<pre><code>(...)
new_note = note.Note(pattern)
new_note.offset = offset
new_note.storedInstrument = instrument.Piano()
output_notes.append(new_note)
(...)
midi_stream = stream.Stream(output_notes)
midi_stream.write('midi', fp='output.midi')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>According to the <a href="http://web.mit.edu/music21/doc/moduleReference/moduleNote.html" rel="nofollow noreferrer">documentation</a>, the only class with a <code>storedInstrument</code> property is <code>note.Unpitched</code>.</p>
<p>And:</p>
<blockquote>
<p>The <code>Unpitched</code> object does not currently do anything and should not be used.</p>
</blockquote>
<p>Anyway, the <code>testMidiProgramChangeA</code>/<code>B</code> functions in <code>music21/midi/translate.py</code> show how this is to be done: just add the instrument object into the <code>Stream</code> before the <code>Note</code>s that should use it:</p>
<pre><code>output_notes.append(instrument.Flute())
new_note = ...
output_notes.append(new_note)
...
</code></pre>
</div>
