<div class="post-text" itemprop="text">
<p>I'm trying to encrypt this dataset <a href="https://archive.ics.uci.edu/ml/datasets/Wholesale+customers" rel="nofollow noreferrer">Wholesales customer</a>, having dropped the first two columns (Channel and Region).
The encryption script works fine, as I'm able to generate the public key for encryption. However, I think the problem is with the nested for loop lines. Any help would be appreciated. </p>
<pre><code>from Paillier_CRT.gmpy2mod import *
import numpy as np
import pandas as pd


priv, pub = generate_keypair(128)
n = pub.n
print("The public key is:", n)


def to_encrypt(public, data_matrix):
    data_encrypted = encrypt(public, data_matrix)
    return data_encrypted


def load_data():
    raw_data = pd.read_csv('wholesales1.csv')
    dtset = raw_data.drop(['Channel'], axis=1)
    new_dtset = dtset.drop(['Region'], axis=1)
    converted_data = new_dtset.values
    data_to_encrypt = []

    for row in converted_data:
        for elem in row:
            data_to_encrypt = to_encrypt(pub, int(converted_data))
            return data_to_encrypt


working_data = load_data()
print("The encrypted data is: ", working_data)
</code></pre>
<p>Error message:</p>
<pre><code>TypeError: only size-1 arrays can be converted to Python scalars
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This error usually means that you are using a scalar value where an array was expected.</p>
<p>Instead of </p>
<pre><code>data_to_encrypt = to_encrypt(pub, int(converted_data))
</code></pre>
<p>you can try</p>
<pre><code>data_to_encrypt = to_encrypt(pub, converted_data.astype(int))
</code></pre>
</div>
<span class="comment-copy">If my answer was useful, please Up-Vote my answer by clicking on the grey Up-Arrow to the left of my answer. Also, if it met your requirements, please Accept my answer by clicking on the Tick-Mark to the left of my answer.</span>
<span class="comment-copy">It worked, thank you @fountainhead</span>
<span class="comment-copy">@Blessyn01: You're welcome. Glad to be of help. If this was useful, please upvote my answer by clicking on the grey Up-Arrow to the left of my answer. Also, if it met your requirements, please Accept my answer by clicking on the Tick-Mark to the left of my answer.</span>
