<div class="post-text" itemprop="text">
<p>I an using pandas library to check if the elements in the columns is type list the appending the column name to list. Below is the code</p>
<pre><code>        for col in order_df.columns:
            if isinstance(order_df[col].any(), list):
                print(col)
                cols_to_flatten.append(col)
</code></pre>
<p>Here order_df is the DataFrame, and I am iterating through the columns, and I have initialised the empty list and then append the col which is type list, but it is causing the infinite loop. Unable to find the reason behind this. Any help is highly appreciated.</p>
<p>sample for order_df is below</p>
<pre><code>   email                     id         location_id  \
0  bob.norman@hostmail.com  450789469  487838322.0   
1  bob.norman@hostmail.com  450789469  487838322.0   
2  bob.norman@hostmail.com  450789469  487838323.0   
3  bob.norman@hostmail.com  450789469          NaN 



                  order_value      line_items_title  
0  [{u'id': 123, u'asd': u'asd'}]  IPod Nano - 8gb   
1  [{u'id': 123, u'asd': u'asd'}]  IPod Nano - 8gb   
2  {u'id': 123, u'asd': u'asd'}    IPod Nano - 8gb   
3  {u'id': 123, u'asd': u'asd'}    IPod Nano - 8gb
</code></pre>
<p>and it is created from the below json response</p>
<pre><code>order_response = {
"orders": [
    {
        "id": "450789469",
        "email": "bob.norman@hostmail.com",
        "location_id": 487838322,
        "order_value": [
            {
                "id": 123,
                "asd": "asd"
            }, {
                "id": 234,
                "asd": "sd"
            }
        ],
        "line_items": [
            {
                "id": 466157049,
                "variant_id": 39072856,
                "title": "IPod Nano - 8gb",
                "product_id": 632910392,
            }, {
                "id": 466157050,
                "variant_id": 39072856,
                "title": "IPod Nano - 8gb",
                "product_id": 632910392,
            }
        ]
    }, {
        "id": "450789469",
        "email": "bob.norman@hostmail.com",
        "location_id": 487838323.00,
        "order_value": {
            "id": 123,
            "asd": "asd"
        },
        "line_items": {
            "id": 466157052,
            "variant_id": 39072856,
            "title": "IPod Nano - 8gb",
            "product_id": 632910392,
        }
    }, {
        "id": "450789469",
        "email": "bob.norman@hostmail.com",
        "location_id": float('nan'),
        "order_value": {
            "id": 123,
            "asd": "asd"
        },
        "line_items": {
            "id": 466157052,
            "variant_id": 39072856,
            "title": "IPod Nano - 8gb",
            "product_id": 632910392,
        }
    },
]
}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Your code is working properly. Try using list comprehension instead which is faster.</p>
<pre><code>cols = [col for col in df.columns if isinstance(df[col].any(), list)]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I found the issue, I was executing the above script on python 2.7 version in the pycharm and the test were failing giving the infinite loop error. Same script started working in the python 3.5 version. </p>
</div>
<span class="comment-copy">Bad indentation on line 2</span>
<span class="comment-copy">Post a sample of <code>order_df </code></span>
<span class="comment-copy">are you sure it's an infinite loop? or your data may be too large so processing time is larger?  <code>for loop</code> are slower in python.</span>
<span class="comment-copy">@AkshayNevrekar I have used a sample dataset as shown above so it is not because of large dataset.</span>
<span class="comment-copy">@NikhilGupta - For me working nice, maybe problem with version of pandas, you can try upgrade it.</span>
<span class="comment-copy">intially I tried with list comprehension only, it was giving the same error, that's why I moved to the above method.</span>
<span class="comment-copy">That is ..weird.</span>
