<div class="post-text" itemprop="text">
<p>I am trying to retrieve data from url into json format using flask-restplus.</p>
<pre><code>from flask import Flask, render_template
import requests
import json
from flask_restplus import Resource, Api, fields
from flask_sqlalchemy import SQLAlchemy

# config details
COLLECTION = 'indicators'

app = Flask(__name__)
api = Api(
  app,
  title='Akhil Jain',
  description='Developing ' \
  'a Flask-Restplus data service that allows a client to ' \
  'read and store some publicly available economic indicator ' \
  'data for countries around the world, and allow the consumers ' \
  'to access the data through a REST API.'
)

@api.route('/indicators')
def get(self):
        uri = 'http://api.worldbank.org/v2/indicators'
        try:
            res = requests.get(uri)
            print(res)
            return res.json()
        except:
            return False

if __name__ == '__main__':
    app.run(debug=True)
</code></pre>
<p>but after trying out the GET, the response i am getting is False instead of the json data.
Could anyone tell me how to get the response data so that i can process it to sqllite db.</p>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>you have to get the content from response </p>
<p>If you would want to save the xml data then. </p>
<pre><code>try:
            res = requests.get(uri)
            print(res.content)
            return res.content
         except:
            return False
</code></pre>
<p>If you want to save it as json, then install module xmltodict. </p>
<pre><code>try:
            res = requests.get(uri)
            jsondata = xmltodict.parse(res.content)
            print(jsondata)
            return jsondata
         except:
            return False
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You're trying to retrieve an XML producing endpoint. - Invoking <code>json</code> will raise an exception since the content retrieved is not <code>json</code>.</p>
<p>The ideal way of doing this is to build a function that parses the data as per your requirements; the example below can be treated as a reference.</p>
<pre><code>import xml.etree.ElementTree as element_tree
xml = element_tree.fromstring(response.content)

for entry in xml.findall(path_here, namespace_here):
    my_value = entry.find(attribute_here, namespace_here).text 
</code></pre>
<p>You can opt to use <code>lxml</code> or other tools available. - The above is an example of how you can parse your <code>xml</code> response.</p>
</div>
<span class="comment-copy">It seems like <a href="http://api.worldbank.org/v2/indicators" rel="nofollow noreferrer">api.worldbank.org/v2/indicators</a> response is not json</span>
<span class="comment-copy">@a.l. yes, i think it is XML</span>
<span class="comment-copy">thus <code>return res.json()</code> would raise an Exception which would make your app response <code>False</code></span>
<span class="comment-copy">did the solution that i provided work ?.</span>
<span class="comment-copy">did the solution work ?.</span>
