<div class="post-text" itemprop="text">
<p>I have a Python(3) script that's calling an external command using the <code>subprocess.call([...])</code> method:</p>
<pre><code>import subprocess

print("Prefix: ")
subprocess.call(["cmd", "--option", "filename.x"])
</code></pre>
<p>The command executes without any errors but the problem is the output.</p>
<p>The output isn't <em>"uniform"</em> and sometimes the program will output:</p>
<pre><code>Program output...
Prefix:
</code></pre>
<p>And other times the output will be:</p>
<pre><code>Prefix:
Program output....
</code></pre>
<p>The result I'm looking for is:</p>
<pre><code>Prefix: Program output...
</code></pre>
<p>I know that in order to achieve this result I need to wait for the subprocess to finish, store it's output and then print the prefix (without <code>\n</code>) with the subprocess' output after it, I just can't figure out <strong>how</strong> to do it.</p>
<p>Thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p>First you need to import the <code>sys</code> module, so you can use <code>sys.stdout</code>'s <code>write</code> and <code>flush</code> methods.</p>
<pre><code>import sys
</code></pre>
<p>You'll also need to import the subprocess module so you can use the <code>subprocess.check_output</code> method.</p>
<pre><code>import subprocess
</code></pre>
<p>Use <code>sys.stdout.write</code> instead of <code>print</code>:</p>
<pre><code>sys.stdout.write("Prefix: ")
</code></pre>
<p>Then you'll need to replace <code>subprocess.call</code> with <code>subprocess.check_output</code>, which runs the given command and <strong>waits</strong> for the output.</p>
<pre><code>response = subprocess.check_output(["cmd", "--option", "filename.x"])
</code></pre>
<p><strong>NOTE:</strong> you need to decode the response because it's a bytes object and not a string.</p>
<pre><code>sys.stdout.write(response.decode("UTF-8"))
</code></pre>
<p>And finally you need to flush the output:</p>
<pre><code>sys.stdout.flush()
</code></pre>
<p>Here is the final result:</p>
<pre><code>import sys, subprocess
sys.stdout.write("Prefix: ")
response = subprocess.check_output(["cmd", "--option", "filename.x"])
sys.stdout.write(response.decode("UTF-8"))
sys.stdout.flush()
</code></pre>
<p>Good luck, hopefully no one else will stumble on this question like I did.</p>
</div>
<span class="comment-copy">It won't work, you have to wait for the command, even if you remove the new line the command might finish <b>BEFORE</b> the prefix is printed, the program doesn't take a set/specific amount of time, see answer below.</span>
<span class="comment-copy"><code>print('Prefix : ', end=' ', flush=True)</code>. It should be printed before your next instruction</span>
