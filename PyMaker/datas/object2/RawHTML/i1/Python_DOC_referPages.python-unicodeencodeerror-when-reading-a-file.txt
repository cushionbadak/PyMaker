<div class="post-text" itemprop="text">
<p>I've searched for hours to fix this bug, but none of the online solution solved my issue.</p>
<p>When executing this piece of code on Python 3.6: </p>
<pre><code># encoding=utf-8
f = open("x.htm", "r", -1, "utf-8", 'ignore') 
s = f.read()
print(s)
</code></pre>
<p>I get following error: UnicodeEncodeError: 'ascii' codec can't encode character '\xfc' in position 37: ordinal not in range(128)</p>
<p>I do not even know why it is using ascii codec?</p>
<p>I am using a normal html file, only containing utf-8 characters also specified as charset within the file (it looks normal when opened by a common browser)</p>
<p>I already found a workaround:</p>
<pre><code>s = f.read().encode('utf-8').decode("ascii", "ignore")
</code></pre>
<p>The problem so far is data loss, because of the ignore tag, when using the replace tag, than following error occurs:</p>
<p>UnicodeEncodeError: 'ascii' codec can't encode characters in position 37-38: ordinal not in range(128)</p>
<p>I have a normal html file which can correctly utf-8 decoded by my browser and editor, I try to open this file in python with utf-8 - then some unicode error with ascii occurs?</p>
</div>
<div class="post-text" itemprop="text">
<p>you could do the following</p>
<blockquote>
<p>check the editor your using to use ascii and figure out the trouble spot.
  open up vim and search the problem character</p>
</blockquote>
</div>
<span class="comment-copy">The problem is probably with the <code>print</code>, not the <code>read</code>. If your terminal is not set to use UTF-8, <code>print</code> is trying to encode <code>s</code> using <code>ascii</code>.</span>
<span class="comment-copy">Thank you so much!! Indeed, I absolutely forgot to check my terminal settings. In my standard terminal it worked without any problems. So I checked in VSCode the stdout encoding with print(sys.stdout.encoding), and voila I got as answer US-ASCII. Please post your comment as answer so I can close this question.</span>
