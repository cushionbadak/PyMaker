<div class="post-text" itemprop="text">
<p>I am not so familiar with sympy and I am trying to, given a string:</p>
<ul>
<li>check if that string, once converted to a sympy expression, matches a specific 'pattern', in my case "A**a * B**b * C**c".</li>
<li>if so, parse the string to get the corresponding symbols of that pattern. ex : "foo**2*bar**1*toto**38" would be parsed as {"foo":2, "bar":1, "toto":38}.</li>
</ul>
<p>I thought I could use solve to get all the powers, but that seems very ineffective..</p>
<p>Cheers</p>
</div>
<div class="post-text" itemprop="text">
<p>It seems to be exactly what you need:</p>
<pre><code>from sympy.parsing.sympy_parser import parse_expr

string = "foo**2*bar**1*toto**38"
parsed = parse_expr(string)
print(parsed.as_powers_dict())  
# output: defaultdict(&lt;class 'int'&gt;, {bar: 1, foo: 2, toto: 38})
</code></pre>
</div>
<span class="comment-copy">Awesome thanks a lot ! Also, I guess to check that the string matches the pattern, I just have to check the keys of the returned dict ;)</span>
<span class="comment-copy">Oh, yes, so my answer is only for second part of your question. For the first part you can check that the <code>len</code> of returned dict is 3.</span>
<span class="comment-copy">Also, if my answer solves your problem, you can mark my answer as accepted. It will be helpful for future readers of this question to know that this problem can be solved with usage of my answer. This is how SO works.</span>
<span class="comment-copy">I did but "Votes cast by those with less than 15 reputation are recorded, but do not change the publicly displayed post score."</span>
<span class="comment-copy">There is a checkbox under the downvote arrow</span>
