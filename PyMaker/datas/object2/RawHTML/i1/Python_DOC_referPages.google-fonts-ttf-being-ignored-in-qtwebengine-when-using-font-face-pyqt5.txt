<div class="post-text" itemprop="text">
<p>I am trying to load a google font to my pyqt5 QtWebEngine app.</p>
<p>The app loads a local html file with css stying. I used font face to load the ttf file as below:</p>
<p><div class="snippet" data-babel="false" data-console="true" data-hide="false" data-lang="js">
<div class="snippet-code">
<pre class="snippet-code-css lang-css prettyprint-override"><code>@font-face {
	font-family: "Work Sans";
	src: url("C:\Users\Godwin\TIAT\fonts\WorkSans-Regular.ttf") format('truetype');
}

body {
	font-family: "Work Sans";
	background-color: #eef0f2;
}</code></pre>
</div>
</div>
</p>
<p>the font seem to be ignored when loading the html file.</p>
<p>Can someone please assist.</p>
<p>Edit<strong>strong text</strong></p>
<p>Here is my full html</p>
<p><div class="snippet" data-babel="false" data-console="true" data-hide="false" data-lang="js">
<div class="snippet-code">
<pre class="snippet-code-css lang-css prettyprint-override"><code>@font-face {
    font-family: Work Sans;
    src: url("Work_Sans/WorkSans-Regular.ttf")
}

div {
    font-family: Work Sans;
  }</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
    &lt;link rel="stylesheet" type="text/css" href="style.css"/&gt;
    &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;style&gt;
&lt;/style&gt;
&lt;body&gt;
    &lt;div&gt;
        Hello World
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
</p>
<p>These works on chrome, firefox and chrome but if i use qtwebengine like this</p>
<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets, QtWebEngineWidgets

if __name__ == "__main__":

    import sys
    sys.argv.append("--disable-web-security")
    app = QtWidgets.QApplication(sys.argv)
    wnd = QtWidgets.QWidget()
    genVLayout = QtWidgets.QVBoxLayout(wnd)
    verticalLayout_7 = QtWidgets.QVBoxLayout()
    webEngineViewGen = QtWebEngineWidgets.QWebEngineView(wnd)
    webEngineViewGen.setUrl(QtCore.QUrl("about:blank"))
    fh = open('main.html','r')
    html = fh.read()
    webEngineViewGen.setHtml(html)

    verticalLayout_7.addWidget(webEngineViewGen)
    genVLayout.addLayout(verticalLayout_7)
    wnd.show()
    sys.exit(app.exec_())
</code></pre>
<p>it font does not work</p>
</div>
<div class="post-text" itemprop="text">
<p>If you are using <code>setHtml()</code> then as indicated by the <a href="http://%20https://doc.qt.io/qt-5/qwebengineview.html#setHtml" rel="nofollow noreferrer">docs</a> the external resources will be relative to the url that you pass as second parameters:</p>
<blockquote>
<p><strong>void QWebEngineView::setHtml(const QString &amp;html, const QUrl &amp;baseUrl = QUrl())</strong></p>
<p>[...]</p>
<p>External objects, such as stylesheets or images referenced in the HTML document, are located relative to baseUrl.</p>
<p>[...]</p>
</blockquote>
<p>So in your case the solution is:</p>
<pre><code>import os
from PyQt5 import QtCore, QtGui, QtWidgets, QtWebEngineWidgets

if __name__ == "__main__":
    import sys
    sys.argv.append("--disable-web-security")
    app = QtWidgets.QApplication(sys.argv)
    wnd = QtWidgets.QWidget()
    genVLayout = QtWidgets.QVBoxLayout(wnd)
    verticalLayout_7 = QtWidgets.QVBoxLayout()
    webEngineViewGen = QtWebEngineWidgets.QWebEngineView(wnd)
    webEngineViewGen.setUrl(QtCore.QUrl("about:blank"))
    with open('main.html','r') as fh:
        html = fh.read()
        current_dir = os.path.dirname(os.path.abspath(__file__))
        url = QtCore.QUrl.fromLocalFile(os.path.join(current_dir, "main.html"))
        webEngineViewGen.setHtml(html, url)
    verticalLayout_7.addWidget(webEngineViewGen)
    genVLayout.addLayout(verticalLayout_7)
    wnd.show()
    sys.exit(app.exec_())
</code></pre>
<p>Or simply use the <a href="https://doc.qt.io/qt-5/qwebengineview.html#load" rel="nofollow noreferrer"><code>load()</code></a> method:</p>
<pre><code>import os
from PyQt5 import QtCore, QtGui, QtWidgets, QtWebEngineWidgets

if __name__ == "__main__":
    import sys
    sys.argv.append("--disable-web-security")
    app = QtWidgets.QApplication(sys.argv)
    wnd = QtWidgets.QWidget()
    genVLayout = QtWidgets.QVBoxLayout(wnd)
    verticalLayout_7 = QtWidgets.QVBoxLayout()
    webEngineViewGen = QtWebEngineWidgets.QWebEngineView(wnd)
    webEngineViewGen.setUrl(QtCore.QUrl("about:blank"))
    current_dir = os.path.dirname(os.path.abspath(__file__))
    url = QtCore.QUrl.fromLocalFile(os.path.join(current_dir, "main.html"))
    webEngineViewGen.load(url)
    verticalLayout_7.addWidget(webEngineViewGen)
    genVLayout.addLayout(verticalLayout_7)
    wnd.show()
    sys.exit(app.exec_())
</code></pre>
</div>
<span class="comment-copy">does it work with qtwebengine as well, I see it works in other browsers but somehow fails to work on qtWebEngine</span>
<span class="comment-copy">let me check the rest of my code</span>
<span class="comment-copy">i have edited my post, html works with browsers but not in pyqt</span>
<span class="comment-copy">see my solution</span>
<span class="comment-copy">Thanks eyllanesc. Let me try this out</span>
<span class="comment-copy">Works perfectly. Thanks!</span>
