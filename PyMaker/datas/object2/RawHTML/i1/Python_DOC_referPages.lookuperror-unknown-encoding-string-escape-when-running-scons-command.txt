<div class="post-text" itemprop="text">
<p>I am following this tutorial to build the IoTivity Base Android API:</p>
<p><a href="https://wiki.iotivity.org/android_build_instructions#android_example_apps" rel="nofollow noreferrer">https://wiki.iotivity.org/android_build_instructions#android_example_apps</a></p>
<p>I downloaded the IoTivity project from here:</p>
<p><a href="https://iotivity.org/downloads" rel="nofollow noreferrer">https://iotivity.org/downloads</a></p>
<p>I am at the step where I use the command to build IoTivity for Android:</p>
<pre><code>scons TARGET_OS=android
</code></pre>
<p>And I get the output:</p>
<pre><code>scons: Reading SConscript files ... LookupError: unknown encoding:
string_escape:   File
"C:\Users\Darius\Downloads\iotivity-1.3.1.tar\iotivity-1.3.1\iotivity-1.3.1\SConstruct",
line 28:
    SConscript('build_common/SConscript')   File "c:\users\darius\appdata\local\programs\python\python37-32\lib\site-packages\scons\SCons\Script\SConscript.py",
line 667:
    return method(*args, **kw)   File "c:\users\darius\appdata\local\programs\python\python37-32\lib\site-packages\scons\SCons\Script\SConscript.py",
line 604:
    return _SConscript(self.fs, *files, **subst_kw)   File "c:\users\darius\appdata\local\programs\python\python37-32\lib\site-packages\scons\SCons\Script\SConscript.py",
line 285:
    call_stack[-1].globals)   File "C:\Users\Darius\Downloads\iotivity-1.3.1.tar\iotivity-1.3.1\iotivity-1.3.1\build_common\SConscript",
line 559:
    user_prefix = env.get('BUILD_DIR').encode('string_escape')
</code></pre>
<p>I am on a Windows machine, using Command Prompt.</p>
<p>I tried the solutions in this post:</p>
<p><a href="https://stackoverflow.com/questions/35176270/python-2-7-lookuperror-unknown-encoding-cp65001">Python 2.7 : LookupError: unknown encoding: cp65001</a></p>
<p>But it did not help. I am new to Python. Can someone help?</p>
<p><strong>EDIT</strong></p>
<p>After changing to Python 2.7.16, I now get this output instead:</p>
<pre><code>scons: Reading SConscript files ...

*********************** Error ************************
*                                                    *
* Please make sure that 7-zip is in your System PATH *
*                                                    *
******************************************************

NameError: name 'host_arch' is not defined:   File
"C:\Users\Darius\Downloads\iotivity-1.3.1.tar\iotivity-1.3.1\iotivity-1.3.1\SConstruct",
line 28:
    SConscript('build_common/SConscript')   File "c:\python27\lib\site-packages\scons\SCons\Script\SConscript.py", line
667:
    return method(*args, **kw)   File "c:\python27\lib\site-packages\scons\SCons\Script\SConscript.py", line
604:
    return _SConscript(self.fs, *files, **subst_kw)   File "c:\python27\lib\site-packages\scons\SCons\Script\SConscript.py", line
285:
    call_stack[-1].globals)   File "C:\Users\Darius\Downloads\iotivity-1.3.1.tar\iotivity-1.3.1\iotivity-1.3.1\build_common\SConscript",
line 795:
    env.SConscript(target_os + '/SConscript')   File "c:\python27\lib\site-packages\scons\SCons\Script\SConscript.py", line
604:
    return _SConscript(self.fs, *files, **subst_kw)   File "c:\python27\lib\site-packages\scons\SCons\Script\SConscript.py", line
285:
    call_stack[-1].globals)   File "C:\Users\Darius\Downloads\iotivity-1.3.1.tar\iotivity-1.3.1\iotivity-1.3.1\build_common\android\SConscript",
line 19:
    SConscript('#/extlibs/android/ndk/SConscript')   File "c:\python27\lib\site-packages\scons\SCons\Script\SConscript.py", line
667:
    return method(*args, **kw)   File "c:\python27\lib\site-packages\scons\SCons\Script\SConscript.py", line
604:
    return _SConscript(self.fs, *files, **subst_kw)   File "c:\python27\lib\site-packages\scons\SCons\Script\SConscript.py", line
285:
    call_stack[-1].globals)   File "C:\Users\Darius\Downloads\iotivity-1.3.1.tar\iotivity-1.3.1\iotivity-1.3.1\extlibs\android\ndk\SConscript", line 24:
    if host_arch in ['x86_64']:
</code></pre>
<p>I did add my 7-zip folder path to <code>PATH</code> environment variable and restarted, but I still get this message. Not sure why it's even required though..</p>
</div>
<div class="post-text" itemprop="text">
<p>Looking at the error it looks like iotivity is using string_escape which isn't supported under python 3.*.</p>
<p>You'll need to install python 2.7 then:</p>
<pre><code>py -3 -mpip uninstall scons
py -2 -mpip install -U pip setuptools wheel
py -2 -mpip install scons
</code></pre>
<p>Then try again.</p>
</div>
<span class="comment-copy">What version of Python do you have installed?  I'm going to guess it's python3.* string_escape doesn't exist in python3. Please try installing python 2.7 and scons in that.. py -2 -mpip install -U pip wheel . then py -2 -mpip install scons.   Likely you'll need to do py -3 -mpip uninstall scons.</span>
<span class="comment-copy">python version 3.7.2</span>
<span class="comment-copy">I uninstalled all pyhton versions, then installed Python 2.7. When I try to install scons I get the error message <code>c:\Python27\lib\site-packages\pip\_vendor\urllib3\util\ssl_.py:150: InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. You can upgrade to a newer version of Python to solve this.</code></span>
<span class="comment-copy">which version of python 2.7.x did you install? Make sure you installed the latest 2.7.x version</span>
<span class="comment-copy">I updated to the latest 2.7.16. Now I get the error <code>Please make sure that 7-zip is in your System PATH</code>, even though I did and restarted. Also gives the error <code>NameError: name 'host_arch' is not defined:</code></span>
<span class="comment-copy">I edited my post to include the whole message</span>
<span class="comment-copy">I changed the formatting on your log posts to be code.. otherwise it's not maintaining the lines.  The 7zip issue is iotivity. I'm just a SCons guy.. I'd say find their IRC channel or mailing list and send them this question..</span>
