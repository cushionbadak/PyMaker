<div class="post-text" itemprop="text">
<p>I have a simple questions about discord. I am trying to create an economy system, and it works well, but I want to customize it a bit. I am using this person's module: <a href="https://github.com/Rapptz/discord.py" rel="nofollow noreferrer">https://github.com/Rapptz/discord.py</a></p>
<p>How do I convert a username to a discord ID. For example if I have a discord "command" to allow people to gift each other money, like: <code>james#0243</code> types <code>!give 100 bob#9413</code>.</p>
<p>How can I convert <code>bob#9413</code> to a discord id like <code>58492482649273613</code> because in my database, I have people's users stored as their ID rather than their  actual username as people can change their username.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use a <a href="https://discordpy.readthedocs.io/en/rewrite/ext/commands/commands.html#converters" rel="nofollow noreferrer">converter</a> to get the <code>Member</code> object of the target, which will include their <code>id</code>.</p>
<pre><code>from discord import Member
from dicord.ext.commands import Bot

bot = Bot(command_prefix='!')

@bot.command()
async def getids(ctx, member: Member):
    await ctx.send(f"Your id is {ctx.author.id}")
    await ctx.send(f"{member.mention}'s id is {member.id}")

bot.run("token")
</code></pre>
<p>Converters are pretty flexible, so you can give names, nicknames, ids, or mentions.</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://discordpy.readthedocs.io/en/latest/api.html?highlight=on_message#discord.on_message" rel="nofollow noreferrer"><code>on_message</code></a> callback function is passed the <code>message</code>.</p>
<p><code>message</code> is a <a href="https://discordpy.readthedocs.io/en/latest/api.html?highlight=on_message#discord.Message" rel="nofollow noreferrer"><code>discord.Message</code></a> instance. <br/>
It has <a href="https://discordpy.readthedocs.io/en/latest/api.html?highlight=on_message#discord.Message.author" rel="nofollow noreferrer"><code>author</code></a> and 
<a href="https://discordpy.readthedocs.io/en/latest/api.html?highlight=on_message#discord.Message.author" rel="nofollow noreferrer"><code>mentions</code></a> attributes which could be instances of <code>discord.Member</code> or <code>discord.User</code> depending on whether the message is sent in a private channel.</p>
<p>The <code>discord.Member</code> class subclasses the <a href="https://discordpy.readthedocs.io/en/latest/api.html?highlight=on_message#discord.User" rel="nofollow noreferrer"><code>discord.User</code></a> and the user <code>id</code> can be accessed there.</p>
</div>
<div class="post-text" itemprop="text">
<p>You could use <a href="https://discordpy.readthedocs.io/en/latest/api.html#discord.Server.get_member_named" rel="nofollow noreferrer">get_member_named</a> to do something like</p>
<pre><code>@client.command(pass_context = True)
async def name_to_id(ctx, *, name):
  server = ctx.message.server
  user_id = server.get_member_named(name).id
</code></pre>
<blockquote>
<p>The name can have an optional discriminator argument, e.g. “Jake#0001” or “Jake” will both do the lookup. However the former will give a more precise result. </p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<pre><code>prefix_choice = "!"
bot = commands.Bot(max_messages=10000, command_prefix=commands.when_mentioned_or(prefix_choice))

@bot.command()
async def membersLog(ctx):
    for i, member in enumerate(ctx.message.server.members):
        list_mem_num = (f'{i}')
        list_mem_id = (f'{member.id}')
        list_mem = (f'{member}')
        list_mem_name = (f'{member.name}')
        list_all = (f'Number: {list_mem_num} ID: {list_mem_id} Name: {list_mem} ({list_mem_name})\n')
        print(list_all)
</code></pre>
<p>You can use this to collect all memberinfo of the server where the call comes from. This is the code I use for this.</p>
</div>
<span class="comment-copy">Sorry.  I a little new to python, so in this line <code>async def getids(ctx, member: Member):</code> I would replace <code>Member</code> with the username? Eg: <code>async def getids(ctx, member: bob#9413):</code>. I assume this will work even if the username is not in the server?</span>
<span class="comment-copy">No. When you invoke the command in discord <code>!getids bob#9413</code>, the argument will get passed to a converter before it is passed to this coroutine.  By the time this code runs, <code>member</code> is a <code>Member</code> object.</span>
<span class="comment-copy">Sorry, I've never used <code>@bot.command</code> only <code>@client.event</code>. Then using the <code>on_message</code> function. Is it possible for you to show me using the <code>client.event</code> and <code>on_message</code>. Keep the one you made first, but just another version of it on <code>client.event</code>. Sorry for being a pain.</span>
<span class="comment-copy">So that means the person has to type <code>!give 100 @bob#9413</code>?</span>
<span class="comment-copy">That is correct. Is that a constraint you don't want? and would rather use the username without the <code>@</code> prefix?</span>
<span class="comment-copy">Well I was wondering if there is a way to do it without the @ symbol. So a user would type <code>!give 100 bob#9413</code></span>
<span class="comment-copy">See Tristo's answer for that.</span>
<span class="comment-copy">Correct me if I am wrong, but this only matched the username if they are in the server? I am looking for any name. In the server or not in the server</span>
<span class="comment-copy">You can only get information (users, roles etc.) from servers your bot is in when given the appropriate <a href="https://discordapi.com/permissions.html" rel="nofollow noreferrer">permissions</a></span>
