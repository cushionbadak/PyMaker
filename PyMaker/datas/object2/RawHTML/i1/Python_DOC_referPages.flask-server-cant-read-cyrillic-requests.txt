<div class="post-text" itemprop="text">
<p>Here is my simple endpoint:</p>
<pre><code>@app.route('/test', methods=['POST'])
def test():
    print(request.data)
    return Response("", mimetype='application/json')
</code></pre>
<p>The request body is: </p>
<pre><code>"тест"
</code></pre>
<p>And the server prints <code>b'"\xd1\x82\xd0\xb5\xd1\x81\xd1\x82"'</code> for request data.</p>
<p>How to set appropriate charset, providing content type header did nothing? </p>
<p>Also is there a way to get rid of that annoying <code>b</code> at the start of every request body? </p>
</div>
<div class="post-text" itemprop="text">
<p>For anyone having similar problem:</p>
<pre><code>from flask import Flask
from flask import Response
from flask import reques
import chardet

@app.route('/test', methods=['POST'])
def test():
    charset = chardet.detect(request.data)['encoding']
    print(request.data.decode(charset))
    return Response("", mimetype='application/json')
</code></pre>
<p>I was unable to make flask to this for me...
so you have to manually decode the bytes.</p>
</div>
<span class="comment-copy"><a href="http://flask.pocoo.org/docs/1.0/api/#flask.Request.get_data" rel="nofollow noreferrer">flask.pocoo.org/docs/1.0/api/#flask.Request.get_data</a></span>
<span class="comment-copy">But this is wrong. You should fix 1- the encoding. You should know what kind of encoding you are expecting, 2- the request data should be correctly formed. (so no <code>request.data</code>). Your file is not json. You "lie" and you pretend that computer will do the correct thing?</span>
