<div class="post-text" itemprop="text">
<p>I've written a small Python app, but it doesn't work as I planned.
I wanted the program to ask a user how many images with chosen tag from Unsplash he/she would like to save on his/her drive. </p>
<pre><code>res=requests.get("https://unsplash.com/search/photos" + "/" +  " ".join(sys.argv[1:]))
res.raise_for_status
soup=bs4.BeautifulSoup(res.text)
elemLinks=soup.select('img._2zEKz')
numb=int(input("How many images do you want to save?"))
</code></pre>
<p>After that, I want to open images one after another and to ask user if he/she wants to save this particular image until it reaches a certain number.</p>
<pre><code>numOpen=int(min(50,len(elemLinks)))
imagesSaved=0
i=0

while imagesSaved &lt; numb and i&lt;numOpen:
    try:
        src=elemLinks[i].get("src")
        if src==None:
            i+=1
            continue
        webbrowser.open(elemLinks[i].get("src"))
        photoUrl=elemLinks[i].get("src")
        res=requests.get(photoUrl)
        res.raise_for_status
        print ("Do you want to save it? (y/n)")
        ans=input()
        if ans=="y":
            name=input("How to name it?")
            fileName=name+".jpg"
            fileNames.append(fileName)
            imageFile=open(os.path.join("wallpapers",fileName),"wb")
            print ("Saving " + fileName + " to the hard drive")
            for chunk in res.iter_content(100000):
                imageFile.write(chunk)
                imageFile.close()
                imagesSaved += 1
                i+=1
                continue
        elif ans=="n":
            i+=1
             continue
        else:
            print("Tell me if you want to save it (y/n)")
    except requests.exceptions.ConnectionError:
        print("Connection refused by the server..")
        time.sleep(5)
        continue
</code></pre>
<p>But when I open the first three images, loop opens them once again (4th image is the same as the first, 5th as second and so on). It happens every time, with different images categories, with different numbers of images I want to save. and Why does it happens and why are the first three always repeated?</p>
</div>
<div class="post-text" itemprop="text">
<p>it's not an issue with bs4, it's doing exactly what it it should based on the html it's getting. If you you look at the html (NOT IN DEV TOOLS, but rather the <code>res.text</code>), it has a src url for the first 3, then there is None until the 11th element, which is the first image again. And thats the way the html is, the page is dynamic.</p>
<p>There is actually a better way to get the images by accessing the api. I altered the code a little bit as well to hopefully clear it up a bit. I also only tested it quickly, but hopefully it gets you going:</p>
<pre><code>import requests
import webbrowser
import math
import os

query=(input("What type of images would you like? "))


req_url = 'https://unsplash.com/napi/search/photos'

params = {
'query': query,
'xp': '',
'per_page': '30',
'page': '1'}

jsonObj = requests.get(req_url, params = params).json()

numb=int(input('There are %s "%s" images.\nHow many images do you want to save? ' %(jsonObj['total'], query))) 
pages = list(range(1,math.ceil(numb/30)+1))
max_allowed = 50


fileNames = []
count = 1
for page in pages:
    params = {
            'query': query,
            'xp': '',
            'per_page': '30',
            'page': page}

    jsonObj = requests.get(req_url, params = params).json()
    for item in jsonObj['results']:
        pic_url = item['urls']['raw']
        webbrowser.open(item['urls']['raw'])

        valid_ans = False
        while valid_ans == False:
            ans = input("Do you want to save it? (y/n) ")
            if ans.lower() == "y":
                name=input("How to name it? ")
                fileName=name+".jpg"
                fileNames.append(fileName)
                print ("Saving " + fileName + " to the hard drive")
                with open(os.path.join("wallpapers",fileName), 'wb') as handle:
                    response = requests.get(pic_url, stream=True)
                    if not response.ok:
                        print (response)
                    for chunk in response.iter_content(100000):
                        handle.write(chunk)                
                valid_ans = True

            elif ans.lower() == "n":
                valid_ans = True
                pass

            else:
                print ('Invalid response.')

        count += 1
        if count &gt; numb:
            print ('Reached your desired number of %s images.' %(numb))
            break
        if count &gt; max_allowed:
            print ('Reached maximum number of %s images allowed.' %(max_allowed))
</code></pre>
</div>
<span class="comment-copy">This is all one script right? Just with a comment in the middle?</span>
<span class="comment-copy">Does <code>elemLinks</code> contain the different objects you expect, without repeats?</span>
<span class="comment-copy">ya I saw that too. The issue is dev tools is showing the page after it's rendered. <code>requests.get()</code> gets the html source before it's rendered. Thats why you sometimes can't find what you're looking for when parsing with beautifulsoup.</span>
<span class="comment-copy">and you could certainly get all that data, but like I said you'd have to allow the site to render. I usually use Selenium to do that. But unless I can find it another way, for example the way I did it here (or sometimes the data is in a json format within <code>&lt;script&gt;</code> tags), I don't use Selenium as much as I used too.</span>
<span class="comment-copy">Thanks, chittown88! Obviously I'll give it a try! But I don't get one thing - when I check tag "cat" with dev tools on Unsplash, it seems that every image has a src atribute, not only 3 of them.</span>
<span class="comment-copy">again, might just be an issue with the page being dynamic. What you see in the dev tools isn't necessarily what beautifulsoup is working with, because the html source beatufulsoup has isn't the rendered page with the full data.</span>
