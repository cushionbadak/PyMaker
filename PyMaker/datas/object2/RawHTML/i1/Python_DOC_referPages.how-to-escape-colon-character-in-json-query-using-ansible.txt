<div class="post-text" itemprop="text">
<p>Running <strong>ec2_instance_facts</strong> Ansible module and registering it to a variable called <strong>ec2</strong>. </p>
<p>I have tags on ec2 instance which has colon characters in its key name. </p>
<p>I can grab <strong>environment</strong> tag value using this:</p>
<pre><code> set_fact:
    number_of_nodes: "{{ ec2.instances|json_query('[*].tags.environment') }}"
</code></pre>
<p>But cannot grab value of <strong>"aws:lc:sg"</strong>, trying the following:</p>
<pre><code> set_fact:
    number_of_nodes: "{{ ec2.instances|json_query('[*].tags.aws:lc:sg') }}"
</code></pre>
<p>Also tried by putting \, \ , /, // characters before colon. Doesn't work. </p>
<p>Can someone help ? :(</p>
</div>
<div class="post-text" itemprop="text">
<p>When wanting to escape <code>? : -</code> the ansible docs recommend quoting them with double-quotes <code>"</code>. (docs <a href="https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html#gotchas" rel="nofollow noreferrer">here</a> In your case that's rather difficult as you should be using single quotes in the json_query filter.
You can try replacing the arguments of that filter with a var and later when you declare that var, you can use double-quotes.</p>
<pre><code> set_fact:
    number_of_nodes: "{{ ec2.instances|json_query(the_var) }}"
 vars:
    the_var: "[*].tags.aws:lc:sg"
</code></pre>
<p>I hope this helps!
Cheers!</p>
</div>
<span class="comment-copy">thank you so much. adding single quote outside and double quote inside worked for me.      ' the_var: [*]."tags.aws:lc:sg" '</span>
<span class="comment-copy">Glad to hear it!</span>
