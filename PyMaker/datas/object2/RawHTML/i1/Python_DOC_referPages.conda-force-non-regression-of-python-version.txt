<div class="post-text" itemprop="text">
<p>I am creating a conda env and specifying that I want python 3.6 inside:</p>
<pre><code>$ export PYTHON_VERSION=3.6
$ source ~/virtualenv/python2.7/bin/activate
$ python --version
Python 2.7.14
$ pip --version
pip 9.0.1 from /home/travis/virtualenv/python2.7.14/lib/python2.7/site-packages (python 2.7)
$ wget -q http://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh
$ chmod +x miniconda.sh
$ ./miniconda.sh -b -p /home/travis/miniconda
$ export PATH=/home/travis/miniconda/bin:$PATH
$ conda update --yes --quiet conda
$ conda env create --file environment.yml python=${PYTHON_VERSION}
</code></pre>
<p>However, this install python 2.7:</p>
<pre><code>conda env create --file environment.yml python=${PYTHON_VERSION}
Fetching package metadata ...........
Solving package specifications: .
... omitting some packages here 
python-2.7.16- 100% |################################| Time: 0:00:00  74.39 MB/s
... omitting some other packages
</code></pre>
<p>Here is environment.yml:</p>
<pre><code>name: my-env

dependencies:
    - ipython
    - numpy&gt;=1.12
    - seaborn&gt;=0.7
    - scipy&gt;=0.18.0
    - matplotlib&gt;=2.0.0
    - Cython&gt;=0.26
    - scikit-learn&gt;=0.20.1
    - tqdm
    - nose
    - numpydoc
    - pytest
    - pytest-cov

    - pip:
        - "https://api.github.com/repos/choldgraf/download/zipball/master"
</code></pre>
<p>What is going on? and how to impose the correct version of python?</p>
</div>
<div class="post-text" itemprop="text">
<p><strong>EDIT:</strong> Adding the wanted python version inside the <code>environment.yaml</code> downloads and installs the desirable python version.</p>
<pre><code>name: my-env

dependencies:
  - python=3.6.8
  - ipython
  - numpy&gt;=1.12
  - seaborn&gt;=0.7
  - scipy&gt;=0.18.0
  - matplotlib&gt;=2.0.0
  - Cython&gt;=0.26
  - scikit-learn&gt;=0.20.1
  - tqdm
  - nose
  - numpydoc
  - pytest
  - pytest-cov

  - pip:
    - "https://api.github.com/repos/choldgraf/download/zipball/master"
</code></pre>
<p><strong>OR</strong></p>
<ol>
<li>Create the environment with the correct python version
<code>conda install --name my-env python=${PYTHON_VERSION}</code></li>
<li>Update the environment with the <code>environment.yaml</code>
<code>conda env update --file environment.yaml</code></li>
</ol>
<p>T̶h̶e̶ ̶r̶e̶a̶s̶o̶n̶ ̶i̶s̶ ̶t̶h̶a̶t̶ ̶t̶h̶e̶ ̶M̶i̶n̶i̶c̶o̶n̶d̶a̶.̶s̶h̶ ̶y̶o̶u̶ ̶d̶o̶w̶n̶l̶o̶a̶d̶ ̶i̶s̶ ̶f̶o̶r̶ ̶P̶y̶t̶h̶o̶n̶ ̶2̶ ̶b̶u̶i̶l̶d̶ ̶a̶n̶d̶ ̶n̶o̶t̶ ̶P̶y̶t̶h̶o̶n̶ ̶3̶.̶
̶</p>
<p>̶Y̶o̶u̶ ̶w̶a̶n̶t̶ ̶t̶o̶ ̶g̶e̶t̶ ̶t̶h̶e̶ ̶M̶i̶n̶i̶c̶o̶n̶d̶a̶3̶.̶s̶h̶ ̶f̶r̶o̶m̶ ̶h̶t̶t̶p̶s̶:̶/̶/̶r̶e̶p̶o̶.̶c̶o̶n̶t̶i̶n̶u̶u̶m̶.̶i̶o̶/̶m̶i̶n̶i̶c̶o̶n̶d̶a̶/̶M̶i̶n̶i̶c̶o̶n̶d̶a̶3̶-̶l̶a̶t̶e̶s̶t̶-̶L̶i̶n̶u̶x̶-̶x̶8̶6̶_̶6̶4̶.̶s̶h̶.̶
̶</p>
<p>̶H̶o̶p̶e̶ ̶t̶h̶i̶s̶ ̶h̶e̶l̶p̶s̶.̶
̶</p>
<p>̶E̶d̶i̶t̶:̶ ̶I̶ ̶t̶h̶i̶n̶k̶ ̶t̶h̶i̶s̶ ̶w̶i̶l̶l̶ ̶s̶e̶t̶ ̶u̶p̶ ̶M̶i̶n̶i̶c̶o̶n̶d̶a̶ ̶w̶i̶t̶h̶ ̶p̶y̶t̶h̶o̶n̶ ̶3̶.̶7̶.̶ ̶Y̶o̶u̶ ̶n̶e̶e̶d̶ ̶t̶o̶ ̶m̶a̶n̶u̶a̶l̶l̶y̶ ̶c̶r̶e̶a̶t̶e̶ ̶t̶h̶e̶ ̶3̶.̶6̶ ̶e̶n̶v̶i̶r̶o̶n̶m̶e̶n̶t̶ ̶w̶i̶t̶h̶ ̶t̶h̶e̶ ̶c̶o̶m̶m̶a̶n̶d̶ ̶c̶o̶n̶d̶a̶ ̶c̶r̶e̶a̶t̶e̶ ̶-̶-̶n̶a̶m̶e̶ ̶p̶y̶t̶h̶o̶n̶3̶6̶ ̶p̶y̶t̶h̶o̶n̶=̶3̶.̶6̶.̶8̶.̶
̶</p>
<p>̶Y̶o̶u̶ ̶c̶a̶n̶ ̶r̶e̶a̶d̶ ̶m̶o̶r̶e̶ ̶a̶b̶o̶u̶t̶ ̶c̶o̶n̶d̶a̶ ̶e̶n̶v̶i̶r̶o̶n̶m̶e̶n̶t̶s̶ ̶h̶e̶r̶e̶.̶
̶</p>
</div>
<span class="comment-copy">But precisely, I am creating the environment with <code>conda env create --file environment.yml python=${PYTHON_VERSION}</code>. Why is python2.7 used ?</span>
<span class="comment-copy">The thing is, I also need to isntall an env with python2. I have just tested, if I use miniconda3, then the env supposed to use python2 installs python3 too.</span>
<span class="comment-copy">I thought you wanted to get Miniconda 3. The explicit command conda create -n python36 python=3.6.8 works when creating from miniconda2 a python 3 env for me.</span>
<span class="comment-copy">I need both. This is for Travis automated testing. It also works locally for me.</span>
<span class="comment-copy">May also be worth noting that if you create the env first with your specific Python version, then you can additionally <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-pkgs.html#preventing-packages-from-updating-pinning" rel="nofollow noreferrer">pin that version</a> to be extra careful that future installs/updates won't trigger a change.</span>
