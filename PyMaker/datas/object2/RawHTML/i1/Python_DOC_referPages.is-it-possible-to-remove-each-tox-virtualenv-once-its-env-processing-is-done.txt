<div class="post-text" itemprop="text">
<p>Is it possible to remove each Tox virtualenv once its env processing  is done?
I know, this is a weird usage, but I have a Tox configuration with hundreds of environment.</p>
<p>I want to run them one by one, but is it possible to remove each virtualenv once its processing is done?</p>
</div>
<div class="post-text" itemprop="text">
<p>There is no way to do this with configuration. You need to remove the environment from the commands of the environment; the path is <a href="https://tox.readthedocs.io/en/latest/config.html#substitutions-for-virtualenv-related-sections" rel="nofollow noreferrer">{envdir}</a>. And you have to whitelist the program that removes directories. Something like this:</p>
<pre><code>[testenv]
commands =
    {envpython} --version
    {envpython} -c "import struct; print(struct.calcsize('P') * 8)"
    rm -rf {envdir}
whitelist_externals =
    rm
</code></pre>
</div>
<span class="comment-copy"><code>rm .tox/{envname}</code> might just work if you place it at the end of your <code>commands</code>.</span>
<span class="comment-copy">It works! I used <code>/bin/rm</code> instead of <code>rm</code> in <i>whitelist_externals</i>. And used <code>commands_post</code> for <code>/bin/rm -rf {envdir}</code>.</span>
