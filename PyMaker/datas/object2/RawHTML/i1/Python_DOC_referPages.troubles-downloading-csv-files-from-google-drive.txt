<div class="post-text" itemprop="text">
<p>I think i'm failing to understand what i'm doing wrong. I have connected to the Google Drive API and now I would like to read a few documents on my Google drive with the objective of analysing the data contained in these csv files.</p>
<p>This is the code I have:</p>
<pre><code>from __future__ import print_function
import pickle
import os.path
from httplib2 import Http
from googleapiclient.discovery import build
from google_auth_oauthlib.flow import InstalledAppFlow
from google.auth.transport.requests import Request
os.environ["GOOGLE_APPLICATION_CREDENTIALS"] = "/Users/emmanuelsibanda/credentials.json"
# If modifying these scopes, delete the file token.pickle.
SCOPES = ['https://www.googleapis.com/auth/drive.metadata.readonly']
creds = None
if os.path.exists('token.pickle'):
  with open('token.pickle', 'rb') as token:
    creds = pickle.load(token)
    # If there are no (valid) credentials available, let the user log in.
    if not creds or not creds.valid:
        if creds and creds.expired and creds.refresh_token:
            creds.refresh(Request())
        else:
            flow = InstalledAppFlow.from_client_secrets_file(
                'credentials.json', SCOPES)
            creds = flow.run_local_server()
        # Save the credentials for the next run
        with open('token.pickle', 'wb') as token:
            pickle.dump(creds, token)

    service = build('drive', 'v3', credentials=creds)

def gdrive_download(file_id):
  request = service.files().get(fileId=file_id)
  return request.execute()
a = gdrive_download('19sPsANUblhXkb3nZVy4PMrfUyOSoF_uQ')
</code></pre>
<p>Just to reiterate I would like to download a few csv files  and then proceed to read the files.</p>
</div>
<div class="post-text" itemprop="text">
<p>In Drive, a File's metadata is separate from its content. You have asked for <code>metadata.readonly</code> scope, which unsurprisingly only allows access to the metadata. Your call to <code>files().get</code> then gets the metadata.</p>
<p>To get the content, you will firstly need to choose a more permissive scope. Then you will fetch the content. How you do this depends on whether the file is a binary file, or a Google document (eg. a spreadsheet).</p>
<p>A binary file can be downloaded by adding <code>alt=media</code> to the URL. </p>
<p>A Google file can be exported by adding <code>/export?mimeType=text/csv</code> to the URL.</p>
<p>See <a href="https://developers.google.com/drive/api/v3/manage-downloads" rel="nofollow noreferrer">https://developers.google.com/drive/api/v3/manage-downloads</a> for details and code samples.</p>
</div>
<span class="comment-copy">Show your error</span>
<span class="comment-copy">What is not working with the code you have now?</span>
<span class="comment-copy">I guess the confusion on my part is reading the data in the the file. From what I see I only have the file's ID, file name etc but not the actual contents of the file</span>
