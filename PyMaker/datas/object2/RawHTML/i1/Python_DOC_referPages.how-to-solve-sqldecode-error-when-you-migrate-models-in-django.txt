<div class="post-text" itemprop="text">
<p>I am new to django, I have created a project and app and I would like to connect my project to the mongodb. when I enter <code>python manage.py migrate</code> command , I am getting below mentioned error.</p>
<p>I have dropped database and cleared all migrations in the django_migration table and deleted migration files in the created migrations folder. Still getting same error. </p>
<p>Please help me with this. Thanks in advance</p>
<p>Error:</p>
<pre><code>    raise TypeError("documents must be a non-empty list")
TypeError: documents must be a non-empty list
</code></pre>
<p>The above exception was the direct cause of the following exception:</p>
<pre><code>djongo.sql2mongo.SQLDecodeError: FAILED SQL: INSERT INTO "django_migrations" ("app", "name", "applied") VALUES (%(0)s, %(1)s, %(2)s)
    Version: 1.2.31
</code></pre>
<p>Settings.py</p>
<pre><code>DATABASES = {
    'default': {
        'ENGINE': 'djongo',
        'NAME': 'DB_name',
        'HOST':'localhost',
        # 'PORT': 27017,
        # 'USER':'',
        # 'PASSWORD':''
    },
</code></pre>
<p>models.py</p>
<pre><code>from django.db import models

# Create your models here.
class dummy(models.Model):

    name= models.CharField(max_length=100, blank=True, null= True)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I have the same issue with u, I tried with sqlite3 as the database, and the data is just like this:</p>
<p><a href="https://i.stack.imgur.com/T3b4y.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/T3b4y.png"/></a></p>
<p>so the data is not empty!!</p>
<p>And I tried to change the sql command as follow(line 760 at sql2mongo\query.py):</p>
<pre><code>statement = statement[0]
    sm_type = statement.get_type()
    if sm_type=='INSERT':
        self._sql = 'INSERT INTO "django_migrations" ("app", "name", "applied") VALUES ("test", "windy", "2019-03-15 12:00")'
</code></pre>
<p>but still failed.</p>
</div>
<div class="post-text" itemprop="text">
<p>i have solved this problem, the problem may be the version of sqlparse -- sqlparse 0.2.4 works well, but sqlparse 0.3.0 not.</p>
<p>pip install sqlparse==0.2.4 --user</p>
<p>It worked to me, good luck!!!</p>
</div>
<div class="post-text" itemprop="text">
<p>Just install sqlprase can solve this.</p>
<p>Download it
<a href="https://github.com/andialbrecht/sqlparse/releases" rel="nofollow noreferrer">github sqlprase</a></p>
<p>pip install filename.zip!!</p>
</div>
<span class="comment-copy">The actual <code>TypeError: documents must be a non-empty list</code> is from the pymongo driver and means what it says, as it got an "empty list" when it expected input. Did you actually run a <code>python manage.py makemigrations</code> first? Because the error seems to indicate there's "nothing to do". You said you "deleted", but AFIAK you still need to run the <code>makemigrations</code> first.</span>
<span class="comment-copy">I did <code>python manage.py makemigrations</code>  first then run <code>python manage.py migrate</code> , still no luck</span>
