<div class="post-text" itemprop="text">
<p>Remove NaN values from the nested dictionary in python. My nested dictionary looks like below:</p>
<pre><code>my_dict = {'abc':{'a':0.987, 'b':0.765, 'c': numpy.nan}, 'mda':{'a':0.145, 'b':0.584, 'e':numpy.nan}, 'fop':{'a':0.145, 'b': numpy.nan, 'c':0.485}}
</code></pre>
<p>I want to drop Nan values from the nested dictioanry, expected result looks like:</p>
<pre><code>my_dict = {'abc':{'a':0.987, 'b':0.765}, 'mda':{'a':0.145, 'b':0.584}, 'fop':{'a':0.145, 'c':0.485}}
</code></pre>
<p>i have written below code to remove Nan's from the nested dictionary:</p>
<pre><code>def remove_nan_from_dict(my_dict):
    new_dict = {}
    original_dict = collections.defaultdict()
    from math import isnan
    for k, v in my_dict.items():
        for k1, v1 in v.items():
            print(v1)
            if not isnan(v1):
                new_dict[k1] = v1
            print(new_dict)
        original_dict[k] = new_dict
        # print(original_dict.items())
    return original_dict
</code></pre>
<p>But getting below dictionary:</p>
<pre><code>defaultdict(None, {'abc': {'a': 0.145, 'b': 0.584, 'c': 0.485}, 'mda': {'a': 0.145, 'b': 0.584, 'c': 0.485}, 'fop': {'a': 0.145, 'b': 0.584, 'c': 0.485}})
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can just use a dict comprehension here and check if the value is an <code>np.nan</code>:</p>
<pre class="lang-py prettyprint-override"><code>
new_dict = {k: {a: b for a, b in v.items() if not np.isnan(b)} for k, v in my_dict.items()}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use 2 simple loops like this:</p>
<pre><code>my_dict = {'abc':{'a':0.987, 'b':0.765, 'c': numpy.nan}, 'mda':{'a':0.145, 'b':0.584, 'e':numpy.nan}, 'fop':{'a':0.145, 'b': numpy.nan, 'c':0.485}}

for items in my_dict:

    get_key = my_dict[items]

    for key, values in get_key.copy().items():
        if numpy.isnan(values):
            del get_key[key]
my_dict
&gt; {'abc': {'a': 0.987, 'b': 0.765},
 'mda': {'a': 0.145, 'b': 0.584},
 'fop': {'a': 0.145, 'c': 0.485}}
</code></pre>
</div>
<span class="comment-copy">will it only even have 1 dictionary inside a dictionary? Or could we have triple nested dictionaries?</span>
