<div class="post-text" itemprop="text">
<p>Is it possible to have two stacked bar charts side by side each of them coming from a single column?</p>
<p>Here's my df:</p>
<pre><code>Field       Issue

Police      Budget cuts
Research    Budget cuts
Police      Time consuming
Banking     Lack of support
Healthcare  Lack of support
Research    Bureaucracy
Healthcare  Bureaucracy
Banking     Budget cuts
</code></pre>
<p>I want a stacked bar chart of Field next to a stacked bar chart of issues by field. </p>
<p>Thanks guys!</p>
</div>
<div class="post-text" itemprop="text">
<p>For an example on how to make a stacked bar chart with the specific dataset provided, take a look at the suggestion in <a href="https://stackoverflow.com/questions/55238122/plotly-dash-want-two-stacked-bar-charts-side-by-side-from-single-df-column/55240155#55240155">Plotly-Dash: Want two stacked bar charts side by side from single df column</a>. The following answer addresses how you <strong>can not</strong> make a stacked bar chart with a <strong><em>single trace</em></strong>. To show you how, I'll start with what may seem like redundant details. But hopefully everything will be clear in the end.</p>
<hr/>
<p>In plotly terms, <code>trace</code> is a term used to describe a <code>graph object</code> such as <code>Scatter</code> or <code>Bar</code> like in the snippet below.</p>
<p><strong>Snippet 1:</strong></p>
<pre><code>import plotly.plotly as py
import plotly.graph_objs as go
from plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot
init_notebook_mode(connected=True)

data = [go.Bar(
            x=['CategoryA', 'CategoryB', 'CategoryC'],
            y=[20, 14, 23]
    )]

iplot(data)
</code></pre>
<p>If you look at the snippet above, you'll see that <strong>that</strong> is a bar chart with a single trace in the form of <code>go.Bar(x=['CategoryA',...</code>. </p>
<p><strong>Plot 1.1:</strong></p>
<p><a href="https://i.stack.imgur.com/JhiEY.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/JhiEY.png"/></a></p>
<p>Now, how can we add something to make it a <code>stacked chart</code>? If you start out by adding an element to <code>x</code> like <code>'CategoryD'</code>, thne <strong><em>nothing</em></strong> happens. And that's a bit interesting since you'd might expect an error message instead.</p>
<p><strong>Plot 1.2:</strong> Added x value</p>
<p><a href="https://i.stack.imgur.com/ixe3M.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/ixe3M.png"/></a></p>
<p>But nothing happens before <code>CategoryD</code> has a corresponding y value like <code>15</code>:</p>
<p><strong>Plot 1.3:</strong> Added x and y value</p>
<p>Conclusiong so far: Adding values to <code>x</code> and <code>y</code> will add another category on the x-axis and a value on the y-axis. As you can see, nothing is getting <code>stacked</code> here quite yet:</p>
<p><a href="https://i.stack.imgur.com/3fowS.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/3fowS.png"/></a></p>
<p>But what if you add a layout term with <code>barmode='stack'</code>?</p>
<hr/>
<p><strong>Snippet 2:</strong></p>
<pre><code>import plotly.plotly as py
import plotly.graph_objs as go
from plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot
init_notebook_mode(connected=True)

data = [go.Bar(x=['CategoryA', 'CategoryB', 'CategoryC', 'CategoryD'],
               y=[20, 14, 23, 15])]

layout = go.Layout(barmode='stack', title = 'Stacked bar chart')

fig = go.Figure(data=data, layout=layout)
iplot(fig)
</code></pre>
<p><strong>Plot 2:</strong> barmode='stack'</p>
<p><a href="https://i.stack.imgur.com/bhZ5K.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/bhZ5K.png"/></a></p>
<p>I can understand anyone hoping that this would stack all data within a single trace, but plotly just doesn't seem to be built that way. To get what you need, you'll have to add another trace or <code>go.Bar()</code> object like this:</p>
<p><strong>Snippet 3:</strong></p>
<pre><code>import plotly.plotly as py
import plotly.graph_objs as go
from plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot
init_notebook_mode(connected=True)

data = [go.Bar(x=['CategoryA', 'CategoryB', 'CategoryC', 'CategoryD'],
               y=[20, 14, 23, 15]),

       go.Bar(x=['CategoryA', 'CategoryB', 'CategoryC', 'CategoryD'],
               y=[5, 14, 4, 20])]

layout = go.Layout(barmode='stack', title = 'Stacked bar chart')

fig = go.Figure(data=data, layout=layout)
iplot(fig)
</code></pre>
<p><strong>Plot 3:</strong> Add trace</p>
<p><a href="https://i.stack.imgur.com/YaPps.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/YaPps.png"/></a></p>
<p>Notice that neither of the <code>go.Bar()</code> objects have had any name assigned to them, and that plotly by default names them <code>trace 0</code> and <code>trace 1</code>. So I guess it's more correct to say that a trace contains or 'shows a plotly graph object rather than calling them the same thing. If you'd like to specify other names, you can do so with, for example, <code>name = 'segment 1'</code> like this:</p>
<p><strong>Snippet 4:</strong></p>
<pre><code>import plotly.plotly as py
import plotly.graph_objs as go
from plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot
init_notebook_mode(connected=True)

data = [go.Bar(x=['CategoryA', 'CategoryB', 'CategoryC', 'CategoryD'],
               y=[20, 14, 23, 15], name = 'segment 1'),

       go.Bar(x=['CategoryA', 'CategoryB', 'CategoryC', 'CategoryD'],
               y=[5, 14, 4, 20], name = "segment 2")]

layout = go.Layout(barmode='stack', title = 'Stacked bar chart')

fig = go.Figure(data=data, layout=layout)
iplot(fig)
</code></pre>
<p><strong>Plot 4:</strong> Add named traces</p>
<p><a href="https://i.stack.imgur.com/y3H4v.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/y3H4v.png"/></a></p>
<p>If you'd like to 'unstack' your bars, just change barmode to 'group' like this:</p>
<pre><code>layout = go.Layout(barmode='group', title = 'Stacked bar chart')
</code></pre>
<p><strong>Plot 5:</strong></p>
<p><a href="https://i.stack.imgur.com/nfeIp.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/nfeIp.png"/></a></p>
</div>
<span class="comment-copy">I've got a few questions. Would you mind if we moved the conversation to chat?</span>
<span class="comment-copy">thanks for breaking this down!</span>
