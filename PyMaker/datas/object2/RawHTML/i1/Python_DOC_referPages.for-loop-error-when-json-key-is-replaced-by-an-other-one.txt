<div class="post-text" itemprop="text">
<p>I've made a for loop to find keys in a Json file, I've got an issue when the <code>price</code> key is replaced by 'price_calendar' key.<br/>
It appears when the customer doesn't put price in his ad.<br/>
I'm tring to go over this error with an if statement but it doesn't work.<br/>
If anyone can explain why it doesn't work.</p>
<pre><code>response = requests.post(url, headers=headers, 
data=json.dumps(payload))
status = response.status_code
result = response.json()
ads = result['ads']

for ad in ads: 
  id = ad['list_id']
  print(id)
  title = ad['subject']
  print(title)
  url = ad['url']
  print(url)
  if ad['price'][0] not in ads:
    print ('No price')
  else:
    price = ad['price'][0]
    print (price,"$")
  date = ad['first_publication_date']
  print(date)
</code></pre>
<hr/>
<p>Error : </p>
<pre><code>Exception has occurred: KeyError 'price'
</code></pre>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>you need to check existence of key in dict you are looking value based on that key</p>
<p>you shouldn't override build in <code>id()</code> function </p>
<pre><code>for ad in ads: 
  id = ad['list_id']
  print(id)
  title = ad['subject']
  print(title)
  url = ad['url']
  print(url)

  #if 'price' not in ad.keys() or ad['price'][0] not in ads:
  #    print ('No price')
</code></pre>
<p>changed due to task context where question owner wants only to check if price is in dict keys</p>
<pre><code>  if 'price' not in ad.keys():
    print ('No price')

  else:
    price = ad['price'][0]
    print (price,"$")
  date = ad['first_publication_date']
  print(date)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>if ad['price'][0] not in ads:
</code></pre>
<p>already looks up <code>ad['price']</code>, so if there is no <code>price</code> at all in the dictionary, <code>ad['price']</code> won't be valid and so it causes a key error.</p>
<p>Check</p>
<pre><code>if 'price' not in ads:
</code></pre>
<p>Instead.</p>
</div>
<span class="comment-copy">When I try your code, It almost works but this code go trough the if statement and put ('no price') on each ads. It works when I change your if statement by this :  if 'price' not in ad.keys():  print ('No price') Thanks a lot</span>
<span class="comment-copy">no problem remember to rename id value for something not overriding build-in functions</span>
