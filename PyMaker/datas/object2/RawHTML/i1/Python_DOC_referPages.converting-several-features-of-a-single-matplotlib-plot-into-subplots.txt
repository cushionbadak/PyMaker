<div class="post-text" itemprop="text">
<p>The following snippet allows me to plot a x-axis-datetime dataframe with some convenience:</p>
<pre><code>import pandas as pd
import matplotlib

matplotlib.use('QT5Agg')
font = {'family': 'DejaVu Sans',  # 'normal',
        'size': 8}
matplotlib.rc('font', **font)
import matplotlib.pyplot as plt
import matplotlib.dates as mdates

def myMethod():
    df1 = pd.DataFrame({"a": ["1989-12-31 23:59:12", "1999-12-31 23:59:13", "2009-12-31 23:59:14"], "b": [4, 5, 6]})
    df1["date"] = pd.to_datetime(df1.a)
    df1.set_index("date", inplace=True)
    df1.drop(["a"], axis=1, inplace=True)
    return df1

df1 = myMethod()
df2 = myMethod()
df3 = myMethod()

plt.rcParams["figure.dpi"] = 200
plt.xticks(rotation=20)
plt.grid()
plt.plot(df1, "-o", markersize=2)
plt.gca().fmt_xdata = lambda x: mdates.num2date(x).strftime("%Y-%m-%d %H:%M:%S")
plt.show()
</code></pre>
<ol>
<li>I see the mouse cursor position for the complete datetime value (<code>yyyy-MM-dd hh:mm:ss</code>) on the bottom left. See screenshot at the end of this post.</li>
<li>I have a grid on the canvas.</li>
<li>the xticks are rotated as specified.</li>
</ol>
<p>I would like to have also <code>df2</code> and <code>df3</code> on the canvas as subplots. Using the following code does this, but the above mentioned features are lost. How do I have to change my code to get this achieved for all three subplots?</p>
<pre><code>ax1 = plt.subplot(3, 1, 1)
ax1.plot(df1)
ax2 = plt.subplot(3, 1, 2, sharex=ax1)
ax2.plot(df2)
ax3 = plt.subplot(3, 1, 3, sharex=ax1)
ax3.plot(df3)
plt.show()
</code></pre>
<p><a href="https://i.stack.imgur.com/x7nnp.png" rel="nofollow noreferrer"><img alt="screenshot with mouse on hover x/y details" src="https://i.stack.imgur.com/x7nnp.png"/></a></p>
</div>
<div class="post-text" itemprop="text">
<p>You can directly work on the axis instances by looping over them and working with them in an object-oriented fashion. First define the 3 axis objects and then loop over them (together with DataFrames) and set the properties <em>inside the loop</em>. Below is the relevant code</p>
<hr/>
<pre><code>fig, axes = plt.subplots(3, 1, figsize=(8, 5), sharex=True)

dfs = [df1, df2, df3]

for ax, df in zip(axes, dfs):
    ax.plot(df1, "-o", markersize=8)
    plt.setp(ax.xaxis.get_majorticklabels(), rotation=20)
    ax.grid()
    plt.gca().fmt_xdata = lambda x: mdates.num2date(x).strftime("%Y-%m-%d %H:%M:%S")
plt.tight_layout()
plt.show()
</code></pre>
<p><a href="https://i.stack.imgur.com/kKcHI.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/kKcHI.png"/></a></p>
<p><strong>Doing it your way</strong></p>
<pre><code>fig = plt.figure(figsize=(8, 5))
ax1 = plt.subplot(3, 1, 1)
ax2 = plt.subplot(3, 1, 2, sharex=ax1)
ax3 = plt.subplot(3, 1, 3, sharex=ax1)

axes = [ax1, ax2, ax3]
dfs = [df1, df2, df3]

for ax, df in zip(axes, dfs):
    ax.plot(df1, "-o", markersize=8)
    plt.setp(ax.xaxis.get_majorticklabels(), rotation=20 )
    ax.grid()
    plt.gca().fmt_xdata = lambda x: mdates.num2date(x).strftime("%Y-%m-%d %H:%M:%S")
plt.tight_layout()
plt.show()
</code></pre>
</div>
<span class="comment-copy">Thank you, this is very cool and nice already.Very good! Unfortunately, I do miss the full <code>datetime</code> cursor for the upper and middle subplots. Presently, only the <code>year</code> is shown. For the lower one, the full <code>datetime</code> value is already shown.</span>
<span class="comment-copy">@user7468395: For me, only year is shown in all the three plots as you can see in my figures</span>
<span class="comment-copy">I mean the mouse on hover x/y position display at the bottom left. See edited post and also this screenshot: <a href="https://i.stack.imgur.com/x7nnp.png" rel="nofollow noreferrer">i.stack.imgur.com/x7nnp.png</a></span>
