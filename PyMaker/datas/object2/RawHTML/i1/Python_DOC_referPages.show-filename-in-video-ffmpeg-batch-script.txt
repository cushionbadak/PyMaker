<div class="post-text" itemprop="text">
<p>I have a folder with around 10 different mov files. I would like to add the filename as text on each of the videos using ffmpeg in a bat file. Could someone help me achieve this please?</p>
<p>EDIT: </p>
<p>I have tried using </p>
<pre><code>@ECHO OFF&amp;Setlocal EnableDelayedExpansion
Set INPUT=E:\\Users\\Oli\\Documents\\Projects\\v1.3.0\\downloads3
Set OUTPUT=E:\\Users\\Oli\\Documents\\Projects\\v1.3.0\\downloads3
for %%a in ("%INPUT%\*.*") DO ( 
    set "filename=%%~na"
    ffmpeg -i "%%a" -vf "drawtext=text=!fileName:.= !:x=105:y=120:fontfile=E:\\Users\\Oli\\Documents\\Projects\\v1.3.0\\downloads3\\impact.ttf:fontsize=25:fontcolor=white" -b:v 1M -r 60 -b:a 320k -ar 48000 -crf 17 "%%~na.mov"
)`
</code></pre>
<p>But it gives  me the error:</p>
<pre><code> Cannot find a valid font for the family Sans
[AVFilterGraph @ 0000026eb75a9f40] Error initializing filter 'drawtext' with args 'text=FileName1'
Error reinitializing filters!
Failed to inject frame into filter network: No such file or directory
Error while processing the decoded data for stream #0:0
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Let's get rid of the variable assignment and simply use variable expansion to set the name. Also, though it will still work, remove the secondary backslash because it is not needed and looks ugly, lastly, always wrap <code>set</code> variables for paths in double quotes. Give this a try.</p>
<pre><code>@echo off
set "INPUT=E:\Users\Oli\Documents\Projects\v1.3.0\downloads3"
set "OUTPUT=E:\Users\Oli\Documents\Projects\v1.3.0\downloads3"
for %%a in ("%INPUT%\*.*") do (
    ffmpeg -i "%%~a" -vf "drawtext=text=%%~na:x=105:y=120:fontfile=%~dp0impact.ttf:fontsize=25:fontcolor=white" -b:v 1M -r 60 -b:a 320k -ar 48000 -crf 17 "%%~na.mov"
)
</code></pre>
</div>
<span class="comment-copy">Welcome to StackOverFlow. Please take the <a href="https://stackoverflow.com/tour">Tour</a>.  Please read, <a href="https://stackoverflow.com/help/how-to-ask">How to ask a good question?</a>. Also please read <a href="https://stackoverflow.com/help/mcve">How to create a Minimal, Complete, and Verifiable example</a></span>
<span class="comment-copy">Take a look at the usage information for <code>FFmpeg</code>, possibly paying special attention to <code>DrawText</code>. Alternatively, do a site search, and you may find a <a href="https://stackoverflow.com/q/51933645">similar question</a>.</span>
<span class="comment-copy">I have followed those directions in that post you linked before but I get an error: "Cannot find a valid font for the family Sans", see edit</span>
<span class="comment-copy">Batch files do not use double slashes for file paths.</span>
<span class="comment-copy">Technically we've answered your question by providing a batch file solution, <i>despite your lack of effort</i>. Issues with your chosen font and/or other options  should be for you to adjust beyond that. BTW, based on your output, I see no need for you to have used, delayed expansion and set a <code>filename</code> variable, because it was included only to replace any periods in file names with spaces, and yours didn't have any. You could therefore remove <code>&amp;Setlocal EnableDelayedExpansion</code>, remove <code>set "filename=%%~na"</code>, and replace <code>!fileName:.= !</code> with <code>%%~na</code>.</span>
<span class="comment-copy">Hi there, I'm still getting the exact same error as in my edited post. It seems like it cant find the font file even though it's in the same directory as the batch script?</span>
<span class="comment-copy">So this <code>E:\Users\Oli\Documents\Projects\v1.3.0\downloads3` is the exact path as where both the font file </code>impact.ttf` and the batch file is located? why not replace <code>E:\Users\Oli\Documents\Projects\v1.3.0\downloads3\impact.ttf</code> with <code>"%~dp0impact.ttf</code> will update the answer as well.</span>
