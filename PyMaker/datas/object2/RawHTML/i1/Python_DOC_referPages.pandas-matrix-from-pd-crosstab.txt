<div class="post-text" itemprop="text">
<p>I'm progressively learning pandas, I figured out that <code>pd.crosstab()</code> can do marvels but I've hard time to make it work in that case.</p>
<p>I have a list of objects <code>obj</code> tagged with an int, I want to have the matrix of the objects sharing the same tag (1 if it's the same, 0 else)</p>
<pre><code>| obj | tag |
|-----|-----|
| a   | 0   |
| b   | 2   |
| c   | 1   |
| ... | ... |
| z   | 2   |
</code></pre>
<p>-&gt;</p>
<pre><code>|     | a | b | c | ... | z |
|-----|---|---|---|-----|---|
| a   | 1 | 0 | 0 | .   | 0 |
| b   | 0 | 1 | 0 | .   | 1 |
| c   | 0 | 0 | 1 | .   | 0 |
| ... | . | . | . | .   | 0 |
| z   | 0 | 1 | 0 | 0   | 1 |
</code></pre>
<p>There are some <code>for</code>midables ways to do it, is there one more panda-friendly ?</p>
<p>PS : Tried with <code>pd.crosstab(df.obj, df.obj, values=df.tag, aggfunc=[np.sum])</code> but NaN filled.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.merge.html" rel="nofollow noreferrer"><code>merge</code></a> with <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.crosstab.html" rel="nofollow noreferrer"><code>crosstab</code></a> and <a href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.rename_axis.html" rel="nofollow noreferrer"><code>DataFrame.rename_axis</code></a>:</p>
<pre><code>df = df.merge(df, on='tag')
df = pd.crosstab(df.obj_x, df.obj_y).rename_axis(None).rename_axis(None, axis=1)
print (df)
   a  b  c  z
a  1  0  0  0
b  0  1  0  1
c  0  0  1  0
z  0  1  0  1
</code></pre>
</div>
<span class="comment-copy">Thanks @jezrael ! That did the trick. I'll keep in mind the merge func</span>
