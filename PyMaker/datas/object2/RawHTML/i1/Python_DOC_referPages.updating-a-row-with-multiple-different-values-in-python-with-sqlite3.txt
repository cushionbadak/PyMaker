<div class="post-text" itemprop="text">
<p>I have looked at many similar sources to this question but can't seem to find an answer that solves my problem. </p>
<p>I am using python3.7.1 and sqlite3 to essentially create quizzes. I have an array of questions which I have inserted into a table, with a 'Class_name' and 'quizNumber' using this code example:</p>
<pre><code>quizQuestion = ['1 + 1 =', '2 + 2 =', '3 + 3 =',...]
quizNumber = (1)
quizClass = ('6D')

for question in quizQuestions:
    cursor.execute( "INSERT INTO set_questionsTbl (QuizNumber, Class_name, Question) VALUES (?,?,?)", (quizNumber,quizClass,question))
</code></pre>
<p>This code works fine and the table(set_questionsTbl) looks like this:</p>
<pre><code>QuizNumber | Class_name | Question | Answer 
-------------------------------------------
1          | 6D         | 1 + 1 =  | 
1          | 6D         | 2 + 2 =  |
1          | 6D         | 3 + 3 =  |

etc..
</code></pre>
<p>I also have an array of answers:</p>
<pre><code>quizAnswers = [2,4,6,...]
</code></pre>
<p>The problem that occurs is when trying to update the table with the answers so it looks like this:</p>
<pre><code>QuizNumber | Class_name | Question | Answer 
-------------------------------------------
1          | 6D         | 1 + 1 =  | 2
1          | 6D         | 2 + 2 =  | 4
1          | 6D         | 3 + 3 =  | 6
etc...
</code></pre>
<p>The code I tried was this:</p>
<pre><code>for answer in quizAnswers:
    cursor.execute("UPDATE set_questionsTbl SET Answer = (?) ", (answer,))
</code></pre>
<p>This didn't work as with every loop the previous inputted answer got overwritten leaving me with this:</p>
<pre><code>QuizNumber | Class_name | Question | Answer 
-------------------------------------------
1          | 6D         | 1 + 1 =  | 6
1          | 6D         | 2 + 2 =  | 6
1          | 6D         | 3 + 3 =  | 6
etc...
</code></pre>
<p>I have also tried joining the loops together but that doesn't work, table looks like:</p>
<pre><code>QuizNumber | Class_name | Question | Answer 
-------------------------------------------
1          | 6D         | 1 + 1 =  | 2
1          | 6D         | 2 + 2 =  | 2
1          | 6D         | 3 + 3 =  | 2
1          | 6D         | 1 + 1 =  | 4
1          | 6D         | 2 + 2 =  | 4
1          | 6D         | 3 + 3 =  | 4
1          | 6D         | 1 + 1 =  | 6
1          | 6D         | 2 + 2 =  | 6
1          | 6D         | 3 + 3 =  | 6
</code></pre>
<p>I have tried to correct this many times and searched many different examples but couldn't seem to find a solution. So how do I loop through each question and update the answer with each answer in quizAnswers?</p>
<p>I am new to stack overflow so I may have missed a question similar to this, if so please link it. </p>
</div>
<div class="post-text" itemprop="text">
<p>The point you are missing is, that you instruct your database to update <em>all</em> records with the answer in the current iteration of the loop.<br/>Your example:</p>
<pre><code>quizAnswers = [2,4,6]
for answer in quizAnswers:
    cursor.execute("UPDATE set_questionsTbl SET Answer = (?) ", (answer,))
</code></pre>
<p>basically does:<br/></p>
<pre><code>set Answer for *all* records to 2
set Answer for *all* records to 4
set Answer for *all* records to 6
</code></pre>
<p>Your database does not understand the meaning of the data you put into the tables. For the DB, the questions you inserted into the <code>Question</code> column of your <code>set_questionsTbl</code> are just sequences of characters. It has no means of evaluating the equation in <code>Question</code> in order to set a value in <code>Answer</code> only if that value is the result of the equation.</p>
<p>You need to tell your DB which answer to set for which question(s).
You need to give your query criteria, that a record must meet for the update operation to be applied to it. That's what <a href="https://en.wikipedia.org/wiki/Where_(SQL)" rel="nofollow noreferrer">WHERE clauses</a> are for.</p>
<p>Following your example, you'll want to create a correlation between questions and their respective answers. The below is <em>one</em> way to do that.</p>
<p>First, create a list of tuples. Each tuple contains an answer in the first element, the second element holds the corresponding question (this needs to be the exact value you inserted into the <code>Question</code> column).</p>
<pre><code>quiz_question_answers = [(2, '1 + 1 ='), (4, '2 + 2 ='), (6, '3 + 3 =')] 
</code></pre>
<p>Then you can iterate over that list of tuples to execute the UPDATE query in your cursor:</p>
<pre><code>for q_a in quiz_question_answers:
    cursor.execute("UPDATE set_questionsTbl SET Answer = ? WHERE Question = ?", (q_a[0], q_a[1]))
</code></pre>
<p>This will update the answer in <em>all</em> records that have the specific equation in <code>Question</code>. Records with different <code>Class_name</code> and/or <code>QuizNumber</code> - a record like this for example:</p>
<pre><code>QuizNumber | Class_name | Question | Answer 
-------------------------------------------
4          | 5A         | 1 + 1 =  | 
</code></pre>
<p>- will be updated as well, because the only criteria, the <code>Question</code> equaling <code>1 + 1 =</code>, is met for this record also.</p>
<p>If you want the answers to be set only for questions of quiz number 1 for class 6D, you'll have to add more restrictive criteria to your query, e.g.:</p>
<pre><code>quiz_question_answers = [(2, '1 + 1 =', 1, '6D'), (4, '2 + 2 =', 1, '6D'), (6, '3 + 3 =', 1, '6D')]
for q_a in quiz_question_answers:
    cursor.execute("UPDATE set_questionsTbl "
                   "SET Answer = ? "
                   "WHERE Question = ? "
                   "AND QuizNumber = ? "
                   "AND Class_name = ?",
                   (q_a[0], q_a[1], q_a[2], q_a[3]))
</code></pre>
<p>With this particular solution (using a list of tuples with the query parameters in the correct order) you can also use <a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Cursor.executemany" rel="nofollow noreferrer"><code>executemany</code></a> to let the cursor do the loop over the list of parameter tuples for you:</p>
<pre><code>quiz_question_answers = [(2, '1 + 1 ='), (4, '2 + 2 ='), (6, '3 + 3 =')]
cursor.executemany("UPDATE set_questionsTbl SET Answer = ? WHERE Question = ?", quiz_question_answers)
</code></pre>
<p><a href="http://www.sqlitetutorial.net/sqlite-where/" rel="nofollow noreferrer">Here</a>'s some further reading on WHERE clauses specifically for SQLite.</p>
</div>
<div class="post-text" itemprop="text">
<p>You should have a unique ID for at least one of the fields in your table. That way when you execute the answer update, you could add a WHERE clause, e.g:</p>
<pre><code>    cursor.execute( "UPDATE set_questionsTbl SET answer=? WHERE unique_id=?", (answer,uniqueId))
</code></pre>
<p>and that way not all of your records will be updated.</p>
</div>
<span class="comment-copy">Please have a look at <a href="https://en.wikipedia.org/wiki/Where_(SQL)" rel="nofollow noreferrer">WHERE clauses</a>. You don't necessarily need a unique ID as the answer suggests, as long as you can come up with a set of criteria that can individually or collectively identify the record(s) you want your statement to affect. In your case, the combination of <code>QuizNumber</code>, <code>Class_name</code> and <code>Question</code> could serve as such a set.</span>
