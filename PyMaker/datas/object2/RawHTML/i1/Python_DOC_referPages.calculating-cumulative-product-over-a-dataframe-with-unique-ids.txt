<div class="post-text" itemprop="text">
<p>I am wanting to calculative the cumulative product for each date and for each unique id over a time-series of data. I am of the understanding <code>groupby</code> and <code>cumprod</code> will need to be used together. However, I am not sure of the exact syntax. </p>
<p>Here is some example data and the output wanted</p>
<pre><code>data = {'date': ['2014-05-01','2014-05-01','2014-05-01','2014-05-01',
     '2014-05-02','2014-05-02','2014-05-02','2014-05-02','2014-05-03',
     '2014-05-03','2014-05-03', '2014-05-03'],'id':[1, 2, 3, 4, 1,
     2, 3, 4, 1, 2, 3, 4],'obs': [1, 2, 3, 4, 4, 3, 2, 1, 1, 2, 3, 4]}

df = pd.DataFrame(data, columns = ['date', 'id','obs'])
df.index =df.date
del df['date']

df

            id   obs  
date               
2014-05-01   1    1    
2014-05-01   2    2    
2014-05-01   3    3    
2014-05-01   4    4    
2014-05-02   1    4    
2014-05-02   2    3    
2014-05-02   3    2    
2014-05-02   4    1    
2014-05-03   1    1    
2014-05-03   2    2    
2014-05-03   3    3    
2014-05-03   4    4    
</code></pre>
<p>New column created called cumproduct based off the values in the column obs</p>
<p>df</p>
<pre><code>            id   obs  cumproduct
date               
2014-05-01   1    1    1
2014-05-01   2    2    2
2014-05-01   3    3    3
2014-05-01   4    4    4
2014-05-02   1    4    5
2014-05-02   2    3    5
2014-05-02   3    2    5
2014-05-02   4    1    5
2014-05-03   1    1    6
2014-05-03   2    2    7
2014-05-03   3    3    8
2014-05-03   4    4    9
</code></pre>
<p>Any help would be awesome :)</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>import pandas as pd

data = {'date': ['2014-05-01', '2014-05-01', '2014-05-01', '2014-05-01',
                 '2014-05-02', '2014-05-02', '2014-05-02', '2014-05-03',
                 '2014-05-03', '2014-05-03'],
        'id': [1, 2, 3, 4, 1, 2, 3, 4, 1, 2],
        'obs': [1, 2, 3, 4, 5, 5, 5, 5, 6, 7]}

df = pd.DataFrame(data).set_index(['date', 'id']).sort_index(level='date')
df_cumprod = df.groupby('id').cumprod()
print(df_cumprod)
</code></pre>
<p>The output is then:</p>
<pre><code>               obs
date       id     
2014-05-01 1     1
           2     2
           3     3
           4     4
2014-05-02 1     5
           2    10
           3    15
2014-05-03 4    20
           1    30
           2    70
</code></pre>
<p>Note that the code and data you provide are flawed in several respects, and do not run.</p>
</div>
