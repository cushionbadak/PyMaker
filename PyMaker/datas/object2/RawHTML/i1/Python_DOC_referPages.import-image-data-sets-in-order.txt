<div class="post-text" itemprop="text">
<p>I am trying to import 3D images in-order and link the identifying labels to each folder. Currently I have the code to do this for dicom files but I am trying to work with .tiff image files also:</p>
<pre><code>data_dir = "\\tiff\\"
patients =  os.listdir(data_dir)
labels_df = pd.read_csv('\\tiff_labels.csv', index_col = 0)
IMG_PX_SIZE = 50
HM_SLICES = 20
def process_data(patient, labels_df, image_px_size = 50, hm_slices = 20, visualize = False):
    label = labels_df.at[patient, 'label']
    path = data_dir + patient
    slices = [pydicom.read_file(path + '/' + s, force = True) for s in os.listdir(path)]
    slices.sort(key = lambda x: int(x.ImagePositionPatient[2]))
</code></pre>
<p>I have tried changing lines 9 and 10 to:</p>
<pre><code>slices = [cv2.imread(path + '/' + s) for s in os.listdir(path)]
slices.sort()
</code></pre>
<p>The issue I've found is in line 10: key = lambda x: int(x.ImagePositionPatient[2]). ImagePositionPatient is an exclusive thing for dicoms and cant find a way to sort images with another way.</p>
<p>I get the error:</p>
<pre><code>Traceback (most recent call last):
  File "preprocessing_data.py", line 83, in &lt;module&gt;
    image_data, label = process_data(patient, labels_df, image_px_size = IMG_PX_SIZE, hm_slices = HM_SLICES)
  File "preprocessing_data.py", line 28, in process_data
    slices.sort()
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If you are trying to sort a list of numpy arrays, try the following:</p>
<pre><code>slices.sort(key=len)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The problem I see is that </p>
<pre><code>slices = [cv2.imread(path + '/' + s) for s in os.listdir(path)]
</code></pre>
<p>creates a list of arrays with image data only, there is no meaningful information which you can use for sorting. If you want to sort by filename, you could do:</p>
<pre><code>slices = [[s,cv2.imread(path + '/' + s)] for s in os.listdir(path)]
</code></pre>
<p>Which creates for each file you read a list with 2 entries, the first entry is the filename, the second entry is the image data. Then <code>slices.sort()</code> works out of the box. But you have to index both lists to get the image data. To access the 5th image, for example, would be <code>slices[5][1]</code>.</p>
</div>
<span class="comment-copy">Do you mean sort images by filename?</span>
<span class="comment-copy">Yes. As the code is going though each folder I want the files to be grabbed in acceding order.</span>
<span class="comment-copy">Ok, then my answer below should work for you, there I showed how to sort by filename</span>
<span class="comment-copy">I used the key = len and now I get the error: AttributeError: 'numpy.ndarray' object has no attribute 'pixel_array'</span>
