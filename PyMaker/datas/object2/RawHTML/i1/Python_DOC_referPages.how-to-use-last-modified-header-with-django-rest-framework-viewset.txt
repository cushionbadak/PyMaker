<div class="post-text" itemprop="text">
<p>Let's say I have following Django Rest Framework's ViewSet:</p>
<pre><code>from django.contrib.auth import get_user_model
from rest_framework.viewsets import ViewSet
from rest_framework.response import Response


class SubscriptionViewSet(ViewSet):
    def list(self, request):
        data = {'user_count': get_user_model().objects.count()}
        return Response(data)
</code></pre>
<p>How to use it together with <a href="https://docs.djangoproject.com/en/1.11/topics/conditional-view-processing/#shortcuts-for-only-computing-one-value" rel="nofollow noreferrer"><code>last_modified</code></a> decorator from Django? Or how to implement such functionality?</p>
</div>
<div class="post-text" itemprop="text">
<p>@jozo,</p>
<p>You can check the <a href="https://github.com/jatir/django-rest-framework-last-modified" rel="nofollow noreferrer">https://github.com/jatir/django-rest-framework-last-modified</a> django app to use the Last-Modified</p>
<p>Edit:</p>
<p>you can check the example in the test directory
<a href="https://github.com/jatir/django-rest-framework-last-modified/blob/master/tests/views.py#L14" rel="nofollow noreferrer">https://github.com/jatir/django-rest-framework-last-modified/blob/master/tests/views.py#L14</a></p>
</div>
<div class="post-text" itemprop="text">
<p>I checked package mentioned by @Makarand Bauskar. However I wasn't satisfied. It's not active and it uses custom way how to work/deal with Last-Modified header. So I decided to create new package <a href="https://github.com/jozo/django-rest-framework-condition" rel="nofollow noreferrer">django-rest-framework-condition</a> that do:</p>
<ol>
<li>Re-use implementation from Django

<ul>
<li>it will get fixes from Django</li>
<li>you can use it same way as described in Django's <a href="https://docs.djangoproject.com/en/2.2/topics/conditional-view-processing/" rel="nofollow noreferrer">docs</a></li>
</ul></li>
<li>Provide both @last_modified and @etag decorator</li>
</ol>
<p>To install it:</p>
<pre><code>pip install django-rest-framework-condition
</code></pre>
<p>Usage:</p>
<pre><code>from django.contrib.auth import get_user_model
from rest_framework.viewsets import ViewSet
from rest_framework.response import Response
from rest_framework_condition import last_modified


def my_last_modified(request, *args, **kwargs):
    return datetime(2019, 1, 1)


class SubscriptionViewSet(ViewSet):
    @last_modified(my_last_modified)
    def list(self, request):
        data = {'user_count': get_user_model().objects.count()}
        return Response(data)
</code></pre>
</div>
<span class="comment-copy">Can you provide a code example how to use it with ViewSet?</span>
