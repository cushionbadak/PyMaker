<div class="post-text" itemprop="text">
<p>I'm trying to generate a graph when i'm leaving my kivy app using matplotlib.
The process time to generate these graphs is about 20 seconds and i would like to warn the user during this time. I tried to use a Kivy pop up, and it didn't work. I tried to add a label, but it doesn't seems to work either. That's why I really need help ! </p>
<p>My code : </p>
<pre><code>    def fermerBanc(self):  

        list_argument_graph=[]
        list_argument_graph.append(passerelle.graph1.y_low_min)
        list_argument_graph.append(passerelle.graph1.y_low_max)
        list_argument_graph.append(passerelle.graph1.y_high_min)
        list_argument_graph.append(passerelle.graph1.y_high_max)
        list_argument_graph.append(passerelle.graph1.setTaille)

        list_argument_graph_1=list(list_argument_graph)
        list_argument_graph_1.insert(0, chemin1)

        list_argument_graph_2=list(list_argument_graph)
        list_argument_graph_2.insert(0, chemin2)

        list_argument_graph_3=list(list_argument_graph)
        list_argument_graph_3.insert(0, chemin3)

        list_argument_graph_4=list(list_argument_graph)
        list_argument_graph_4.insert(0, chemin4)

        if(passerelle.graph1.flagGraph):

            p1 = Process(target=process_graph, args=(list_argument_graph_1,))
            p2 = Process(target=process_graph, args=(list_argument_graph_2,))
            p3 = Process(target=process_graph, args=(list_argument_graph_3,))
            p4 = Process(target=process_graph, args=(list_argument_graph_4,))

            try:
                p1.start()
            except AttributeError:
                Logger.warning('fermerBanc: impossible de generer un graph 1, fichier vide')

            try:
                p2.start()  
                pass
            except AttributeError:
                Logger.warning('fermerBanc: impossible de generer un graph 2, fichier vide')

            try:
                p3.start()
                pass
            except AttributeError:
                Logger.warning('fermerBanc: impossible de generer un graph 3, fichier vide')

            try:
                p4.start()
                pass              
            except AttributeError:
                Logger.warning('fermerBanc: impossible de generer un graph 4, fichier vide')

            self.msgWarning = Label(text="Merci de patienter...", font_size='55sp', size=(100, 50), pos_hint={'center_x': .5, 'center_y':.5})
            self.add_widget(self.msgWarning)

            p1.join()
            p2.join()
            p3.join()
            p4.join()

        exit()
</code></pre>
<p>Edit : If I comment the several <code>process</code>and the <code>exit()</code> command my Label is displaying normally</p>
</div>
<div class="post-text" itemprop="text">
<p>Just found the solution thanks to <a href="https://stackoverflow.com/questions/42811241/kivy-how-to-display-a-widget-while-waiting-for-another-one-to-be-displayed-bot">this thread</a></p>
<p>you have to use the kivy  <code>Clock.schedule_once()</code> method : <a href="https://kivy.org/doc/stable/api-kivy.clock.html" rel="nofollow noreferrer">kivy clock doc</a></p>
<p>I my case, I just create a function fermerbanc_schedule in charge of : </p>
<ul>
<li>Displaying the waiting message on the screen </li>
<li><p>called the fermerBanc function via <code>schedule_once</code></p>
<p>def fermerBanc_schedule(self, *args):
        self.msgWarning = Label(text="Merci de patienter...", font_size='55sp', size=(100, 50), pos_hint={'center_x': .5, 'center_y':.5})
        self.add_widget(self.msgWarning)
        Clock.schedule_once(lambda dt: self.fermerBanc(self, *args), 0)</p></li>
</ul>
</div>
