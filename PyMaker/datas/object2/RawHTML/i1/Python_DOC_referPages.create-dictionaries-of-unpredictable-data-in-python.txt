<div class="post-text" itemprop="text">
<p>I wrote a python script that lists all the AWS instances in an AWS account. It gives you the public and private IP, with some other information.</p>
<p>But it fails when there are multiple nested public and private IPs in the json. I need to be able to report all public and private IPs.</p>
<p>I am new to Python. And I need to know how I can build dictionaries of the data, if the contents of the data is unpredictable.</p>
<p>For example, some instances can have as little as a few private IPs or as many as 10 or 20 of them. Same with public IPs.</p>
<p>This is what the data looks like: <a href="https://pastebin.com/Tq3Evp8T" rel="nofollow noreferrer">AWS Instance IPs</a></p>
<p>This what my code looks like so far:</p>
<pre><code>import boto3
import time
aws_account='company-prod'
session = boto3.Session(profile_name=aws_account)
ec2 = session.client("ec2")
instance_list = ec2.describe_instances()
for reservation in instance_list["Reservations"]:
        for instance in reservation.get("Instances", []):
.... print out info about the instance....
</code></pre>
<p>Full code to my script can be found here: <a href="https://pastebin.com/DnpwFTtD" rel="nofollow noreferrer">AWS List Instances</a></p>
<p>How can I build dictionaries of this data if the data varies from instance to instance?</p>
</div>
<div class="post-text" itemprop="text">
<h1>To read/write a .json in Python</h1>
<p>Reading data into Python:</p>
<pre><code>with open('inputs.json', 'r') as file: # 'r' for read-only
    my_variable = json.load(file)
</code></pre>
<p>Writing data into json:</p>
<pre><code>with open('outputs.json', 'w') as f: # 'w' for write 'w+' will create a file if not found
    json.dump(my_variable, f)
</code></pre>
<p>I imagine that when you properly load your .json file it will be easily accessed by standard Python indexing via <code>[]</code> (this is syntax is used to index lists, dictionaries, and tuples, but when indexing dictionaries you should put a key instead of an index -&gt; ['potatoes'] instead of [0])</p>
</div>
<span class="comment-copy">You stated that you have a <code>.json</code> with the data correct? If so you can just use the <code>json</code> module. I can post code of how to do so if you'd like</span>
<span class="comment-copy">Yes that's right. The AWS commands output in json. I would certainly appreciate a code example if you could. Thank you!</span>
