<div class="post-text" itemprop="text">
<p>I am using this <a href="https://github.com/logandk/serverless-wsgi#remote-command-execution" rel="nofollow noreferrer">node plugin</a> to run django management commands.</p>
<p>If I execute the command directly, it works:</p>
<pre><code>sls wsgi manage local -c "check --list-tags"
</code></pre>
<p>If I call a python script that calls it as a subprocess, It cannot find the command:</p>
<pre><code>import subprocess
proc = subprocess.Popen(['sls', 'wsgi', 'manage', 'local', '-c', '"check --list-tags"'])
(out, err) = proc.communicate()


"Traceback (most recent call last):\n  File \"/usr/local/lib/python3.6/site-packages/django/core/management/__init__.py\", line 102, in call_command\n    app_name = get_commands()[command_name]\nKeyError: 'check --list-tags'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"./wsgi_handl
    er.py\", line 89, in handler\n    management.call_command(*shlex.split(meta.get(\"data\", \"\")))\n  File \"/usr/local/lib/python3.6/site-packages/django/core/management/__init__.py\", line 104, in call_command\n    raise CommandError(\"Unknown command: %r\" % command_name)\ndjango.core.management.base.CommandError: Unknown command: 'check --list-tags'\n
    "
</code></pre>
<p>If I do a command that does not contain any whitespace it works, such as:</p>
<pre><code>subprocess.Popen(['sls', 'wsgi', 'manage', 'local', '-c', '"makemigrations"'])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>you can pass the full command as a string if you use shell=True, try that and refine it later </p>
<pre><code>proc = subprocess.Popen('sls wsgi manage local -c "check --list-tags"' shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
</code></pre>
</div>
<span class="comment-copy">have you tried proc = subprocess.Popen(['sls', 'wsgi', 'manage', 'local', '-c', '"check', '--list-tags"'])</span>
<span class="comment-copy">This throws <code>ValueError: No closing quotation</code> from shlex</span>
<span class="comment-copy">you can pass the full command as a string if you use shell=True, try that and refine it later proc = subprocess.Popen('sls wsgi manage local -c "check --list-tags"' shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)</span>
<span class="comment-copy">That did the trick, thank you!</span>
<span class="comment-copy">will post answer and you accept it then</span>
