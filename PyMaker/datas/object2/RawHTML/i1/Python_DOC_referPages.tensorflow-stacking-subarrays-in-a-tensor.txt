<div class="post-text" itemprop="text">
<p>I have a tensor that looks like:</p>
<pre><code>array([[[  1,   2,   3],
        [  3,   4,   5]],
       [[11, 22, 33],
        [33, 44, 55]]], dtype=int32)
</code></pre>
<p>I would like to concatenate/stack the values at each index in the inner array so it looks like:</p>
<pre><code>array([[[1, 3], [2, 4], [3, 5]],
       [[11, 33], [22, 44], [33, 55]]], dtype=int32)
</code></pre>
<p>I've tried various forms of tf.concat and tf.stack/tf.unstack, but can't seem to get it right. Does anyone know how to do this?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <code>tf.transpose()</code>:</p>
<pre><code># t
# array([[[ 1,  2,  3],
#         [ 3,  4,  5]],

#        [[11, 22, 33],
#         [33, 44, 55]]])

tf.transpose(t, perm=[0, 2, 1])
# array([[[ 1,  3],
#         [ 2,  4],
#         [ 3,  5]],

#        [[11, 33],
#         [22, 44],
#         [33, 55]]])
</code></pre>
</div>
<span class="comment-copy">Probably not the best idea to use numpy here unless in eager execution mode.</span>
<span class="comment-copy">@coldspeed Might be, as I never worked with tensorflow and never heard of eager execution mode... So am I right that this answer is nonsense and therefore to be deleted in this context?</span>
<span class="comment-copy">I don't want to go that far. I think you are on the right track with the transposition. You can do a little reading up and see  which tensorflow function fits in here. I think tf.transpose with similar arguments will work.</span>
<span class="comment-copy">@coldspeed If I understand <a href="https://www.tensorflow.org/api_docs/python/tf/transpose" rel="nofollow noreferrer">tensorflow.org/api_docs/python/tf/transpose</a> correct, it does, so i'll edit accordingly... Thanks for your hint.</span>
<span class="comment-copy">I would probably remove the numpy answer as that's pretty much noise but aside from that, this looks good.</span>
