<div class="post-text" itemprop="text">
<p>I would like to make screenshots each 1 minutes from the video stream. The video stream is provided as <a href="http://cam.l-invest.ru/nagatinskaya4/tracks-v1/index.m3u8" rel="nofollow noreferrer">m3u8 file</a>:</p>
<pre><code>#EXTM3U
#EXT-X-TARGETDURATION:6
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:112076
#EXT-X-PROGRAM-DATE-TIME:2019-03-19T16:16:53Z
#EXTINF:6.000, 2019/03/19/16/16/53-06000.ts
#EXTINF:6.000, 2019/03/19/16/16/59-06000.ts
#EXTINF:6.000, 2019/03/19/16/17/05-06000.ts
#EXTINF:6.000, 2019/03/19/16/17/11-06000.ts
</code></pre>
<p>I found a library to parse it - <a href="https://github.com/globocom/m3u8" rel="nofollow noreferrer">https://github.com/globocom/m3u8</a>. But I don't understand how I can convert this TS video stream to single jpeg file.
Am I supposed to </p>
<ol>
<li>download TS file</li>
<li>find needed frame </li>
<li>extract it</li>
<li>delete ts file?</li>
</ol>
<p>Should I use <a href="https://stackoverflow.com/questions/33311153/python-extracting-and-saving-video-frames">OpenCV</a> or is there any easier solution?</p>
<p>use OpenV </p>
</div>
<div class="post-text" itemprop="text">
<p>This is a job for <a href="https://ffmpeg.org/" rel="nofollow noreferrer">ffmpeg</a>.<br/>
To capture a frame from a <a href="http://cam.l-invest.ru/nagatinskaya4/tracks-v1/index.m3u8" rel="nofollow noreferrer">playlist</a> every minute, you can use:</p>
<pre><code>ffmpeg -i "http://cam.l-invest.ru/nagatinskaya4/tracks-v1/index.m3u8" -vf fps=1/60 invest.ru_%04d.jpg -hide_banner
</code></pre>
<p>The above will produce:</p>
<pre><code>invest.ru_0001.jpg
</code></pre>
<p><a href="https://i.stack.imgur.com/m3wrt.jpg" rel="nofollow noreferrer"><img alt="invest.ru_0001.jpg" src="https://i.stack.imgur.com/m3wrt.jpg"/></a></p>
<pre><code>invest.ru_0002.jpg
</code></pre>
<p><a href="https://i.stack.imgur.com/6nuno.jpg" rel="nofollow noreferrer"><img alt="invest.ru_0002.jpg" src="https://i.stack.imgur.com/6nuno.jpg"/></a></p>
<p>and so on... once every 60″</p>
<hr/>
<p><strong>Notes</strong>:</p>
<ol>
<li><p><code>invest.ru_0002.jpg</code> was taken exactly 60″ after <code>invest.ru_0001.jpg</code>, as you can see in the upper-right timestamp.</p></li>
<li><p><code>-vf</code> indicates <code>ffmpeg</code> to use a video filter <code>fps=1/60</code>, so it will extract one frame every 60″ (<a href="https://www.bugcodemaster.com/article/extract-images-frame-frame-video-file-using-ffmpeg" rel="nofollow noreferrer">src</a>).</p></li>
<li>The output format and filename structure can be changed if needed (ex: <a href="https://stackoverflow.com/a/23006062/797495"><code>%Y-%m-%d_%H-%M-%S.jpg</code></a>). Please check the <code>ffmpeg</code> <a href="https://ffmpeg.org/ffmpeg-formats.html#image2-1" rel="nofollow noreferrer">image documentation</a> for available options.</li>
</ol>
</div>
<div class="post-text" itemprop="text">
<p>I think you can use VLC to do that.</p>
<p><em>EDIT: looks very similar to <a href="https://superuser.com/questions/1379361/vlc-and-m3u8-file">https://superuser.com/questions/1379361/vlc-and-m3u8-file</a>.</em>
<em>The following answer might not work for your file format (unless higher versions of VLC work correctly ...). May be have a look to <a href="https://askubuntu.com/questions/11508/how-do-i-play-m3u8-files">this question</a> which might give you some more insight</em> </p>
<p><em>To my knowledge, VLC works fines with TS files/streams</em></p>
<hr/>
<p><strong>Once you have a TS file, you should be able to use vlc to perform your screenshots.</strong></p>
<p>According to <a href="https://forum.videolan.org/viewtopic.php?t=66941" rel="nofollow noreferrer">this link</a> and to <a href="https://stackoverflow.com/questions/22084098/vlc-screen-capture-using-terminal">this SO question and answers</a>, one can launch VLC and make it perform screen captures.
And according to <a href="https://wiki.videolan.org/VLC_HowTo/Make_thumbnails/" rel="nofollow noreferrer">VLC documentation</a>, it seems possible.</p>
<p>Should work on win/linux/mac.</p>
<p><em>I do have tested it yet, I need to reach my personal computer to do that.</em></p>
<p>Quoting:</p>
<blockquote>
<p>With new VLC versions (VLC 1.1.0 and above), the thumbnails are generated with scene video filter</p>
<p><code>vlc C:\video\to\process.mp4 --rate=1 --video-filter=scene --vout=dummy --start-time=10 --stop-time=11 --scene-format=png --scene-ratio=24 --scene-prefix=snap --scene-path=C:\path\for\snapshots\ vlc://quit</code></p>
<p>If you want to get rid of the sound you can add "--aout=dummy" next to "--vout=dummy".</p>
<p>For older VLC versions (1.0.0 and below) the same can be done with image output module</p>
<p><code>vlc C:\video\to\process.mp4 -V image --start-time 0 --stop-time 1 --image-out-format jpg --image-out-ratio 24 --image-out-prefix snap vlc://quit</code></p>
<p>What it does:</p>
<p>When VLC media player runs it 'plays' the video for one second without actually showing the video on screen, and then quits, leaving us with a file named 'snap000000.jpg', containing an image of the first frame of the video.</p>
</blockquote>
</div>
<span class="comment-copy">Do you want every image in the video, or only one image?</span>
<span class="comment-copy">One image each minute</span>
