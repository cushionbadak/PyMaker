<div class="post-text" itemprop="text">
<p>I am trying to set custom color breakpoints on a choropleth, but the scale doesn't appear to be honoring my skewed color placement.  For example:</p>
<pre><code>counties = alt.topo_feature(vega_data.us_10m.url, 'counties')

states = alt.topo_feature(vega_data.us_10m.url, 'states')

outlines = alt.Chart(states).mark_geoshape(
    stroke='black'
).project('albersUsa')

domain = [df.min()['rep_vote_change'], 0, df.max()['rep_vote_change']]
range_ = ['darkred', 'orange', 'green']
colors = alt.Chart(counties).mark_geoshape().encode(
    color=alt.Color('rep_vote_change:Q', scale=alt.Scale(domain=domain, range=range_))
).transform_lookup(
    lookup='id',
    from_=alt.LookupData(df, 'id', ['rep_vote_change'])
).project(
    type='albersUsa'
).properties(
    width=500,
    height=300
)

colors + outlines 
</code></pre>
<p>produces: </p>
<p><a href="https://i.stack.imgur.com/EK4JO.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/EK4JO.png"/></a></p>
<p>Note how the orange is not centered at 0.  How do I force the scale color to match my domain breakpoints?</p>
</div>
<div class="post-text" itemprop="text">
<p>You'll need to set the scale type to <code>"linear"</code> for it to work the way you expect. For example (using a simpler chart because you didn't provide your data):</p>
<pre><code>import altair as alt
import pandas as pd
import numpy as np

df = pd.DataFrame({
    'x': np.random.randn(100),
    'y': np.random.randn(100),
    'c': np.random.choice([-10, 0, 1], 100)
})

scale = alt.Scale(
    domain=[-10, 0, 1],
    range=['darkred', 'orange', 'green'],
    type='linear'
)

alt.Chart(df).mark_point().encode(
  x='x',
  y='y',
  color=alt.Color('c', scale=scale)
)
</code></pre>
<p><a href="https://i.stack.imgur.com/CbkY0.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/CbkY0.png"/></a></p>
<p>The linear scale type will be the default for piecewise color scales in a future release; more details at <a href="https://github.com/vega/vega-lite/issues/3980" rel="nofollow noreferrer">https://github.com/vega/vega-lite/issues/3980</a></p>
</div>
<span class="comment-copy">You are my hero.  Thank you!</span>
