<div class="post-text" itemprop="text">
<p>Getting error but User registrationform data is saving but employerformdata not get save.</p>
<p>This is error i m getting :- 
null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (18, asda, asdasd, construction, Net Pay, No, Age Based, Quarterly, Half Yearly, Yearly, null)</p>
<p>Models.py</p>
<pre><code>class EmployerUser(models.Model):
    id                              = models.AutoField(primary_key=True)
    user                            = models.ForeignKey(User,on_delete=models.CASCADE)
    company_name                    = models.CharField(max_length=20,default="")
    address                         = models.TextField(default="")
    industry                        = models.CharField(choices=INDUSTRY,max_length=20,default="")
    isSalarySacrifies               = models.CharField(max_length=20,choices=SALARYSACRIFIES,default=False)
    isNetpayRelief                  = models.CharField(max_length=20,choices=NETPAY,default=False)
    contribution_type               = models.CharField(choices=CONTRI_TYPE,max_length=20,default="")
    contribution_change_type        = models.CharField(choices=CONTRI_CHANGE_TYPE,max_length=20,default="")
    payrise_type                    = models.CharField(choices=PAYRISE,max_length=20,default="")
    bonus_type                      = models.CharField(choices=BONUS,max_length=20,default="")

    def __str__(self):
        return self.company_name
</code></pre>
<p>views.py</p>
<pre><code>def register_view(request):
next = request.GET.get('next')
form             = UserRegisterForm(request.POST or None)
profileform      = EmployerUserForm(request.POST or None)

if form.is_valid() and profileform.is_valid():
    user = form.save(commit=False)
    profile = profileform.save(commit=False)
    password = form.cleaned_data.get('password')
    user.set_password(password)
    user.save()
    profile.save()
    new_user = authenticate(email=user.email, password=password)

    login(request, new_user)
    if next:
        return redirect(next)
    return redirect('login')

context = {
    'form': form,
    'profileform': profileform,
}
return render(request, "registration/signup.html", context)
</code></pre>
<p>EmployerUserForm</p>
<pre><code>class EmployerUserForm(ModelForm):
    company_name               = forms.CharField(widget=forms.TextInput(attrs={'placeholder': 'Company Name'}))
    address                    = forms.CharField(widget=forms.TextInput(attrs={'placeholder': 'Address'}))
    industry                   = forms.ChoiceField(choices = INDUSTRY,widget=forms.Select())
    isSalarySacrifies          = forms.ChoiceField(choices=SALARYSACRIFIES,widget=forms.RadioSelect())
    isNetpayRelief             = forms.ChoiceField(widget=forms.RadioSelect(),choices=NETPAY)
    contribution_type          = forms.ChoiceField(label="Contribution Type",choices = CONTRI_TYPE,widget=forms.Select())
    contribution_change_type   = forms.ChoiceField(label="Contribution Change Rate Type",choices = CONTRI_CHANGE_TYPE,widget=forms.Select())
    payrise_type               = forms.ChoiceField(label="Payrise",choices = PAYRISE,widget=forms.Select())
    bonus_type                 = forms.ChoiceField(label="Bonus",choices = BONUS,widget=forms.Select())
    class Meta:
        model = EmployerUser
        fields = [
            'company_name',
            'address',
            'industry',
            'isSalarySacrifies',
            'isNetpayRelief',
            'contribution_type',
            'contribution_change_type',
            'payrise_type',
            'bonus_type',
            ]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>looks like you need to set the user for your employee:</p>
<p><pre><code>profile = profileform.save(commit=False)
<b>profile.user = user</b>
profile.save()</code></pre></p></div>
<span class="comment-copy">Welcome to Stack Overflow! Do you get any errors? Are you sure your code is being called correctly? Your question does not contain a question :O!</span>
<span class="comment-copy">how to do that i m new in django</span>
<span class="comment-copy">i added the code in the answer, don't you see it?</span>
<span class="comment-copy">i have already tried it but not working</span>
<span class="comment-copy">@Adityasinghrathore make sure you call <code>user.save()</code> <i>before</i> <code>profile.user = user</code> and <code>profile.save()</code>.</span>
