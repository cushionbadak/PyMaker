<div class="post-text" itemprop="text">
<p>I am trying to extract this text "NL dd ABNA ddddddddd" from string:</p>
<pre><code>IBAN NL 91ABNA0417463300
IBAN NL91ABNA0417164300
Iban: NL 69 ABNA 402032566
</code></pre>
<p>And that string may have three or more variations.</p>
<p>Yet I've only come to this:</p>
<pre><code>NL\s?\d{2}\s?[A-Z]{4}0\s?\d{9}$
</code></pre>
<p>Which matches the first two examples, but not the third.</p>
<p>See: <a href="https://regex101.com/r/zGDXa2/1" rel="nofollow noreferrer">https://regex101.com/r/zGDXa2/1</a>.</p>
<p>How can I treat it?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use the following regex:</p>
<pre><code>(?i)(?:(?&lt;=IBAN(?:[:\s]\s|\s[:\s]))NL\s?\d{2}\s?[A-Z]{4}[0 ]\s?\d{9,10})|(?:(?&lt;=IBAN[:\s])NL\s?\d{2}\s?[A-Z]{4}[0 ]\s?\d{9,10})
</code></pre>
<p><strong>demo:</strong></p>
<p><a href="https://regex101.com/r/zGDXa2/11" rel="nofollow noreferrer">https://regex101.com/r/zGDXa2/11</a></p>
<p>If you work in python you can remove the <code>(?:i)</code> and replace it by a flag <code>re.I</code> or <code>re.IGNORECASE</code></p>
<p><strong>Tested on:</strong></p>
<pre><code>Uw BTW nummer NL80
 IBAN NL 11abna0317164300asdfasf234
iBAN NL21ABNA0417134300 22
Iban: NL 29 ABNA 401422366f sdf
IBAN :NL 39 ABNA 0822416395s
IBAN:NL 39 ABNA 0822416395s
</code></pre>
<p><strong>Extracts:</strong> </p>
<pre><code>NL 11abna0317164300
NL21ABNA0417134300
NL 29 ABNA 401422366
NL 39 ABNA 0822416395
NL 39 ABNA 0822416395
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The problem in your regex101 demo is, there is an extra character in your regex after <code>$</code> so remove that and change <code>0</code> to <code>[0 ]</code> and this fixes all and starts matching your third line too. The correct regex becomes,</p>
<pre><code>NL\s?\d{2}\s?[A-Z]{4}[0 ]\s?\d{9}$
</code></pre>
<p><strong><a href="https://regex101.com/r/zGDXa2/3" rel="nofollow noreferrer">Check your updated demo</a></strong></p>
</div>
<div class="post-text" itemprop="text">
<p>You can just remove all spaces and uppercase the rest, Like this:</p>
<pre><code>iban = NL 91ABNA0417463300
iban.replace(" ", "")
iban.upper()
</code></pre>
<p>And then your regex would be:</p>
<pre><code>NL\d{2}ABNA(\d{10}|\d{9})
</code></pre>
<p>It works in <a href="https://regex101.com/r/zGDXa2/1" rel="nofollow noreferrer">https://regex101.com/r/zGDXa2/1</a></p>
</div>
<div class="post-text" itemprop="text">
<p>It's not what you want, but works.</p>
<p>IBAN has a strict format, so it's better to normalize it, and next just cut part, because everything will match regexp, as an example:</p>
<p><strong>CODE</strong></p>
<pre><code>#!/usr/bin/python3
# -*- coding: utf-8 -*-

# I'm not sure, that alphabet is correct, A-Z, 0-9
alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"


def normalize(string):
    stage1 = "".join(IBAN.split()).upper()
    stage2 = ''
    for l in stage1:
        if l in alphabet:
            stage2 = stage2 + l

    return stage2.split('IBAN')[1]


if __name__ == '__main__':

    IBAN_LIST = ['IBAN NL 91ABNA0417463300', 'IBAN NL91ABNA0417164300', 'Iban: NL 69 ABNA 402032566']

    for IBAN in IBAN_LIST:
        IBAN_normalized = normalize(IBAN)
        print(IBAN_normalized[2:4], IBAN_normalized[8:])
</code></pre>
<p><strong>OUTPUT</strong></p>
<pre><code>91 0417463300
91 0417164300
69 402032566
</code></pre>
<p>It's not a regexp, but should work faster, but if you know how to normalize better, please, help with it.</p>
</div>
<span class="comment-copy">Please put a <a href="https://stackoverflow.com/help/mcve">Minimal, Complete, and Verifiable example</a> <b>in the question</b>.</span>
<span class="comment-copy">Why don't you remove all the white spaces? That would make the regex easier. In python you can do <code>sentence = ' hello  apple'</code>, <code>sentence.replace(" ", "")</code></span>
<span class="comment-copy">I would also uppercase the strings, that way you avoid yourself including lowercase letters in the regex. Just use ` sentence.upper()`</span>
<span class="comment-copy">try this      NL.*\d{9}$           <a href="https://regex101.com/r/f9JVP2/4" rel="nofollow noreferrer">regex101.com/r/f9JVP2/4</a></span>
<span class="comment-copy">What is your desired output?</span>
