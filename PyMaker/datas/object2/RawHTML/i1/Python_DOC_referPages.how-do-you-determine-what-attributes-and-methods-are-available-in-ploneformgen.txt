<div class="post-text" itemprop="text">
<p>How can you determine the methods and attributes of objects in PloneFormGen?  I want to write some scripts for a custom field adapter and would like to know what is available.  My immediate problem comes from some online code I copied from: 
<a href="https://stackoverflow.com/questions/20923149/python-script-to-hide-ploneformgen-form-after-user-has-filled-it-out-for-plone">Python script to hide ploneformgen form after user has filled it out. (For Plone-4.3.2-64.)</a></p>
<pre><code>alreadyInDB = False
savedData = ploneformgen.savefield.getSavedFormInputForEdit()
username = request.AUTHENTICATED_USER.getId()
return {'username': 'No way man!'}
usersInDB = [x.split(',')[1] for x in savedData.split('\r\n') if len(x)&gt;0]

if username in usersInDB:
    alreadyInDB = True

if alreadyInDB:
    return {'username': 'No way man!'}
</code></pre>
<p>This is the error message I get.  </p>
<p>AttributeError: savefield </p>
<p>What I want to do is see what is available for attributes and methods and either fix this or write my own.  Any help is appreciated.</p>
<p>This is what we use:
PloneFormGen 1.7.12
Products.PFGExtendedMailAdapter 2.4</p>
<p>Plone 4.3.3 (4308)
CMF 2.2.7
Zope 2.13.22
Python 2.7.5 (default, Oct 30 2018, 23:45:53) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]
PIL 2.0.0 (Pillow)</p>
</div>
<div class="post-text" itemprop="text">
<p>Call <code>dir()</code> on an object to return a list of all available methods and attributes it has.</p>
<p>Alternatively, use <code>inspect.getsource()</code> on a function, class, class method or class attribute to return the source code associated with it.</p>
<p>Example using a pandas DataFrame object:</p>
<pre><code>&gt;&gt;&gt; from inspect import getsource
&gt;&gt;&gt; import pandas as pd
&gt;&gt;&gt; df = pd.DataFrame()
&gt;&gt;&gt; dir(df)
    # returns methods and attributes of df
    # which is an instance of a DataFrame object
&gt;&gt;&gt; getsource(pd.DataFrame.head)
    # returns source code for head attribute
    # of a DataFrame object
</code></pre>
<p>Note that <code>getsource</code> needs to access the attribute/method of the actual class (in this case <code>pd.DataFrame</code>) instead of an instance of that class (<code>df</code> in this example). So you can use <code>dir</code> first to figure out the methods/attributes, and <code>getsource</code> on a specific method/attribute afterwards to see the code.</p>
</div>
<div class="post-text" itemprop="text">
<p>PloneFormGen uses restricted Python for the TTW scripts.
You can use dir() or vars() on your objects to find out what they offer.
To see this, you probably want to print them.</p>
<p>TTW scripts are not that great to intropect.
Maybe have a look at the related code or use the debug mode to get the Form and use the real debugger there with the same methods from above to see whats going on.</p>
<p>./bin/instance debug 
Then you will have the root object of the database as 'app'.</p>
<p>Getting your form can be as sdimple as this:</p>
<pre><code>myform = app.unrestrictedTraverse('Plone/my-form')
</code></pre>
<p>Getting all form field objects (children):</p>
<pre><code>myform.objectItems()
</code></pre>
<p>Getting a specific field (including a dada save adapter object):</p>
<pre><code>myform.objectIds()
myform['adapter-id']
</code></pre>
<p>good luck ;)</p>
</div>
<div class="post-text" itemprop="text">
<p>In the code-example <code>ploneformgen</code> is the available context-variable, representing the form-folder-object and <code>savefield</code> represents the ID of the save-data-adapter living within the form-folder.</p>
<p>You need to add a save-data-adapter named <code>savefield</code>, or if one exists already change the ID in the script accordingly.</p>
</div>
<span class="comment-copy">I don't use Plone but can't you just use <code>dir()</code> on the object, like all other python objects?</span>
<span class="comment-copy">Hi Joe - can you use a debug prompt and inspect those objects (e.g. with <code>dir</code>) or maybe you can look at the source code to see what the class methods are? Also, consider asking in the forum <a href="https://community.plone.org" rel="nofollow noreferrer">community.plone.org</a></span>
