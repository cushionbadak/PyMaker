<div class="post-text" itemprop="text">
<p>Different CSV files are in different folders with user name, so i want to dynamically load a csv file by using the folder name(user_name). I am generating some analysis using the csv file.I used TextInput Glyph in bokeh but don't know, how to give this input value text to load the csv file. Is there any way to do it bokeh ? 
Below is the code, how i am loading the CSV file. 'user' in the code has to be changed dynamically depending on our input.</p>
<pre><code>from bokeh.layouts import widgetbox
from bokeh.models import CustomJS, TextInput, Paragraph
from bokeh.plotting import output_file, show

welcome_message = 'You have selected: (none)'

text_banner = Paragraph(text=welcome_message, width=200, height=100)

def callback_print(text_banner=text_banner):
    user_input = str(cb_obj.value)
    welcome_message =  user_input
    text_banner.text = welcome_message

text_input = TextInput( title="Enter operator Name:",callback=CustomJS.from_py_func(callback_print))


widg = widgetbox(text_input, text_banner)
show(widg)

data = pd.read_csv(join(dirname(__file__),'user','test1.txt'), sep=",", names=col_names,na_filter =None)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>To capture the value of <code>TextInput</code>, the <code>.on_change</code> event handler must be invoked and for that a persistent Bokeh server connection is required. In the following example, a DataTable is displayed(after few seconds) for the <code>test.csv</code> file present at the foldername(operator name) entered in TextInput. The <code>my_text_input_handler()</code> event handler function is invoked when the Operator Name is entered, and <code>new</code> is the updated value(or the value entered). We use this variable's value to replace <code>user</code> as in your code.</p>
<p><strong>Note</strong>: To run this script, you should save it to a file such as <code>test.py</code> and run it with <code>bokeh serve --show test.py</code>. This will start a bokeh server connection.</p>
<pre><code>from bokeh.layouts import widgetbox, gridplot
from bokeh.models import CustomJS, TextInput, Paragraph, DataTable, ColumnDataSource
from bokeh.plotting import curdoc
from bokeh.models.widgets import DataTable, DateFormatter, TableColumn
import os
import pandas as pd

welcome_message = 'Operator selected: (none)'

text_banner = Paragraph(text=welcome_message, width=200, height=100)

def callback_print(text_banner=text_banner):
    user_input = str(cb_obj.value)
    welcome_message =  'Operator selected: ' + user_input
    text_banner.text = welcome_message

def my_text_input_handler(attr, old, new):
    print("Previous label: " + old)
    print("Updated label: " + new)  
    basename = os.path.dirname(os.path.realpath('__file__')) 
    df = pd.read_csv(os.path.join(basename,str(new),'test.csv'), sep=",", na_filter =None)       
    Columns = [TableColumn(field=Ci, title=Ci, width=70) for Ci in df.columns]
    data_table = DataTable(columns=Columns, source=ColumnDataSource(df), width=1500)
    curdoc().add_root(gridplot([[data_table]], sizing_mode='scale_both'))

text_input = TextInput( title="Enter operator Name:",callback=CustomJS.from_py_func(callback_print))
text_input.on_change('value', my_text_input_handler)
curdoc().add_root(widgetbox(text_input, text_banner))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use os.walk() from os module, this will return all csv files from a directory.</p>
<pre><code>list_csv = []
def parse_csv(d):
    global list_csv
    for root,subdirs,files in os.walk(d):
        list_csv.extend([os.path.join(root,f) for f in files if '.csv' in f])
        for sd in subdirs:
            parse_csv(os.path.join(d,sd))
</code></pre>
<p>Also, can you please elaborate more if this doesn't help.</p>
</div>
<span class="comment-copy">Your question is not clear. Can you show some code that you've tried for TextInput Glyph in Bokeh? How you'd like to retrieve information from <code>data</code> into TextInput? It is also not clear how the dataframe looks like after you read the csv.</span>
<span class="comment-copy">I have added the code. TextInput that an user types should be added at the 'user' in loading the csv file</span>
<span class="comment-copy">So how about you replace <code>'user'</code> with the <code>text_input</code> variable?</span>
<span class="comment-copy">Tried, it's not working</span>
<span class="comment-copy">Do you get any error? If yes, please share the error</span>
<span class="comment-copy">Thank you,my problem is I am doing pandas processing on df to generate analysis(Graphs) but in the code provided by you 'df' is in the function 'my_text_handler' so, I am unable to use the df outside the function. How to use that Dataframe outside the function  ?</span>
<span class="comment-copy">You can get analysis graphs within that function, replace the logic for <code>DataTable</code> with the logic for displaying your graphs. The <code>DataTable</code> was just an example to show that the<code>my_text_input_handler</code> is invoked when the user gives the Text input and this event handler function can: read the csv into a dataframe and also display the analysis graphs(or display whatever you want with the dataframe).</span>
<span class="comment-copy">There are 6 other analysis Scripts which i am calling from the main file. Each script is using some processed variable from the main file and showing the output as separate tab layout. so, how can i write this whole thing within the function ?</span>
<span class="comment-copy">Yes, it is possible to do. Whatever you will do independently for each script, you can put that into this event handler function. Or, write another function that has the logic for all the scripts and the analysis. Then, call that function in this event handler function.</span>
<span class="comment-copy">Thank you, Got the solution,  <code>curdoc().clear()</code> will clear the previous things.</span>
<span class="comment-copy">I don't want a complete list of csv files in a directory. I want to change the Folder name dynamically  in bokeh using TextInput Glyph or some other.</span>
