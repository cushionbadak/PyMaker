<div class="post-text" itemprop="text">
<p>I have a api with a before hook. I want to patch it to my custom_function.
Any idea how do I do it? I have already patch <code>falcon.before</code> to my custom_falcon_before.</p>
<pre><code>class TestModel(MyTestCase):
    def falcon_before(self, model_exists):
        return model_exists

    def model_exists(self, req, resp, resource, params, require_exists):
        pass

    @patch("app.views.expect_model_existence", side_effect=model_exists)
    @patch("falcon.before", side_effect=falcon_before)
    def test_delete(self, falcon_before, model_exists):
        import falcon
        print(falcon_before is falcon.before)
        print(model_exists is expect_model_existence)
</code></pre>
<p>second print is <code>False</code>.</p>
<p>My API model is as below</p>
<pre><code>class SingleModel:

    @falcon.before(expect_model_existence, True)
    def on_delete(self, req, resp, model_id):
        pass
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Place <code>expect_model_existence</code> to a separate module and patch it before the <code>view.py</code> will be imported</p>
<p>Place <code>print('too late')</code> in a module that contains <code>expect_model_existence</code> to verify that everything is OK.</p>
<p>Falcon doesn't provide something more comfortable :(</p>
</div>
