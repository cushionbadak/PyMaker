<div class="post-text" itemprop="text">
<p>I want to update an object through a form in Django but before doing <code>form.save()</code> in the view I want to do some conditions about the data.</p>
<p>For example:</p>
<pre class="lang-py prettyprint-override"><code>ire = get_object_or_404(Ire, id_IRE=pk)
if request.method == 'POST':
    form = IreForm(request.POST or None, instance=ire)
    if form.is_valid():
        if ire.get_att1()==form.cleaned_data.get('att1') and ire.get_att2()==form.cleaned_data.get('att2'):
           form.save(update_fields=['type']) #just update the field type
        else:
           form.save() #create a new object
</code></pre>
<p>When I did this in my view just the first condition works but when I change the att1 or att2 in the form it does not do any changes.</p>
<p>Please help me how can I do conditions before saving!!!</p>
</div>
<div class="post-text" itemprop="text">
<p>thank you i found the solution which is storing the values of the object that i want to update befor doing the update operation :</p>
<pre><code>ire = get_object_or_404(Ire, id_IRE=pk)
**ire_att1=ire.get_att1()**
**ire_att2=ire.get_att2()**
**ire_type=ire.get_type()**

if request.method == 'POST':
  form = IreForm(request.POST or None, instance=ire)
  if form.is_valid():
    if **ire_att1**==form.cleaned_data.get('att1') and **ire_att2**==form.cleaned_data.get('att2'):
          Ire.objects.filter(id_IRE=pk).update(type=form.cleaned_data.get('type'))
    else:
          form.save()
</code></pre>
<p>this is how i solve the probleme because i found that after calling the form model the values of the object change simultaneously with what i enter even before i call form.save</p>
</div>
<span class="comment-copy">Can you please paste your code properly. Just use three backticks before the code block, and three more after the code block?</span>
<span class="comment-copy">why can you pass <code>update_fields</code> to your form's save method? Have you changed the form's <code>save()</code> method? And why do think <code>form.save()</code> creates a new object?</span>
<span class="comment-copy">When you say that when you "change att1 or att2", what are you doing? <code>form.cleaned_data['att1'] = foo</code>?</span>
<span class="comment-copy">MonoHearted it is an update form so when i click the button update it triggers the form filled with values of the object that i want to update .i have three fields in the form att1 and att2 and type  i have two divise my code to two conditions the fi</span>
<span class="comment-copy">MonoHearted it is an update form so when i click the button update it triggers the form filled with values of the object that i want to update .i have three fields in the form att1 and att2 and type so   i have two divise my code to two conditions if i change the type i have just update the type but if i change the att1 or attr2 i have to save the form so that it changes all the fields</span>
