<div class="post-text" itemprop="text">
<p>I'm trying to parse a turtle-formatted data file using RDFlib v4.2.2 in Python v3.6.5, running on OS X 10.14.3 Mojave.  Based on the initial error messages, I figured out that the turtle file is missing a vocabulary URI prefix: <code>@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;</code>.</p>
<p>If I add this one line to the header of the file, it works as expected.  But it would be nice to accomplish this without editing the data file, since it can be updated from time to time by the source.  Being a novice at things RDF and Turtle, I scanned the <a href="https://rdflib.readthedocs.io/en/stable/namespaces_and_bindings.html?highlight=namespace_manager" rel="nofollow noreferrer">RDFlib documentation</a> and decided that binding a prefix was what I wanted:</p>
<pre><code>from rdflib import Graph
g = Graph()
g.namespace_manager.bind('prefix', 'xsd:http://www.w3.org/2001/XMLSchema#')
g.parse( 'currency.ttl', format='turtle')
</code></pre>
<p>But, no joy. If it's helpful, here is the header and one sample turtle from the file, which describes different currencies, taken from the <a href="https://permid.org" rel="nofollow noreferrer">Thomson Reuters Open PermID project</a>:</p>
<pre><code>@prefix tr-common: &lt;http://permid.org/ontology/common/&gt; .
@prefix tr-currency: &lt;http://permid.org/ontology/currency/&gt; .
@prefix skos: &lt;http://www.w3.org/2004/02/skos/core#&gt; .

&lt;https://permid.org/1-500191&gt;
    a                                tr-currency:Currency ;
    tr-common:hasPermId              "500191"^^xsd:string ;
    tr-currency:decimalPlaces        "0"^^xsd:decimal ;
    tr-currency:isCurrencyOf         &lt;http://sws.geonames.org/1835841&gt; ;
    tr-currency:isISOHistorical      false ;
    tr-currency:isPrimaryCurrencyOf  &lt;http://sws.geonames.org/1835841&gt; ;
    tr-currency:iso4217              "KRW"^^xsd:string ;
    tr-currency:iso4217Numeric       "410"^^xsd:string ;
    skos:prefLabel                   "Korean (South) Won" .
</code></pre>
<p>Is it possible to supplement the prefix URI's contained in the turtle file, and if so, how?</p>
<p>I noticed that the missing vocabulary, XSD, is a integral part of the <a href="https://www.w3.org/TR/turtle/" rel="nofollow noreferrer">Turtle grammar</a> specification.  I wonder if explicitly declaring it is perhaps optional in some implementations?</p>
</div>
<div class="post-text" itemprop="text">
<p>No, the turtle snippet you posted isn't valid. XSD needs to be explicitly declared. </p>
<p>You could read the file in as a string and prepend the xsd prefix and then parse with RDFLib like:</p>
<pre><code>with open('currency.ttl') as in_file:
    ttl_str = '@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .' + in_file.read()
g.parse(data=ttl_str, format='turtle')
</code></pre>
<p>Presuming you were parsing valid turtle, there's an error in the way you are binding the xsd prefix. You want:</p>
<pre><code>from rdflib import Graph
g = Graph()
g.namespace_manager.bind('xsd', 'http://www.w3.org/2001/XMLSchema#')
g.parse( 'currency.ttl', format='turtle')
</code></pre>
<p>I would suggest having a look at the <a href="https://rdflib.readthedocs.io/en/stable/apidocs/rdflib.html#module-rdflib.namespace" rel="nofollow noreferrer">RDFLib documentation</a> regarding namespace management.</p>
<p>The XSD namespace is included with RDFLib. It's imported as:</p>
<p><code>from rdflib.namespace import XSD</code></p>
</div>
<span class="comment-copy">I like your suggested approach to prepend the missing line.  Are you saying that if my turtle file doesn't have the XSD prefix line, it can't be parsed as-is by RDFlib? But if that's true, what is the purpose of manually binding a URI vocabulary?</span>
<span class="comment-copy">Yes, without the XSD prefix line the turtle file can't be parsed. In your snippet, there is no purpose or binding the XSD prefix in this case. I included it because your original snippet had it and I wanted to show the proper way to bind it.</span>
