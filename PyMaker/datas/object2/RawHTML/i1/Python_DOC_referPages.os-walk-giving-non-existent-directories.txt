<div class="post-text" itemprop="text">
<p>I have a folder in which there are subfolders corresponding to 10 different classes, and the names of these subfolders are my labels. I came up with the following code to read the images into a Numpy array and save the labels.</p>
<pre><code>import numpy as np
import pandas as pd
import cv2
import glob
import os

x=np.empty([28,28])
y=np.empty([1,0])

for root, dirs, files in os.walk("filepath"):
    for roots in root:
        os.chdir(roots)
        images = np.array([cv2.imread(file) for file in glob.glob(roots+"/*.jpg")])
        num_of_images=images.shape[0]
        if num_of_images == 0:
            continue
        else:
            x = np.concatenate((x,images),axis=0)
            labels = np.empty([num_of_images,1])
            labels = labels.astype(str)
            #labels = get from last part of file name in roots
            #y=np.concatenate((y,labels),axis=0)
</code></pre>
<p>The error I'm getting is </p>
<blockquote>
<p>os.chdir(roots)
  FileNotFoundError: [Errno 2] No such file or directory: 'U'</p>
</blockquote>
<p>When I <code>print(root)</code> it gives the correct subfolder paths. How do I handle this error?</p>
<p>EDIT : 
Got it working by removing <code>for roots in root</code> since os.walk returns a 3 tuple for each directory where root gives us the directory paths.</p>
</div>
<div class="post-text" itemprop="text">
<p><code>root</code> will be a string; the name of the current directory of <code>os.walk</code>.</p>
<pre><code>for roots in root:
</code></pre>
<p>will iterate over that string; <code>roots</code> will iterate over <code>root</code> one character at the time... <code>os.chdir(some character)</code> will not work.</p>
</div>
<div class="post-text" itemprop="text">
<p>As <a href="https://docs.python.org/3/library/os.html#os.walk" rel="nofollow noreferrer">docs on os.walk()</a> say, first item in each 3-tuple it returns is a string.
As such, <code>for roots in root:</code> iterates over characters of the string.
You need to read carefully what kind of data structure <code>os.walk()</code> returns and restructure your script accordingly.</p>
</div>
<div class="post-text" itemprop="text">
<p>Others already pointed out what is wrong, so I will not repeat it.
I'll just add that you should use</p>
<pre><code>help(os.walk)
</code></pre>
<p>or whatever function isn't working as you expect it to, inside the interpreter before asking a question.</p>
<p>You handle this error as follows:</p>
<pre><code>import os

for root, dirs, files in os.walk(path):
    for thedir in dirs:
        p = os.path.join(root, thedir)
        os.chdir(p)
</code></pre>
</div>
<span class="comment-copy">Ah. So I should use dirs instead?</span>
<span class="comment-copy">i suggest you print out <code>root, dirs, files</code> so see what they are and then proceed with what you need. i'm not sure calling <code>os.chdir</code> while iterating over <code>os.walk</code> will work as expected...</span>
