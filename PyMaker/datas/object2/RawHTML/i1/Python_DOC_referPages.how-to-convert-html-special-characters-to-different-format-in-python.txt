<div class="post-text" itemprop="text">
<p>I am retrieving a querystring from an API but I need it in another format for a different API.  How can I use python3 to convert querystring1 so it'll be in the format given in querystring2?
What character format is querystring1 and querystring2 in? They both should decode to 'q=score:&gt;=100'.  </p>
<pre><code>querystring1 = 'q=score%3A%26amp%3Bgt%3B%3D100'

querystring2 = 'q=score%3A%3E%3D100'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The second of these is a simple encoded querystring, which can be parsed with <code>urllib.parse.unquote</code>:</p>
<pre><code>from urllib import parse
parse.unquote('q=score%3A%3E%3D100')
</code></pre>
<p>The first is trickier, because it's a querystring that (wrongly) contains double-encoded HTML entities. You need to use <code>html.unescape</code> to translate them:</p>
<pre><code>import html
html.unescape(parse.unquote('q=score%3A%26amp%3Bgt%3B%3D100'))
</code></pre>
<p>To convert version 1 to version 2, you can parse and then re-encode. Note, you need to pass it through <code>html.escape</code> <em>twice</em>; the first will translate <code>&gt;</code> to <code>&amp;gt;</code>, the second will translate that to <code>&amp;amp;gt;</code>. (To be honest, you should really look into fixing whatever API is expecting that format, it's totally broken.)</p>
<pre><code>data = parse.unquote('q=score%3A%3E%3D100')
parse.quote(html.escape(data))
</code></pre>
</div>
<span class="comment-copy">Where do these strings come from?</span>
