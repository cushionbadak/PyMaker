<div class="post-text" itemprop="text">
<p>I have a program which writes to certain files, where file name is generated on the fly and can contain special characters at random.</p>
<p>Whenever there is a <code>/</code> in these special characters, code considers it to be a OS path separator for linux.</p>
<p>How can I escape this dynamically?</p>
<p>Demonstration of what I am running into:</p>
<pre><code>import random
special_chars = "$^&amp;%*^(&amp;/"
selected = random.choice(special_chars)
#selected = "/"
with open(__file__ + "%s.txt" % selected) as f:
    f.write("Hello")
</code></pre>
<p>Runs very well when it is any other character than <code>/</code>, but when you set selected as <code>/</code>:
Error:</p>
<pre><code>Traceback (most recent call last):
  File "./a.py", line 7, in &lt;module&gt;
    with open(__file__ + "%s.txt" % selected, 'w') as f:
IOError: [Errno 20] Not a directory: './a.py/.txt'
</code></pre>
<p>python 2.7 only please.</p>
</div>
<div class="post-text" itemprop="text">
<p>As the @Nullman said, <code>/</code> is not a valid character for filenames in Linux:</p>
<pre><code>$ touch a

$ touch a/b/c.txt
touch: cannot touch 'a/b/c.txt': Not a directory
</code></pre>
<p>You should never use <code>/</code> and <code>\</code> symbols in filenames because it has many unexpected results. For example:</p>
<p><strong>Linux terminal:</strong></p>
<pre><code>$ touch a\b\c
$ ls
abc
</code></pre>
<p><strong>IPython 3:</strong></p>
<pre><code>In [1]: with open('a\b\c', 'w') as f:
   ...:     f.write(' ')
   ...:     

In [2]: ls
a?\c
</code></pre>
</div>
<span class="comment-copy"><code>/</code> is not a legal character to have in a filename</span>
<span class="comment-copy">@Nullman, I think you might be right. I didnt think of it this way.</span>
<span class="comment-copy">Anyway, if you want to replace one character, just use <a href="https://docs.python.org/3/library/stdtypes.html?highlight=str#str.replace" rel="nofollow noreferrer"><code>str.replace</code></a>, for instance <code>name.replace('/', '-')</code></span>
