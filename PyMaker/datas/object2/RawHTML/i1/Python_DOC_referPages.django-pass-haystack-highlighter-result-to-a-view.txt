<div class="post-text" itemprop="text">
<p>I am using django-haystack and I am trying to implement a way to append the page number to a pdf link in order to open it in the specific page. My goal is to open the pdf in the page where the first hit is found. I know the position of the hit in my document and the position where the page changes. For example i know that the first hit starts at character 2067 and the second page changes at character 3000, so i have to open the pdf at the second page.</p>
<p>My question is: how can i get the result of the function that finds the number of the page where the pdf should open and render it ? </p>
<p>I am thinking that the result should be something like that <code>&lt;a href="{% static 'img/sample.pdf#page={{ pageNumber }}' %}"&gt;</code> but i am open to any other suggestions. </p>
<p>P.S. I am not asking you to solve my problem. I am asking for suggestions or a constructive discussion as i am new to django.</p>
<p>Thank you in advance</p>
<p><strong>EDIT</strong></p>
<p>So after researching for a bit i did the following. I found that the highlighter class has a function that finds the position of the hits. I added a getter to that class in order to get the positions (I will change it later. For now i want to see if it is working the way i think it should). Then in my <code>views.py</code> file i added the following </p>
<pre><code>from django.shortcuts import render
from haystack.utils.highlighting import Highlighter


def getPage(request):
        pos = Highlighter.getPos()
        print (pos)
        return render(request, 'search/_result_object.html', {'pos': pos})
</code></pre>
<p>and in my html i added this </p>
<pre><code>&lt;ul&gt;
    {% for element in pos %}
        &lt;li&gt;{{ element }}&lt;/li&gt;
    {% endfor %}
&lt;/ul&gt;
</code></pre>
<p>just to print the position and see that everything works ok. But the list is empty, meaning that i get no results. Maybe something is not working the way i think it should. Any ideas?</p>
<p><strong>Edit #2</strong></p>
<p>I think that it is impossible to get the positions from the highlighter since I don't have the actual Highlighter object in order to get the positions using a getter.</p>
<p>Is there any other way to pass arguments between highlighter and a view? I managed to get the query term in my view but i don't have the text block where the query term was found nor the full text to search again for the position. In addition, i think that this approach would be slow when the program scales up.</p>
</div>
<div class="post-text" itemprop="text">
<p>I found a solution for my problem and i post it here for anyone interested in the future.</p>
<p>So, i ended up writing a new template tag called <code>findpage</code> using the highlight tag as reference. Everything needed to create a custom tag can be found <a href="https://docs.djangoproject.com/en/2.1/howto/custom-template-tags/" rel="nofollow noreferrer">here</a>. That way i can call it like this <code>{% findpage obj.content with query %}</code> and pass the query as an argument so as to find the position of the query hits in the text block. Given the page breaks and the position of the query hit in the document i can now find the exact page that i should open the pdf. The link now looks like this <code>&lt;a href= "{% static "img/sample.pdf#page=" %}{% findpage obj.content with query %}" &gt;</code>.</p>
<p>I hope that this will be useful for someone in the future. I will try to answer any question that may come up.</p>
<p>Thank everyone for their suggestions.</p>
</div>
<span class="comment-copy">What you have tried please show us</span>
<span class="comment-copy">The first part of your question (how to get the page number) sounds trivial since you already say you know which page comes next. The second part, how to link to a specific page, is indeed what you suggest, according to <a href="https://helpx.adobe.com/acrobat/kb/link-html-pdf-page-acrobat.html" rel="nofollow noreferrer">adobe</a>. So just go ahead, write the code and ask a more specific question if you hit an issue.</span>
<span class="comment-copy">@dirkgroten the first part wasn't really a question. I was just giving as much context as i could for you to better understand what i want to do. Following your suggestion i edited my post with what i tried.</span>
<span class="comment-copy"><code>print(pos)</code> in your view prints nothing?</span>
<span class="comment-copy">I don't understand the line <code>pos = Highlighter.getPos()</code>. Is that the exact code you are using? I would expect that to crash since <code>Highlighter</code> doesn't have an attribute <code>getPos</code>. So show us the code you use to get <code>pos</code>.</span>
