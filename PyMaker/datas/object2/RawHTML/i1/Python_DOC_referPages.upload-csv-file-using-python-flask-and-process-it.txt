<div class="post-text" itemprop="text">
<p>I have the following code to upload an CSV file using Python FLASK.</p>
<pre><code>from flask_restful import Resource
import pandas as pd

ROOT_PATH = os.path.dirname(os.path.abspath(__file__))

class UploadCSV(Resource):

    def post(self):
        files = request.files['file']
        files.save(os.path.join(ROOT_PATH,files.filename))
        data = pd.read_csv(os.path.join(ROOT_PATH,files.filename))
        print(data)

api.add_resource(UploadCSV, '/v1/upload')

if __name__ == '__main__':
    app.run(host='localhost', debug=True, port=5000)
</code></pre>
<p>This code works fine and I can able to upload CSV file successfully and read it using pandas dataframe. But I'm saving the csv in local filesystem and reading it. </p>
<p>I have tried reading like below -</p>
<pre><code>files = request.files['file']
files.read()
</code></pre>
<p>The results obtained were in the format of bytes but I need it in the format of dictionary. So I used pandas dataframe to read it and I later convert it into a custom dictionary of my format.</p>
<p>Is it possible to read the CSV file on the fly without writing it in local filesystem? Or any equivalent way we can achieve using Python Flask Restful?</p>
</div>
<div class="post-text" itemprop="text">
<p>The (not so aptly named, due to it being one file) <code>files</code> variable contains a <a href="https://werkzeug.palletsprojects.com/en/0.15.x/datastructures/#werkzeug.datastructures.FileStorage" rel="nofollow noreferrer">werkzeug.datastructures.FileStorage</a> object. This is a file like object (containing a <code>read()</code> method), and as such it is possible to use it directly as input to <code>pandas.read_csv()</code>as seen in the <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html" rel="nofollow noreferrer">pandas documentation</a>.</p>
<p>Thus, the solution to not save to disk is as simple as:</p>
<pre><code>class UploadCSV(Resource):

    def post(self):
        file = request.files['file']
        data = pd.read_csv(file)
        print(data)
</code></pre>
</div>
<span class="comment-copy">Did you see <a href="https://stackoverflow.com/questions/20015550/read-file-data-without-saving-it-in-flask" title="read file data without saving it in flask">stackoverflow.com/questions/20015550/â€¦</a>?</span>
<span class="comment-copy">Possible duplicate of <a href="https://stackoverflow.com/questions/20015550/read-file-data-without-saving-it-in-flask">Read file data without saving it in Flask</a></span>
<span class="comment-copy">@Arunmozhi Thanks for your reply. Yeah I have tried to read it using <b>read()</b> but the results were in bytes. Edited the question for more clarity</span>
