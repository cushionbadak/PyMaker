<div class="post-text" itemprop="text">
<p>I have to write a python script to submit job by using qsub (SGE).</p>
<p>The command I want to execute is in the form:</p>
<blockquote>
<p>qsub -b y /usr/bin/L2prod  filein   fileout</p>
</blockquote>
<p>where L2prod is a compiled program (a binary file, this is the reason of the -b y option) and filein/fileout are just strings with the name of the input/output file.
If I open a shell and type the previous line everything goes well.</p>
<p>In my python program I have:</p>
<pre><code>... 
 args=['qsub -b y ', L2prod, filein, fileout] 
 log.info('executing: '+' '.join(map(str,args)))
 process=subprocess.Popen(args,shell=True)
...
etc.
</code></pre>
<p>and the output in the log file is:</p>
<blockquote>
<p>INFO:job_submit:executing: qsub -b y /usr/bin/L2prod
  /data/L1/20180414-222503_L1.txt  /data/L2/20180414-222503_L2.txt</p>
</blockquote>
<p>Looking at the log it seems that the command line is correct, but I got the following error:</p>
<blockquote>
<p>qsub: command required for a binary job</p>
</blockquote>
<p>and no job was submitted.</p>
<p>It seems like the "-b y" option was ignored inside the .Popen() method. What am I doing wrong? I thought the shell=True option would have fixed this.</p>
</div>
<div class="post-text" itemprop="text">
<p>You must supply each flag as a separate string element of the list. The first line is different.</p>
<pre><code># args=['qsub -b y ', L2prod, filein, fileout]
args=['qsub', '-b', 'y', L2prod, filein, fileout] 
log.info('executing: '+' '.join(map(str,args)))
process=subprocess.Popen(args,shell=False)
</code></pre>
<p>Why you should avoid using the <code>shell = True</code> argument.</p>
<p><a href="https://medium.com/python-pandemonium/a-trap-of-shell-true-in-the-subprocess-module-6db7fc66cdfd" rel="nofollow noreferrer">https://medium.com/python-pandemonium/a-trap-of-shell-true-in-the-subprocess-module-6db7fc66cdfd</a></p>
</div>
<span class="comment-copy">Try <code>args=['qsub', '-b', 'y ', L2prod, filein, fileout]</code></span>
<span class="comment-copy">It works! Thank you very very much!</span>
<span class="comment-copy">Cool, I posted the same thing as an answer so that others would see it easier.</span>
<span class="comment-copy">As I said, it works, thank you! But just to be precise, the correct option for my case is: shell=False</span>
<span class="comment-copy">@fool Thank you. I tweaked my answer and added a relevant link.</span>
