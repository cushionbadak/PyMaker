<div class="post-text" itemprop="text">
<p>Hi i am updating resources tags in azure with python and runbook. I am able to update tags on most of resources but some of resources are giving me this error </p>
<p><strong>'NoneType' object has no attribute 'update'</strong></p>
<p>i am using code spinet as also mentioned in <a href="https://stackoverflow.com/questions/38992201/azure-sdk-python-tag-a-particular-resource">thread</a></p>
<pre><code>resource.tags.update(tag_dic)
if not resource.properties: 
    resource.properties = {}

resource_client.resources.create_or_update(                                   
resource_group_name=resource.id.split('/')[4],                       
resource_provider_namespace=resource.id.split('/')[6],
parent_resource_path='',
resource_type="",
resource_name=resource.name,
api_version=2018-M-D, 
parameters=resource
)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Likely the code is telling you that <code>resource.tags</code> is sometimes <code>None</code>. You might want to try before the code you mention:</p>
<pre><code>if not resource.tags:
    resource.tags = {}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>For disk resource they are cannot be accessed from resource.client call because disks are child resource of VM not of resources group. For disks we need to call compute.client</p>
<pre><code>compute_client = ComputeManagementClient(
    azure_credential,
    subscription_id,
    base_url=resourceManager_url)
managed_disk = compute_client.disks.get(resource_group, disk_name)
managed_disk.tags = {"test_tag":"yes"}
try:
    compute_client.disks.create_or_update(
        resource_group,
        resource_name_curr,
        managed_disk
    )
</code></pre>
</div>
<span class="comment-copy">For example this disk resource /subscriptions/xxxx/resourceGroups/CPS_PX/providers/Microsoft.Compute/disks/px-xx gives me this error  This could be possibility that this child resource of vm resource?</span>
<span class="comment-copy">Sorry for late reply i tried but it says           Azure Error: InvalidParameter         Message: Required parameter 'creationData' is missing (null).         Target: creationData</span>
<span class="comment-copy">So, when you use create_or_update, you need to be sure <code>resource</code> is coming from a GET before. Otherwise you might update more than you expect, because the RestAPI will do a diff of what you send and what was sent the last time. If you are missing some part (creationData), it will fail</span>
<span class="comment-copy">You can also use the simple <code>update</code> that will do a HTTP PATCH, but not all service supports it.</span>
<span class="comment-copy">I suggest you open an issue for each particular resource_type here <a href="https://github.com/Azure/azure-sdk-for-python/issues" rel="nofollow noreferrer">github.com/Azure/azure-sdk-for-python/issues</a></span>
<span class="comment-copy">(by the way I work at MS myself)</span>
