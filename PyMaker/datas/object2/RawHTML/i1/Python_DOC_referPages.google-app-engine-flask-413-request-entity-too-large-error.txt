<div class="post-text" itemprop="text">
<p>I am wondering how to fix this error in google app engine using flask. I understand that a file cannot exceed 32 MB. I am uploading videos and trying to store them in google cloud storage, I need to handle large videos. I have heard that using blobstore api may help but have not found much documentation on this and how I can implement it in this code.</p>
<pre><code>&lt;form id = "form2" action="{{ url_for('createPost') }}" method="POST" enctype="multipart/form-data"&gt;
&lt;div class="form-group"&gt;
    &lt;label for="files4"&gt;Video:&lt;/label&gt;
    &lt;input type="file" id="files4" name='files4'&gt;
 &lt;/div&gt;
&lt;/form&gt;


def createPost():
    if request.method == 'POST':
    s = db.session()
    try:
        files4 = request.files.getlist('files4')
        print(files4)
    except Exception as e:
        print("[Upload] Got exception: %s" % str(e))
    return redirect(url_for('projects'))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Here are 2 methods by which you can do this via blobstore:</p>
<p>1 - <code>create_upload_url</code></p>
<p><a href="https://cloud.google.com/appengine/docs/standard/python/refdocs/google.appengine.ext.blobstore.blobstore#google.appengine.ext.blobstore.blobstore.create_upload_url" rel="nofollow noreferrer">https://cloud.google.com/appengine/docs/standard/python/refdocs/google.appengine.ext.blobstore.blobstore#google.appengine.ext.blobstore.blobstore.create_upload_url</a></p>
<p>and here is an example</p>
<p><a href="https://www.programcreek.com/python/example/103205/google.appengine.ext.blobstore.create_upload_url" rel="nofollow noreferrer">https://www.programcreek.com/python/example/103205/google.appengine.ext.blobstore.create_upload_url</a></p>
<p>2 - <code>BlobstoreUploadHandler</code> however this requires you to use webapp2 instead of flask, although you could setup a webapp2 micro-service just for this endpoint</p>
<p><a href="https://cloud.google.com/appengine/docs/standard/python/tools/webapp/blobstorehandlers#BlobstoreUploadHandler" rel="nofollow noreferrer">https://cloud.google.com/appengine/docs/standard/python/tools/webapp/blobstorehandlers#BlobstoreUploadHandler</a></p>
<p>If neither of these methods work, then you'd need to setup an app engine flex micro-service, so that you can edit the nginx conf to all files larger that 32 MB</p>
</div>
<span class="comment-copy">Possible duplicate of <a href="https://stackoverflow.com/questions/14000569/can-we-count-the-upload-filesize-before-uploading-in-python-flask">can we count the upload filesize before uploading in python-flask</a></span>
