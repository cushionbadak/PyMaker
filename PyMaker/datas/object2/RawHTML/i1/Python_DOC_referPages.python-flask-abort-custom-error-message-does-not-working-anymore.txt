<div class="post-text" itemprop="text">
<p>I use <strong>Flask</strong> and more precisely <strong>abort</strong> with <strong>an error handler</strong>. I can <strong>custom</strong> the <strong>message</strong> sent with my error by using <strong>make_response</strong>. I also use <strong>Blueprints</strong> to register the error handler.</p>
<p>Before today, everything were fine. But things go bad today and it is impossible to custom my message anymore.</p>
<p>For my example, I take the 401 error and I try to send the message "custom message"</p>
<p>My handler for error 401</p>
<pre><code>@errors.app_errorhandler(401)
def access_denied(error):
    # if the description have the message attribute
    if 'message' in error.description:
        return make_response(jsonify(
            {
                'error': error.description['message']
            }
        ), 401)
    else:
        return make_response(jsonify(
            {
                'error': 'Access Denied'
            }
        ), 401)
</code></pre>
<p>My blueprint registration in <strong>__init__.py</strong></p>
<pre><code>from app.errors.ErrorHandler import errors
app.register_blueprint(errors)
</code></pre>
<p>My abort call</p>
<pre><code>from flask import abort
abort(
      401,
      {
           'message': 'custom message'
      }
)
</code></pre>
<p>The error 401 is handled by my handler but the message sent is the default message 'Access Denied'.</p>
<p>I insist : Everything worked yesterday ! (19 March 2019 - 6pm)
Maybe it is a bug or an improvement not documented at all</p>
<p>Thank you for your help and if you need more information, feel free to ask</p>
<p>Louis</p>
</div>
<div class="post-text" itemprop="text">
<p>The problem was from the werkzeug module : <a href="https://github.com/pallets/werkzeug/issues/1483" rel="nofollow noreferrer">https://github.com/pallets/werkzeug/issues/1483</a></p>
<p>It is fixed now</p>
</div>
