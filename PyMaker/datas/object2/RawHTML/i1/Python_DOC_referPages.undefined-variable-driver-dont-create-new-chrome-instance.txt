<div class="post-text" itemprop="text">
<p>I am trying to call a click function, lastly in my <code>/main.py</code> file.</p>
<p><strong>/main.py</strong></p>
<pre><code>"""Start Point"""

from data.find_pending_records import FindPendingRecords
from vital.vital_entry import VitalEntry
import sys
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.action_chains import ActionChains
import pandas as pd

if __name__ == "__main__":
    try: 
        # for PENDING_RECORDS in FindPendingRecords().get_excel_data(): begin to loop through entire directory

            PENDING_RECORDS = FindPendingRecords().get_excel_data()
            # Do operations on PENDING_RECORDS

            # Reads excel to map data from excel to vital
            MAP_DATA = FindPendingRecords().get_mapping_data()

            # Configures Driver
            VITAL_ENTRY = VitalEntry()

            # Start chrome and navigate to vital website
            VITAL_ENTRY.instantiate_chrome()

            # Begin processing Records
            VITAL_ENTRY.process_records(PENDING_RECORDS, MAP_DATA)

            # Save Record
            VITAL_ENTRY.save_contact(driver)

            print (PENDING_RECORDS)
            print("All done")

    except Exception as exc:
        # print(exc)
        raise
</code></pre>
<p><strong>/vital_entry.py</strong></p>
<pre><code>class VitalEntry:
    """Vital Entry"""

    def save_contact (self, driver):
        driver.implicitly_wait(15)
        driver.find_element_by_css_selector("#publishButton").click() 
</code></pre>
<p>I am continuously getting this error in Prompt:</p>
<pre><code>Traceback (most recent call last):
  File "main.py", line 32, in &lt;module&gt;
    VITAL_ENTRY.save_contact(driver)
NameError: name 'driver' is not defined
</code></pre>
<p>I do not want to create a new chrome session or window... I've also tried chaining this on my <code>VITAL_ENTRY.process_records(PENDING_RECORDS, MAP_DATA)</code> above. As you can see I am already importing the driver; and I am using it in the above calls - I don't want to create a new browser instance.</p>
<p><strong>Here is the <code>.instantiate_chrome()</code> below:</strong></p>
<pre><code>def instantiate_chrome(self):
    """Create Chrome webdriver instance."""
    self.options.headless = config.HEADLESS

    if not self.options.headless:
        self.options.add_argument("--start-maximized")

    self.options.add_argument('--disable-infobars')
    self.options.add_argument('--disable-gpu')

    self.driver = webdriver.Chrome(options=self.options)
    self.driver.set_page_load_timeout(30)
    self.driver.implicitly_wait(15)
    self.driver.get(config.VITAL_URL)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>So you create the browser session, then you never pass it out of that function. If you want to use it elsewhere, your <code>instantiate_chrome()</code> code will need to <code>return driver</code>, then you'll need to assign it as I stated in my previous comment</p>
<p><code>driver= VITAL_ENTRY.instantiate_chrome()</code></p>
</div>
<span class="comment-copy">Yes, you haven't defined <code>driver</code> anywhere in scope. You probably want to use an instance variable</span>
<span class="comment-copy">How can I add it within scope here? I do not want to start a new separate browser instance/session.</span>
<span class="comment-copy">You asked this same question before yesterday, I'll add back in what I commented before. You have a line in this code: <code># Configures Driver VITAL_ENTRY = VitalEntry()</code> which, though we can't see the code for that function, I would assume creates the driver as <code>VITAL_ENTRY</code>, not as <code>driver</code></span>
<span class="comment-copy">Alternately, again there's not enough code to see what's wrong, perhaps you need to modify <code>VITAL_ENTRY.instantiate_chrome()</code> to return a chromedriver object to be used as your chrome driver</span>
<span class="comment-copy">Thanks @G.Anderson I've just added that instantiate_chrome code</span>
