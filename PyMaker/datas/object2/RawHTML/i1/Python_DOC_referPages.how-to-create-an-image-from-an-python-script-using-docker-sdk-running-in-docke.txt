<div class="post-text" itemprop="text">
<p>I have two dockerfiles, test and result. A python script running in test container has to create the image for result using docker sdk. I have both the dockerfiles and the python script for test copied into the workdirectory of the test. However when i get an error in test script saying No such file or directory. </p>
<p>Dockerfile of test:</p>
<pre><code>FROM python:3.7.2-slim
WORKDIR /test
COPY . /test
RUN pip install docker 
ENV PYTHONPATH="$PYTHONPATH:/test"
CMD ["python", "test.py"]
</code></pre>
<p>test.py:</p>
<pre><code>// dockerfile of result is named result
import docker
client = docker.from_env()
image = client.images.build(path="/test", dockerfile='result') 
container = client.containers.run(image)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>When you do</p>
<pre><code>COPY . /test
</code></pre>
<p>You copy everything of folder that is docker-compose.yml.</p>
<p>But when you are in test.py probably you are in another folder.
So you need to back levels of folder to acess /test.</p>
</div>
<span class="comment-copy">I'm not using Docker Compose</span>
<span class="comment-copy">If you can try it with docker compose, maybe it could help you.</span>
