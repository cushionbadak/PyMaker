<div class="post-text" itemprop="text">
<p>I have a code which reads a csv file and manufacture large data from it where i'm spliting the data on the basis of columns into 3 separate csv files and i need to zip these 3 files in a single file.</p>
<p>However i'm getting the following error :</p>
<blockquote>
<p>'NoneType' object has no attribute 'getvalues'</p>
</blockquote>
<pre><code>import pandas as pd
df=pd.read_csv("test.csv")
# do all operation here....
# ..........................
# at last come with Generated data and store in dataframe
result = pd.DataFrame(final_Array) # "final_Array" contains the data

data1=result.drop(result.iloc[:,64:], axis=1)
data1=data1.to_csv("parts.csv")

data2=result.drop(result.iloc[:,8:64], axis=1)
data2=data2.drop(data2.iloc[:,19:],axis=1)
data2 = data2.to_csv("Skills.csv")
data3=result.drop(result.iloc[:,8:75], axis=1)
data3 = data3.to_csv("predict.csv")

file_List =[data1,data2,data3]
def zipFiles(file_List):
    outfile = io.BytesIO() # io.BytesIO() for python 3
    with zipfile.ZipFile(outfile, 'w') as zf:
        for n, f in enumerate(file_List):
           zf.writestr("{}.csv".format(n), f.getvalues())
    return outfile.getvalue()

zipped_file = zipFiles(file_List)
response = make_response(zipped_file)
response.headers["Content-Type"] = "application/octet-stream"
response.headers["Content-Disposition"] = "attachment; filename=my_file.zip"
return response
</code></pre>
<p>i'm unable to get the zip file please tell me where i'm doing wrong.</p>
</div>
<div class="post-text" itemprop="text">
<p>The conflict comes from keeping the same names for different objects.
<code>data1</code>, <code>data2</code> ,<code>data3</code> should stay dataframes, this way is more clear for everyone.</p>
<p><code>file_List = [data1,data2,data3]</code> is a list of <code>None</code>, because the method <code>to_csv</code> returns <code>None</code> if you pass a string (see <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_csv.html" rel="nofollow noreferrer">to_csv documentation</a>). Just remove the argument when you call the method to get a result as a string.</p>
<p>You can remove every <code>data**=data**.to_csv("parts.csv")</code> and get the values directly where you need it (in zip creation)</p>
<pre><code>data1=result.drop(result.iloc[:,64:], axis=1)
# data1=data1.to_csv("parts.csv") 

data2=result.drop(result.iloc[:,8:64], axis=1)
data2=data2.drop(data2.iloc[:,19:],axis=1)
# data2 = data2.to_csv("Skills.csv")

data3=result.drop(result.iloc[:,8:75], axis=1)
# data3 = data3.to_csv("predict.csv")

file_List = [data1, data2, data3]
name_list = ['parts.csv', 'skills.csv','predict.csv']

def zipFiles(file_List):
    outfile = io.BytesIO() 
    with zipfile.ZipFile(outfile, 'w') as zf:
        for name, data in zip(name_list, file_List):
           zf.writestr(name, data.to_csv())
    return outfile.getvalue()
</code></pre>
</div>
<span class="comment-copy"><code>file_List =[data1,data2,data3]</code> is a list of <code>None</code>, but what are you expecting with <code>f.getvalues()</code> ?</span>
<span class="comment-copy">@PRMoureu i'm trying to store the all 3 csv file in zip here data1,data2,data3 contains the data of 3 csv file</span>
<span class="comment-copy">@PRMoureu i'm not getting here that first i need to create 3 csv file then i need to zip or we can zip the data itself in 3 separate csv file?</span>
<span class="comment-copy">i think you can remove every <code>data**=data**.to_csv("parts.csv")</code> and replace directly <code>f.getvalues()</code> by <code>f.to_csv()</code> (without filename to return a string)</span>
<span class="comment-copy">@PRMoureu thnx sir working but why the csv filenamed as 0.csv ,1.csv how shall i change it what i want?</span>
