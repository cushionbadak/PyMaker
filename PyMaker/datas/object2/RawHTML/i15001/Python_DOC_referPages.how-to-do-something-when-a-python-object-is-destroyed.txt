<div class="post-text" itemprop="text">
<p>How can I perform some cleanup action when a python object is destroyed (for any reason)?</p>
</div>
<div class="post-text" itemprop="text">
<p>Extend the class of the object:</p>
<pre><code>class MyClass(object):
    def __del__(self):
        object.__del__(self)
        dosomething()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I would recommend you read this: <a href="https://docs.python.org/3/reference/datamodel.html#object.__del__" rel="nofollow"><code>__del__</code></a>
and think really hard if <code>__del__</code> will do what you want as most likely it will not... due to peculiar nature of garbage collection.</p>
<p>If you really need to release a resource I recommend using <a href="https://docs.python.org/3/library/contextlib.html" rel="nofollow">context managers</a> and <code>with</code> statement.</p>
</div>
<span class="comment-copy"><code>def __del__(self):</code></span>
<span class="comment-copy">Is there any way to make this fire when I kill the script (I think a 'finally' would in that situation?)?</span>
<span class="comment-copy">What do you mean killing the script? Don't you mean destroying the object?</span>
<span class="comment-copy">I want to clean up even if I CTRL-C the script, i.e. so both when the object is destroyed naturally by the GC and also following a SIGTERM.</span>
<span class="comment-copy">Ctrl-C doesn't destroy an object.</span>
<span class="comment-copy">Use a try/except on your user input, then destroy the object in the exception.</span>
<span class="comment-copy">Do context managers clean up if the script is killed?</span>
<span class="comment-copy">@jbrown yes, unless you use SIGKILL - but with SIGKILL you can't clean up anyway. <b>del</b> is equaly reliable in killing context but not so much when it comes to continues operation as it may not get called when you expect it to be called - e.g. it can be called much later than you would expect it to be called</span>
