<div class="post-text" itemprop="text">
<p>I would like when there is an error that it would display what line the error occurred at.  I am unsure how I can obtain the line # that the error happened at though.  Any help would be appreciated.</p>
<pre><code>def main():
    while True:
       try:
           function1()
           function2()
           function3()
       except:
           print('error occur at line ' + str(errorline))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Using <a href="https://docs.python.org/3/library/traceback.html#traceback.extract_tb" rel="nofollow"><code>traceback.extract_tb</code></a>:</p>
<pre><code>import sys
import traceback
try:
    # Your code
except:
    tb = sys.exc_info()[-1]
    print(traceback.extract_tb(tb, limit=1)[-1][1])
</code></pre>
<p>I added <code>limit=1</code> for efficiency, to avoid loading the (possibly) huge traceback. You can't avoid indexing the list (<code>[-1]</code> to get the last element) though.</p>
</div>
<span class="comment-copy">Inspecting an interpreter stack is a way to go.  [<a href="https://docs.python.org/2/library/inspect.html#the-interpreter-stack]" rel="nofollow noreferrer">docs.python.org/2/library/inspect.html#the-interpreter-stack]</a></span>
<span class="comment-copy"><code>extract_tb</code> takes a <i>limit</i> param that can be used instead of indexing the array. Also, according to the <a href="https://docs.python.org/2/library/sys.html#sys.exc_info" rel="nofollow noreferrer">doc</a>, if you store the <code>traceback</code> reference returned by <code>exc_info()</code> you should <i>always</i> delete it or it creates a circular reference that is difficult to garbage collect.</span>
<span class="comment-copy">@aruisdante only important in Python 2.</span>
