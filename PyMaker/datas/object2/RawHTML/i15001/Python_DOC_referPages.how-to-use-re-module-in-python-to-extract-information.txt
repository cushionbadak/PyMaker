<div class="post-text" itemprop="text">
<p>I write a little script to use collins website for translation. heres my code:</p>
<pre><code>import urllib.request
import re
def translate(search):
    base_url = 'http://www.collinsdictionary.com/dictionary/american/'
    url = base_url + search
    p = urllib.request.urlopen(url).read()
    f = open('t.txt', 'w+b')
    f.write(p)
    f.close()
    f = open('t.txt', 'r')
    t = f.read()
    m = re.search(r'(&lt;span class="def"&gt;)(\w.*)(&lt;/span&gt;]*)',t)
    n = m.group(2)
    print(n)
    f.close()
</code></pre>
<p>I have some questions:</p>
<ol>
<li><p>I can't use re.search on p. it raises this error: 
<code>TypeError: can't use a string pattern on a bytes-like object</code>
is there a way to use <code>re.search</code> without saving it?</p></li>
<li><p>After saving file I should reopen it to use re.search otherwise it raises this error: <code>TypeError: must be str, not bytes</code> why this error happens?</p></li>
<li><p>in this program I want to extract information between <code>&lt;span class="def"&gt; and &lt;/span&gt;</code> from first match. but pattern that I wrote not work good in all cases. for example translate('three') is good. out put is : "totaling one more than two" but for translate('tree') out put is:
"a treelike bush or shrub   â‡’ a rose tree"
is there a way to correct this pattern. regular expression or any other tools?</p></li>
</ol>
</div>
<div class="post-text" itemprop="text">
<p>When you call <code>read</code> on the response returned by <code>urllib</code>, you get a <code>bytes</code> object, which you need to decode to convert it to a string.</p>
<p>Change </p>
<pre><code>    p=urllib.request.urlopen(url).read()
</code></pre>
<p>to</p>
<pre><code>    p=urllib.request.urlopen(url).read().decode('utf-8')
</code></pre>
<p>You should read this <a href="https://docs.python.org/3/howto/unicode.html" rel="nofollow noreferrer">https://docs.python.org/3/howto/unicode.html</a> to understand why because issues like this come up a lot.</p>
<p>Also, <a href="https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags">you probably don't want to parse HTML using regex</a>. Some better alternatives for Python are mentioned <a href="https://stackoverflow.com/questions/11709079/parsing-html-python">here</a>.</p>
</div>
