<div class="post-text" itemprop="text">
<p>I find python <code>struct.unpack()</code> is quite handy to read binary data generated by other programs. </p>
<p><strong>Question:</strong> How to read <strong>16-bytes long double</strong> out of a binary file? </p>
<p>The following C code writes 1.01 three times to a binary file, using 4-byte float, 8-byte double and 16-byte long double respectively. </p>
<pre><code>FILE* file     = fopen("test_bin.bin","wb");
float f        = 1.01;
double d       = 1.01;
long double ld = 1.01;
fwrite(&amp;f, sizeof(f),1,file);
fwrite(&amp;d, sizeof(d),1,file);
fwrite(&amp;ld, sizeof(ld),1,file);                     
fclose(file);
</code></pre>
<p>In python, I can read the float and double with no problem.  </p>
<pre><code>file=open('test_bin.bin','rb')
struct.unpack('&lt;fd',file.read(12)) # (1.0099999904632568, 1.01) as expected.
</code></pre>
<p>I do not find description of 16-byte long double in module <code>struct</code> <a href="https://docs.python.org/3/library/struct.html#format-characters" rel="noreferrer">format character section</a>. </p>
</div>
<div class="post-text" itemprop="text">
<p>Python does not support binary128s natively, hence you won't find support for them in the standard library. You will need to use NumPy (specifically <a href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.frombuffer.html" rel="nofollow"><code>numpy.frombuffer()</code></a>) to convert from bytes to a binary128.</p>
<pre><code>f128 = numpy.frombuffer(file.read(16), dtype=numpy.float128)
</code></pre>
</div>
<span class="comment-copy">ctypes supports long double</span>
<span class="comment-copy">neat! Thanks a lot.</span>
