<div class="post-text" itemprop="text">
<p>I want to have a Python script build a Python C extension module for whichever version of the Python interpreter with which the script is being run.</p>
<p>To this purpose, I want to dynamically acquire the relevant C compiler flags – one way to accomplish this would be to grab the output of the <code>python-config</code> CLI tool, e.g. like so:</p>
<pre><code>subprocess.check_output(["python-config", "--includes"])
</code></pre>
<p>Unfortunately, on systems on which several versions of Python are installed, this method may not find the right <code>python-config</code> – that is to say, the <code>python-config</code> associated with the currently-running version of Python. (Also, it is a bit ugly, methodologically.)</p>
<p>Is there some way that I can acquire this information from within Python – something perhaps like Numpy’s <code>get_include</code>?</p>
</div>
<div class="post-text" itemprop="text">
<p>I have the answer: it is the built-in <code>sysconfig</code> module. <a href="https://i.stack.imgur.com/xURgn.jpg" rel="nofollow noreferrer"><img alt="the sysconfig module" src="https://i.stack.imgur.com/xURgn.jpg"/></a></p>
<p>… offering methods to access the same information <code>python-config</code> provides, including but not limited to:</p>
<ul>
<li><code>get_python_version()</code> (which does what you think),</li>
<li><code>get_paths()</code> (yields a <code>dict</code> with many useful paths),</li>
<li><code>get_config_var()</code> and <code>get_config_vars()</code> (these return strings and a huge <code>dict</code> respectively, to sift through all of the low-level configuration options),</li>
<li><code>get_config_h_filename()</code> (yields the source <code>config.h</code> file),</li>
<li><code>parse_config_h()</code> (for only the most intrepid configuration plumbers)</li>
</ul>
<p>… the first two of which will likely suffice, for anyone seeking <code>python-config</code> values without having to go through an embarrassing <code>subprocess</code> dance to get it.</p>
<ul>
<li><a href="https://docs.python.org/3/library/sysconfig.html" rel="nofollow noreferrer">Official Python 3 <code>sysconfig</code> module docs</a></li>
<li><a href="https://pymotw.com/2/sysconfig/" rel="nofollow noreferrer">Python 2 <code>sysconfig</code> PyMOTW example</a></li>
</ul>
</div>
