<div class="post-text" itemprop="text">
<p>I have a an xml document like the following:</p>
<pre><code>&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
&lt;parent&gt;
    &lt;groupId&gt;company&lt;/groupId&gt;
    &lt;artifactId&gt;art-id&lt;/artifactId&gt;
    &lt;version&gt;RELEASE&lt;/version&gt;
&lt;/parent&gt;

&lt;properties&gt;
    &lt;tomcat.username&gt;admin&lt;/tomcat.username&gt;
    &lt;tomcat.password&gt;admin&lt;/tomcat.password&gt;
&lt;/properties&gt;

&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;asdf&lt;/groupId&gt;
        &lt;artifactId&gt;asdf&lt;/artifactId&gt;
        &lt;version&gt;[3.8,)&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;asdf&lt;/groupId&gt;
        &lt;artifactId&gt;asdf&lt;/artifactId&gt;
        &lt;version&gt;[4.1,)&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<p>how can I delete the entire node "dependencies"?</p>
<p>I have looked at other questions and answers on stackoverflow and what is different about is the namespace aspect of this xml, and the other questions ask to delete a subelement like "dependency" while I want to delete the whole node "dependencies."  Is there an easy way using lxml to delete the entire node?</p>
<p>The following gives a 'NoneType' object has no attribute 'remove' error:</p>
<pre><code>from lxml import etree as ET

tree = ET.parse('pom.xml')
namespace = '{http://maven.apache.org/POM/4.0.0}'
root = ET.Element(namespace+'project')
root.find(namespace+'dependencies').remove()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can create a dict mapping for your namespace(s), find the <em>node</em> then call <em>root.remove</em>  passing the node, you don't call <em>.remove</em> on the node:</p>
<pre><code>x = """&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
&lt;parent&gt;
    &lt;groupId&gt;company&lt;/groupId&gt;
    &lt;artifactId&gt;art-id&lt;/artifactId&gt;
    &lt;version&gt;RELEASE&lt;/version&gt;
&lt;/parent&gt;    
&lt;properties&gt;
    &lt;tomcat.username&gt;admin&lt;/tomcat.username&gt;
    &lt;tomcat.password&gt;admin&lt;/tomcat.password&gt;
&lt;/properties&gt;    
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;asdf&lt;/groupId&gt;
        &lt;artifactId&gt;asdf&lt;/artifactId&gt;
        &lt;version&gt;[3.8,)&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;asdf&lt;/groupId&gt;
        &lt;artifactId&gt;asdf&lt;/artifactId&gt;
        &lt;version&gt;[4.1,)&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
&lt;/project&gt;"""
import lxml.etree as et
from StringIO import StringIO

tree = et.parse(StringIO(x))
root =tree.getroot()

nsmap = {"mav":"http://maven.apache.org/POM/4.0.0"}

root.remove(root.find("mav:dependencies", namespaces=nsmap))

print(et.tostring(tree))
</code></pre>
<p>Which would give you:</p>
<pre><code>&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
&lt;parent&gt;
    &lt;groupId&gt;company&lt;/groupId&gt;
    &lt;artifactId&gt;art-id&lt;/artifactId&gt;
    &lt;version&gt;RELEASE&lt;/version&gt;
&lt;/parent&gt;    
&lt;properties&gt;
    &lt;tomcat.username&gt;admin&lt;/tomcat.username&gt;
    &lt;tomcat.password&gt;admin&lt;/tomcat.password&gt;
&lt;/properties&gt;   
&lt;/project&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>First, grab the root node. Since it is <code>&lt;project ... &gt;</code> (vs <code>&lt;project .../&gt;</code>) the "parent" element of <code>dependencies</code> is <code>project</code>. Example from the documentation:</p>
<pre><code>import xml.etree.ElementTree as ET  
tree = ET.parse('country_data.xml')  
root = tree.getroot() 
</code></pre>
<p>Once you have the root, check <code>root.tag()</code>, it should be "project".</p>
<p>Then do <code>root.remove(root.find('dependencies'))</code>, where <code>root</code> is the <code>project</code> node.</p>
<p>If it were <code>&lt;project .../&gt;</code> then it would be invalid XML since there must be a root element. I can see exactly where you are coming from, though.</p>
</div>
<span class="comment-copy">Thank you! That is what I was looking for.  When I print the text the closing project tag is indented, is that a problem?</span>
<span class="comment-copy">@d.griner, no worries. It will make no difference, if you want to write to to a file just use  <code>tree.write("out.xml", encoding="utf-8", xml_declaration=True)</code></span>
<span class="comment-copy">Unrelated to final solution, but isn't the <i>StringIO</i> standalone module removed as of <a href="https://docs.python.org/3/whatsnew/3.0.html" rel="nofollow noreferrer">Python 3</a>? Should not import line read: <code>from io import StringIO</code>?</span>
<span class="comment-copy">@Parfait.  yes but if you use io you will see it errors without using unicode and  the declaration would also cause an lxml error , it was easier to just use StringIO.</span>
<span class="comment-copy">Got it but I receive an error <code>ImportError: No module named 'StringIO'</code>. We should just advise future readers to simply parse xml from file.</span>
<span class="comment-copy">would root be something like root = ET.Element("project")?</span>
<span class="comment-copy">I just edited my answer, see the update. If you were making the tree from scratch then you could define an element that way, but since you are reading in from file you need to use <code>getroot()</code>.</span>
<span class="comment-copy">I updated my code to reflect your changes, but I get an error stating that remove takes 2 arguments.  Do you know where I am going wrong? Thanks for you help.</span>
