<div class="post-text" itemprop="text">
<p>I would like to modify next dict definition:</p>
<pre><code>class Vividict(dict):
      def __missing__(self, key):
           value = self[key] = type(self)()
           return value
</code></pre>
<p>To be able to use it in next way:</p>
<pre><code>totals[year][month] += amount    
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="nofollow"><code>collections.defaultdict</code></a> with <a href="https://docs.python.org/3/library/collections.html#collections.Counter" rel="nofollow"><code>collections.Counter</code></a>. </p>
<pre><code>from collections import defaultdict, Counter

d = defaultdict(Counter)
d['year']['month'] += 1
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>At the end I have used Counter with tuple as a key.</p>
</div>
<span class="comment-copy">have you looked at collections.defaultdict?</span>
<span class="comment-copy">Nice but does not work in next case:</span>
<span class="comment-copy">d[year][month][day] += 1</span>
<span class="comment-copy">@buslik that cannot work, because if you do <code>d['year']['month'] += 1</code> with whatever structure <code>d</code> is, you setting values of <code>d['year']['month']</code> to <code>int</code> objects.</span>
<span class="comment-copy">By d = defaultdict(Counter) we are creating two dimensional dict. One dimension come from  defaultdict another from Counter.</span>
<span class="comment-copy">So d[year] += 1 will not work as well :(</span>
