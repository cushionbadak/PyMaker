<div class="post-text" itemprop="text">
<p>I was creating sanity checks in my django tests and came across an error I had accounted for. Unfortunately my test fails when it should be successful. I am testing when a page is not there (a 404 status code). The error message and code are below. When I added quotes I received 404 is not '404'.</p>
<p>Django-1.10.2 &amp; Python 3.4.5</p>
<pre><code>./manage.py test app

Traceback (most recent call last):
  File "/tests/dir/tests.py", line 26, in test_404
    self.assertIs(response.status_code,404)
AssertionError: 404 is not 404

from django.test import TestCase
from django.test import Client

class SanityCheckTests(TestCase):
def test_404(self):
    """
    Http Code 404
    """
    client = Client()

    response = client.get('/test404')
    print(response)
    self.assertIs(response.status_code,404)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You're on the right track - but <a href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertIs" rel="nofollow"><code>assertIs</code></a> ensures you have the same instance of an object. You just want to make sure they are <a href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertEqual" rel="nofollow">equal</a>.</p>
<p>Therefore, change your last line to </p>
<pre><code>self.assertEqual(response.status_code, 404)
</code></pre>
</div>
<span class="comment-copy">In Python the "is" operator tests for exact object equality.  Just because response.status_code prints as 404 doesn't mean that it's an integer with the value 404.  Try printing response.status_code.__class__ or isinstance(response.status_code) and see what you get.</span>
<span class="comment-copy">It very strange that my 200 code sanity check doesnt fail. It uses assertIs. But my test works now thanks!</span>
<span class="comment-copy">This question explains what is going on: <a href="http://stackoverflow.com/questions/306313/is-operator-behaves-unexpectedly-with-integers" title="is operator behaves unexpectedly with integers">stackoverflow.com/questions/306313/â€¦</a></span>
