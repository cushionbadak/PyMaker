<div class="post-text" itemprop="text">
<p>I'm working on some code that pulls course info from Canvas.  As pure python, it works fine.   If I try to incorporate it with Flask, I get the following error</p>
<pre><code>requests.exceptions.MissingSchema: Invalid URL 'run/api/v1/courses/1234567': No schema supplied. Perhaps you meant http://run/api/v1/courses/1234567?
</code></pre>
<p>This is the code in question:</p>
<p>Canvas file</p>
<pre><code>import sys
from canvasapi import Canvas

def getinfo():
    canvasurl = "https://canvas.instructure.com/";
    canvastoken = #Redacted for this example

try:
    canvastoken = sys.argv[1];
    canvasurl = sys.argv[2];
except:
   print()


#Create a new canvas object passing in the newly aquired url and token
canvas = Canvas(canvasurl, canvastoken);

#print(canv)

# Create a new course oject -- passing in course number as a parameter
# Course number is currently hard coded

print(canvas.get_course(1234567))
</code></pre>
<p>Flask file code (the file that I'm trying to run):</p>
<pre><code>from flask import Flask
import canvas

canvas.getinfo()

app = Flask(__name__)


@app.route('/')
def hello_world():
    return 'Hello World!'


if __name__ == '__main__':
    app.run()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>No schema provided usually means you haven't specified the <code>http://</code> or <code>https://</code> in the URL. </p>
<p>In the code you provided, I don't see any reference to a <code>run/api/v1/courses/1234567</code>. One possibility is if you are using the <code>url_for</code> method from <code>requests</code> anywhere in your code, try setting <code>_external=True</code>:</p>
<pre><code>url = url_for('relativeURL', _external=True)
</code></pre>
<p>This allows Flask to construct an absolute URL (i.e., a URL with domain included).</p>
<p>If you aren't using <code>url_for</code>, check other places in your code where you might be omitting the http or https from the URL. </p>
<p>If you update your question to include the part that refers to the offending URL, we might be able to provide more specific help.</p>
</div>
<span class="comment-copy">what is the URL that you are using to test this?</span>
