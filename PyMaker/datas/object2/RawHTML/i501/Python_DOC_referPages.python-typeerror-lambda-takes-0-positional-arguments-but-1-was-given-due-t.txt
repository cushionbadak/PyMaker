<div class="post-text" itemprop="text">
<p>I am new to making unit tests. I'm currently running pytest. I have this Program.py running but when I run pytest on my Program_test.py I've been failing the tests due to these TypeErrors from my where I had my assert line on the code below. I have the program ask the users for an input value or enter to exit the program. I have the 'import pytest' already included in my Program_test.py program. </p>
<p>Am I using lambda wrong? I'm not sure how to best approach this and get those user inputs to work. This is just testing the get_weight function from users. </p>
<p>***It was already fixed. I had a problem with lambda and underneath was very helpful</p>
</div>
<div class="post-text" itemprop="text">
<p>Here's an example to show where you are going wrong and for the purpose of explanation I am assigning the lambdas to variables:</p>
<pre><code>zero_arg_lambda = lambda: "131"  # Takes no args
one_arg_lambda = lambda x: "131"  # Takes one arg
</code></pre>
<p>Call zero_arg_lambda with arg (same as your error):</p>
<pre><code>zero_arg_lambda(1)
&gt;&gt;&gt; Traceback (most recent call last):
&gt;&gt;&gt; File "&lt;input&gt;", line 1, in &lt;module&gt;
&gt;&gt;&gt; TypeError: &lt;lambda&gt;() takes no arguments (1 given)
</code></pre>
<p>Call one_arg_lambda :</p>
<pre><code>one_arg_lambda(1)
&gt;&gt;&gt; "131"
</code></pre>
<p>So in short your code is passing a parameter to the lambda even though you have specified that it does not take one. </p>
<p>The one_arg_lambda example takes a parameter and simply returns the value to the right of the colon.
I would recommend reading over the docs on <a href="https://docs.python.org/3/reference/expressions.html#lambda" rel="nofollow noreferrer">lambda</a></p>
<p>Or if you don't look there the expected lambda format is:</p>
<blockquote>
<p>lambda parameters: expression</p>
</blockquote>
<p>Also note the docs on <a href="https://docs.pytest.org/en/3.0.0/monkeypatch.html#_pytest.monkeypatch.MonkeyPatch.setattr" rel="nofollow noreferrer">monkeypatch.context.setattr</a> which have a good example of using a lambda expression. </p>
<p>To pin-point it the error in your code is coming from the <strong>context.setattr</strong> call inside your test. </p>
<pre><code>def test_get_weight_returns_valid_input(monkeypatch):
    with monkeypatch.context() as context:
        # Old line causing error: context.setattr('builtins.input', lambda: "131")
        context.setattr('builtins.input', lambda x: "131")  # Fixed 
</code></pre>
</div>
<span class="comment-copy">So is my syntax wrong on context.setattr? How do I fix this applying with your example on the lambda variables?</span>
<span class="comment-copy">Yes it was wrong as you did not pass an arg to the lambda and context.setattr passes an arg. The fix is in the last block of code in my answer. I have commented out the old code</span>
<span class="comment-copy">Well that's just an assertion error. Perhaps you should be returning an integer from the lambda instead of a string: <code>lambda x: 131</code> instead of <code>lambda x: "131"</code></span>
<span class="comment-copy">AWESOME! Thank you! It was fixed</span>
