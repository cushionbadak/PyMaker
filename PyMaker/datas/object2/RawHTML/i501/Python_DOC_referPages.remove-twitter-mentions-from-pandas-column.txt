<div class="post-text" itemprop="text">
<p>I have a dataset that includes Tweets from Twitter. Some of them also have user mentions such as <code>@thisisauser</code>. I try to remove that text at the same time I do other cleaning processes.</p>
<pre><code>def clean_text(row, options):

    if options['lowercase']:
        row = row.lower()

    if options['decode_html']:
        txt = BeautifulSoup(row, 'lxml')
        row = txt.get_text()

    if options['remove_url']:
        row = row.replace('http\S+|www.\S+', '')

    if options['remove_mentions']:
        row = row.replace('@[A-Za-z0-9]+', '')

    return row

clean_config = {
    'remove_url': True,
    'remove_mentions': True,
    'decode_utf8': True,
    'lowercase': True
    }

df['tweet'] = df['tweet'].apply(clean_text, args=(clean_config,))
</code></pre>
<p>However, when I run the above code, all the Twitter mentions are still on the text. I verified with a Regex online tool that my Regex is working correctly, so the problem should be on the Pandas's code.</p>
</div>
<div class="post-text" itemprop="text">
<p>You are misusing <code>replace</code> method on a string because it does not accept regular expressions, only fixed strings (see docs at <a href="https://docs.python.org/2/library/stdtypes.html#str.replace" rel="nofollow noreferrer">https://docs.python.org/2/library/stdtypes.html#str.replace</a> for more).</p>
<p>The right way of achieving your needs is using <code>re</code> module like:</p>
<pre><code>import re
re.sub("@[A-Za-z0-9]+","", "@thisisauser text")
' text'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>the problem is with the way you used replace method &amp; not pandas</p>
<p>see output from the REPL</p>
<pre><code>&gt;&gt;&gt; my_str ="@thisisause"
&gt;&gt;&gt; my_str.replace('@[A-Za-z0-9]+', '')
'@thisisause'
</code></pre>
<p>replace doesn't support regex. Instead do use regular expressions <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">library</a> in python as mentioned in the <a href="https://stackoverflow.com/a/54734032/1552998">answer</a></p>
<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; my_str
'hello @username hi'
&gt;&gt;&gt; re.sub("@[A-Za-z0-9]+","",my_str)
'hello  hi'
</code></pre>
</div>
<span class="comment-copy">Damn. I had first the <code>str.replace</code> from Pandas and then I changed it to <code>replace</code> from Python. But I forgot to change to <code>re.sub</code> as well. Thank you a lot</span>
<span class="comment-copy">I tested it here and it is working. <a href="http://regexr.com/48he7" rel="nofollow noreferrer">regexr.com/48he7</a> I guess it is different in Python?</span>
