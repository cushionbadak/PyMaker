<div class="post-text" itemprop="text">
<p>I have a class that is calling a thread like below.</p>
<pre><code>import threading
import time

class ThreadingExample:
    def __init__(self):
        thread = threading.Thread(target=self.run, args=())
        thread.daemon = True                           
        thread.start()                                 

    def run(self):

        # Do something
        print('Doing something important in the background')

        time.sleep(100)

        # a print statement will not be executed here even with flush=True

example = ThreadingExample()
</code></pre>
<p>However, <code>sleep</code> is not working. The thread is executed since the first print in run() is being printed however the program terminates instantly after the print statement. </p>
<p>For testing purposes I inserted another print statement after the sleep(100) and that does not print either. what is the problem here?</p>
<p>This code should be completed and reproducable</p>
</div>
<div class="post-text" itemprop="text">
<p>The problem is this line:</p>
<pre><code>thread.daemon = True
</code></pre>
<p>From the <a href="https://docs.python.org/3/library/threading.html#thread-objects" rel="nofollow noreferrer">threading documentation</a>:</p>
<blockquote>
<p>A thread can be flagged as a “daemon thread”. The significance of this
  flag is that the entire Python program exits when only daemon threads
  are left.</p>
</blockquote>
<p>Because you've made your thread a daemon thread, python doesn't wait for it to finish before exiting the program. As soon as the main thread is done executing your code, the daemon thread is killed and the program exits.</p>
<p>There are two ways to solve this problem:</p>
<ol>
<li>Removing the <code>thread.daemon = True</code> assignment so that python will wait for your thread to exit.</li>
<li>Explicitly waiting for the thread to finish by calling <a href="https://docs.python.org/3/library/threading.html#threading.Thread.join" rel="nofollow noreferrer"><code>thread.join()</code></a>.</li>
</ol>
</div>
<span class="comment-copy">Possible duplicate of <a href="https://stackoverflow.com/questions/21886233/time-sleepx-not-working-as-it-should">time.sleep(x) not working as it should?</a></span>
<span class="comment-copy">Remove the <code>thread.daemon = True</code>. Your program exits before the sleep finishes.</span>
<span class="comment-copy">@Mehdico it has nothing to do with the print statement and buffering.</span>
<span class="comment-copy">@Aran-Fey that worked. Thanks! your comment is a solution.</span>
<span class="comment-copy">@jfs I'm sure we have plenty of similar questions already, I just can't be bothered to find a duplicate...</span>
