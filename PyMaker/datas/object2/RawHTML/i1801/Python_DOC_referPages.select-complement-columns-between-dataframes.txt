<div class="post-text" itemprop="text">
<p>Say I have a pandas.DataFrame <code>x</code>, <code>x</code> was fed to function <code>filter</code> and returned <code>y</code>, a DataFrame with some columns from <code>x</code> removed. The function is a blackbox and the column number is large. How could I find the columns in 'x' that are removed?</p>
<p>Or, <code>y.columns</code> is a subset of <code>x.columns</code>, how could I find the columns in <code>x</code> that are not in <code>y</code>?</p>
<p>Example:</p>
<pre><code>x = pd.DataFrame(np.array([[1,2,3],[4,5,6]]))
x.columns = list('abc')
y = x.iloc[:, :2].copy()
&gt;&gt;&gt; x
   a  b  c
0  1  2  3
1  4  5  6
&gt;&gt;&gt; y
   a  b
0  1  2
1  4  5
</code></pre>
<p>And I'd like to have column <code>c</code> returned.</p>
<p>My solution now:</p>
<pre><code>&gt;&gt;&gt; xc = x.columns.values.tolist()
&gt;&gt;&gt; yc = y.columns.values.tolist()
&gt;&gt;&gt; diff = [i for i in xc if i not in yc]
&gt;&gt;&gt; x[diff]
   c
0  3
1  6
</code></pre>
<p>Is there a way to get the result without extracting column names?</p>
<p>I thought this was some sort of basic operations but I couldn't find an easy answer online.</p>
<p>Thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>sets</code>:</p>
<pre><code>x_col = set(x.columns)
y_col = set(y.columns)
x_col.difference(y_col)
&gt;&gt;{'c'}
</code></pre>
<p><code>x_col.difference(y_col)</code> will return elements that only exist in <code>x_col</code> but not in <code>y_col</code></p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/3/library/stdtypes.html#set" rel="nofollow noreferrer"><code>sets</code></a> or pandas <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Index.difference.html" rel="nofollow noreferrer"><code>difference</code></a> as:</p>
<pre><code>x[x.columns.difference(y.columns)]
</code></pre>
<p>Or:</p>
<pre><code>x[list(set(x.columns)-set(y.columns))]
</code></pre>
<p>This will give the column values which are in <code>x</code> dataframe but not in <code>y</code> dataframe.</p>
<hr/>
<pre><code>print(x[x.columns.difference(y.columns)])
</code></pre>
<p>or:</p>
<pre><code>print(x[list(set(x.columns)-set(y.columns))])

   c
0  3
1  6
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use <code>numpy</code> for this:</p>
<pre><code>import numpy as np

diff = np.setdiff1d(xc,yc)
</code></pre>
<p>OR</p>
<p>But, it's always good to use native methods:</p>
<pre><code>diff = list(xc - yc)
</code></pre>
</div>
