<div class="post-text" itemprop="text">
<p>I would like to write a python script that does 3 things : </p>
<ol>
<li>build a virtual environment  with python3</li>
<li>activate this new virtual env. ( bash: source myvirtenv/bin/acticate)</li>
<li>install packages with  a requirements.txt (bash:  pip install -r )</li>
</ol>
<p>In my project I use  the normal virtualenviroment package . and  I have to do it   on   a Debian machine. </p>
<p>I tried to mimic the bash command with <code>os.system()</code>  but didn't make it with the code below.</p>
<pre><code>import os
os.system('python3 -m venv test6_env')
os.system('source test6_env/bin/activate')
os.system('pip install -r requirements.txt --user')
</code></pre>
<p>Problem the virtualenv  will not activated and the requirements not installed. </p>
<p>Is there a easy trick to script in python this 3 stepy nicely ? </p>
</div>
<div class="post-text" itemprop="text">
<p>The problem is that <code>os.system('source test6_env/bin/activate')</code> activates the virtual environment only for the subshell spawned by this particular <code>os.system()</code> call, and not any subsequent ones. Instead, run all shell commands with a single call, e.g.</p>
<pre><code>os.system('python3 -m venv test6_env &amp;&amp; . test6_env/bin/activate &amp;&amp; pip install -r requirements.txt')
</code></pre>
<p>Alternatively, put your commands in a shell script and execute that with <code>os.system()</code> or, better yet, using a function from the <a href="https://docs.python.org/3/library/subprocess.html" rel="nofollow noreferrer"><code>subprocess</code></a> module, e.g.</p>
<pre><code>import subprocess
subprocess.run('/path/to/script.sh', check=True)
</code></pre>
</div>
<span class="comment-copy">Possible duplicate of <a href="https://stackoverflow.com/questions/1691076/activate-virtualenv-via-os-system">Activate virtualenv via os.system()</a></span>
<span class="comment-copy"><a href="https://stackoverflow.com/search?q=%5Bvirtualenv%5D+subshell">stackoverflow.com/search?q=%5Bvirtualenv%5D+subshell</a></span>
<span class="comment-copy">Thank for for good explanation, it makes more sens now.  Nevertheless I got with your command line  'source: not found'.  Then I tried your  alternative with  putting the command 'source...... /bin/activate in a shell script .  And  I got the same error.  Manually  I have not problem to activate the virtualenv,.  An idea ?</span>
<span class="comment-copy">Use <code>.</code> instead of <code>source</code>. <code>source</code> works in Bash, but not sh.</span>
