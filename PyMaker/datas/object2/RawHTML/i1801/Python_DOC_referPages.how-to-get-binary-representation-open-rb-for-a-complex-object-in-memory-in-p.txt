<div class="post-text" itemprop="text">
<p>I have a bunch of PIL images that I'd like to get the binary representation of. Currently I'm doing this by saving it to a file, and opening the file using python's open(X,"rb") function. What's the best way for  me to skip writing to the hard drive so that I can just open the bytes object into memory?</p>
<pre><code> import time;
 import os;
 from PIL import Image;

 im = new Image("RGB",(20,20));
 fn = str(time.time());
 im.save(fn);

 bytes=open(fn,"rb");

 os.system("rm -rf "+fn);
</code></pre>
<p>Would like it to be:</p>
<pre><code>im = new Image("RGB",(20,20));
bytes = openRBequivalent(im);
</code></pre>
<p>Another function I'm using expects a filename as an input, to which they use the open function. The library doesn't contain a method for reading files from objects in memory (e.g. base64 string methods). So I'd like to replace the part with the "filename input" function with whatever is equivalent to the open function to get rid of these hard drive writes.</p>
</div>
<div class="post-text" itemprop="text">
<p>In python3 <a href="https://docs.python.org/3/library/io.html" rel="nofollow noreferrer">BytesIO</a> module provides a way to interface with a file-like object. It reads and writes the same as a file but the object is in-memory. </p>
<p>For your usecase,</p>
<pre><code>from io import BytesIO
with BytesIO() as image_in_buf:
    image.save(image_in_buf, format)
</code></pre>
<p><code>image_in_buf</code> can be read and write like a normal file. getvalue() method returns bytes containing the entire contents of the buffer.</p>
</div>
<div class="post-text" itemprop="text">
<p>Try using the <a href="http://effbot.org/imagingbook/image.htm#tag-Image.Image.getdata" rel="nofollow noreferrer"><code>getdata</code></a> function of <code>Image</code>.</p>
<p>To get a <code>bytes</code> object try <code>data = bytes(im.getdata())</code></p>
</div>
<span class="comment-copy">The representation that gets saved with <code>im.save</code> doesn't necessarily even <i>exist</i> in memory as part of <code>im</code>, and even if it did, it doesn't sound like it would help you. You say the function you're using needs a file name, but your <code>openRBequivalent</code> function wouldn't give you one.</span>
<span class="comment-copy">You can use BytesIO module?</span>
<span class="comment-copy">Thanks for recognizing that this was more of a PIL issue than just a bytesIO issue</span>
