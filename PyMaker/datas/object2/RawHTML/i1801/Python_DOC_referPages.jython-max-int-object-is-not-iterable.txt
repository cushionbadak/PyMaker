<div class="post-text" itemprop="text">
<p>I looking for help. 
I managed to add row_id to my file using the following code and it`s working fine. </p>
<pre><code>infile = open(inputfile, 'r')
outfile = open(outputfile, 'w')

for i, line in enumerate(infile): 
#write header
    row_sec = ("00000" + str(i))[-5:]
    row_nr = max(row_sec)
    outfile.write(row_sec + "Company" + column[0] + column[1] + row_nr + "\n")
outfile.close()
infile.close()
</code></pre>
<p>results: </p>
<ul>
<li>00000 - header </li>
<li>00001 - data </li>
<li>00002 - data</li>
<li>.... - data</li>
<li>00037 - data last line</li>
</ul>
<p>The problem is that I need to put nr of records in header line (in this case it would be 00037)</p>
<p>when I use </p>
<pre><code>records = max(i) 
</code></pre>
<p>or</p>
<pre><code>records = max(row_id) 
</code></pre>
<p>I get error 
<strong>TypeError: 'int' object is not iterable</strong></p>
<p>I read about this error and understand it but still can`t figure out how to get rid of it. Is there a clever and simple way to fix my code? </p>
</div>
<div class="post-text" itemprop="text">
<p>You can delay writing and grab the variables from the loop:</p>
<pre><code>buffer = []
for i, line in enumerate(infile): 
    # create line content
    buffer.append('%5d' % i + " Company " + line + "\n")
# i is still set to the last value
# write header
outfile.write('%5d' % i + " Elements\n")
for line in buffer:
    outfield.write(line)
</code></pre>
<p>This will write something like</p>
<pre><code>00037 Elements
00000 Company ACME
00001 Company EMCA
...
00037 Company MECA
</code></pre>
<p>Note that <code>enumerate</code> takes an optional parameter <code>start</code> if you need to set the first index. </p>
<hr/>
<p>If your file is larger than available memory, you can read it twice instead of buffering:</p>
<pre><code># read once to get number of entries
with open(inputfile, 'r') as infile:
    companies = sum(1 for line in infile)

infile = open(inputfile, 'r')
outfile = open(outputfile, 'w')

# write header
outfile.write('%5d' % companies + " Elements\n")
for i, line in enumerate(infile):
    row_sec = ("00000" + str(i))[-5:]
</code></pre>
</div>
<span class="comment-copy">Can you show the exact code please? And format the question accordingly?</span>
<span class="comment-copy"><code>i</code> is an integer, whereas <code>max</code> requires an iterable. What do you expect <code>max(i)</code> to provide?</span>
<span class="comment-copy">Try reading up on <a href="https://docs.python.org/3/library/functions.html#max" rel="nofollow noreferrer">the docs</a> and come back when you've done that.</span>
<span class="comment-copy">@MisterMiyagi, I know I<code>m being silly and this won</code>t work, also with row_sec since I`ve turned it into string. I want to somehow place the last (so max) row_sec as nr. of rows in my header.</span>
<span class="comment-copy">@DavidCulbreth, thank you</span>
<span class="comment-copy">I got the following error due to the fact that apparently I`m using some old version - SyntaxError: 'with' will become a reserved keyword in Python 2.6  I modified your code a bit so it works for me  infile = open(inputfile, 'r') for line in infile:     rec_nr = sum(1 for line in infile) infile.close()  rest the same.... And it worked! You have no idea how grateful I am. Thank you very much for all the amazing help.</span>
<span class="comment-copy">@Beata Please upgrade your python version! 2.6 is ancient already, but yours is even older.</span>
