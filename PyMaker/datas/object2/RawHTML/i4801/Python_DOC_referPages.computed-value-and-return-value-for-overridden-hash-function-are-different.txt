<div class="post-text" itemprop="text">
<p>I've created a <strong>hash</strong> function for an object. The problem I'm running into is that the value I created in the hash function, isn't what's returned from the function.</p>
<pre><code>class someClass():

    def someClass(str1, str2, str3):
         self.str1 = str1
         self.str2 = str2
         self.str3 = str3
    ...
    def __hash__(self):
        hash_val = int(sha256((self.str1+ self.str2
                   + self.str3).encode('utf-8')).hexdigest(), 16)
        # print's 937929098002453100804....
        print(hash_val)
        return hash_val
 ...

  testClass = someClass('test', 'testClass', 'testCase')
  hashKey = hash(testClass)
  # print's 377513311013302392
  print(hashKey)
</code></pre>
<p>So when I print from <strong>hash</strong>() I get <code>93792909800245310080479536979750034401273674738852415427366199722413460820022</code>,
but when I print hashkey I get <code>377513311013302392</code>? Why?</p>
<p><strong>EDIT</strong>: So I called <strong>hash</strong>() explicitly and I got the number I was expecting, but since I overrode <strong>hash</strong>(), shouldn't I be getting the same value from hash()?</p>
</div>
<div class="post-text" itemprop="text">
<p>From <a href="https://docs.python.org/3/reference/datamodel.html#object.__hash__" rel="nofollow noreferrer">the docs</a>:</p>
<blockquote>
<p>Note hash() truncates the value returned from an objectâ€™s custom <strong>hash</strong>() method to the size of a Py_ssize_t. This is typically 8 bytes on 64-bit builds and 4 bytes on 32-bit builds.</p>
</blockquote>
<p><code>93792909800245310080479536979750034401273674738852415427366199722413460820022</code> is way above those limits.</p>
<p>Try this:</p>
<pre><code>class C():

    def __hash__(self):
        return 93792909800245310080479536979750034401273674738852415427366199722413460820022

a = C()
b = C()

print(hash(a))
print(hash(b))
</code></pre>
<p>Output:</p>
<pre><code>377513311013302392
377513311013302392
</code></pre>
</div>
<span class="comment-copy">Why do you call <code>hash(someClass)</code>? Don't you mean <code>hash(testClass)</code>?</span>
<span class="comment-copy">Yes, just fixed it</span>
<span class="comment-copy">And is this code the exact code that you use and that return the wrong result?</span>
<span class="comment-copy">Yeah, It's pretty similar to the code I have now.</span>
<span class="comment-copy">"Pretty similar" is not enough. Show us the relevant parts of your real code or provide a short, complete example that demonstrates the error.</span>
