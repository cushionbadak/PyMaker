<div class="post-text" itemprop="text">
<p>I am using the following code for generating some passwords with symbols, numbers and digits.</p>
<p>Sometimes the code works and sometimes not, what is the problem?</p>
<pre><code>import random
import string
import re

template="latex code... placeholder ...other latex code"
latex_passwords=''
for _ in range(30):
    password=''.join(random.choice(string.ascii_lowercase+string.digits+string.ascii_uppercase+string.punctuation) for _ in range(12))
    latex_passwords+=password+'\n'

template=re.sub(r'placeholder',latex_passwords,template)
</code></pre>
<p>Additional details: if you run the code 10 times, almost half of the times it will fail giving the following error at the line with <code>re.sub()</code></p>
<pre><code>  File "/usr/local/Cellar/python3/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/sre_parse.py", line 887, in addgroup
raise s.error("invalid group reference %d" % index, pos)
sre_constants.error: invalid group reference 8 at position 169
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><code>re.sub</code> interprets sequences of <code>\<i>number</i></code> in the replacement as references to groups in the pattern <a href="https://docs.python.org/3/library/re.html#re.sub" rel="nofollow noreferrer">(among other escape sequences)</a>. You can use a plain string replacement instead:</p>
<pre><code>template = template.replace('placeholder', latex_passwords)
</code></pre>
</div>
<span class="comment-copy">The replacement is a randomly generated string, so what can I do?</span>
<span class="comment-copy">@Nisba: You canâ€¦ use a plain string replacement instead. Like it says in the answer.</span>
<span class="comment-copy">that is use the module template: import template at top and then do as suggested</span>
<span class="comment-copy">Ok sorry I thought that a plain string was an hardcoded string like <code>"\\0 this gives no problem"</code></span>
<span class="comment-copy">ok I found, I have to use <code>'string'.unicode(utf8string, 'utf-8')</code></span>
