<div class="post-text" itemprop="text">
<p>I am trying to parse and extract values from my time data <code>2018-03-11 13:15:31.734874+01:00</code>. </p>
<p>I'm using <code>strptime()</code> to do this with the <code>%Y %m %d %H:%M:%S.%f %Z</code> format but I am getting this error:</p>
<pre><code>ValueError: time data '2018-03-11 13:15:31.734874+01:00' does not match format '%Y %m %d %H:%M:%S.%f %Z'
</code></pre>
<p>Also, I don't know how to handle the <code>+1:00</code> in my time data. Can anyone help?</p>
</div>
<div class="post-text" itemprop="text">
<p>There are two problems here to solve.</p>
<p>First is the format string. It should be <code>%Y-%m-%d %H:%M:%S.%f%z</code> to match exact date separators and timezone sequence (without space).</p>
<p><a href="https://docs.python.org/3/library/datetime.html?highlight=strptime#strftime-strptime-behavior" rel="nofollow noreferrer">From strftime and strptime Behavior:</a></p>
<blockquote>
<p><code>%z</code> (lower case)     UTC offset in the form +HHMM or -HHMM (empty string if the object is naive).    (empty), +0000, -0400, +1030</p>
</blockquote>
<p>Second is the colon (:) in timezone offset '+01:00'. That can be left out using substring: s[:-3]+s[-2:] or string substitute.</p>
<p>So the final answer is as below.</p>
<pre class="lang-py prettyprint-override"><code>from datetime import datetime
s = '2018-03-11 13:15:31.734874+01:00'
datetime.strptime(s[:-3]+s[-2:], '%Y-%m-%d %H:%M:%S.%f%z')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><code>%Y %m %d</code>  should be changed to <code>%Y-%m-%d</code> to match with the time string. Also, you need to remove the last <code>:</code> from the input to use with <code>%z</code>.</p>
<p>Here is how you should do:</p>
<pre><code>import datetime
s = '2018-03-11 13:15:31.734874+01:00'
print(datetime.datetime.strptime(''.join(s.rsplit(':', 1)), '%Y-%m-%d %H:%M:%S.%f%z'))

# 2018-03-11 13:15:31.734874+01:00
</code></pre>
</div>
<div class="post-text" itemprop="text">
<h3>At first:</h3>
<p><code>%Y %m %d</code> will not match <code>2018-03-11</code>. You need to adapt it to the time string! <code>%Y-%m-%d</code> instead should work.</p>
<h3>Secondly:</h3>
<p><strong>IF you are in python3</strong>, the <code>%z</code> was added for time stamps. However the timestamp has to be without the colon, e.g. <code>+0100</code>instead of <code>+01:00</code>. Therefore, if you use python3 this works:</p>
<pre><code>&gt;&gt;&gt; time_string = '2018-03-11 13:15:31.734874+01:00'
&gt;&gt;&gt; time_string = ''.join(time_string.rsplit(':', 1))

&gt;&gt;&gt; datetime.datetime.strptime(time_string, '%Y-%m-%d %H:%M:%S.%f%z')
datetime.datetime(2018, 3, 11, 13, 15, 31, 734874, tzinfo=datetime.timezone(datetime.timedelta(0, 3600)))
</code></pre>
<p>Btw the time_string after the editing looks like that:</p>
<pre><code>&gt;&gt;&gt; time_string
'2018-03-11 13:15:31.734874+0100'
</code></pre>
<hr/>
<p><strong>IF you are in python2</strong>, the <code>%z</code> won't work, here you have to use the parse function of the dateutil module, which is straight forward.</p>
<pre><code>&gt;&gt;&gt; from dateutil.parser import parse
&gt;&gt;&gt; parse('2018-03-11 13:15:31.734874+01:00')
datetime.datetime(2018, 3, 11, 13, 15, 31, 734874, tzinfo=tzoffset(None, 3600))
</code></pre>
</div>
<span class="comment-copy">You have dashes <code>-</code> between the parts of your date, not spaces.</span>
<span class="comment-copy">In what data structure, you have time data ?</span>
