<div class="post-text" itemprop="text">
<p>I have test cases in unittest framework. Have integrated them with teamcity.
Teamcity gives success even if my testcase fail. I Think, it is so since my unittest process exit with code 0 which is success for teamcity. I have integrated report, which show test failure. What needs to be done, so that teamcity also show failure if test fails.</p>
<p>code:</p>
<pre><code>import unittest

class Login(unittest.TestCase):

    def test_002_login_failure(self):
        assert 1==2
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You should prefer to use the <code>unittest</code> <a href="https://docs.python.org/3/library/unittest.html#assert-methods" rel="nofollow noreferrer">assertions</a> so for example</p>
<pre><code>self.assertEqual(1, 2)
</code></pre>
<p>Also you can use the <a href="https://pypi.python.org/pypi/teamcity-messages" rel="nofollow noreferrer"><code>teamcity-messages</code></a> module to emit test messages the TeamCity will handle appropriately. Then you could change your <code>main</code> (if you have one) to something like the following</p>
<pre><code>import teamcity
from teamcity.unittestpy import TeamcityTestRunner

if __name__ == '__main__':
    if teamcity.is_running_under_teamcity():
        runner = TeamcityTestRunner()
    else:
        runner = unittest.TextTestRunner()

    unittest.main(testRunner=runner)
</code></pre>
</div>
<span class="comment-copy">self.assertEqual(1, 2) also gives success in teamcity. Also, I am already using runner = HTMLTestRunner.HTMLTestRunner for report generation.</span>
