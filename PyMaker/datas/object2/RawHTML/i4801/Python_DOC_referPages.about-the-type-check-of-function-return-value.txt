<div class="post-text" itemprop="text">
<p>Recently I wanted to give my personal project an idea: I want to select different feature branches based on the return type of the function</p>
<p>For example, func() returns an instance of type A, then selects the branch that adapts to A; returns an instance of type B and selects the branch that adapts to B.</p>
<p>It is well known that the class type of an instance can be simply implemented with the instance method, but how to determine the return value of the function.</p>
</div>
<div class="post-text" itemprop="text">
<p>You might be able to use <a href="https://docs.python.org/3/library/functools.html#functools.singledispatch" rel="nofollow noreferrer"><code>functools.singledispatch</code></a> to do this (Python 3.4+)</p>
<pre><code>In[2]: from functools import singledispatch
  ...: 
  ...: 
  ...: class A:
  ...:     pass
  ...: 
  ...: 
  ...: class B:
  ...:     pass
  ...: 
  ...: 
  ...: def func(obj):
  ...:     return branches(obj)
  ...: 
  ...: 
  ...: @singledispatch
  ...: def branches(arg):
  ...:     print('Not A or B: {}'.format(arg))
  ...: 
  ...: 
  ...: @branches.register(A)
  ...: def _(arg):
  ...:     print('Handle A objects')
  ...: 
  ...: 
  ...: @branches.register(B)
  ...: def _(arg):
  ...:     print('Handle B objects')
  ...: 
In[3]: func(A())
Handle A objects
In[4]: func(B())
Handle B objects
In[5]: func('Something Else')
Not A or B: Something Else
</code></pre>
</div>
