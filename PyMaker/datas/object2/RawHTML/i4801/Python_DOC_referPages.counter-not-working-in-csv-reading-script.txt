<div class="post-text" itemprop="text">
<p>this is my first ever Python script/question on Stackoverflow/step into real coding.</p>
<p>I am looking to count the number of times certain strings appear within the rows I am iterating through then print out the values. I have not set up a delimiter so there is only one column. Essentially I am saying, if the column contains said string, add to the counter.</p>
<p>The problem is, I get an output of 0 for all my variables. Any suggestions?</p>
<p>Here is the code (sorry it's long).</p>
<pre><code># read the CSV file

import csv
with open('example.csv', 'r') as csvfile:

reader = csv.reader(csvfile)

# set up counter variables
googlebot = 0
googlebot_mobile = 0
apis_google = 0
adsense = 0
adsbot_mobile_web_android = 0
adsbot_mobile_web = 0
adsbot = 0
googlebot_images = 0
googlebot_news = 0
googlebot_video = 0
mobile_adsense = 0
mobile_apps_android = 0

# set up counter identifiers
googlebot_string = 'Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)'
googlebot_mobile_string = 'Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)'
apis_google_string = 'APIs-Google (+https://developers.google.com/webmasters/APIs-Google.html)'
adsense_string = 'Mediapartners-Google'
adsbot_mobile_web_android_string = 'Mozilla/5.0 (Linux; Android 5.0; SM-G920A) AppleWebKit (KHTML, like Gecko) Chrome Mobile Safari (compatible; AdsBot-Google-Mobile; +http://www.google.com/mobile/adsbot.html)'
adbot_mobile_web_string = 'Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1 (compatible; AdsBot-Google-Mobile; +http://www.google.com/mobile/adsbot.html)'
adsbot_string = 'AdsBot-Google (+http://www.google.com/adsbot.html)'
googlebot_images_string = 'Googlebot-Image/1.0'
googlebot_news_string = 'Googlebot-News'
googlebot_video_string = 'Googlebot-Video/1.0'
mobile_adsense_string = 'compatible; Mediapartners-Google/2.1; +http://www.google.com/bot.html'
mobile_apps_android_string = 'AdsBot-Google-Mobile-Apps'

# iterate and search for/add to counter
for row in reader:
    if googlebot_string in row:
        googlebot += 1

    elif googlebot_mobile_string in row:
        googlebot_mobile += 1

    elif apis_google_string in row:
        apis_google += 1

    elif adsense_string in row:
        adsense += 1

    elif adsbot_mobile_web_android_string in row:
        adsbot_mobile_web_android += 1

    elif adbot_mobile_web_string in row:
        adsbot_mobile_web += 1

    elif adsbot_string in row:
        adsbot += 1

    elif googlebot_images_string in row:
        googlebot_images += 1

    elif googlebot_news_string in row:
        googlebot_news += 1

    elif googlebot_video_string in row:
        googlebot_video += 1

    elif mobile_adsense_string in row:
        mobile_adsense += 1

    elif mobile_apps_android_string in row:
        mobile_apps_android += 1



# print counts
print "Googlebot (Desktop): ", googlebot
print "Googlebot (Mobile): ", googlebot_mobile
print "APIs Google: ", apis_google
print "AdSense: ", adsense
print "AdsBot Mobile Web Android: ", adsbot_mobile_web_android
print "AdsBot Mobile Web: ", adsbot_mobile_web
print "AdsBot: ", adsbot
print "Googlebot Images: ", googlebot_images
print "Googlebot News: ", googlebot_news
print "Googlebot Video: ", googlebot_video
print "Mobile AdSense: ", mobile_adsense
print "Mobile Apps Android: ", mobile_apps_android
</code></pre>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<p>I have not set up a delimiter so there is only one column</p>
</blockquote>
<p>If you do not specify a delimiter, the default one is used, which is a comma <code>,</code>. So, there still may be multiple columns and, therefore, multiple elemtns in the list <code>row</code>.</p>
<p>Now, the string in <code>googlebot_string</code> also contains commas, so, if this string is present in your input CSV, it never appears in <code>row</code> as a single element. Therefore <code>googlebot_string in row</code> is always <code>false</code>. Some of the other <code>*_string</code> strings have the same problem.</p>
<p>You can open the file just as a text file (without using the <code>csv</code> module) and iterate over the lines.</p>
<p>A dirty solution would be to specify a character that is not present in your input file as delimiter for <code>csv.reader</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>You are reading the file outside the <code>with</code> context manager.
Your code should be:</p>
<pre><code>with open('example.csv', 'r') as csvfile:
    reader = csv.reader(csvfile)
</code></pre>
<p>otherwise you are opening and closing the file before even reading it.</p>
<p>EDIT:</p>
<p>As @yann-vernier has pointed out, <code>reader</code> must be consumed inside the <code>with</code> block. That is, the <code>for</code> loop should be all indented.</p>
</div>
<span class="comment-copy">Looks like there is quite a bit of repetition in there, and the <code>else-if</code>-control flow doesn't seem to make any sense, because it increments at most one counter in each string. Have you considered using an arrays instead of the thousand separate variables?</span>
<span class="comment-copy">There's a handy dictionary subclass for this sort of thing named <a href="https://docs.python.org/3/library/collections.html#collections.Counter" rel="nofollow noreferrer"><code>collections.Counter</code></a>.</span>
<span class="comment-copy">@AndreyTyukin Can you elaborate a bit further on how it doesn't make sense? There will only ever be one of the variables I created (represented by the strings under #counter identifiers) present within a row. Therefore I would only expect one of them to increment in every row.  Can you clarify whether or not it is correct syntax to say elif googlebot_mobile_string in row.   I'll look into arrays to make things easier to read.</span>
<span class="comment-copy">@Matt Ah, ok... If you are expecting at most one keyword per line, then the <code>elif</code> is correct, and even more efficient than checking every keyword every time. It wouldn't work as expected if there was more than one keyword per line, but that was not required, apparently. Still, quite a bit of duplication there.</span>
<span class="comment-copy">This solved my problem thank you! I ended up using " as the delimiter and it worked.</span>
<span class="comment-copy">Cool, I've accepted and upvoted (upvote wont show because I have less than 15 rep)</span>
<span class="comment-copy">Apologies, the code must've not translated properly when I copied and pasted it. I have the code laid out exactly as you have.</span>
<span class="comment-copy">That's not enough. The <code>reader</code> must consume the contents of the file within the <code>with</code> block.</span>
