<div class="post-text" itemprop="text">
<p>I have a following script which checks whether a python module is installed or not.</p>
<pre><code>{

ipython -c 'from package import module' &amp;&amp; echo "Successful import"

} || echo "package not found!"
</code></pre>
<p>This is a typlical <code>try..catch</code> syntax of bash. If the command before &amp;&amp; would work it will execute the command after that otherwise execute the command after ||.</p>
<p>But in this case, whether <code>package</code> is installed or not, or should I say whether the command</p>
<pre><code>ipython -c 'from package import module'
</code></pre>
<p>returns <code>None</code> or <code>ImportError</code>, bash reads it as successful execution and prints "Successful import"</p>
<p>How can I check for a successful import of a python package using bash? </p>
<p>EDIT : And return with exit status 1?</p>
</div>
<div class="post-text" itemprop="text">
<p>You have at least two possibilities:</p>
<ul>
<li><p>Using "pip" on your shell script to get the list of installed packages then grep for tour package:</p>
<p>pip list |  grep yourpackage &amp;&amp; echo installed || echo "NOT Installed"</p></li>
<li><p>Using Python-bash script, I don't know exactly how to call it but I know how to use it:</p></li>
</ul>
<p>Something like:</p>
<pre><code>output=$(
python - &lt;&lt;EOF
try:
    import your_package;
    print "Package Installed"
except Exception:
    print "Package not installed"
EOF
)

echo $output
</code></pre>
<p>here you have alot of alternatives to check for the existence of the package/module, so, intead of trying to import the package, you can check it's existence in a pythonic way. You can grab the different solutions for this <a href="https://stackoverflow.com/questions/14050281/how-to-check-if-a-python-module-exists-without-importing-it">answer</a> or <a href="https://stackoverflow.com/questions/4527554/check-if-module-exists-if-not-install-it-in-python">this</a> and replace the <code>import your_package;</code> with one of them.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use the exception <code>SystemExit(msg=None)</code> with any message that's not <code>None</code> or <code>0</code>. If it's uncaught, it'll cause the program to end, and if the <code>msg</code> is not <code>None</code> or <code>0</code>, with an exit code of <code>1</code>. (see: <a href="https://docs.python.org/3/library/exceptions.html#SystemExit" rel="nofollow">https://docs.python.org/3/library/exceptions.html#SystemExit</a>). </p>
<p>test.py</p>
<pre><code>try:
    import Blue
except ImportError:
    raise SystemExit("Import Error!")
</code></pre>
<p>in bash:</p>
<pre><code>[user]@[host] $ python test.py 
Import Error!

[user]@[host] $ python test.py || echo "blarg"
Import Error!
blarg

[user]@[host] $ python test.py &amp;&amp; echo "blarg"
Import Error!
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use the <code>python</code> command for running code snippets programmatically, instead of <code>ipython</code>.</p>
<p>There's an outstanding bug about this:
<a href="https://github.com/ipython/ipython/issues/6912" rel="nofollow">https://github.com/ipython/ipython/issues/6912</a></p>
</div>
<span class="comment-copy">That helped. But It's not exiting with status 1. How can I do that?</span>
<span class="comment-copy">The python process does. That's why the first <code>echo</code> is executed but the second one is not.</span>
<span class="comment-copy">@HimanshuMishra Are you calling python with <code>python</code> or <code>ipython</code>?</span>
<span class="comment-copy">Yes. I'm sorry. I checked it with <code>echo $?</code> and it gave me the status <code>1</code>. But, I'm running this on travis and it exits with status 0. I'm running this with python.</span>
