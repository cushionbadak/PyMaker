<div class="post-text" itemprop="text">
<p>I'm trying to write a text file from an ftp site to a file on my machine, like so:</p>
<pre><code>ftp = FTP(ftpName)
ftp.login()
ftp.cwd(filePath)
foo=open(myFile,"w")
ftp.retrlines("RETR stlint",foo.write)
ftp.close()
</code></pre>
<p>the file is writing successfully, but when I open my file, there are no newline characters. Any suggestions? </p>
</div>
<div class="post-text" itemprop="text">
<p>According to ftplib <a href="https://docs.python.org/2/library/ftplib.html#ftplib.FTP.retrlines" rel="nofollow">documentation</a> -</p>
<blockquote>
<p>FTP.retrlines(command[, callback])</p>
<p>... The callback function is called for each line with a string argument containing the line with the trailing CRLF stripped. The default callback prints the line to sys.stdout.</p>
</blockquote>
<p>Perhaps you can create your own callback function that appends the newline when writing the line to file.</p>
<p>Example -</p>
<pre><code>ftp = FTP(ftpName)
ftp.login()
ftp.cwd(filePath)
foo=open(myFile,"w")
def customWriter(line):
    foo.write(line + "\n")
ftp.retrlines("RETR stlint",customWriter)
ftp.close()
foo.close()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If you look at <a href="https://docs.python.org/3/library/ftplib.html#ftplib.FTP.retrlines" rel="nofollow">the documentation</a> you will see that calling <code>retrlines</code> with the optional callback will strip the newlines at the end of each line first before calling the callback.</p>
<p>You could just create your own callback that appends a newline:</p>
<pre><code>def append_newline(input):
    foo.write(input + "\n")
</code></pre>
<p>then use this with:</p>
<pre><code>ftp.retrlines("RETR stlint", append_newline)
</code></pre>
</div>
