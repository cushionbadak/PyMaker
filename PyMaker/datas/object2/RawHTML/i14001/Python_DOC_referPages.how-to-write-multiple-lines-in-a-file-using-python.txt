<div class="post-text" itemprop="text">
<p>i know how to write multiple lines to a file, if I know how many I want to write. But, the problem comes when I want to write multiple lines, but, I don't know how much they will be</p>
<p>I am working on an app which scraps from a website and stores the links of the result in a text file. But, we don't know how many lines will it reply with. My code is as follows right now. </p>
<pre><code>r = requests.get('http://www.crunchyroll.com/i-cant-understand-what-my-husband-is-saying')
soup = BeautifulSoup(r.text)
print soup.title
subtitles = soup.findAll('div',{'class':'wrapper container-shadow hover-classes'})
for episode in subtitles:
  x = episode.find_all('a')
  for a in x:
   #print a['href']

   z = a['href']

  l = 'http://www.crunchyroll.com'+ z
  print l
</code></pre>
<p>This gives me the desired output.So,I tried to write stuff up in a file by adding :</p>
<pre><code>file = open("BatchLinks.txt", "w")
file.write(l)
file.close()
</code></pre>
<p>But, unfortunately, it only writes the first link. How can I add other links too?</p>
</div>
<div class="post-text" itemprop="text">
<p>Make sure to write the link inside the for loop. Using a <code>with</code> command save you for manually closing the file as well.
This should work:</p>
<pre><code>r = requests.get('http://www.crunchyroll.com/i-cant-understand-what-my-husband-is-saying')
soup = BeautifulSoup(r.text)
print soup.title
subtitles = soup.findAll('div',{'class':'wrapper container-shadow hover-classes'})

with open("BatchLinks.txt","w") as file: 

    for episode in subtitles:
        x = episode.find_all('a')
        for a in x:

            z = a['href']

            link = 'http://www.crunchyroll.com'+ z
            print link
            file.write(link)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Just open the file <strong>first</strong> then write as you iterate:</p>
<pre><code> with open(fa, "w") as f:
    r = requests.get('http://www.crunchyroll.com/i-cant-understand-what-my-husband-is-saying')
    soup = BeautifulSoup(r.text)
    print soup.title
    subtitles = soup.findAll('div', {'class': 'wrapper container-shadow hover-classes'})
    for episode in subtitles:
        x = episode.find_all('a')
        for a in x:
            z = a['href']
            f.write('http://www.crunchyroll.com{}\n'.format(z) )
</code></pre>
<p>Unless you want all links in the one line you need the <code>\n</code> at the end of the joined link. Your code would also write the last link not the first.</p>
<p>Output:</p>
<pre><code>http://www.crunchyroll.com/i-cant-understand-what-my-husband-is-saying/episode-13-happy-days-678059
http://www.crunchyroll.com/i-cant-understand-what-my-husband-is-saying/episode-12-baby-skip-beat-678057
http://www.crunchyroll.com/i-cant-understand-what-my-husband-is-saying/episode-11-the-weight-of-value-and-the-value-of-weight-678055
http://www.crunchyroll.com/i-cant-understand-what-my-husband-is-saying/episode-10-fool-couple-678053
http://www.crunchyroll.com/i-cant-understand-what-my-husband-is-saying/episode-9-made-a-wish-it-came-true-and-i-got-in-trouble-678051
.........................
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The following code should allow you to write multiple lines to a file. </p>
<pre><code> with open(fa, "w") as f:
    r = requests.get('http://www.crunchyroll.com/i-cant-understand-what-my-  husband-is-saying')
    soup = BeautifulSoup(r.text)
    print soup.title
    subtitles = soup.findAll('div', {'class': 'wrapper container-shadow  hover-classes'})
    for episode in subtitles:
        x = episode.find_all('a')
        for a in x:
            z = a['href']
            f.write('http://www.crunchyroll.com{}\n'.format(z) )
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow">https://docs.python.org/3/library/functions.html#open</a></p>
<blockquote>
<p>'w'   open for writing, truncating the file first</p>
</blockquote>
<p>Each time you open the file with mode 'w' you truncate it, which means to discard any existing contents.  You probably want to keep the file open until you are finished writing, then close it.</p>
</div>
<span class="comment-copy">Open the file before your <code>for episode in subtitles</code> loop, write <code>l</code> plus a newline char (if you want it) each time through the loop, then close the file once the loop exits.</span>
<span class="comment-copy">worked like a charm!! thanx a ton NightHallow!!!</span>
<span class="comment-copy">Change fa to whatever name you want to save the file as</span>
<span class="comment-copy">Please consider editing your post to add more explanation about what your code does and why it will solve the problem. An answer that mostly just contains code (even if it's working) usually wont help the OP to understand their problem. It's also recommended that you don't post an answer if it's just a guess. A good answer will have a plausible reason for why it could solve the OP's issue.</span>
<span class="comment-copy">@SuperBiasedMan , ok dude will consider that next time &lt;3</span>
