<div class="post-text" itemprop="text">
<p>I found this code snippet online for a python terminal emulator, I thought it looked cool so I went ahead and attempted to use it. I noticed that I'm not able to use the "cd" command, I'm stuck in the directory I ran the file in. Why is this? What's going on? And how can I modify this code to make it  run like a perfect native terminal? I'm still very new to programming and have only played with the subprocess module once in my life. Please help! </p>
<pre><code>import subprocess
import re

while True:
    # prevents lots of python error output
    try:
        s = raw_input('&gt; ')
    except:
        break

    # check if you should exit
    if s.strip().lower() == 'exit':
        break

    # try to run command
    try:
        cmd = subprocess.Popen(re.split(r'\s+', s), stdout=subprocess.PIPE)
        cmd_out = cmd.stdout.read()

        # Process output
        print cmd_out

    except OSError:
        print 'Invalid command'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>When you open a new process you change the current directory for the new process and not for the calling process. You should use <code>os.chdir</code> instead to change the directory of your program. So you need to parse the command line and check if the command is <code>cd</code> and then decide not to call <code>Popen</code> but <code>os.chdir</code> instead.</p>
</div>
<span class="comment-copy">Because you would  need to use os.chdir to change directory, changing the directory for the process has no effect, Also why are you using re to split on whitespace and what error are you catching from raw_input?</span>
<span class="comment-copy">If you want to make a <i>real</i> terminal emulator, youâ€™ll need to use <a href="https://docs.python.org/3/library/pty.html" rel="nofollow noreferrer">the <code>pty</code> module</a>.</span>
<span class="comment-copy">Maybe you mean shell rather than terminal emulator? You're running in a terminal emulator and making this code more capable of running things like 'cd' is not going to bring it any closer to being a terminal emulator.</span>
<span class="comment-copy"><code>cd</code> is always a shell built-in command. it doesn't exist in file system. there's no such executable file.</span>
