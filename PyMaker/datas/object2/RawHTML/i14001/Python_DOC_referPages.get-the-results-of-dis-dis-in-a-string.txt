<div class="post-text" itemprop="text">
<p>I am trying to compare the bytecode of two things with difflib, but dis.dis() always prints it to the console. Any way to get the output in a string?</p>
</div>
<div class="post-text" itemprop="text">
<p>Uses StringIO to redefine std out to a string-like object (python 2.7 solution)</p>
<pre><code>import sys
import StringIO
import dis

def a():
    print "Hello World"

stdout = sys.stdout # Hold onto the stdout handle
f = StringIO.StringIO()
sys.stdout = f # Assign new stdout

dis.dis(a) # Run dis.dis()

sys.stdout = stdout # Reattach stdout

print f.getvalue() # print contents
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If you're using Python 3.4 or later, you can get that string by using the method <a href="https://docs.python.org/3/library/dis.html#dis.Bytecode.dis" rel="nofollow"><code>Bytecode.dis()</code></a>:</p>
<pre><code>&gt;&gt;&gt; s = dis.Bytecode(lambda x: x + 1).dis()
&gt;&gt;&gt; print(s)
  1           0 LOAD_FAST                0 (x)
              3 LOAD_CONST               1 (1)
              6 BINARY_ADD
              7 RETURN_VALUE
</code></pre>
<p>You also might want to take a look at <a href="https://docs.python.org/3/library/dis.html#dis.get_instructions" rel="nofollow"><code>dis.get_instructions()</code></a>, which returns an iterator of named tuples, each corresponding to a bytecode instruction.</p>
</div>
<span class="comment-copy">@DanGetz Edited question.</span>
<span class="comment-copy">If anyone gets here and is looking for a Python 2 solution, see <a href="http://stackoverflow.com/q/12111717/3004881">this other question</a>.</span>
<span class="comment-copy">I like this. It is dynamic.</span>
