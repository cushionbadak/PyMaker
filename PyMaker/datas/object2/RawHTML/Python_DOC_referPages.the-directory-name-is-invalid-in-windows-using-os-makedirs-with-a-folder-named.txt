<div class="post-text" itemprop="text">
<p>I'm trying to create a folder that is valid according to the lib <code>os</code> in Windows.</p>
<pre><code># Replace &lt;user&gt;
filePath = r"C:\Users\&lt;user&gt;\AppData\Local\Temp\aux")
if not os.path.exists(filePath) and os.access(os.path.dirname(filePath), os.W_OK):
    os.makedirs(filePath)
</code></pre>
<p>But it failes with the following error</p>
<pre><code>Traceback (most recent call last):
  File "C:\Users\&lt;user&gt;\Anaconda3\lib\site-packages\IPython\core\interactiveshell.py", line 3267, in run_code
    exec(code_obj, self.user_global_ns, self.user_ns)
  File "&lt;ipython-input-8-a7b7e2731f40&gt;", line 1, in &lt;module&gt;
    os.makedirs(filePath)
  File "C:\Users\&lt;user&gt;\Anaconda3\lib\os.py", line 221, in makedirs
    mkdir(name, mode)
NotADirectoryError: [WinError 267] The directory name is invalid: 'C:\Users\&lt;user&gt;\AppData\Local\Temp\aux'
</code></pre>
<p>The problem? <a href="https://docs.microsoft.com/en-us/windows/desktop/fileio/naming-a-file" rel="nofollow noreferrer">You can't use "aux" as a folder name in Windows</a>.</p>
<p>Is there a workaround in python to:</p>
<ul>
<li>"Really" check if the folder is valid (the "if" in the code above is not enough)</li>
<li>Create the folder anyway?</li>
</ul>
</div>
<div class="post-text" itemprop="text">
<p>In general, filesystem operations are where it's <a href="https://stackoverflow.com/questions/11360858/what-is-the-eafp-principle-in-python">Easier to Ask for Forgiveness than Permission</a>.</p>
<p>The best way to do this is to try to create the directory, catch the <code>OSError</code> if it fails, and then handle the failure.</p>
</div>
<span class="comment-copy">The way to check to see if the folder is valid is to try to create it, and handle the error.</span>
<span class="comment-copy">In an other circumstance you might want to use <a href="https://docs.python.org/3/library/os.html#os.makedirs" rel="nofollow noreferrer"><code>exist_ok=True</code></a>. In your case however you want to know that it did not create the directory.</span>
<span class="comment-copy">DOS device names are reserved by user-mode code in the system runtime library, not by the filesystem driver in the kernel. So we can create a file or directory with a reserved DOS-device name by using a local-device path -- i.e. a fully-qualified path prefixed by "\\\\.\\" or "\\\\?\\". But it won't be accessible to programs that only support classic DOS paths.</span>
<span class="comment-copy"><a href="https://docs.microsoft.com/en-us/windows/desktop/FileIO/naming-a-file" rel="nofollow noreferrer">Here's a link to documentation for everything you could want to know about naming files/folders in Windows</a></span>
<span class="comment-copy">What would be the correct way to check in this case?</span>
<span class="comment-copy">Just call <code>os.makedirs</code>. If it succeeds, it succeeds. If the directory name was invalid, you'll get a <code>NotADirectoryError</code> like you observed.</span>
