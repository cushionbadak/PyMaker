<div class="post-text" itemprop="text">
<p>I am building a set of KD-trees for some problem. But I realised, I do not need to load the files and construct the same set of KD-trees again and again, if I manage to somehow write then to hardisk, and just read them again. </p>
<p>Upon searching a bit, I hit upon the example below, but not sure where does it dumps the file. How can I store it in hard-disk to some example location(C:\my_file):</p>
<pre><code>import pickle
import scipy.spatial
tree=scipy.spatial.cKDTree([[1,2,3]])
raw = pickle.dumps(tree)

t2 = pickle.loads(raw)
</code></pre>
<p>And after saving reload it from that location: <code>pickle.load(C:\my_file\raw)</code></p>
<p>Is it even possible? What are some other possible ways to do it?</p>
</div>
<div class="post-text" itemprop="text">
<p>Start with the <a href="https://docs.python.org/3/library/pickle.html#module-interface" rel="nofollow noreferrer">docs</a>.</p>
<p>Then you will hit this usage along the way:</p>
<pre><code>with open('my_path/my_file.pickle', 'wb') as f:
    pickle.dump(tree, f)                # pickle.dump != pickle.dumps !

with open('my_path/my_file.pickle', 'rb') as f:
    tree = pickle.load(f)
</code></pre>
<p>There is a lot to say about pickle-protocols, relative vs. absolute paths and co., but the documentation is the way to go there!</p>
<p>(Sometimes you might hit a problem when an object is not ready to be pickled (again: python-docs). But in terms of scipy and sklearn, pickling should be possible for most interesting use-cases)</p>
</div>
<span class="comment-copy"><code>pickle.dump(kdtree, file)</code> pickles to a file and <code>pickle.load(file)</code> can be used to load the tree again. You were looking at <code>dumps</code> that dumps to an in-memory string.</span>
<span class="comment-copy">thanks, and how do I read it again?</span>
<span class="comment-copy">By using the inverse-function; pickle.load (as documented).</span>
