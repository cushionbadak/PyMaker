<div class="post-text" itemprop="text">
<p>I am trying to make a template filter to show who liked a post. Each comment contains a ManyToManyField with the users who upvoted a post. I am trying to use the join method to simplify my code instead of using a for loop. This does not work and I get the error ManyToManyField is not iterable.</p>
<pre><code> #post.html
    ...
    &lt;span class="tooltip_text"&gt;{{ comment.user_upvotes.all|format_upvote_users }}&lt;/span&gt;
    ...

#template_filters.py
@register.filter
def format_upvote_users(queryset):
    # This works:
    upvoters = ''
    for user in queryset:
        upvoters += ', ' + user
    # This doesn't:
    upvoters = ','.join(user in queryset)
    ...
    return upvoters
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You will need to do that like:</p>
<pre><code>upvoters = ','.join(user for user in queryset)
</code></pre>
<p>See (<a href="https://docs.python.org/3/reference/expressions.html#generator-expressions" rel="nofollow noreferrer">Docs</a>)</p>
</div>
<div class="post-text" itemprop="text">
<p>Maybe something like</p>
<p>upvote = [ user.link for user in queryset ]</p>
</div>
<span class="comment-copy">Works, will accept when stack allows. Any quick explanation for why this works without scanning the docs?</span>
