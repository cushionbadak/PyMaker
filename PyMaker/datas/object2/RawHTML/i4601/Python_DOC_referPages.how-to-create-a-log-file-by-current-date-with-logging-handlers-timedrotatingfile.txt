<div class="post-text" itemprop="text">
<p>i run a list of tasks once an hour,but i want to get the log file named by current date. </p>
<pre><code>def get_mylogger():
    # get logger
    fmt = '%(asctime)-15s %(levelname)-4s %(message)s'
    datefmt = '%Y-%m-%d %H:%M:%S'

    mylogger = logging.getLogger()
    mylogger.setLevel(logging.INFO)

    # log_path = "/opt/spark/logs/pyspark/"
    log_path = "H:\upupw\www\spark\logs\pyspark"
    if not os.path.exists(log_path):
        os.makedirs(log_path)
    log_file_name = 'spark.log'
    log_name = os.path.join(log_path, log_file_name)

    # TimedRotatingFileHandler
    timer = TimedRotatingFileHandler(log_name, when='D')

    formatter = logging.Formatter(fmt, datefmt=datefmt)
    timer.setFormatter(formatter)
    mylogger.addHandler(timer)

    return mylogger
</code></pre>
<p>if i create the first log file 'spark.log' in '10:00:00', But it won't create a new file until '10:00:00' tomorrow. What I want is to create a new file tomorrow at 0!</p>
</div>
<div class="post-text" itemprop="text">
<p>According to the <a href="https://docs.python.org/3/library/logging.handlers.html#timedrotatingfilehandler" rel="nofollow noreferrer">logging documentation for TimedRotatingFileHandler</a> you might want to use the additional parameter <code>atTime</code> within your <code>TimedRotatingFileHandler</code> function call like this:</p>
<pre><code>timer = TimedRotatingFileHandler(log_name, when='D', atTime=datetime.time(0, 0, 0))
</code></pre>
<p>Like described in the docu:</p>
<blockquote>
<p>If atTime is not None, it must be a datetime.time instance which specifies the time of day when rollover occurs, for the cases where rollover is set to happen “at midnight” or “on a particular weekday”. Note that in these cases, the atTime value is effectively used to compute the initial rollover, and subsequent rollovers would be calculated via the normal interval calculation.</p>
</blockquote>
<p>...you need to provide the rollover time as a instance of <code>datetime.time()</code>. This is done by passing the wanted rollover time as arguments to the <a href="https://docs.python.org/3/library/datetime.html#available-types" rel="nofollow noreferrer">datetime.time class</a>. Pass the hours as first, minutes as second and seconds as third argument. The above example sets the rollover time to 00:00:00.</p>
<p>Note: be sure to</p>
<pre><code>import datetime
</code></pre>
<p>in the beginning of your code.</p>
</div>
<span class="comment-copy">in python2.7, TimedRotatingFileHandler doesn't have this param.in python3.6 does. thanks as well</span>
<span class="comment-copy">for python2.7, <a href="https://docs.python.org/2.7/library/logging.handlers.html#timedrotatingfilehandler" rel="nofollow noreferrer">TimedRotatingFileHandler</a> provides the additional parameter <i>when</i>, which accepts the value: <code>when=midnight</code>. Please accept and upvote my answer if it was helpful to you.</span>
