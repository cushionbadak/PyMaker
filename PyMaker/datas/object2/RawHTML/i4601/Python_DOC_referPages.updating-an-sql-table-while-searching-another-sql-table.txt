<div class="post-text" itemprop="text">
<p>I have an SQL database "Garage.db" that has 3 tables:
Customer, Car and MOT</p>
<p>I want to update the field BookedMOT in the MOT table when someone has entered a Registration that is in the Car table. Can someone help me with the SQL query that can do this, thank you.</p>
<p>I am coding this in python 3.6 using tkinter. Here is my attempt,</p>
<pre><code>    def Booked(self):
        date = Date.get()
        month = Month.get()
        year = Year.get()
        BookedMOT = (date + '/' + month + '/' + year)
        Registration = self.RegistrationEnt.get()
        with sqlite3.connect('Garage.db') as db:
            cursor = db.cursor()

        add_date = ('UPDATE MOT SET MOT.BookedMOT = ? FROM Car WHERE Car.Registration = ?')
        cursor.execute(add_date,[(BookedMOT), (Registration)])
        db.commit()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>(this addresses some Python problems I noticed before even realising that the SQL didn't look right, which should probably be fixed first)</p>
<p>Try this:</p>
<pre><code>with sqlite3.connect('Garage.db') as db:
    db.execute(add_date, (BookedMOT, Registration))
</code></pre>
<p>In general, when you say <code>with ... as x:</code>, you should probably use <code>x</code> inside the <code>with</code> block. After the block finished it did an automatic commit and trying to use <code>db</code> or <code>cursor</code> afterwards is probably incorrect. The <code>with</code> also means that you don't have to <code>db.commit()</code> any more.</p>
<p><a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection.execute" rel="nofollow noreferrer">sqlite3 connection objects (<code>db</code> in this case) have an <code>execute</code> method:</a></p>
<blockquote>
<p>This is a nonstandard shortcut that creates a cursor object by calling the cursor() method, calls the cursor’s execute() method with the parameters given, and returns the cursor.</p>
</blockquote>
<p>Finally, you had some redundant parentheses that could be removed.</p>
</div>
<span class="comment-copy">are you getting an error?</span>
<span class="comment-copy">cursor.execute(add_date,[(BookedMOT), (Registration)]) sqlite3.OperationalError: near ".": syntax error</span>
<span class="comment-copy">Updates don't deal with multiple tables. What are you conceptually trying to do here? You can't specify a row from the MOT table using constraints on the Car table. Perhaps you want something like this? <a href="https://stackoverflow.com/questions/329197/cross-table-update-in-sqlite3" title="cross table update in sqlite3">stackoverflow.com/questions/329197/…</a></span>
<span class="comment-copy">I don't have BookedMOT in the Car table, so I'm not sure. I'm relatively new to coding but I was thinking of maybe using JOIN?</span>
<span class="comment-copy">Show us the definitions of the SQL tables and maybe explain a bit of the reasoning behind them, particularly how they're related.</span>
<span class="comment-copy">I still get this error, db.execute(add_date, (BookedMOT, Registration))sqlite3.OperationalError: near ".": syntax error –</span>
