<div class="post-text" itemprop="text">
<p>I want to create a function called jaccard that works something like this</p>
<pre><code>def jaccard(doc1, doc2):
    inter = len(np.intersect1d(doc1, doc2))
    union = len(np.union1d(doc1, doc2))
    jaccard = float(inter)/union
    return jaccard
</code></pre>
<p>Except I only want it to take one parameter and have the other parameter hard coded into the function.</p>
<p>I want to write a function that will generate this function with the hard coded parameter because I need to use it with thousands of parameters.</p>
<pre><code>def jaccard(doc2):
    inter = len(np.intersect1d(['Work with us --- The Missing Slate Magazine'], doc2))
    union = len(np.union1d(['Work with us --- The Missing Slate Magazine'], doc2))
    jaccard = float(inter)/union
    return jaccard
</code></pre>
<p>So I want to generate a function like this.</p>
<p>The reason I want this is because I want to apply it to a column of a Pandas DataFrame. The data frame contains a list of strings. I want to find the jaccard distance for each of them with the hard coded parameter in the function.</p>
<p>Thank you in advance!</p>
</div>
<div class="post-text" itemprop="text">
<p>You can create closures in python. For instance</p>
<pre><code>def jacard(doc1):
    def _jacard(doc2):
        inter = len(np.intersect1d(doc1, doc2))
        union = len(np.union1d(doc1, doc2))
        return float(inter)/union
    return _jacard
</code></pre>
<p>then: </p>
<pre><code>prepared_func = jacard(doc1)
</code></pre>
<p>afterwards:</p>
<pre><code>results = map(prepared_func, some_array_of_doc2s)
</code></pre>
<p>partial argument binding using functools in this case is a shorthand for creating a closure with argument doc2 bound.</p>
<pre><code>prepared_func = functools.partial(jaccard, doc1) 
</code></pre>
</div>
<span class="comment-copy">I don't understand.  Didn't you just answer your own question?  Put the strings in the function and you are good to go.  What am I missing?</span>
<span class="comment-copy">I want to make a function that returns that function below. I will clarify with edits.</span>
<span class="comment-copy">Uh, what are the contents of the column in your data-frame?</span>
<span class="comment-copy">Just use a decorator? Or a wrapper function?</span>
<span class="comment-copy"><a href="https://docs.python.org/3/library/functools.html#functools.partial" rel="nofollow noreferrer"><code>functools.partial(jaccard, doc1)</code></a>?</span>
