<div class="post-text" itemprop="text">
<p>I wrote a simple script <code>test.py</code>, containing:</p>
<pre><code>print('hello')
</code></pre>
<p>and then use <code>python -O test.py</code> to run it. I expected this to create a <code>test.pyo</code> file but it did not. </p>
<p>My version is Python 3.5.2. Why was no cache file created?</p>
</div>
<div class="post-text" itemprop="text">
<p>Python only creates bytecode cache files for <em>imported modules</em>. The main script (here <code>test.py</code>) is not cached. It doesn't matter what optimisation level is applied.</p>
<p><em>Import</em> <code>test</code>:</p>
<pre><code>$ python -O -c 'import test'
hello
$ ls __pycache__
test.cpython-35.opt-1.pyc
</code></pre>
<p>Note that the cache file was created in a <em>separate directory</em>, named <code>__pycache__</code>, and that the filename is based not only on the module name, but also on the Python version and the optimisation level; use <code>-OO</code> to get <code>.opt-2</code>. As of Python 3.5, the <code>.pyo</code> filename extension is no longer used, see <a href="https://www.python.org/dev/peps/pep-0488/" rel="nofollow noreferrer">PEP 488 -- <em>Elimination of PYO files</em></a>, and see <a href="https://www.python.org/dev/peps/pep-3147/" rel="nofollow noreferrer">PEP 3147 -- <em>PYC Repository Directories</em></a> as to why a separate directory is used.</p>
<p>If you want to pre-compile your modules, use the <a href="https://docs.python.org/3/library/compileall.html" rel="nofollow noreferrer"><code>python3 -m compileall</code> tool</a>.</p>
</div>
