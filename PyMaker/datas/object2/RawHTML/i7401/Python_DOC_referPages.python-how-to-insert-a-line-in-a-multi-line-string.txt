<div class="post-text" itemprop="text">
<p>I'm trying to make a simple website demo and I have some trouble editing the html using python. The following is the string I defined to store the html (not complete because it's too long). I want to write a function that will throw a error under a certain condition, but I don't know how to insert a line in the string "page".</p>
<pre><code>page="""
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Sign up&lt;/title&gt;
    &lt;style type="text/css"&gt;
      .label {text-align: right}
      .error {color: red}
    &lt;/style&gt;

  &lt;/head&gt;

  &lt;body&gt;
    &lt;h2&gt;Sign up&lt;/h2&gt;
    &lt;form method="post"&gt;
      &lt;table&gt;
        &lt;tr&gt;
          &lt;td class="label"&gt;
            Username
          &lt;/td&gt;
          &lt;td&gt;
            &lt;input type="text" name="username" value=""&gt;
          &lt;/td&gt;
          &lt;td class="error"&gt;

          &lt;/td&gt;
        &lt;/tr&gt;

        &lt;tr&gt;
          &lt;td class="label"&gt;
            Password
          &lt;/td&gt;
          &lt;td&gt;
            &lt;input type="password" name="password" value=""&gt;
          &lt;/td&gt;
          &lt;td class="error"&gt;

          &lt;/td&gt;
        &lt;/tr&gt;
</code></pre>
<p>I want to insert the line "There is an error" in the blank between these two lines:</p>
<pre><code>&lt;td class="error"&gt;

&lt;/td&gt;
</code></pre>
<p>Note there are two of this group in the string. How can I insert "There is an error" in the first group using Python? Thanks. </p>
</div>
<div class="post-text" itemprop="text">
<p>python uses C style format strings.</p>
<pre><code>page="""&lt;html&gt;
       ......
      &lt;td class="error"&gt;
         %s
      &lt;/td&gt;
    &lt;/tr&gt;"""  % "There was an error"
</code></pre>
<p>alternatively, you can use python string.format as </p>
<pre><code>"fooo {x}".format(x="bar"). 
</code></pre>
<p>see (<a href="https://docs.python.org/2/library/string.html" rel="nofollow noreferrer">https://docs.python.org/2/library/string.html</a>);</p>
<p>jinja is an excellent template engine if you've got the time.  Genshi (<a href="https://genshi.edgewall.org/wiki/GenshiTutorial" rel="nofollow noreferrer">https://genshi.edgewall.org/wiki/GenshiTutorial</a>) is worth looking into as well.</p>
<p>for Jinja2:</p>
<pre><code>pip install Jinja2
</code></pre>
<p>in python</p>
<pre><code>from jinja2 import Template
page = Template("""&lt;html&gt; .... 
&lt;td class="error"&gt;{{x}}&lt;/td&gt;
""")
page.render(x="There was an error")
</code></pre>
</div>
<span class="comment-copy">have a look at template engines; e.g.: <a href="http://jinja.pocoo.org/" rel="nofollow noreferrer">jinja.pocoo.org</a> . or use <a href="https://docs.python.org/3/library/stdtypes.html#str.format" rel="nofollow noreferrer">python string formatting</a>.</span>
<span class="comment-copy">Thanks for your answer. I tried the first method and it worked. But I when I tried  <code>self.response.out.write(page % "There was an error")</code>(self is inherited from webapp2.RequestHandler), "%s" is printed out instead of the error message. Why can't I do it this way?</span>
<span class="comment-copy">thats odd. I'd have to see more to replicate, % should blow up if it can't consume all the arguments or doesn't get enough.</span>
