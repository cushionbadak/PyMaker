<div class="post-text" itemprop="text">
<p>I came across some accuracy issues in my program, using <code>Decimal</code>.</p>
<p>A simple repro:</p>
<pre><code>from decimal import Decimal

print Decimal(1910944005427272400562113336049664)
print Decimal(1910944005427272400562113336049664)**1
print int(Decimal(1910944005427272400562113336049664)**1)
</code></pre>
<p>Gives:</p>
<pre><code>1910944005427272400562113336049664
1.910944005427272400562113336E+33
1910944005427272400562113336000000
</code></pre>
<p>As you can see, the original value has become slightly smaller (minus 49664 to be exact).</p>
<p>Now, my actual code does a lot more than just raising a number to the power of 1, so I end up with degraded accuracy.</p>
<p>Is there any "better <code>Decimal</code>" out there that I can make use of?</p>
<p>My input and output are between 0 (inclusive) and 2^256 (exclusive).</p>
</div>
<div class="post-text" itemprop="text">
<p>As described in <a href="https://docs.python.org/3/library/decimal.html" rel="nofollow noreferrer">the documentation</a>, "the decimal module has a user alterable precision (defaulting to 28 places)".  You can set the precision to a higher value to get accurate results:</p>
<pre><code>&gt;&gt;&gt; decimal.getcontext().prec = 100
&gt;&gt;&gt; print(int(Decimal(1910944005427272400562113336049664)**Decimal(1)))
1910944005427272400562113336049664
</code></pre>
</div>
<span class="comment-copy">Are you just using integer arithmetic?</span>
<span class="comment-copy">@Phylogenesis: No. It's mentioned in the tag, though I should have probably emphasized it within the question itself. BTW, if I were only using integer arithmetic, then I wouldn't need the <code>Decimal</code> to begin with, because Python supports 256-bit integer arithmetic.</span>
<span class="comment-copy">Is this a "global" settings, or do I need to do it <b>per</b> <code>Decimal</code> instance?</span>
<span class="comment-copy">Oh, global (obvious from your code).</span>
<span class="comment-copy">What's the maximum from <code>prec</code>?</span>
<span class="comment-copy">Also, what is the trade-off? (if it's only performance then I'm happy).</span>
<span class="comment-copy">@goodvibration: I don't know of any maximum.  As far as I know the only tradeoff is performance.  However, be aware that the precision is a total number of a decimal places (not just the number of integer places), so if you are also dealing with fractional values you'll need to set the precision large enough to encompass the total number of (integer and fractional) places you need.</span>
