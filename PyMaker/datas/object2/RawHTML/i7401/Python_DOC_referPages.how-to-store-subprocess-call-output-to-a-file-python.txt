<div class="post-text" itemprop="text">
<p>i have a script in bash that i am running in python using call from subprocess. 
i want the script output (strings) to be stored in a file. i tried working on a code that is </p>
<pre><code>import logging
logging.basicConfig(level=logging.DEBUG,
                    format='',
                    datefmt='',
                    filename='E:\FYP\FYPPP\AMAPT\log.txt',
                    filemode='w')=
console = logging.StreamHandler()
console.setLevel(logging.INFO)
formatter = logging.Formatter('')
console.setFormatter(formatter)
logging.getLogger('').addHandler(console)
logging.info(call("sh amapt.sh", shell=True))
logger1 = logging.getLogger('myapp.area1')
logger2 = logging.getLogger('myapp.area2')
logger1.debug('test.')
logger1.info('test1.')
logger2.warning('test2.')
logger2.error('test3.') 
</code></pre>
<p>But displays the output as an integer of my script. check the image here 
<a href="https://i.stack.imgur.com/Szzng.png" rel="nofollow noreferrer">I want the yellow/green output text to be stored in file but it is storing 255 instead of this text from my script.</a></p>
<p>Guide me please. </p>
</div>
<div class="post-text" itemprop="text">
<p><code>call</code> returns the return code of your script. You need to get the <em>output</em> of the process:</p>
<pre><code>logging.info(check_output("sh amapt.sh"))
</code></pre>
<p>notes:</p>
<ul>
<li>if process fails you'll get an exception</li>
<li>you don't need <code>shell=True</code></li>
</ul>
<p>To get the output no matter what you could use <code>Popen</code> instead for instance like this:</p>
<pre><code>logging.info(Popen("sh amapt.sh",stdout=PIPE,stderr=STDOUT).stdout.read())
</code></pre>
<p>The added <code>,stderr=STDOUT</code> allows to get standard error in the log as well.</p>
<p>or from python 3.5 you can use <a href="https://docs.python.org/3/library/subprocess.html#subprocess.run" rel="nofollow noreferrer">subprocess.run()</a> instead of <code>Popen</code></p>
<pre><code>logging.info(run("sh amapt.sh",stdout=PIPE,stderr=STDOUT).stdout.read())
</code></pre>
</div>
<span class="comment-copy">logging.info(subprocess.Popen("sh amapt.sh",stdout=subprocess.PIPE).stdout.read()) it worked.</span>
<span class="comment-copy">"sh amapt.sh -s abc.apk" i have to use this command. its not working with Popen? what do i do? simple script is running but with this command its not</span>
<span class="comment-copy">maybe restore <code>shell=True</code>, but I think redirecting stderr to the log would be better, at least you'd see the error. Let me edit.</span>
<span class="comment-copy">where do i add shell=true?</span>
<span class="comment-copy"><code>logging.info(subprocess.Popen("sh amapt.sh -s try.apk",stdout=subprocess.PIPE, shell= True).stdout.read())</code> this code doesnt works it doesnt even runs the script</span>
