<div class="post-text" itemprop="text">
<p>I am new to Python and I am trying to parse a Json file using Python. 
The Json file is a nested file. While I am trying to exact the "conversation_id" item, the list that contains this item, and the list above sometimes can be empty. I am hoping to replace empty list as string "N/A", otherwise grab the item. Code I am using is as following:</p>
<pre><code>for log in data['logs']:
    print("Processing log "+log['log_id'])

    logcolumns=[]

    if log['request'] is None:
            logcolumns.append("N/A")
    elif log['request']['context'] is None:
           logcolumns.append("N/A")
    else:
        logcolumns.append(log['request']['context']['conversation_id'])
try:
        print("\t".join(logcolumns),file = conv_tsv)
    except KeyError:pass

del logcolumns
</code></pre>
<p>Traceback error I got is</p>
<pre><code>Processing log cafa1077-f479-4c55-ac34-3bc3ebbb41fc
Traceback (most recent call last):
  File "conversation_log_2.py", line 43, in &lt;module&gt;
    logcolumns.append(log['request']['context']['conversation_id'])
KeyError: 'conversation_id'
</code></pre>
<p>The "request" list that is associated with this log id is shown as below in the json file:</p>
<pre><code>{"request": {"input": {}, "context": {}},
</code></pre>
<p>A full request list would be like this:</p>
<pre><code>{"request": {"input": {"text": "haha"}, "context": {"conversation_id": "328d2320-f488-4f46-b71f-6cdfb1b79106", "system": {"dialog_stack": [{"dialog_node_s": "root"}], "dialog_turn_counter": 1, "dialog_request_counter": 1, "_node_output_map_s": "{\"Welcome\":[0,1,0]}", "branch_exited_s": "true", "branch_exited_reason_s": "completed"}}}, 
</code></pre>
<p>When I went to the output file, which is <code>conv.tsv</code>, there is <code>N/A</code> in the output. </p>
</div>
<div class="post-text" itemprop="text">
<p>You seem to have the syntax quite moodled up. Is the <code>try/except</code> supposed to be wrapping the <code>if/elif</code>? Do you actually want <code>if/elif</code>s?</p>
<p>Note that <code>log['request'] is None</code>  does not test that the key's value is an empty dict.</p>
<p>You can use the <code>.get</code> method that returns a default when the key is not found:</p>
<pre><code>logcolumns.append(log.get('request', {}).get('context', {}).get('conversation', 'N/A'))
</code></pre>
<p>Or better still, use a <code>try/except</code> to append the default value if any of the keys in missing:</p>
<pre><code>try:
    logcolumns.append(log['request']['context']['conversation_id'])
except KeyError:
    logcolumns.append('N/A')
</code></pre>
</div>
<span class="comment-copy">Well why would it? <code>{} is not None</code>.</span>
<span class="comment-copy">Can you please tell me how I can catch the empty strings then? I tried <code>if !log['request']</code> <code>if log['request']==0</code> but it always came back as syntax error.</span>
<span class="comment-copy"><code>if not log['request']:</code>; Python doesn't use <code>!</code> for negation like that (see <a href="https://docs.python.org/3/reference/expressions.html#boolean-operations" rel="nofollow noreferrer">docs.python.org/3/reference/expressions.html#boolean-operations</a>), and <code>'' != 0</code>.</span>
<span class="comment-copy">Thanks for teaching me how to catch empty object in python too.</span>
<span class="comment-copy">Thanks. But I am not trying to append log[ 'request'], neither am I trying to append log['request']['context']. I only want to append log['request']['context']['conversation_id']. Using your approach, I changed my code to:  logcolumns.append(log.get('request', 'N/A'))     logcolumns.append(log.get('request', {}).get('context', 'N/A'))     logcolumns.append(log['request']['context']['conversation_id']) it gave me this error: TypeError: sequence item 0: expected str instance, dict found</span>
<span class="comment-copy">@Rui I've updated the answer.</span>
<span class="comment-copy">The second approach worked great for me. Thanks! Also you were right about my wrong placed <code>try/except</code>. It should have been placed for each item not at the end. I don't actually want 'if/elif' though.</span>
<span class="comment-copy">sorry I thought upvoting means accepting. I just accepted. Thanks.</span>
