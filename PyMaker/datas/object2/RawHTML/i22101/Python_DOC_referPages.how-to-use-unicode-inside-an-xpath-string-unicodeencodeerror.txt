<div class="post-text" itemprop="text">
<p>I'm using xpath in Selenium RC via the Python api.</p>
<p>I need to click an a element who's text is "Submit »"</p>
<p>Here's the error that I'm getting:</p>
<pre><code>In [18]: sel.click(u"xpath=//a[text()='Submit \xbb')]")
---------------------------------------------------------------------------
UnicodeDecodeError                        Traceback (most recent call last)

/Users/me/&lt;ipython console&gt; in &lt;module&gt;()

/Users/me/selenium.py in click(self, locator)
    282         'locator' is an element locator
    283         """
--&gt; 284         self.do_command("click", [locator,])
    285 
    286 

/Users/me/selenium.py in do_command(self, verb, args)
    201         body = u'cmd=' + urllib.quote_plus(unicode(verb).encode('utf-8'))
    202         for i in range(len(args)):
--&gt; 203             body += '&amp;' + unicode(i+1) + '=' + urllib.quote_plus(unicode(args[i]).encode('utf-8'))
    204         if (None != self.sessionId):
    205             body += "&amp;sessionId=" + unicode(self.sessionId)

UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 28: ordinal not in range(128)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<pre><code>sel.click(u"xpath=//a[text()='Submit \xbb')]")
</code></pre>
</blockquote>
<p><strong>It is possible to write XPath expressions that contain any Unicode characters</strong>. </p>
<p>For example:</p>
<p><code>//a[text()='Submit &amp;#xBB;')]</code></p>
</div>
<div class="post-text" itemprop="text">
<p>I think you just need to change</p>
<pre><code>sel.click(u"xpath=//a[text()='Submit \xbb')]")
</code></pre>
<p>to</p>
<pre><code>sel.click(u"xpath=//a[text()='Submit \xbb')]".encode('utf8'))
</code></pre>
<p>That's because the error indicates Selenium is trying to encode the Unicode object into a byte string (using the default codec for Python, that is, <code>'ascii'</code>) and that's what is failing; by explicitly encoding it yourself first, with what's presumably the right codec (<code>'utf8'</code>, the default encoding in XML), you should therefore avoid this problem.</p>
</div>
<div class="post-text" itemprop="text">
<p>Does sel_click() expect unicode strings or utf-8 (byte) strings? The dreaded UnicodeEncodeError usually happens when you try to pass in the first when the latter (or some other encoding) is expected.</p>
<p>I can't try it right now, but you could try </p>
<pre><code>"xpath=//a[text()='Submit \xc2\xbb')]"
</code></pre>
<p>instead of your argument (which you get by using <code>.encode('utf-8')</code>) on it.</p>
</div>
<div class="post-text" itemprop="text">
<p>Im  using selenium and roboframework
I had this similar issue.
I had an Xpath with a special charecter as below:</p>
<pre><code>    xpath=(//a[contains(@href,'Ontkoppel cliënt')])[1]
</code></pre>
<p>and i had to replace with the ascii code and it worked fine.</p>
<pre><code>    xpath=(//a[contains(@href,'Ontkoppel cli\u00EBnt')])[1]
</code></pre>
<p>Hope the example helps a little...</p>
</div>
<span class="comment-copy">Does Python provide a facility to encode Unicode like this? I don't see anything relevant in <a href="https://docs.python.org/3/library/codecs.html" rel="nofollow noreferrer">docs.python.org/3/library/codecs.html</a></span>
<span class="comment-copy">@ivan_pozdeev, The right operand of the <code>=</code> comparison in the XPath expression is a string that anyone can specify in Python. Even if Python cannot work with Unicode, which I doubt, one can specify the string in the XPath expression and it is XPath that deals with the Unicode conversion</span>
<span class="comment-copy">Of course, I can write these symbols myself, but that's inconvenient, I'd rather write the characters normally and pass them to a conversion function. I'm asking if Python provides some stock function that would convert <code>u"»"</code> into <code>"&amp;#xBB;"</code>.</span>
<span class="comment-copy">@ivan_pozdeev: Ask a regular question (not a comment) in the python tag</span>
<span class="comment-copy"><code>u</code> at the beginning of the xpath solved my problem, thanks!</span>
<span class="comment-copy">I tried adding that - it still throws a UnicodeDecodeError. Any other ideas?</span>
<span class="comment-copy">(Hm, nevermind. I seem to have been typing this while Alex Martelli had posted an answer already...)</span>
<span class="comment-copy">I don't know what language this is, but it's not Python. The problem asked is Python-specific.</span>
<span class="comment-copy">Hi Ivan, This question was with respect to  using xpath in Selenium RC via the Python api   so here in the above example i have stated the usage of unicode or special char inside the xpath so that to use them in Selenium RC via Python. :)</span>
