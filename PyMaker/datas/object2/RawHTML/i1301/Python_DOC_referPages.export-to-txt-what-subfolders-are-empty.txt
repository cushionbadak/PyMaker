<div class="post-text" itemprop="text">
<pre><code>path1 = r'C:\Users\user\Desktop\shapefiles'

for root, dirs, files in os.walk:
    with open(path1 +'//' + 'exprt' + '//'+'log.txt', 'w') as fw:
        if not os.listdir(root):
            fw.write('%s' % (os.path.join(root,shapefile)) + ' is empty' + '\n')
</code></pre>
<p>I know about the format solution instead of the %s but I want to do it like this.
Do you know why it doesn't work?</p>
</div>
<div class="post-text" itemprop="text">
<p>It's empty because you create new file (overwrite the existing one) for each iteration of your loop. Either change mode to 'a' or open the file and don't close it till the end of the loop (i.e. swap the for loop with with context manager)</p>
<p>EDIT: add code snippets</p>
<pre><code>import os
path1 = r'C:\Users\user\Desktop\shapefiles'

for root, dirs, files in os.walk:
    with open(os.path.join(path1, 'exprt', 'log.txt'), 'a') as fw:
        if not os.listdir(root):
            fw.write('{} is empty\n'.format(os.path.join(root, shapefile)))
</code></pre>
<p>or</p>
<pre><code>import os
path1 = r'C:\Users\user\Desktop\shapefiles'

with open(os.path.join(path1, 'exprt', 'log.txt'), 'w') as fw:
    for root, dirs, files in os.walk:
        if not os.listdir(root):
            fw.write('{} is empty\n'.format(os.path.join(root, shapefile)))
</code></pre>
<p>of course <code>shapefile</code> should be defined in advance (I don't see it in you code)</p>
</div>
<div class="post-text" itemprop="text">
<p>If you're in Python3.4 and have access to the new stdlib <a href="https://docs.python.org/3/library/pathlib.html?highlight=pathlib" rel="nofollow noreferrer"><code>pathlib</code></a>:</p>
<pre><code>import pathlib

path1 = r'C:\Users\user\Desktop\shapefiles'
path1_path = pathlib.Path(path1)

paths = [p for p in path1.rglob("*") if p.is_dir()]
empty_paths = [p for p in paths if not list(p.glob("*"))]

logfile = path1 / "exprt" / "log.txt"
with logfile.open(mode='w') as f:
    f.write("\n".join([f"{p / shapefile} is empty" for p in empty_paths]))
</code></pre>
</div>
<span class="comment-copy">What is not working? What error are you getting?</span>
<span class="comment-copy">No error. If I print it , it gets printed but it doesn't write to txt anything.</span>
<span class="comment-copy">Does the log file even get created?</span>
<span class="comment-copy">Yes. It's empty.</span>
<span class="comment-copy">If you print to console instead of fw.write, do you see the expected content?</span>
<span class="comment-copy">cool you saw that. Thanks.Can you write your last approach to code? I simply put it before the for loop and worked though I would like to see what you mean with the other approach.</span>
