<div class="post-text" itemprop="text">
<p>I like <code>shell=False</code> to avoid the various problems with <code>shell=True</code>. Sometimes I see code like this, and it returns True, but it doesn't seem to have printed anything, and I don't know what did happen.</p>
<pre><code>subprocess.run(['echo', 'hi'], shell=True, check=True).returncode == 0
</code></pre>
<p>By contrast,</p>
<pre><code>subprocess.run(['echo', 'hi'], shell=False, check=True).returncode == 0
</code></pre>
<p>actually prints to the stdout.</p>
<p>What happens when I pass a list as arguments and shell=True?</p>
</div>
<div class="post-text" itemprop="text">
<p>From <a href="https://docs.python.org/3/library/subprocess.html" rel="nofollow noreferrer">the documentation</a>:</p>
<blockquote>
<p>On POSIX with shell=True, the shell defaults to /bin/sh. If args is a string, the string specifies the command to execute through the shell. This means that the string must be formatted exactly as it would be when typed at the shell prompt. This includes, for example, quoting or backslash escaping filenames with spaces in them. <strong>If args is a sequence, the first item specifies the command string, and any additional items will be treated as additional arguments to the shell itself.</strong></p>
</blockquote>
<p>So your command is equivalent to <code>sh -c "echo" "hi"</code>, which simply executes <code>echo</code> without arguments.</p>
<p>A more useful example would be to use this mechanism to pass arbitrary data safely to a shell snippet:</p>
<pre><code>file1='my file.txt'
file2='Author&amp;Title - [FOO] **proper**.mp3'
subprocess.run(
    ['for f; do printf "Input: %s\n" "$f"; done', '_',
      file1, file2],
    shell=True, check=True)
</code></pre>
<p>This prints out the variables from a shell without having to worry about escaping shell metacharacters. (the extra <code>'_'</code> becomes <code>$0</code>).</p>
</div>
<span class="comment-copy">Did you read <a href="https://docs.python.org/3/library/subprocess.html" rel="nofollow noreferrer">the documentation</a>?</span>
