<div class="post-text" itemprop="text">
<p>I've created a file called util.py that contains this code within a function to convert my pandas dataframe to CSV:</p>
<pre><code>crisporDF = pd.DataFrame(res, columns=["Position", "Guide", "Specificity Score", "Predicted Efficiency (Doench '16)", "Predicted Efficiency (Mor.-Mateos)", "Out-of-Frame score", "Off-targets for 0-1-2-3-4 mismatches"])
crisporDF = crisporDF.replace('\n',' ', regex=True)
crisporCSV = crisporDF.to_csv('crisporCSV.csv', index=False)
crisporDF = crisporDF.to_html(classes=["table-bordered", "table-striped", "table-      hover",], index=False, justify="initial")
</code></pre>
<p>ive called it crisporCSV as you can see and it creates and saves the file, this is within a function and I'm calling the function in my view like:</p>
<pre><code>crisporDF = crispor(form.cleaned_data['dnaSeq'], form.cleaned_data['species'], form.cleaned_data['pam'])
</code></pre>
<p>The function takes some form outputs that a user submits. The function the returns the pandas dataframe as html code as seen above (crisporDF) I've then returned this in the function "return crisporDF" this then outputs the table in my view.</p>
<pre><code>return render(request, 'home.html', {'form': form, 'crisporOUT': crisporDF})
</code></pre>
<p>this is then called in my html as  <code>{{ crisporOUT|safe }}</code></p>
<p>How would I render the csv as a link in my view to download? The file exists but I don't know how I'd go about it, please ask if you need anymore info thanks!</p>
</div>
<div class="post-text" itemprop="text">
<p>I would prefer to save the csv file in a Django model like <a href="https://docs.djangoproject.com/en/2.1/ref/models/fields/#django.db.models.FileField" rel="nofollow noreferrer">FileField</a>.</p>
<pre><code>class MyCSV(models.Model):
    name = models.CharField('Name', blank=False)
    file_ical = models.FileField('My CSV File', upload_to='your/folder', blank=True)
</code></pre>
<p>you have to get the object</p>
<pre><code>my_csv = MyCSV.objects.get(name='crisporCSV.csv')
</code></pre>
<p>and in your render</p>
<pre><code>return render(request, 'home.html', {'form': form, 'crisporOUT': crisporDF, 'file_csv': my_csv})
</code></pre>
<p>now you can generate a link to the file in our template with</p>
<pre><code>&lt;a href="{{ file_csv.url }}"&gt;{{ file_csv.name }}&lt;/a&gt;
</code></pre>
</div>
<span class="comment-copy">Thanks for the reply, I'm a little new to django and python, where would i create the MyCSV class? In my util.py file where the original function is or in forms.py? And would I get the object in my views?  Where youve written 'name' in the class, what does that represent?  Thanks!</span>
<span class="comment-copy">If you new to Django and python try to start with the tutorial <a href="https://www.djangoproject.com/start/" rel="nofollow noreferrer">djangoproject.com/start</a>. Short answer: The class need to be in the models.py after a change in this file you need to create a migration for the database. The file can be stored with a form or with a function like your util.py. The 'name' in the class is not necessary but I though you will name your files. More Information about the FileField: <a href="https://docs.djangoproject.com/en/2.1/ref/models/fields/#filefield" rel="nofollow noreferrer">docs.djangoproject.com/en/2.1/ref/models/fields/#filefield</a></span>
<span class="comment-copy">Ah, I think I understand, thanks  when you say the file can be stored with my function do I just e.g. when the csv file is being created, direct the saved file to the media folder?</span>
<span class="comment-copy">if you save the database object Django will handle the file and write it to you uploads folder <a href="https://docs.djangoproject.com/en/2.1/topics/files/" rel="nofollow noreferrer">docs.djangoproject.com/en/2.1/topics/files</a></span>
<span class="comment-copy">@yahyalogde if this help you it would be great if you can accept my answer.</span>
