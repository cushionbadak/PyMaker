<div class="post-text" itemprop="text">
<p>Trying to use regex to perform substitutions on a string.</p>
<pre><code>re.sub(regex, repl_func, content)
</code></pre>
<p>The problem is that I do not understand how the replacement will occur via the <code>repl_func</code> when I need the substitution to be dependent on the matching object from that <code>regex</code>; i.e. I will use that matched object as a dictionary key to get the matching value with which that particular object needs to be replaced.</p>
<pre><code>    for mobj in re.finditer(regex, content):
        t = mobj.lastgroup
        v = match_obj.group(t)

        if t == 'NAME':
            ...
        elif t == '\n':
            ...
</code></pre>
<p>I have tried to iterate all the matching objects, as seen above, but cannot figure out how to apply the re.sub. If I understand correctly, the <code>repl_function</code> in my first code segment needs to somehow <em>know</em> which is the matched object from that regex.</p>
<p>Any ideas, especially using code will be much appreciated cause I am only just now starting with Python.</p>
</div>
<div class="post-text" itemprop="text">
<p>The <code>re.sub()</code> function passed the matched object to <code>repl_function</code> as an argument replace the returned result from that function with matched string. If you want to replace the matched object with a particular string in a dictionary you can simply use a function to handle that:</p>
<pre><code>def repl_func(matched_obj):
    my_dict = {'NAME':'rep1', '\n':'rep2'}
    try:
        match = matched_obj.group(0)
    except AttributeError:
        matched = ''
        # Or raise an exception
    else:
        return my_dict.get(match, '')

re.sub(regex, repl_func, content)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://docs.python.org/3/library/re.html#re.sub" rel="nofollow"><code>re</code> docs</a> are pretty clear on this one:</p>
<blockquote>
<p><code>re.sub(pattern, repl, string, count=0, flags=0)</code></p>
<p>Return the string obtained by replacing the leftmost non-overlapping occurrences of <code>pattern</code> in string by the replacement <code>repl</code>.</p>
<p>If <code>repl</code> is a function, it is called for every non-overlapping occurrence of <code>pattern</code>. The function takes a single match object argument, and returns the replacement string.</p>
</blockquote>
</div>
<span class="comment-copy"><a href="http://stackoverflow.com/q/40789447/6167676">stackoverflow.com/q/40789447/6167676</a></span>
<span class="comment-copy">Silly me, did not read well that part of the doc. I wish they had a better example. Sorry, but could only accept one answer and choose the older one.</span>
