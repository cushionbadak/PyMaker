<div class="post-text" itemprop="text">
<p>I have two python lists,</p>
<pre><code>A = [ 1, 2, 3, 4, 5 ]
B = [ True, False, False, True, True ]
</code></pre>
<p>lists A and B are the same length.</p>
<p>I want to sum only the elements in A that correspond to True elements in B.
I know I can do that with something like:</p>
<pre><code>sum([A[x] for x in xrange(len(A)) if B[x]])
</code></pre>
<p>but I was wondering if there was a more elegant solution that didn't involve looping over elements in each list?</p>
</div>
<div class="post-text" itemprop="text">
<p>Using <a href="https://docs.python.org/3/library/itertools.html#itertools.compress" rel="nofollow"><code>itertools.compress</code></a>:</p>
<pre><code>&gt;&gt;&gt; from itertools import compress
&gt;&gt;&gt; sum(compress(A, B))
10
</code></pre>
<p>The implementation of <code>itertools.compress</code> is described on the linked page. It's short and simple, so you don't <em>have</em> to import <code>itertools</code> <sup>1</sup>:</p>
<pre><code>&gt;&gt;&gt; sum(a for a, b in zip(A, B) if b)
10
</code></pre>
<p><sub><sup>1</sup> OTOH, <code>itertools.compress</code> is implemented in C, and therefore should be faster</sub></p>
</div>
<div class="post-text" itemprop="text">
<p>Generator expression + <code>sum</code>:</p>
<pre><code>&gt;&gt;&gt; A = [1, 2, 3, 4, 5]
&gt;&gt;&gt; B = [True, False, False, True, True]
&gt;&gt;&gt; sum(a for a,b in zip(A, B) if b)
10
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><strong>Code</strong></p>
<pre><code>A = [ 1, 2, 3, 4, 5 ]
B = [ True, False, False, True, True ]

sum_ = sum([numa for (numa, numb) in zip(A, B) if numb])
print(sum_)
</code></pre>
<p><strong>Out</strong></p>
<pre><code>10
</code></pre>
<p><strong>How it works:</strong></p>
<p>If we expand the list comprehension a little more we can see what is happening a little more clearly.</p>
<pre><code>nums_to_sum = []
for numa, numb in zip(A, B):
     if numb:
         nums_to_sum.append(numa)
sum_ = sum(nums_to_sum)
</code></pre>
</div>
<span class="comment-copy">If <code>A</code> and <code>B</code> where <code>numpy.array</code>s. All you would have to do: <code>A[B].sum()</code>.</span>
