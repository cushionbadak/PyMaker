<div class="post-text" itemprop="text">
<p>I'm extending Python with a new type, and looking <a href="https://docs.python.org/2/extending/newtypes.html#object-presentation" rel="nofollow">New Types</a> section of Python manual I don't see anything for bool conversion. How do I specify how my type is converted to a bool?</p>
<p>For instance in the example below native numpy type to is interpreted as Python bool somehow</p>
<pre><code>import numpy as np
if (np.array(False)):
  print 'hi'
else:
  print 'hey'
</code></pre>
<p>Looking at bytecode, this corresponds to <code>POP_JUMP_IF_FALSE</code> but this doesn't seem useful for tracking down the conversion logic.</p>
</div>
<div class="post-text" itemprop="text">
<p>In the Python documentation, under <a href="https://docs.python.org/3/reference/datamodel.html#object.__bool__" rel="nofollow">Special Method Names</a>, you can see that the <code>.__bool__()</code> method does exactly this.</p>
<pre><code>class MyType(object):
    def __init__(self, value):
        self.value = value
    def __bool__(self):
        return self.value != 0
</code></pre>
<p>If you are still stuck on Python 2.x (condolences!) then the method name is <code>__nonzero__</code> instead of <code>__bool__</code>.</p>
</div>
<span class="comment-copy">But <code>if np.array([True, False]):</code> will produce an error, one that is subject of many SO questions.</span>
<span class="comment-copy">Hm...I get <code>'numpy.ndarray' object has no attribute '__bool__'</code> for the example above, but it still works inside of an <code>if</code> statement</span>
<span class="comment-copy">@YaroslavBulatov In Python 2 this method is called <code>__nonzero__()</code>.</span>
