<div class="post-text" itemprop="text">
<p>So, I have the following code that inserts the data of an old database to a new one:</p>
<pre><code>...    
cur_old.execute("""SELECT DISTINCT module FROM all_students_users_log_course266""")
module_rows = cur_old.fetchall()

for row in module_rows:
    cur_new.execute("""INSERT INTO modules(label) SELECT %s WHERE NOT EXISTS (SELECT 1 FROM modules WHERE label=%s)""", (row[0], row[0]))
...
</code></pre>
<p>The last line executes a query where labels are inserted into the new database table. I tested this query on <code>pgAdmin</code> and it works as I want.</p>
<p>However, when execute the script, nothing is inserted on the <code>modules</code> table. (Actually the sequences are updated, but none data is stored on the table). </p>
<p>Do I need to do anything else after I call the execute method from the cursor?</p>
<p>(Ps. The script is running till the end without any errors)</p>
</div>
<div class="post-text" itemprop="text">
<p>You forgot to do <code>connection.commit()</code>. Any alteration in the database has to be followed by a commit on the connection. For example, the <a href="https://docs.python.org/3/library/sqlite3.html" rel="noreferrer">sqlite3 documentation</a> states it  clearly in the first example: </p>
<pre><code># Save (commit) the changes.
conn.commit()
</code></pre>
<p>And the first example in the <a href="http://initd.org/psycopg/docs/usage.html" rel="noreferrer"><code>psycopg2</code> documentation</a> does the same:</p>
<pre><code># Make the changes to the database persistent
&gt;&gt;&gt; conn.commit()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>As Evert said, the commit() was missing. An alternative to always specifying it in your code is using the autocommit feature.</p>
<p><a href="http://initd.org/psycopg/docs/connection.html#connection.autocommit" rel="nofollow">http://initd.org/psycopg/docs/connection.html#connection.autocommit</a></p>
<p>For example like this:</p>
<pre><code>with psycopg2.connect("...") as dbconn:
            dbconn.autocommit=True
</code></pre>
</div>
<span class="comment-copy">Yes!! I did a <code>conn_new.commit()</code> after the for and the table gets updated now. Thank you, @Evert</span>
