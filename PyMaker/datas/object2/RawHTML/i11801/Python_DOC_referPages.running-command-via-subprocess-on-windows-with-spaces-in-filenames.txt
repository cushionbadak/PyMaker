<div class="post-text" itemprop="text">
<p>To run a command in python, for Windows, I do:</p>
<pre><code>import subprocess
subprocess.check_output(lsCommand, shell=True)
</code></pre>
<p>where <code>lsCommand</code> is a list of strings that make up the bash command.  This works, except when it contains some input with spaces in it.  For example, copying + changing a name:  </p>
<p>To try and do <code>cp "test 123" test123</code>:</p>
<pre><code>lsCommand = ['cp', 'test 123', 'test123']
subprocess.check_output(lsCommand, shell=True)
</code></pre>
<p>fails because it thinks I am trying to do <code>cp "test" "123" test123</code>.  Error (doing google storage stuff):  </p>
<pre><code>python: can't open file 'c:\GSUtil\gsutil.py cp -n gs://folderl/test': [Errno 22] Invalid argument
</code></pre>
<p>Then I try  </p>
<pre><code>subprocess.check_output('cp "test 123" test123', shell=True)
</code></pre>
<p>Same shit.  Any ideas?</p>
</div>
<div class="post-text" itemprop="text">
<p><code>cp</code> is not an <a href="http://ss64.com/nt/" rel="nofollow noreferrer">internal command</a> and therefore you don't need <code>shell=True</code> (<a href="https://stackoverflow.com/q/24789749/4279">though you might need to specify a full path to <code>cp.exe</code></a>).</p>
<p>The internal interface for starting a new subprocess on Windows uses a string i.e., it is up to the specific application how to interpret a command-line. <a href="https://docs.python.org/3/library/subprocess.html#converting-an-argument-sequence-to-a-string-on-windows" rel="nofollow noreferrer">The default MS C runtime rules (imlemented in <code>subprocess.list2cmdline()</code> that is called implicitly if you pass a list on Windows)</a> should work fine in this case:</p>
<pre><code>#!/usr/bin/env python
from subprocess import check_call

check_call(['cp', 'test 123', 'test123'])
</code></pre>
<p>If you want to use <code>shell=True</code> then the program that interprets the command line is <code>cmd.exe</code> and you should use its escape rules (<a href="https://stackoverflow.com/q/27864103/4279">e.g., <code>^</code> is a meta-character</a>) and pass the command as a string as is (as you see it in the Windows console):</p>
<pre><code>check_call('copy /Y /B "test 123" test123', shell=True)
</code></pre>
<p>Obviously, you don't need to start an external process, to <a href="https://stackoverflow.com/q/12842997/4279">copy a file in Python</a>:</p>
<pre><code>import shutil

shutil.copy('test 123', 'test123')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>for Ubuntu:</p>
<pre><code>subprocess.check_output(['list', 'of', 'commands with spaces'])
</code></pre>
<p>for Windows:</p>
<pre><code>subprocess.check_output('single command "string with spaces"')
</code></pre>
<p>Thanks for info that I don't need <code>shell=True</code>.  </p>
</div>
<span class="comment-copy">Why are you using <code>shell=True</code>?  Given a list without <code>shell=True</code> should work I think.</span>
<span class="comment-copy">@zondo not on windows, no.  Linux yay</span>
<span class="comment-copy">See also <a href="http://stackoverflow.com/questions/3172470/actual-meaning-of-shell-true-in-subprocess" title="actual meaning of shell true in subprocess">stackoverflow.com/questions/3172470/…</a></span>
<span class="comment-copy">doing anything without <code>shell=True</code> fails for me.  Several questions I read stated that it is required in Windows.  For example <a href="http://stackoverflow.com/questions/9531683/problems-using-subprocess-call-in-python-2-7-2-on-windows" title="problems using subprocess call in python 2 7 2 on windows">stackoverflow.com/questions/9531683/…</a></span>
<span class="comment-copy">What error do you get without using the cmd shell?</span>
