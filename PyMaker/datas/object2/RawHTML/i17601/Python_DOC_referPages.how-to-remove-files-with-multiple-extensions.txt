<div class="post-text" itemprop="text">
<p>The following code does not work and is also overly verbose and redundant. What is the best way to fix it?</p>
<pre><code>if os.path.exists('*.obj'):
    os.remove('*.obj')
if os.path.exists('*.dll'):
    os.remove('*.dll')
if os.path.exists('*.exe'):
    os.remove('*.exe')
if os.path.exists('*.manifest'):
    os.remove('*.manifest')
if os.path.exists('*.pch'):
    os.remove('*.pch')
if os.path.exists('*.lib'):
    os.remove('*.lib')
if os.path.exists('*.rsp'):
    os.remove('*.rsp')
if os.path.exists('Makefile'):
    os.remove('Makefile')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I'd like to use <code>glob</code>:</p>
<pre><code>from glob import glob

patterns = ('*.obj', '*.dll', '*.exe', '*.manifest', '*.pch', '*.lib', '*.rsp', 'Makefile')
for p in patterns:
    for f in glob(p):
        os.remove(f)  
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><a href="http://docs.python.org/3/library/os.html#os.remove" rel="nofollow"><code>os.remove</code></a>, <a href="http://docs.python.org/3/library/os.path.html#os.path.exists" rel="nofollow"><code>os.path.exists</code></a> accept a file path, not a pattern.</p>
<p>Using <a href="http://docs.python.org/3/library/os.html#os.listdir" rel="nofollow"><code>os.listdir</code></a>, you don't need to check file existence.</p>
<pre><code>import os

exts = ('.obj', '.dll', '.exe', '.manifest', '.pch', '.lib', '.rsp')
for fn in os.listdir('.'):
    if fn.lower().endswith(exts) or fn == 'Makefile':
        os.remove(fn)
</code></pre>
<hr/>
<p><a href="http://docs.python.org/3/library/stdtypes.html#str.endswith" rel="nofollow"><code>str.endswith</code></a> accepts tuple; can be used to check extension:</p>
<pre><code>&gt;&gt;&gt; 'file.exe'.endswith(('.obj', '.dll', '.exe', '.manifest'))
True
&gt;&gt;&gt; 'file.com'.endswith(('.obj', '.dll', '.exe', '.manifest'))
False
</code></pre>
<hr/>
<p>Using <a href="http://docs.python.org/3/library/stdtypes.html#set" rel="nofollow"><code>set</code></a>:</p>
<pre><code># set literal
exts = {'.obj', '.dll', '.exe', '.manifest', '.pch', '.lib', '.rsp'}
for fn in os.listdir('.'):
    if os.path.splitext(fn)[-1].lower() in exts or fn == 'Makefile':
        os.remove(fn)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You could use a regular expression to match the file names. The following generates the one needed given the names of the extensions and any specific file names. Once this is compiled, it's simply a matter of applying the compiled re's <code>match()</code> method to each candidate file name to determine whether to remove it or not.</p>
<pre><code>import os
import re

dirpath = './testfiles'
exts = ('obj', 'dll', 'exe', 'manifest', 'pch', 'lib', 'rsp')
fns = ('Makefile',)

pattern = '|'.join(r'.+\.{}$'.format(re.escape(ext)) for ext in exts)
if fns: pattern += '|' + '|'.join(re.escape(fn) for fn in fns)
fnpat = re.compile(pattern, re.IGNORECASE if os.name == 'nt' else 0)

for fpath in (os.path.join(dirpath, fn)
                for fn in os.listdir(dirpath) if fnpat.match(fn)):
    os.remove(fpath)
</code></pre>
</div>
<span class="comment-copy">maybe a post for <a href="http://codereview.stackexchange.com">codereview.stackexchange.com</a></span>
<span class="comment-copy">Write a function?</span>
<span class="comment-copy">Since when <code>os.path.exists</code> and <code>os.remove</code> started working with glob patterns?</span>
<span class="comment-copy">@AshwiniChaudhary I'm just about to ask...</span>
<span class="comment-copy">Ashwini Chaudhary: See edited question.</span>
