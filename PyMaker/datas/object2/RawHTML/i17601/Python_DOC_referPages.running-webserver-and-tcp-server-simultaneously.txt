<div class="post-text" itemprop="text">
<p>I have a webserver setup using Flask, and it works. In addition, I have a demo TCP server, which also works. I want them to run in the same process, so they can communicate; however, I am running into difficulties, as they both want to open a port, and I get the error:</p>
<pre><code>socket.error: [Errno 98] Address already in use
</code></pre>
<p>My understanding is that one process cannot open more than one portâ€”but correct me if I'm mistaken. Is it possible to run subprocesses each with their own port? Or is there an easy way to communicate between processes in Python?</p>
<p>What's the best way to get a webserver and a TCP server to communicate information, such as updates to one reflecting in the other?</p>
<p>Thanks!</p>
</div>
<div class="post-text" itemprop="text">
<p>use different port number for flask web server and TCP server.</p>
</div>
<div class="post-text" itemprop="text">
<p>A process can use multiple ports, but you normally don't want multiple processes using the same port.</p>
<p>In this case, you probably just need a pair of SO_REUSEADDR's, one in each of your processes:
<a href="http://docs.python.org/3/library/socket.html" rel="nofollow">http://docs.python.org/3/library/socket.html</a></p>
<p>Normally, a *ix kernel will refuse to allow getting data from a port, even after the process that was using it exits - for a while.  This is seen as a security issue, because otherwise some other process could listen on the port afterward, and get data that was intended for the first process.  SO_REUSEADDR tells the kernel "Don't do that".</p>
</div>
<span class="comment-copy">Are you running your Flask app on the development web server in debug mode? Any difference if you run it with <code>debug=False</code>?</span>
<span class="comment-copy">I am: 5000 for Flask, 12321 for TCP.</span>
<span class="comment-copy">you might be accidentally running same process twice while debugging, run this command ps -fA | grep python and kill the extra process</span>
<span class="comment-copy">Nope. Nothing showed up, and restarting did not fix the issue either.</span>
<span class="comment-copy">can you run lsof command and grep for TCP and see the status of port 5000 and 12321. if you don't see any port in the result then i strongly feel its script issue.</span>
<span class="comment-copy">check for allow_reuse_address which can be set to True</span>
