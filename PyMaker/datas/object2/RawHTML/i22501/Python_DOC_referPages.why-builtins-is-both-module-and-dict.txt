<div class="post-text" itemprop="text">
<p>I am using the built-in module to insert a few instances, so they can be accessed globally for debugging purposes. The problem with the <code>__builtins__</code> module is that it is a module in a main script and is a dict in modules, but as my script depending on cases can be a main script or a module, I have to do this:</p>
<pre><code>if isinstance(__builtins__, dict):
    __builtins__['g_frame'] = 'xxx'
else:
    setattr(__builtins__, 'g_frame', 'xxx')
</code></pre>
<p>Is there a workaround, shorter than this? More importantly, why does <code>__builtins__</code> behave this way?</p>
<p>Here is a script to see this. Create a module a.py:</p>
<pre><code>#module-a
import b
print 'a-builtin:',type(__builtins__)
</code></pre>
<p>Create a module b.py:</p>
<pre><code>#module-b
print 'b-builtin:',type(__builtins__)
</code></pre>
<p>Now run python a.py:</p>
<pre><code>$ python a.py 
b-builtin: &lt;type 'dict'&gt;
a-builtin: &lt;type 'module'&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I think you want the <code>__builtin__</code> module (note the singular).</p>
<p>See the docs:</p>
<blockquote>
<p><a href="https://docs.python.org/2/library/__builtin__.html" rel="nofollow noreferrer">27.3. <code>__builtin__</code> — Built-in objects</a></p>
<p><strong>CPython implementation detail:</strong> Most modules have the name <code>__builtins__</code> (note the <code>'s'</code>) made available as part of their globals. The value of <code>__builtins__</code> is normally either this module or the value of this modules’s [sic] <strong><code>__dict__</code></strong> attribute. Since this is an implementation detail, it may not be used by alternate implementations of Python.</p>
</blockquote>
</div>
<span class="comment-copy">For more info, see <a href="http://stackoverflow.com/questions/11181519/python-whats-the-difference-between-builtin-and-builtins" title="python whats the difference between builtin and builtins">stackoverflow.com/questions/11181519/…</a>    [Possible Duplicate]</span>
<span class="comment-copy">What about Python3? <code>NameError: name '__builtin__' is not defined</code></span>
<span class="comment-copy">@warvariuc: the module was renamed to <a href="https://docs.python.org/3/library/builtins.html" rel="nofollow noreferrer"><code>builtins</code></a>.</span>
