<div class="post-text" itemprop="text">
<p>I am using shutil.copy to copy the content of one file to another. However it is causing my orignal files to be deleted with the error of "no data in file"</p>
<p>I first tried this</p>
<pre><code>    import shutil
    shutil.copy('keywords.txt', 'keywordsfinal.txt')
</code></pre>
<p>Then was told the files need to be open and in a writable format</p>
<pre><code>    import shutil
    ab = open("keywords.txt","w")
    abc = open("keywordsfinal.txt","w")
    shutil.copy('keywords.txt', 'keywordsfinal.txt')
    ab.close()
    abc.close()
</code></pre>
<p>However with both code, even if I have something in each .txt file, for instance test1, and test2, both files will return empty. </p>
<p>I had this working before and returned to my program about 6 months later to find this error. Any help appreciated. </p>
<p>Recently however the below error also started to appear, I have no idea what it is and if it is with any relevance to my code.</p>
<pre><code> Traceback (most recent call last):
   File "C:\Python33\lib\random.py", line 249, in choice
     i = self._randbelow(len(seq))
   File "C:\Python33\lib\random.py", line 225, in _randbelow
     r = getrandbits(k)          # 0 &lt;= r &lt; 2**k
 ValueError: number of bits must be greater than zero

 During handling of the above exception, another exception occurred:

 Traceback (most recent call last):
   File "C:\Users\*******\Desktop\*******\*********Python\new\Final - Copy.py", line      84, in &lt;module&gt;
     a = random.choice(list(f)).strip() #.strip cleans the line \n problem
   File "C:\Python33\lib\random.py", line 251, in choice
     raise IndexError('Cannot choose from an empty sequence')
 IndexError: Cannot choose from an empty sequence
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><a href="http://docs.python.org/3/library/shutil.html#shutil.copy" rel="nofollow"><code>shutil.copy()</code></a> accepts filenames (strings) as arguments. It opens files for you. You might have confused it with <a href="http://docs.python.org/3/library/shutil.html#shutil.copyfileobj" rel="nofollow"><code>shutil.copyfileobj()</code></a> that accept file objects. Even with <code>copyfileobj()</code> you shouldn't use <code>"w"</code> mode for the file you want to copy from (the first argument, the source).</p>
<p><code>"w"</code> mode (stands for <code>"write"</code>) means <a href="http://docs.python.org/3/library/functions.html#open" rel="nofollow">"open for writing, truncating the file first"</a> (making the file empty). </p>
<pre><code>#XXX REMOVE THIS CODE, IT DESTROYS THE FILES
ab = open("keywords.txt","w")
abc = open("keywordsfinal.txt","w")
</code></pre>
<p>Note: removing the offending lines from your code won't restore the files. Once they are empty; they keep being empty. You need to repopulate them. It should solve your second problem: calling <code>random.choice()</code> with an empty list:</p>
<pre><code>&gt;&gt;&gt; import random
&gt;&gt;&gt; random.choice([])
Traceback (most recent call last):
  File "/usr/lib/python3.2/random.py", line 249, in choice
    i = self._randbelow(len(seq))
  File "/usr/lib/python3.2/random.py", line 225, in _randbelow
    r = getrandbits(k)          # 0 &lt;= r &lt; 2**k
ValueError: number of bits must be greater than zero

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/usr/lib/python3.2/random.py", line 251, in choice
    raise IndexError('Cannot choose from an empty sequence')
IndexError: Cannot choose from an empty sequence
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You need to close the file handle first, and then you can use shutil. If you don't close file handle before using copy(), shutil will only create destination file but it will stay empty.</p>
<p>The above code then should look like this:</p>
<pre><code>import shutil
ab = open("keywords.txt","w")
abc = open("keywordsfinal.txt","w")
ab.close()
abc.close()
shutil.copy('keywords.txt', 'keywordsfinal.txt')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<ol>
<li>You shouldn't be opening the files before <code>shutil.copy()</code>.</li>
<li>For the second problem, it looks like <code>list(f)</code> is empty.</li>
</ol>
</div>
<span class="comment-copy"><code>shutil.copy</code> opens and closes the files automatically. You opening them beforehand is breaking it.</span>
<span class="comment-copy">Why need to close the file handle first?</span>
<span class="comment-copy">that was exactly my problem - @acgtyrant closing the file will flush any buffered contents to disk, in my case the files were completely empty until I called close().</span>
<span class="comment-copy">I have removed the opening and closing of the files, yet they still keep returning empty files. And I have put data in the files.</span>
<span class="comment-copy">And f, is one of the files</span>
