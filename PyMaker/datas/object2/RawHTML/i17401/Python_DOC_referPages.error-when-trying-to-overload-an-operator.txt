<div class="post-text" itemprop="text">
<p>I recently start teaching myself game programming. Someone recommend me to start with Python and I got the book "Beginning game development with Python and Pygame: From novice to professional". I got to a part where they teach about Vectors and creating a Vector2 class. Everything was going well until I tried to overload the division operator.
My code goes like this:</p>
<pre><code>class Vector2(object):

  def __init__(self, x=0.0, y=0.0):
    self.x = x
    self.y = y

  def __str__(self):
    return "(%s, %s)"%(self.x, self.y)

  @classmethod
  def from_points(cls, P1, P2):
    return cls(P2[0] - P1[0], P2[1] - P1[1])

  def __add__(self,rhs):
    return Vector2(self.x + rhs.x, self.y + rhs.y)

  def __sub__(self,rhs):
    return Vector2(self.x - rhs.x, self.y - rhs.y)

  def __mul__(self, scalar):
    return Vector2( self.x*scalar, self.y*scalar)

  def __div__(self, scalar):
    return Vector2( self.x/scalar, self.y/scalar)
</code></pre>
<p>Now, when I tried to call the "/" operator, this shows up:</p>
<pre><code>AB = Vector2(10.0,25.0)
print(AB)   # &lt;&lt;&lt;&lt;(10.0, 25.0)
v1 = AB + Vector2(20.,10.)
print(v1)   # &lt;&lt;&lt;&lt;(30.0, 35.0)
v2 = AB - Vector2(20.,10.)
print(v2)   # &lt;&lt;&lt;&lt;(-10.0, 15.0)
v3 = AB * 3
print(v3)   # &lt;&lt;&lt;&lt;(30.0, 75.0)
print(v3 / 3)
TypeError: unsupported operand type(s) for /: 'Vector2' and 'int'
</code></pre>
<p>This was all in Python 3.3 but if I run it with Python 2.7, everything works correctly.
Where's the problem?</p>
</div>
<div class="post-text" itemprop="text">
<p>In Python 3.x, you need to overload the <code>__floordiv__</code> and <code>__truediv__</code> operators, not the <code>__div__</code> operator. The former corresponds to the <code>//</code> operation (returns an integer) and the latter to <code>/</code> (returns a float).</p>
</div>
<div class="post-text" itemprop="text">
<p>In Python 3, the division operators are called <code>__truediv__</code> and <code>__floordiv__</code>. See the <a href="http://docs.python.org/3.3/reference/datamodel.html#object.__truediv__" rel="noreferrer">Data model</a> documentation for more information.</p>
</div>
<span class="comment-copy">see <a href="http://docs.python.org/3/library/operator.html#operator.__truediv__" rel="nofollow noreferrer">docs.python.org/3/library/operator.html#operator.__truediv__</a></span>
<span class="comment-copy">I'm sure I'll get to know what is numpy. But, well, I'm trying to learn this stuff from Python. I have zero experience with it.</span>
<span class="comment-copy">I just tested it and it works! Thanks for the answer. I'll have to do some reading on the docs.</span>
<span class="comment-copy">@darkwatcher5 in python2, the result of integer division was always an integer. This means <code>5/2 == 2</code>, though <code>5/2.0 == 2.5</code>. Python3 changed that (due to the principle of least astonishment) and replaced <code>__div__</code> with <code>__floordiv__</code> (which is <code>5//2 == 2</code>) and <code>__truediv__</code> (which is <code>5/2 == 2.5</code>)</span>
<span class="comment-copy">@adsmith Seems really useful to be honest. And much specific.</span>
<span class="comment-copy">Thanks, I'll do some reading now, I really need it.</span>
