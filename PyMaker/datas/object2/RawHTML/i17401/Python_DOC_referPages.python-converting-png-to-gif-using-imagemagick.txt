<div class="post-text" itemprop="text">
<p>I am using Python 2.7.6, i had a problem converting some png files into gif (in order to create an animation) </p>
<pre><code>    os.system("convert -delay 1 -dispose Background +page " + str(output_dir)
      + "/*.png -loop 0 " + str(output_dir) + "/animation.gif")
</code></pre>
<p>This was the error that i had </p>
<p>ParamŠtre non valide - 1</p>
</div>
<div class="post-text" itemprop="text">
<p>Without enough information to go on, this is only a guess, but…</p>
<p>If <code>output_dir</code> has any spaces or quotes or other special characters, you're doing nothing to escape or quote them, so your command line will look something like this:</p>
<pre><code>convert -delay 1 -dispose Background +page ~/My Pictures/*.png -loop 0 ~/My Pictures/animation.gif
</code></pre>
<p>Maybe <code>~/My</code> is a perfectly valid argument to send for the input, and <code>Pictures/*.png</code> happens to resolve to a whole bunch of additional relative paths that <code>convert</code> is willing to deal with as additional inputs, but then you've got <code>~/My</code> for the output, which isn't valid since it's the same as the input, and <code>Pictures/animation.gif</code> as some extra argument tacked on the end that <code>convert</code> has no idea what to do with.</p>
<p>You could hack your way around this problem by, say, using <code>repr(output_dir)</code>, which will do the appropriate Python-literal quoting, which is often but not always good enough to be used as bash quoting as well… but that's a really bad idea.</p>
<hr/>
<p>A much better way to do this is to let Python do the appropriate quoting for you. As the <a href="http://docs.python.org/3/library/os.html#os.system" rel="nofollow"><code>os.system</code></a> docs say:</p>
<blockquote>
<p>The <code>subprocess</code> module provides more powerful facilities for spawning new processes and retrieving their results; using that module is preferable to using this function.</p>
</blockquote>
<p>With <a href="http://docs.python.org/3/library/subprocess.html#module-subprocess" rel="nofollow"><code>subprocess</code></a>, you can just pass a list of arguments instead of trying to form them into a valid command line, and not even use the shell—although then you would need to do the globbing yourself instead of letting the shell do it.</p>
<p>While you're at it, it's a lot better to use <code>os.path</code> methods instead of string methods for dealing with paths.</p>
<p>For example:</p>
<pre><code>args = (['convert', '-delay', '1', '-dispose', 'Background', '+page'] +
        glob.glob(os.path.join(output_dir, '*.png')) +
        ['-loop', '0', os.path.join(output_dir, 'animation.gif')])
subprocess.check_call(args)
</code></pre>
<p>Or, alternatively, you can still use the shell, but then use <a href="http://docs.python.org/3/library/subprocess.html#frequently-used-arguments" rel="nofollow"><code>shlex.quote</code></a> to quote each argument for you, as the docs explain.</p>
<hr/>
<p>An even better solution is to use any of the three <a href="http://www.imagemagick.org/script/api.php#python" rel="nofollow">Python bindings to ImageMagick</a> in the first place, instead of trying to build command lines to drive the ImageMagick command-line tools.</p>
</div>
<span class="comment-copy">Is there a reason you're using <code>os.system</code> instead of <code>subprocess</code>, as <a href="http://docs.python.org/3/library/os.html#os.system" rel="nofollow noreferrer">the <code>os.system</code> docs</a> suggest? Or, even better, using the Python bindings to ImageMagick instead of trying to script the command-line tools?</span>
<span class="comment-copy">Also, what's in <code>output_dir</code>? Does it have any spaces, quotes, or other special characters? More generally, can you <code>print</code> that exact same string you're sending to <code>os.system</code> to see what it looks like? And then verify that if you paste the exact same string into your shell it works?</span>
<span class="comment-copy">As a side note, if your terminal is actually showing "ParamŠtre non valide" rather than "Paramétre non valide", you probably have your encoding or locale set wrong somewhere. (This looks like what you'd get from outputting text in some western-European charset like Latin-1 and then displaying it as some eastern-European charset like Latin-9.)</span>
<span class="comment-copy">Thanks, that did help me a lot.</span>
<span class="comment-copy">I know is and old thread, but this error might occurs because it is executing another convert utility, perhaps the windows convert partition utility.  Have you installed Inagemagick with 'legacy' programs? or Have you check the PATH?</span>
