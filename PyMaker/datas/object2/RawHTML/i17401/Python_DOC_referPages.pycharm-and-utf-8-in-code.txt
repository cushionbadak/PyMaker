<div class="post-text" itemprop="text">
<p>When I try to run this code:</p>
<pre><code>with open('scraped.csv', 'w') as dump:
        writer = csv.writer(dump, delimiter='Ä™', escapechar='\\',quoting=csv.QUOTE_NONE)
        writer.writerow(('author', 'ups', 'downs',
                         'score', 'sub_name', 'replys',
                         'created_utc', 'pulled down at'))
</code></pre>
<p>in PyCharm, I get the following error</p>
<pre><code>  File ..., line 38, in &lt;module&gt;
'created_utc', 'pulled down at'))
UnicodeEncodeError: 'ascii' codec can't encode character '\u0119' in position 6: ordinal not in range(128)
</code></pre>
<p>Is PyCharm not able to support UTF-8 in files? Or am I missing a setting somewhere. The same file builds in Sublime.</p>
</div>
<div class="post-text" itemprop="text">
<p>I've had a similar error before in PyCharm, I think it is something to do with the encoding detection selecting 'ascii' rather than UTF8. There is however a simple work around:</p>
<pre><code>with open('scraped.csv', 'w', encoding='utf8') as dump:
    writer = csv.writ...
</code></pre>
<p>The encoding option will force the file to load UTF8.</p>
</div>
<span class="comment-copy">I believe the <code>csv</code> module specifies that files must be opened in binary mode.</span>
<span class="comment-copy">@MarkRansom: on Python 3, it should be a text mode with <code>newline=''</code> parameter.</span>
<span class="comment-copy">add <code>newline=''</code>.</span>
<span class="comment-copy">If explicit encoding is not provided then <code>open()</code> uses <a href="http://docs.python.org/3/library/locale.html#locale.getpreferredencoding" rel="nofollow noreferrer"><code>locale.getpreferredencoding(False)</code></a>.</span>
<span class="comment-copy">The CSV module documentation for Python 3 require that file objects passed to csv.writer are opened with <code>newline=''</code>. See <a href="http://docs.python.org/3/library/csv.html#csv.writer" rel="nofollow noreferrer">docs.python.org/3/library/csv.html#csv.writer</a> and the accompanying footnote.</span>
<span class="comment-copy">In particular, my terminal sets <code>LANG="en_AU.UTF-8"</code> which PyCharm does not seem to - this might explain the difference in defaults. Running <code>LANG="en_AU.UTF-8" python3.3 unicodecsv.py</code> from within PyCharm allows the original code to run correctly (although explicitly setting <code>encoding</code> is a better solution)</span>
<span class="comment-copy">Also, adding <code>LANG=en_AU.UTF-8</code> to Settings-&gt;Project Settings-&gt;Console-&gt;Python Console-&gt;Environment variables modifies the PyCharm console settings</span>
