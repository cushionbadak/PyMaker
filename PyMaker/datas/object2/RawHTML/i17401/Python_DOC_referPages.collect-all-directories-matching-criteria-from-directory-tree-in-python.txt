<div class="post-text" itemprop="text">
<p>How can I collect all directories that match a criteria (like 'contain a file named foo.txt') recursively from a directory tree? something like:</p>
<pre><code>def has_my_file(d):
   return ('foo.txt' in os.listdir(d))

walk_tree(dirname, criterion=has_my_file)
</code></pre>
<p>for the tree:</p>
<pre><code>home/
  bob/
    foo.txt
  sally/
    mike/
      foo.txt
</code></pre>
<p><code>walk_tree</code> should return:</p>
<pre><code>['home/bob/', 'home/sally/mike']
</code></pre>
<p>is there such a function in python libraries?</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="http://docs.python.org/3/library/os.html#os.walk" rel="nofollow"><code>os.walk</code></a>:</p>
<pre><code>import os

result = []
for parent, ds, fs in os.walk(dirname):
    if 'foo.txt' in fs:
        result.append(parent)
</code></pre>
<p>Using list comprehension:</p>
<pre><code>result = [parent for parent, ds, fs in os.walk(dirname) if 'foo.txt' in fs]
</code></pre>
</div>
<span class="comment-copy">should be os.walk not os.walkdir</span>
<span class="comment-copy">@user248237dfsf, You're right. fixed that. Thank you for pointing that.</span>
