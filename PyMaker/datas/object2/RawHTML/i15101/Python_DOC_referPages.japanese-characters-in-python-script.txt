<div class="post-text" itemprop="text">
<p>Im writing a python script that attach a word in Japanese to a common type url. My IDE (spyder) shows the Japanese characters perfectly, and so is the browser and my service, yet the language seems to have problems with it. For example, my service gives me the correct answer when Im inputting:
<a href="http://example.com/translate?lang=ja&amp;word" rel="nofollow">http://example.com/translate?lang=ja&amp;word</a>=こんにちは </p>
<p>Yet in my IDE:</p>
<pre><code>word = u'こんにちは'

In [29]: url = "http://example.com/translate?lang=ja&amp;word=" + word

In [30]: word
Out[30]: u'\u3053\u3093\u306b\u3061\u306f'

In [31]: url
Out[31]: u'http://example.com/translate?lang=ja&amp;word=\u3053\u3093\u306b\u3061\u306f'
</code></pre>
<p>And that url is not recognised by my service.
How can It be fixed?</p>
</div>
<div class="post-text" itemprop="text">
<p>Browser url-encode the query string for you. You need to do it manually in Python:</p>
<p>In Python 2.x, using <a href="https://docs.python.org/2/library/urllib.html#urllib.quote" rel="nofollow"><code>urllib.quote</code></a> or <a href="https://docs.python.org/2/library/urllib.html#urllib.quote_plus" rel="nofollow"><code>urllib.quote_plus</code></a>:</p>
<pre><code>&gt;&gt;&gt; import urllib
&gt;&gt;&gt; word = u'こんにちは'
&gt;&gt;&gt; url = "http://example.com/translate?lang=ja&amp;word=" + urllib.quote(word.encode('utf-8'))
&gt;&gt;&gt; url
'http://example.com/translate?lang=ja&amp;word=%E3%81%93%E3%82%93%E3%81%AB%E3%81%A1%E3%81%AF'
</code></pre>
<p>In Python 3.x, using <a href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote" rel="nofollow"><code>urllib.parse.quote</code></a> or <a href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote_plus" rel="nofollow"><code>urllib.parse.quote_plus</code></a>:</p>
<pre><code>&gt;&gt;&gt; import urllib.parse
&gt;&gt;&gt; word = u'こんにちは'
&gt;&gt;&gt; url = "http://example.com/translate?lang=ja&amp;word=" + urllib.parse.quote(word, encoding='utf-8')
&gt;&gt;&gt; url
'http://example.com/translate?lang=ja&amp;word=%E3%81%93%E3%82%93%E3%81%AB%E3%81%A1%E3%81%AF'
</code></pre>
<hr/>
<p>Alternative using <a href="https://docs.python.org/2/library/urllib.html#urllib.urlencode" rel="nofollow"><code>urllib.urlencode</code></a> (Python 2.x)</p>
<pre><code>&gt;&gt;&gt; "http://example.com/translate?" + urllib.urlencode({'lang': 'ja', 'word': word.encode('utf-8')})
'http://example.com/translate?lang=ja&amp;word=%E3%81%93%E3%82%93%E3%81%AB%E3%81%A1%E3%81%AF'
</code></pre>
<p>using <a href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urlencode" rel="nofollow"><code>urllib.parse.urlencode</code></a> (Python 3.x)</p>
<pre><code>&gt;&gt;&gt; "http://example.com/translate?" + urllib.parse.urlencode({'lang': 'ja', 'word': word}, encoding='utf-8')
'http://example.com/translate?lang=ja&amp;word=%E3%81%93%E3%82%93%E3%81%AB%E3%81%A1%E3%81%AF'
</code></pre>
</div>
<span class="comment-copy">Great answer, that worked. Thanks! :)</span>
