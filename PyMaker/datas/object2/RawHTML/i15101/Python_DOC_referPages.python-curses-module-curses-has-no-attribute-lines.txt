<div class="post-text" itemprop="text">
<p>I am looking at some source-code from a book and noticed that some of the code does not seem to be in the current Python2.7 API. The module <code>curses</code> is, according to this code, supposed to have a constant variable called <code>LINES</code> and another called <code>COLS</code>. I opened a Python interactive terminal and saw that there is no <code>COLS</code> or <code>LINES</code> variable or method.</p>
<p><strong>My question is: How does this code even work?</strong> </p>
<pre><code>def draw_loglines(self):
        self.screen.clear()
        status_col = 4
        bytes_col = 6 
        remote_host_col = 20
        status_start = 0 
        bytes_start = 4 
        remote_host_start = 10
        line_start = 26 
        logline_cols = curses.COLS - status_col - bytes_col - remote_host_col - 1
        for i in range(curses.LINES):
            c = self.curr_topline
            try:
                curr_line = self.loglines[c]
            except IndexError:
                break
            self.screen.addstr(i, status_start, str(curr_line[2]))
            self.screen.addstr(i, bytes_start, str(curr_line[3]))
            self.screen.addstr(i, remote_host_start, str(curr_line[1]))
            #self.screen.addstr(i, line_start, str(curr_line[4])[logline_cols])
            self.screen.addstr(i, line_start, str(curr_line[4]), logline_cols)
            self.curr_topline += 1 
        self.screen.refresh()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I found that <code>curses.LINES</code> exists in Python2 &amp; Python3, but you have to call <code>curses.initscr</code> before using it, or you will get AttributeError.</p>
<p>you can also use <code>window.getmaxyx</code></p>
<p>[1] <a href="https://docs.python.org/2/library/curses.html#curses.window.getmaxyx" rel="nofollow">https://docs.python.org/2/library/curses.html#curses.window.getmaxyx</a></p>
</div>
<div class="post-text" itemprop="text">
<p>That code is written for Python 3.  You can see <code>curses.LINES</code> is now in that API, though it was not in Python 2.7:</p>
<p><a href="https://docs.python.org/3/howto/curses.html" rel="nofollow noreferrer">https://docs.python.org/3/howto/curses.html</a></p>
<p>If you need to get the terminal width and height in Python 2, see here: <a href="https://stackoverflow.com/q/566746/4323">How to get Linux console window width in Python</a></p>
</div>
<span class="comment-copy">If I open up a Python3 interactive shell and import <code>curses</code> then type <code>curses.LINES</code> I still receive an error. :/ Thank-you for responding though.</span>
<span class="comment-copy">Holy cow, I tried Python 3.3 just now and you're right, it doesn't work.  Maybe 3.4?</span>
<span class="comment-copy">I am using Python 3.2.3 :/ I may have to try the upgrade. The book I am reading was published in 2008, so I doubt they were using Python 3000. :D Thanks for the help John. The SO thread on terminal width and height you linked maybe my best option.</span>
<span class="comment-copy">It's not working in Python 3.4, either.</span>
<span class="comment-copy">wong2's answer is correct. The linked document is a tutorial, not API docs, so these variables are undocumented in both versions. Note that since they're only added after initscr, you can't get them by <code>from curses import *</code>. It appears that they update dynamically when the terminal is resized (so much for PEP8 which would suggest uppercase is for constants).</span>
