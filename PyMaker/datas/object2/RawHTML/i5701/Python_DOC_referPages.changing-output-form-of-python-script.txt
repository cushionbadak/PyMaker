<div class="post-text" itemprop="text">
<p>First of all, I have to say that I am beginer in Python programming.I have connected sensor to RPi 3 UART port. I found out in Internet working program for this sensor. With a little bit my modifications, it writes me to file result of measuring. The code is below:</p>
<pre><code>import serial
import time
import sys
import json
import datetime
import binascii

class pmsA003():
        def __init__(self, dev):
            self.serial = serial.Serial(dev, baudrate=9600, 
timeout=3)
        def __exit__(self, exc_type, exc_value, traceback):
            self.serial.close()

     def setIdel(self):
            idelcmd = b'\x42\x4d\xe4\x00\x00\x01\x73'
            ary = bytearray(idelcmd)
            self.serial.write(ary)

    def setNormal(self):
        normalcmd = b'\x42\x4d\xe4\x00\x01\x01\x74'
        ary = bytearray(normalcmd)
        self.serial.write(ary)

    def vertify_data(self):
        if not self.data:
            return False
        return True


    def read_data(self):
        while True:
            b = self.serial.read(1)
            if b == b'\x42':
                data = self.serial.read(31)
                if data[0] == b'\x4d':
                    self.data = bytearray(b'\x42' + data)
                    if self.vertify_data():
                        return self._PMdata()

    def _PMdata(self):
        d = {} 
        d['apm10'] = self.data[4] * 256 + self.data[5]
        d['apm25'] = self.data[6] * 256 + self.data[7]
        d['apm100'] = self.data[8] * 256 + self.data[9]
        return d

if __name__ == '__main__':
        con = pmsA003('/dev/ttyAMA0')
        d = con.read_data()
        print(d)
        with open('/home/pi/ramdisk/PMA003', 'a') as f:
                f.write("%s" % (d))
</code></pre>
<p>As the result, I got on console and in the file string like this:</p>
<pre><code>{'apm10': 150, 'apm100': 244, 'apm25': 228}
</code></pre>
<p>But my goal is to have CSV like file in the form:</p>
<pre><code>,value_of_apm10, value_of_apm25, value_of_apm100
</code></pre>
<p>Can anybody help me to modify the code above?</p>
</div>
<div class="post-text" itemprop="text">
<p>You need to import the Python CSV library and then create a <code>csv.DictWriter</code> object. (See the Python documentation on how to do this - it's fairly straightforward). </p>
<p>When you create the <code>DictWriter</code> you give it a list of the column headings you require. Then for each record you want to write to the CSV file you simply create a dictionary with keys corresponding to the column heading and call the DictWriter's <code>writerow()</code> method. </p>
<p>There's an example of exactly what you need to do <a href="https://docs.python.org/3/library/csv.html" rel="nofollow noreferrer">here.</a></p>
</div>
<span class="comment-copy">What have you tried so far to get it into your desired format?</span>
