<div class="post-text" itemprop="text">
<p>I'd like to operate a process using <code>supervisorctl</code> from python code, in order to get the status and make conditional branches like this: </p>
<pre><code>import subprocess

status = subprocess.run(["sudo", "supervisorctl", "status", "my_process"])
if status == "STOPPED":
    # Do something
else:
    # Do another thing
</code></pre>
<p>But this doesn't work. <code>subprocess.run</code> returns <code>CompletedProcess(args=['sudo', 'supervisorctl', 'status', 'my_status'], returncode=0)</code>. The response doesn't have what the status is.<br/>
Is there any way to get the status?</p>
</div>
<div class="post-text" itemprop="text">
<p>I think you need to use <code>subprocess.check_output()</code> to get the output returned to you rather than just the return code. </p>
<pre><code>subprocess.check_output(args, *, stdin=None, stderr=None, shell=False, universal_newlines=False)
</code></pre>
<p>Run command with arguments and return its output as a byte string.</p>
</div>
<div class="post-text" itemprop="text">
<p>The python <a href="https://docs.python.org/3/library/subprocess.html#subprocess.CompletedProcess" rel="nofollow noreferrer"><code>subprocess</code></a> documentation describes how <code>.run()</code> returns a <code>CompletedProcess</code> object.</p>
<p>From there you can retrieve things like status:</p>
<pre><code>status = subprocess.run(["sudo", "supervisorctl", "status", "my_process"])
if status.returncode == 0:
    # success
else:
    # something went wrong
</code></pre>
</div>
<span class="comment-copy">Thanks! This works.</span>
