<div class="post-text" itemprop="text">
<p>When I use this code,it will automatically creates a file.Why?Where can I see the source code of this function?</p>
<pre><code>with open('E:/test.txt','w') as f:
    for i in range(10):
        f.write('abc\n')
f.close()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The <code>w</code> flag opens a file, truncates it, and then begins writing from the beginning. I was interested in investigating why it creates files as soon as you call it, but there doesn't seem to be much in the spec that describes it's anticipated behavior.</p>
<p>While it mightn't be easy to find the source code, you can see the documentation <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer">here</a>. See the table under the <code>modes</code> argument for an explanation of all the modes you can use.</p>
<p>We can only guess as to the intentions of the people who wrote <code>open()</code>, but it would seem that the one thing consistent among all modes is:</p>
<blockquote>
<p>Open file and return a corresponding file object. If the file cannot be opened, an OSError is raised.</p>
</blockquote>
<p>Without getting input from whoever wrote the spec I would assume they consider "open file" to involve creating it if it doesn't exist.</p>
</div>
<div class="post-text" itemprop="text">
<p>This is actually a very good question, you got me thinking. Since Python is open-source, one should be able to see more than the documentation, the actual code! I utilized <a href="https://stackoverflow.com/questions/8608587/finding-the-source-code-for-built-in-python-functions">this</a> thread and finally got to the source code. This sort of built-in functions are usually implemented in C. So if you know C -I don't!- you will be able to read through it and understand fully.</p>
<p>Here is the source code:</p>
<p><a href="https://github.com/python/cpython/blob/master/Modules/_io/fileio.c" rel="nofollow noreferrer">https://github.com/python/cpython/blob/master/Modules/_io/fileio.c</a></p>
<p>(Check out the full directory to make sense of it:</p>
<p><a href="https://github.com/python/cpython/tree/master/Modules/_io" rel="nofollow noreferrer">https://github.com/python/cpython/tree/master/Modules/_io</a>)</p>
<p>Search the term 'w' (with the single quotes) and go from there.</p>
<p>It contains code like this, which is what you are looking for:</p>
<pre><code>        case 'r':
            if (rwa)
                goto bad_mode;
            rwa = 1;
            self-&gt;readable = 1;
            break;
        case 'w':
            if (rwa)
                goto bad_mode;
            rwa = 1;
            self-&gt;writable = 1;
            flags |= O_CREAT | O_TRUNC;
            break;
</code></pre>
</div>
<span class="comment-copy">it will be there as part of your python libraries &lt;python home directory&gt;/libs . You will not be able to see it . Many libraries are written in C</span>
<span class="comment-copy">what did you expect to happen?</span>
<span class="comment-copy">Just note that the <code>f.close()</code> statement is redundant here. The <code>with open()</code> command automatically closes the file handler when you exit the loop.</span>
