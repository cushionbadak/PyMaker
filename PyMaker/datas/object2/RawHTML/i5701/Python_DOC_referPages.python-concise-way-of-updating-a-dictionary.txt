<div class="post-text" itemprop="text">
<p>Often when I'm working with dictionaries whose values are lists, I happen to code this:</p>
<pre><code>if k in D:
    D[k].append(x)
else:
    D[k] = [x]
</code></pre>
<p>Is there a more concise way of doing this?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use a <code>collections.defaultdict</code>:</p>
<pre><code>from collections import defaultdict
D = defaultdict(list)
D[k].append(x)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The most concise way is to use <a href="https://docs.python.org/3/library/stdtypes.html#dict.setdefault" rel="nofollow noreferrer"><code>setdefault</code></a> like:</p>
<pre><code>D.setdefault(k, []).append(x)
</code></pre>
</div>
