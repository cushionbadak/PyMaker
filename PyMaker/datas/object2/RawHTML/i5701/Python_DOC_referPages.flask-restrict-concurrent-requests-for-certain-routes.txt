<div class="post-text" itemprop="text">
<p>I have a flask application and I want most requests to run concurrently. I set <code>app.run(threaded=True)</code> and this seems to work for the most part. However, there's this one endpoint that runs <a href="https://github.com/apiaryio/dredd" rel="nofollow noreferrer">dredd</a> where I want to restrict it so that requests for that endpoint do not run concurrently. It appears to cause a socket error when more than one is run at the same time. Is there a way to do this?</p>
</div>
<div class="post-text" itemprop="text">
<p>I don't think it is possible to do per-route declaratively.</p>
<p>You can, though, use a <a href="https://docs.python.org/3/library/threading.html#lock-objects" rel="nofollow noreferrer"><code>threading.lock</code></a> or, better, a <a href="https://docs.python.org/2/library/multiprocessing.html#multiprocessing.Lock" rel="nofollow noreferrer"><code>multiprocessing.lock</code></a> to serialize actual processing of something you need processed serially. Request handlers will wait until they can acquire the lock. Be sure to pay a lot of attention to releasing the lock in various error scenarios as well as during normal execution.</p>
</div>
