<div class="post-text" itemprop="text">
<p>My data-set have more than 1000 folders and i am using <code>os.walk</code> for recursively accessing each image inside every folder. <code>os.walk</code> went well for few folders but loading 1000 more folders its very slow. I need alternate solution or if anything that can handle this issue.<br/>
You can see the code something similar:</p>
<pre><code>def run(dirname, img):
    data = img.load()
    width, height = img.size
    output_img = Image.new("RGB", (100, 100))
    Zero=np.zeros(shape=(100, 100), dtype=np.uint8)

    for (x, y) in labels:
        component = uf.find(labels[(x, y)])
        labels[(x, y)] = component
        path = 'D:/Python36/Fold/'
        if labels[(x, y)] == 0:
            Zero[y][x] = 255
            Zeroth = Image.fromarray(Zero)
            Zeroth.save(os.path.join(dirname, 'Zero.png'), 'png')


def main():
    path = "D:/Python36/Fold/"
    for root, dirs, files in os.walk(path):
        for file_ in files:
            img = Image.open(os.path.join(root, file_))
            img = img.point(lambda p: p &gt; 190 and 255)
            img = img.convert('1')
            (labels, output_img) = run(root, img)


if __name__ == "__main__":
    main()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>debug your code and execute file sequentially you can use <code>sorted(os.walk(path))</code> and check at which file your code slows down.<br/>
check this it might 
<a href="https://stackoverflow.com/questions/10989005/do-i-understand-os-walk-right">help how os.walk works</a></p>
</div>
<div class="post-text" itemprop="text">
<p>You question is not clear but Python has <code>os.scandir</code> that don't call stat on each file and is much faster. <a href="https://docs.python.org/3/library/os.html#os.scandir" rel="nofollow noreferrer">Related doc</a>.</p>
<p>PyPI package for old Python versions (&lt;3.5) <a href="https://pypi.python.org/pypi/scandir" rel="nofollow noreferrer">https://pypi.python.org/pypi/scandir</a>.</p>
</div>
<span class="comment-copy">What's your question? What have you tried and failed?</span>
<span class="comment-copy">What is your question? You want to search an alternate solution that would be more effective? Not clear</span>
<span class="comment-copy">What does "very slow" mean?</span>
<span class="comment-copy"><code>os.walk</code> is probably much faster than "accessing each image" and thus not the real culprit.</span>
<span class="comment-copy">How do you know <code>os.walk</code> is the slow part? Remove image manipulation parts and see how much it takes to list all the files.</span>
<span class="comment-copy">Please check code above how do i edit scandir</span>
<span class="comment-copy">@MunSays <code>os.scandir</code> can do roughly the same thing as <code>os.walk</code> you'll have to read the docs (which Arman has provided) to see how it works.</span>
