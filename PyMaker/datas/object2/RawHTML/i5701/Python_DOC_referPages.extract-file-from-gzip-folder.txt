<div class="post-text" itemprop="text">
<p>I am trying extract the XML file from the gzip that comes out of clicking the button "SEC Investment Adviser Report" at the website <a href="https://www.adviserinfo.sec.gov/IAPD/InvestmentAdviserData.aspx" rel="nofollow noreferrer">here</a> (FYI, this links to the SEC website). Below is my (minimal) code. I continue to get "embedded null character" or "embedded null byte", depending on whether I feed <code>gzip.open()</code> <code>.text</code> or <code>.content</code> from my request. Can anyone help me get this file loaded so I can access the XML?</p>
<pre><code>import requests
import gzip

file = gzip.open(requests.get(r'https://www.adviserinfo.sec.gov/IAPD/Content/BulkFeed/CompilationDownload.aspx?FeedPK=39545&amp;FeedType=IA_FIRM_SEC').text,'rt')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/gzip.html#gzip.open" rel="nofollow noreferrer">gzip.open</a> takes a filename, not compressed data. You could use <a href="https://docs.python.org/3/library/gzip.html#gzip.decompress" rel="nofollow noreferrer">gzip.decompress</a>.</p>
<p>The archive from your question looks malformed. Specifically, it has HTML appended for some reason.</p>
<p>The following works by only using the content before the beginning of the HTML:</p>
<pre><code>import requests
import gzip

request = requests.get(r'https://www.adviserinfo.sec.gov/IAPD/Content/BulkFeed/CompilationDownload.aspx?FeedPK=39545&amp;FeedType=IA_FIRM_SEC')

xml = gzip.decompress(request.content[:request.content.find(b"\r\n\r\n&lt;!DOCTYPE html&gt;") - 1])
</code></pre>
</div>
<span class="comment-copy"><a href="https://docs.python.org/3/library/gzip.html#gzip.open" rel="nofollow noreferrer"><code>gzip.open</code></a> takes a filename. Also, IA_FIRM_SEC_Feed_12_20_2017.xml.gz from that link does not appear to be a valid gzip archive. It has HTML appended.</span>
<span class="comment-copy">You could use <a href="https://docs.python.org/3/library/gzip.html#gzip.decompress" rel="nofollow noreferrer">gzip.decompress</a>. Note my comment about the appended HTML, though. <code>gzip.decompress(request.content[:request.content.find(b"\r\n\r\n&lt;!DOCTYPE html&gt;") - 1])</code></span>
