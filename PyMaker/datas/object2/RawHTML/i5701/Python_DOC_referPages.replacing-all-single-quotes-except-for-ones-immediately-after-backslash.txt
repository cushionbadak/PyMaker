<div class="post-text" itemprop="text">
<p>I'm fairly new to web scraping, but I collected a large amount of data which I wrote to file using file.write() since I was unaware that json.dumps() existed. I'm attempting to remedy this by reformatting the data so that it can be loaded back into Python 3 as JSON.</p>
<p>I need to be able to replace all of the single quotes (with double quotes) in a string without replacing any of the ones that come immediately after the backslash. For example: </p>
<pre><code>{'please':'don\'t touch friend\'s cat'}
</code></pre>
<p>Would become:</p>
<pre><code>{"please":"don\'t touch friend\'s cat"}
</code></pre>
<p>Any other advice on reformatting would also be greatly appreciated.</p>
</div>
<div class="post-text" itemprop="text">
<p>If you wrote the data to a file without actually encoding it as JSON, it was most likely "encoded" as the <code>repr()</code> of your object, which should be valid Python code for simple data types. You can parse it again with <code>ast.literal_eval</code>:</p>
<pre><code>In [3]: import ast

In [4]: ast.literal_eval(r"{'please':'don\'t touch friend\'s cat'}")
Out[4]: {'please': "don't touch friend's cat"}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use negative lookbehind <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">https://docs.python.org/3/library/re.html</a></p>
<pre><code>import re

pattern = re.compile(r"(?&lt;!\\)'")
print re.sub(pattern, '"', text)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This can be done fairly easy using regex with the <code>re</code> module. If you can load the data into memory as a string then you can simply execute:</p>
<p><code>re.sub(r'(?&lt;!\\)\'', '"', my_data_string)</code></p>
<p>What this does is it matches all single quotes not preceded by a backslash and replaces them with double quotes. You can find more of the gory details about how this works here: <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">https://docs.python.org/3/library/re.html</a></p>
</div>
<span class="comment-copy"><code>json.dumps(your_variable)</code>?</span>
