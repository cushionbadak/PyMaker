<div class="post-text" itemprop="text">
<p>Tools like <code>sudo</code> read from /dev/tty to read a password.</p>
<p>I would like to avoid this.</p>
<p>The subprocess should not be able to read /dev/tty. The subprocess should fail immediately instead of waiting for input for ever.</p>
<p>I am using the <code>subprocess</code> module of Python. The subprocess should fail if it tries to read from /dev/tty.</p>
<p>Remember: The tool <code>sudo</code> is just an example. A fancy command line argument to sudo does not solve my problem. This should work for all linux command line tools.</p>
<p>Question: How to make any tool fail as soon as it wants to read from /dev/tty (called via the subprocess module of Python)?</p>
<p>Background: This is a normal linux user process, not root.</p>
</div>
<div class="post-text" itemprop="text">
<p>Since python3.2 <a href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" rel="noreferrer"><code>Popen</code></a> takes an argument <code>start_new_session</code> which will cause the executed process to be started detached from the current controlling terminal by calling <code>setsid()</code> prior to executing the child process.</p>
<p>So all you should need is to start the process with <code>start_new_session=True</code></p>
</div>
<span class="comment-copy">What is your question? How to remove read permissions from <code>/dev/tty</code>, or what?</span>
<span class="comment-copy">@AndrejsCainikovs I updated the question.</span>
<span class="comment-copy">Maybe <a href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" rel="nofollow noreferrer"><code>start_new_session=True</code></a> when creating the process does what you need?</span>
<span class="comment-copy">@mata thank you this works! Please write <code>start_new_session=True</code> as answer, I will upvote and accept it.</span>
<span class="comment-copy">In the specific case of <code>sudo</code>, you probably just want the <code>-n</code> switch to put sudo into non-interactive mode.</span>
<span class="comment-copy">Thank you very much. The new version of subx uses this by default: <a href="https://pypi.python.org/pypi/subx/" rel="nofollow noreferrer">pypi.python.org/pypi/subx</a></span>
