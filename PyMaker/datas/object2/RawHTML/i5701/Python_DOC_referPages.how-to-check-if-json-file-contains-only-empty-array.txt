<div class="post-text" itemprop="text">
<p>I need to check if my JSON file contains data or only empty array. I am doing it in this way:</p>
<pre><code>with open('example.json') as f:
    data = json.load(f)
    if not data:
        do_my_stuff()
</code></pre>
<p>But my JSON files can be really huge and I do not want to load them all.<br/>
Can I check if file contains nothing but empty array in other way? Check if my file's weight is 2 bytes (isn't it lame?)?</p>
</div>
<div class="post-text" itemprop="text">
<p>You have to use <a href="https://docs.python.org/3/library/os.path.html#os.path.getsize" rel="nofollow noreferrer"><code>os.path.getsize(path)</code></a> to find file size of a file.<br/>
You do not have to read file at all.<br/>
If JSON file is just 2 bytes, "[]" or "{}", it is an empty JSON object.</p>
<p>Based on some JSON usage principles, in this particular case it is sane and safe to presume that a 2 bytes long JSON string is an empty string, array or object ("", [], {}). A two digits number may be a valid JSON string but it is not what JSON is used for (you can use JSON library to load a single value like you can use a big crane to lift an egg).</p>
<p>If this [file size] does not fulfill your requirements you have to read the first 2 bytes and check if they are equal to '[]':</p>
<pre><code>with open(filename, 'rb') as file:
    if file.read(2) != '[]':
        file.seek(0)  # it may be redundant but it does not hurt
        json.load(file)
</code></pre>
</div>
<span class="comment-copy">Why not test with <code>json.load</code> only those files smaller than <code>X</code> bytes that you test with <code>os.path.getsize(path)</code>? <code>X</code> would probably 5 bytes equal to <code>null\n</code>.</span>
