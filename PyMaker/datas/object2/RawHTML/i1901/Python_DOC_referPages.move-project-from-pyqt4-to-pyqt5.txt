<div class="post-text" itemprop="text">
<p>I usually write a small function to create QActions. But PyQt5 doesn't support function SIGNAL() anymore. I don't know how to rewrite this function beautifully.</p>
<pre><code>def createAction(self, text, slot=None, signal='triggered()'):
    action = QAction(text, self)
    if slot is not None:
        self.connect(action, SIGNAL(signal), slot)
    return action
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I think you may be over-thinking this. New-style signals are instance attributes, so you can just use <a href="http://docs.python.org/3/library/functions.html#getattr" rel="nofollow">getattr</a>:</p>
<pre><code>def createAction(self, text, slot=None, signal='triggered'):
    action = QAction(text, self)
    if slot is not None:
        getattr(action, signal).connect(slot)
    return action
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The problem here is about use a string (by name) to reference a signal.</p>
<p>There are three ways to connect signals under PyQt5. <em>see</em> <a href="http://pyqt.sourceforge.net/Docs/PyQt5/signals_slots.html?highlight=pyqtsignal#connecting-signals-using-keyword-arguments" rel="nofollow">connecting signals by kwargs</a> So I come out with this solution.</p>
<pre><code>def createAction(self, text, slot=None, signal='triggered'):
    action = QAction(text, self)
    signal_dict = {'triggered':action.triggered, 'changed':action.changed,
                    'toggled':action.toggled, 'hovered':action.hovered }
    if slot is not None:
        # self.connect(action, SIGNAL(signal), slot)
        signal_dict[signal].connect(slot)
    return action
</code></pre>
</div>
<span class="comment-copy"><a href="http://pyqt.sourceforge.net/Docs/PyQt4/new_style_signals_slots.html" rel="nofollow noreferrer">pyqt.sourceforge.net/Docs/PyQt4/new_style_signals_slots.html</a></span>
