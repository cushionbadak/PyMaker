<div class="post-text" itemprop="text">
<p>Is it possible to change the 1st item in a FIFO queue and push it back to the 1st position? I can't seem to find any relevant resources. The following is what I have achieved so far, but it pushes to the last item. </p>
<pre><code>import Queue

q = Queue.Queue(maxsize=0)
# multiple q.put_nowait(msg) 

msg = q.get_nowait()
# edit the msg
q.put_nowait(msg)
</code></pre>
<p>Any help would be greatly appreciated, thanks!</p>
</div>
<div class="post-text" itemprop="text">
<ol>
<li>Why you're doing this at all?</li>
<li>Is this a <a href="https://docs.python.org/3/library/queue.html#queue.Queue" rel="nofollow noreferrer"><code>queue.Queue</code></a> object?</li>
</ol>
<p>If so, you have access to underlying <code>.queue</code> attribute, which is <a href="https://docs.python.org/3/library/collections.html#collections.deque" rel="nofollow noreferrer">deque</a> itself. And it does support <code>appendleft</code> method.</p>
<p>Despite, I <em>highly</em> recommend not doing so, this violates FIFO interface, and it made this way for a reason. If it doesn't suit your needs, look for something that does. <code>Queue</code> operates with put/pop for a reason, there's a lot of logic on top of simple <code>deque</code></p>
</div>
<div class="post-text" itemprop="text">
<p>You're looking for something analogous to <a href="http://pubs.opengroup.org/onlinepubs/009696899/functions/ungetc.html" rel="nofollow noreferrer">ungetc</a>; this is not a standard operation of a <a href="https://en.wikipedia.org/wiki/Queue_(abstract_data_type)" rel="nofollow noreferrer">queue</a>, as it violates FIFO (first in first out). Thus it's not an operation Python's <a href="https://docs.python.org/3/library/queue.html" rel="nofollow noreferrer">queue</a> module provides, either. But there is a container type perfectly suited to the task: <a href="https://docs.python.org/3/library/collections.html#collections.deque" rel="nofollow noreferrer">collections.deque</a>. This has both append and appendleft operations. So you can use it with put=appendleft, get=pop, unget=append. </p>
</div>
<span class="comment-copy">I don't think there is a way of retrieving the top without removing it from the <code>Queue</code>. So the answer is probably no.</span>
<span class="comment-copy">No, there is no way to do this. You can use <a href="https://docs.python.org/3/library/collections.html#collections.deque" rel="nofollow noreferrer">deque</a> though, which allows you to <code>append</code> or <code>appendleft</code>, and to <code>pop</code> or <code>popleft</code></span>
<span class="comment-copy">Thanks! I'm adding new features based on existing code. Probably I have to change to deque instead</span>
<span class="comment-copy">Just carefully investigate why it's there, first of all. Simple calls to deque is not thread-safe, this is why <code>Queue</code> exists</span>
<span class="comment-copy">deque's append and pop operations are thread safe, but if you pop then append it's quite possible for another thread to have done something in between. It's not the same as a peek operation.</span>
