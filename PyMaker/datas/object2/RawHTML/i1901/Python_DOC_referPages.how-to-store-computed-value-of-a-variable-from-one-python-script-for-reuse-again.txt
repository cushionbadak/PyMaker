<div class="post-text" itemprop="text">
<p>I have a <strong>python</strong> (3.7.0) script file which takes more than 17,000 text files and then processes each file line by line to fill the required data into a pandas data frame. So the code is like following is the <strong>Script1.py</strong> file:</p>
<pre><code>def filePrpcesserFunc(file):
   data = open(file, 'r')
   for line in data.readlines():
      #Does some computing here to get var1, var2, var3
      #var1, var2, var3 are all integers
   return var1, var2, var3

if __name__ == '__main__':
   import glob2
   import pandas
   files = glob2.glob("*.txt")
   #There are more than 17,000 text files to be computed
   X = pandas.DataFrame()
   for file in files:
      rvar1, rvar2, rvar3 = fileProcesserFunc(file)
      X.loc[str(rvar1), str(rvar2)] = rvar3
</code></pre>
<p>Now the above python script upon runs over 17,000 files to make the pandas dataframe X which needs to be computed only once to get data <em>(and computation is quite expensive)</em>. I need to use this dataframe in another script file (say) <strong>Script2.py</strong> to make a Machine Learning model and so to test my model, I would need to access X, again and again, i.e. I would need to run the Script2.py again and again.
Can anyone suggest anything? I would be very thankful to you.</p>
</div>
<div class="post-text" itemprop="text">
<p>You could use the builtin <a href="https://docs.python.org/3/library/pickle.html" rel="nofollow noreferrer">pickle</a> module:</p>
<p>In <code>script1.py</code>:</p>
<pre><code>import pickle
with open('dataframe.txt', 'wb') as f:
    pickle.dump(X, f)
</code></pre>
<p>In <code>script2.py</code>:</p>
<pre><code>import pickle
X = pickle.load(open('dataframe.txt', 'rb'))
</code></pre>
<p>You could also load the built in <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_pickle.html" rel="nofollow noreferrer">to_pickle</a> methods on dataframes:</p>
<p>In <code>script1.py</code>:</p>
<pre><code>X.to_pickle("./df.pkl")
</code></pre>
<p>In <code>script2.py</code>:</p>
<pre><code>import pandas as pd
X = pd.read_pickle(¨./df.pkl¨)
</code></pre>
</div>
