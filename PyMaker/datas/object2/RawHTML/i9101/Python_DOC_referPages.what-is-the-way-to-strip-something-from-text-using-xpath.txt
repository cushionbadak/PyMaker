<div class="post-text" itemprop="text">
<p>i am using an xpath in python  to parse a table from an html file. i am using this xpath :</p>
<pre><code>//td//text()
</code></pre>
<p>This give me output as two strings:</p>
<pre><code>['australia', '$3333.99']
</code></pre>
<p>output i want:</p>
<pre><code>['australia', '3333.99']
</code></pre>
<p>but i want $ sign to be stripped of how can i do that in general using xpath? i have tried <code>substring-after</code> but it does not works.</p>
<p>this is how i tried :</p>
<pre><code>//td//text()[substring-after(.,'$')]
</code></pre>
<p>but i got this output:</p>
<pre><code>['$3333.99']
</code></pre>
<p><code>Australia</code> was missing from the result</p>
</div>
<div class="post-text" itemprop="text">
<p>Aside from using <code>translate()</code> (as posted in the other answer), you can also use <a href="https://developer.mozilla.org/en-US/docs/Web/XPath/Functions/substring" rel="nofollow noreferrer"><code>substring()</code> function</a> and dynamically determine the beginning of a slice:</p>
<pre><code>In [4]: [item.xpath("substring(., starts-with(., '$') + 1)") for item in root.xpath("//td")]
Out[4]: ['australia', '3333.99']
</code></pre>
<p>By the way, this approach is a bit safer than using <code>translate()</code> since, here we are only stripping a single <code>$</code> character at the beginning of a string if it exists, but <code>translate()</code> would replace all the occurrences of <code>$</code> in every <code>td</code> text you are extracting. You may get some unwanted side effects.</p>
<p>Note that you have to do it in two steps in any case - the <code>translate()</code> or <code>substring()</code> functions would not be applied to every node if used like <code>translate(//td//text(), "$", "")</code>, references:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/333249/how-to-apply-the-xpath-function-substring-after">How to apply the XPath function 'substring-after'</a></li>
<li><a href="https://stackoverflow.com/questions/3359512/is-it-possible-to-apply-normalize-space-to-all-nodes-xpath-expression-finds">Is it possible to apply normalize-space to all nodes XPath expression finds?</a></li>
</ul>
<p>Or, you can trim it using Python and <a href="https://docs.python.org/3/library/stdtypes.html#str.lstrip" rel="nofollow noreferrer"><code>.lstrip()</code></a>:</p>
<pre><code>[item.lstrip("$") for item in root.xpath("//td//text()")]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>//td//text()[substring-after(.,'$')]
</code></pre>
<p>This will evaluate the <code>text()</code> in <code>['australia', '$3333.99']</code>, and for the 
<code>australia</code>, it dose not contains <code>$</code>, this will return <code>false</code> and will not show in the result</p>
<pre><code>[td.xpath('translate(., "$", "")')for td in tree.xpath("//td")]
</code></pre>
</div>
<span class="comment-copy">The expression you tried is fine in XPath 2.0 but not in XPath 1.0. You should specify which XPath version you are using. Though it doesn't do quite what you want: try <code>//td//text()/substring-after(.,'$')</code></span>
<span class="comment-copy">i am aware of this but i dont want to loop over list because i have more than 500 of them , it makes the function slow . i was looking for a way using xpath mayb using <code>translate</code></span>
<span class="comment-copy">@anekix gotcha, working on it, thanks.</span>
<span class="comment-copy">thanks , waiting for reply</span>
<span class="comment-copy">@anekix saw the translate variant and decided to post an alternative approach, check it out</span>
<span class="comment-copy">@anekix also, linked a discussion about why you cannot do it in one go and have to have an extra loop.</span>
<span class="comment-copy">thanks for the reply how .whats the correct way?</span>
<span class="comment-copy">@anekix xpath is used to locate tag, not modify the tag. yes, xpath path can do the this task, but python <code>strip</code> is better choice.</span>
<span class="comment-copy">i have like 500 lists to apply lstrip on its not the big deal i know but i have to do thi for 400 tables so now its 400X500 its a costly loop i think and it slows down my application</span>
<span class="comment-copy">isn't it same ? i meant i have to do a seperate iteration over the list right?</span>
<span class="comment-copy">@anekix yes, it's inevitable</span>
