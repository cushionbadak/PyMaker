<div class="post-text" itemprop="text">
<p>I am trying to profile a nested function using <code>cProfile.run</code>. I understand that perhaps <code>cProfile</code> isn't running at the same scope as where I am calling it, but I'm not quite sure what the idiomatic way to achieve this is. Here's an MVCE:</p>
<pre><code>def foo():
    def bar():
        # do something here
        return 1
    cProfile.run('bar()')
</code></pre>
<p>Gives the error:</p>
<pre><code>NameError: name 'bar' is not defined
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/3/library/profile.html#profile.runctx" rel="nofollow noreferrer"><code>cProfile.runctx</code></a>:</p>
<pre><code>def foo():
    def bar():
        # do something here
        return 1
    cProfile.runctx('bar()', None, locals=locals())
</code></pre>
</div>
<span class="comment-copy">Just verified it works. Thanks!</span>
