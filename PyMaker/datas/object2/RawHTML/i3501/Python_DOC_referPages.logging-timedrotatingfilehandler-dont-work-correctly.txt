<div class="post-text" itemprop="text">
<p>TimedRotatingFileHandler in logging package not work correctly. My program source:</p>
<pre><code>from logging.handlers import TimedRotatingFileHandler
import logging

logger = logging.getLogger(__name__)
logger.setLevel(logging.DEBUG)
handler = TimedRotatingFileHandler("log/log_file.log", when="d")
handler.setLevel(logging.DEBUG)
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
handler.setFormatter(formatter)
logger.addHandler(handler)
</code></pre>
<p>After a few days, two problems arise.
First, it writes in <strong>log_file.log</strong> again.
Second, logging logs the events of day <strong>A</strong> on day <strong>B</strong>. For example:</p>
<pre><code>File name:    
log_file.log.2018-06-21
</code></pre>
<p>and</p>
<pre><code>File content:

2018-06-23 08:05:42,906 - uwsgi_file__home_ddddd_main - INFO - 
2018-06-23 08:05:42,907 - uwsgi_file__home_ddddd_main - DEBUG -
</code></pre>
<p>In this example, by mistake, the events of June 23 was written in the file of June 21st.</p>
</div>
<div class="post-text" itemprop="text">
<p>This handler always writes to the base file (xxx.log). When the time comes to rollover, then the file is closed, renamed and a file with the base filename is opened again.</p>
<p>If you are using multiple process to write to the same file (implied by your possible use of UWSGI) then you might have occasional problems - writing to the same file from multiple processes is supported, but not the way you've done it. See <a href="https://stackoverflow.com/questions/8403839/python-logging-from-multiple-processes#8404359">this question/answer</a> and <a href="https://docs.python.org/3/howto/logging-cookbook.html#logging-to-a-single-file-from-multiple-processes" rel="nofollow noreferrer">this cookbook entry</a> for more information.</p>
</div>
