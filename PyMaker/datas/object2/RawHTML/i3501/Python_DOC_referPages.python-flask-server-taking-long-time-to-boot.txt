<div class="post-text" itemprop="text">
<p>I have an odd problem at which when I run my code below in PyCharm or through the console (python script.py) the flask server takes an extremely long time to boot meaning when trying to access it it shows no content for a good few minutes.</p>
<pre><code>import threading
from flask import render_template, request, logging, Flask, redirect

def setupFlask():
    appn = Flask(__name__)
    log = logging.getLogger('werkzeug')
    log.setLevel(logging.ERROR)


    @appn.route('/')
    def page():
        return render_template('index.html')


    @appn.route('/submit', methods=['POST'])
    def submit():
        token = request.form['ID']
        ID = token
        return redirect('/')

    appn.run()
a = threading.Thread(target=setupFlask)
a.daemon = True
a.start()
while True:
    pass
</code></pre>
<p>The odd thing is that when I run the same code above in the PyCharm debugger, the flask server takes about 5 seconds to boot, massively quicker than the few minutes it takes when run in the console. I would love that kind of speed when running the script normally and cant find a solution due to the problem fixing itself when in debugger!
This code snippet is part of a larger application, however I have adapted it to be run on its own and the same problem occurs.
I am not running in a virtualenv.
All help appreciated.</p>
<p>EDIT: The index.html document is very basic and only contains a few scripts and elements therefore I could not see it taking a long time to load.</p>
</div>
<div class="post-text" itemprop="text">
<p>The problem was with your <code>Flask</code> installation, but there's another one. You should not wait for your thread with a <code>while</code> loop. The better way is to <a href="https://docs.python.org/3/library/threading.html#threading.Thread.join" rel="nofollow noreferrer">join</a> your thread, like this:</p>
<pre><code>a = threading.Thread(target=setupFlask)
a.daemon = True
a.start()
a.join()
</code></pre>
</div>
<span class="comment-copy">This is strange. It should always be like 5s. How do you run i tin the console?</span>
<span class="comment-copy">@Frynio Indeed... I run the function above in a thread and just do the normal "python script.py" in console. The same long boot time happens when running in PyCharm. I will edit the question slightly to make more sense.</span>
<span class="comment-copy">Do you use virtualenv? And by the way, your imports are strange. I would always <code>from flask import Flask</code>, your code f.e doesn't work for me</span>
<span class="comment-copy">Is your code sample the complete script or is it edited down? You're running the Flask app in a daemonic thread, suggesting there is more happening in the main thread, otherwise the process would exit after <code>a.start()</code></span>
<span class="comment-copy">@Frynio I am going to try and reinstall python and the modules in an old school attempt to fix seeing as you are not experiencing the same behaviour!</span>
