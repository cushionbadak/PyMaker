<div class="post-text" itemprop="text">
<p>Could you give me any explanation, please</p>
<p>I have a part of the code using ConfigParser
File that I am reading in in the directory ~/ui/config.cfg
after I am calling function below and I get a new file in the directory where my module presents which is (~/ui/helper/config.cfg)</p>
<pre><code>class CredentialsCP:

    def __init__(self, cloud_name=None):
       self.config = ConfigParser.ConfigParser()
       self.cloud_name = cloud_name

    def rewrite_pass_in_config(self, cloud, new_pass):
        if new_pass:
           self.config.read('config.cfg')
           self.config.set(cloud, 'password', new_pass)
           with open('config.cfg', 'wb') as configfile:
            self.config.write(configfile)
        else:
           return False
</code></pre>
<p>It creates a new file in the directory where I am running my code from, but I need the same file to be re-written. How can I do that? And why I keep getting the same behavior ?</p>
</div>
<div class="post-text" itemprop="text">
<p>Since you're using the same file name (<em>config.cfg</em>) when reading and writing (and also, not altering the working dir), you are operating on the same file. Since you're writing the <em>~/ui/helper/config.cfg</em> file (it gets created after running the code), that's the one that you're reading from too.</p>
<p>So, <strong>you are not opening (for reading) the file that you think you are</strong>. From <a href="https://docs.python.org/3/library/configparser.html#configparser.ConfigParser.read" rel="nofollow noreferrer">[Python]: <strong>read</strong>(<em>filenames, encoding=None</em>)</a></p>
<blockquote>
<p>If a file named in filenames cannot be opened, <strong>that file will be ignored</strong>. <br/>
  ... <br/>
  If none of the named files exist, the <a href="https://docs.python.org/3/library/configparser.html#configparser.ConfigParser" rel="nofollow noreferrer">ConfigParser</a> instance <strong>will contain an empty dataset</strong>.</p>
</blockquote>
<p>You're reading from a file that doesn't exist, which yields an empty config, and that is the config you're writing in your (desired) file. In order to fix your problem, specify the desired file by its <strong>full or relative name</strong>. You could have something like:</p>
<ul>
<li><p>In <code>__init__</code> :</p>
<pre><code>self.file_name = os.path.expanduser("~/ui/config.cfg") # Or any path processing code
</code></pre></li>
<li><p>In <code>rewrite_pass_in_config</code>:</p>
<ul>
<li><p>Read:</p>
<pre><code>self.config.read(self.file_name)
</code></pre></li>
<li><p>Write</p>
<pre><code>with open(self.file_name, "wb") as configfile:
    self.config.write(configfile)
</code></pre></li>
</ul></li>
</ul>
</div>
<span class="comment-copy">provide a <a href="https://stackoverflow.com/help/mcve">mcve</a> so we can reproduce your "undesired" behavior</span>
<span class="comment-copy">@khelwood question was updated as you asked, added more code</span>
<span class="comment-copy">@AzatIbrakov have done it already</span>
<span class="comment-copy">so your script is located at <code>~/ui/helper/</code>? try to <code>imports os; print(os.getcwd())</code></span>
<span class="comment-copy">@AzatIbrakov tried  'imports os; print(os.getcwd())' and I get /ui/helper</span>
<span class="comment-copy">Need to use <code>os.path.expanduser("~/ui/config.cfg")</code>. <code>open</code> does not expand the tilde for you and will attempt to access a directory named <code>~</code>.</span>
<span class="comment-copy">Wow, I missed the <code>~</code>!!! Thank you @DanD. ! Added in the answer.</span>
<span class="comment-copy">@CristiFati you were right, thank you</span>
