<div class="post-text" itemprop="text">
<pre><code>2019-03-17 17:21:06 [scrapy.core.engine] DEBUG: Crawled (404) &lt;GET http://www.google.com/www.distancesto.com/coordinates/de/jugenheim-in-rheinhessen-latitude-longitude/history/401814.html&gt; (referer: http://www.google.com/search?q=Rheinhessen+Germany+coordinates+longitude+latitude+distancesto)
2019-03-17 17:21:06 [scrapy.core.scraper] DEBUG: Scraped from &lt;404 http://www.google.com/www.distancesto.com/coordinates/de/jugenheim-in-rheinhessen-latitude-longitude/history/401814.html&gt;
</code></pre>
<p>so instead of following 'www.distancesto.com/coordinates/de/jugenheim-in-rheinhessen-latitude-longitude/history/401814.html' it adds '<a href="http://www.google.com/" rel="nofollow noreferrer">http://www.google.com/</a>' before and obviously returns in a broken link. this is beyond me and I can't understand why. the response does not have that, I even tried to return after 22 character(undesired preifx length) and it erased part of the real link. </p>
<pre><code>class Googlelocs(Spider):


name = 'googlelocs'
start_urls = []

for i in appellation_list:
    baseurl =  i.replace(',', '').replace(' ', '+')
    cleaned_href = f'http://www.google.com/search?q={baseurl}+coordinates+longitude+latitude+distancesto'
    start_urls.append(cleaned_href)



def parse(self, response):


    cleaned_href = response.xpath('//*[@id="ires"]/ol/div[1]/h3/a').get().split('https://')[1].split('&amp;')[0]
    yield response.follow(cleaned_href, self.parse_distancesto)


def parse_distancesto(self, response):
    items = GooglelocItem()

    items['appellation'] = response.xpath('string(/html/body/div[3]/div/div[2]/div[3]/div[2]/p/strong)').get()
    items['latitude'] = response.xpath('string(/html/body/div[3]/div/div[2]/div[3]/div[3]/table/tbody/tr[1]/td)').get()
    items['longitude'] = response.xpath('string(/html/body/div[3]/div/div[2]/div[3]/div[3]/table/tbody/tr[2]/td)').get()
    items['elevation'] = response.xpath('string(/html/body/div[3]/div/div[2]/div[3]/div[3]/table/tbody/tr[10]/td)').get()

    yield items
</code></pre>
<p>here is the spider. </p>
</div>
<div class="post-text" itemprop="text">
<p>I found the answer.</p>
<p>href = response.xpath('//*[@id="ires"]/ol/div[1]/h3/a/@href').get()</p>
<p>this was the correct path to obtain the href from google. Also I had to accept the link masked by google without trying to modify it to be able to follow into it. </p>
</div>
<span class="comment-copy">Set a breakpoint in parse and try to figure out what went wrong from inside the debugger. Also, this will never work because google will block you.</span>
<span class="comment-copy">what do you mean it will never work? I get the full response body from google.</span>
<span class="comment-copy">They will start showing captchas after a certain number of requests.</span>
