<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/34057851/python-flask-typeerror-dict-object-is-not-callable">Python Flask, TypeError: 'dict' object is not callable</a>
<span class="question-originals-answer-count">
                    4 answers
                </span>
</li>
</ul>
</div>
<p>I'm trying to build my first flask application and when I try to send login data from this form:</p>
<pre><code>&lt;form class="border border-light p-5" action="http://localhost:5000/login" method="POST"&gt;

    &lt;p class="h4 mb-4 text-center"&gt;Connexion&lt;/p&gt;
    &lt;input type="email" id="defaultLoginFormEmail" class="form-control mb-4" placeholder="E-mail" name="username"&gt;
    &lt;input type="password" id="defaultLoginFormPassword" class="form-control mb-4" placeholder="Mot de passe" name="password"&gt;
    &lt;div class="d-flex justify-content-between"&gt;
    &lt;/div&gt;
    ...
&lt;/form&gt;
</code></pre>
<p><strong>Route mapping:</strong></p>
<pre><code>@app.route('/login', methods=['POST'])
def UserLogin():
    credentials={}
    credentials['username'] = request.form['username']
    credentials['password'] = request.form['password']
    #I think that the problem in the 3 lines above
    current_user = UserModel.find_by_username(credentials['username'])
    if not current_user:
        return {'message': 'User {} doesn\'t exist'.format(credentials['username'])}

    if UserModel.verify_hash(credentials['password'], current_user.password):
        access_token = create_access_token(identity = credentials['username'])
        refresh_token = create_refresh_token(identity = credentials['username'])
        return redirect(url_for('search'))
    else:
        return {'message': 'Wrong credentials'}
</code></pre>
<p>When I try to log in I get: <code>TypeError: 'dict' object is not callable</code>. </p>
<p>Full traceback as asked:</p>
<pre><code>Traceback (most recent call last):
  File "C:\Users\acer\Anaconda3\lib\site-packages\flask\app.py", line 1997, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\acer\Anaconda3\lib\site-packages\flask\app.py", line 1985, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\acer\Anaconda3\lib\site-packages\flask\app.py", line 1540, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "C:\Users\acer\Anaconda3\lib\site-packages\flask\_compat.py", line 33, in reraise
    raise value
  File "C:\Users\acer\Anaconda3\lib\site-packages\flask\app.py", line 1982, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\acer\Anaconda3\lib\site-packages\flask\app.py", line 1615, in full_dispatch_request
    return self.finalize_request(rv)
  File "C:\Users\acer\Anaconda3\lib\site-packages\flask\app.py", line 1630, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\acer\Anaconda3\lib\site-packages\flask\app.py", line 1740, in make_response
    rv = self.response_class.force_type(rv, request.environ)
  File "C:\Users\acer\Anaconda3\lib\site-packages\werkzeug\wrappers.py", line 921, in force_type
    response = BaseResponse(*_run_wsgi_app(response, environ))
  File "C:\Users\acer\Anaconda3\lib\site-packages\werkzeug\test.py", line 923, in run_wsgi_app
    app_rv = app(environ, start_response)
TypeError: 'dict' object is not callable
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You're trying to return a <code>dict</code> as a response. - Try using something as shown below.</p>
<pre><code>from flask import jsonify

@app.route('/route')
def example():
    return jsonify({"your": "dict"})
</code></pre>
</div>
<span class="comment-copy">post full traceback of your error</span>
<span class="comment-copy">I just added it to the post there you go</span>
<span class="comment-copy">also check indentation of your code</span>
<span class="comment-copy">checked, all good</span>
<span class="comment-copy">but I'm not returning the <code>dict</code>, I'm just trying to extract the data to check if the user exists etc.</span>
<span class="comment-copy">Well, the code of your view function says you are returning a <code>dict</code> -- <code>return {'message': 'User {} doesn\'t exist'.format(credentials['username'])}</code> and <code>return {'message': 'Wrong credentials'}</code></span>
<span class="comment-copy">You are returning a <code>dict</code> and I believe you have invalid indentations too.</span>
<span class="comment-copy">you were right, I was trying to log in with valid credentials so it didn't come to my mind to check those <code>dict</code>s, now I have to go back and check my database. thanks and sorry I'll try to be more careful next time.</span>
<span class="comment-copy">You don't have to be sorry. - Glad it helped.</span>
