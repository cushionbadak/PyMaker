<div class="post-text" itemprop="text">
<p>I have a function which I would like to run every 10 seconds. This has a global variable which is a string called <code>marketId</code>. </p>
<p>At somepoint, this string changes. When this happens I want to run a new function. </p>
<p>To do this I have tried the following:</p>
<pre><code>def test():
    print("working")


def loop():

    marketId_list = []

    while True:

        time.sleep(10)

        full_function()

        marketId_list.append(marketId)

        for i in marketId_list:

            if marketId_list[i] != marketId_list[i-1]:

                test()
</code></pre>
<p>But when I run the <code>loop()</code> function I get the error:</p>
<pre><code>TypeError: list indices must be integers or slices, not str
</code></pre>
<p>Any help in solving this would be appreciated, cheers. Sandy</p>
</div>
<div class="post-text" itemprop="text">
<p>Try this:</p>
<pre><code>for i, item in enumerate(marketId_list):
    if i&gt;0 and marketId_list[i] != marketId_list[i-1]:
        test()
</code></pre>
</div>
<span class="comment-copy"><code>for i in marketId_list</code> iterates <i>directly over the items in the list</i>.</span>
<span class="comment-copy">Use <a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow noreferrer"><code>enumerate</code></a> when you want access to an item's index while iterating. <code>for idx,item in enumerate(marketId_list): ...</code></span>
<span class="comment-copy"><code>marketId_list[i]</code> is simply <code>item</code>.</span>
<span class="comment-copy">Or even <code>for previous,current in zip(marketId_list, marketId_list[1:]): ...</code></span>
<span class="comment-copy">Note: in the first iteration i is 0 and i-1 is -1 which is the last element of the list and thus the first element of the list is compared to the last element of the list which may or may not be intended.</span>
<span class="comment-copy">@fabianegli this good catch.</span>
<span class="comment-copy">@fabianegli you are right, i kinda fixed it, but my answer had to do with the error that he asked for. This is some other bug on his code.</span>
