<div class="post-text" itemprop="text">
<p>I'm writing to a file in three functions and i'm trying not overwrite the file. I want every time i run the code i generate a new file
    with open("atx.csv", 'w')as output:
         writer = csv.writer(output)</p>
</div>
<div class="post-text" itemprop="text">
<p>If you want to write to different files each time you execute the script, you need to change the file names, otherwise they will be overwritten.</p>
<pre><code>import os
import csv

filename = "atx"

i = 0
while os.path.exists(f"{filename}{i}.csv"):
    i += 1

with open(f"{filename}{i}.csv", 'w') as output:
     writer = csv.writer(output)
     writer.writerow([1, 2, 3]) #or whatever you want to write in the file, this line is just an example
</code></pre>
<p>Here I use <a href="https://docs.python.org/2/library/os.path.html#os.path.exists" rel="nofollow noreferrer">os.path.exists()</a> to check if a file is already present on the disk, and increment the counter.</p>
<p>First time you run the script, you get axt0.csv, second time axt1.csv, and so on.</p>
<p>Replicate this for your three files.</p>
<p><strong>EDIT</strong></p>
<p>Also note that here I'm using <a href="https://docs.python.org/3/reference/lexical_analysis.html#f-strings" rel="nofollow noreferrer">formatted string literals</a> which are available since python3.6. If you have an earlier version of python, use <code>"{}{:d}.csv".format(filename, i)</code> instead of <code>f"{filename}{i}.csv"</code></p>
<p><strong>EDIT bis after comments</strong></p>
<p>If the same file is needed to be manipulated by more functionsduring the execution of the script, the easiest thing came to my mind is to open the writer outside the functions and pass it as an argument.</p>
<pre><code>filename = "atx"

i = 0
while os.path.exists(f"{filename}{i}.csv"):
    i += 1

with open(f"{filename}{i}.csv", 'w') as output:
    writer = csv.writer(output)
    foo(writer, ...) #put the arguments of your function instead of ...
    bar(writer, ...)
    etc(writer, ...)
</code></pre>
<p>This way each time you call one of the functions it writes to the same file, appending the output at the bottom of the file.</p>
<p>Of course there are other ways. You might check for the file name existence only in the first function you call, and in the others just open the file with the <code>'a'</code> options, to append the output.</p>
</div>
<div class="post-text" itemprop="text">
<p>you can do something like this so that each file gets named something a little different and therefore will not be overwritten: </p>
<pre><code>for v in ['1','2','3']:
    with open("atx_{}.csv".format(v), 'w')as output:
         writer = csv.writer(output)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You are using just one <em>filename</em>. When using the same value as a name <code>atx.csv</code> you will either overwritte it with <code>w</code> or append with <code>a</code>. </p>
<p>If you want new files to be created, just check first if the file is there.</p>
<pre><code>import os
files = os.listdir()
files = [f for f in files if 'atx' in f]
num = str(len(files)) if len(files) &gt; 0 else ''
filename = "atx{0}.csv".format(num)

with open(filename, 'w')as output:
     writer = csv.writer(output)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Change <code>with open("atx.csv", 'w')</code> to <code>with open("atx.csv", 'a')</code></p>
<p><a href="https://www.guru99.com/reading-and-writing-files-in-python.html#2" rel="nofollow noreferrer">https://www.guru99.com/reading-and-writing-files-in-python.html#2</a></p>
</div>
<span class="comment-copy">What are the three files? You are only using one filename, <code>atx.csv</code>.</span>
<span class="comment-copy">If the same data is written in the 3 files, just copy your code with 3 different names</span>
<span class="comment-copy">the thing is i have this file open and close in three functions</span>
<span class="comment-copy">Is the same file open and close by three different functions? Do you want the functions to write to the same file? Maybe edit your question providing these details.</span>
<span class="comment-copy">yes the same file opens and closes by three different functions and the functions write to the same file</span>
<span class="comment-copy">@AhmedAhmed I edit my answer, hope it helps.</span>
<span class="comment-copy">it says that foo bar and etc are not defined</span>
<span class="comment-copy">is there a way to do it with out the for loop</span>
<span class="comment-copy">you could do it more manually and actually write out 'with open("atx_1.csv")......" for each one?</span>
<span class="comment-copy">If you need to reuse this code multiple times you should take Valentino's solution below.</span>
<span class="comment-copy">@Austin not the exact opposite, it appends rather than replacing completely, but potentially still not what the OP wants</span>
<span class="comment-copy">@jonrsharpe, sure my wordings got wrong. Anyway does not answer OP.</span>
