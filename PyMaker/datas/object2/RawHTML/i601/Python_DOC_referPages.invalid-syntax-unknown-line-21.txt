<div class="post-text" itemprop="text">
<p>I get this error message when I try to debug I don't know whats wrong
this is auto Reddit poster</p>
<p>line 21  is     except Exception, e:</p>
<p>this line of code seems fine I don't know why I'm getting an error.</p>
<pre><code>
import praw
import json
import urllib

import settingslocal

REDDIT_USERNAME = ''
REDDIT_PASSWORD = ''

try:
    from settingslocal import *
except ImportError:
    pass

def main():
    print ('starting')

    url = "http://api.ihackernews.com/page"
    try:
        result = json.load(urllib.urlopen(url))
    except Exception, e:
    return

    items = result['items'][:-1]

    reddit = praw.Reddit(user_agent='HackerNews bot by /u/mpdavis')
    reddit.login(REDDIT_USERNAME, REDDIT_PASSWORD)
    link_submitted = False
    for link in items:
        if link_submitted:
            return
        try:
            #Check to make sure the post is a link and not a post to another HN page. 
            if not 'item?id=' in link['url'] and not '/comments/' in link['url']:
                submission = list(reddit.get_info(url=str(link['url'])))
                if not submission:
                    subreddit = get_subreddit(str(link['title']))
                    print "Submitting link to %s: %s" % (subreddit, link['url'])
                    resp = reddit.submit(subreddit, str(link['title']), url=str(link['url']))
                    link_submitted = True

        except Exception, e:
            print e
            pass


</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I'm assuming you're running Python 3. If so, these lines have two problems:</p>
<pre><code>try:
    result = json.load(urllib.urlopen(url))
except Exception, e:
return
</code></pre>
<ol>
<li><code>except Exception, e:</code> syntax is Python 2 only; the Python 3 equivalent is <code>except Exception as e:</code></li>
<li>Your <code>return</code> isn't indented, the contents of the <code>except</code> block must be indented.</li>
</ol>
<p>The fixed code would be:</p>
<pre><code>try:
    result = json.load(urllib.urlopen(url))
except Exception as e:
    return
</code></pre>
<p>or just:</p>
<pre><code>try:
    result = json.load(urllib.urlopen(url))
except Exception:
    return
</code></pre>
<p>which doesn't bother to capture the exception as <code>e</code> since you never use it.</p>
<p>Similarly, further on down, you'd need to change:</p>
<pre><code>except Exception, e:
    print e
</code></pre>
<p>to:</p>
<pre><code>except Exception as e:
    print(e)
</code></pre>
<p>to run on Python 3. You might just want to use <a href="https://docs.python.org/3/library/2to3.html" rel="nofollow noreferrer">the <code>2to3</code> tool</a> to perform these changes (and any other 2/3 related changes I missed) automatically, or just install Python 2.7 to run this script unmodified (though Python 2 goes out of support completely at the beginning of next year, so that's not a long term solution).</p>
</div>
<div class="post-text" itemprop="text">
<p>Your line 21 is </p>
<pre><code>except Exception, e:
return
</code></pre>
<p>for which there are two problems:</p>
<ol>
<li><p><code>except</code> is in wrong syntax.  I am clueless on what you are trying to do.  Please refer to <a href="https://docs.python.org/3/tutorial/errors.html" rel="nofollow noreferrer">https://docs.python.org/3/tutorial/errors.html</a> for correct syntax.  I suspect you were trying to write <code>except Exception as e:</code> ?</p></li>
<li><p>the block after the <code>except</code> is not correct indented.</p></li>
</ol>
</div>
<span class="comment-copy">Post whole error message with traceback please.</span>
<span class="comment-copy">Which line is your "line 21"? Also there are indent errors in your code.</span>
<span class="comment-copy">Could you please provide <a href="https://stackoverflow.com/help/mcve">Minimal, Complete, and Verifiable example</a>?</span>
<span class="comment-copy">I have done the things you said but now I get another syntax error on line 38  code:      print "Submitting link to %s: %s" % (subreddit, link['url'])</span>
<span class="comment-copy">@Sassy: Yeah, all the <code>print</code>s need to add parentheses (it's no longer a reserved keyword with special syntax, just a regular built-in function). Frankly, you should probably revert to the original code and just run the <code>2to3</code> converter with <code>2to3 -w nameofscript.py</code> to perform all the corrections at once, automatically.</span>
