<div class="post-text" itemprop="text">
<p>I use python 3, and I read files that strart with few lines that contain text and number together, and from a certain line it's only columns of numbers, that originally they are also read as str after splitting, that I later convert them to float.</p>
<p>the data look like this . I also add the link to the sample of the numbers </p>
<p><a href="https://gist.github.com/Farzadtb/b0457223a26704093524e55d9b46b1a8" rel="nofollow noreferrer">https://gist.github.com/Farzadtb/b0457223a26704093524e55d9b46b1a8</a></p>
<p><a href="https://i.stack.imgur.com/MbqXc.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/MbqXc.png"/></a></p>
<p>So the problem is that for reading I have two conditions ( actually I wish to increase these conditions ) using try: except . but this only works for dividing the splitting method. but before I start splitting ,I need to remove the first lines that contain text. what I know is that I should use </p>
<p>except ValueError</p>
<p>but this does not really work ! </p>
<pre><code>f = io.open(file, mode="r", encoding="utf-8")
    #f=open(file,"r")
    lines=f.readlines()

    x=[]
    y=[]
    z=[]    

    for i in lines:

        try:
            a=[i.strip('\n')]
            a1=[float(n) for n in a[0].split(',')]
            atot.append(a1)
            x.append(a1[3])
            y.append(a1[2])
            z.append(a1[1])

        except :
             a=[i.split('\n')]
             a1=[float(n) for n in a[0].split()]
             x.append(a1[3])
             y.append(a1[2])
             z.append(a1[1])
</code></pre>
<p>the problem is that since the first lines could also start with numbers, it's possible that the first parameter is split and added to "x" and "y" but I get error for z</p>
<pre><code>x=[float(i) for i in x]
y=[float(i) for i in y]
z=[float(i) for i in z]
</code></pre>
<p>One idea that comes to my mind is to check if the line could be converted to float with no errors , and then proceed with splitting ,but I don't know how to do it</p>
</div>
<div class="post-text" itemprop="text">
<p>You should try this. This code use regexp to find the data as a clean way.</p>
<pre><code>import pprint
import re

if __name__ == '__main__':
    # pattern to ignore line containing alpha or :
    ignore_pattern = re.compile(r'[^a-zA-Z:]*[a-zA-Z:]')
    # number pattern
    number_pattern = re.compile(r'[-.\d]+')

    matrix = []

    # open the file as readonly
    with open('data.txt', 'r') as file_:

        # iterator over lines
        for line in file_:
            # remove \n and spaces at start and end
            line = line.strip()
            if not ignore_pattern.match(line):

                found = number_pattern.findall(line)
                if found:
                    floats = [float(x) for x in found]
                    matrix.append(floats)

    # print matrix in pretty format
    pp = pprint.PrettyPrinter()
    pp.pprint(matrix)

    # access value by [row][column] starting at 0
    print(matrix[0][2])
</code></pre>
<p>Tested on your sample data.
This is the stdout of the python script:</p>
<pre><code>[[-3.1923, 0.6784, -4.6481, -0.0048, 0.3399, -0.2829, 0.0, 24.0477],
 [-3.1827, 0.7048, -4.6257, 0.0017, 0.3435, -0.2855, 0.0, 24.0477],
 [-3.1713, 0.7237, -4.5907, 0.0094, 0.3395, -0.2834, 0.0, 24.0477]]
-4.6481
</code></pre>
</div>
<span class="comment-copy">Can you show a sample of the data? Is there a constant number of lines at the beginning you want to skip?</span>
<span class="comment-copy">I added an image of my data , it's the contrary, I want to avoid the first text lines</span>
<span class="comment-copy">Don't you have constant number of headers or columns when it's numbers?</span>
<span class="comment-copy">Above the numbers I have their titles, like x1(mm) ,etc. but above them in the beginning there are dispersed texts to avoid</span>
<span class="comment-copy">I also offered my idea, that I don't know how to apply : to check if converting the line to float bumps error or not</span>
<span class="comment-copy">Thank you very much, what if the format is not txt ? it seems like it does not enter the loop</span>
<span class="comment-copy">You just have to change the filename in the open statement. Could you provide your data in text format, not as an image?</span>
<span class="comment-copy">yes , i would do that , but how to upload them here ?</span>
<span class="comment-copy">You can use <a href="https://gist.github.com/" rel="nofollow noreferrer">gist.github.com</a></span>
<span class="comment-copy">It's a regexp. You should read this doc: <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">docs.python.org/3/library/re.html</a>. This instruction find lines that have alpha or colon characters. So, if we find one, the line is ignored in the next if instruction. The r'[-.\d]+' is used to find numbers.</span>
