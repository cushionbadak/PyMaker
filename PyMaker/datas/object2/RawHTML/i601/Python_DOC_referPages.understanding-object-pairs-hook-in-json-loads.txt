<div class="post-text" itemprop="text">
<p>In the docs here - <a href="https://docs.python.org/3/library/json.html" rel="nofollow noreferrer">https://docs.python.org/3/library/json.html</a></p>
<p>it says of <code>object_pairs_hook</code>: </p>
<blockquote>
<p>object_pairs_hook is an optional function that will be called with the result of any object literal decoded with an ordered list of pairs. The return value of object_pairs_hook will be used instead of the dict. This feature can be used to implement custom decoders. If object_hook is also defined, the object_pairs_hook takes priority.</p>
</blockquote>
<p>There is one rather impressive example of it in <a href="https://stackoverflow.com/a/38307621/4288043">this answer</a>.</p>
<p>I don't understand what a "hook" is or how this feature works. The docs don't really explain it very clearly. I would like to write one now (otherwise it will be a mess of string methods on the string I am parsing)</p>
<p>Does anyone know of a tutorial on this feature or understand it well enough to explain in detail how it works? They seem to assume in the docs that you know what is going on in the black box of <code>json.loads()</code></p>
</div>
<div class="post-text" itemprop="text">
<p>It allows you to customize what objects will your JSON parse into. For this specific argument (<code>object_pairs_hook</code>) it's for pair (read key/value pairs of a mapping object).</p>
<p>For instance if this string appears in your JSON:</p>
<pre><code>{"var1": "val1", "var2": "val2"}
</code></pre>
<p>It will call your the function pointed to with the following argument:</p>
<pre><code>[('var1', 'val1'), ('var2', 'val2')]
</code></pre>
<p>Whatever the function returns is what will be used in the resulting parsed structure where the above string was.</p>
<p>A trivial example is <code>object_pairs_hook=collections.OrderedDict</code> which ensures your keys to be ordered the same way as they were they occurred in the incoming string.</p>
<p>The generic idea of a hook is to allow you to register a function that is called (back) as needed for a given task. In this specific case it allows you to customize decoding of (different types of objects in the) incoming JSON string.</p>
</div>
<span class="comment-copy">have you tried to set <code>object_pairs_hook</code> to something trivial such as just printing so that you can see what exactly it's doing</span>
<span class="comment-copy">Actually I did that just then. has helped, will keep working with it</span>
<span class="comment-copy">sorry, my bad, I missread your question</span>
<span class="comment-copy">You can check answers <a href="https://stackoverflow.com/questions/6921699/can-i-get-json-to-load-into-an-ordereddict">here</a> for examples of how to work with <code>object_pairs_hook</code></span>
<span class="comment-copy">Thanks, that's quite well worded, certainly more readable than the docs..</span>
