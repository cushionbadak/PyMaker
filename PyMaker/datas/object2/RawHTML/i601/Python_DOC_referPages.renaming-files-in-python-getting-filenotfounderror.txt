<div class="post-text" itemprop="text">
<p>I am trying to write a program to categorize into folders a large amount of files according to their respective groups indicated in the file name. I wrote the followin code, but when I run it it gives me a file not found error, even though the file is in the given path. I'd appreciate any help in figuring out what is wrong.</p>
<pre><code>import os

old_dir = '/Users/User/Desktop/MyFolder'

for f in os.listdir(old_dir):
    file_name, file_ext = os.path.splitext(f)
    file_name.split('-')

    split_file_name = file_name.split('-')

    new_dir = os.path.join(old_dir,
                           '-'.join(split_file_name[:3]),
                           split_file_name[5],
                           f)

    os.rename(os.path.join(old_dir, f), new_dir)
</code></pre>
<p>Here's the error:</p>
<pre><code>Traceback (most recent call last):
  File "/Users/User/Documents/Sort Files into Folders/Sort Files into Folders.py", line 19, in &lt;module&gt;
    os.rename(os.path.join(old_dir, f), new_dir)
FileNotFoundError: [Errno 2] No such file or directory: '/Users/User/Desktop/MyFolder/AHA35-3_30x1_12-31-7d-g1a1-ArmPro.jpg' -&gt; '/Users/User/Desktop/MyFolder/AHA35-3_30x1_12-31/ArmPro/AHA35-3_30x1_12-31-7d-g1a1-ArmPro.jpg
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><code>os.rename</code> does not automatically create new directories (recursively), if the new name happens to be a filename in a directory that does not exist.</p>
<p>To create the directories first, you can (in Python 3) use:</p>
<pre><code>os.makedirs(dirname, exist_ok=True)
</code></pre>
<p>where dirname can contain subdirectories (existing or not).</p>
<hr/>
<p>Alternatively, use <code>os.renames</code>, that can handle new and intermediate directories. <a href="https://docs.python.org/3/library/os.html#os.renames" rel="nofollow noreferrer">From the documentation</a>:</p>
<blockquote>
<p>Recursive directory or file renaming function. Works like rename(), except creation of any intermediate directories needed to make the new pathname good is attempted first</p>
</blockquote>
</div>
<span class="comment-copy">Have you tried printing the old and new names, to make sure they're what you think they are?  Does it fail on every file, or just some?</span>
<span class="comment-copy">Yes, the old and new names are as expected. It fails on every file</span>
<span class="comment-copy">@Evert No, I'm trying to create them</span>
<span class="comment-copy">@Evert I assumed os.rename would create them if they don't exist. I think that's my problem. Thank you, for helping me figure it out.</span>
