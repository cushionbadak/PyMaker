<div class="post-text" itemprop="text">
<p>I am trying to deploy my Django application (2.1.5 with Python 3.6.6) on my server with a PostGreSQL database.
I did a 'makemigrations' and 'migrate' as usual and then I can't create a super user with the command 'createsuperuser':</p>
<pre><code>[alex@web574 myproject]$ python3.6 manage.py createsuperuser
Nom d'utilisateur (leave blank to use 'alex'): 
Traceback (most recent call last):
  File "manage.py", line 15, in &lt;module&gt;
    execute_from_command_line(sys.argv)
  File "/home/alex/webapps/global_hse_project/lib/python3.6/Django-2.1.5-py3.6.egg/django/core/management/__init__.py", line 381, in execute_from_command_line
    utility.execute()
  File "/home/alex/webapps/global_hse_project/lib/python3.6/Django-2.1.5-py3.6.egg/django/core/management/__init__.py", line 375, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/alex/webapps/global_hse_project/lib/python3.6/Django-2.1.5-py3.6.egg/django/core/management/base.py", line 316, in run_from_argv
    self.execute(*args, **cmd_options)
  File "/home/alex/webapps/global_hse_project/lib/python3.6/Django-2.1.5-py3.6.egg/django/contrib/auth/management/commands/createsuperuser.py", line 60, in execute
    return super().execute(*args, **options)
  File "/home/alex/webapps/global_hse_project/lib/python3.6/Django-2.1.5-py3.6.egg/django/core/management/base.py", line 353, in execute
    output = self.handle(*args, **options)
  File "/home/alex/webapps/global_hse_project/lib/python3.6/Django-2.1.5-py3.6.egg/django/contrib/auth/management/commands/createsuperuser.py", line 139, in handle
    input_value = self.get_input_data(field, message)
  File "/home/alex/webapps/global_hse_project/lib/python3.6/Django-2.1.5-py3.6.egg/django/contrib/auth/management/commands/createsuperuser.py", line 194, in get_input_data
    raw_value = input(message)
UnicodeEncodeError: 'ascii' codec can't encode character '\xe9' in position 8: ordinal not in range(128)
</code></pre>
<p>I found on Google to add:</p>
<pre><code># -*- Coding: utf-8 -*-
</code></pre>
<p>at the top of the file but it doesn't work, same result with the variable DEFAULT_CHARSET (<a href="https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-DEFAULT_CHARSET" rel="nofollow noreferrer">https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-DEFAULT_CHARSET</a>).
My PostGreSQL database are asking for utf-8 encoding.</p>
</div>
<div class="post-text" itemprop="text">
<p>This may be caused by the fact that encoding used for the stdin does not support the characters being typed in at the <code>input()</code> prompt.</p>
<p>You can try explicitly setting the encoding to <code>UTF-8</code> using the <a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONIOENCODING" rel="nofollow noreferrer"><code>PYTHONIOENCODING</code></a> environment variable before you run the <code>createsuperuser</code> command:</p>
<pre><code>export PYTHONIOENCODING="UTF-8"; python3.6 manage.py createsuperuser
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I think it is the same problem as here:
<a href="https://stackoverflow.com/questions/10061842/how-to-set-django-and-mysql-work-with-utf-8">previous post</a>
You have to add </p>
<pre><code># -*- coding: utf-8 -*-
</code></pre>
<p>in the start of each file to include the right encoding</p>
</div>
<span class="comment-copy">This probably has to do with the encoding used by your terminal and / or Python. Search for "UnicodeEncodeError terminal" and see if anything there helps you.</span>
<span class="comment-copy">In your shell, try setting the <code>PYTHONIOENCODING</code> environment variable before running the <code>createsuperuser</code> command. So run: <code>export PYTHONIOENCODING="UTF-8"; python3.6 manage.py createsuperuser</code></span>
<span class="comment-copy">@WillKeeling, you right ! It was due to the env var PYTHONIOENCODING.</span>
<span class="comment-copy">@Rekoc - great, will add an answer.</span>
<span class="comment-copy">I checked this post before. Unfortunately, it doesn't work on mine ...</span>
