<div class="post-text" itemprop="text">
<p>I am trying to remove files after I'm done using them but I get an error all the time...</p>
<p>The error:</p>
<blockquote>
<p>PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: '0.mp4'</p>
</blockquote>
<p>I tried closing the Objects but Its not working...</p>
<pre><code>import os
from moviepy.editor import VideoFileClip, concatenate_videoclips

DEFAULT_HEIGHT = 720
DEFAULT_WIDTH = 1280

clip_names = ["0.mp4", "1.mp4"]

clips = []
for name in clip_names:
    clips.append(VideoFileClip(name).resize(width=DEFAULT_WIDTH,height=DEFAULT_HEIGHT))

final_clip = concatenate_videoclips(clips)
final_clip.write_videofile("video.mp4")

for clip in clips:
    clip.__del__()

for name in clip_names:
    os.remove(name)
</code></pre>
<p>I want to remove the file with os.remove...</p>
</div>
<div class="post-text" itemprop="text">
<p>Did you try simply closing the clips?</p>
<pre><code>for clip in clips:
    clip.close()
</code></pre>
<p>From the source <a href="https://github.com/Zulko/moviepy/blob/master/moviepy/video/io/VideoFileClip.py#L71" rel="nofollow noreferrer">here</a>.</p>
<p>Or, if you want to do this cleanly in case of errors, use a <code>with</code> context:</p>
<pre><code>import contextlib

with contextlib.ExitStack() as stack:
    clips = []
    for name in clip_names:
        clip = VideoFileClip(name)
        stack.enter_context(contextlib.closing(clip))
        clips.append(clip.resize(width=DEFAULT_WIDTH,height=DEFAULT_HEIGHT))

    final_clip = concatenate_videoclips(clips)
    final_clip.write_videofile("video.mp4")

# exiting the `with` block released the clips
for name in clip_names:
    os.remove(name)
</code></pre>
<p>This approach uses an <a href="https://docs.python.org/3/library/contextlib.html#contextlib.ExitStack" rel="nofollow noreferrer"><code>ExitStack</code></a> to track clips. When the program exits the <code>with</code> block, all contexts passed to <code>enter_context</code> are exited, releasing all the clips.</p>
</div>
<span class="comment-copy">What is the error?</span>
<span class="comment-copy">your os.remove(name) should be inside the for statment.</span>
<span class="comment-copy">Fix the indentation too</span>
<span class="comment-copy">The error: PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: '0.mp4'</span>
<span class="comment-copy"><code>[WinError 32]</code> means you are using Windows. Which version? Did you look with Performance Monitor on open file handles? Which processes locks your files?</span>
<span class="comment-copy">.close(), is not an option anymore. (AttributeError: 'VideoFileClip' object has no attribute 'close')</span>
<span class="comment-copy">hmmm, are you using an old version maybe? close was added in latest version, from file history.</span>
<span class="comment-copy">There is an issue on github about the addition of <code>.close()</code> : <a href="https://github.com/Zulko/moviepy/issues/596" rel="nofollow noreferrer">github.com/Zulko/moviepy/issues/596</a> â€” TLDR you have to upgrade to latest version to get the <code>.close()</code> method, otherwise you won't be able to close the clip at all.</span>
<span class="comment-copy">I'm using '0.2.3.2', I think its the last version... I checked the docs and I didn't find a close() function.</span>
<span class="comment-copy">yep, I was wrong. I had a requirement from another lib and that didn't let me downloading the lastest version. thanks...</span>
