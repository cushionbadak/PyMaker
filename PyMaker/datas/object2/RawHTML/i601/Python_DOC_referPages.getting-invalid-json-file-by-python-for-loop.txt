<div class="post-text" itemprop="text">
<p>hello first of all i'm trying to do a web scraper bot and then save all info in a json file
but when looping my json is invalid</p>
<p>this is part of my code and where i'm generating json</p>
<pre><code>for tag in tags:
             myarr=tag.getText(strip=True)
             words=myarr.split()
             titles = []
             titles.append(words)
             data = [{"data": w} for w in zip(titles)]



             with open('data.json', 'a+',encoding='utf-8') as f:  

              json.dump(data, f,indent=2, ensure_ascii=False)
</code></pre>
<p>and this is part of my invalid json file that was been generated by python</p>
<pre><code>[
  {
    "data": [
      [
        "Acuña",
        "Game",
        "GermánEspecialidad:Tratamiento",
        "del",
        "DolorLugar",
        "de",
        "Atención:Centro",
        "de",
        "Diagnóstico",
        "1"
      ]
    ]
  }
][
  {
    "data": [
      [
        "Aguayo",
        "Baeza",
        "EdgardoEspecialidad:Reumatología",
        "AdultosLugar",
        "de",
        "Atención:Centro",
        "de",
        "Diagnóstico",
        "1",
        "Piso",
        "7"
      ]
    ]
  }
]
</code></pre>
<p>while trying to parse this json on a online json parser it says SyntaxError: Unexpected token [ in JSON at position 318</p>
<p>is there anyway to generate a valid json?
if yes anyone that can help  me out?</p>
</div>
<div class="post-text" itemprop="text">
<p>Python's json module doesn't directly support building a json file incrementally<sup>*</sup>.  Valid json can be generated by appending each each dict to a list, and then dumping the list to the output file, like this:</p>
<pre><code>data = []
for tag in tags:
     myarr=tag.getText(strip=True)
     words=myarr.split()
     titles = []
     titles.append(words)
     data.extend({"data": w} for w in zip(titles))

# Once all the data has been processed, write to file.  
with open('data.json', 'w',encoding='utf-8') as f:  
    json.dump(data, f,indent=2, ensure_ascii=False)
</code></pre>
<p><sup>*</sup> From the docs for <a href="https://docs.python.org/3/library/json.html#json.dump" rel="nofollow noreferrer">json.dump</a>: </p>
<blockquote>
<p>...trying to serialize multiple objects with repeated calls to dump() using the same fp will result in an invalid JSON file</p>
</blockquote>
</div>
<span class="comment-copy">your json is just missing an outside <code>{</code> <code>}</code> to enclose everything and a <code>,</code> between each data. You can make the adjustment in your loop</span>
<span class="comment-copy">First generate your data, then json.dump() everything at once.</span>
<span class="comment-copy">@MikeTung i added , with <code>f.write(",")</code> but still giving me a syntax error on online parser also i tried to add <code>{</code> <code>}</code> but no luck i'm really new to python</span>
<span class="comment-copy">hello thanks for your answer i tried the code but i'm getting the folowing error <a href="https://pastebin.com/KbXZXXCx" rel="nofollow noreferrer">pastebin.com/KbXZXXCx</a></span>
<span class="comment-copy">I suspect that you want to change <code>data.append</code> to <code>data.extend</code> in the code (I've changed this in the answer).  <code>({"data": w} for w in zip(titles)) </code> is a generator expression, and the json module doesn't know how to handle it.  However by using <code>list.extend</code> method you can expand the generator into a list, and json will do the right thing.</span>
