<div class="post-text" itemprop="text">
<p>Here is the relevant part of my program:</p>
<pre><code>    import imaplib
    ...
    try:
        M.expunge()
        M.close()
        M.logout()
    except imaplib.abort as e:
        print("IMAP abort")
</code></pre>
<p>And here is the error message:</p>
<pre><code>Traceback (most recent call last):
 File "/home/xxx/anaconda3/lib/python3.6/imaplib.py", line 1014, in _command_complete
   typ, data = self._get_tagged_response(tag)
 File "/home/xxx/anaconda3/lib/python3.6/imaplib.py", line 1126, in _get_tagged_response
   self._check_bye()
 File "/home/xxx/anaconda3/lib/python3.6/imaplib.py", line 929, in _check_bye
   raise self.abort(bye[-1].decode(self._encoding, 'replace'))
imaplib.abort: IMAP session state is inconsistent, please relogin.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
 File "mailstats/autoresponder.py", line 224, in &lt;module&gt;
   M.close()
 File "/home/xxx/anaconda3/lib/python3.6/imaplib.py", line 456, in close
   typ, dat = self._simple_command('CLOSE')
 File "/home/xxx/anaconda3/lib/python3.6/imaplib.py", line 1191, in _simple_command
   return self._command_complete(name, self._command(name, *args))
 File "/home/xxx/anaconda3/lib/python3.6/imaplib.py", line 1016, in _command_complete
   raise self.abort('command: %s =&gt; %s' % (name, val))
imaplib.abort: command: CLOSE =&gt; IMAP session state is inconsistent, please relogin.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
 File "mailstats/autoresponder.py", line 226, in &lt;module&gt;
   except imaplib.abort as e:
AttributeError: module 'imaplib' has no attribute 'abort'
</code></pre>
<p>So if imaplib has no attribute called <code>abort</code>, then how is <code>self.abort()</code> being raised in line 929 of <code>_check_bye</code> ?</p>
<p>How do I catch it?</p>
</div>
<div class="post-text" itemprop="text">
<p>The "<code>imaplib.abort</code>" line in misleading. Actually, you need to catch <a href="https://docs.python.org/3/library/imaplib.html?highlight=imaplib#imaplib.IMAP4.abort" rel="nofollow noreferrer"><code>imaplib.IMAP4.abort</code></a>.</p>
</div>
<span class="comment-copy">Neat. Thanks!  And thanks for the doc link.</span>
