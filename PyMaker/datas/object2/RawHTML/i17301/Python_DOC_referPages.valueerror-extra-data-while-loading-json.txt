<div class="post-text" itemprop="text">
<p>i have a problem with loading JSON. </p>
<pre><code>response = conn.getresponse()
data = response.read().decode('utf-8')
print ("raw data &gt;&gt; ", data)
data1 = json.loads(data)
print (data1)
</code></pre>
<p>gives me an error:</p>
<pre><code>raw data &gt;&gt;  {"Len":"0000000000000376"}{"PipeType":2,"Content":{"ActionType":1,"Data":{"UserID":12,"RoomID":1,"UserData":{"NickName":"Koko","MoreAboutMe":null,"Age":21,"Man":false,"Area":9,"HaveCam":false,"isOldPoll":false,"LoginTime":635292689335460656,"RoomEnter":635292689335460656,"FacebookId":null,"Email":null,"FirstName":null,"LastName":null,"BirthDate":null,"FacebookLink":null,"Rank":-1}}}}{"Len":"0000000000000159"}{"PipeType":2,"Content":{"ActionType":3,"Data":{"Message":"no matter","ColorID":0,"UserID":13,"UserNick":"Jovani","SentDate":null,"Rank":null}}}
Exception in Tkinter callback
...
ValueError: Extra data: line 1 column 26 - line 1 column 587 (char 26 - 587)
</code></pre>
<p>Any ideas?</p>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="http://docs.python.org/3/library/json.html#json.loads" rel="noreferrer"><code>json.loads</code></a> does not handle multiple json data.</p>
<p>Following is a workaround for that.</p>
<pre><code>import json
import re

nonspace = re.compile(r'\S')
def iterparse(j):
    decoder = json.JSONDecoder()
    pos = 0
    while True:
        matched = nonspace.search(j, pos)
        if not matched:
            break
        pos = matched.start()
        decoded, pos = decoder.raw_decode(j, pos)
        yield decoded

rawdata = '{"Len":"0000000000000376"}{"PipeType":2}'
for decoded in iterparse(rawdata):
    print(decoded)
</code></pre>
<p>output:</p>
<pre><code>{u'Len': u'0000000000000376'}
{u'PipeType': 2}
</code></pre>
</div>
<span class="comment-copy">That's not JSON. That looks like several JSON strings stuck together.</span>
<span class="comment-copy">Great job. Had you already encountered this issue in the past?</span>
<span class="comment-copy">@beroe, Yes, I did. The code come from my previous answer. (I don't remember which one).</span>
<span class="comment-copy">Several of mine spring to mind. :-P</span>
<span class="comment-copy">@beroe, Found it: <a href="http://stackoverflow.com/a/21059941/2225682">stackoverflow.com/a/21059941/2225682</a></span>
<span class="comment-copy">Great. Good answer then as now. Funny how something that is a common problem like this was deemed "off topic" in that instance.</span>
