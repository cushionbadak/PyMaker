<div class="post-text" itemprop="text">
<p>So this question basically is the first of more to follow once I figured out what really goes on. I read a lot about encoding decoding and XML standarts, but I did not find an answer to this specific topic.</p>
<pre><code>import elementtree.ElementTree as ET

root = ET.Element("Prüfung")
main = ET.SubElement(root,'Test')
main.text='\xe4 '+'ä'.decode('UTF-8')
tree=ET.ElementTree(root)
tree.write('testout.xml')
</code></pre>
<p>My first question is in the <code>main.text='\xe4 '+'ä'.decode('UTF-8')</code> line. I understand, that \xe4 is the code for the letter ä, so does this mean, that I have to decode every string passed to my interpreter as utf-8 in order to work properly? Because when I read special characters from a .txt file using python's readline method, they seem to be already decoded correctly. </p>
<p>A related but slightly different question is the line <code>root = ET.Element("Prüfung")</code>. It seems not to be possible to use non-ASCII characters in XML Tags (at least not with element tree). Is this because of the XML standart or basically just another decoding/encoding problem?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can have non-ASCII characters in element names (and element content). Use Unicode strings and it should work. </p>
<p>At <a href="http://effbot.org/zone/element.htm#the-element-type" rel="nofollow">http://effbot.org/zone/element.htm#the-element-type</a>, it says:</p>
<blockquote>
<p><em>All elements must have a tag, but all other properties are optional. All strings can either be Unicode strings, or 8-bit strings containing US-ASCII only.</em></p>
</blockquote>
<p>Demo program (tested with Python 2.7):</p>
<pre><code># coding: utf-8

import xml.etree.ElementTree as ET

root = ET.Element(u'Prüfung') 
main = ET.SubElement(root, 'Test')
main.text = u'\xe4 ' + u'ä'
tree = ET.ElementTree(root)
tree.write('testout.xml', encoding="utf-8")    # The default encoding is us-ascii
</code></pre>
<p>Output (in testout.xml):</p>
<pre class="lang-none prettyprint-override"><code>&lt;Prüfung&gt;&lt;Test&gt;ä ä&lt;/Test&gt;&lt;/Prüfung&gt;
</code></pre>
<hr/>
<p>The above program also works unchanged in Python 3.3+. The leading <code>u</code> characters are redundant, but allowed (the <code>u'unicode'</code> syntax is <a href="http://docs.python.org/3/whatsnew/3.3.html" rel="nofollow">restored</a> for <code>str</code> objects in Python 3.3). </p>
</div>
