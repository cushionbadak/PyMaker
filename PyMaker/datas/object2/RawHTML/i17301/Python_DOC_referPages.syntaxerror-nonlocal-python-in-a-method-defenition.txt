<div class="post-text" itemprop="text">
<p>I'm typing in an interactive mode the following code:</p>
<pre><code>class A:
    a=42
    def foo():
        nonlocal a
</code></pre>
<p>but I've a <code>SyntaxError: no binding for nonlocal 'a' found</code>. But I'm expected that the result of resolution <code>nonlocal a</code> will be 42, because the nearest enclosing scope for this method is a class block.</p>
</div>
<div class="post-text" itemprop="text">
<p>Class scope are handled in a special way by Python:  When looking for names in ecnlosing scopes, class scopes are skipped.</p>
<p>To access a name from the class scope either use <code>self.a</code> to look up via the instance or <code>A.a</code> to look up via the class.</p>
<p>See <a href="https://stackoverflow.com/q/9505979/279627">The scope of names defined in class block doesn't extend to the methods' blocks. Why is that?</a> for a rationale for this behaviour.</p>
</div>
<div class="post-text" itemprop="text">
<p>What you're doing is creating a <code>class</code> which has a class attribute <code>a</code>, with a default value of <code>42</code>. You can refer to that attribute by <code>A.a</code>. If you want to use it within the class, use <code>self.a</code>.</p>
</div>
<span class="comment-copy">I know this doesn't fix your problem, and maybe this is a result of the simplified version of your code here, but couldn't you accomplish the same thing by making <code>a</code> a class attribute? (referring to it as <code>self.a</code> and passing <code>self</code> as an argument to <code>foo()</code></span>
<span class="comment-copy">@wnnmaw I know that method's code can't access to a class namespace. But I'm interested in how nonlocal does work.</span>
<span class="comment-copy">That is what I want to know, thanks :). But can you get a referene to a <code>python reference manual</code> about names resolution? I can find only <code>When a name is used in a code block, it is resolved using the nearest enclosing scope.</code></span>
<span class="comment-copy"><a href="http://docs.python.org/3/reference/executionmodel.html#naming-and-binding" rel="nofollow noreferrer">docs.python.org/3/reference/â€¦</a>: "The scope of names defined in a class block is limited to the class block; it does not extend to the code blocks of methods."</span>
<span class="comment-copy">Does it mean that the nearest enclosing scope for <code>a</code> defined in the method body is a global namepace (skipping class)?</span>
<span class="comment-copy">@DmitryFucintv: Yes, it does.  But <code>nonlocal</code> can't be used to refer to names in the global scope.  Use <code>global</code> for that (if you really have to).</span>
<span class="comment-copy">I believe the OP is not using 2.x. The 2.x error message is <code>SyntaxError: invalid syntax</code>. The 3.x error message is <code>SyntaxError: no binding for nonlocal 'a' found</code>, which is what the OP has.</span>
<span class="comment-copy">@Kevin I'm use 3.3.4</span>
<span class="comment-copy">@Kevin ah indeed. Sorry about that.</span>
