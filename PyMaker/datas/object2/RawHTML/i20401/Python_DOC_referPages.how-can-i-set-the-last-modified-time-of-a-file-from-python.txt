<div class="post-text" itemprop="text">
<p>I have a python script that downloads a file over FTP using <a href="http://docs.python.org/library/ftplib.html">ftplib</a>.</p>
<p>My current download code looks just like the example in the ftp lib docs:</p>
<pre><code>ftp.retrbinary('RETR README', open('README', 'wb').write)
</code></pre>
<p>Now I have a requirement that the file downloaded over FTP needs to have the same last modified time as the file on the FTP server itself. Assuming I could parse out the time from <code>ftp.retrlines('list')</code>, how can I set the modified time on the downloaded file?</p>
<p>I'm on a unix based OS if that matters.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/3/library/os.html#os.utime" rel="noreferrer"><code>os.utime</code></a>:</p>
<pre><code>import os

os.utime(path_to_file, (access_time, modification_time))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If you want to do this directly from python, you're looking for <code>os.utime</code>. The <a href="http://docs.python.org/library/os.html#os.utime">docs</a> can give you more info.</p>
</div>
<div class="post-text" itemprop="text">
<p>There are 2 ways to do this.  One is the os.utime example above which
is required if you are setting the timestamp on a file that has no
reference stats.
However, if you are copying the files with "shutil.copy()" you have a
reference file.  Then if you want the permission bits, last access time,
last modification time, and flags also copied, you can use
"shutil.copystat()" immediately after the "shutil.copy()".</p>
<p>I have no idea why they don't add flags to "shutil.copy()" that
does this in one single command.  Seems like it was implemented
by different authors.  One implemented the copy and one implemented
the copystat to fill in the missing feature in the former.</p>
<p>And then there is "shutil.copy2" which is intended to do both at once...</p>
</div>
<span class="comment-copy">More elaborate example: <a href="https://www.tutorialspoint.com/python/os_utime.htm" rel="nofollow noreferrer">tutorialspoint.com/python/os_utime.htm</a></span>
<span class="comment-copy">that's what I was looking for, thanks</span>
<span class="comment-copy">how is this an answer?</span>
<span class="comment-copy">Oui le niveau baisse @jean-françois-fabre, c'était mieux avant.</span>
<span class="comment-copy">haha but no, the level of maturity of SO increases, try to post that kind of "answer" in 2019 and see the same votes, but in absolute value only</span>
