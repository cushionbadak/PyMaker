<div class="post-text" itemprop="text">
<p>For the code below:</p>
<pre><code>command = '\'{:.' + str(3) + 'f}\'.format(' + str(12.6543423) + ')'

print(command)
print('{:.3f}'.format(12.6543423))
print(exec(command))
</code></pre>
<p><strong>Expected results:</strong></p>
<pre><code>'{:.3f}'.format(12.6543423)
12.654
12.654
</code></pre>
<p><strong>Actual results:</strong></p>
<pre><code>'{:.3f}'.format(12.6543423)
12.654
None
</code></pre>
<p>Please can someone tell me what I'm doing wrong and how to fix it? I'm both trying to write a number rounding function and trying to understand the exec command.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>eval</code>.</p>
<pre><code>&gt;&gt;&gt; eval('\'{:.' + str(3) + 'f}\'.format(' + str(12.6543423) + ')')
'12.654'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Or don't use exec or eval at all. Use the features <code>format</code> offers:</p>
<pre><code>&gt;&gt;&gt; '{:.{}f}'.format(12.6543423, 3)
12.654
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/3/library/functions.html#eval" rel="nofollow"><code>eval()</code></a> instead of <code>exec()</code> to get the result returned by a expression.</p>
</div>
<div class="post-text" itemprop="text">
<p>or you can use exec</p>
<pre><code>command = '\'{:.' + str(3) + 'f}\'.format(' + str(12.6543423) + ')'
print(command)
mycode = """print('{:.3f}'.format(12.6543423))"""

print('{:.3f}'.format(12.6543423))
exec(mycode)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You are confusing exec and eval:   </p>
<pre><code>In [27]: command = 'print'+'('+'\'{:.' + str(3) + 'f}\'.format(' + str(12.6543423) + ')'+')'

In [28]: exec(command)
12.654
</code></pre>
</div>
<span class="comment-copy">did you mean eval? have a look here <a href="http://stackoverflow.com/questions/2220699/whats-the-difference-between-eval-exec-and-compile-in-python" title="whats the difference between eval exec and compile in python">stackoverflow.com/questions/2220699/â€¦</a></span>
<span class="comment-copy"><i>sigh</i>: there's no need to use exec or eval at all...</span>
<span class="comment-copy">Use <a href="https://docs.python.org/2/library/ast.html?highlight=ast.literal_eval#ast.literal_eval" rel="nofollow noreferrer"><code>ast.literal_eval</code></a> instead <a href="https://docs.python.org/2/library/functions.html?highlight=eval#eval" rel="nofollow noreferrer"><code>eval</code></a></span>
<span class="comment-copy">@MauroBaraldi Concatenation using + isn't included within that,from the doc <i>The string or node provided may only consist of the following Python literal structures: strings, numbers, tuples, lists, dicts, booleans, and None.</i> and if i am wrong then help me in that. I would love to know.</span>
<span class="comment-copy">The <code>+</code> operation is not a "feature" of eval. Python first concatenates the strings and only then passes a single string to eval. That is of course the case with all function calls (in every programming language)...</span>
<span class="comment-copy">@MauroBaraldi: did you try <code>literal_eval</code>? It won't work for this case, because <code>literal_eval</code> won't invoke <code>format</code> for you.  It won't call any functions, that's the whole point, to avoid code execution.</span>
<span class="comment-copy">Ah, thank you - wasn't aware that you could have curly brackets within curly brackets, probably should have tried that first. Thanks. Even so, I'm keeping the current answer ticked, because I was also curious to learn about eval() and exec().</span>
<span class="comment-copy">@JakeLevi learning about eval and exec is good.  One of the most important things to learn about them is that they are really really blunt instruments that you almost never need.</span>
<span class="comment-copy">Use <a href="https://docs.python.org/2/library/ast.html?highlight=ast.literal_eval#ast.literal_eval" rel="nofollow noreferrer"><code>ast.literal_eval</code></a> instead <a href="https://docs.python.org/2/library/functions.html?highlight=eval#eval" rel="nofollow noreferrer"><code>eval</code></a></span>
<span class="comment-copy">@MauroBaraldi: did you try <code>literal_eval</code>? It won't work for this case, because <code>literal_eval</code> won't invoke <code>format</code> for you.  It won't call any functions, that's the whole point, to avoid code execution.</span>
<span class="comment-copy">how does your code use command?</span>
<span class="comment-copy">it does not. i would also use eval() instead. but it is still usable with exec(). There is in my opinion a lot of confusion regarding exec, also some changes from python 2 and 3.</span>
<span class="comment-copy">two downvotes for a correct answer</span>
