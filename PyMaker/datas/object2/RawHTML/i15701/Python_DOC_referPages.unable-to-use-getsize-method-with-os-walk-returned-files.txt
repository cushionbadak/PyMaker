<div class="post-text" itemprop="text">
<p>I am trying to make a small program that looks through a directory (as I want to find recursively all the files in the sub directories I use os.walk()).</p>
<p>Here is my code:</p>
<pre><code>import os
import os.path
filesList=[]
path = "C:\\Users\Robin\Documents"
for(root,dirs,files) in os.walk(path):
   for file in files:
      filesList+=file
</code></pre>
<p>Then I try to use the os.path.getsize() method to elements of filesList, but it doesn't work.</p>
<p>Indeed, I realize that the this code fills the list filesList with characters. I don't know what to do, I have tried several other things, such as :</p>
<pre><code>for(root,dirs,files) in os.walk(path):
filesList+=[file for file in os.listdir(root) if os.path.isfile(file)]
</code></pre>
<p>This does give me files, but only one, which isn't even visible when looking in the directory.</p>
<p>Can someone explain me how to obtain files with which we can work (that is to say, get their size, hash them, or modify them...) on with os.walk ?
I am new to Python, and I don't really understand how to use os.walk().</p>
</div>
<div class="post-text" itemprop="text">
<p>The issue I suspect you're running into is that <code>file</code> contains only the filename itself, not any directories you have to navigate through from your starting folder. You should use <code>os.path.join</code> to combine the file name with the folder it is in, which is the <code>root</code> value yielded by <code>os.walk</code>:</p>
<pre><code>for(root,dirs,files) in os.walk(path):
    for file in files:
        filesList.append(os.path.join(root, file))
</code></pre>
<p>Now all the filenames in <code>filesList</code> will be acceptable to <code>os.path.getsize</code> and other functions (like <code>open</code>).</p>
<p>I also fixed a secondary issue, which is that your use of <code>+=</code> to extend a list wouldn't work the way you intended. You'd need to wrap the new file path in a list for that to work. Using <code>append</code> is more appropriate for adding a single value to the end of a list.</p>
</div>
<div class="post-text" itemprop="text">
<p>If you want to get a list of files including path use:</p>
<pre><code>for(root, dirs, files) in os.walk(path):
    fullpaths = [os.path.join(root, fil) for fil in files]
    filesList+=fullpaths
</code></pre>
</div>
<span class="comment-copy">Why would you call <code>os.listdir(root)</code> inside an <code>os.walk</code> loop?</span>
<span class="comment-copy">Also, what you're asking for seems identical to the very first example in the <a href="https://docs.python.org/3/library/os.html#os.walk" rel="nofollow noreferrer"><code>os.walk</code></a> docs, but even simpler. What part of the example do you not get?</span>
<span class="comment-copy">What's the exact error returned by <code>getsize</code>? Or what expected behavior is missing?</span>
