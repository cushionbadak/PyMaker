<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/9733638/post-json-using-python-requests">Post JSON using Python Requests</a>
<span class="question-originals-answer-count">
                    6 answers
                </span>
</li>
</ul>
</div>
<p>I've wrote a little flask application.
I send a request with json data (python script) to the flask server (ubuntu 18.04 with python 3.6.7),
and the server evaluate these data...</p>
<p>Client:</p>
<pre><code>data =  {   'serial': '12345'
            'printerConfig':  {
                    'virtualPrinter1':    'physicalPrinter1',
                    'virtualPrinter2':    'physicalPrinter2',
                    'virtualPrinter3':    'physicalPrinter3'
         }
}
r = requests.get("http://127.0.0.1/webservice", json=data)
</code></pre>
<p>Server:</p>
<pre><code>@app.route('/', methods=['GET', 'POST'])
def webservice():
if request.method == 'GET':
    serial = request.json['serial'] if 'serial' in request.json else None
    printerConfig = request.json['printerConfig'] if 'printerConfig' in request.json else None
</code></pre>
<p>I have tested this code in pyCharm with the development server and always works fine.</p>
<p>After that I have tried to implement that to an Apache2 server.
Now I get the following error message in apache-error.log.</p>
<pre><code>ERROR:flask.app:Exception on / [GET]
Traceback (most recent call last):
    ...
    File "/var/www/html/webservice/webservice.py", line xx, in webservice
        serial = request.json['serial'] if 'serial' in request.json else None
TypeError: argument of type 'NoneType' is not iterable
</code></pre>
<p>Print of request.json shows only None.
Exactly the same code on the development server is running.</p>
<p>Instead of request.json I also tried request.data, with the same result.</p>
<p>Is there a specially setting for the Apache2?
Has anyone an idea?</p>
<p>Best regards
flo</p>
</div>
<div class="post-text" itemprop="text">
<p>You are making a get request.</p>
<p>Try making a <strong>post</strong> request to your webservice</p>
<pre><code>r = requests.post("http://127.0.0.1/webservice", json=data)
</code></pre>
<p>You will never include the json="" when making a get... that is for only posting/updating json to the webserver</p>
<p>Remember, GET in http terms is only for requesting content from a URL endpoint. POST is to send new content to the URL endpoint.
 <a href="https://www.w3schools.com/tags/ref_httpmethods.asp" rel="nofollow noreferrer">GET/POST</a></p>
<p>Another quick point... Try just printing request.json on your back end/flask app before the <code>serial = request.json['serial'] if 'serial' in request.json else None</code> etc... just to make sure that the data is arriving correctly upon being posted.</p>
</div>
<span class="comment-copy">Thank you for your answer. I have changed GET to POST, unfortunately with the same result :-(</span>
