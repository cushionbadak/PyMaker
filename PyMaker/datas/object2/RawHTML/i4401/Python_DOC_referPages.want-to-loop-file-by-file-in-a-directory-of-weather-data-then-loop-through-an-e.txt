<div class="post-text" itemprop="text">
<p>I am trying to make a script that reads in a group of CSV files that I stored in my data directory called 'database', stored on my desktop. In those CSV files are weather data, the last list index 16 of the CSV is perciptitation which I am trying to get and calculate the total monthly precipitation for each Station. Each station contains 12 months of weather data, and in the CSV the last index is precipitation. At the end I want to output a single CSV file that contains 48 rows (12 months x 4 stations) including station ID, month number, and total precipitation for that month at that station.</p>
<p>Here is what I have so far:</p>
<pre><code>import glob

files = glob.glob("database/*.csv")

def totalPercip(list):
    total = 0
    # iterate through the lists of month, each time getting the 16th element, preciptation
    for i in list:
# getting only the 16th index for each day for specific month list
# not sure if this is correct
        total = i[16]
        print(total)


# loop through it one file at a file
for i in files:
    # opening one of the files in the pre-made directory, and reading out the contents
    f = open(i,'r')
    # loop through each line of said specific file at current iteration
    for j in f.readlines():
        # save all those lines into one variable called list
        list = [j]
    # past list as an argument into totalPercip function
    totalPercip(list)
# stuck here, not sure how to get totalPercip to work and get the 16th index
</code></pre>
<p>Here is what my folder looks like:</p>
<p><img alt="database folder of monthly weather data" src="https://i.stack.imgur.com/fSrRE.png"/></p>
<p>And here is what the CSV file looks like, trying to get the last index:</p>
<p><img alt="opened CSV file" src="https://i.stack.imgur.com/VvP3m.png"/></p>
<p>So I am trying to create a function that calculates the total precipitation given a month worth of data. As it accepts a months worth of weather data, I want to have it return a single float value containing the total amount of precipitation that month. I know i'll need to loop through all the elements int he list (each day of the month), and then split each element by a comma, and then do an inside loop to add up the total for the month. Just not entirely sure how to go about it and what I am doing wrong so far.</p>
</div>
<div class="post-text" itemprop="text">
<p>This code should work properly for your totalPercip() function. Your mistakes were 1) you didn't increment the <code>total</code> variable and each loop assigned it to a different, new value, and 2) <code>i[16]</code> would probably give you an <code>List ouf of bounds</code> exception since <code>i[0] = 1st index, i[1] = 2nd index..., i[15] = 16th index</code>.</p>
<pre><code>def totalPercip(list):
    total = 0
    for i in list:
        percip = float(i[15].replace(',','')) #16th index
        total += percip 

    return total
</code></pre>
<p>I would also suggest that you do not use <code>list</code> as a variable name since it overshadows a built in python function called by that name.</p>
<p>Hope this helps!</p>
</div>
<span class="comment-copy">Please don't post images of data or code, just copy it and paste it into your question as text formatted as code - only paste a minimal amount, enough to illustrate the issue you are having. <a href="https://stackoverflow.com/help/mcve">Minimal, Complete, and Verifiable example</a></span>
<span class="comment-copy">Are you getting errors? When asking questions about code that produces an exception include the complete Traceback in the question.</span>
<span class="comment-copy">Using the <a href="https://docs.python.org/3/library/csv.html" rel="nofollow noreferrer">csv module</a> makes <i>reading</i> <code>.csv</code> files easy.</span>
<span class="comment-copy">Tells me TypeError: unsupported operand type(s) for +=: 'int' and 'str'</span>
<span class="comment-copy">my bad, index is a string, and requires a cast to integer before incrementing the <code>total</code> variable. Edited my answer.</span>
<span class="comment-copy">Now I am getting: ValueError: invalid literal for int() with base 10: ','</span>
<span class="comment-copy">oh yeah, since some of your data include decimals you should probably use <code>float(i[15])</code> instead of <code>int(i[15])</code></span>
<span class="comment-copy">Sorry for the late replay but now it says ValueError: could not convert string to float: ,  that "," at the end is significant. Not sure how to remove it.</span>
