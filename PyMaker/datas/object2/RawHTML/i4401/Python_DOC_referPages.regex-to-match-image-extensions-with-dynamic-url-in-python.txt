<div class="post-text" itemprop="text">
<p>I am creating a regex that matches a web url that ends in a filename with an image extension. The base url, everything before the filename, will be dynamic. Here's what I got:</p>
<pre><code>import re

text = 'google.com/dsadasd/dsd.jpg'

dynamic_url = 'google.com/dsadasd'
regex = '{}/(.*)(.gif|.jpg|.jpeg|.tiff|.png)'.format(dynamic_url)

re.search(regex, text)
</code></pre>
<p>This works, but passes, and should be failing, with the following url:</p>
<pre><code>text = 'google.com/dsadasd/.jpg'
</code></pre>
<p>It should only match if there is a filename for the image file. Any way to account for this? </p>
<p>If there are any improvements in this approach that you think could make the regular expression capture other edge cases that I missed based on initial requirements def feel free to say so. Additionally, if there are alternative approaches to this that do not leverage regex, those are appreciated as well (maybe a url parse?). The two most important things to me are performance and clarity (speed performance foremost).</p>
</div>
<div class="post-text" itemprop="text">
<p>You may also directly apply <a href="https://docs.python.org/3/library/os.path.html#os.path.splitext" rel="nofollow noreferrer"><code>os.path.splitext()</code></a>:</p>
<pre><code>In [1]: import os

In [2]: text = 'google.com/dsadasd/dsd.jpg'

In [3]: _, extension = os.path.splitext(text)

In [4]: extension
Out[4]: '.jpg'
</code></pre>
<p>Then, you may check the <code>extension</code> against a set of supported file extensions.</p>
</div>
<div class="post-text" itemprop="text">
<p>You could try this: <code>(.*)(\w+)(.gif|.jpg|.jpeg|.tiff|.png)'</code>. Just adds a check for something before the ending <code>.whatever</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>What you might do is to use anchors to assert the begin <code>^</code> and the end <code>$</code> of the line or use a word boundary <code>\b</code></p>
<p>To prevent matching for example <code>.jpg</code> right after the forward <code>/</code> slash, you could add a <a href="https://www.regular-expressions.info/charclass.html" rel="nofollow noreferrer">character class</a> and add the characters you want to allow for the filename. </p>
<p>In this example I have added one or more word characters and a hyphen <code>[\w-]+</code> but you can update that to your requirements </p>
<p>The regex part of your code could look like:</p>
<p><code>^{}/[\w-]+\.(?:gif|jpg|jpeg|tiff|png)$</code></p>
<p><a href="http://rextester.com/UCUX64159" rel="nofollow noreferrer">Test Python</a></p>
</div>
<span class="comment-copy">Please let me know how I can improve this post before down voting.</span>
