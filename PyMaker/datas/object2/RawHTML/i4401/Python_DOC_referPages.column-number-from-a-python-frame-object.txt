<div class="post-text" itemprop="text">
<p>I know how to get the line number from a frame object in Python. For example</p>
<pre><code>def f():
    import sys
    print(sys._getframe(1).f_lineno)
    return 1

f() + f()
</code></pre>
<p>If you save this to a file <code>test.py</code> and run <code>python test.py</code>, it will print </p>
<pre><code>6
6
</code></pre>
<p>But is it possible to get the column number, that is, something like</p>
<pre><code>1
7
</code></pre>
<p>(or some offsets thereof)? </p>
<p>The <a href="https://docs.python.org/3/library/inspect.html" rel="nofollow noreferrer">docs</a> seem to imply it isn't saved, but maybe it can be reconstructed from the code object somehow? If it requires using <code>inspect.getsource</code> that's acceptable, but I'd like to have something that's always correct, not heuristics. </p>
<p>My goal here is to make a debugger that would let you step into specific parts of a single line expression. </p>
</div>
<div class="post-text" itemprop="text">
<p>Python doesn't save the column number information you want, whether in the frame object or the code object. You'd have to retrieve the source code, examine the last executed bytecode instruction, and figure out what column of the source code to match that instruction to. That's probably going to be a lot of work.</p>
</div>
<span class="comment-copy">The column numbers of <i>what</i>?</span>
<span class="comment-copy">Since <code>sys.settrace</code> trace functions aren't called on a sub-line basis, you'll probably have to do some level of bytecode rewriting anyway.</span>
