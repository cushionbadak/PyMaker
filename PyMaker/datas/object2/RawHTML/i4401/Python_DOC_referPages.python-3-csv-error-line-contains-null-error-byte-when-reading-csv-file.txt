<div class="post-text" itemprop="text">
<p>I'm trying to read a csv file that contains NUL
with csv reader
I search a lot for a way to read the file without an error and couldn't find one.</p>
<p>Edit:
Adding the relevant section of the file:
<a href="https://drive.google.com/open?id=1rtF3ck6QymtH4_n4iUjavPnxZiryq_Q4" rel="nofollow noreferrer">https://drive.google.com/open?id=1rtF3ck6QymtH4_n4iUjavPnxZiryq_Q4</a></p>
<p>My code:</p>
<pre><code>   with codecs.open(log_path, 'r') as csv_file:
        log_reader = csv.DictReader(csv_file)
        for line in log_reader:
            if line['Addition Information'] == str 
               # do something 
</code></pre>
<p>Will appreciate any help
Thanks,
Avishay</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/csv.html#csv.reader" rel="nofollow noreferrer"><code>csv.reader()</code></a> (and therefore also <a href="https://docs.python.org/3/library/csv.html#csv.DictReader" rel="nofollow noreferrer"><code>csv.DictReader()</code></a>) simply can't deal with files containing null bytes.</p>
<p>A possible solution would be to replace null bytes when reading the input file, e.g. by using a generator expression, since <code>reader()</code> takes any object supporting the iterator protocol as argument:</p>
<pre><code>with codecs.open(log_path, 'r') as csv_file:
    log_reader = csv.DictReader((l.replace('\0', '') for l in csv_file))
    for line in log_reader:
        if line['Addition Information'] == str 
           # do something 
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Try to modify your code like this:</p>
<pre><code>with codecs.open(log_path, 'r', encoding='utf-8', errors='backslashreplace') as csv_file:
        log_reader = csv.DictReader(csv_file)
        for line in log_reader:
            if line['Addition Information'] == str 
               # do something 
</code></pre>
</div>
<span class="comment-copy">Can you post your CSV?</span>
<span class="comment-copy">I added a link to the relevant section</span>
<span class="comment-copy">Working great! It's a little bit slower now but it's done the trick Thanks very much!</span>
