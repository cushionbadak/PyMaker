<div class="post-text" itemprop="text">
<p>Ok, so i found this code for finding the roots of a function using the Newton method, but i need a way to insert the function as an input. I´ve tried all i know.</p>
<p>This is for a Programming Fundamentals course, so it needs to be as simple as it gets. I´d appreciate your help very much.</p>
<p><strong>EDIT</strong></p>
<p>What i need is to have the user insert the function. I don't want to make it part of the code.</p>
<p>With a more clear explanation:</p>
<p>I need to have an input prompt where i ask the user for a function (i.e. "Please insert your function: 2*x**2 + 6*x + 12")</p>
<p>and another one for the derivative of the function (i.e. "Please insert the derivative: 4*x + 6)</p>
<p>and have the program find the roots just like the one posted, without having them as part of the proper code. </p>
<p>NOTE: This is the first time i post here and programming isn't my area, but i have always found the answers here. Please be patient and thanks for the help.</p>
<pre><code>def dx(f, x):
return abs(0-f(x))

def newton_metodo(f, df, x0, e):
    delta = dx(f, x0)
    while delta &gt; e:
        x0 = x0 - f(x0)/df(x0)
        delta = dx(f, x0)
    print ('Raiz esta en: ', x0)
    print ('f(x) en la raiz es: ', f(x0))

def f(x):
    return 6*x**5-5*x**4-4*x**3+3*x**2

def df(x):
    return 30*x**4-20*x**3-12*x**2+6*x

x0s = [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 1]
for x0 in x0s:
    newton_metodo(f, df, x0, 1e-5)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>note that you should never ever ever use eval on untrusted user input, and never ever ever in production code should eval be used!</p>
<pre><code>def user_fn(user_function_string,**kwargs):
    for key,val in kwargs.items():
        user_function_string=user_function_string.replace("%s"%key,"%s"%val)
    print "user fn:",user_function_string
    #NOTE USING EVAL ON UNTRUSTED DATA IS A VERY VERY VERY BAD IDEA!!!!
    return eval(user_function_string)

for i in range(3,8):
    print (user_fn("2*x**2-1",x=i))
</code></pre>
<p>a much better way to create user functions is to prompt them for coefficients</p>
<p>ie</p>
<pre><code>if sys.version_info[0] &gt;= 3: raw_input = input
order = int(raw_input("Enter Order of function (ie max power of x):"))
coefs = [int(raw_input("how many x**%d?"%i for i in range(order,-1,-1)]

def process_coefs(coefs,x):
    return sum(n*x**i for i,n in coefs[::-1])

print(process_coefs(coefs,x=3))
print(process_coefs(coefs,x=5))
</code></pre>
</div>
<span class="comment-copy">I'm sorry, but what is your question?</span>
<span class="comment-copy">What is your question ?, I have tried your code and it works</span>
<span class="comment-copy">I need to have the function inserted by the user, not that it is part of the code itself.</span>
<span class="comment-copy">What <i>exactly</i> do you mean? What sort of inputs would you be expecting/accepting?</span>
<span class="comment-copy">Did your professor provide any example code at all? Looking at any Python scripts at all might clue you in on how to get user input.</span>
<span class="comment-copy">Thanks a lot for your help.   Is that the most basic way it can be done? 'Cause i don't really recognise "sys.version_info"</span>
<span class="comment-copy">The <code>sys.version_info</code> check is so the code will run on Python 2 and Python 3 as you've not specified your environment. The function <code>raw_input</code> from Python 2 has become <code>input</code> in <a href="https://docs.python.org/3/whatsnew/3.0.html" rel="nofollow noreferrer">Python 3</a>.</span>
