<div class="post-text" itemprop="text">
<p>I have a situation where I have in a Flask web app a function several layers down from the handler that I want to unit test. The function takes in a few parameters and changes them depending on reading different values from a database. Roughly like this:</p>
<pre><code>  def func_to_test(a=1, b=10, c=100):
     # do some processing
     if (read_d_from_database() == 10):
        # override a to something else
        # do something
     if (read_X_from_database() == 45):
        # override b to 45
        # do something
     #etc..
</code></pre>
<p>How can I test this function from the outside in a standalone way so that I can simulate the read_d_from_database() etc returning different values each time?</p>
</div>
<div class="post-text" itemprop="text">
<p>You could check out <a href="https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch" rel="nofollow noreferrer"><code>patch()</code> from <code>unittest.mock</code></a>. It allows you to override how certain methods behave.</p>
<pre><code>&gt;&gt;&gt; @patch('__main__.SomeClass')
... def function(normal_argument, mock_class):
...     print(mock_class is SomeClass)
...
&gt;&gt;&gt; function(None)
True
</code></pre>
</div>
