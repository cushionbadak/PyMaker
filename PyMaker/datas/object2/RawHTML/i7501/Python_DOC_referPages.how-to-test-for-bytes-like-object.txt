<div class="post-text" itemprop="text">
<p>Which test can tell if an object is a <a href="https://docs.python.org/3/glossary.html#term-bytes-like-object" rel="noreferrer">bytes-like object</a>?</p>
<p>Usually either a string or a bytes-like object can appear in certain function calls. A simple, but indirect solution in such context would be <code>if not isinstance(obj, str)</code>.</p>
<p>I've found  <a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.ByteString" rel="noreferrer">ByteString</a> in <code>collections.abc</code>. It seems to give the right answers, but I'm not sure if this is the right way:</p>
<pre><code>&gt;&gt;&gt; import collections.abc as cabc
&gt;&gt;&gt; isinstance(bytes(),cabc.ByteString)
True
&gt;&gt;&gt; isinstance(bytearray(),cabc.ByteString)
True
&gt;&gt;&gt; isinstance("string",cabc.ByteString)
False
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This is almost the right way as <code>collections.abc.ByteString</code>, as well as <code>typing.ByteString</code>, represents the types <code>bytes</code>, <code>bytearray</code>, and <code>memoryview</code>, but not <code>array.array</code>, so you'd need another check:</p>
<pre><code>def IsBytesLike(obj):
    return isinstance(obj, typing.ByteString) or isinstance(obj, array.array)
</code></pre>
</div>
<span class="comment-copy">See also <a href="https://stackoverflow.com/a/30018151/489590">stackoverflow.com/a/30018151/489590</a></span>
<span class="comment-copy">Why do you want to test the type of an object? In Python, any object that fulfills the interface needed would work, whether or not it's a subclass of <code>ByteString</code>.</span>
<span class="comment-copy">@martineau I want to parse the output of <code>socket.getpeername</code> for AF_UNIX. <i>"... programs intended to run on Linux may need to deal with both types of address"</i>. Source: <a href="https://docs.python.org/3/library/socket.html#socket-families" rel="nofollow noreferrer">docs.python.org/3/library/socket.html#socket-families</a></span>
<span class="comment-copy">@BrianCain Thank you. That is very similar question and answered. Maybe an equivalent for practical purposes (bytes-like = has buffer protocol and C-contiguous buffer). I have no idea what is the latter.</span>
<span class="comment-copy">I would accept this answer, but I have to admit, I'm unable to judge if adding <code>array.array</code> makes the test complete.</span>
<span class="comment-copy">@VPfB, the <a href="https://docs.python.org/3/glossary.html#term-bytes-like-object" rel="nofollow noreferrer">link</a> you provided has the definition of a bytes-like object, including the standard Python types the definition applies to. So, while you can't really test the "C-contiguousness" of a buffer, you can test for whether an object is of a standard type that is definitely bytes-like.</span>
<span class="comment-copy">That link also mentiones "many common memoryview objects". I tried <code>IsBytesLike</code> on <code>memoryview(b'')</code> and it returned <code>False</code>. If you really can't test the "C-contiguousness", than the answer linked by Brian Cain in his comment is probably the best possible.</span>
