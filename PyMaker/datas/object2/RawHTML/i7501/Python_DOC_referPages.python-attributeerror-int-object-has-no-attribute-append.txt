<div class="post-text" itemprop="text">
<p>I have a dict of int, list. What I'm trying to do is loop through `something' and if the key is present in the dict add the item to the lsit or else create a new list and add the item.
This is my code.</p>
<pre><code>levels = {}
if curr_node.dist in levels:
   l = levels[curr_node.dist]
   l.append(curr_node.tree_node.val)...........***
else:
   levels[curr_node.dist] = []
   levels[curr_node.dist].append(curr_node.tree_node.val)
   levels[curr_node.dist] = curr_node.tree_node.val
</code></pre>
<p>My question is two-fold.
1. I get the following error,
<code>Line 27: AttributeError: 'int' object has no attribute 'append'</code>
<code>Line 27 is the line marked with ***</code>
What am I missing that's leading to the error.</p>
<ol start="2">
<li>How can I run this algorithm of checking key and adding to a list in a dict more pythonically.</li>
</ol>
</div>
<div class="post-text" itemprop="text">
<p>You set a list first, then <em>replace that list</em> with the value:</p>
<pre><code>else:
   levels[curr_node.dist] = []
   levels[curr_node.dist].append(curr_node.tree_node.val)
   levels[curr_node.dist] = curr_node.tree_node.val
</code></pre>
<p>Drop that last line, it breaks your code.</p>
<p>Instead of using <code>if...else</code>, you could use the <a href="https://docs.python.org/3/library/stdtypes.html#dict.setdefault" rel="nofollow noreferrer"><code>dict.setdefault()</code> method</a> to assign an empty list when the key is missing, and at the same time return the value for the key:</p>
<pre><code>levels.setdefault(curr_node.dist, []).append(curr_node.tree_node.val)
</code></pre>
<p>This one line replaces your 6 <code>if: ... else ...</code> lines.</p>
<p>You could also use a <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="nofollow noreferrer"><code>collections.defaultdict()</code> object</a>:</p>
<pre><code>from collections import defaultdict

levels = defaultdict(list)
</code></pre>
<p>and</p>
<pre><code>levels[curr_node.dist].append(curr_node.tree_node.val)
</code></pre>
<p>For missing keys a list object is automatically added. This has a downside: later code with a bug in it that accidentally uses a non-existing key will get you an empty list, making matters confusing when debugging that error.</p>
</div>
<span class="comment-copy">You assigned an integer here: <code>levels[curr_node.dist] = curr_node.tree_node.val</code>. What was that meant to do, you <i>replaced</i> the list object there.</span>
<span class="comment-copy"><code>l</code> has a value returned from levels dict. If it is a integer. You are trying to append to a integer, which is causing this error</span>
