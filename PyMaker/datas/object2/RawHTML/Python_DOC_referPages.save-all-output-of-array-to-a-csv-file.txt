<div class="post-text" itemprop="text">
<p>So I want to save my results to a CSV file but I keep getting this error</p>
<blockquote>
<p>'_csv.Error: iterable expected, not int'</p>
</blockquote>
<p>This is my code</p>
<pre><code>import csv
word_freqs = {}
words = []

for data in items:
    with open('filepath.csv', 'w') as f:
        writer = csv.writer(f)
        word_freqs[data] = {}
        total = len(item_tokens[data])
        token_lengths = [len(token) for token in item_tokens[data]]
        words.append(token_lengths)
        print(token_lengths)
        writer.writerows(token_lengths)
</code></pre>
<p>However if I change</p>
<pre><code>writer.writerows(token_lengths)
</code></pre>
<p>to </p>
<pre><code>writer.writerow(token_lengths)
</code></pre>
<p>It prints the output correctly</p>
<blockquote>
<p>[6, 5, 7, 1, 3,5 ,7, 10, 3, 7, 6, 2, 9, 5, 2, 1, 7, 7, 11, 5, 6, 6]</p>
<p>[12, 2, 7, 13, 12, 9, 2, 2, 9, 2, 10, 10]</p>
<p>[6, 8, 12, 3, 11, 3, 3, 6, 7, 5, 4, 4, 3, 7, 7]</p>
<p>[5, 2, 4, 2, 4, 7, 1, 2, 9, 5, 2, 5, 4, 7, 2, 6]</p>
</blockquote>
<p>However when it comes to saving the results in a CSV file, it will only save the last line of the array in the CSV</p>
<blockquote>
<p>[5, 2, 4, 2, 4, 7, 1, 2, 9, 5, 2, 5, 4, 7, 2, 6]</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>Your are initializing the csv writer every time for each item iteration. So you will end up with only the last row when the process is finished. Initialize it only once. Your for loop must come later. And as the other answer mentioned use <code>writerow</code></p>
<pre class="lang-py prettyprint-override"><code>import csv
word_freqs = {}
words = []

with open('filepath.csv', 'w') as f:

    writer = csv.writer(f)

    for data in items:
        word_freqs[data] = {}
        total = len(item_tokens[data])
        token_lengths = [len(token) for token in item_tokens[data]]
        words.append(token_lengths)
        print(token_lengths)
        writer.writerow(token_lengths)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Since you are anyway creating a list of all <code>token_lengths</code> in <code>words</code> you can as well do</p>
<pre><code>import pandas as pd
pd.DataFrame(words).to_csv("filepath.csv",index=False)
</code></pre>
<p>Advantage: to_csv allows you to do lots of customisations in the csv, for example how to handle different length rows (na_rep) etc. </p>
</div>
<span class="comment-copy">Try opening the file first <i>then</i> iterate over <code>data</code> and keep <code>writerow</code>.</span>
<span class="comment-copy">Thank you, however it prints correctly but the results in the CSV is not correct</span>
<span class="comment-copy">are your <code>token_lengths</code> correct? I suggest debugging to check where the inconsistency is coming from. It could be outside the code snippet you have posted.</span>
<span class="comment-copy">Yeah I realised excel is not loading the whole dataset as it is too large. That's why my output was not matching the file</span>
<span class="comment-copy">I know <code>pandas</code> is popular and all, but I don't think <code>pandas</code> should be treated as a standard library. If the question is using standard library, the answer should follow that.</span>
