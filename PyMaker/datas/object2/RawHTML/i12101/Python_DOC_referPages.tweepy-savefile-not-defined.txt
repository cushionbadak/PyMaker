<div class="post-text" itemprop="text">
<p>I am a beginner with Python and I am trying to use Tweepy to save some tweets and in doing so I am struggling to write them to a file. </p>
<p>I get the error that saveFile is not defined. </p>
<p>class listener(StreamListener):</p>
<pre><code>def on_data(self, data):
    try:
        print data
        safeFile = open('twitDb.csv', 'w')
        saveFile.write (data)
        saveFile.write('\n')
        saveFile.close()
        return True
    except BaseException, e:
        print'failed ondata,',str(e)

def on_error (self, status):
    print status
</code></pre>
<p>auth = OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)</p>
<p>twitterStream = Stream(auth, listener())
twitterStream.filter(track=['prime'])</p>
<p>My token's seem to be working fine and the tweets do stream in idle. The file appears though there is nothing in there </p>
<p>The error code is </p>
<p>failed ondata, global name 'saveFile' is not defined</p>
<p>It does as mentioned print the data</p>
</div>
<div class="post-text" itemprop="text">
<p>The error must be because of a typo - note that variable name used here <strong>is not saveFile</strong>.</p>
<pre><code>safeFile = open('twitDb.csv', 'w')
</code></pre>
<p>Also consider that you are opening the file in "w" mode for every tweet - as the code is now you would overwrite the file every time a tweet is received.</p>
<p>A better way to do this is to open the file when initializing the listener (<code>__init__</code>), and then write to it from on_data:</p>
<pre><code>class listener(StreamListener):
  def __init__(self):
    self.saveFile = open('twitDb.csv', 'w')
</code></pre>
<p>Do remember to close the file after the work's done.</p>
<p>BTW there is a <code>csv</code> module that can help read and write CSV files: <a href="https://docs.python.org/3/library/csv.html" rel="nofollow">https://docs.python.org/3/library/csv.html</a></p>
</div>
<div class="post-text" itemprop="text">
<p>TYPO in script, change <code>safeFile = open('twitDb.csv', 'w')</code> to <code>saveFile = open('twitDb.csv', 'w')</code>. </p>
<p>My suggestion to use is start using IDE or editors which highlight that typos for you, for instance <a href="https://www.jetbrains.com/pycharm/download/" rel="nofollow">PyCharm</a></p>
</div>
<span class="comment-copy">how you calling <code>on_data</code>?</span>
<span class="comment-copy">Please include the full code and the full error traceback.</span>
<span class="comment-copy">Please show the full code and full error trackback. (Put in on a service like gist.github.com and include a link in your question - also add an update to your question that the typo is fixed by there are still errors).</span>
<span class="comment-copy">That worked great. Sorry for the silly error. Thank you a lot for your help.</span>
<span class="comment-copy">Sorry for the previous comment also, the typo was the error.</span>
<span class="comment-copy">That worked great. Thank you so much for your help</span>
<span class="comment-copy">@FreddieButcherd You are welcome ! Have a nice day :)</span>
