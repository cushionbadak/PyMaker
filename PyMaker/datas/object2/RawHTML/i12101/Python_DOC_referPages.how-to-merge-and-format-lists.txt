<div class="post-text" itemprop="text">
<p>I have two nested lists:</p>
<pre><code>l1 = [['a', 'b'], ['d', 'b'], ['b', 'c'], ['a', 'c'], ['c', 'd'], ['b', 'a'], ['d', 'a']]
l2 = [['a', 'alpha'], ['b', 'beta'], ['c', 'gamma'], ['d', 'delta']]
</code></pre>
<p>(<code>l1</code> is completely unsorted but <code>l2</code> is in alphabetical order, in case that is relevant.)</p>
<p>Basically I want to end up with another list like this:</p>
<pre><code>l3 = [['alpha', ['beta', 'gamma']], ['beta', ['alpha', 'gamma'], ['gamma', ['delta']], ['delta', ['alpha']]
</code></pre>
<p>So: merge the lists inside <code>l1</code> which share a common first element then replace all the values in <code>l1</code> with their corresponding values in <code>l2</code> and finally format them in the manner of <code>l3</code> (with the nested lists e.g. <code>['beta', 'gamma']</code> in alphabetical order).</p>
<p>(<a href="https://stackoverflow.com/questions/20391201/python-merge-lists-by-common-element/">This question</a> is similar to what I want to do but I was unable to modify the answers given to fit my problem.)</p>
<p>Thanks!</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use dictionaries for (a) mapping the letters to words, and (b) for merging the lists. Particularly, have a look at <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="nofollow"><code>collections.defaultdict</code></a> to make it a bit easier.</p>
<pre><code>&gt;&gt;&gt; l1 = [['a', 'b'], ['d', 'b'], ['b', 'c'], ['a', 'c'], ['c', 'd'], ['b', 'a'], ['d', 'a']]
&gt;&gt;&gt; l2 = [['a', 'alpha'], ['b', 'beta'], ['c', 'gamma'], ['d', 'delta']]
&gt;&gt;&gt; d2 = dict(l2)
&gt;&gt;&gt; d3 = collections.defaultdict(list)
&gt;&gt;&gt; for x, y in l1:
...     d3[d2[x]].append(d2[y])
...
&gt;&gt;&gt; d3
defaultdict(&lt;type 'list'&gt;, {'alpha': ['beta', 'gamma'], 
                            'beta': ['gamma', 'alpha'], 
                            'gamma': ['delta'], 
                            'delta': ['beta', 'alpha']})
</code></pre>
<p>If you prefer the result as a list of sorted lists, just get the <code>items</code> from the dict.</p>
<pre><code>&gt;&gt;&gt; sorted([k, sorted(v)] for k, v in d3.items())
[['alpha', ['beta', 'gamma']],
 ['beta', ['alpha', 'gamma']],
 ['delta', ['alpha', 'beta']],
 ['gamma', ['delta']]]
</code></pre>
</div>
<span class="comment-copy">It seems like what you want in your results should be a dictionary not a list of lists? Are you sure you want to use a list there?</span>
<span class="comment-copy">Did you mean to put no commas between <code>['d', 'b'] ['b', 'c']</code> and <code>['b', 'a'] ['d', 'a']</code> in <code>l1</code>?</span>
<span class="comment-copy">@IanAuld: Yes, sorry, I've been away from Python for a long time and completely forgot about dictionaries!</span>
<span class="comment-copy">@Jarad: No that was a mistake, I'll edit them in. Thanks for pointing that out!</span>
<span class="comment-copy">I was typing out a solution and then realized it was identical to this except the variable names.</span>
<span class="comment-copy">Thanks, that works perfectly! I'll certainly be looking into defaultdict further.</span>
