<div class="post-text" itemprop="text">
<p>I know pickles can be easily loaded into python using</p>
<pre><code>import pickle
p = pickle.load(open("file.pkl"))
</code></pre>
<p>I was wondering how to load the same pickle file in pyx/C code in python? I couldn't find the method to directly load it.</p>
<p>Perhaps a solution would be to load in python and pass reference to object in C?</p>
</div>
<div class="post-text" itemprop="text">
<p>The easy answer would be to just compile your code with Cython. Everything there will be done automatically.</p>
<p>In context of the Python C API, you could easily replicate this code with something like:</p>
<pre><code>PyObject *file = NULL, *p = NULL;
PyObject *pickle = PyImport_ImportModule("pickle"); // import module
if (!pickle) goto error;
file = PyFile_FromString("file.pkl", "r"); // open("file.pkl")
if (!pickle) goto error;
p = PyObject_CallMethod(pickle, "load", "O", file); // pickle.load(file)
error:
Py_XDECREF(pickle);
Py_XDECREF(file);
</code></pre>
<p>This is done for Python 2, while for Python 3 <code>open("file.pkl")</code> needs to be implemented by using the <a href="https://docs.python.org/3/library/io.html#module-io" rel="nofollow">io</a> module.</p>
</div>
<span class="comment-copy">Oh yeah, that looks really cool. Going to use that.</span>
