<div class="post-text" itemprop="text">
<p>I am stuck on a seemingly simple task with a Python Twitch IRC Bot I'm developing for my channel. I have a points system all figured out, and I thought it was working, but I found out that every time I restart the program, the list that contains balances of users resets. </p>
<p>This is because I declare the empty list at the beginning of the script each time the program is run. If a user chats and they aren't in the list of welcomed users, then the bot will welcome them and add their name to a list, and their balance to a corresponding list. </p>
<p>Is there someway I can work around this resetting problem and make it so that it won't reset the list every time the program restarts? Thanks in advance, and here's my code:</p>
<pre><code>welcomed = []
balances = []

def givePoints():
    global balances
    threading.Timer(60.0, givePoints).start()
    i = 0
    for users in balances:
        balances[i] += 1
        i += 1
def welcomeUser(user):
    global welcomed
    global balances
    sendMessage(s, "Welcome, " + user + "!")
    welcomed.extend([user])
    balances.extend([0])

givePoints()
#other code here...

if '' in message:
    if user not in welcomed:
        welcomeUser(user)
break
</code></pre>
<p>(I had attempted to use global variables to overcome this problem, however they didn't work, although I'm guessing I didn't use them right :P)</p>
</div>
<div class="post-text" itemprop="text">
<p>Try using the <a href="https://docs.python.org/3/library/json.html?highlight=json#module-json" rel="nofollow"><code>json</code></a> module to dump and load your list. You can catch file open problems when loading the list, and use that to initialize an empty list.</p>
<pre><code>import json

def loadlist(path):
    try:
        with open(path, 'r') as listfile:
            saved_list = json.load(listfile)
    except Exception:
            saved_list = []
    return saved_list

def savelist(path, _list):
    try:
        with open(path, 'w') as listfile:
            json.dump(_list)
    except Exception:
        print("Oh, no! List wasn't saved! It'll be empty tomorrow...")
</code></pre>
</div>
<span class="comment-copy">You can't make a list persist between executions of the script, but you can write the list to a file and read it when you start up.</span>
<span class="comment-copy">I had thought about that, however would it insert the string versions of the text file into the list in a way that wouldn't allow it to iterate through the balances and increase them?</span>
<span class="comment-copy">There are multiple ways to save lists such as <code>json</code> and <code>pickle</code>. You'd read that list back at restart and have the current values.</span>
<span class="comment-copy">See <a href="http://stackoverflow.com/questions/18229082/python-pickle-unpickle-a-list-to-from-a-file">this</a> question.</span>
