<div class="post-text" itemprop="text">
<p>How can I add "<a href="http://test.url/" rel="nofollow">http://test.url/</a>" to the result <code>link.get('href')</code> below, but only if it doesn't contain "http"</p>
<pre><code>import urllib2
from bs4 import BeautifulSoup

url1 = "http://www.salatomatic.com/c/Sydney+168"
content1 = urllib2.urlopen(url1).read()
soup = BeautifulSoup(content1)
for link in soup.findAll('a'):
  print link.get('href')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>for link in soup.findAll('a'):
    currenturl =  link.get('href')
    if not currenturl.startswith("http"):
        currenturl = "http://test.url/" + currenturl
    print currenturl
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="http://docs.python.org/2/library/urlparse.html#urlparse.urljoin" rel="nofollow"><code>urlparse.urljoin</code></a>:</p>
<pre><code>&gt;&gt;&gt; import urlparse
&gt;&gt;&gt; urlparse.urljoin('http://example.com/', '/a/b')
'http://example.com/a/b'
&gt;&gt;&gt; urlparse.urljoin('http://example.com/', 'http://www.example.com/a/b')
'http://www.example.com/a/b'
</code></pre>
<p>In Python 3.x, use <a href="http://docs.python.org/3/library/urllib.parse.html#urllib.parse.urljoin" rel="nofollow"><code>urllib.parse.urljoin</code></a>:</p>
<pre><code>&gt;&gt;&gt; import urllib.parse
&gt;&gt;&gt; urllib.parse.urljoin('http://example.com/', '/a/b')
'http://example.com/a/b'
&gt;&gt;&gt; urllib.parse.urljoin('http://example.com/', 'http://www.example.com/a/b')
'http://www.example.com/a/b'
</code></pre>
<hr/>
<p><strong>Complete example</strong></p>
<pre><code>import urllib2
from bs4 import BeautifulSoup
import urlparse

url1 = "http://www.salatomatic.com/c/Sydney+168"
content1 = urllib2.urlopen(url1).read()
soup = BeautifulSoup(content1)
for link in soup.findAll('a'):
    print urlparse.urljoin(url1, link.get('href'))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I would use <code>urljoin</code></p>
<pre><code>&gt;&gt;&gt; from urlparse import urljoin
&gt;&gt;&gt; urljoin('http://test.url/', '/relative/path')
'http://test.url/relative/path'
</code></pre>
<p>In your example you only need to do this when you find a relative url.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>import urllib2
from bs4 import BeautifulSoup

url1 = "http://www.salatomatic.com/c/Sydney+168"
content1 = urllib2.urlopen(url1).read()
soup = BeautifulSoup(content1)
for link in soup.findAll('a'):
   get = link.get('href')
   if get.startswith('http'):
      print get
</code></pre>
<p>In the spirit of BeautifulSoup, this works well with your original code.</p>
<p>If what you want is to preface the non-<code>http</code> sites with a <code>http://test.url/</code> then you need to do this:</p>
<pre><code>for link in soup.findAll('a'):
   get = link.get('href')
   if not get.startswith('http'):
      print 'http://test.url/'+get
</code></pre>
<p>You're set either way.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>This works:

    url = "http://test.url/" 

    link_list = [link['href'] for link in soup.findAll('a')]

    result_list = [url+i if 'http' not in i else i for i in link_list]

    for link in result_link:
        print link
</code></pre>
</div>
