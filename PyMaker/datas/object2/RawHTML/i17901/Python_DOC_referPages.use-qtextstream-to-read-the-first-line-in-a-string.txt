<div class="post-text" itemprop="text">
<p>How can I use <code>QTextStream</code> to read the first line in a string (read from a file before)?</p>
<pre><code>streamin = QTextStream(str)
line = streamin.readLine()
</code></pre>
<p>It seems that this code doesn't work.</p>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://qt-project.org/doc/qt-5.1/qtcore/qtextstream.html" rel="nofollow">QTextStream</a> class does not accept python strings directly. For PyQt5, you must convert the string to a <a href="https://qt-project.org/doc/qt-5.1/qtcore/qbytearray.html" rel="nofollow">QByteArray</a> first:</p>
<pre><code>&gt;&gt;&gt; s = """\
... First Line
... Second Line
... Third Line
... """
&gt;&gt;&gt; ba = QtCore.QByteArray(s.encode('utf-8'))
&gt;&gt;&gt; ts = QtCore.QTextStream(ba)
&gt;&gt;&gt; ts.setCodec('utf-8')
&gt;&gt;&gt; ts.readLine()
'First Line'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I'm basically going to post a snippet of code from the <a href="http://qt-project.org/doc/qt-4.8/qtextstream.html" rel="nofollow noreferrer">Qt Documentation Site</a>.</p>
<p>Better yet... here's something from <a href="https://stackoverflow.com/questions/9942651/how-to-use-qtextstreamreadline-function">stackoverflow</a> as well.</p>
<pre><code>// Instead of feeding in stdin, you can feed in QFile - i.e. QIODevice
QFile file("myfile");
// ... open file etc etc
QTextStream stream(&amp;file);
QString line;
line = stream.readLine();
</code></pre>
</div>
<span class="comment-copy">add some context (more code), you will not meet oracle here which is able to say what did you do wrong.</span>
<span class="comment-copy">Again, like Marek suggested, please correct your syntax and post real code.</span>
<span class="comment-copy">accepted answer proofs that you should write that <code>str</code> is python string. Anyway this answer is a bit to complicated, <a href="http://www.commandprompt.com/community/pyqt/x2068" rel="nofollow noreferrer">see this page</a>. So to fix you code this should be enough: <code>streamin = QTextStream(QString(str))</code></span>
<span class="comment-copy">@MarekR. You missed that the OP is using PyQt5. There is no QString in PyQt5, so only a QIODevice or QByteArray can be passed to the QTextStream constructor. Of course, your suggestion would work with PyQt4. Personally, I would avoid all the complications and use python's <a href="http://docs.python.org/3/library/io.html#" rel="nofollow noreferrer">io</a> module for this kind of thing.</span>
<span class="comment-copy">It's good,but I want to get the first line from a string not a file.</span>
