<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/20269726/string-to-numeric-array">string to numeric array</a>
<span class="question-originals-answer-count">
                    3 answers
                </span>
</li>
</ul>
</div>
<p>Hi doing some stuff over a network and wondering if there is any way of converting python array as a string back into a python array.. for example</p>
<pre><code>x = "[1,2,3,4]"
</code></pre>
<p>converting x to</p>
<pre><code>x_array = [1,2,3,4]
</code></pre>
<p>Bonus if it can also work for numpy multidimensional arrays!</p>
</div>
<div class="post-text" itemprop="text">
<p>For the normal arrays, use <a href="http://docs.python.org/2/library/ast.html#ast.literal_eval" rel="nofollow"><code>ast.literal_eval</code></a>:</p>
<pre><code>&gt;&gt;&gt; from ast import literal_eval
&gt;&gt;&gt; x = "[1,2,3,4]"
&gt;&gt;&gt; literal_eval(x)
[1, 2, 3, 4]
&gt;&gt;&gt; type(literal_eval(x))
&lt;type 'list'&gt;
&gt;&gt;&gt;
</code></pre>
<p><code>numpy.array</code>'s though are a little tricky because of how Python renders them as strings:</p>
<pre><code>&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; x = [[1,2,3], [4,5,6]]
&gt;&gt;&gt; x = np.array(x)
&gt;&gt;&gt; x
array([[1, 2, 3],
       [4, 5, 6]])
&gt;&gt;&gt; x = str(x)
&gt;&gt;&gt; x
'[[1 2 3]\n [4 5 6]]'
&gt;&gt;&gt;
</code></pre>
<p>One hack you could use though for simple ones is replacing the whitespace with commas using <a href="http://docs.python.org/2/library/re.html#re.sub" rel="nofollow"><code>re.sub</code></a>:</p>
<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; x = re.sub("\s+", ",", x)
&gt;&gt;&gt; x
'[[1,2,3],[4,5,6]]'
&gt;&gt;&gt;
</code></pre>
<p>Then, you can use <code>ast.literal_eval</code> and turn it back into a <code>numpy.array</code>:</p>
<pre><code>&gt;&gt;&gt; x = literal_eval(x)
&gt;&gt;&gt; np.array(x)
array([[1, 2, 3],
       [4, 5, 6]])
&gt;&gt;&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I would suggest that you don't actually want to do this. This kind of thing isn't going to be scalable easily to sending, for instance, instances of classes you've defined across a network. Instead, I would suggest that you use something like <a href="http://docs.python.org/3/library/pickle.html" rel="nofollow">pickle</a> or <a href="http://docs.python.org/3/library/json.html" rel="nofollow">json</a> to convert the data to bytes, send it across the network, and then convert the data back. However, in other situations I would always use <a href="http://docs.python.org/3/library/ast.html#ast.literal_eval" rel="nofollow">ast.literal_eval</a>. If you specify how you are sending the data across the network, I'll give you example usage of <code>pickle</code> for your situation.</p>
</div>
<div class="post-text" itemprop="text">
<p>Try this:</p>
<pre><code>x_array = [(int(y) if y.strip() else None) for y in x[1:-1].split(',')]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>Python 2.7.5+ (default, Sep 19 2013, 13:48:49) 
&gt;&gt;&gt; import json
&gt;&gt;&gt; json.loads("[1,2,3,4]")
[1, 2, 3, 4]
&gt;&gt;&gt; 
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If you're sure the strings are always going to have that structure, you could remove the brackets and split the string:</p>
<pre><code>x_array = [int(y) for y in x[1:-1].split(',') if y.strip()]
</code></pre>
</div>
<span class="comment-copy">+1 for mentioning pickle.</span>
<span class="comment-copy">+1 However, although I see what you are trying to do, I think you should include a <code>list(filter(lamda x: x is not None,</code> around this to strip the <code>None</code> values.</span>
<span class="comment-copy">why do you both answer and mark as duplicate?</span>
<span class="comment-copy">please read this <a href="http://meta.stackexchange.com/questions/4283/closing-etiquette-why-do-some-answer-and-close" title="closing etiquette why do some answer and close">meta.stackexchange.com/questions/4283/â€¦</a></span>
<span class="comment-copy">Also, this answer is already mentioned in the duplicated thread.</span>
<span class="comment-copy">@njzk2 Oh, I didn't see the part of the other answer that mentioned JSON.</span>
<span class="comment-copy">@njzk2, you should read the answer in the linked question :) "The question should be closed (and later deleted), but go ahead and give the asker the answer they were looking for first so we don't leave them with an absolutely horrible experience for it."</span>
<span class="comment-copy"><code>"[1,,2]" != [1, 2]</code></span>
<span class="comment-copy">akaRem ?? That's invalid syntax for a list. No one cares. Strings are suppossed to hold valid list representations.</span>
<span class="comment-copy">Ooops..........</span>
<span class="comment-copy">Breaks on <code>x = "[1, 2, 3, 4, 5,   ]"</code>.</span>
<span class="comment-copy">Fixed it using strip to check for empty strings.</span>
