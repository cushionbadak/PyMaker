<div class="post-text" itemprop="text">
<p>I have a script that has a argument which has a default value.
I want to do something:</p>
<pre><code>$sample.py =&gt; Dont do anything
$sample.py -R =&gt; Use default value of -R
$sample.py -R &lt;value&gt; =&gt;do something based on value passed
</code></pre>
<p>Is this doable in argparse?</p>
<p>Hi all. Please note that my problem is different from the one mentioned in the solution.</p>
<p>Basically i want action corresponding to -R to be performed only when i pass -R on command line.
If only -R is passed then value of -R is default value.</p>
<p>If i run the py file without -R then no action corresponding to -R should be done.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>parser.add_argument('-R',nargs='?', default='default',const='const')
</code></pre>
<p>should produce</p>
<pre><code>test.py =&gt; namspace(R='default')
test.py -R =&gt; namespace(R='const')
test.py -R value =&gt; namespace(R='value')
</code></pre>
<p>This is documented in <a href="https://docs.python.org/3/library/argparse.html#nargs" rel="nofollow">https://docs.python.org/3/library/argparse.html#nargs</a>, subsection <code>nargs='?'</code>.</p>
</div>
<span class="comment-copy">Yes. This is doable.</span>
<span class="comment-copy">Possible duplicate of <a href="http://stackoverflow.com/questions/4480075/argparse-optional-positional-arguments">Argparse optional positional arguments?</a></span>
<span class="comment-copy">This looks like an optional optional argument, not a positional. :)</span>
<span class="comment-copy">Thanks this solved my issue, took me a while to adjust as per code :)</span>
