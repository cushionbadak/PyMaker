<div class="post-text" itemprop="text">
<p>I'm trying to use regex to replace instances of a fraction (specifically 1/2) with the decimal equivalent</p>
<pre><code>string = "7 1/2"
re.sub(r'[1/2]', '.5', string)
</code></pre>
<p>Firstly, I think the above replaces all instances of 1, /, 2 with .5, whereas I'm trying to find and replace the entire term "1/2"</p>
<p>Secondly, how do you handle the leading space before the fraction itself?</p>
</div>
<div class="post-text" itemprop="text">
<p>A general solution should be like below which should use a lambda function in the replacement part of <code>re.sub</code>.</p>
<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; from __future__ import division
&gt;&gt;&gt; s = "7 1/2"
&gt;&gt;&gt; re.sub(r'(\d+)/(\d+)', lambda m: str(int(m.group(1))/int(m.group(2))), s)
'7 0.5'
&gt;&gt;&gt; re.sub(r'(\d+)/(\d+)', lambda m: str(int(m.group(1))/int(m.group(2))), '7 9/2')
'7 4.5'
</code></pre>
<p>Update:</p>
<pre><code>&gt;&gt;&gt; re.sub(r'^(\d+)\s+(\d+)/(\d+)$', lambda m: str(float(int(m.group(1)) + int(m.group(2))/int(m.group(3)))), '7 9/2')
'11.5'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>As an alternative to regex, if you <em>always</em> have a single number per string, and the fractional part is separated from the whole number part by whitespace, you could use the <a href="https://docs.python.org/3/library/fractions.html#module-fractions" rel="nofollow"><code>fractions</code></a> module to perform a conversion:</p>
<pre><code>from fractions import Fraction

for s in '7 1/2', '1 33/66', '22 21/22', '123', '123.45':
    f = sum(Fraction(x) for x in s.split())
    print(float(f))
</code></pre>
<p><strong>Output</strong></p>
<pre>
7.5
1.5
22.9545454545
123.0
123.45
</pre>
</div>
<span class="comment-copy">"I think the above..." Have you tried or is this just speculation?</span>
<span class="comment-copy">instead of <code>[ ]</code> use <code>()</code> to capture the fraction group</span>
<span class="comment-copy">well when I try it on 7 1/2 I get 7 .5.5.5 so I believe its true in that case, just not sure if thats the generalized outcome</span>
<span class="comment-copy">Thanks, how would you add the converted fraction part back to the integer though? "7 1/2" should be "7.5" and "7 9/2" should be "11.5"</span>
<span class="comment-copy">@Simon check my update... BUt you haven't tell about this in your question..</span>
<span class="comment-copy">Nice use of <code>lambda</code></span>
