<div class="post-text" itemprop="text">
<p>I have a directory with a set of files in it. I'm trying to create a folder for each filename inside the existing directory, and name it the given filename. but i'm getting an I/O error permission denied... what is wrong with this code?</p>
<pre><code>import os

path = "C:/Users/CDGarcia/Desktop"

os.chdir(path)

gribs = os.listdir("testgrib")
print gribs

print os.getcwd()

if not os.path.exists(os.path.basename("gribs")):
    os.makedirs(os.path.dirname("gribs"))
with open(path, "w") as f:
    f.write("filename")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/os.path.html#os.path.dirname" rel="nofollow"><code>os.path.dirname()</code></a> does not do what you expect it to do. It returns the directory name for the path you pass to it. So it interprets whatever string you pass as a path. As such, when you pass a path that has no directory part, it returns an empty string:</p>
<pre><code>&gt;&gt;&gt; os.path.dirname("gribs")
''
</code></pre>
<p>So with <code>os.makedirs()</code> you are trying to create an empty directory, which of course will not create the path you are looking for.</p>
<p>Instead, you should just use <code>os.makedirs('gribs')</code> to create <code>gribs</code> folder relative to your current directory.</p>
<hr/>
<p>Furthermore, <code>open(path)</code> will not work when <code>path</code> is the path to the desktop directory. You will have to pass a path to a file there. You probably meant to use a file path relative to the folder you create there:</p>
<pre><code>with open('gribs/something.txt', 'w+') as f:
    f.write('example content')
</code></pre>
</div>
<span class="comment-copy">Can you try executing the code on different path than desktop ?</span>
<span class="comment-copy">no I have not yet, but I can try that. didn't think it would make a difference</span>
<span class="comment-copy">@John's suggestion won' t fix your problem but its a very good idea to debug this script in a temporary directory. Your script has many problems and at some point while you are sorting them out you run the risk that <code>with open(path, "w") as f:</code> will truncate all of the files on your desktop. Don't practice with live ammunition!</span>
<span class="comment-copy">You create a list called <code>gribs</code> but then start processing a string <code>"gribs"</code>. Didn't you want to enumerate the files in <code>gribs</code> and process them? ... after moving to a temp directory of course.</span>
<span class="comment-copy">so I made the changes, but i'm still getting a permissions error..? Will it not work on the desktop?  import os  path = "C:/Users/CDGarcia/Desktop"  os.chdir(path)  gribs = os.listdir("testgrib") print gribs  print os.getcwd()  if not os.path.exists(os.path.basename("gribs")):     os.makedirs('gribs') with open('gribs', 'w+') as f:     f.write('subdata')</span>
<span class="comment-copy">You should include the full error message, otherwise we can only guess.</span>
<span class="comment-copy">sorry.. it says IOError: [Errno 13] Permission denied: 'gribs'</span>
<span class="comment-copy">Youâ€™re still trying to open <code>gribs</code>, the folder.</span>
<span class="comment-copy">So I got the script to work, by appending the output folder names with '.subdata'... When i tried to name the folders with the physical file name, i would get an error saying "the file already exists"... i ended up using the following code (which though isn't what i ultimately wanted to achieve, will work for me):  import os  path = "C:/CHRIS/testfolder/testgrib" gribs = os.listdir(path) grib = gribs  os.chdir(path) print os.getcwd()   for folder in grib:     os.makedirs(os.path.join(path, folder + '.subdata'))</span>
