<div class="post-text" itemprop="text">
<p>The following code just hangs without ever printing anything:</p>
<pre><code>import asyncio

async def foo(loop):
    print('foo')
    loop.stop()

loop = asyncio.new_event_loop()
asyncio.ensure_future(foo(loop))
loop.run_forever()
</code></pre>
<p>If I use <a href="https://docs.python.org/3/library/asyncio-eventloops.html#asyncio.get_event_loop" rel="nofollow">get_event_loop</a> everything works fine. Is there something I'm doing wrong or have I stumbled upon a bug?</p>
<p>I'm using Python 3.5.1.</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/asyncio-eventloops.html#asyncio.AbstractEventLoopPolicy.new_event_loop" rel="noreferrer"><code>asyncio.AbstractEventLoopPolicy.new_event_loop</code> documentation</a> says:</p>
<blockquote>
<p>If there’s need to set this loop as the event loop for the current
  context, <code>set_event_loop()</code> must be called explicitly.</p>
</blockquote>
<hr/>
<pre><code>import asyncio

async def foo(loop):
    print('foo')
    loop.stop()

loop = asyncio.new_event_loop()
asyncio.set_event_loop(loop) # &lt;----
asyncio.ensure_future(foo(loop))
loop.run_forever()
</code></pre>
</div>
<span class="comment-copy"><code>ensure_future()</code> accepts optional <code>loop</code> parameter, you should pass it to don't clash with default one.  Actually I highly recommend to use explicit loops only in asyncio applications.</span>
<span class="comment-copy">Oh my... I just started a bounty on the wrong question instead of mine :-/, if you can help me here: stackoverflow.com/questions/35861175/… I will gladly award you the bounty.</span>
<span class="comment-copy">Ah, I did see that at some point but I forgot to try it. Probably I thought I don't need it since I wasn't quite sure what it meant! Thanks.</span>
<span class="comment-copy">Oh my... I just started a bounty on the wrong question instead of mine :-/, if you can help me here: <a href="http://stackoverflow.com/questions/35861175/what-can-cause-asyncio-to-hang-upon-simply-creating-a-new-loop" title="what can cause asyncio to hang upon simply creating a new loop">stackoverflow.com/questions/35861175/…</a> I will gladly award you the bounty.</span>
