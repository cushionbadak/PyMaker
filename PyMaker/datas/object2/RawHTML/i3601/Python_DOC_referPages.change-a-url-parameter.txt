<div class="post-text" itemprop="text">
<p>How change a parameter's value of url? Without regexps. </p>
<p>Now I try this, but it's long:</p>
<pre><code>from urllib.parse import parse_qs, urlencode,  urlsplit
url = 'http://example.com/?page=1&amp;text=test#section'
param, newvalue = 'page', '2'

url, sharp, frag = url.partition('#')
base, q, query = url.partition('?')
query_dict = parse_qs(query)
query_dict[param][0] = newvalue
query_new = urlencode(query_dict, doseq=True)
url_new = f'{base}{q}{query_new}{sharp}{frag}'
</code></pre>
<p>Also, I tried by urlsplit:</p>
<pre><code>parsed = urlsplit(url)
query_dict = parse_qs(parsed.query)
query_dict[param][0] = newvalue
query_new = urlencode(query_dict, doseq=True)
parsed.query = query_new
url_new = urlencode(parsed)
</code></pre>
<p>But on <code>urlparsed.query = query_new</code> it rise error <code>AttributeError: can't set attribute</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>Tuples are immutable.So you have to replace it .Here _ is meant to avoid conflict with fieldnames <a href="https://docs.python.org/3/library/collections.html#collections.somenamedtuple._replace" rel="nofollow noreferrer">._replace</a></p>
<pre><code>from urllib.parse import parse_qs, urlencode,  urlsplit
url = 'http://example.com/?page=1&amp;text=test#section'
param, newvalue = 'page', '2'
parsed = urlsplit(url)
query_dict = parse_qs(parsed.query)
query_dict[param][0] = newvalue
query_new = urlencode(query_dict, doseq=True)
parsed=parsed._replace(query=query_new)
url_new = (parsed.geturl())
</code></pre>
</div>
<span class="comment-copy">Hi @bl79, can you provide an example url and the results you are trying to achieve?</span>
<span class="comment-copy">Hi, I added an example url. I want change <code>page=1</code> to <code>page=2</code>.</span>
<span class="comment-copy">Try requests <a href="http://docs.python-requests.org/en/master/" rel="nofollow noreferrer">docs.python-requests.org/en/master</a> is pretty simple</span>
