<div class="post-text" itemprop="text">
<p>So I get an a list of list wich contain employees info and I want to write it to database. SQLAlchemy documuntation says its correct by, now but DB is still empty. Database was created properly, how I can now insert data from 
employees_list to database ?</p>
<p>My code </p>
<pre><code>from PyBambooHR import PyBambooHR
import sqlalchemy
from sqlalchemy import Column, Integer, String
from sqlalchemy.ext.declarative import declarative_base
import pprint


Base = declarative_base()


class EmployeeData(Base):

    __tablename__ = 'employee_data'
    id = Column(Integer, primary_key=True)
    name = Column(String(120))
    department = Column(String(120))
    jobTitle = Column(String(120))
    email = Column(String(120))


engine = sqlalchemy.create_engine('sqlite:///employee_db.db')

connection = engine.connect()


Base.metadata.create_all(engine)

bamboo = PyBambooHR(subdomain='company', api_key='key')


employees = bamboo.get_employee_directory()
employees_list = [[item['displayName'], item['department'], item['jobTitle'], item['workEmail']] for item in employees]


employees_list.sort()

connection.execute(employees_list.insert())

connection.close()

pprint.pprint(employees_list)
</code></pre>
<p>causes</p>
<pre><code>Traceback (most recent call last):
  File "...", line 37, in &lt;module&gt;
    connection.execute(employees_list.insert())
TypeError: insert() takes exactly 2 arguments (0 given)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You current problem is that you are using <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists" rel="nofollow noreferrer"><code>list.insert</code></a> method which has nothing to do with <strong>SQLAlchemy</strong>.</p>
<p>If you need to properly insert objects into database using <strong>SQLAlchemy</strong> you can open database <a href="http://docs.sqlalchemy.org/en/latest/orm/session_api.html" rel="nofollow noreferrer"><code>Session</code></a>, create <code>EmployeeData</code> instances, add them to session and commit changes.</p>
<p>To do so we can define <code>EmployeeData</code> initializer as follows</p>
<pre><code>class EmployeeData(Base):
    __tablename__ = 'employee_data'
    id = Column(Integer, primary_key=True)
    name = Column(String(120))
    department = Column(String(120))
    jobTitle = Column(String(120))
    email = Column(String(120))

    def __init__(self, name, department, jobTitle, email):
        self.name = name
        self.department = department
        self.jobTitle = jobTitle
        self.email = email
</code></pre>
<p>Open <code>Session</code></p>
<pre><code>from sqlalchemy.orm import Session, sessionmaker
...
session_factory = sessionmaker(engine)
session = session_factory()
</code></pre>
<p>Create <code>EmployeeData</code> instances</p>
<pre><code>employees_list = [EmployeeData(name=item['displayName'],
                               department=item['department'],
                               jobTitle=item['jobTitle'],
                               email=item['workEmail'])
                  for item in employees]
</code></pre>
<p>Add <code>EmployeeData</code> instances &amp; commit changes</p>
<pre><code>session.add_all(employees_list)
session.commit()
</code></pre>
<h1>Test</h1>
<p>Since I don't have access to <code>Bamboo</code> service I'll imitate response</p>
<pre><code>employees = [{'displayName': 'John Doe',
              'department': 'IT',
              'jobTitle': 'Python Developer',
              'workEmail': 'jdoe@company.com'}]
</code></pre>
<p>Following steps above I got <code>employee_db.db</code> <strong>SQLite</strong> database in my working directory. Let's open it using <strong>SQLite CLI</strong> (from <a href="https://www.sqlite.org/download.html" rel="nofollow noreferrer"><strong>SQLite</strong> tools</a>)</p>
<pre><code>sqlite&gt; .open employee_db.db
sqlite&gt; select * from employee_data;
1|John Doe|IT|Python Developer|jdoe@company.com
</code></pre>
<h1>Further reading</h1>
<ul>
<li><a href="http://docs.sqlalchemy.org/en/latest/orm/session_basics.html#session-basics" rel="nofollow noreferrer">Session basics</a>.</li>
<li><a href="http://docs.sqlalchemy.org/en/latest/orm/session_api.html" rel="nofollow noreferrer">Session API</a>.</li>
</ul>
</div>
<span class="comment-copy">what <code>employees_list.insert()</code> supposed to do?</span>
<span class="comment-copy">You should be seeing some errors, such as <code>TypeError: insert() takes exactly 2 arguments (0 given)</code>.</span>
<span class="comment-copy">@IljaEveril√§ yeah, i get it right now and i dont understand what i need to put here, im new at work with databaases</span>
<span class="comment-copy">@AzatIbrakov it must add all data from employees_list to database</span>
<span class="comment-copy"><code>list.insert</code> method has nothing to do with databases</span>
