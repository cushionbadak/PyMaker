<div class="post-text" itemprop="text">
<p>I'm trying to parse through a massive file for an iTunes library and I'm attempting to use plistlib library, my code looks something like this:   </p>
<pre><code>import plistlib

with open('iTunes Music Library.xml') as fp:
    pl = plistlib.load(fp)

print(pl["aKey"])
</code></pre>
<p>As I do so, I get the error 'TypeError: startswith first arg must be str or a tuple of str, not bytes'.  I'm not sure what this is, any explanations?</p>
</div>
<div class="post-text" itemprop="text">
<p>As stated in the <a href="https://docs.python.org/3/library/plistlib.html" rel="nofollow noreferrer">docs</a>, <code>plistlib.load</code> takes a <strong>binary</strong> file object. You've given it a file opened in text mode.</p>
</div>
<span class="comment-copy">What version of Python, and what version of iTunes?</span>
<span class="comment-copy">@davedwards Only in Python 2. Since the OP is using 3.x-style <code>print</code>s, and it's 2018, he's more likely to be using 3.x.</span>
<span class="comment-copy">@davedwards that is a previous version, it mentions it on a page that it is outdated, and while I run it.</span>
<span class="comment-copy">Okay, good points, thanks.</span>
<span class="comment-copy">As a side note, historically, <code>plistlib</code> has added a lot of overhead over Expat, and also a lot of brittleness, so using it to parse iTunes library files is they're actually massive (as in hundreds of MB) was not really doable; you had to build something on top of, e.g, <code>etree</code> instead. I haven't really tried it with the new 3.4+ <code>plistlib</code> implementation, so maybe everything will work greatâ€¦ but keep your fingers crossed.</span>
<span class="comment-copy">Ah, so fixing it would be me changing what the open with is?</span>
