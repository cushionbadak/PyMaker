<div class="post-text" itemprop="text">
<p>I have .gz file that contains several strings. My requirement is that I have to do several regex based operations in the data that is contained in the .gz file</p>
<p>I get the error when I use a <code>re.findall()</code> in the lines of data extracted</p>
<pre><code>File "C:\Users\santoshn\AppData\Local\Continuum\anaconda3\lib\re.py", line 182, in search
    return _compile(pattern, flags).search(string)

TypeError: cannot use a string pattern on a bytes-like object
</code></pre>
<p>I have tried opening with option "r" with the same result. </p>
<p>Do I have to decompress this file first and then do the regex operations or is there a way to address this ?</p>
<p>Data contains several text lines, an example line is listed below:</p>
<pre><code>ThreadContext 432 mov (8) &lt;8;1,2&gt;r2  &lt;8;3,3&gt;r4 Instruction count
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I was able to fix this issue by reading the file using gzip.open()</p>
<p>with gzip.open(file,"rb") as f:
        binFile = f.readlines()</p>
<p>After this file is read, each line in the file is converted to 'ascii'. Subsequently all regex operations like re.search() and re.findall() work fine.</p>
<p>for line in binFile:  # go over each line
        line = line.strip().decode('ascii')</p>
</div>
<span class="comment-copy">possible duplicate of <a href="https://stackoverflow.com/questions/30478736/cant-use-string-pattern-on-bytes-like-object-pythons-re-error/30478822" title="cant use string pattern on bytes like object pythons re error">stackoverflow.com/questions/30478736/…</a> and <a href="https://stackoverflow.com/questions/31019854/typeerror-cant-use-a-string-pattern-on-a-bytes-like-object-in-re-findall" title="typeerror cant use a string pattern on a bytes like object in re findall">stackoverflow.com/questions/31019854/…</a>. Also you may want to read this: <a href="https://docs.python.org/3/library/gzip.html#gzip.open" rel="nofollow noreferrer">docs.python.org/3/library/gzip.html#gzip.open</a></span>
<span class="comment-copy">The above pointers pertain to HTML files processing. Mine are text files and these options do not work</span>
<span class="comment-copy">HTML <b>is</b> text, and those links <b>are</b> relevant to your question.</span>
