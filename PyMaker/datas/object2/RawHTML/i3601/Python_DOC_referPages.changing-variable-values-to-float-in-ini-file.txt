<div class="post-text" itemprop="text">
<p>I am using an .INI file to pass variables back and forth from Python to software using BASIC, and upon analyzing data, I want to update the values of certain variables.</p>
<p>This is my current code:</p>
<pre><code>import numpy as np

try:
    from configparser import ConfigParser
except ImportError:
    from ConfigParser import ConfigParser

config = ConfigParser()
config.read('ParameterFile.ini')

# read values from a section
GainAff = config.getfloat('Section 1', 'gainaff')
GainVff = config.getfloat('Section 1', 'gainvff')
FeedforwardAdvance = config.getfloat('Section 1', 'feedforwardadvance')
TrajectoryFIRFilter = config.getfloat('Section 1', 'trajectoryfirfilter')
RampRate = config.getfloat('Section 1', 'ramprate')

print 'GainAff = ', GainAff
print 'GainVff = ', GainVff
print 'Feedforward Advance = ', FeedforwardAdvance
print 'Trajectory FIR Filter = ', TrajectoryFIRFilter
print 'Ramp Rate = ', RampRate

new_GainAff = 1.0
new_GainVff = 2.0
new_FeedforwardAdvance = 0.3
new_TrajectoryFIRFilter = 0.5
new_RampRate = 4000

##update existing value
config.set('Section 1', 'GainAff', new_GainAff)
config.set('Section 1', 'GainVff', new_GainVff)
config.set('Section 1', 'FeedforwardAdvance', new_FeedforwardAdvance)
config.set('Section 1', 'TrajectoryFIRFilter', new_TrajectoryFIRFilter)
config.set('Section 1', 'RampRate', new_RampRate)

##save to a file
with open('ParameterUpdate.ini', 'w') as configfile:
    config.write(configfile)
    ## Write some stuff in here
configfile.close()
</code></pre>
<p>However, when I try to set my new variables using <code>config.set</code>, I am told I can't use a <code>float</code> value:</p>
<pre><code>  File "/home/pi/.local/lib/python2.7/site-packages/backports/configparser/__init__.py", line 1221, in _validate_value_types
    raise TypeError("option values must be strings")
TypeError: option values must be strings
</code></pre>
<p>Upon looking this up, I see many people use <code>config.set</code> with floats, and I am unsure about whether it because of the version of python, etc. (I am using Python 2.7.13)</p>
<p>What am I doing wrong?</p>
</div>
<div class="post-text" itemprop="text">
<p>The set function requires a string: <a href="https://docs.python.org/2/library/configparser.html" rel="nofollow noreferrer">https://docs.python.org/2/library/configparser.html</a>
Cast to a string using code like:</p>
<pre><code>config.set('Section 1', 'GainAff', str(new_GainAff))
</code></pre>
<p>From what I read here, this also appears to be the case for python 3: <a href="https://docs.python.org/3/library/configparser.html" rel="nofollow noreferrer">https://docs.python.org/3/library/configparser.html</a></p>
<p>Can confirm that this is also the case for python 3. The following is output from my python 3 interpreter:</p>
<pre><code>&gt;&gt;&gt; config = ConfigParser()
&gt;&gt;&gt;
&gt;&gt;&gt; config.read('b.ini')
['b.ini']
&gt;&gt;&gt; config.set('Section 1', 'GainAff', 1.2)
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "C:\PYTHON34\LIB\configparser.py", line 1165, in set
    self._validate_value_types(option=option, value=value)
  File "C:\PYTHON34\LIB\configparser.py", line 1154, in _validate_value_types
    raise TypeError("option values must be strings")
TypeError: option values must be strings
</code></pre>
</div>
<span class="comment-copy">The <a href="https://docs.python.org/2/library/configparser.html#ConfigParser.RawConfigParser.set" rel="nofollow noreferrer">doc</a> says: While it is possible to use RawConfigParser (or ConfigParser with raw parameters set to true) for internal storage of non-string values, full functionality (including interpolation and output to files) can only be achieved using string values.</span>
