<div class="post-text" itemprop="text">
<p>I would like to ask if there is an easy way to modify JSON by using Python?</p>
<p>I have found some of the relevant topic- <a href="https://stackoverflow.com/questions/13949637/how-to-update-json-file-with-python/13949836">How to update json file with python</a> But could not figure out the solution for my current issue.</p>
<p>Currently, JSON looks like this:</p>
<pre><code>    {
         "X": [
           {
               "sample_topic_x":"sample_content_x_1",
               ...
           }
           {
               "sample_topic_x":"sample_content_x_2",
               ...
           }
           ......
         ]
         "Y": [
           {
               "sample_topic_y":"sample_content_y_1",
               ...
           }
           {
               "sample_topic_y":"sample_content_y_2",
               ...
           }
           ......
         ]
}
</code></pre>
<p>Required: To be accepted by BQ / Need to remove "Y", keep only "X" in this format.</p>
<pre><code>{"sample_topic_x":"sample_content_x_1",.....}
{"sample_topic_x":"sample_content_x_2",.....}
{"sample_topic_x":"sample_content_x_3",.....}
</code></pre>
<p>Any relevant documentation, topics?</p>
<p><strong>P.S&gt; Update 1.0</strong></p>
<pre><code>import json
json_path = 'C:\XXX\exportReport.json'

def updateJsonFile():
jsonFile = open(json_path, "r") # Open the JSON file for reading
data = json.load(jsonFile) # Read the JSON into the buffer
jsonFile.close() # Close the JSON file

updateJsonFile()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><strong>Solution:</strong></p>
<pre><code>import json
json_path = 'C:\XXX\exportReport.json'
output_path = 'C:\XXX\your_output_file.txt'

with open(json_path) as f:
    data = json.loads(f.read())

# Opening output file in append mode
# Note: Output file is not JSON, as the required format is not valid json
with open(output_file, "a+") as op:
    for element in data.get('X'):
        op.write(json.dumps(element) + "\n")
</code></pre>
<p><strong>Explanation:</strong></p>
<p>Load the input json file using <code>json.loads</code>. The output file will be a plain text file and not a JSON file as the required output format is not a valid JSON. Use a <code>.txt</code> file for storing the output. Store value of <code>json.loads()</code> in <strong>data</strong>. To get inner element <strong>X</strong> which is a list of dictionaries, use <code>data.get('X')</code>, which will return list. Iterate over it and write <code>json.dumps()</code> to the output file, each element in a newline.</p>
<p><strong>C:\XXX\exportReport.json</strong></p>
<pre><code>{

    "X": [
       {
           "sample_topic_x":"sample_content_x_1",
           ...
       }
       {
           "sample_topic_x":"sample_content_x_2",
           ...
       }
       ......
     ]
     "Y": [
       {
           "sample_topic_y":"sample_content_y_1",
           ...
       }
       {
           "sample_topic_y":"sample_content_y_2",
           ...
       }
       ......
     ]
}
</code></pre>
<p><strong>C:\XXX\your_output_file.txt</strong></p>
<pre><code>{"sample_topic_x":"sample_content_x_1",.....}
{"sample_topic_x":"sample_content_x_2",.....}
{"sample_topic_x":"sample_content_x_3",.....}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You need extract parent data at first. And definite this to a variable. And search "X" data in this variable. </p>
</div>
<span class="comment-copy">Have a look at the <a href="https://docs.python.org/3/library/json.html" rel="nofollow noreferrer">json</a> module. With loads you could read the json, do your modifications on Python dicts or lists and then write it back using dumps.</span>
<span class="comment-copy">Your required format is not a valid JSON.</span>
<span class="comment-copy">@OmkarDeshpande This file generated by using API, and thus the output of JSON file. I need this specific format, as BigQuery accept only this way (As tested), but this could be not right as well.</span>
<span class="comment-copy"><code>json.load</code> will not work in the required format.</span>
<span class="comment-copy">@OmkarDeshpande What could I do make this happens?</span>
<span class="comment-copy">TypeError: expected string or buffer</span>
<span class="comment-copy">try :      <code>data = json.loads(f.read())</code></span>
<span class="comment-copy">Yes it does )), Solution works, but do you know any documentation with samples which will explain this kind of manipulation with JSON?</span>
<span class="comment-copy">Dictionary manipulation in python: <a href="https://www.tutorialspoint.com/python/python_dictionary.htm" rel="nofollow noreferrer">tutorialspoint.com/python/python_dictionary.htm</a></span>
<span class="comment-copy">Thank you for your time and help.</span>
<span class="comment-copy">I understand the logic how this could be done, but do you know the documentation about JSON structure modification with Python? As I could not find any relevant source to modify structure, but alot about change the content.</span>
