<div class="post-text" itemprop="text">
<p>I have a txt file. And this file's content is a byte type, like this</p>
<pre><code>b'&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;\r\n&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;\r\n&lt;head&gt;\r\n&lt;meta http-equiv="Content-Type" content="text/html; charset=gb2312" /&gt;\r\n&lt;!--&lt;META http-equiv=Page-Enter content=blendTrans(Duration=0.5)&gt;\r\n&lt;META http-equiv=Page-Exit content=blendTrans(Duration=0.5)&gt; --&gt;\r\n&lt;title&gt;\xba...'
</code></pre>
<p>How can I translate it into </p>
<pre><code>value = b'...'  # txt file content
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/ast.html#ast.literal_eval" rel="nofollow noreferrer"><code>ast.literal_eval()</code></a> to evaluate the bytes literal:</p>
<pre><code>bytesobject = ast.literal_eval(filecontents)
</code></pre>
<p>Demo:</p>
<pre><code>&gt;&gt;&gt; import ast
&gt;&gt;&gt; foo = "b'bytes value as a literal'"
&gt;&gt;&gt; type(foo)
&lt;class 'str'&gt;
&gt;&gt;&gt; ast.literal_eval(foo)
b'bytes value as a literal'
&gt;&gt;&gt; type(ast.literal_eval(foo))
&lt;class 'bytes'&gt;
</code></pre>
<p>However, it would be much better if you could just fix the source of the error, which is the code that created that file in the first place. Presumably that code used <code>str()</code> on a bytes value to write the data to a text file, where it should instead have opened a file in binary mode.</p>
</div>
<span class="comment-copy">You can't fix the code that created the file in the first place? Something wrote <code>str(bytesobject)</code> to a file instead of opening it in binary mode.</span>
<span class="comment-copy">is this your exact file content (including backquotes and <code>b'</code>) or what?</span>
