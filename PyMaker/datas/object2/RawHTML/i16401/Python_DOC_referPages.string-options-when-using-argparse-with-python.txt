<div class="post-text" itemprop="text">
<p>I'm not quite understanding the following behavior of argparse</p>
<pre><code>parser.add_argument("-option1", type=int, nargs='?', const=1, default=1, choices=xrange(1, 20), help="help message of option1")
parser.add_argument("-option2", type=str, nargs=1, help="help message of option2")
</code></pre>
<p>in case of option1, args.option1 is an integer, when provided.
in case of option2, args.option2 looks like an array of strings. I have to use args.option2[0] if I want to get the actual string passed with option2</p>
</div>
<div class="post-text" itemprop="text">
<p>This is explained directly in the documentation on <a href="https://docs.python.org/3/library/argparse.html#nargs" rel="nofollow"><code>nargs</code></a>. Summarizing:</p>
<p>For <code>nargs=N</code>, if <code>N</code> is an integer, you get a list of <code>N</code> values. Even if <code>N</code> is <code>1</code>.</p>
<p>For <code>nargs='?'</code>, you get a single value (which may be the default).</p>
<p>For <code>nargs</code> left off entirely, you get whatever the default is for the action. If the action is, e.g., <code>store</code>, that means a single value, not a list of one value.</p>
<p>It even explicitly points out exactly the part that's surprised you:</p>
<blockquote>
<p>Note that nargs=1 produces a list of one item. This is different from the default, in which the item is produced by itself.</p>
</blockquote>
</div>
<span class="comment-copy">@hpaulj: Thanks for the fix!</span>
