<div class="post-text" itemprop="text">
<p>I have built an email client in python with tkinter, a similar yet more symplistic version of outlook/thunderball. The reason I actually built it was for my A level computing project, my title will be to "model how the SMTP / IMAP protocols work". So when I log into the mail server for reciving email / sending, is there a way to print out what is going on behind the scenes? Hope this makes sense....</p>
<p>To explain further, when you do len('Harry') I would want to print out what the len function is doing. Except in email protocol terms.</p>
<p>Advice/help/examples would be greatly appreciated.</p>
</div>
<div class="post-text" itemprop="text">
<p>Assuming you're using the stdlib <a href="https://docs.python.org/3/library/imaplib.html" rel="nofollow"><code>imaplib</code></a> and <a href="https://docs.python.org/3/library/smtplib.html" rel="nofollow"><code>smtplib</code></a> to do the heavy lifting for you, this functionality is built in. See <a href="https://docs.python.org/3/library/imaplib.html#imaplib.IMAP4.debug" rel="nofollow"><code>imaplib.Debug</code>/<code>imaplib.IMAP4.debug</code></a> and <a href="https://docs.python.org/3/library/smtplib.html#smtplib.SMTP.set_debuglevel" rel="nofollow"><code>smtplib.SMTP.set_debuglevel</code></a>.</p>
<p>If you don't like the format they're using or what they're printing, you can always subclass and hook the methods. For example, in <code>smtplib.SMTP</code>, all protocol commands being sent or received happens in <code>connect</code>, <code>send</code>, and <code>getreply</code>. So:</p>
<pre><code>class MySMTP(smtplib.SMTP):
    def connect(self, host='localhost', port=0, source_address=None):
        print('-- connecting to {}:{} from {} --'.format(host, port, source_address))
        return super().connect(host, port, source_address)
    def send(self, s):
        print('&gt; {}'.format(s))
        return super().send(s)
    def getreply(self):
        code, s = super().getreply()
        print('&lt; ({}) {}'.format(code, s))
        return code, s
</code></pre>
<p>If even that isn't good enough then, like many libraries in the stdlib, these two are meant to serve as sample code, as well as to be usable out of the box. Such libraries will always have a link to the source at the top of their documentation. So, you can either make your own fork with a copy of the source, or override selected methods, and replace any of the statements that begin <code>if self.debug</code> (<code>imaplib</code>) or <code>if self.debuglevel</code> (<code>smtplib</code>) to do what you'd rather do instead.</p>
<hr/>
<p>If you've built your own lower-level code, it's just a matter of adding a <code>print</code> statement in whatever functions you've written to send commands and dispatch received commands, akin to the <code>send</code> and <code>getreply</code> methods from <code>smtplib.SMTP</code>. (If you don't have such functions, and instead are repeating all the low-level network logic in a zillion places, first refactor your code to remove all that copypasta, then add the print statements in the refactored functions.)</p>
<hr/>
<p>If you're using some third-party library, you'll have to tell us which one before anyone can tell you how to hook it (or whether you even need to hook it; it might have the same built-in debug logging).</p>
</div>
<span class="comment-copy">Are you using the stdlib <code>imaplib</code> and <code>smtplib</code> modules, some third-party library, or your own code?</span>
<span class="comment-copy">This is extremely vague and unclear what the specific issue you're having is. To where are you printing? How is it not working? What's the code you're trying? Flagged as <i>unclear what you're asking</i>.</span>
