<div class="post-text" itemprop="text">
<p>I have a list of user <code>user_list=["5c471d607f","5c63e9e46a","5c63e9e44e"]</code> I am trying to insert it into mongodb to insert it inro mongodb my code is:</p>
<pre><code>for i in range(0,len(user_list)):
    collection_4.update_one({'user_id':ObjectId(user_list[i])},{'$set':{'products': temp_list }},upsert=True)

This is giving me error, TypeError: list indices must be integers or slices, not ObjectId
</code></pre>
<p>While i am able to insert it when i tried:</p>
<pre><code>collection_4.update_one({'user_id':ObjectId("5c471d607f")},{'$set':{'products': temp_list }},upsert=True)
</code></pre>
<p>What is the problem with my code ?</p>
</div>
<div class="post-text" itemprop="text">
<p>You must have another error in your script somewhere. I can reproduce your error by doing the following:</p>
<pre><code>from bson import ObjectId
l = ['a', 'b', 'c']
l[ObjectId('5c91ec870000000000000000')]
</code></pre>
<p>gives:</p>
<pre><code>TypeError: list indices must be integers or slices, not ObjectId
</code></pre>
<p>Are you sure you're not attempting to slice a list anywhere using an <code>ObjectId</code>, rather than using an index?</p>
<p>You might need to print more code because your current example seems to be ok.</p>
<p>One other improvement that @DirtyBit picked up, you can use <code>enumerate</code> to iterate over a list whilst tracking the index:</p>
<pre><code>for i, item in enumerate(user_list):
    collection_4.update_one({'user_id':ObjectId(item)},{'$set':{'products': temp_list }},upsert=True)
</code></pre>
<p>But then again, you don't require the index, so you could also just do:</p>
<pre><code>for item in user_list:
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>try this</p>
<pre><code>for i in range(0,len(user_list)):
    myid = user_list[i]
    collection_4.update_one({'user_id':str(myid)},{'$set':{'products': temp_list }},upsert=True)
</code></pre>
</div>
<span class="comment-copy">Try: <code>collection_4.update_one({'user_id':ObjectId(str(user_list[i]))},{'$set':{'products': temp_list }},upsert=True)</code></span>
<span class="comment-copy">Still same error</span>
<span class="comment-copy">You have a typo in your <code>user_list</code> a missing <code>"</code> from the last element</span>
<span class="comment-copy">This: <code>for index, item in enumerate(user_list):     collection_4.update_one({'user_id': ObjectId(index)}, {'$set': {'products': temp_list}}, upsert=True)</code> ?</span>
<span class="comment-copy">I have edited the typo in my question but in my actual list there is nothing wrong i check the type of each element in user_list and all of them are str only</span>
<span class="comment-copy">I already tried this still same error</span>
<span class="comment-copy">updated the solution try it</span>
<span class="comment-copy">Still same error</span>
<span class="comment-copy">how can the same error occurs if there is no ObjectId in for loop ?</span>
