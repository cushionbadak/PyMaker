<div class="post-text" itemprop="text">
<p>I am using ElementTree to build an XML file.</p>
<p>When I try to set an element's attribute with <code>ET.SubElement().__setattr__()</code>, I get the error <code>AttributeError: __setattr__</code>.</p>
<pre class="lang-python prettyprint-override"><code>import xml.etree.cElementTree as ET
summary = open(Summary.xml, 'w')
root = ET.Element('Summary')
ET.SubElement(root, 'TextSummary')
ET.SubElement(root,'TextSummary').__setattr__('Status','Completed') # Error occurs here
tree = ET.ElementTree(root) 
tree.write(summary)
summary.close()
</code></pre>
<p>After code execution, my XML should resemble the following:</p>
<pre class="lang-xml prettyprint-override"><code>&lt;Summary&gt;
    &lt;TextSummary Status = 'Completed'/&gt;
&lt;/Summary&gt;
</code></pre>
<p>How do I add attributes to an XML element with Python using <code>xml.etree.cElementTree</code>?</p>
</div>
<div class="post-text" itemprop="text">
<p>You should be doing: </p>
<pre><code>ET.SubElement(root,'TextSummary').set('Status','Completed')
</code></pre>
<p>The <a href="http://docs.python.org/2/library/xml.etree.elementtree.html#modifying-an-xml-file">Etree documentation shows usage</a>.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can specify attributes for an <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" rel="nofollow noreferrer"><code>Element</code></a> or <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.SubElement" rel="nofollow noreferrer"><code>SubElement</code></a> during creation with keyword arguments.</p>
<pre><code>import xml.etree.ElementTree as ET

root = ET.Element('Summary')
ET.SubElement(root, 'TextSummary', Status='Completed')
</code></pre>
<p>XML:</p>
<pre class="lang-xml prettyprint-override"><code>&lt;Summary&gt;
    &lt;TextSummary Status="Completed"/&gt;
&lt;/Summary&gt;
</code></pre>
<hr/>
<p>Alternatively, you can use <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.set" rel="nofollow noreferrer"><code>.set</code></a> to add attributes to an existing element after creation.</p>
<pre><code>import xml.etree.ElementTree as ET

root = ET.Element('Summary')
sub = ET.SubElement(root, 'TextSummary')
sub.set('Status', 'Completed')
</code></pre>
<p>XML:</p>
<pre class="lang-xml prettyprint-override"><code>&lt;Summary&gt;
    &lt;TextSummary Status="Completed"/&gt;
&lt;/Summary&gt;
</code></pre>
<hr/>
<p><strong>Technical Explanation:</strong></p>
<p>The constructors for <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" rel="nofollow noreferrer"><code>Element</code></a> and <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.SubElement" rel="nofollow noreferrer"><code>SubElement</code></a> include <code>**extra</code>, which accepts attributes as keyword arguments.</p>
<pre><code>xml.etree.ElementTree.Element(tag, attrib={}, **extra)
xml.etree.ElementTree.SubElement(parent, tag, attrib={}, **extra)
</code></pre>
<p>This allows you to add an arbitrary number of attributes.</p>
<pre><code>root = ET.Element('Summary', Date='2018/07/02', Timestamp='11:44am')
# &lt;Summary Date = "2018/07/02" Timestamp = "11:44am"&gt;
</code></pre>
<p>You can also use use <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.set" rel="nofollow noreferrer"><code>.set</code></a> to add attributes to a pre-existing element. However, this can only add one element at a time. (<a href="https://stackoverflow.com/a/18796341/3357935">As suggested by Thomas Orozco</a>).</p>
<pre><code>root = ET.Element('Summary')
root.set('Date', '2018/07/02')
root.set('Timestamp', '11:44am')
# &lt;Summary Date = "2018/07/02" Timestamp = "11:44am"&gt;
</code></pre>
<hr/>
<p><strong>Full Example:</strong></p>
<pre><code>import xml.etree.ElementTree as ET

root = ET.Element('school', name='Willow Creek High')
ET.SubElement(root, 'student', name='Jane Doe', grade='9')
print(ET.tostring(root).decode())
# &lt;school name="Willow Creek High"&gt;&lt;student grade="9" name="Jane Doe" /&gt;&lt;/school&gt;
</code></pre>
</div>
<span class="comment-copy">Is there a way to set attributes for a root element?</span>
<span class="comment-copy">@StevenVascellaro Yes: just do <code>root.set('foo', 'bar')</code>.</span>
<span class="comment-copy">It turns out you can <a href="https://stackoverflow.com/a/48668871/3357935">specify attributes as part of the constructor</a>.</span>
