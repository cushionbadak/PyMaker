<div class="post-text" itemprop="text">
<p>I use the following code to read a csv file</p>
<pre><code>f = csv.reader(open(filename, 'rb'))
</code></pre>
<p>Then there's no way I can close <code>filename</code>, right? Is there any harm of doing so or is there a better way of reading it?</p>
</div>
<div class="post-text" itemprop="text">
<p>There is, use <a href="http://docs.python.org/3/reference/datamodel.html#context-managers" rel="nofollow noreferrer">context managers</a>:</p>
<pre><code>with open(filename, 'rb') as handle: 
    f = csv.reader(handle)
</code></pre>
<p>In general an open unused file descriptor is a resource leak and should be avoided.</p>
<hr/>
<p>Interestingly in the case of files, at least the file descriptor is released, as soon as there is no reference to the file any more (see also <a href="https://stackoverflow.com/a/1373672/89391">this answer</a>):</p>
<pre><code>#!/usr/bin/env python

import gc
import os
import subprocess

# GC thresholds (http://docs.python.org/3/library/gc.html#gc.set_threshold)
print "Garbage collection thresholds: {}".format(gc.get_threshold())

if __name__ == '__main__':

    pid = os.getpid()

    print('------- No file descriptor ...')    
    subprocess.call(['lsof -p %s' % pid], shell=True)

    x = open('/tmp/test', 'w')
    print('------- Reference to a file ...')
    subprocess.call(['lsof -p %s' % pid], shell=True)

    x = 2
    print('------- FD is freed automatically w/o GC')
    subprocess.call(['lsof -p %s' % pid], shell=True)
</code></pre>
</div>
<span class="comment-copy">Yes, there is some harm: your file can be kept open, so spending system resources and maybe locking this file from access.</span>
