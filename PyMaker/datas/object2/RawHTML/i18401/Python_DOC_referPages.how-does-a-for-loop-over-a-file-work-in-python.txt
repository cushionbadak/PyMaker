<div class="post-text" itemprop="text">
<p>I have this piece of code</p>
<pre><code>f = open('textfile.txt', 'r')
for line in f:
    print line
</code></pre>
<p>lets just say the textfile.txt is something like this</p>
<pre><code>1
2
3
4
5
</code></pre>
<p>How does this work? How does it know where it is in the file? I understand that it is printing over and over but why doesn't it just print the whole file over and over. I don't see how f is a range. I also assume it knows to stop at EOF?</p>
</div>
<div class="post-text" itemprop="text">
<p>Calling <code>open()</code> returns a file object - i.e. <code>f</code> is a file object.
File objects are their own iterators, implementing the <code>next()</code> method, allowing them to be used in <code>for</code> loops as per your example. And yes, the iterator implementation knows to stop at EOF.
Have a look at the description here, under the <code>file.next()</code> method details:
<a href="http://docs.python.org/2/library/stdtypes.html#bltin-file-objects" rel="noreferrer">http://docs.python.org/2/library/stdtypes.html#bltin-file-objects</a></p>
</div>
<span class="comment-copy">Files are <a href="http://docs.python.org/3/library/stdtypes.html#iterator-types" rel="nofollow noreferrer">iterators.</a> @close-voters: those are some seriously weak/wrong close reasons.</span>
<span class="comment-copy">You might find this edifying: <a href="http://effbot.org/zone/python-for-statement.htm" rel="nofollow noreferrer">effbot.org/zone/python-for-statement.htm</a>.</span>
<span class="comment-copy">Do C and other languages do this the same way? Do they have hidden functions being called when running a loop with fgets() or something similar. Or is this something only some languages do? It just seems weird to have stuff going on that isn't specified.</span>
<span class="comment-copy">Different languages will have different implementations, but there are really only 2 basic principles at work here - treating a file as a collection of lines; and looping/iteration. Looping is generally a primitive operation in most languages, while iteration is a state-machine construct that simplifies looping over collections. Treating a file as a collection of lines is a nice conceptual construct that then ties in with iteration to give you the ability to <code>for</code> through a file.</span>
