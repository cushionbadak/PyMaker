<div class="post-text" itemprop="text">
<h1>Question</h1>
<p>What is a good way to handle a file that has been uploaded through a WSGI <code>POST</code> request?</p>
<h1>More info</h1>
<p>So far, I'm able to read the raw <code>POST</code> data from <code>environ[wsgi.input]</code>. At this point the issue I am having is that the information associated with the file and the file itself are jammned together into one string:</p>
<pre>
'------WebKitFormBoundarymzmB1wyHKjyqZrDm
Content-Disposition: form-data; name="file"; filename="new file.wav"
Content-Type: audio/wav

THIS IS THE CONTENT
THIS IS THE CONTENT
THIS IS THE CONTENT
THIS IS THE CONTENT
THIS IS THE CONTENT

------WebKitFormBoundarymzmB1wyHKjyqZrDm--
'
</pre>
<p>Is there a library in python I should be using to handle information more cleanly? Ultimately, I'd like to take the file contents and then turn around and upload to Amazon S3.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/cgi.html#higher-level-interface" rel="nofollow"><code>cgi.FieldStorage</code></a>.</p>
<pre><code>import cgi
form = cgi.FieldStorage(fp=environ['wsgi.input'], environ=environ)
f = form['file'].file
# You can use `f` as a file object: f.read(...)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Usually you want much more abstraction than raw WSGI. Consider <a href="http://wsgi.readthedocs.org/en/latest/frameworks.html" rel="nofollow">frameworks that run on WSGI</a>.</p>
</div>
