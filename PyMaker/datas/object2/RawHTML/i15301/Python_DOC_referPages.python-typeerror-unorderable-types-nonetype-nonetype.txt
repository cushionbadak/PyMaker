<div class="post-text" itemprop="text">
<p>Using <a href="https://python-iptools.readthedocs.org/en/latest/" rel="nofollow">IPtools</a> python package I am trying to see if an ip address is in a specific range or not. Here is my code:</p>
<pre><code>for line in g:
    org= line.split("|")[0]
    ranges = ast.literal_eval(line.split('|')[1])
    for range in ranges:
        start,end = range
        range_s = IpRange(start,end)
        if '198.0.184.126' in range_s is True:
        print (range_s)
</code></pre>
<p>and here is how my file looks like:</p>
<pre><code>FOP Michail Mandryk |[('91.195.172.0', '91.195.173.255'), ('195.95.222.0', '195.95.223.255')]
Circle 3 Inc.|[('66.64.129.28', '66.64.129.31'), ('216.23.64.120', '216.23.64.120'), ('216.215.250.46', '216.215.250.47')]
a1web.com.br|[('50.116.92.89', '50.116.92.89')]
Shandong Dezhou decheng district government|[('61.133.124.64', '61.133.124.79')]
Global ICT Solutions (ShangHai) CO.,LTD|[('43.247.100.0', '43.247.103.255')]
VendorCert|[('173.1.96.112', '173.1.96.127')]
Lowell City Library|[('198.0.184.112', '198.0.184.127')]
abc|[('123.0.0.0/8' , '12.12.3.0/8')]
</code></pre>
<p>I am getting this error, which I cannot find why. can anybody help?</p>
<pre><code>TypeError                                 Traceback (most recent call last)
&lt;ipython-input-59-420def563a4e&gt; in &lt;module&gt;()
     19 
     20 #         print (start,end)
---&gt; 21         range_s = IpRange(start,end)
     22 #         if '198.0.184.126' in range_s is True:
     23         print (range_s)

/opt/miniconda3/lib/python3.4/site-packages/iptools/__init__.py in __init__(self, start, end)
    158         start = _address2long(start)
    159         end = _address2long(end)
--&gt; 160         self.startIp = min(start, end)
    161         self.endIp = max(start, end)
    162         self._len = self.endIp - self.startIp + 1

TypeError: unorderable types: NoneType() &lt; NoneType()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The <a href="https://github.com/bd808/python-iptools/blob/master/iptools/__init__.py#L59-L66" rel="nofollow"><code>iptools._address2long()</code> function</a> returns <code>None</code> if it cannot parse a valid IPv4 or IPv6 address.</p>
<p>Both your <code>start</code> and <code>end</code> addresses failed to parse as such, and the <code>min()</code> function on two <code>None</code> values then fails with the exception you got:</p>
<pre><code>&gt;&gt;&gt; min(None, None)
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: unorderable types: NoneType() &lt; NoneType()
</code></pre>
<p>Triple-check the addresses you pass in to make sure they are valid. You could catch this exception to print out the values that cause the problem, for example:</p>
<pre><code>try:
    range_s = IpRange(start,end)
except TypeError:
    print('Problematic addresses:', start, end)
    raise
</code></pre>
<p>on a side note, you do <em>not</em> need to test for <code>is True</code> in an <code>if</code> statement. That is what <code>if</code> is <em>for</em>. With comparison chaining the statement doesn't mean what you think it means in any case. Strictly use:</p>
<pre><code>if '198.0.184.126' in range_s:
    print (range_s)
</code></pre>
<p>When using <code>is True</code> you are really testing <code>('198.0.184.126' in range_s) and (range_s is True)</code>, which will <em>never</em> be true.</p>
</div>
<span class="comment-copy">Why are you using <code>iptools</code> when Python 3.4 has a <a href="https://docs.python.org/3/library/ipaddress.html" rel="nofollow noreferrer"><code>ipaddress</code> library</a> included?</span>
<span class="comment-copy">@Martijn Pieters yeah but ipaddress library does not provide this feature I think</span>
<span class="comment-copy">I cannot reproduce your issue with the samples given however.</span>
<span class="comment-copy">Why what? Not being able to reproduce the issue or why I asked about using the <code>iptools</code> library?</span>
<span class="comment-copy">I think the addresses are valid but the ranges maybe not equal to the standard ip prefix ranges. Is that possible? Because with ipaddress package from Python 3 for some of the ranges I extract more than one prefix</span>
<span class="comment-copy">@Mee: The documentation on <code>iptools.ipv4.ip2long</code> suggests it'll return <code>None</code> for addresses outside the valid range; <code>127.0.0.256</code> would be invalid for example. You could use that function directly to test your <code>start</code> and <code>end</code> values.</span>
<span class="comment-copy">Thanks . Indeed there was a weird character somewhere in the middle of my file.</span>
