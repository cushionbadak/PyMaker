<div class="post-text" itemprop="text">
<p>I'm trying to call </p>
<pre><code>espeak -ves -s130 'HEY' --stdout | aplay -D 'sysdefault'
</code></pre>
<p>through subprocess.Popen, with</p>
<pre><code>espeak_process = Popen(["espeak", "-ves -s100 'HEY' --stdout"], stdout=subprocess.PIPE)
aplay_process = Popen(["aplay", "-D 'sysdefault'"], stdin=espeak_process.stdout, stdout=subprocess.PIPE)
</code></pre>
<p>But it doesn't work</p>
<pre><code>ALSA lib pcm.c:2217:(snd_pcm_open_noupdate) Unknown PCM  'sysdefault'
aplay: main:682: audio open error: No such file or directory
</code></pre>
<p>Any idea how to implement this?
Thx</p>
</div>
<div class="post-text" itemprop="text">
<p>Your example is the equivalent of typing this in the shell:</p>
<pre><code>$ espeak '-ves -s100 \'HEY\' --stdout'
$ aplay '-D \'sysdefault\''
</code></pre>
<p>Which is obviously wrong. Each list entry is one argument (argv entry) passed to the executable, no escaping/quoting needed on your side. So you want to use:</p>
<pre><code>["aplay", "-D", "sysdefault"]
["espeak", "-ves", "-s100", "HEY", "--stdout"],
</code></pre>
<p>Also see <a href="https://docs.python.org/3/library/subprocess.html#frequently-used-arguments" rel="nofollow">the documentation</a> (emphasis mine):</p>
<blockquote>
<p>args is required for all calls and should be a string, or a sequence of program arguments. <strong>Providing a sequence of arguments is generally preferred, as it allows the module to take care of any required escaping and quoting of arguments (e.g. to permit spaces in file names)</strong>. If passing a single string, either shell must be True (see below) or else the string must simply name the program to be executed without specifying any arguments.</p>
</blockquote>
</div>
<span class="comment-copy">Yes, it works like a charm, BIG THANKS :) *If you answer as a question I'll marked that as the solution</span>
