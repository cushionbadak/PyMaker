<div class="post-text" itemprop="text">
<p>When I am running django test cases using <code>python manage.py test</code> I wnat to send an email if test cases completed successfully</p>
<p>As it returns 0 if success and 1 if failure, where I can get this 0 and 1 in my python script ?</p>
<p>I have tried using shell script then it works perfectly </p>
<pre><code>#!/bin/bash
TEST_RESULT=`python manage.py test`
rc=$?;
if [[ $rc -eq 0 ]]
then
    echo "Tests Passed Successfully"
else
    echo "Tests failed"
fi
</code></pre>
<p>Now I want this in python script. help me in this.
Thanks</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>import subprocess
ret = subprocess.call(['python', 'manage.py', 'test'])
if ret == 0:
    print("Tests Passed Successfully")
else:
    print("Tests failed")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You could simply write another Python script to generate and send the email(s).</p>
<pre><code>#!/bin/bash
TEST_RESULT=`python manage.py test`
rc=$?;
if [[ $rc -eq 0 ]]
then
    python sendemail.py Success
else
    python sendemail.py Failure
fi
</code></pre>
<p>See the <code>email</code> documentation: <a href="https://docs.python.org/3/library/email-examples.html" rel="nofollow">https://docs.python.org/3/library/email-examples.html</a></p>
</div>
<span class="comment-copy">Where is the email part in your script?</span>
<span class="comment-copy">Yes, like this I have tried with Popen, Thank you.</span>
<span class="comment-copy">@user3513758 If this answer has solved your problem, please consider <a href="http://stackoverflow.com/help/accepted-answer">accepting it</a>.</span>
<span class="comment-copy">Yes I know this, but I want to get this in python script I don't want to run .sh file.</span>
<span class="comment-copy">Since I don't know what the contents of your <code>manage.py</code> look like, I'd say that the answer given by @nwk is your best bet if you want to run a Python file rather than a bash script (though the overall effect is the same).</span>
<span class="comment-copy">Oh I didn't see the above answer, yes you are write , Thank you</span>
