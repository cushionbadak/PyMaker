<div class="post-text" itemprop="text">
<p>I am calling a python script using <code>PythonShell</code> through this code :</p>
<pre><code>let python_options = {
    mode: "text",
    pythonPath: "python",
    scriptPath:"./python/",
    args: ["-fil '"+file_path+"'"]
};
let pyshell = new PythonShell.PythonShell('my_script.py',python_options);
pyshell.on('message', function(message) {
    console.log(message);
});
pyshell.end( function(err,code,signal) {
    if (err) console.log("Error %j", err);
    console.log('The exit code was: ' + code);
    console.log('The exit signal was: ' + signal);

    // console.log("results: %j", results);
    res.send(code);
});
</code></pre>
<p>then within my Python script I do </p>
<pre><code>import argparse
parser = argparse.ArgumentParser(formatter_class=argparse.RawTextHelpFormatter)
parser.add_argument("-fil", '--file', required=False, default=None)
</code></pre>
<p>The error message I'm getting when calling the script is </p>
<pre><code>my_script.py: error: unrecognized arguments: -fil 'path_to_the_file'
</code></pre>
<p>My issue is that the shell passes <code>"-fil path_to_the_file"</code> to the CLI, which gets interpreted as one argument by <code>argparse</code>, instead of <code>-fil path_to_the_file</code> which would be correctly interpreted by <code>argparse</code>. </p>
<p>How can I remove the quotes in <code>PythonShell</code> ?</p>
</div>
<div class="post-text" itemprop="text">
<p>In case it can help anyone, the solution is to do :</p>
<pre><code>let python_options = {
    mode: "text",
    pythonPath: "python",
    scriptPath:"./python/",
    args: ["-fil",file_path] // instead of args: ["-fil '"+file_path+"'"]
};
</code></pre>
</div>
<span class="comment-copy">have you tried passing it a list with multiple args instead of a list with a string representing all the args? e.g. args: ["-fil", file_path]</span>
<span class="comment-copy">I'm getting the same error unfortunately. When I try myself in the CLI it works even with the quotes though so I'm less confident in my diagnostic now...</span>
<span class="comment-copy"><code>"-fil " "paht_to_the_file"</code> works in the CLI in case my comment above was unclear. But the PythonShell call still fails with the same error message.</span>
<span class="comment-copy">try --file instead of fil, let me know what happens, I think your python code is the one that is wrong. Are you sure if you say python my_script.py "-fil " "paht_to_the_file" works? Python should not understand an arg with quotes AFAIK it will take it as a postional arg not as a keyword</span>
<span class="comment-copy">I actually modified my code after I asked the question to remove the shortcuts from the <code>argparse</code> instance. So I'm calling it with <code>--file</code> already and yes it works in the CLI only. pyhton 3.7 on windows</span>
