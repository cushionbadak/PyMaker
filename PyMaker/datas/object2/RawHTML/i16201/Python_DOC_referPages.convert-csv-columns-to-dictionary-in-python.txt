<div class="post-text" itemprop="text">
<p>I have a csv file with the following data. </p>
<pre><code>Column-1 Column-2 Column-3
bob      sweet    4
alice    uber     4.5
bob      uber     4
alice    sweet    4.5
razi     fav      2.5
razi     uber     3.5
bob      fav      4
</code></pre>
<p>I want to convert it to a dictionary as shown,</p>
<pre><code>   A={'bob':{'sweet':'4', 'uber':'4', 'fav':'4'}, 
      'alice':{'uber':'4.5', 'sweet':'4.5'}, 
      'razi':{'fav':'2.5', 'uber':'3.5'}}
</code></pre>
<p>in python</p>
<p>For that i am willing to do like this..convert the csv to list like this and then get my output. I am unable to do so, coz keys are repeated as shown.</p>
<pre><code>   A={'bob':['sweet','4'], 
      'alice':['uber','4.5'], 
      'bob':['uber','4'], 
      'alice':['sweet','4.5'], 
      'razi':['fav','2.5'], 
      'razi':['uber','3.5'], 
      'bob':['fav','4']}
</code></pre>
<p>Can any one suggest a way to solve problem?</p>
</div>
<div class="post-text" itemprop="text">
<p><em>Assuming</em> you don't have any space in your datas, and all your actual data rows have exactly 3 fields:</p>
<pre><code>import logging
logging.basicConfig(level=logging.INFO) # &lt;- in a real application,
                                           # should be set application-wide
                                           # from a config file

logger = logging.getLogger("CSV import")

result = {}
nlines = 0
ok = 0
warnings = 0
with open("my_file.csv") as f:
    f.readline() # Skip header. Assuming only one line of heading

    for row in (line.split() for line in f):
        nlines += 1
        try:
            k1,k2, val = row
            result.setdefault(k1,{})[k2] = val
            ok += 1
        except ValueError:
            logger.warning("Format mismatch: %s", row)
            warnings += 1
            # what to do next?

logger.info("%d lines read. %d imported. %d warnings",nlines,ok,warnings)

from pprint import pprint
pprint(result)
</code></pre>
<p>Given your sample data file, this produces:</p>
<pre><code>INFO:CSV import:7 lines read. 7 imported. 0 warnings
{'alice': {'sweet': '4.5', 'uber': '4.5'},
 'bob': {'fav': '4', 'sweet': '4', 'uber': '4'},
 'razi': {'fav': '2.5', 'uber': '3.5'}}
</code></pre>
<p>The <em>trick</em> here is to use <a href="https://docs.python.org/2/library/stdtypes.html#dict.setdefault" rel="nofollow"><code>setdefault</code></a> to access to outer dictionary. It will either return the value if the key was already present -- or a new dictionary if this is the first time we encounter that key. After that, this is simply a matter of adding the value to the inner dictionary as usual.</p>
</div>
<span class="comment-copy">you definitely don't have your input as you have posted, you cannot have duplicate keys</span>
<span class="comment-copy">no padriac, my data has many such values. Its possible.</span>
<span class="comment-copy">copy/paste your first example and print it in a shell</span>
<span class="comment-copy">One min..i will post my exact problem..</span>
<span class="comment-copy">Maybe are you using some kind of <a href="http://werkzeug.pocoo.org/docs/0.9/datastructures/" rel="nofollow noreferrer">mutlidict</a> ? This is <i>not</i> part of core Python though; and the syntax does not match.</span>
<span class="comment-copy">I was just about to post something but using a <code>defaultdict</code>, which made the few lines a bit more concise.</span>
<span class="comment-copy">@exhuma I was a big user of <code>defaultdict</code> myself. But now, I prefer using <code>setdefault</code> instead when you only needs default <i>during the construction</i> of the dictionary. That prevents the default value to pop out unexpected later in the program.</span>
<span class="comment-copy">That's a very good point!</span>
<span class="comment-copy">@user3905334 That's your filename. See <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer">the official docs of <code>open</code></a>.</span>
<span class="comment-copy">@user3905334 To be blunt: Given your question (verbatim), Sylvain's answer <i>is</i> correct! If it does not work for you, then your question is wrong. So either update your question, or accept Sylvain's answer! <b>BUT</b> again: to give you the benefit of the doubt, give us a hexdump of the first few lines of the file. Just in case the spaces are no spaces...</span>
