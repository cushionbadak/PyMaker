<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/24271752/except-clause-deletes-local-variable">except-clause deletes local variable</a>
<span class="question-originals-answer-count">
                    1 answer
                </span>
</li>
</ul>
</div>
<p>Why the variable used in the <code>except</code> statement is removed? I mean doing:</p>
<pre><code>x = 0

try:
  x = 5/0
except ZeroDivisionError as x:
  pass

print(x)
</code></pre>
<p>I get <code>NameError: name 'x' is not defined</code> why this? Couldn't it work as with <code>def</code> or comprehensions where if there is a variable with same name of a variable in the enclosing function (or module) it is simply shadowed but not removed?</p>
</div>
<div class="post-text" itemprop="text">
<p>This is explained in <a href="https://docs.python.org/3.3/reference/compound_stmts.html#except" rel="nofollow">the documentation</a> (parts in <strong>[ ]</strong> braces added by me):</p>
<blockquote>
<p>When an exception has been assigned using <code>as target</code> <strong>[i.e. <code>as x</code> in your case]</strong>, it is cleared at the end of the except clause. This is as if</p>
</blockquote>
<pre><code>except E as N:
    foo
</code></pre>
<blockquote>
<p>was translated to:</p>
</blockquote>
<pre><code>except E as N:
    try:
        foo
    finally:
        del N
</code></pre>
<blockquote>
<p>This means the exception must be assigned to a different name to be able to refer to it <strong>[i.e. this name, <code>x</code> in your case]</strong> after the except clause.</p>
</blockquote>
<p>The reason for this is also stated:</p>
<blockquote>
<p>Exceptions are cleared because with the traceback attached to them, they form a reference cycle with the stack frame, keeping all locals in that frame alive until the next garbage collection occurs.</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>The behavior is documented <a href="https://docs.python.org/3/reference/compound_stmts.html#the-try-statement" rel="nofollow">here</a>:</p>
<blockquote>
<p>When an exception has been assigned using as target, it is cleared at the end of the except clause.</p>
<p>This means the exception must be assigned to a different name to be able to refer to it after the except clause.  Exceptions are cleared because with the traceback attached to them, they form a reference cycle with the stack frame, keeping all locals in that frame alive until the next garbage collection occurs.</p>
</blockquote>
</div>
