<div class="post-text" itemprop="text">
<p>I have two files depending on only 1st column value.</p>
<p>File 1:</p>
<pre><code>2.3 5 3 66
5.5 2 3 54
6.2 4 1 33
</code></pre>
<p>File 2:</p>
<pre><code>1.2 3 7 22
4.5 2 6 77
8.9 4 2 54
</code></pre>
<p>I want to merge these two files with final sorted file as</p>
<pre><code>1.2 3 7 22
2.3 5 3 66
4.5 2 6 77
5.5 2 3 54
6.2 4 1 33
8.9 4 2 54
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>How about using <code>sort -m</code> (merge sorted files):</p>
<pre><code>sort -m -n file1 file2 &gt; file3
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Your question is a good one, but I think it got down voted, because you didn't provide enough details. If I can assume that the files are already sorted by column 1, that you want the final output to be sorted by column 1 and there are no duplicate values in column 1, then this solution works:</p>
<pre><code>cat file1 \
| awk 'BEGIN{
 cmd="cat file2"; cmd | getline line2; split(line2,a," "); key2=a[1]} {
 key1=$1; while(key2&lt;key1) {
   print line2; cmd | getline line2; split(line2,a," "); key2=a[1]};
 print $0} END{
 if(key2&gt;key1) print line2}'
</code></pre>
<p>You don't need to pipe cat file1 to awk, but I just prefer to have the input file at the beginning of the command instead of at the end. I am often criticised for this redundant use of cat.</p>
<p>Your question is tagged with Python, so here is a Python3 solution as well, which utilises <a href="https://docs.python.org/3/library/heapq.html" rel="nofollow noreferrer">heapq.merge()</a>:</p>
<pre><code>import heapq
with open('file1') as fd1, open('file2') as fd2:
    for line in heapq.merge(fd1, fd2):
       print(line, end='')
</code></pre>
<p>I found the answer, when searching for "merge sorted files in python". Among other pages this one showed up: <a href="https://stackoverflow.com/questions/18670466/heapq-merge-function-to-list-of-sorted-files">heapq.merge() function to list of sorted files</a></p>
</div>
<span class="comment-copy">why not simply <code>cat file1 file2 | sort</code></span>
<span class="comment-copy">@goncalopp I think we are meant to assume that the files are sorted and the asker wants to avoid sorting the merged output.</span>
<span class="comment-copy">I did not know that is possible with sort! Sweet! Thanks! See my stupid awk solution below :) I should clearly read the manual for all of the common unix utilities!</span>
