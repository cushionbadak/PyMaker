<div class="post-text" itemprop="text">
<p>I have a strict pre-commit hook set up with flake8, so I can't commit until its happy. This is normally a good thing, but it is causing some problems with what seems like no problem at all.</p>
<p>I can't get Flake8 to recognize a <code>FileNotFoundError</code>.</p>
<p><strong>example.py</strong></p>
<pre><code>try:
    pass
except FileNotFoundError:
    pass
</code></pre>
<p>This is enough code to get Flake8 to generate the error </p>
<pre><code>$ flake8 example.py
example.py:3:8: F821 undefined name 'FileNotFoundError'
$ python example.py # no error
$ python3 example.py # no error
</code></pre>
<p>I checked the <a href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError">python docs</a>, and FileNotFoundError is a 'built-in' exception, so I don't think I should have to import it from anywhere, and my python interpreters have not complained about it, just seems like an issue with flake8.</p>
</div>
<div class="post-text" itemprop="text">
<p>Running python <code>2.7.8</code> I get the follwoing:</p>
<pre><code> except FileNotFoundError:
 NameError: name 'FileNotFoundError' is not defined
</code></pre>
<p>If I change to <code>OSError</code> it works correctly  on <code>python 3</code> </p>
<pre><code>except OSError:
</code></pre>
<p><a href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" rel="noreferrer">FileNotFoundError</a> is a subclass of <code>OSError</code> in <code>python3</code></p>
<p>Using <code>OSError</code> will catch more than just the <code>FileNotFound</code> error in python 3 so you may want to add additional checks.</p>
<p>For <code>python 2</code> it is an <code>IOError</code>:</p>
<p>You can catch the specific error:</p>
<pre><code>import __builtin__

exc = getattr(__builtin__,"IOError","FileNotFoundError")

try:
    (open("bad_file"))
except exc:
    pass
</code></pre>
<p>Sure there are betters ways but for python 3:</p>
<pre><code>try:
    f = (open("bad_file"))
except OSError as e:
    if isinstance(e, FileNotFoundError):
        pass
    else:
        raise e
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I found a couple of mentions of this issue on the <a href="https://gitlab.com/groups/pycqa" rel="noreferrer">Python Code Quality</a> tools repo. Specifically <a href="https://gitlab.com/pycqa/flake8/issues/75" rel="noreferrer">Issue #75</a>.</p>
<p>Two workarounds were listed. You can use the <code>--builtins</code> flag to specify a comma separated list of known builtins that flake8 is flagging.</p>
<pre><code>$ flake8 example.py
example.py:3:8: F821 undefined name 'FileNotFoundError'
$ flake8 --builtins=FileNotFoundError,... example.py
$ 
</code></pre>
<p>The other workaround is running flake8 under python3 instead of python2.</p>
<pre><code>$ /usr/bin/python3.5 -m pyflakes example.py 
$ 
</code></pre>
<p>Hopefully one of these two solutions will work out for you, as twisting your code up to work around a syntax check tool is counterproductive.</p>
</div>
<span class="comment-copy">I don't get that error in <code>2.7.6</code>, but I suppose I can change to OSError.</span>
<span class="comment-copy">@NateMara, it is IOError in python 2 but OSError for python 3</span>
<span class="comment-copy">This is a pyflakes question, not a question about implementation details.  I think that the root cause of the OP's problem is mostly likely that pyflakes was running under python 2. See the comment from @Bryce below for what is probably a more fitting solution.</span>
<span class="comment-copy">Rewriting a code in such cases - not a good idea. You should provide a proper configuration for <code>flake8</code> . @Bryce answer is a better choice for this case</span>
<span class="comment-copy">this answer should be <b>accepted</b> one</span>
