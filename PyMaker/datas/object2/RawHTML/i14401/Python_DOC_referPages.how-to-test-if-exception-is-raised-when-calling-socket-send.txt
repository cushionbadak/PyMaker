<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/129507/how-do-you-test-that-a-python-function-throws-an-exception">How do you test that a Python function throws an exception?</a>
<span class="question-originals-answer-count">
                    11 answers
                </span>
</li>
</ul>
</div>
<p>This is my first time testing a socket interface using mocking. I have a class which invoked the <code>_socket.sendto()</code> method. I would like to test if an exception is raised. </p>
<pre><code>class socketUDP(object):

    def __init__(self, host="127.0.0.1", port=2003):
        self.host = host
        self.port = port

        self._socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)


    def send(self, metric, value):

        message = "%s %f\n" % (metric, value)

        try:
            self._socket.sendto(
                message, (self.host, self.port))
        except Exception, e:
            # I would like to test if this exception is raised
            print "Could not relay data: %s" % e
</code></pre>
<p>Update:<br/>
I am writing some unit tests for the send method and one of the tests I want to do is to see if an exception was raised</p>
</div>
<div class="post-text" itemprop="text">
<p>If the <code>send()</code> method catches the exception, this will be rather difficult.  You might try <a href="https://docs.python.org/3/library/unittest.mock.html#patch" rel="nofollow">monkey-patching the <code>socket.send()</code> method</a>, but that's an iffy solution at best.  It seems to me that in this case, you're testing implementation details rather than conformance to an interface, which is a questionable strategy to begin with.</p>
<p>If the <code>send()</code> method does not catch the exception, you can just use <a href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertRaises" rel="nofollow"><code>assertRaises()</code></a>.</p>
</div>
<span class="comment-copy">"Test" as in you're writing tests for the <code>send</code> method, or "test" as in you're trying to figure out, within <code>send</code>, whether the exception was thrown? And why are you catching the error inside the method anyway?</span>
<span class="comment-copy">I am writing some unit tests for the send method and one of the tests I want to do is to see if an exception was raised.</span>
