<div class="post-text" itemprop="text">
<p>I have a script - works perfectly in Windows, but when I tried running it in Ubuntu it spat out the error message: </p>
<blockquote>
<p>IndexError: list index out of range.</p>
</blockquote>
<p>It's a pretty simple script: it imports a <code>CSV</code> file, reads the rows, prints the first item in each row into a list, uses <code>set()</code> to remove duplicates, then writes this new list to a file.</p>
<pre><code>import csv, glob

for x in glob.glob("*raw_vcf.csv"):
   csv_f = open(x, "r")

data = [c for c in csv.reader(csv_f)]
frags_unique = []

def frag_list(vcf_data, uniquefrags):
    """ 
    User input: an imported .vcf file (='vcf_import'); an empty list
    (= 'uniquefrags').
    'frag_list' takes 'vcf_import', reads each row/list, taking the first item
    and attaching only unique values to 'uniquefrags', using the set() function.
    First row (header row) in 'vcf_data' is deleted; not needed.
    """
    del vcf_data[0]
    list_1 = []
    for row in vcf_data:
        list_1.append(row[0])
    for item in list(set(list_1)):
        uniquefrags.append(item)

frag_list(data, frags_unique)

out = open("output_unique_frags.txt","w")
for frags in frags_unique:
    out.write(frags+"\n")
out.close()
</code></pre>
<p>Specifically, the error occurs in the module:</p>
<pre><code>Traceback (most recent call last):
  File "PRIME_unique_frags.py", line 50, in &lt;module&gt;
    frag_list(data, frags_unique)
  File "PRIME_unique_frags.py", line 46, in frag_list
    list_1.append(row[0])
IndexError: list index out of range
</code></pre>
<p>But I honestly can't see what is wrong with it, given it works on my Windows OS; tried rewriting it in different ways but no luck.</p>
<p>Some sample input data ("*_raw_vcf.csv"):</p>
<pre><code>A,B,C,D,E
1,2,3,4,5
1,5,4,3,2
2,3,4,5,6
2,3,4,7,8
3,4,5,6,7
</code></pre>
<p>Should in theory (and does in Windows) produce a file ("output_unique_frags.txt"; the unique values in column A):</p>
<pre><code>1
2
3
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The Traceback is saying that <code>row</code> has no element<code>[0]</code>, so it's an empty list. This suggests that on the Ubuntu system the reader is returning an empty list for each row.</p>
<p>Have a look at the <a href="https://docs.python.org/3.2/library/csv.html#csv.reader" rel="nofollow">csv docs</a>; you can specify a dialect when you set up the reader. I'd say that the reader on the Ubuntu system is looking for a different delimiter that the one in the file.</p>
<p>BTW: Is the indentation above code correct? There's a few odd things going on there if so, eg:</p>
<pre><code>for x in glob.glob("*raw_vcf.csv"):
   csv_f = open(x, "r")
</code></pre>
<p>If there's more than one .csv file, you're only going to get the last one.</p>
</div>
<div class="post-text" itemprop="text">
<p>Looks like line endings are not the culprit:</p>
<pre><code>Python 2.7.8 (default, Oct 20 2014, 15:05:19) 
[GCC 4.9.1] on linux2
&gt;&gt;&gt; a = """A,B,C,D,E
... 1,2,3,4,5
... 1,5,4,3,2
... 2,3,4,5,6
... 2,3,4,7,8
... 3,4,5,6,7"""
&gt;&gt;&gt; with open('1.csv', 'w') as f:
...     f.write(a.replace('\n', '\r\n'))
... 
&gt;&gt;&gt; import csv
&gt;&gt;&gt; list(csv.reader(open('1.csv', "r")))
[['A', 'B', 'C', 'D', 'E'], ['1', '2', '3', '4', '5'], ['1', '5', '4', '3', '2'], ['2', '3', '4', '5', '6'], ['2', '3', '4', '7', '8'], ['3', '4', '5', '6', '7']]
</code></pre>
<p>Another guess is that here is the problem:</p>
<pre><code>for x in glob.glob("*raw_vcf.csv"):
   csv_f = open(x, "r")
</code></pre>
<p>This open last file in the directory with mask <code>"*raw_vcf.csv"</code>. I guess you have more than one file to process. On Windows you get one file, on Linux it could be another malformed file.</p>
<p>You should debug the issue. Print the file name used to open the file.</p>
<p><strong>Old answer:</strong></p>
<p>The <a href="https://docs.python.org/3/library/csv.html#csv.Dialect.lineterminator" rel="nofollow noreferrer">docs say</a>:</p>
<blockquote>
<p>Note The reader is hard-coded to recognise either <code>'\r'</code> or <code>'\n'</code> as
  end-of-line, and ignores <code>lineterminator</code>. This behavior may change in
  the future.</p>
</blockquote>
<p>I suppose the CSV file was created in Windows having <code>\r\n</code> as line terminator. So the reader under Linux finds empty lines because of this.</p>
<p>Solution (untested, taken from <a href="https://stackoverflow.com/a/2314565/248296">here</a>):</p>
<pre><code>csv_f = open(filename, 'rtU')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><strong>Hey everyone, thanks for feedback!</strong></p>
<hr/>
<p>Just briefly in response to some comments made: I made very sure that there was only one occurrence of "*raw_vcf.csv", such that,</p>
<pre><code>for x in glob.glob("*raw_vcf.csv"):
   csv_f = open(x, "r")
</code></pre>
<p>Would only pull up one file - and I tested this to make sure it would work.</p>
<hr/>
<p><strong>SOLUTION</strong></p>
<p>After the suggestions about the list being empty, I checked it:</p>
<p><img alt="enter image description here" src="https://i.stack.imgur.com/S0PME.png"/></p>
<p>It wasn't obvious when I had asked for print row[0] (for rows in data), but when printing the list, I noted an extra ENTER in the data file which was being read in as a blank line (last element in the list: '[]'). This is what was throwing it off because .append() won't add nothing.</p>
<p>So again thanks for the comments. In hindsight it was a kinda simple problem, but as I am still very new to Python, interpreting the jargon can be a tad challenging. Appreciate everyone who offered suggestions and helped me learn for next time.</p>
</div>
<span class="comment-copy">use a debugger, or the print statement to find out what's the value of row on linux. then you can determine why you get the IndexError. I think @warvariuc's answer is pretty close to the point, though</span>
<span class="comment-copy">use a print statement after frag_unique=[] like print csv_f to see which csv is being read and another print after del vcf_data[0] use print del vcf_data see and say what is being printed</span>
<span class="comment-copy">1 you are going to get only the last one</span>
<span class="comment-copy">Ah yes, the inadvertent blank line at the end - I've hit this one myself. Glad you got it sorted, and learnt something in the process...</span>
