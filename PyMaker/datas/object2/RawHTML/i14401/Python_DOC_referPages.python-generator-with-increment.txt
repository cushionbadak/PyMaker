<div class="post-text" itemprop="text">
<p>I have a loop:</p>
<pre><code>total = 0
for s in sums:
    total += s[0]
</code></pre>
<p>where <code>sums</code> is a list of objects from the database, retrieved by Django:</p>
<pre><code>sums = Source_types.objects.values_list('source_sum')
</code></pre>
<p>I'd like to move this code into a one-line generator.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use the <a href="https://docs.python.org/3/library/functions.html#sum" rel="nofollow noreferrer"><code>sum()</code> function</a> with a <a href="https://docs.python.org/3/tutorial/classes.html#generator-expressions" rel="nofollow noreferrer">generator expression</a>:</p>
<pre><code>total = sum(s[0] for s in sums)
</code></pre>
<p>However, the Django ORM can be used to tell the <em>database</em> to do the summing here, using <a href="https://docs.djangoproject.com/en/stable/topics/db/aggregation/" rel="nofollow noreferrer">aggregation</a>:</p>
<pre><code>from django.db.models import Sum

total = Source_types.objects.aggregate(Sum('source_sum'))
</code></pre>
</div>
<span class="comment-copy"><code>sum()</code>! OMG... I just forgot about it (in fact - I'm rarely have time for coding in Python) :-) thanks a lot. <code>aggregate</code> - thanks again, very useful</span>
