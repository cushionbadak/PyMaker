<div class="post-text" itemprop="text">
<p>Is there a downside to importing the same built-in module in both my script and custom module?</p>
<p>I have a script that: imports my custom module and imports the built-in csv module to open a csv file and append any necessary content to a list.</p>
<p>I then have a method in my custom module in which i pass a path, filename and list and writes a csv, but I have to import the csv module again (in my module).</p>
<p>I do not understand what happens when I import the csv module twice so I wanted to know if there is a more uniformed way of doing what I'm doing or if this is ok.</p>
</div>
<div class="post-text" itemprop="text">
<p>The short answer is no, there is no downside.</p>
<p>That being said, it may be helpful to understand what imports mean, particularly for anyone new to programming or coming from a different language background.</p>
<p>I imagine your code looks something like this:</p>
<pre><code># my_module.py
import os
import csv

def bar(path, filename, list):
    full_path = os.path.join(path, filename)
    with open(full_path, 'w') as f:
        csv_writer = csv.writer
        csv_writer.writerows(list)
</code></pre>
<p>and</p>
<pre><code># my_script.py
import csv
import my_module

def foo(path):
    contents = []
    with open(path, 'r') as f:
        csv_reader = csv.reader(f)
        for row in csv_reader:
            contents.append(row)
</code></pre>
<p>As a high-level overview, when you do an import in this manner, Python determines whether the module has already been imported. If not, then it searches the Python path to determine where the imported module lives on the file system, then it loads the imported module's code into memory and executes it. The interpreter takes all objects that are created during the execution of the imported module and makes them attributes on a new module object that the interpreter creates. Then the interpreter stores this module object into a dictionary-like structure that maps the module name to the module object. Finally, the interpreter brings the imported module's name into the importing module's scope.</p>
<p>This has some interesting consequences. For example, it means that you could simply use <code>my_module.csv</code> to access the csv module within my_script.py. It also means that importing csv in both is trivial and is probably the clearest thing you can do.</p>
<p>One very interesting consequence is that if any statements that get executed during import have any side effects, those side effects will only happen when the module is first loaded by the interpreter. For example, suppose you had two modules a.py and b.py with the following code:</p>
<pre><code># a.py
print('hello world')

# b.py
print('goodbye world')
import a
</code></pre>
<p>If you run <code>import a</code> followed by <code>import b</code> then you will see</p>
<pre><code>&gt;&gt;&gt; import a
hello world
&gt;&gt;&gt; import b
goodbye world
&gt;&gt;&gt;
</code></pre>
<p>However, if you import in the opposite order, you get this:</p>
<pre><code>&gt;&gt;&gt; import b
goodbye world
hello world
&gt;&gt;&gt; import a
&gt;&gt;&gt;
</code></pre>
<p>Anyway, I think I've rambled enough and I hope I've adequately answered the question while giving some background. If this is at all interesting, I'd recommend <a href="http://pyvideo.org/video/2567/import-ant-decisions" rel="nofollow noreferrer" title="PyCon 2014: 'Import-Ant Decisions' By Allison Kaptur">Allison Kaptur's PyCon 2014 talk about import</a>.</p>
</div>
<div class="post-text" itemprop="text">
<p>No, there is no downside. Importing a module does <em>two</em> things:</p>
<ol>
<li>If not yet in memory, load the module, storing the resulting object in <a href="https://docs.python.org/3/library/sys.html#sys.modules" rel="nofollow"><code>sys.modules</code></a>.</li>
<li>Bind names to either the module object (<code>import modulename</code>) or to attributes of the module object (<code>from modulename import objectname</code>).</li>
</ol>
<p>Additional imports only execute step 2, as the module is already loaded.</p>
<p>See <a href="https://docs.python.org/3/reference/import.html" rel="nofollow"><em>The import system</em></a> in the Python reference documentation for the nitty gritty details:</p>
<blockquote>
<p>The <code>import</code> statement combines two operations; it searches for the named module, then it binds the results of that search to a name in the local scope.</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>You can import the same module in separate files (custom modules) as far as I know. Python keeps track of already imported modules and knows how to resolve a second import.</p>
</div>
<span class="comment-copy">Does <a href="http://stackoverflow.com/questions/2029523/how-to-prevent-a-module-from-being-imported-twice">this</a> solve your problem?</span>
<span class="comment-copy">No, it's fine; Python only actually imports each module once</span>
<span class="comment-copy">See <a href="https://programmers.stackexchange.com/q/187403">'import module' vs. 'from module import function'</a>; importing loads the file <b>once</b>, then just binds names to loaded objects.</span>
<span class="comment-copy">Another interesting note is that the module name in your current module is a variable like any other. It can be <i>reassigned</i> to something else; this is especially useful for mocking. +1</span>
<span class="comment-copy">Martijin explains it very well.</span>
