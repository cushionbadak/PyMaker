<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/8420143/valueerror-could-not-convert-string-to-float-id">ValueError: could not convert string to float: id</a>
<span class="question-originals-answer-count">
                    5 answers
                </span>
</li>
</ul>
</div>
<p>I know this is probably pretty basic, but I keep getting following error when I try to load my file into python.like </p>
<blockquote>
<p>ValueError: could not convert string to float </p>
</blockquote>
<p>I have tried</p>
<pre><code>input = np.loadtxt("input.txt", dtype='i', delimiter=' ')
open(file.txt,'r')
</code></pre>
<p>and <code>read csv</code> but can't get it to read properly, probably just some small mistake.</p>
<p>The file look like the example below. I don't need the top row, as they just explain limits and the step size between the data. there are multiple spaces between the numbers and some empty lines</p>
<p>Thanks</p>
<pre><code>-89.9916666667 89.9916666667   -0.0083333333  360.0083333333    0.0166666667    0.0166666667

 15.0900     15.0740     15.0730     15.0730     15.0730     15.0730
 15.0730     15.0730     15.0730     15.0730     15.0730     15.0730
 15.0730     15.0730     15.0740     15.0740     15.0740     15.0740
 15.0740     15.0740     15.0730     15.0730     15.0730     15.0730
 15.0730     15.0730     15.0730     15.0720     15.0720     15.0720
 15.0720     15.0720     15.0720     15.0720     15.0710     15.0710
 15.0710     15.0710     15.0710     15.0710     15.0710     15.0720
 15.0720     15.0730     15.0730     15.0740     15.0740     15.0740
 15.0740     15.0740     15.0730     15.0730     15.0730     15.0730
 15.0730     15.0730     15.0740     15.0740     15.0750     15.0750
 15.0760     15.0760     15.0760     15.0760     15.0760     15.0750
 15.0750     15.0740     15.0740     15.0740     15.0730     15.0730
 15.0730     15.0730     15.0730     15.0730     15.0730     15.0730
 15.0740     15.0740     15.0740     15.0750     15.0750     15.0750
 15.0760     15.0760     15.0760     15.0760     15.0760     15.0760
 15.0760     15.0760     15.0760     15.0760     15.0750     15.0740
 15.0740     15.0740     15.0740     15.0730     15.0730     15.0730
 15.0730     15.0730     15.0720     15.0720     15.0720     15.0720
 15.0720     15.0720     15.0720     15.0720     15.0710     15.0710
 15.0710     15.0710     15.0710     15.0710     15.0710     15.0710
 15.0710     15.0710     15.0710     15.0710     15.0710     15.0710
 15.0710     15.0710     15.0710     15.0710     15.0710     15.0710
 15.0710     15.0710     15.0710     15.0710     15.0710     15.0710
 15.0710     15.0710     15.0720     15.0720     15.0730     15.0730
 15.0730     15.0730     15.0730     15.0740     15.0730     15.0730
 15.0730     15.0730     15.0730     15.0730     15.0730     15.0730
 15.0730     15.0730     15.0730     15.0730     15.0730     15.0720
 15.0720     15.0720     15.0710     15.0710     15.0700     15.0700
 15.0700     15.0710     15.0710     15.0710     15.0720     15.0720
 15.0720     15.0730     15.0730     15.0730     15.0740     15.0740

 15.0740     15.0740     15.0740     15.0740     15.0740     15.0740
 15.0740     15.0730     15.0730     15.0730     15.0730     15.0730
 15.0730     15.0720     15.0720     15.0720     15.0720     15.0720
 15.0720     15.0710     15.0710     15.0710     15.0710     15.0710
 15.0710     15.0710     15.0710     15.0710     15.0710     15.0710
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>It seems like you have two empty lines in your <em>input.txt</em> file, as well as inconsistent spacing between your values. The empty lines need to be removed.</p>
<p>To illustrate, in the first line you have:</p>
<pre><code>-89.9916666667 89.9916666667   -0.0083333333  360.0083333333    0.0166666667    0.0166666667
</code></pre>
<p>The first values are separated with one whitespace, and the others have 3, 2 and 4, respectively. When you specify a delimiter in your call to <code>np.loadtxt("input.txt", dtype='i', delimiter=' ')</code>, you're specifying a single whitespace character. Simply remove the delimiter keyword argument to accept any number of whitespace characters as a delimiter. </p>
<p>Furthermore, your call also specifies the input data type as an integer, with <code>dtype='i'</code>. I don't know if this is intentional, but this will round all values to the nearest integer. Looking at your data, this is probably not what you want.</p>
<p>Lastly, your call to <code>open('input.txt', 'r')</code> does nothing, as <code>np.readtxt</code> handles opening and closing of files by itself. </p>
<p>Hopefully this solves your problem.</p>
</div>
<span class="comment-copy"><code>"ValueError: could not convert string to float: "</code> occurs while trying to set a variable without casting it or parsing properly. If you cast the string to float with just <code>float(input_float)</code> it should work out properly. Ruling out the parsing errors of course otherwise check @FlorenceWilliams comment</span>
<span class="comment-copy">Please check below url. I think this question is duplicated <a href="https://stackoverflow.com/questions/8420143">stackoverflow.com/questions/8420143</a></span>
<span class="comment-copy">You could copy+paste small section of your file into the question. It would be more helpful instead of inserting a picture. Is there an empty line in your file? <code>open(file.txt,'r')</code> is incorrect, probable you wanted: <code>open('file.txt','r')</code></span>
<span class="comment-copy">@FlorenceWilliams with that approach i can append only the first row and then get the error      ´ValueError: not enough values to unpack (expected 6, got 0)´</span>
<span class="comment-copy">Hmm that seems about right. It seems though that i have only 2 colums on the last row. Is there any way to still load the data, and just have nan or something in the end without editing the text file.?</span>
<span class="comment-copy">If your input data is lacking columns, then you shouldn't use numpy to read the data, as it will assume your file is correctly formatted. In this case, you should probably <code>open('input.txt', 'r') as infile:</code> and read the data into an array in a loop.</span>
<span class="comment-copy">Alternatively, read the data into a pandas data frame :)</span>
