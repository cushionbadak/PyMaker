<div class="post-text" itemprop="text">
<p>I wasn't sure how to create a Python unittest to check if a dictionary returned a KeyError. I thought the unit test would call the dictionary key so it would look like this:</p>
<pre><code>def test_dict_keyerror_should_appear(self):
    my_dict = {'hey': 'world'}
    self.assertRaises(KeyError, my_dict['some_key'])
</code></pre>
<p>However, my test would just error out with a <strong>KeyError</strong> instead of asserting that a KeyError occurred.</p>
</div>
<div class="post-text" itemprop="text">
<p>To solve this I used a <code>lambda</code> to call the dictionary key to raise the error.</p>
<pre><code>def test_dict_keyerror_should_appear(self):
    my_dict = {'hey': 'world'}
    self.assertRaises(KeyError, lambda: my_dict['some_key'])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Another option would be to use <a href="https://docs.python.org/3/library/operator.html#operator.getitem" rel="nofollow"><code>operator.getitem</code></a>:</p>
<pre><code>from operator import getitem

self.assertRaises(KeyError, getitem, my_dict, 'some_key')
</code></pre>
</div>
<span class="comment-copy">Looks like a dupe of <a href="http://stackoverflow.com/questions/11371849/testing-exception-message-with-assertraise#11371899" title="testing exception message with assertraise%2311371899">stackoverflow.com/questions/11371849/â€¦</a></span>
