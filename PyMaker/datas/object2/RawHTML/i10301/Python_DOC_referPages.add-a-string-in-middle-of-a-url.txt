<div class="post-text" itemprop="text">
<p>This may be a simple problem but I am not able to solve it. </p>
<p>I have a url as : <code>"www.example.com/links"</code>.</p>
<p>I want to add <code>/skip_session/id=%s/</code> in between the url such that it becomes:</p>
<pre><code>www.example.com/skip_session/id=%s/links
</code></pre>
<p>Can some one help me in this?</p>
<p>I tried using</p>
<pre><code>url[23:]+ "/skip_session/id=%s/" + url[:52]
</code></pre>
<p>but it gives an error</p>
</div>
<div class="post-text" itemprop="text">
<p>Since you want to <em>prefix</em> a string on the path portion of the URL, you could use the <a href="https://docs.python.org/3/library/urllib.parse.html" rel="nofollow"><code>urllib.parse</code> module </a> (<a href="https://docs.python.org/2/library/urlparse.html" rel="nofollow"><code>urlparse</code></a> in Python 2), to separate the URL into parts first:</p>
<pre><code>try:
    # Python 3
    from urllib.parse import urlparse
except ImportError:
    # Python 2
    from urlparse import urlparse

def insert_path_prefix(url, prefix):
    parts = urlparse(url)
    updated = parts._replace(path=prefix + parts.path)
    return updated.geturl()

url = insert_path_prefix(url, '/skip_session/id=%s')
</code></pre>
<p>Take into account this does require that your URL is properly formed (starts with, at least, <code>//</code>, preferably with a fully-formed scheme like <code>http://</code>) for the parsing to correctly pick out the hostname:</p>
<pre><code>&gt;&gt;&gt; insert_path_prefix('http://www.example.com/links', '/skip_session/id=%s')
'http://www.example.com/skip_session/id=%s/links'
</code></pre>
<p>If your URL is missing the <code>//</code> part at the start, add one first.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use string replace or string rsplit to do the task</p>
<pre><code>url_string = "www.example.com/links"
parsed_url = url_string.rsplit("/", 1)
new_url = "/skip_session/id=%s/".join(parsed_url)
</code></pre>
<p>Or this:</p>
<pre><code>url_string = "www.example.com/links"
new_url = url_string.replace("/links", "/skip_session/id=%s/links")
</code></pre>
</div>
<span class="comment-copy">Have you tried anything yourself yet? What problems did you encounter?</span>
<span class="comment-copy">@theflash I am sure the error is Index out of range as the url itself, without the additional string, is only 20 characters long whereas you are doing <code>url[23:]</code></span>
<span class="comment-copy">@thiruvenkadam sorry this was just a dummy example to show.. I am using some other url and it had 23 characters.</span>
<span class="comment-copy">In future, please <a href="https://stackoverflow.com/posts/39617765/edit">edit</a> your question to add requested details; I moved your comment into the question. However, you did not include what error you got. Any details about the URLs (are they missing the scheme part, so <code>http://</code>, how do the paths vary, do any of these have a <code>:80</code> port part or <code>username:password@</code> authentication, etc.?) would also be helpful.</span>
<span class="comment-copy">@theflash then shouldn't you do <code>url[:23]+"/skip_session/id=%s/"+url[24:]</code>?</span>
<span class="comment-copy">Again, this assumes that there is only one such slash in the URL.</span>
<span class="comment-copy">My view is that OP wishes to add the string just before the final part of the API and not as a prepend :-) Like if there is <code>example.com/a/b/d</code> and need to transform it to <code>example.com/a/b/c/d</code></span>
<span class="comment-copy">That's very far from certain; I've prompted the OP to add further detail to question.</span>
<span class="comment-copy">Any way, treating the URL as URL, like your answer, and manipulating is far better approach than string parsing. This answer will be there to do some quick and dirty string manipulation in terms of pretty simple use cases.(Read: for one-liners that do not care much manipulation )</span>
