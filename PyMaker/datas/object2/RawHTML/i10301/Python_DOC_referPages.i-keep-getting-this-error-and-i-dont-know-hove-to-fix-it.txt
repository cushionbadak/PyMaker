<div class="post-text" itemprop="text">
<p>I open the file but is saying the file is not open. I stuck on what to do . I am new to python.</p>
<p>Here is the error:</p>
<pre><code>Traceback (most recent call last):
File "\\users2\121721$\Computer Science\Progamming\task3.py", line 43, in   &lt;module&gt;
file.write(barcode + ":" + item + ":" + price + ":" +str(int((StockLevel-    float(HowMany)))))
    ValueError: I/O operation on closed file.
</code></pre>
<p>Here is the code:</p>
<pre><code>#open a file in read mode
file = open("data.txt","r")
#read each line of data to a vairble
FileData = file.readlines()
#close the file
file.close()

total = 0 #create the vairble total
AnotherItem = "y" # create
while AnotherItem == "y" or AnotherItem  == "Y" or  AnotherItem ==  "yes" or  AnotherItem ==  "Yes" or  AnotherItem ==  "YES":
        print("please enter the barcode")
        UsersItem=input()
        for line in  FileData:
                #split the line in to first and second section
                barcode = line.split(":")[0]
                item = line.split(":")[1]
                price = line.split(":")[2]
                stock = line.split(":")[3]

                if barcode==UsersItem:
                    file = open("data.txt","r")
                    #read each line of data to a vairble
                    FileData = file.readlines()
                    #close the file
                    file.close()
                    print(item +"       £" + str(float(price)/100) + "      Stock: " + str(stock))
                    print("how many do you want to buy")
                    HowMany= input()
                    total+=float(price) * float( HowMany)
                    for line in  FileData:
                        #split the line in to first and second section
                        barcode = line.split(":")[0]
                        item = line.split(":")[1]
                        price = line.split(":")[2]
                        stock = line.split(":")[3]
                        if barcode!=UsersItem:
                            open("data.txt","w")
                            file.write(barcode + ":" + item + ":" + price + ":" +stock)
                            file.close()
                        else:
                            StockLevel=int(stock)
                            open("data.txt","w")
                            file.write(barcode + ":" + item + ":" + price + ":" +str(int((StockLevel-float(HowMany)))))
                            file.close()
                    open("data.txt","w")
                    StockLevel=int(stock)
                    print("Do you want to buy another item? [Yes/No]")
                    AnotherItem = input()
        if AnotherItem == "n" or "N" or "no" or "No" or "NO":
                print("total price: £"+ str(total/100))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>There is </p>
<pre><code>if barcode!=UsersItem:
    open("data.txt","w")
</code></pre>
<p>You need to </p>
<pre><code>if barcode!=UsersItem:
    file = open("data.txt","w")
</code></pre>
<p>Also the same error you have in <code>else</code> statement.</p>
<p>And you should also consider refactoring your code, because you have a lot of file openings and closings.</p>
<p><em>Edit</em>: as @roganjosh mentioned <code>file</code> is a builtin name in Python 2, so you'd better change all occurrences of <code>file</code> to e.g. <code>f</code>.</p>
</div>
<span class="comment-copy">you dont have a <code>file</code> object created how can you do <code>file.write</code>, if there is no <code>file = open(filename, mode)</code> any where near.</span>
<span class="comment-copy">I wouldn't recommend suggesting that they use <code>file</code> builtin as a name...</span>
<span class="comment-copy">@roganjosh <code>('file' in dir(__builtin__)) is False</code></span>
<span class="comment-copy">Hmm, interesting. It is a builtin for <a href="https://docs.python.org/2/library/functions.html#file" rel="nofollow noreferrer">Python 2</a> but not <a href="https://docs.python.org/3/library/functions.html" rel="nofollow noreferrer">Python 3</a>.</span>
<span class="comment-copy">@roganjosh you're right, i've updated the answer. Thanks, mate!</span>
<span class="comment-copy">No worries, I got a little confused then because my editor always changes colour for <code>file</code> :) I don't think I've ever used it though tbh so it's not totally surprising it was removed</span>
