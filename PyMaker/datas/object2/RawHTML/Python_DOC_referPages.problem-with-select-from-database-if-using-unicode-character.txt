<div class="post-text" itemprop="text">
<p>I'm using <strong>latest</strong> version of python and robot framework with DatabaseLibrary (<a href="https://franz-see.github.io/Robotframework-Database-Library/api/1.0.1/DatabaseLibrary.html" rel="nofollow noreferrer">https://franz-see.github.io/Robotframework-Database-Library/api/1.0.1/DatabaseLibrary.html</a>)</p>
<p>And I have problem with SELECT from database when I try using Unicode character like this: select * from labcamprodfull where PRODUCTNAME like '%<strong>ščť</strong>%'</p>
<p><strong>Then I execute/run test and i get this error:</strong>
UnicodeEncodeError: 'ascii' codec can't encode character '\xae' in position 54: ordinal not in range(128)</p>
<p><strong><em>Here is my code:</em></strong></p>
<pre><code>*** Settings ***
Resource  ../globalVariables.robot
Library  DatabaseLibrary

*** Variables ***
${DB_LOAD_CONNECT_STRING} =  '${userLoad}/${passwordDb}@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=${hostnameDb})(PORT=${portDb}))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=${sid})))'
${originalSpecialCharacter}  ®

*** Test Cases ***
Validate_if_special_character_Original_symbol_is_correctly_saved_in_database

    ${byte_string}=  Encode String To Bytes     ${originalSpecialCharacter}  UTF-8
    log to console  bytes is
    log to console  ${byte_string}
    ${_string} =  Decode Bytes To String  ${byte_string}  UTF-8
    log to console  encoded string is
    log to console  ${_string}

    Connect To Database Using Custom Params  cx_Oracle  ${DB_LOAD_CONNECT_STRING}
        ${rowCount}  Row Count  select * from labcamprodfull where PRODUCTNAME like '%${_string}%'
        log to console  Product count with original symbol in name is
        log to console  ${rowCount}
    Disconnect from database
</code></pre>
<p><strong>Then I execute/run test and i get this error:</strong>
UnicodeEncodeError: 'ascii' codec can't encode character '\xae' in position 54: ordinal not in range(128)</p>
</div>
<div class="post-text" itemprop="text">
<p>The default encoding for cx_Oracle is indeed ASCII. If you can set the encoding for the connection upon creation, all should be well. With basic cx_Oracle that would be done as follows:</p>
<p><code>cx_Oracle.connect(user, password, dsn, encoding="UTF-8", nencoding="UTF-8")</code></p>
<p>I'm not sure how that is done with the tool you are using but hopefully that will be sufficient to get you going.</p>
<p>The other option is to the set the environment variable NLS_LANG as in</p>
<p><code>export NLS_LANG=.AL32UTF8</code></p>
<p>and then run your application.</p>
</div>
<span class="comment-copy"><b>I used this connected string</b>: ${DB_LOAD_CONNECT_STRING} =  '${userLoad}/${passwordDb}@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=${hostnameDb})(PORT=${portDb}))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=${sid})))'  <b>where I can add this encoding parameters</b>?</span>
<span class="comment-copy">Only when you create the connection as noted in my answer. Or you can set the environment variable NLS_LANG as I also suggested.</span>
