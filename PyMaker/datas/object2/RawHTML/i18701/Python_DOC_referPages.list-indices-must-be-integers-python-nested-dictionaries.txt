<div class="post-text" itemprop="text">
<p>In python 3, I need a function to dynamically return a value from a nested key.</p>
<pre><code>nesteddict = {'a':'a1','b':'b1','c':{'cn':'cn1'}}
print(nesteddict['c']['cn']) #gives cn1

def nestedvalueget(keys):
    print(nesteddict[keys])

nestedvalueget(['n']['cn'])
</code></pre>
<p>How should nestedvalueget be written?</p>
<p>I'm not sure the title is properly phrased, but I'm not sure how else to best describe this. </p>
</div>
<div class="post-text" itemprop="text">
<p>If you want to traverse dictionaries, use a loop:</p>
<pre><code>def nestedvalueget(*keys):
    ob = nesteddict
    for key in keys:
        ob = ob[key]
    return ob
</code></pre>
<p>or use <a href="http://docs.python.org/3/library/functools.html#functools.reduce" rel="nofollow"><code>functools.reduce()</code></a>:</p>
<pre><code>from functools import reduce
from operator import getitem

def nestedvalueget(*keys):
    return reduce(getitem, keys, nesteddict)
</code></pre>
<p>then use either version as:</p>
<pre><code>nestedvalueget('c', 'cn')
</code></pre>
<p>Note that either version takes a variable number of arguments to let you pas 0 or more keys as positional arguments.</p>
<p>Demos:</p>
<pre><code>&gt;&gt;&gt; nesteddict = {'a':'a1','b':'b1','c':{'cn':'cn1'}}
&gt;&gt;&gt; def nestedvalueget(*keys):
...     ob = nesteddict
...     for key in keys:
...         ob = ob[key]
...     return ob
... 
&gt;&gt;&gt; nestedvalueget('c', 'cn')
'cn1'
&gt;&gt;&gt; from functools import reduce
&gt;&gt;&gt; from operator import getitem
&gt;&gt;&gt; def nestedvalueget(*keys):
...     return reduce(getitem, keys, nesteddict)
... 
&gt;&gt;&gt; nestedvalueget('c', 'cn')
'cn1'
</code></pre>
<p>And to clarify your error message: You passed the expression <code>['n']['cn']</code> to your function call, which defines a list with one element (<code>['n']</code>), which you then try to index with <code>'cn'</code>, a string. List indices can only be integers:</p>
<pre><code>&gt;&gt;&gt; ['n']['cn']
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: list indices must be integers, not str
&gt;&gt;&gt; ['n'][0]
'n'
</code></pre>
</div>
<span class="comment-copy">functools.reduce() is what I was looking for. Thanks!</span>
