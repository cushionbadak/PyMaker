<div class="post-text" itemprop="text">
<p>If you run <code>os.stat(path)</code> on a file and then take its <code>st_mode</code> parameter, how do you get from there to a string like this: <code>rw-r--r--</code> as known from the Unix world?</p>
</div>
<div class="post-text" itemprop="text">
<p>Since Python 3.3 you could use <a href="http://docs.python.org/3/library/stat.html#stat.filemode" rel="noreferrer"><code>stat.filemode</code></a>:</p>
<pre><code>In [7]: import os, stat

In [8]: print(stat.filemode(os.stat('/home/soon/foo').st_mode))
-rw-r--r--

In [9]: ls -l ~/foo
-rw-r--r-- 1 soon users 0 Jul 23 18:15 /home/soon/foo
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Something like this:</p>
<pre><code>import stat, os
def permissions_to_unix_name(st):
    is_dir = 'd' if stat.S_ISDIR(st.st_mode) else '-'
    dic = {'7':'rwx', '6' :'rw-', '5' : 'r-x', '4':'r--', '0': '---'}
    perm = str(oct(st.st_mode)[-3:])
    return is_dir + ''.join(dic.get(x,x) for x in perm)
... 

&gt;&gt;&gt; permissions_to_unix_name(os.stat('.'))
'drwxr-xr-x'
&gt;&gt;&gt; ls -ld .
drwxr-xr-x 62 monty monty 4096 Jul 23 13:23 ./

&gt;&gt;&gt; permissions_to_unix_name(os.stat('so.py'))
'-rw-rw-r--'
&gt;&gt;&gt; ls -ld so.py
-rw-rw-r-- 1 monty monty 68 Jul 18 15:57 so.py
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The following function will achieve this, given some usual circumstances (i.e. I haven't tested it under Windows or with SELinux).</p>
<pre><code>import stat
def permissions_to_unix_name(st_mode):
    permstr = ''
    usertypes = ['USR', 'GRP', 'OTH']
    for usertype in usertypes:
        perm_types = ['R', 'W', 'X']
        for permtype in perm_types:
            perm = getattr(stat, 'S_I%s%s' % (permtype, usertype))
            if st_mode &amp; perm:
                permstr += permtype.lower()
            else:
                permstr += '-'
    return permstr
</code></pre>
<p>This produces a basic string as asked. However, this could also be improved to display further data, e.g. whether it is a directory (<code>d</code>) or a symlink (<code>l</code>). Feel free to improve it.</p>
</div>
<span class="comment-copy">+1 It can work in other python versions as well, simply copy the function and related data from the <a href="http://hg.python.org/cpython/file/3.3/Lib/stat.py" rel="nofollow noreferrer">source code</a>. Demo : <a href="http://ideone.com/P45ChT" rel="nofollow noreferrer">ideone.com/P45ChT</a></span>
