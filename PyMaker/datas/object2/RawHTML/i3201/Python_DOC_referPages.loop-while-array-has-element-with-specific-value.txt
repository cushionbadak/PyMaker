<div class="post-text" itemprop="text">
<p>let say I have list of devices and I need to check their statuses before script can continue. In simple way it can look like this: </p>
<pre><code>devices = {
    'dev1': {'ready':False, ...},
    'dev2': {'ready':False, ...},
    'dev3': {'ready':False, ...}
}

while /exists device with 'ready' == False/:
    ... some code scanning for devices ...
    if /device ready/:
        devices[devX]['ready'] = True
</code></pre>
<p>I can't figure it out how should condition in while statement looks like. </p>
<p>The closest solution which I found was:</p>
<pre><code>len([d for d in devices if d['ready'] == True]) &gt; 0
</code></pre>
<p>But it gives me TypeError: string indices must be integers, not str</p>
<p>Can you please advise?</p>
</div>
<div class="post-text" itemprop="text">
<p>The problem is that <code>for d in devices</code> returns only the keys of the dict. Change your line to</p>
<pre><code>len([d for d, v in devices.items() if v['ready'] == True]) &gt; 0
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>In your code you have <code>d</code> iterating through each key in devices (not each value). That's why <code>d['ready']</code> doesn't work: <code>d</code> is a string, like <code>'dev1'</code>. You can iterate the values using <a href="https://docs.python.org/3/library/stdtypes.html#dict.values" rel="nofollow noreferrer"><code>devices.values()</code></a>.</p>
<p>If you want to check if any value in your <code>devices</code> dict is ready, you could use <a href="https://docs.python.org/3/library/functions.html#any" rel="nofollow noreferrer"><code>any</code></a>:</p>
<pre><code>if any(x['ready'] for x in devices.values()):
</code></pre>
<p>If you want to check if they are all ready, you could use <a href="https://docs.python.org/3/library/functions.html#all" rel="nofollow noreferrer"><code>all</code></a>:</p>
<pre><code>if all(x['ready'] for x in devices.values()):
</code></pre>
</div>
<span class="comment-copy">I was so close ;) Thanks, that also do the job!</span>
<span class="comment-copy">Great! It helped a lot! Thanks</span>
