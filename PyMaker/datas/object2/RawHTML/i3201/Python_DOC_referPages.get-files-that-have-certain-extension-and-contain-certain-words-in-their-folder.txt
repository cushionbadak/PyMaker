<div class="post-text" itemprop="text">
<p>I want to make a code that finds files in the subfolders given a main folder  that has certain extension and contain some words in their subfolder's name. How can i do that? </p>
<p>For example get files where their folder has the words 'dis' in their name and get the files that have <code>shp</code> extension in them.</p>
<p>Here is what I tried: </p>
<p>Only the part with the name is not covered.</p>
<pre><code>rootfolder= directory

shapelist = []
   for path, subdirs, files in os.walk(rootfolder):
       for name in files:
           if name.endswith('.shp'):
               shapelist.append(os.path.join(path, name))
</code></pre>
<p>The tree is like: </p>
<pre><code>rootfolder\
    subfolders(including two that have the words diss)\
        files inside these
</code></pre>
<p>Hope it is clear.</p>
</div>
<div class="post-text" itemprop="text">
<p>Using your method and <a href="https://docs.python.org/3/library/os.path.html#os.path.split" rel="nofollow noreferrer">os.path.split</a></p>
<pre><code>shapelist = []
for path, subdirs, files in os.walk(rootfolder):
       # check if 'dis' is in the name of the subfolder
       if 'dis' in os.path.split(path)[-1]:
           for name in files:
               if name.endswith('.shp'):
                   shapelist.append(os.path.join(path, name))
</code></pre>
<p>but this is a better way using <a href="https://docs.python.org/3/library/glob.html#glob.glob" rel="nofollow noreferrer">glob</a></p>
<pre><code>from glob import glob
shapelist = glob(rootfolder + '/**/*dis*/*.shp', recursive=True)
</code></pre>
</div>
<span class="comment-copy">with the last one you  do all that is in the first?</span>
<span class="comment-copy">How to constrain it to search only in a given rootfolder and not everywhere with glob?</span>
<span class="comment-copy">I edited my post to show how to do it from a particular folder -- yes the 2nd method should have equivalent results to the first but run faster.</span>
<span class="comment-copy">Since you provided this method too can you tell me how to search for the extension only with glob?</span>
<span class="comment-copy"><code>glob(rootfolder + '/**/*.shp')</code></span>
