<div class="post-text" itemprop="text">
<p>Suppose I have a color histogram. Is there a slick way in python to generate a random image from the color histogram?</p>
<p>More specifically, I want to generate each pixel with a random color according to the distribution of the color histogram.</p>
<p>thanks!</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.choice.html" rel="nofollow noreferrer">numpy.random.choice</a></p>
<p>The arguments, from the linked docs:</p>
<blockquote>
<p><strong>a</strong> : 1-D array-like or int</p>
<p>If an ndarray, a random sample is generated from its elements. If an
  int, the random sample is generated as if a were np.arange(a)</p>
<p><strong>size</strong> : int or tuple of ints, optional</p>
<p>Output shape. If the given shape is, e.g., (m, n, k), then m * n * k
  samples are drawn. Default is None, in which case a single value is
  returned.</p>
<p><strong>replace</strong> : boolean, optional</p>
<p>Whether the sample is with or without replacement</p>
<p><strong>p</strong> : 1-D array-like, optional</p>
<p>The probabilities associated with each entry in a. If not given the
  sample assumes a uniform distribution over all entries in a.</p>
</blockquote>
<hr/>
<p>The argument <code>shape</code> should be the size of your image, e.g., <code>(100,100)</code>. The argument <code>a</code> should be the distribution, and the argument <code>p</code> should be the distribution generated by the histogram.</p>
<p>For example,</p>
<pre><code>import numpy as np
bins = np.array([0,0.5,1])
freq = np.array([1.,2,3])
prob = freq / np.sum(freq)
image = np.random.choice(bins, size=(100,100), replace=True, p=prob)
plt.imshow(image)
</code></pre>
<p>yields</p>
<p><a href="https://i.stack.imgur.com/weUJe.png" rel="nofollow noreferrer"><img alt="Random image" src="https://i.stack.imgur.com/weUJe.png"/></a></p>
<hr/>
<p>To support multiple color channels, you have several options. Here is one, where we choose from the color indices instead of the colors themselves:</p>
<pre><code>colors = np.array([(255.,0,0), (0,255,0), (0,0,255)])
indices = np.array(range(len(colors)))
im_indices = np.random.choice(indices, size=(100,100), p=prob)
image = colors[im_indices]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/random.html#random.choices" rel="nofollow noreferrer">random.choices</a> can select elements from a weighted population. Example: </p>
<pre><code>&gt;&gt;&gt; import random
&gt;&gt;&gt; histogram = {"white": 1, "red": 5, "blue": 10}
&gt;&gt;&gt; pixels = random.choices(list(histogram.keys()), list(histogram.values()), k=25)
&gt;&gt;&gt; pixels
['blue', 'red', 'red', 'red', 'blue', 'red', 'red', 'white', 'blue', 'white', 'red', 'red', 'blue', 'red', 'blue', 'blue', 'blue', 'blue', 'blue', 'blue', 'blue', 'blue', 'blue', 'blue', 'blue']
</code></pre>
</div>
<span class="comment-copy">What is the format of your histogram? I mean can you show us how you have it stored and give an example?</span>
<span class="comment-copy">Thanks for the answer. One more question though, for colored image, how do we generate color histogram? Since there are three channels, how do we flatten the color range into 1 dimension?</span>
<span class="comment-copy">@jack does that answer your question?</span>
<span class="comment-copy">thanks for the answer. I think I get the idea but the code to generate a color space with shape (255, 255, 255) is not correct though</span>
<span class="comment-copy">@jack sorry, I'm having trouble parsing the second sentence - did I misunderstand your intent (the code works but does the wrong thing), or does the code not work, or is everything working properly?</span>
<span class="comment-copy">Sorry I meant the colors = np.array([(255.,0,0), (0,255,0), (0,0,255)]) does not generate an array with shape (255, 255, 255). Is that what you meant?</span>
