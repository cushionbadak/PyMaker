<div class="post-text" itemprop="text">
<p>I wanted to write output to file and hence I did </p>
<pre><code>sys.stdout = open(outfile, 'w+')
</code></pre>
<p>But then I wanted to print back to console after writing to file</p>
<pre><code>sys.stdout.close()
sys.stdout = None
</code></pre>
<p>And I got</p>
<pre><code>AttributeError: 'NoneType' object has no attribute 'write'
</code></pre>
<p>Obviously the default output stream can't be <code>None</code>, <strong>so how do I say to Python</strong>:</p>
<pre><code>sys.stdout = use_the_default_one()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Reassign to <code>sys.__stdout__</code>.</p>
<p>From the <a href="https://docs.python.org/3.7/library/sys.html#sys.__stdout__" rel="nofollow noreferrer">docs</a></p>
<blockquote>
<p>contain[s] the original values of stdin, stderr and stdout at the start of the program. They are used during finalization, and could be useful to print to the actual standard stream no matter if the sys.std* object has been redirected.</p>
</blockquote>
<p>or you could just do </p>
<pre><code>print(output, file=myoutputfile) 
</code></pre>
<p>and avoid the issue.</p>
</div>
<div class="post-text" itemprop="text">
<p>In Python3 use <a href="https://docs.python.org/3/library/contextlib.html#contextlib.redirect_stdout" rel="nofollow noreferrer">redirect_stdout</a>; a similar case is given as an example:</p>
<blockquote>
<p>To send the output of help() to a file on disk, redirect the output to
  a regular file:</p>
</blockquote>
<pre><code>with open('help.txt', 'w') as f:
    with redirect_stdout(f):
        help(pow)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>As per the answer <a href="https://stackoverflow.com/questions/1218933/can-i-redirect-the-stdout-in-python-into-some-sort-of-string-buffer">here</a> you don't need to save a reference to the old stdout. Just use sys.__stdout__.</p>
<p>Also, you might consider using <code>with open('filename.txt', 'w+') as f</code> and using <code>f.write</code> instead.</p>
</div>
<span class="comment-copy">one way is to store it as <code>default_sysout</code> before assigning to <code>outfile</code> and then assign it back using <code>default_sysout</code> after outfile is closed, but just in case I didn't where can I get it?</span>
<span class="comment-copy"><code>sys.__stdout__</code>: that's exactly what I was looking for. One less variable in my code :) Yeyy!</span>
<span class="comment-copy">Thanks but I want all the warnings and other print statements to print it to the file.</span>
