<div class="post-text" itemprop="text">
<p>I'm trying to port some code from Python 2 to 3, but it's throwing a <code>UnicodeDecodeError</code> when it reads the Google API .p12 service key. </p>
<pre><code>with open('service_key.p12', 'r') as f:
    private_key = f.read()
</code></pre>
<p>Here is the error</p>
<p><code>UnicodeDecodeError: 'utf-8' codec can't decode byte 0x82 in position 1: invalid start byte</code></p>
<p>This code works fine in python 2.7, it breaks with python 3.4 
Also I have <code>pyOpenSSL==0.14</code> installed. </p>
</div>
<div class="post-text" itemprop="text">
<p>In python 3 you have to use the 'b' flag as well for opening binary files:</p>
<pre><code>with open('service_key.p12', 'rb') as f:
    private_key = f.read()
</code></pre>
<p>As described <a href="https://docs.python.org/3/library/io.html#binary-i-o" rel="nofollow">here</a>, Binary I/O will not do character encoding/decoding. You get the UnicodeDecodeError because you used Text I/O, which tries to decode the data as UTF-8, but your data is not valid UTF-8.</p>
</div>
