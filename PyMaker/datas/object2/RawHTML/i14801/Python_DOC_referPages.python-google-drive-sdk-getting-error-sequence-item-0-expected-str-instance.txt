<div class="post-text" itemprop="text">
<p>Consider the code below:</p>
<pre><code>#!/usr/bin/python

import httplib2
import pprint

from apiclient.discovery import build
from apiclient.http import MediaFileUpload
from oauth2client.client import OAuth2WebServerFlow
from oauth2client.client import OAuth2Credentials
from oauth2client import GOOGLE_AUTH_URI
from oauth2client import GOOGLE_REVOKE_URI
from oauth2client import GOOGLE_TOKEN_URI

#Refresh token
REFRESH_TOKEN = ""

# Copy your credentials from the console
CLIENT_ID = ''
CLIENT_SECRET = ''

## Check https://developers.google.com/drive/scopes for all available scopes
OAUTH_SCOPE = ['https://www.googleapis.com/auth/drive','http://localhost:5001/storage/getGDriveAuth']

## Redirect URI for installed apps
REDIRECT_URI = ''


credentials = OAuth2Credentials(None, CLIENT_ID,
                               CLIENT_SECRET, REFRESH_TOKEN, None,
                               GOOGLE_TOKEN_URI, None,
                               revoke_uri=GOOGLE_REVOKE_URI,
                               id_token=None,
                               token_response=None)

# Create an httplib2.Http object and authorize it with our credentials
http = httplib2.Http()
http = credentials.authorize(http)

drive_service = build('drive', 'v2', http=http) #getting error here
file = drive_service.files().list().execute()

pprint.pprint(file)
exit();
</code></pre>
<p>I am getting following error:</p>
<pre><code>Traceback (most recent call last):
  File "python-quickstart/main.py", line 64, in &lt;module&gt;
    drive_service = apiclient.discovery.build('drive', 'v2', http=http)
  File "d:\xampp\htdocs\driveTest\lib\site-packages\oauth2client\util.py", line 137, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "d:\xampp\htdocs\driveTest\lib\site-packages\googleapiclient\discovery.py", line 196, in build
    resp, content = http.request(requested_url)
  File "d:\xampp\htdocs\driveTest\lib\site-packages\oauth2client\util.py", line 137, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "d:\xampp\htdocs\driveTest\lib\site-packages\oauth2client\client.py", line 551, in new_request
    redirections, connection_type)
  File "d:\xampp\htdocs\driveTest\lib\site-packages\httplib2\__init__.py", line 1139, in request
    headers = self._normalize_headers(headers)
  File "d:\xampp\htdocs\driveTest\lib\site-packages\httplib2\__init__.py", line 1107, in _normalize_headers
    return _normalize_headers(headers)
  File "d:\xampp\htdocs\driveTest\lib\site-packages\httplib2\__init__.py", line 195, in _normalize_headers
    return dict([ (key.lower(), NORMALIZE_SPACE.sub(value, ' ').strip())  for (key, value) in headers.items()])
  File "d:\xampp\htdocs\driveTest\lib\site-packages\httplib2\__init__.py", line 195, in &lt;listcomp&gt;
    return dict([ (key.lower(), NORMALIZE_SPACE.sub(value, ' ').strip())  for (key, value) in headers.items()])
TypeError: sequence item 0: expected str instance, bytes found
</code></pre>
<p>Any idea why it is happening?</p>
</div>
<div class="post-text" itemprop="text">
<p>This error occurs because of the difference in the way Python 2 and Python 3 handle byte strings, more details about this are available here:</p>
<p><a href="https://docs.python.org/3/whatsnew/3.0.html" rel="nofollow">https://docs.python.org/3/whatsnew/3.0.html</a></p>
<p>This issue occurs because of the way that oath2client and httplib2 handled strings as bytes - the latest version of <a href="https://github.com/jcgregorio/httplib2" rel="nofollow">httplib2</a> which is newer than the current PyPI version(as of 03/25/2015) has included a work around for this issue.</p>
<p>Eventually the developers might decide on a different solution to the problem, however, you can use the newer version of httplib2 to resolve this problem in your code. </p>
</div>
<span class="comment-copy">Thanks Vishal, I will check it sooner.</span>
