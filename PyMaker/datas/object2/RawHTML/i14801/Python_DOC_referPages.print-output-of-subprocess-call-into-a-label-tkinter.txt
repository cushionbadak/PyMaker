<div class="post-text" itemprop="text">
<p>I am trying to create a GUI in tkinter. The Gui is basically for <a href="http://ww1.microchip.com/downloads/en/DeviceDoc/21952b.pdf" rel="nofollow">Mcp23017</a>. I am trying to configure the input and output pins so that the user could change them according to their choice.. There is also an option to make the inputs/outputs high or low..</p>
<p>Now I am trying to read a pin using 'i2cget'(using a seperate function).. I need to display the output of this subprocess call into a label on the gui.. </p>
<p>This is what my code looks like:</p>
<pre><code>def read_p22():
   output = subprocess.call(['i2cget -y 0x20 0x12 0xFD'],shell=True)
   x=print (output)
   Label(tableframe,textvariable=x).grid(row=2,column=20)
   root.after(5000, read_p22)
</code></pre>
<p>When this function excutes(by pressing a button), however it prints a value '1' on the python shell alternatly when I press the button... I dont know how to redirect the output to the label.. Could somebody suggest something?</p>
<p>Update:: On executing the suggested commands:</p>
<pre><code>process = subprocess.Popen(['i2cget -y 0x20 0x12 0xFD'], stdout=PIPE,      stderr=PIPE, shell=True)
output, code = process.communicate()
</code></pre>
<p>I printed the 'output' and 'process' and they gave me the follwing respectivley:</p>
<pre><code>b'' &lt;subprocess.Popen object at 0x00000000035CB2B0&gt;
</code></pre>
<p>Since nothing is connected to the pin I expect it to return a value of '0'.. I don't know what is the b'' it is giving me ...</p>
<p>Any advice is really appreciated..</p>
<p>Kind Regards,
Namita.</p>
</div>
<div class="post-text" itemprop="text">
<p>What you have is the return code, not the output.</p>
<p>From <a href="https://docs.python.org/2/library/subprocess.html#subprocess.call" rel="nofollow"><code>subprocess.call</code></a> docs:</p>
<blockquote>
<p>Run the command described by args. Wait for command to complete, then <strong>return the returncode attribute</strong>.</p>
</blockquote>
<p>Instead, use <a href="https://docs.python.org/2/library/subprocess.html#subprocess.Popen" rel="nofollow"><code>subprocess.Popen</code></a> to open a process, <a href="https://docs.python.org/2/library/subprocess.html#subprocess.PIPE" rel="nofollow"><code>subprocess.PIPE</code></a> to pipe the output to you, and <a href="https://docs.python.org/2/library/subprocess.html#subprocess.Popen.communicate" rel="nofollow"><code>Popen.communicate</code></a> get the output:</p>
<pre><code>process = subprocess.Popen(['i2cget -y 0x20 0x12 0xFD'], stdout=PIPE, stderr=PIPE, shell=True)
output, code = process.communicate()
# do stuff with output...
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>There are multiple things wrong in your code. You should split your problem into tiny tiny subtasks and complete each task independently.</p>
<h2>1. Get output from a subprocess as a string variable in Python</h2>
<p><a href="https://docs.python.org/3/library/subprocess.html#subprocess.call" rel="nofollow noreferrer"><code>subprocess.call()</code></a> returns an integer (exit status), not string (the output) -- start Python REPL and try to run any command via <code>subprocess</code> and see for yourself: it should help you to understand what is happening in addition to reading the linked documentation.</p>
<p>You could use <code>subprocess.check_output()</code>, to get the output if you don't mind blocking your GUI thread -- nothing will respond until the subprocess returns. </p>
<p>Otherwise (if <code>i2cget</code> does not return in an instant, always), you could <a href="https://stackoverflow.com/questions/15362372/display-realtime-output-of-a-subprocess-in-a-tkinter-widget#comment24334740_15362372">do it asynchroniously using threads or <code>.createfilehandler()</code> method</a>.</p>
<h2>2. Learn why <code>x = print(output)</code> is useless in Python</h2>
<p>It is SyntaxError in Python 2 by default. Otherwise <code>print()</code> function <em>always</em> returns <code>None</code> i.e., you could have written <code>x = None</code> (except that <code>output</code> is printed to stdout as a side-effect).</p>
<h2>3. Update text in a Label</h2>
<ul>
<li>create a label only once instead of creating a new label every 5 seconds</li>
<li><a href="https://gist.github.com/zed/9294978#file-tkinter-read-async-subprocess-output-py-L39" rel="nofollow noreferrer">pass <code>StringVar()</code> as a <code>textvariable</code> parameter</a></li>
<li><a href="https://gist.github.com/zed/9294978#file-tkinter-read-async-subprocess-output-py-L54" rel="nofollow noreferrer">use <code>.set(new_text)</code> to update the text</a></li>
</ul>
</div>
<span class="comment-copy">the b'' you are getting returned is pythons was of displaying an empty byte string, as it does not have a specific encoding with it</span>
<span class="comment-copy">@James Kent: Thank you for clarifying that for me..:) But shouldn't it give me a '0' instead? Or will it give a 0 only when I actually connect something? And also this (b'') still appears on the shell not in the GUI. Is there a way I could put it on the GUI?</span>
<span class="comment-copy">if you don't know what <code>b''</code> is then you should learn some Python first before trying to combine <code>tkinter</code> and <code>subprocess</code>. If you already know some other programming language then <a href="https://docs.python.org/3/tutorial/" rel="nofollow noreferrer">read the official Python tutorial</a> otherwise <a href="https://wiki.python.org/moin/BeginnersGuide/NonProgrammers" rel="nofollow noreferrer">start with Python for Non-Programmers</a></span>
<span class="comment-copy">Thank You for that quick response.. :) I tried what you said.. It gives me a error saying     output, code = process.communicate() NameError: name 'process' is not defined . What am I doing wrong?</span>
<span class="comment-copy">@NamitaRaju if it's not working don't accept the answer. I fixed it by renaming the <code>Popen</code> object to <code>process</code>.</span>
<span class="comment-copy">I am sorry, but I did not understand what you meant by renaming the Popen object..</span>
<span class="comment-copy">@NamitaRaju I've fixed it in the answer itself. The <code>Popen</code> object was named <code>output</code> (first line), and referred to by <code>process</code> (second line).</span>
<span class="comment-copy">What does <code>i2cget -y 0x20 0x12 0xFD</code> return? Update your question to include the output of the command and what you expect to appear. Try and print <code>output</code> to see what it contains.</span>
<span class="comment-copy">@JFSebastian : Thank you for all the tips.. I am a beginner in python and thus the 'not so elegant' code.. I will try and use the suggestions you gave me.. _However regarding the 'subprocess.check_output', whenevr I try to use it and run it in my python 3 in win7 system it gives me the error saying    <code>FileNotFoundError: [WinError 2] The system cannot find the file specified </code>.. I don't really understand why.. Could you suggest something?</span>
<span class="comment-copy">@NamitaRaju: make sure you can run the command that you pass to <code>check_output()</code> from the command-line (if you don't know what "the command-line" is -- <a href="http://learnpythonthehardway.org/book/appendixa.html" rel="nofollow noreferrer">learn it first</a>). If it works from the command line but fails with <code>check_output()</code> then create a <a href="http://stackoverflow.com/help/mcve">minimal but complete code example</a> and <a href="http://stackoverflow.com/questions/ask">post it as a separate question</a>.</span>
<span class="comment-copy">@J.Fsebastian: Sorry I forgot to mention that I tried to run it from the command line too. But it gives me the same error.</span>
<span class="comment-copy">@NamitaRaju: I meant, run the child process manually (without Python) -- so that you would know how the correct command should look like.</span>
