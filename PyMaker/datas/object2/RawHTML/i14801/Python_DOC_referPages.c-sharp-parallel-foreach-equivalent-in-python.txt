<div class="post-text" itemprop="text">
<p>I have 96 txt files that have to be processed. Right now I am using a for loop and doing them one at a time, this process is very slow. The resulting 96 files, do not need to be merged. Is there a way to make them run in parallel, ala Parallel.foreach in C#?
Current code:</p>
<pre><code>for src_name in glob.glob(source_dir+'/*.txt'):
   outfile = open (...)
   with open(...) as infile:
      for line in infile:
         --PROCESS--
   for --condition--:
      outfile.write(...)
   infile.close()
   outfile.close()
</code></pre>
<p>Want this process to run in parallel for all files in source_dir.</p>
</div>
<div class="post-text" itemprop="text">
<p>Assuming that the limiting factor is indeed the processing and not the I/O, you can use <a href="https://pythonhosted.org/joblib/index.html" rel="noreferrer">joblib</a> to easily run your loop on multiple CPUs.</p>
<p>A <a href="https://pythonhosted.org/joblib/parallel.html" rel="noreferrer">simple example from their documentation</a>:</p>
<pre><code>&gt;&gt;&gt; from math import sqrt
&gt;&gt;&gt; from joblib import Parallel, delayed
&gt;&gt;&gt; Parallel(n_jobs=2)(delayed(sqrt)(i ** 2) for i in range(10))
[0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0]
</code></pre>
</div>
<span class="comment-copy">Is the process taking long or is this the reading?</span>
<span class="comment-copy">In the case of CPython, which has a GIL (global interpreter lock), you would need to use the <code>multiprocessing</code> module. But you are in luck because there have been many third-party libraries made on top of multiprocessing for parallel computing.</span>
<span class="comment-copy"><a href="https://docs.python.org/3/library/multiprocessing.html" rel="nofollow noreferrer">docs.python.org/3/library/multiprocessing.html</a></span>
<span class="comment-copy">@Thomas: The total processing time of the 96 files is very slow. I am trying to improve the processing time for one single file, but would be nice to have parallel threads as simply as how its done in C#</span>
<span class="comment-copy">@Reise45 is it <i>always</i> the same 96 files? how long (in lines) is the processing ?</span>
