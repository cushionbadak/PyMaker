<div class="post-text" itemprop="text">
<p>What does the new open file mode "x" do in python 3?</p>
<p>here is the doc of <a href="https://docs.python.org/3/library/functions.html#open">python 3</a>:</p>
<blockquote>
<p>'r': open for reading (default)</p>
<p>'w': open for writing, truncating the file first</p>
<p>'x': open for exclusive creation, failing if the file already exists</p>
<p>'a': open for writing, appending to the end of the file if it exists</p>
<p>'b': binary mode</p>
<p>'t': text mode (default)</p>
<p>'+': open a disk file for updating (reading and writing)</p>
<p>'U': universal newlines mode (deprecated)</p>
</blockquote>
<p>What does "exclusive creation" mean?</p>
<p>I test the "x" mode and find some:</p>
<ul>
<li>It can not be used with "r/w/a"</li>
<li>"x" is only writeable. "x+" can write and read</li>
<li>The file must not exist before <code>open</code></li>
<li>The file will be created after <code>open</code></li>
</ul>
<p>So, "x" is similar to "w". But for "x", <strong>if the file exists, raise FileExistsError</strong>. For "w", it will simply create a new file / truncate the existed file.</p>
<p>Am I right? Is this the only difference?</p>
</div>
<div class="post-text" itemprop="text">
<p>As @Martjin has already said, you have already answered your own question. I would only be amplifying on the explanation in the manual so as to get a better understanding of the text</p>
<p>'x': open for exclusive creation, failing if the file already exists</p>
<p>When you specify <code>exclusive creation</code>, it clearly means, you would use this mode for exclusively creating the file. The need for this is required when you won't accidentally truncate/append an existing file with either of the modes <code>w</code> or <code>a</code>.</p>
<p>In absence of this, developers should be cautious to check for the existence of the file before leaping to open the file for updation.</p>
<p>With this mode, your code would be simply be written as</p>
<pre><code>try:
    with open("fname", "x") as fout:
        #Work with your open file
except FileExistsError:
    # Your error handling goes here
</code></pre>
<p>Previously though your code might had been written as</p>
<pre><code>import os.path
if os.path.isfile(fname):
    # Your error handling goes here
else:
    with open("fname", "w") as fout:
        # Work with your open file
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Yes, that's basically it.</p>
<p>It's handy if you may find two instances of your program running concurrently, the use of <code>x</code> mode will ensure only <em>one</em> will successfully create a file, with the other one failing.</p>
<p>A classic example is daemons that write their process ID into a <code>pid</code> file (so that can be easily signaled). By using <code>x</code>, you can guarantee that only <em>one</em> daemon can be running at a time, something that's harder to do without the <code>x</code> mode, and prone to race conditions.</p>
</div>
<span class="comment-copy">You already answered your own question. Yes, that's right, that is what <code>x</code> means: The same as <code>w</code>  but raises an exception if the file already exists.</span>
<span class="comment-copy">You should note that the "Previously though..." code is prone to race conditions if the state of the file changes between the <code>if</code> evaluation and execution of the <code>else</code> block. That's why <code>'x'</code> was introduced, to prevent race conditions in user code.</span>
