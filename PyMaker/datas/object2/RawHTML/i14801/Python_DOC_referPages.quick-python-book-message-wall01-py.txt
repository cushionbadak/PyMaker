<div class="post-text" itemprop="text">
<p>I was wondering is someone could help me figure out why I keep getting the error AssertionError: Header names/values must be of type str (got b'Content-type')
127.0.0.1 - - [26/Mar/2015 20:50:52] "GET /favicon.ico HTTP/1.1" 500 59. The code comes from "The Quick Python Book" from Manning publishing.</p>
<pre><code>from wsgiref.simple_server import make_server

def message_wall_app(environ, start_response):
    status = b'200 OK' # HTTP Status
    headers = [(b'Content-type', b'text/html; charset=utf-8')]       
    start_response(status, headers)

    # The returned object is going to be printed
    return ["&lt;h1&gt;Message Wall&lt;/h1&gt;"]

httpd = make_server('', 8000, message_wall_app)
print("Serving on port 8000...")

# Serve until process is killed
httpd.serve_forever()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Remove the b's from:</p>
<pre><code>status = '200 OK' # HTTP Status
headers = [('Content-type', 'text/html; charset=utf-8')]
</code></pre>
<p>And add to  <code>return ["&lt;h1&gt;Message Wall&lt;/h1&gt;"]</code>. You read <code>unicode/str</code> and write <code>bytes</code>.</p>
<p>The old docs had a bug where the examples used <code>b'200 OK'</code> etc.. which is what the book may have been based on, there is an old bug report <a href="http://bugs.python.org/issue11968" rel="nofollow">here</a>. The current <a href="https://docs.python.org/3/library/wsgiref.html#module-wsgiref.validate" rel="nofollow">docs</a> show the correct usage.</p>
<p>Once you do that you will see the output at <code>http://localhost:8000/</code> and without error.</p>
</div>
<span class="comment-copy">Thank you. Removing the b's from status and headers and adding it to the return statement making it, "return [b'&lt;h1&gt;Message Wall&lt;/h1&gt;']" made everything work. Thanks so much.</span>
<span class="comment-copy">@JesseJaime, no worries, you're welcome.</span>
