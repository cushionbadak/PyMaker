<div class="post-text" itemprop="text">
<p>I am writing a python 2.54 script that uses the object xml.etree.ElementTree. I'm using the function write in order to write the resulted xml into a file. Thing is, I need to have an XML meta tag: <code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</code>, and as noted in here:
<a href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write" rel="nofollow">https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write</a></p>
<p>All that needs to be done is passing true on the second parameter of write. But that seemed to work only on python 2.6 and up.</p>
<p>Any ideas how can this be done on python 2.5.4 (If this is possible, that is...)</p>
</div>
<div class="post-text" itemprop="text">
<p>As it seems the easiest way to force writing a xml declaration is to pass a different encoding then <code>us-ascii</code> or <code>utf-8</code>. This is not really documented, but a quick look at the <a href="https://hg.python.org/cpython/file/de34c7b097e8/Lib/xml/etree/ElementTree.py#l655" rel="nofollow">source for the <code>write()</code> method</a> reveals this:</p>
<pre><code>def write(self, file, encoding="us-ascii"):
    assert self._root is not None
    if not hasattr(file, "write"):
        file = open(file, "wb")
    if not encoding:
        encoding = "us-ascii"
    elif encoding != "utf-8" and encoding != "us-ascii":
        file.write("&lt;?xml version='1.0' encoding='%s'?&gt;\n" % encoding)
    self._write(file, self._root, encoding, {})
</code></pre>
<p>The comparison is case sensitive, so if you use <code>encoding="UTF-8"</code> (not <code>encoding="utf-8"</code>), you'll end up exactly with what you want.</p>
</div>
