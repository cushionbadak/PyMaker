<div class="post-text" itemprop="text">
<p>I am writing a benchmarking utility using python.  I would like my python program to execute a program and capture the output as well as get its max resource usage.  The following code runs a command and gets its memory and processor usage once per second, but how do I also access the output inside python?  Here is my current setup:</p>
<pre><code>pid = psutil.Popen(cmd_args, shell=False, stdout=subprocess.PIPE)

p = psutil.Process(pid=pid.pid)
x = 0
cpu_util = []
mem_util = []

while p.status() != "zombie":
    if x % 10 == 0:
        with p.oneshot():
            cpu_util.append(p.cpu_percent())
            mem_util.append(p.memory_percent())
    x += 1
    time.sleep(0.1)

max_cpu_load = max(cpu_util)
max_mem_load = max(mem_util)

#What I would like to do, but don't understand
print(pid.stdout)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Assuming you have a Unix box, and you can get the file descriptors of relevant stdin, stdout, ..., you may use the <code>select.select</code> function to monitor the activity on these streams.</p>
<p><a href="https://docs.python.org/3/library/select.html#select.select" rel="nofollow noreferrer">https://docs.python.org/3/library/select.html#select.select</a></p>
</div>
<span class="comment-copy">Do you want to export the output to a file? What do you mean by "get the output"?</span>
<span class="comment-copy">This is similar to the question at <a href="https://stackoverflow.com/questions/38630421/how-to-execute-shell-command-and-stream-output-with-python-and-flask-upon-http-r" title="how to execute shell command and stream output with python and flask upon http r">stackoverflow.com/questions/38630421/…</a> so you may find the answer there helpful.</span>
<span class="comment-copy">@YuZhang, thanks, I updated my question.  I would like to access the stdout and stderr inside my python program.</span>
<span class="comment-copy">Use <code>Popen.communicate()</code>. This related to: <a href="https://stackoverflow.com/questions/31833897/python-read-from-subprocess-stdout-and-stderr-separately-while-preserving-order" title="python read from subprocess stdout and stderr separately while preserving order">stackoverflow.com/questions/31833897/…</a></span>
