<div class="post-text" itemprop="text">
<p>I want to build a dict in python from a list, the key of the dict is the first column and the value of the map is the second column. Is there any elegant way to implement this?</p>
<p>For example,
<code>
A= [[1,2], [1,3], [2,3]]
</code>
The result is
<code>
M={1:[2,3],2:[3]}
</code>
My own way is 
<code>
for row in A:
    if row[0] not in M: M[row[0]] = []
    M[row[0]].append(row[1])
</code>
Is there any better solution? Functional Programming methods are preferred.</p>
</div>
<div class="post-text" itemprop="text">
<p>One way to do this is with a <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="nofollow noreferrer"><code>defaultdict</code></a></p>
<pre><code>from collections import defaultdict

A= [[1,2], [1,3], [2,3]]
d = defaultdict(list)
for k, v in A:
    d[k].append(v)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use <code>setdefault</code>:</p>
<pre><code>A= [[1,2], [1,3], [2,3]]
M = {}                                                                 
for k,v in A:
    M.setdefault(k, []).append(v)

M 
# {1: [2, 3], 2: [3]}
</code></pre>
<p>If it must be functional (Disclaimer: wasteful, not recommended):</p>
<pre><code>import operator, itertools
grps = itertools.groupby(sorted(A, key=operator.itemgetter(0)), operator.itemgetter(0))
M = {k: list(map(operator.itemgetter(1), v)) for k, v in grps}
M
# {1: [2, 3], 2: [3]}
</code></pre>
</div>
<span class="comment-copy">Use the zip function. <a href="https://stackoverflow.com/questions/209840/map-two-lists-into-a-dictionary-in-python" title="map two lists into a dictionary in python">stackoverflow.com/questions/209840/â€¦</a></span>
