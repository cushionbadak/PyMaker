<div class="post-text" itemprop="text">
<p>I run script test.py, for example, and accidentally change the executable file, but the script from this file continues to work.
In the top I can see what executes "python3 test.py" but it is not quite right.
Can I get access to the code that is executed after I changed it?</p>
</div>
<div class="post-text" itemprop="text">
<p>A possible way of recover the source code is using the tools <a href="https://github.com/lmacken/pyrasite" rel="nofollow noreferrer">pyrasite</a> and <a href="https://docs.python.org/3/library/inspect.html" rel="nofollow noreferrer">inspect</a> </p>
<p><strong>Pyrasite</strong> is used to inject code into Python processes and <strong>inspect</strong> is used to retrieve the source code of modules, classes, methods, functions, tracebacks, frame objects, and code objects.</p>
<p>E.g.
Initial file: foobar.py</p>
<pre><code>import time

def test1():
    print "test1"

if __name__ == "__main__":
    while (1):
        time.sleep(1)
        test1()
</code></pre>
<p>Run and modify the file (I changed the printed string by "test2"):</p>
<pre><code>$ python foobar.py 
test1
test1
...
</code></pre>
<p>It still printing <code>test1</code> and if you use pyrasite and inspect you can see the source code of the function that it is running. </p>
<pre><code>$ pyrasite-shell 6243
Pyrasite Shell 2.0
Connected to 'python foobar.py'
Python 2.7.9 (default, Jun 29 2016, 13:08:31) 
[GCC 4.9.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(DistantInteractiveConsole)

&gt;&gt;&gt; import inspect
&gt;&gt;&gt; inspect.getsource(test1)
'def test1():\n\tprint "test1"\n'
</code></pre>
<p>Also, It works if you deleted the file too.</p>
</div>
<span class="comment-copy">your answer is wonderful, I just have a small question, when I try to call inspect(example_function) (yes I'm sorry about this name), the function defined elsewhere is called ('/usr/local/lib/python3.5 dist-packages/pytg/utils.py) and not in the source file, is it possible to do something with it?</span>
<span class="comment-copy">my definition of function @coroutine def example_function(sender):</span>
<span class="comment-copy">I guess that you should import the module</span>
