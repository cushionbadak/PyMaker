<div class="post-text" itemprop="text">
<p>i am trying to perform sentence chunking in my corpus.firstly i loaded my tagged data and then i was trying to perform chunking in that tagged corpus.here is my code.</p>
<pre><code>def load_corpus():
    corpus_root = os.path.abspath('../nlp1/dumpfiles')
    mycorpus = nltk.corpus.reader.TaggedCorpusReader(corpus_root,'.*')
    return mycorpus.tagged_sents()

def sents_chunks(tagg_sents, pos_tag_pattern):
    chunk_freq_dict = defaultdict(int)
    chunker = nltk.RegexpParser(pos_tag_pattern)
    for sent in tagg_sents:
        if not all(sent):
          print("NoneType object in \"{}\": {}".format(sent.label(),sent))
          sent = cast_to_tree_function(filter(bool, sent)) 
        for chk in chunker.parse(sent).subtrees():
            if str(chk).startswith('(NP'):
                phrase = chk.__unicode__()[4:-1]
                #print(phrase)
                if '\n' in phrase:
                    phrase = ' '.join(phrase.split())
                    #print(phrase)
                chunk_freq_dict[phrase] += 1
    #print(chunk_freq_dict)
    return chunk_freq_dict 
</code></pre>
<p>i am getting error somewhere in my corpus ,where and why i dont know.does anyone know what is the issue and how can i solve it? this is the error:</p>
<pre><code>Traceback (most recent call last):
  File "multiwords1.py", line 184, in &lt;module&gt;
    candidates = main(domain_corpus, PATTERN,MIN_FREQ,MIN_CVAL)
  File "multiwords1.py", line 156, in main
    chunks_freqs = sents_chunks(domain_sents, pos_tag_pattern)
  File "multiwords1.py", line 23, in sents_chunks
    for chk in chunker.parse(sent).subtrees():
  File "/usr/local/lib/python3.5/dist-packages/nltk/chunk/regexp.py", line 1208, in parse
    chunk_struct = parser.parse(chunk_struct, trace=trace)
  File "/usr/local/lib/python3.5/dist-packages/nltk/chunk/regexp.py", line 1023, in parse
    chunkstr = ChunkString(chunk_struct)
  File "/usr/local/lib/python3.5/dist-packages/nltk/chunk/regexp.py", line 98, in __init__
    self._str = '&lt;' + '&gt;&lt;'.join(tags) + '&gt;'
TypeError: sequence item 352: expected str instance, NoneType found
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You have a <a href="https://docs.python.org/3/library/exceptions.html#TypeError" rel="nofollow noreferrer">TypeError</a> execption. It's raised with message item 352 from tags hasn't type (NoneType), Ðµhis means that in the <code>sent</code> <a href="https://github.com/nltk/nltk/blob/develop/nltk/tree.py#L37" rel="nofollow noreferrer">(ntlk.tree.Tree class)</a> has a NoneType object in sequence. </p>
<p><a href="https://github.com/nltk/nltk/blob/develop/nltk/chunk/regexp.py#L98" rel="nofollow noreferrer">This line is the reason for the exception</a>, because <a href="https://docs.python.org/3/library/stdtypes.html#str.join" rel="nofollow noreferrer">str.join</a> can take only <a href="https://docs.python.org/3/library/stdtypes.html#str" rel="nofollow noreferrer">str</a>. You need check check each item in the <code>sent</code> <a href="https://docs.python.org/3/library/stdtypes.html#iterator-types" rel="nofollow noreferrer">iterable</a> to the affiliation of the <a href="https://docs.python.org/3/library/stdtypes.html#str" rel="nofollow noreferrer">str type</a>. </p>
<p>You can use <a href="https://docs.python.org/3/library/functions.html#filter" rel="nofollow noreferrer">filter</a> built-in function for this, but the result should be cast to <a href="https://github.com/nltk/nltk/blob/develop/nltk/tree.py#L37" rel="nofollow noreferrer">Tree type</a>.</p>
<p></p>
<pre><code>filter(bool, sent) # return a iterator with valid items
</code></pre>
<p>For check which a iterable object has a NoneType item you can do this:</p>
<pre><code>if not all(sent):
    print("NoneType object in \"{}\": {}".format(sent.label(), sent))
    sent = cast_to_tree_function(filter(bool, sent))  # update set object to valid items
</code></pre>
</div>
<span class="comment-copy">thank you for replying.but i don't know where to use filter and also there are 500 files in my corpus how can i find where the error is? like which file contain this error?</span>
<span class="comment-copy"><a href="https://stackoverflow.com/questions/47758858/typeerror-sequence-item-352-expected-str-instance-nonetype-found?answertab=active#comment82480654_47759650">q</a> |&gt; you can use built-in function <a href="https://docs.python.org/3/library/functions.html#all" rel="nofollow noreferrer">all</a> for this case. My version of the solution is added to the post.</span>
<span class="comment-copy">i did this but still getting the same error                                                                                                      for sent in tagg_sents:         if not all(sent):             print(sent)             print("NoneType object in \"{}\": {}".format(sent.label(), sent))             sent = cast_to_tree_function(filter(bool, sent))          for chk in chunker.parse(sent).subtrees():</span>
<span class="comment-copy">i added these lines in the above code but nothing is happening.i am still getting the same error</span>
