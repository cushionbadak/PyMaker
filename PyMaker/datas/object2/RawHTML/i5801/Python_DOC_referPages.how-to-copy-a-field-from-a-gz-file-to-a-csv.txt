<div class="post-text" itemprop="text">
<p>Is there a way to copy a field, from a .gz file into a txt file without unzipping in either Windows commands or Python?</p>
<ul>
<li>The .gz file is over 15000 lines long </li>
<li>If field 1="SVR" i need to output fields 2, 3, 4, 6, 7, 11, 12, 13 and 21. (if $1 = other, ignore)</li>
<li>Can be written to any other file type, does not have to be txt. </li>
</ul>
</div>
<div class="post-text" itemprop="text">
<p>This can be done using Python's gzip library to read the <code>.gz</code> file, the <code>csv</code> library to parse the CSV file inside and the use of <code>operator.itemgetter()</code> to extract the required items from each row:</p>
<pre><code>from operator import itemgetter
import csv
import gzip

with gzip.open('input.gz', 'rb') as f_gz, open('output.csv', 'wb') as f_output:
    csv_input = csv.reader(f_gz)
    csv_output = csv.writer(f_output)
    req_cols = itemgetter(1, 2, 3, 5, 6, 10, 11, 12, 20)
    csv_output.writerow(req_cols(next(csv_input)))

    for row in csv_input:
        if row[0] == 'SVR':
            csv_output.writerow(req_cols(row))
</code></pre>
<p>So if you had a CSV containing something like:</p>
<pre class="lang-none prettyprint-override"><code>c1,c2,c3,c4,c5,c6,c7,c8,c9,c10,c11,c12,c13,c14,c15,c16,c17,c18,c19,c20,c21,c22
1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22
SVR,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22
3,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22
SVR,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22
</code></pre>
<p>You would get an output CSV file containing:</p>
<pre class="lang-none prettyprint-override"><code>c2,c3,c4,c6,c7,c11,c12,c13,c21
2,3,4,6,7,11,12,13,21
2,3,4,6,7,11,12,13,21
</code></pre>
<p>Tested on Python 2.x. For Python 3.x, the files would need to be opened as:</p>
<pre><code>with gzip.open('input.gz', 'rt', newline='') as f_gz, open('output.csv', 'w', newline='') as f_output:
</code></pre>
</div>
<span class="comment-copy">Switch to Linux and use <code>zgrep</code> and <code>cut</code>.</span>
<span class="comment-copy">Python comes with the <a href="https://docs.python.org/3/library/gzip.html#module-gzip" rel="nofollow noreferrer"><code>gzip</code> module</a> which can read files compressed that way. However there's really no way to avoid reading the file to find the field values you want. Sorry, I don't understand what "$1 = other" means in the context of your question.</span>
<span class="comment-copy">pippy5: Why have you tagged your question with "python" if you don't want to use it?</span>
<span class="comment-copy">Can I output using zgrep and cut though?  The "if $1 = other, ignore" just means that if field 1 is not SVR I don't want to use it.  I do want to use python- I am after it either DOS OR PYTHON. I can make either work. Thanks.</span>
<span class="comment-copy">@pippy5, I can guarantee you are not using <code>DOS</code>. Winzip's command line client can essentially do what you want but it is not a free program.  Not sure if 7zip can do it or not.</span>
<span class="comment-copy">Thanks Martin Evans- I am recieving the follow error....   File "D:\Temp\20171203\split.py", line 37, in &lt;module&gt;     csv_output.writerow(req_cols(next(csv_input))) IndexError: list index out of range&gt;   I am using python 2.7.9</span>
<span class="comment-copy">Is the first row in your file blank (or does not have 22 values) ? The code assumes that it has a header as I have shown in my example. If it does not have a header, you need to remove that line.</span>
<span class="comment-copy">Ohhh okay, I see. Thanks- sorry i am only a newbie. Thanks</span>
