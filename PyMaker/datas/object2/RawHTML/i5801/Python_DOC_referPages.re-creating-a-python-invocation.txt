<div class="post-text" itemprop="text">
<p>Is it possible to patch together a copy-and-pastable invocation for a python program from the invoked program itself? It doesn't have to be exactly the same invocation string, but the arguments should parse to the same thing.</p>
<p>Note that <code>' '.join(sys.argv)</code> won't cut it, unfortunately. The main problem I have with this approach is that it won't properly quote arguments. Consider <code>dummy.py</code> with <code>import sys; print(sys.argv); print(' '.join(sys.argv))</code></p>
<p>Running <code>python dummy.py "1 2"</code> prints:</p>
<pre><code>['dummy.py', '1 2']
dummy.py 1 2
</code></pre>
<p>And of course if we copy the latter we'll get a different invocation. Wrapping each argument in quotes won't work either. Consider <code>dummy2.py</code>:</p>
<pre><code>import sys
print(sys.argv)
print(' '.join('"{}"'.format(s) for s in sys.argv))
</code></pre>
<p>This will break for:</p>
<pre><code>python dummy2.py ' " breaking " '
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>shlex.quote</code>:</p>
<pre><code>import sys
from shlex import quote

print(' '.join(quote(s) for s in sys.argv))
</code></pre>
<p>in shell:</p>
<pre><code>python space_in_argv.py "aa bb" ' " breaking " '
</code></pre>
<p>yields:</p>
<pre><code>space_in_argv.py 'aa bb' ' " breaking " '
</code></pre>
<p>you may also want to include <code>sys.executable</code>, see <a href="https://docs.python.org/3/library/shlex.html#shlex.quote" rel="nofollow noreferrer">more detail in the doc</a>.</p>
</div>
<span class="comment-copy">neat! that's exactly what I was looking for</span>
<span class="comment-copy">@VF1 may I known that what is your intent of this?</span>
<span class="comment-copy">I am running experiments with a python script, specifying parameters via command line. This is useful to quickly re-create the experiment (by copying from a logfile)</span>
