<div class="post-text" itemprop="text">
<p>I'm new to Python and I have simple script to read file and print it to output:</p>
<pre><code>f = open('somefile.txt', mode='rt', encoding='utf-8')

for line in f:
    sys.stdout.write(line)
f.close()
</code></pre>
<p>If file ends with new line symbol it prints all lines from file. But if last line does not contain new line symbol it ends with one before last. I run script in Windows environment and use python 3.6. </p>
<p>For example file for first case:</p>
<pre><code>Some text here
Some here

and here
</code></pre>
<p>And script's output is:</p>
<pre><code>Some text here
Some here
</code></pre>
<p>But when last line contains new line symbol output is:</p>
<pre><code>Some text here
Some here

and here
</code></pre>
<p>What I'm doing wrong?</p>
</div>
<div class="post-text" itemprop="text">
<p>To ensure that the buffer is empty, you could add <code>sys.stdout.flush()</code> after your loop completes to make sure it's empty (as <code>sys.stdout</code> is line buffered).</p>
</div>
<span class="comment-copy">Can't reproduce. Anyway, your code can be simplified a lot. mode <code>rt</code> and encoding <code>utf-8</code> are the defaults for <code>open</code>, so <code>open('somefile.txt', mode='rt', encoding='utf-8')</code> is the same as <code>open('somefile.txt')</code>. Also, it is recommended to use a <code>with</code> clause rather than openning and closing the file manually. Last but not least, why are you manually writing to <code>sys.stdout</code> when you can simply <code>print</code>?</span>
<span class="comment-copy">Is the program running to completion? <code>sys.stdout</code> is line buffered, you might want to try adding <code>sys.stdout.flush()</code> after the loop finishes to make sure nothing is stuck in the buffer.</span>
<span class="comment-copy"><i><a href="https://docs.python.org/3/tutorial/inputoutput.html" rel="nofollow noreferrer">"a newline character (\n) is left at the end of the string, and is only omitted on the last line of the file if the file doesnâ€™t end in a newline"</a></i> &lt;- then, last line is always read, with or without new line.</span>
<span class="comment-copy">OP, are you able to reproduce the issue yourself with the exact code and data you posted?</span>
<span class="comment-copy">thanks DeepSpace for code simplifications. This code is just copy paste from some tutorial. <code>print</code> adds additional new line symbol at the end. So if line ends with new line in file it prints additional empty lines after each line. And it seems that <code>print</code> prints all lines even if last doesn't end with new line. I tried ShadowRanger's suggestion to use <code>sys.stdout.flush()</code> and it works. Thanks a lot</span>
<span class="comment-copy">This does nothing to the file, you just concatenated a bunch of strings in the most inefficient way possible and didn't close the file. There is a <code>read</code> method if you want to get the entire contents of the file. OP's issue is that the file does not appear to be read fully when there's no newline, not the lack of newline itself.</span>
<span class="comment-copy">Now you've completely changed your answer, but I still think this is not the right way to go about doing this.</span>
