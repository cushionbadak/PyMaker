<div class="post-text" itemprop="text">
<p>I am using facebook graph API but getting error when I try to run graph.py
How should I resolve this problem of charmap. I am facing unicode decode error.</p>
<p><a href="https://i.stack.imgur.com/K98jb.png" rel="nofollow noreferrer">enter image description here</a></p>
<p>In graph.py :</p>
<pre><code>table = json2html.convert(json = variable)

     htmlfile=table.encode('utf-8')

     f = open('Table.html','wb')
     f.write(htmlfile)
     f.close()

    #   replacing '&amp;gt'  with '&gt;' and  '&amp;lt' with '&lt;'
     f = open('Table.html','r')
     s=f.read()
     s=s.replace("&amp;gt;","&gt;")
     s=s.replace("&amp;lt;","&lt;")
     f.close()

    #    writting content to html file
     f = open('Table.html','w')
     f.write(s)
     f.close()

     #  output
     webbrowser.open("Table.html")
else:
print("We couldn't find anything for",PageName)
</code></pre>
<p>I could not understand why I am facing this issue. Also getting some error with 's=f.read()' </p>
</div>
<div class="post-text" itemprop="text">
<p>In error message I see it tries to guess encoding used in file when you read it and finally it uses encoding <code>cp1250</code> to read it (probably because Windows use <code>cp1250</code> as default in system) but it is incorrect encoding becuse you saved it as <code>'utf-8'</code>. </p>
<p>So you have to use <code>open( ..., encoding='utf-8')</code> and it will not have to guess encoding.</p>
<pre><code> # replacing '&amp;gt'  with '&gt;' and  '&amp;lt' with '&lt;'
 f = open('Table.html','r', encoding='utf-8')
 s = f.read()
 f.close()

 s = s.replace("&amp;gt;","&gt;")
 s = s.replace("&amp;lt;","&lt;")

 # writting content to html file
 f = open('Table.html','w', encoding='utf-8')
 f.write(s)
 f.close()
</code></pre>
<p>But you could change it before you save it. And then you don't have to open it again.</p>
<pre><code>table = json2html.convert(json=variable)


table = table.replace("&amp;gt;","&gt;").replace("&amp;lt;","&lt;")


f = open('Table.html', 'w', encoding='utf-8')
f.write(table)
f.close()

#  output
webbrowser.open("Table.html")
</code></pre>
<hr/>
<p>BTW: python has function <a href="https://docs.python.org/3/library/html.html" rel="nofollow noreferrer">html.unescape(text)</a> to replace all "chars" like <code>&amp;gt;</code> (so called <a href="https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references" rel="nofollow noreferrer">entity</a>)</p>
<pre><code>import html

table = json2html.convert(json=variable)


table = html.unescape(table)


f = open('Table.html', 'w', encoding='utf-8')
f.write(table)
f.close()

#  output
webbrowser.open("Table.html")
</code></pre>
</div>
<span class="comment-copy">always send error as text.</span>
<span class="comment-copy">you may have to open with correct encoding - ie. <code>latin-1</code> - <code>open(..., encode="latin-1")</code> Use Google to check in what encoding is char <code>0x8d</code></span>
<span class="comment-copy">@furas What edit should I make in my code</span>
<span class="comment-copy">BTW: you could replace in <code>htmlfile</code> and save it and then you don't need to open it again.</span>
<span class="comment-copy">yes, you can change it in <code>htmlfile</code> and save it. In error message I see it tries to guess encoding in file when you read it and finally it uses encoding <code>cp1250</code> to read it (probably because Windows use <code>cp1250</code> as default in system). So next time use <code>open( ..., encoding='utf-8')</code> so it will not guessing.</span>
<span class="comment-copy">thanks man it works fine now.</span>
