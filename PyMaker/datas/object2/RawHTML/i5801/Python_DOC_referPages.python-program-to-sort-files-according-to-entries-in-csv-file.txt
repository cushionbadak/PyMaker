<div class="post-text" itemprop="text">
<pre><code>import os, unicodecsv as csv
# open and store the csv file
IDs = {}
with open('labels.csv','rb') as csvfile:
    timeReader = csv.reader(csvfile, delimiter = ',')
    # build dictionary with associated IDs
    for row in timeReader:
        IDs[row[0]] = row[1]
# move files
path = 'train/'
tmpPath = 'train2/'
for oldname in os.listdir(path):
    # ignore files in path which aren't in the csv file
    if oldname in IDs:
        try:
            os.rename(os.path.join(path, oldname), os.path.join(tmpPath, IDs[oldname]))
        except:
            print 'File ' + oldname + ' could not be renamed to ' + IDs[oldname] + '!'
</code></pre>
<p>I am trying to sort my files according to <a href="https://storage.googleapis.com/kaggle-competitions-data/kaggle/7327/labels.csv.zip?GoogleAccessId=web-data@kaggle-161607.iam.gserviceaccount.com&amp;Expires=1513276539&amp;Signature=VYK7X8FOWuCdPxJEimAuSHitRp4gymGREJXvCBqCPqwr1VU0vdORkEP5H3ffwhmeK1hSciQQ7fV1L05H2sRI3rrcx2YrAGev7NbA9GShTphQ8MPxACVl78hc4%2FSM4H4okpHKnDS2GLRVTY0ZUAoP0ECvC8AHxntNfnEaorrtVTJV7PJNivTp3TMjmzdv3Gns1cIMlqBNJ5SWUNjo41jBOkrLyJVqy92atw6HgkEOQMZfXm%2FdOSCqrizpdnjQa1JuYZYjKfAq9ktCFgplJVLO8%2BubDzvOISpz7Vbpx5iFKsCFy0eCq%2FTZId%2FOlKq0TiQJIs06jK4utGdB8lBB%2B66aZw%3D%3D" rel="nofollow noreferrer">this</a> csv file. But the file contains many ids with same name. Is there a way to move files with same name to 1 folder or adding a number in front of a file if the file with same name already exist in directory?</p>
<pre><code>Example-

id                   name
001232131hja1.jpg     golden_retreiver
0121221122ld.jpg      black_hound
0232113222kl.jpg      golden_retreiver
0213113jjdsh.jpg      alsetian
05hkhdsk1233a.jpg     black_hound
</code></pre>
<p>I actually want to move all the files having id corresponding to golden_retreiver to one folder and so on. </p>
</div>
<div class="post-text" itemprop="text">
<p>Based on what you describe, here is my approach:</p>
<pre><code>import csv
import os

SOURCE_ROOT = 'train'
DEST_ROOT = 'train2'

with open('labels.csv') as infile:
    next(infile)  # Skip the header row
    reader = csv.reader(infile)
    seen = set()
    for dogid, breed in reader:
        # Create a new directory if needed
        if breed not in seen:
            os.mkdir(os.path.join(DEST_ROOT, breed))
            seen.add(breed)

        src = os.path.join(SOURCE_ROOT, dogid + '.jpg')
        dest = os.path.join(DEST_ROOT, breed, dogid + '.jpg')

        try:
            os.rename(src, dest)
        except WindowsError as e:
            print e
</code></pre>
<h1>Notes</h1>
<ul>
<li>For every line in the data file, I create the breed directory at the destination. I use the set <code>seen</code> to make sure that I only create each directory once.</li>
<li>After that, it is a trivia matter of moving files into place</li>
<li>One possible move error: file does not exist in the source dir. In which case, the code just prints out the error and ignore it.</li>
</ul>
</div>
<span class="comment-copy">I'm confused. You are looping through one folder only. How can there be duplicates? Can you share an example?</span>
<span class="comment-copy">Use <a href="https://docs.python.org/3/library/os.path.html#os.path.exists" rel="nofollow noreferrer">docs.python.org/3/library/os.path.html#os.path.exists</a>  to check if item exist.</span>
<span class="comment-copy">ok my bad, will share an example</span>
<span class="comment-copy">@AntonvBR i tried to use isfile function but it always returns false even when there was already a file with same name</span>
<span class="comment-copy">Okay so it looks your values are folder names. In that case you should add old filename to destination:  <code>os.path.join(tmpPath, IDs[oldname],oldname))</code></span>
<span class="comment-copy">Thank you so much sir you just made my day</span>
<span class="comment-copy">Many thanks! I had a smilier issue and the code is perfect :)</span>
