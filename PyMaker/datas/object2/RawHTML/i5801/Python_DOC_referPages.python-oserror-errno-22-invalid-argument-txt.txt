<div class="post-text" itemprop="text">
<p>I have a script that I want to use in order to enumerate all file types in a folder:</p>
<pre><code>#!/usr/bin/env python
# -*- coding: utf-8 -*-

import sys
import argparse
import magic
import os

# Argparse starts here
parser = argparse.ArgumentParser()                              
parser.add_argument('-input', dest='input',help="input one or more files",nargs='+',metavar=None)                           
args = parser.parse_args()

for files in args.input:
    if magic.from_file(files,mime=True) == "text/plain":
        print (files, "=" , magic.from_file(files,mime=True) )
</code></pre>
<p>it works pretty well when I input a file:</p>
<p><a href="https://i.stack.imgur.com/jtMQB.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/jtMQB.png"/></a></p>
<p>even when I input two files:</p>
<p><a href="https://i.stack.imgur.com/27goK.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/27goK.png"/></a></p>
<p>but not when I input <strong>ALL</strong> files:</p>
<p><a href="https://i.stack.imgur.com/cPBLV.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/cPBLV.png"/></a></p>
<p>The error says:</p>
<pre><code>Traceback (most recent call last):
  File "Test.py", line 15, in &lt;module&gt;
    if magic.from_file(files,mime=True) == "text/plain":
  File "C:\Users\FrancescoM\AppData\Local\Programs\Python\Python36-32\lib\site-packages\magic\magic.py", line 135, in from_file
    return m.from_file(filename)
  File "C:\Users\FrancescoM\AppData\Local\Programs\Python\Python36-32\lib\site-packages\magic\magic.py", line 85, in from_file
    with open(filename):
OSError: [Errno 22] Invalid argument: '*.txt'
</code></pre>
<p>But <code>*.txt</code> is exactly what I want to input; I also would like to input whatever file <code>*.*</code> </p>
<p>Is this a problem related to <code>python-magic</code> or caused by the way I input the files? </p>
</div>
<div class="post-text" itemprop="text">
<p>If you want to use things like * then you have to "glob" the files. This can be confusing because the globbing can happen in many places. I'm not familiar with the shell you are using, but if you were using bash then bash would perform the glob <em>before</em> it gets passed to Python. In other words, if *.txt actually matches something, bash replaces it with the list of files and then passes that list to Python (as separate arguments). It's then your job to deal with an arbitrary number of arguments in Python (probably using argparse). If *.txt doesn't match anything then it doesn't get expanded and Python sees *.txt and you have to handle that as an error.</p>
<p>Here it looks like the globbing isn't happening which either means there is nothing for your shell to match or your shell doesn't do globbing. If it doesn't do globbing then you can do the globbing in Python using the <a href="https://docs.python.org/3/library/glob.html" rel="nofollow noreferrer">glob</a> module. Usually globbing is something that is done by the shell, though.</p>
</div>
<div class="post-text" itemprop="text">
<p>trying to open a file called <code>*.txt</code> makes no sense. <code>open</code> doesn't support opening multiple files with a wildcard.</p>
<p>If you want to loop on every file, you have to perform multiple opens for that, using <code>glob.glob</code> to return the matching filenames</p>
<pre><code>import glob
for fexp in glob.glob(filename):
    with open(fexp) as f:
      # do something with the opened file
      pass
</code></pre>
<p>note that if the directory is wrong, <code>glob.glob</code> returns an empty list.</p>
</div>
<span class="comment-copy">trying to open a file called <code>*.txt</code> makes no sense. do you want to loop on every file? you have to perform multiple opens for that.</span>
<span class="comment-copy">Thank you, the solution was to use <code>bash</code> on Windows 10 as this cannot be handled bu <code>CMD</code></span>
