<div class="post-text" itemprop="text">
<p>I'm using <a href="https://github.com/percipient/django-allauth-2fa" rel="nofollow noreferrer">this library</a> to handle two factor auth for a django project, but i'm having some troubles: in my site, i added a <strong>setup.html</strong> page, i set the url on my <strong>urls.py</strong> file but i keep getting this error:</p>
<pre><code>In template C:\Users\Us\lib\site-packages\allauth\templates\base.html, error at line 26
    Reverse for 'account_email' not found. 'account_email' is not a valid view function or pattern name.
    &lt;li&gt;&lt;a href="{% url 'account_email' %}"&gt;Change E-mail&lt;/a&gt;&lt;/li&gt;
</code></pre>
<p>Which is completely weird because i'm not trying to load a file called <strong>base.html</strong> but my own <strong>setup.html</strong> file, which is located in my project's folder (the path is <strong>project-folder&gt;templates&gt;setup.html</strong>). This is the <strong>setup.html</strong> that i would like to load from my own templates:</p>
<pre><code>{% extends 'main/header.html' %}
{% load i18n %}

{% block content %}
&lt;h1&gt;
  {% trans "Setup Two-Factor Authentication" %}
&lt;/h1&gt;

&lt;h4&gt;
  {% trans 'Step 1' %}:
&lt;/h4&gt;

&lt;p&gt;
  {% trans 'Scan the QR code below with a token generator of your choice (for instance Google Authenticator).' %}
&lt;/p&gt;

&lt;img src="{{ qr_code_url }}" /&gt;

&lt;h4&gt;
  {% trans 'Step 2' %}:
&lt;/h4&gt;

&lt;p&gt;
  {% trans 'Input a token generated by the app:' %}
&lt;/p&gt;

&lt;form method="post"&gt;
  {% csrf_token %}
  {{ form.non_field_errors }}
  {{ form.token.label }}: {{ form.token }}

  &lt;button type="submit"&gt;
    {% trans 'Verify' %}
  &lt;/button&gt;
&lt;/form&gt;
{% endblock %}
</code></pre>
<p>It looks like the module that i'm using, instead of loading MY <strong>setup.html</strong> will load something else, but i can't find a way to fix this.</p>
<p>Here is the view that i'm calling to handle the setup (it' the module's view):
<a href="https://github.com/percipient/django-allauth-2fa/blob/master/allauth_2fa/views.py" rel="nofollow noreferrer">https://github.com/percipient/django-allauth-2fa/blob/master/allauth_2fa/views.py</a></p>
<p>And here is my own <strong>urls.py</strong>, where the view that i mentioned is being called:</p>
<pre><code>from django.urls import path
from . import views
from django.conf.urls import url, include

from django.conf.urls import url

from allauth_2fa import views as allauth_2fa_views
app_name = "main"

urlpatterns = [

    path("setup/", allauth_2fa_views.TwoFactorSetup.as_view(), name="setup"),

    path("", views.homepage, name="homepage"),
    path("register/", views.register, name="register"),
    path("logout/", views.logout_request, name="logout"),
    path("login/", views.login_request, name="login"),

]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The <code>TwoFactorSetup</code> view is using a template <em>setup.html</em> in a folder <em>allauth_2fa</em>. So all you need to do is place your <em>setup.html</em> inside a folder with the same name: <em>app_folder/templates/allauth_2fa/setup.html</em> to override it.</p>
<p>Alternatively, subclass <code>TwoFactorSetup</code> and just change the <code>template_name</code> attribute to point to your template and use that view in your <em>urls.py</em>:</p>
<pre><code>from allauth_2fa.views import TwoFactorSetup

class MySetup(TwoFactorSetup):
    template_name = 'my_app/setup.html'
</code></pre>
</div>
<span class="comment-copy">Hey! Thanks for your answer. How can i subclass TwoFactorSetup?</span>
<span class="comment-copy">I tried like this: app_folder/templates/allauth_2fa/setup.html but it will still give the error. Looks like a base.html file is missing apparently</span>
<span class="comment-copy">Are you extending <i>base.html</i> in your <i>setup.html</i>?</span>
<span class="comment-copy">My bad. I made a typo while creating the folder, it seems to be working now!</span>
