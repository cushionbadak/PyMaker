<div class="post-text" itemprop="text">
<p>*Please note I am new to Python....</p>
<p>I am attempting to write a script for a large CSV file. 
My aim is to search (like grep) the 2nd column of the CSV for a complex <em>phrase</em> containing a <strong>string</strong>, followed by a <strong>special character</strong> and then <strong>integer</strong> eg "Mainbalance-7-0" or "Mainbalance-8-0"</p>
<p>The string is always 'Mainbalance".</p>
<p>The special characters are always "-". </p>
<p>The integer changes. </p>
<p>If found the phrase is found, I want to <em>output the whole row to a <strong>new csv</strong> file.</em> </p>
<p>I have looked at other answers on here but cant find the specifics of this.</p>
<p>The input looks like:</p>
<blockquote>
<p>BAL,04,PSMS-5-13,0,BUCKET,WORD</p>
<p>BAL,03,Mainbalance-6-0,36,MAIN,WORD</p>
<p>BAL,020,PLUSC-122-0,36,MAIN,WORD</p>
<p>BAL,05,Mainbalance-7-0,36,MAIN,WORD</p>
</blockquote>
<p>For output to be:</p>
<blockquote>
<p>BAL,03,Mainbalance-6-0,36,MAIN,WORD</p>
<p>BAL,05,Mainbalance-7-0,36,MAIN,WORD</p>
</blockquote>
<p>I have tried the below... </p>
<pre><code>with open("D:/Temp/input.csv", 'rb') as f, open('D:/Temp/output.csv','wb') as outf:
    writer = csv.writer(outf, delimiter=',')
    reader = csv.reader(f)
    for line in f:
        if 'Mainbalance*' in line:
            writer.writerow(line)
</code></pre>
<p>With the file created with NO results printed. </p>
</div>
<div class="post-text" itemprop="text">
<p>You should be iterating over the <code>reader</code> object as Stephen pointed out in comments and checking the third column of each row. Then, if checking a column value to start with <code>Mainbalance</code> is reliable enough, you can use <a href="https://docs.python.org/3/library/stdtypes.html#str.startswith" rel="nofollow noreferrer"><code>str.startswith()</code></a>:</p>
<pre><code>for line in reader:
    if line[2].startswith("Mainbalance"):
        writer.writerow(line)
</code></pre>
<p>Or, if a more detailed check is required, we can create a regular expression pattern like <code>Mainbalance-\d+-\d+</code> where <code>\d+</code> would match one or more digits:</p>
<pre><code>import re

# ...

pattern = re.compile(r"Mainbalance-\d+-\d+")
for line in reader:
    if pattern.match(line[2]):
        writer.writerow(line)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The code does not work since 'Mainbalance*' is not a Regex</p>
<pre><code>if 'Mainbalance*' in line: # resolves to false, as * is not in the string.
</code></pre>
<p>Change the code by <strong>removing the star</strong>, then the code works.</p>
<pre><code>if 'Mainbalance' in line: # star is removed
</code></pre>
</div>
<span class="comment-copy">You should not be reading from <code>f</code>, you should be reading from <code>reader</code>.</span>
<span class="comment-copy">Of course! Sorry- my mistake- thanks for your help</span>
<span class="comment-copy">@pippy5 changing <code>f</code> to <code>reader</code> cannot solve your problem completely, it is a part of the problem - <code>'Mainbalance*' in line</code> would still be false for all the presented lines in the input csv.</span>
<span class="comment-copy">Yep- thanks alecxe. Trying your below code now.</span>
<span class="comment-copy">Yep. This worked perfectly!  Thank you @alecxe</span>
<span class="comment-copy">@pippy5, If this answer solved your question you should mark it as <i>"chosen"</i> by clicking the tick under the votes counter (left of the answer). It will tell other users who reach this question that the solution works, it will give you rep. points, it'll give the person who answered rep. points... Everybody happy! <b>:-)</b> See: <a href="https://meta.stackexchange.com/q/5234">meta.stackexchange.com/q/5234</a></span>
