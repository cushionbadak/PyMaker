<div class="post-text" itemprop="text">
<p>I am trying to write a code that will download all the data from a server which holds the .rar files about imaginary cadastrial particles for student projects. What I got for now is the query for the server which only needs to input a specific number of particle and access it as url to download the .rar file. </p>
<pre><code>url = 'http://www.pg.geof.unizg.hr/geoserver/wfs?request=getfeature&amp;version=1.0.0&amp;service=wfs&amp;&amp;propertyname=broj,naziv_ko,kc_geom&amp;outputformat=SHAPE-ZIP&amp;typename=gf:katastarska_cestica&amp;filter=&lt;Filter+xmlns="http://www.opengis.net/ogc"&gt;&lt;And&gt;&lt;PropertyIsEqualTo&gt;&lt;PropertyName&gt;broj&lt;/PropertyName&gt;&lt;Literal&gt;1900/1&lt;/Literal&gt;&lt;/PropertyIsEqualTo&gt;&lt;PropertyIsEqualTo&gt;&lt;PropertyName&gt;naziv_ko&lt;/PropertyName&gt;&lt;Literal&gt;Suma Striborova Stara (9997)&lt;/Literal&gt;&lt;/PropertyIsEqualTo&gt;&lt;/And&gt;&lt;/Filter&gt;'
</code></pre>
<p>This is the "url" I want to open with the web browser module for a particle "1900/1" but this way I get an error: </p>
<blockquote>
<p>This XML file does not appear to have any style information associated with it. The document tree is shown below.</p>
</blockquote>
<p>When I manually input this url it downloads the file without a problem.
What is the way I can make this python web application work?
I used a <code>webbrowser.open_new(url)</code> option which does not work.</p>
</div>
<div class="post-text" itemprop="text">
<p>You're using the wrong tool. <code>webbrowser</code> is for controlling a native web browser. If you just want to download a file, use the <a href="http://docs.python-requests.org/en/master/" rel="nofollow noreferrer"><code>requests</code></a> module (or <a href="https://docs.python.org/3/library/urllib.request.html#module-urllib.request" rel="nofollow noreferrer"><code>urllib.request</code></a> if you can't install Requests).</p>
<pre><code>import requests

r = requests.get('http://www.pg.geof.unizg.hr/geoserver/wfs', params={
    'request': 'getfeature',
    ...
    'filter': '&lt;Filter xmlns=...&gt;'
})
print(r.content) # or write it to a file, or whatever
</code></pre>
<p>Note <code>requests</code> will handle encoding GET parameters for you -- you don't need to worry about escaping the request yourself.</p>
</div>
<span class="comment-copy">Should there be an empty space between Stara and (9997)? I can't dl the file.</span>
<span class="comment-copy">@AntonvBR no. it's a valid link.</span>
<span class="comment-copy">thanks, i got this part working, but how can i get a .rar file as an output? It is automatically downloaded when you reach this link, so that's why I tried with webbrowser module.</span>
