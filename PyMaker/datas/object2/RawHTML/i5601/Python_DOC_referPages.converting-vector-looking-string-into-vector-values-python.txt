<div class="post-text" itemprop="text">
<p>I have a list of vector looking strings i.e.: '[1, 5, 7, 2, n]' and want to convert them to a vector, I tried:</p>
<pre><code>import numpy as np

string = '[1, 4, 7, 42]' ##(or in my case the result of os.popen(cmd).read() )
vector = np.fromstring(string, sep=', ')

print vector 
[]
</code></pre>
<p>The same if I change the sep value to ' ', how do I get it distinguish the values correctly?</p>
</div>
<div class="post-text" itemprop="text">
<p>The problem are the brackets.</p>
<pre><code>&gt;&gt;&gt; np.fromstring('1, 4, 7, 42', sep=',')
array([  1.,   4.,   7.,  42.])
</code></pre>
<p>I suggest that you use <code>ast.literal_eval</code> and then convert the result to a numpy array.</p>
<pre><code>&gt;&gt;&gt; from ast import literal_eval
&gt;&gt;&gt; np.array(literal_eval('[1, 4, 7, 42]'))
array([ 1,  4,  7, 42])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If you want to be really lazy, use the <code>np.matrix</code> constructor:</p>
<pre><code>&gt;&gt;&gt; np.array(np.matrix(string)).ravel()
array([ 1,  4,  7, 42])
</code></pre>
<p>or even less clean but shorter:</p>
<pre><code>&gt;&gt;&gt; np.matrix(string).A[0]
array([ 1,  4,  7, 42])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>A naive but simple approach would be</p>
<pre><code>string = "[1, 2, 3, 4]"
arr = [int(i.strip()) for i in string[1:-1].split(",")]
</code></pre>
<p>you can then convert that to a numpy array</p>
<pre><code>np.array(arr)
</code></pre>
</div>
<span class="comment-copy">Use <a href="https://docs.python.org/3/library/ast.html#ast.literal_eval" rel="nofollow noreferrer"><code>ast.literal_eval</code></a></span>
