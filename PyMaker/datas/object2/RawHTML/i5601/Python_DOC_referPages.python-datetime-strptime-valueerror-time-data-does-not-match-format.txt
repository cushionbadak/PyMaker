<div class="post-text" itemprop="text">
<p>I am new in Python. I try write program who will read from file and write it to database. There is part of my code :</p>
<pre><code>import datetime

format = '[%d/%b/%Y:%I:%M:%S '
mytime = '[29/Oct/2017:13:11:38 '
now = datetime.datetime.strptime(mytime, format)
</code></pre>
<p>When I run script I have this error :</p>
<pre><code> now = datetime.datetime.strptime(mytime, format)
  File "/usr/lib/python2.7/_strptime.py", line 332, in _strptime
    (data_string, format))
ValueError: time data '[29/Oct/2017:13:11:38 ' does not match format '[%d/%b/%Y:%I:%M:%S '
</code></pre>
<p>I dont understood this mistake. It match format. There is no extra space or anything like that. And I use this 2 lines of code </p>
<pre><code>format = '[%d/%b/%Y:%I:%M:%S '
now = datetime.datetime.strptime(mytime, format)
</code></pre>
<p>in another program and it works fine. Where is problem ? </p>
</div>
<div class="post-text" itemprop="text">
<p>Looking at <a href="https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior" rel="nofollow noreferrer">the docs</a>, <code>%I</code> matches hours for times in AM/PM format, meaning valid values range from 01 to 12. You have 13 (1 PM)</p>
<p>I guess you need to use <code>%H</code></p>
<pre><code>import datetime

mytime = '[29/Oct/2017:13:11:38 '
fmt = '[%d/%b/%Y:%H:%M:%S '
now = datetime.datetime.strptime(mytime, fmt)
print("now: %s" % now.strftime('%Y-%m-%d %H:%M:%S'))
</code></pre>
<p>prints:</p>
<pre><code>now: 2017-10-29 13:11:38
</code></pre>
<p>Check this:</p>
<pre><code>fmt = '[%d/%b/%Y:%I:%M:%S '

for test in range(1, 24):
    mytime = '[29/Oct/2017:%02d:11:38 ' % test
    now = datetime.datetime.strptime(mytime, fmt)
    print("now: %s" % now.strftime('%Y-%m-%d %H:%M:%S'))
</code></pre>
<p>Will work "fine" (I quote because <code>12</code> is assumed to be midnight) until <code>test</code> hits <code>13</code>:</p>
<pre><code>now: 2017-10-29 01:11:38
now: 2017-10-29 02:11:38
now: 2017-10-29 03:11:38
now: 2017-10-29 04:11:38
now: 2017-10-29 05:11:38
now: 2017-10-29 06:11:38
now: 2017-10-29 07:11:38
now: 2017-10-29 08:11:38
now: 2017-10-29 09:11:38
now: 2017-10-29 10:11:38
now: 2017-10-29 11:11:38
now: 2017-10-29 00:11:38
Traceback (most recent call last):
  File "./stack_096.py", line 12, in &lt;module&gt;
    now = datetime.datetime.strptime(mytime, fmt)
  File "/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/_strptime.py", line 500, in _strptime_datetime
    tt, fraction = _strptime(data_string, format)
  File "/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/_strptime.py", line 337, in _strptime
    (data_string, format))
ValueError: time data '[29/Oct/2017:13:11:38 ' does not match format '[%d/%b/%Y:%I:%M:%S '
</code></pre>
</div>
<span class="comment-copy">%I ? you mean <code>'[%d/%b/%Y:%H:%M:%S '</code> right?</span>
<span class="comment-copy">which explains that it worked in another program (by luck!=</span>
<span class="comment-copy">good point. I edited to add a more detailed explanation on where it'd break</span>
