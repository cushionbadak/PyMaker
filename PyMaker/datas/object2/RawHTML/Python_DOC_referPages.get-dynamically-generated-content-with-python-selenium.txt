<div class="post-text" itemprop="text">
<p>This question has been asked before, but I've searched and tried and still can't get it to work. I'm a beginner when it comes to Selenium.</p>
<p>Have a look at: <a href="https://finance.yahoo.com/quote/FB" rel="nofollow noreferrer">https://finance.yahoo.com/quote/FB</a></p>
<p>I'm trying to web scrape the "Recommended Rating", which in this case at the time of writing is 2. I've tried:</p>
<pre><code>driver.get('https://finance.yahoo.com/quote/FB')
time.sleep(10)
rating = driver.find_element_by_css_selector('#Col2-4-QuoteModule-Proxy &gt; div &gt; section &gt; div &gt; div &gt; div')
print(rating.text)
</code></pre>
<p>...which doesn't give me an error, but doesn't print any text either. I've also tried with xpath, class_name, etc. Instead I tried:</p>
<pre><code>source = driver.page_source
print(source)
</code></pre>
<p>This doesn't work either, I'm just getting the actual source without the dynamically generated content. When I click "View Source" in Chrome, it's not there. I tried saving the webpage in chrome. Didn't work.</p>
<p>Then I discovered that if I save the entire webpage, including images and css-files and everything, the source code is different from the one where I just save the HTML.</p>
<p><a href="https://i.stack.imgur.com/AmgBr.jpg" rel="nofollow noreferrer">Image</a></p>
<p>The HTML-file I get when I save the entire webpage using Chrome DOES contain the information that I need, and at first I was thinking about using pyautogui to just Ctrl + S every webpage, but there must be another way.</p>
<p>The information that I need is obviosly there, in the html-code, but how do I get it without downloading the entire web page?</p>
</div>
<div class="post-text" itemprop="text">
<p>Try this to execute the dynamically generated content (JavaScript):</p>
<p><code>driver.execute_script("return document.body.innerHTML")</code></p>
<p>See similar question:
<a href="https://stackoverflow.com/questions/7794087/running-javascript-in-selenium-using-python">Running javascript in Selenium using Python</a></p>
</div>
<div class="post-text" itemprop="text">
<p>First, you need to wait for the element to be clickable, then make sure you scroll down to the element before getting the rating. Try</p>
<pre><code>element.location_once_scrolled_into_view
element.text
</code></pre>
<p>EDIT:</p>
<p>Use the following XPath selector:</p>
<pre><code>'//a[@data-test="recommendation-rating-header"]//following-sibling::div//div[@class="rating-text Arrow South Fw(b) Bgc($buy) Bdtc($buy)"]'
</code></pre>
<p>And than you will have:</p>
<pre><code>rating = driver.find_element_by_css_selector('//a[@data-test="recommendation-rating-header"]//following-sibling::div//div[@class="rating-text Arrow South Fw(b) Bgc($buy) Bdtc($buy)"]')
</code></pre>
<p>To extract the value of the slider, use</p>
<pre><code>val = rating.get_attribute("aria-label")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The CSS selector, <code>div.rating-text</code>, is working just fine and is unique on the page. Returning <code>.text</code> will give you the value you are looking for.</p>
</div>
<span class="comment-copy">Unfortunately, this doesn't change anything. I still get the same HTML-code as before.</span>
<span class="comment-copy">That CSS-selector works fine and it gives me 56, which is the "Total ESG-score", but it's not that element I'm trying to find. I'm trying to find the Recommended Rating, a scale from 1 to 5.   I've tried with xpath, css_selector, class_name, but I can't get it to work.</span>
<span class="comment-copy">See updated answer.</span>
