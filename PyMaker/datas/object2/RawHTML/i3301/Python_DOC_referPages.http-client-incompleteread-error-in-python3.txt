<div class="post-text" itemprop="text">
<p>I'm trying to scrape a <a href="https://www.worldcubeassociation.org/results/events.php?eventId=222&amp;regionId=&amp;years=&amp;show=All%2BPersons&amp;average=Average" rel="nofollow noreferrer">really long web page</a> with beautifulsoup4 and python3. Due to the size of the website, <code>http.client</code> throws me an error when I try to search for something in the website:</p>
<blockquote>
<p>File "/anaconda3/lib/python3.6/http/client.py", line 456, in read return self._readall_chunked()
  File "/anaconda3/lib/python3.6/http/client.py", line 570, in _readall_chunked raise IncompleteRead(b''.join(value))
  http.client.IncompleteRead: <strong>IncompleteRead(16109 bytes read)</strong></p>
</blockquote>
<p>Is there any way to get around this error?</p>
</div>
<div class="post-text" itemprop="text">
<p>As the docs for <a href="https://docs.python.org/3/library/http.client.html" rel="nofollow noreferrer"><code>http.client</code></a> tell you right at the top, this is a very low-level library, meant primarily to support <a href="https://docs.python.org/3/library/urllib.request.html" rel="nofollow noreferrer"><code>urllib</code></a>, and:</p>
<blockquote>
<p>See also <a href="http://docs.python-requests.org/" rel="nofollow noreferrer">The Requests package</a> is recommended for a higher-level HTTP client interface.</p>
</blockquote>
<p>If you can <code>conda install requests</code> or <code>pip install requests</code>, your problem becomes trivial:</p>
<pre><code>import requests
req = requests.get('https://www.worldcubeassociation.org/results/events.php?eventId=222&amp;regionId=&amp;years=&amp;show=All%2BPersons&amp;average=Average')
soup = BeautifulSoup(req.text, 'lxml')
</code></pre>
<p>If you can't install a third-party library, working around this is <em>possible</em>, but not actually supported, and not easy. None of the chunk-handling code in <code>http.client</code> is public or documented, but the docs do link you to <a href="https://github.com/python/cpython/blob/3.7/Lib/http/client.py#L217" rel="nofollow noreferrer">the source</a>, where you can see the private methods. In particular, notice that <code>read</code> calls a method named <code>_readall_chunked</code>, which loops over calling a <code>_safe_read</code> method on <code>_get_chunk_left</code>. That <code>_safe_read</code> method is the code you'll need to replace (e.g., by subclassing <code>HTTPResponse</code>, or monkeypatching it) to work around this problem. Which probably isn't going to be nearly as easy or fun as just using a higher-level library.</p>
</div>
<span class="comment-copy">The <a href="https://docs.python.org/3/library/http.client.html" rel="nofollow noreferrer"><code>http.client</code></a> library is pretty low-level. I believe you can solve this by manually reading and assembling the chunks, but it's kind of a pain. If possible, it would be much easier to switch to <code>requests</code> if you can use a third-party library, or <code>urllib</code> if you can't. (In fact, it even says this right at the top of the docsâ€¦) Is there a reason you can't do that?</span>
<span class="comment-copy">If you <i>do</i> need to stick with <code>http.client</code>, and you want us to show how to fix your code, you're going to have to give us the relevant code (and ideally a <a href="https://stackoverflow.com/help/mcve">Minimal, Complete, and Verifiable example</a>, not just a snippet from a larger program that can't be run and debugger).</span>
