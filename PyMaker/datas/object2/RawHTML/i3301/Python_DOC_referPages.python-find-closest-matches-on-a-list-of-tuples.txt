<div class="post-text" itemprop="text">
<p>I have a list of the following form:</p>
<p><code>[("AAPL", "Apple Inc."), ("TSLA", "Tesla Inc."), ("BB", "BlackBerry Limited")]</code></p>
<p>I want to find the closest match when a user enters either a company name OR a symbol. For example:</p>
<p><code>IN: "Apple I"
 Out: "AAPL"</code></p>
<p><code>IN:"BB"
 OUT:"BB"</code></p>
<p>I tried using <a href="https://docs.python.org/3/library/difflib.html#difflib.get_close_matches" rel="nofollow noreferrer">difflib.get_close_matches</a> but I was having trouble figuring out a good way to keep the company name and ticker symbol together</p>
</div>
<div class="post-text" itemprop="text">
<blockquote>
<p>good way to keep the company name and ticker symbol together</p>
</blockquote>
<p>We just need to make an intermediate mapping for it:</p>
<pre><code>import difflib

data = [("AAPL", "Apple Inc."), ("TSLA", "Tesla Inc."), ("BB", "BlackBerry Limited")]
index = {name.lower(): symbol for symbol, name in data}
index.update({symbol.lower(): symbol for symbol, name in data})

def search_for_company(text):
    return set(
        index[name_or_symbol]
        for name_or_symbol in difflib.get_close_matches(text.lower(), index.keys())
    )

 print search_for_company('Apple I')  # set(['AAPL'])
 print search_for_company('BB')  # set(['BB'])
 print search_for_company('aapl')  # set(['AAPL'])
</code></pre>
</div>
<span class="comment-copy">Entering <code>aapl</code> yields an empty list</span>
<span class="comment-copy">@APorter1031 Thanks a lot, I changed my code drastically</span>
