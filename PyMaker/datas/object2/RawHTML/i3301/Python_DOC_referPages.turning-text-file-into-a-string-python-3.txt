<div class="post-text" itemprop="text">
<p>I want to convert a text file into a string and I was given this function to start with, which was written in Python 2:</p>
<pre><code>def parseOutText(f):
    f.seek(0)  
    all_text = f.read()

    content = all_text.split("X-FileName:")
    words = ""
    if len(content) &gt; 1:
        text_string = content[1].translate(string.maketrans("", ""), string.punctuation)

        words = text_string

        ### split the text string into individual words, stem each word,
        ### and append the stemmed word to words (make sure there's a single
        ### space between each stemmed word)

    return words
</code></pre>
<p>As you can see I have to add some code to this function, but it does not compile (compiler gives error, saying 'string' does not have function 'maketrans'). I am sure this code can easily be translated to Python 3 but I dont really understand what it does until the comment line. Does it simply omit punctuation and convert text to string?</p>
</div>
<div class="post-text" itemprop="text">
<p>Python 3.x <a href="https://docs.python.org/3/library/stdtypes.html#str.maketrans" rel="nofollow noreferrer"><code>maketrans</code></a> and <a href="https://docs.python.org/3/library/stdtypes.html#str.translate" rel="nofollow noreferrer"><code>translate</code></a> have all the basic functionality of their Python 2 predecessors, and moreâ€”but they have a different API. So, you have to understand what they're doing to use them.</p>
<p><a href="https://docs.python.org/2/library/stdtypes.html#str.translate" rel="nofollow noreferrer"><code>translate</code></a> in 2.x took a very simple <code>table</code>, make by <a href="https://docs.python.org/2/library/string.html#string.maketrans" rel="nofollow noreferrer"><code>string.maketrans</code></a>, plus a separate <code>deletechars</code> list.</p>
<p>In 3.x, the table is more complicated (in large part because it's now translating Unicode characters, not bytes, but it also has other new features). The table is made by a static method <code>str.maketrans</code> instead of a function <code>string.maketrans</code>. And the table includes the deletions list, so you don't need a separate argument to <code>translate</code>.</p>
<p>From the docs:</p>
<pre><code>static str.maketrans(x[, y[, z]])
</code></pre>
<blockquote>
<p>This static method returns a translation table usable for <code>str.translate()</code>.</p>
<p>If there is only one argument, it must be a dictionary mapping Unicode ordinals (integers) or characters (strings of length 1) to Unicode ordinals, strings (of arbitrary lengths) or <code>None</code>. Character keys will then be converted to ordinals.</p>
<p>If there are two arguments, they must be strings of equal length, and in the resulting dictionary, each character in <em>x</em> will be mapped to the character at the same position in <em>y</em>. If there is a third argument, it must be a string, whose characters will be mapped to <code>None</code> in the result.</p>
</blockquote>
<hr/>
<p>So, to make a table that deletes all punctuation and does nothing else in 3.x, you do this:</p>
<pre><code>table = str.maketrans('', '', string.punctuation)
</code></pre>
<p>And to apply it:</p>
<pre><code>translated = s.translate(table)
</code></pre>
<hr/>
<p>Meanwhile, since you're dealing with Unicode, are you sure <code>string.punctuation</code> is what you want? As <a href="https://docs.python.org/3/library/string.html#string.punctuation" rel="nofollow noreferrer">the docs</a> say, this is:</p>
<blockquote>
<p>String of ASCII characters which are considered punctuation characters in the C locale.</p>
</blockquote>
<p>So, for example, curly quotes, punctuation used in languages other than English, etc. will not be removed.</p>
<p>If that's an issue, you'd have to do something like this:</p>
<pre><code>translated = ''.join(ch for ch in s if unicodedata.category(ch)[0] != 'P')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>So I found this piece of code and it works like a charm:</p>
<pre><code>exclude = set(string.punctuation)
string = ''.join(ch for ch in string if ch not in exclude)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<hr/>
<p>change this line</p>
<pre><code>text_string = content[1].translate(string.maketrans("", ""), string.punctuation)'
</code></pre>
<p>to this</p>
<pre><code>text_string = content[1].translate((str.maketrans("", ""), string.punctuation)) '
</code></pre>
</div>
<span class="comment-copy">I am sure its <code>str.maketrans()</code></span>
<span class="comment-copy">@Emmanuel that seems to be correct, now it gives me error saying that function takes only one argument. I simply removed second argument and it does print text, but does not remove punctuation</span>
<span class="comment-copy">@Ach113 That can't be right. <a href="https://docs.python.org/3/library/stdtypes.html#str.maketrans" rel="nofollow noreferrer"><code>maketrans</code></a> optionally takes three arguments, it doesn't just take one.</span>
<span class="comment-copy">Anyway, read the docs for <code>maketrans</code> and <code>translate</code>. They're not exactly the same as the Python 2.x functions, so you have to understand what they're doing if you want to use them.</span>
