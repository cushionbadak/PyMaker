<div class="post-text" itemprop="text">
<p>I am trying to see if a sentence is present in the response back from a request. </p>
<pre><code>import requests

r = requests.get('https://www.eventbrite.co.uk/o/piers-test-16613670281')
text = 'Sorry, there are no upcoming events'

if text in r.content: 
   print('No Upcoming Events')
</code></pre>
<p>I am getting the following error:</p>
<pre><code>TypeError: a bytes-like object is required, not 'str'
</code></pre>
<p>I am not quite sure why this occurring and what the solution would be.</p>
</div>
<div class="post-text" itemprop="text">
<p><code>r.content</code> is a <code>bytes</code> object but <code>text</code> is <code>str</code>, so you can't do the <code>__contains__</code> (<code>in</code>) check on another directly.</p>
<p>You can easily (re-)define the <code>text</code> object to be a bytestring:</p>
<pre><code>text = b'Sorry, there are no upcoming events'
</code></pre>
<p>Now, you can do <code>if text in r.content:</code>.</p>
<p>or you can use <code>r.text</code> to get the <code>str</code> representation directly, and use <code>text</code> as-is (as <code>str</code>).</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="http://docs.python-requests.org/en/master/user/quickstart/#binary-response-content" rel="noreferrer"><code>r.content</code></a> returns a <code>bytes</code> like object in Python 3.x. To check, do:</p>
<pre><code>&gt;&gt;&gt; type(r.content)
&lt;class 'bytes'&gt;
</code></pre>
<p>There are multiple ways to fix your issue. For example:</p>
<ol>
<li><p><strong>Decode <code>r.content</code> to string</strong>: You can <code>decode</code> it to string as:</p>
<pre><code>&gt;&gt;&gt; text in r.content.decode()
False
</code></pre></li>
<li><p><strong>Convert <code>r.content</code>  to <code>utf-8</code> string</strong> as:</p>
<pre><code>&gt;&gt;&gt; text in str(r.content, 'utf-8')
False
</code></pre></li>
<li><p><strong>Define your <code>text</code></strong> to search <strong>as a byte-string</strong>. For example:</p>
<pre><code>text = b'Sorry, there are no upcoming events'
#      ^  note the `b` here
</code></pre>
<p>Now you may simply use it with <code>r.content</code> as: </p>
<pre><code>&gt;&gt;&gt; text in r.content
False
</code></pre></li>
<li><p><strong>Use <a href="http://docs.python-requests.org/en/master/user/quickstart/#response-content" rel="noreferrer"><code>r.text</code></a></strong> instead of <code>r.content</code> to search for the string, which as the <a href="http://docs.python-requests.org/en/master/user/quickstart/#response-content" rel="noreferrer">document</a> suggests:</p>
<blockquote>
<p>The text encoding guessed by Requests is used when you access <code>r.text</code>.</p>
</blockquote>
<p>Hence you may just do:</p>
<pre><code>&gt;&gt;&gt; text in r.text
False
</code></pre></li>
</ol>
</div>
<div class="post-text" itemprop="text">
<p>Try this instead:</p>
<pre><code>if text in r.text:
</code></pre>
<p><a href="http://docs.python-requests.org/en/master/user/quickstart/#response-content" rel="nofollow noreferrer"><code>r.text</code></a> is the textual content that is returned. <a href="http://docs.python-requests.org/en/master/user/quickstart/#binary-response-content" rel="nofollow noreferrer"><code>r.content</code></a> is the binary content that is returned.</p>
</div>
<div class="post-text" itemprop="text">
<p>Requests returns a bytes object, you need to convert it to a string before performing the in</p>
<p>Here's a reference about built in types, one of which is bytes <a href="https://docs.python.org/3/library/stdtypes.html" rel="nofollow noreferrer">https://docs.python.org/3/library/stdtypes.html</a></p>
<p>the line of code you're looking for is something like, </p>
<pre><code>if text in r.content.decode():
  print('No upcoming events')
</code></pre>
<p>by default decode assumes utf-8, you can pass in a different encoding if you need to though.</p>
</div>
<span class="comment-copy"><code>content</code> attribute returns a binary representation of the response you need to use <code>text</code> attribute.</span>
<span class="comment-copy">Works a dream thank you for your explanation!</span>
<span class="comment-copy">Works a dream thank you for your explanation!</span>
<span class="comment-copy">Thank you for this, unfortunately due to how the site works the r.text returns no data. This info is very useful and will keep this in mind in future! :)</span>
<span class="comment-copy">@PiersThomas then you need to check again. Your url returns the same content as string with <code>r.text</code></span>
<span class="comment-copy">Works a dream thank you for your explanation!</span>
