<div class="post-text" itemprop="text">
<p>I'm trying to filter a list based on an attribute. If I use the attribute as a string everything works fine:</p>
<pre><code>{% set ys = xs | selectattr("type", "equalto", "first") | list %}
</code></pre>
<p>If I tried to use a variable (in my case a property of an enum) instead I get back an empty list</p>
<pre><code>{% set ys = xs | selectattr("type", "equalto", MyEnum.FIRST) | list %}
</code></pre>
<p>The variable <code>MyEnum.FIRST</code> contains the string "first".</p>
</div>
<div class="post-text" itemprop="text">
<p>You are correctly passing in a variable, but if you now get an empty list, then <code>MyEnum.FIRST</code> does not produce the string <code>'first'</code>.</p>
<p>If <code>MyEnum</code> is a <a href="https://docs.python.org/3/library/enum.html#enum.Enum" rel="nofollow noreferrer"><code>enum.Enum</code> subclass</a>, then the attributes will be <em>instances</em> of that class. Use the <a href="https://docs.python.org/3/library/enum.html#programmatic-access-to-enumeration-members-and-their-attributes" rel="nofollow noreferrer"><code>.value</code> attribute</a> to get an actual string value:</p>
<pre><code>{% set ys = xs | selectattr("type", "equalto", MyEnum.FIRST.value) | list %}
</code></pre>
<p>Quick demo to show how enums work like and why you need the attribute:</p>
<pre><code>&gt;&gt;&gt; import enum
&gt;&gt;&gt; class MyEnum(enum.Enum):
...     FIRST = 'first'
...     SECOND = 'second'
...
&gt;&gt;&gt; MyEnum.FIRST
&lt;MyEnum.FIRST: 'first'&gt;
&gt;&gt;&gt; MyEnum.FIRST.value
'first'
</code></pre>
</div>
<span class="comment-copy">That worked! When I printed <code>MyEnum.FIRST</code> I got 'first' because <code>__str__</code> is defined to behave like that. The solution was to call <code>MyEnum.FIRST.value</code> as you wrote. My bad, thanks!</span>
