<div class="post-text" itemprop="text">
<p>I am using <code>telegraf</code> as a measuring/monitoring tool in my tests. I need to edit <code>telegraf</code> configurations automatically; since all tests are being executed automatically.</p>
<p>Currently I am using <code>re</code> for configuring it; this is the process:</p>
<ol>
<li>Read the whole file content.</li>
<li>Use regex to find and edit the required plugin/property. </li>
<li>Write the whole changed content to the file.</li>
</ol>
<p>But I'm searching for a library, if exists, like <a href="https://docs.python.org/3/library/configparser.html" rel="nofollow noreferrer"><code>ConfigParser</code></a> or <a href="https://pypi.python.org/pypi/reconfigure/0.1.39" rel="nofollow noreferrer"><code>reconfigure</code></a> to handle the configurations as an object not content. </p>
<p>I tried <code>ConfigParser.ConfigParser</code>, <code>ConfigParser.RawConfigParser</code> and <code>ConfigParser.SafeConfigParser</code>; all return:</p>
<pre><code>ConfigParser.ParsingError: File contains parsing errors: /etc/telegraf/telegraf.conf
</code></pre>
<p><code>reconfigure</code> library has specific configuration classes, each belongs to a special type of linux configs (e.g. <code>FSTabConfig</code>, <code>ResolvConfig</code> and some other types), but it doesn't contain a class for <code>telegraf</code> configs.</p>
<p>Does anyone have an option in mind?</p>
<p><strong>EDIT 1:</strong></p>
<p>I tried <code>configobj</code> library (as @KevinC suggested), but it loads nothing:</p>
<pre><code>&gt;&gt;&gt; import configobj
&gt;&gt;&gt; c = configobj.ConfigObj('/home/zeinab/Desktop/config-modification/telegraf.conf', list_values=False)
&gt;&gt;&gt; c
ConfigObj({})
</code></pre>
<p>Using <code>list_values=True</code> returns the same results.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="http://configobj.readthedocs.io/en/latest/" rel="nofollow noreferrer">configobj</a>, but you have to specify "list_values"=False</p>
<pre><code>c = configobj.ConfigObj('/etc/telegraf/telegraf.conf', list_values=False)
</code></pre>
</div>
<span class="comment-copy">If you want to change the configuration fot tests, then you should mock it instead of changing the file.</span>
<span class="comment-copy">Dear @KlausD., I think I expressed it in a bad way. I have some applications which I want to test them; I'm not testing <code>telegraf</code>. I'm using it as a monitoring tool which is monitoring my applications' status during test. I want to use collected data for future analysis. Therefore I should have a real <code>telegraf</code>, not a mock.</span>
<span class="comment-copy">Please review my edit.</span>
