<div class="post-text" itemprop="text">
<p>I am trying to do some text cleaning in Python for sentiment analysis. But instead of lumping all the text together and separating them, I want to clean the text by each sentence. To do that I used a <code>for</code> loop in my function but the issue is that it only returns 1 of the sentences in my dataframe.</p>
<pre><code>[In] data = pd.read_csv('twitter_AC.csv')

[In] data.head()

0    We're #hiring! Click to apply: Vaccine Special...
1    Can you recommend anyone for this #job? Vaccin...
2    We're #hiring! Read about our latest #job open...
3    We're #hiring! Read about our latest #job open...
4    We're #hiring! Read about our latest #job open...

Name: text, dtype: object


[In] def text_process(text):

    '''
    Takes in a string of text, then performs the following:
    1. Remove all punctuation
    2. Remove all stopwords
    3. Return the cleaned text as a list of sentences
    '''
    for i in text:
        nopunc = [word for word in i if word not in string.punctuation]
        nopunc = ''.join(nopunc)
    return [nopunc.lower()]

[In] text_process(data)

[Out] ['were hiring read about our latest job opening here immunization rn  httpstcopxczq5zrhr healthcare fairfax va careerarc']
</code></pre>
<p>I can't figure out why the function is not outputting all the rows from my dataframe. Also, I don't see why its pulling out just a random row instead of the first row.</p>
</div>
<div class="post-text" itemprop="text">
<p>You are iterating over every element in your collection, but each time you're overwritting <code>nopunc</code> variable.</p>
<p>So, you are just returning the last line traversed.</p>
<p>Try with this:</p>
<pre><code>def text_process(text):                                                                                                                        

    '''
    Takes in a string of text, then performs the following:
    1. Remove all punctuation
    2. Remove all stopwords
    3. Return the cleaned text as a list of sentences
    '''
    nopuncList = []
    for i in text:
        nopunc = [word for word in i if word not in string.punctuation]
        nopunc = ''.join(nopunc)
        nopuncList.append(nopunc.lower())
    return nopuntList
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You loop is a bit malformed.  I would suggest using a <a href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions" rel="nofollow noreferrer">list comprehension</a> like:</p>
<pre><code>def text_process(text):  
    return [''.join(word for word in i if word not in string.punctuation).lower() 
            for i in text]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You are overwriting <code>nopunc</code> variable again and again. So as a result, your function is returning the last row. Try having a empty list and append the results to it for every iteration.</p>
<pre><code>def text_process(text):

    '''
    Takes in a string of text, then performs the following:
    1. Remove all punctuation
    2. Remove all stopwords
    3. Return the cleaned text as a list of sentences
    '''
    result = list()
    for i in text:
        nopunc = [word for word in i if word not in string.punctuation]
        nopunc = ''.join(nopunc)
        result.append(nopunc.lower())
    return result
</code></pre>
<p>Hope this helps.</p>
</div>
