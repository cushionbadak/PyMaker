<div class="post-text" itemprop="text">
<p>I'm having some trouble with my code - I have a csv file and I have to save the first line in the csv as a list. Then I have to clear the file and rewrite the line using the list. This is my code:</p>
<pre><code>import csv

f = open('PlateBook.csv','r')
reader = f.readlines()

for row in reader:
    outrow = list(row) 

    with open('PlateBook.csv', 'w', newline='') as fp:
        f.truncate
        a = csv.writer(fp, delimiter=',')
        data =  [outrow]

        a.writerows(data)
</code></pre>
<p>The trouble is, when I open the csv in Excel it's clearly wrong. Each character fills up a cell - I want the file to look exactly the same as when I written the file.</p>
</div>
<div class="post-text" itemprop="text">
<p>From the issue you describe, I guess that you don't want to do</p>
<pre><code>outrow = list(row) 
</code></pre>
<p>which simply creates a list of each charater, but more something like</p>
<pre><code>outrow = row.split(',')
</code></pre>
<p>which create a list of the string separated by commas.</p>
<p>Or, <strong>even better</strong>, use a <a href="https://docs.python.org/3/library/csv.html?highlight=csv" rel="nofollow"><code>csv.reader</code></a>, so it handle quotes and all little details of csv's.</p>
<p>Here is an <em>untested</em> sample code of what you should do.</p>
<pre><code>import csv

with open('PlateBook.csv','rt') as input_file:
    reader = csv.reader( input_file )
    with open('PlateBook.temp.csv','wt') as output_file:
        writer = csv.DictWriter( output_file, fieldnames = csvreader.fieldnames )
        writer.writeheader()
        for row in reader:
            writer.writerow( row )

#So far we didnot touch the original file, so if the process
#fails, nothing is left in half-processed state.
import os
os.remove( 'PlateBook.csv' )
os.rename( 'PlateBook.temp.csv', 'PlateBook.csv' )
</code></pre>
</div>
<span class="comment-copy">can you fix the indentation? This program can have two very different meaning depending on the fact if <code>with ...</code> is under the <code>for</code> loop or not.</span>
<span class="comment-copy">just did, thanks</span>
<span class="comment-copy">tried <code>a.writerow(data)</code> ??</span>
<span class="comment-copy">Also when you "open" your file in excel, how exactly do you do it? There's a possibility that Excel interprets it as csv, and automatically separates the characters. Try opening it in a notepad or some text editor. @SIslam; it's not an "unvalid" line.</span>
<span class="comment-copy">Opening <code>f</code> for reading then opening it again for writing while it's still open and use for reading seems very error-prone to me.  I suggest to try to code without doing that.  Either save intermediate results somewhere or use 'wrt' mode for file opening.</span>
