<div class="post-text" itemprop="text">
<p>I have a small txt file, where I need to replace the multiple spaces with single tab on the lines that begin with specific keyword, so for that firstly I replace the multiple spaces with single one, that will be then replaced by tab
My script:</p>
<pre><code>input_file=open('file.txt', "rw")
for i, line in input_file:
    if line.startswith('City'):
        while '  ' in line:
            line = line.replace('  ', ' ')
        input_file.write(line)
input_file.close   
</code></pre>
<p>and I have this error:</p>
<pre><code>ValueError                                Traceback (most recent call last)
&lt;ipython-input-26-dfd976cfc18d&gt; in &lt;module&gt;()
      1 input_file=open('file.txt', "rw")
----&gt; 2 for i, line in input_file:
      3     if line.startswith('City'):
      4         while '  ' in line:
      5             line = line.replace('  ', ' ')

ValueError: too many values to unpack
</code></pre>
<p>Why it could happen? </p>
</div>
<div class="post-text" itemprop="text">
<p>If you really need <code>i</code>, which is a number (starting from 0 if <code>start</code> keyword argument is not defined) that increments on each iteration and generated by <code>enumerate</code> :</p>
<p>Try adding <a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow"><code>enumerate()</code></a>:</p>
<pre><code>for i, line in enumerate(input_file):
</code></pre>
<p>If you don't, just use:</p>
<pre><code>for line in input_file:
</code></pre>
<hr/>
<p>Regarding "double white-space deletion", there is no need to use <strong><code>while</code></strong>. Just use <code>if</code> and <code>replace</code>:</p>
<pre><code>if '  ' in line:
    line = line.replace('  ', ' ')
input_file.write(line)
</code></pre>
<hr/>
<p>Regarding <strong><code>open()</code></strong>, you can avoid closing the opened file by using <strong><code>with</code></strong> statement.</p>
<blockquote>
<p>This has the advantage that the file is properly closed after its
  suite finishes</p>
</blockquote>
<pre><code>with open('file.txt', "rw") as input_file:
    for line in input_file:
        if line.startswith('City'):
            if '  ' in line:
                line = line.replace('  ', ' ')
            input_file.write(line)
</code></pre>
<p>See the last example of this section <a href="https://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects" rel="nofollow">https://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects</a></p>
<hr/>
<p>Change <strong><code>open()</code></strong> mode from <code>"rw"</code> to <code>"r+"</code>, to avoid the following error:</p>
<blockquote>
<p>IOError: [Errno 9] Bad file descriptor</p>
</blockquote>
</div>
<span class="comment-copy">It should be <code>for line in input_file:</code> You don't use <code>i</code> anywhere so I don't know what you expect it to be, but if you want it to count the lines as you go, it should be <code>for i, line in enumerate(input_file)</code>.</span>
<span class="comment-copy">See the <a href="http://stackoverflow.com/a/12586508/4116239">accepted answer</a> to a slightly different question for details of what's happening.</span>
<span class="comment-copy">No need to use <code>readllines</code>. Just enumerate the file object.</span>
<span class="comment-copy">@tdelaney thank you! I've updated my answer and learned something today.</span>
<span class="comment-copy">@bmhkim I understand your POV, but I won't kill myself writing an answer to a person that isn't killing himself searching. This is really basic Python, he must read before asking and there are a lot of questions and tutorials about how does <code>for</code> works. I'm just presenting him <code>enumerate</code> so he can search what it does and how it helps.</span>
<span class="comment-copy">@very_young: Because <a href="https://docs.python.org/3/library/stdtypes.html#str.replace" rel="nofollow noreferrer"><code>str.replace()</code></a> replace all character in a string unless you set <code>count</code>, for example <code>'foo'.replace('o', 'a')</code> return <code>'faa'</code>. Actually you can simply run <code>str.replace()</code> without <code>while</code> or <code>if</code>. If there's nothing can replace <code>str.replace()</code> will return the original string and doesn't raise an error. Check the document that I linked for more details.</span>
<span class="comment-copy">@very_young I've updated my answer, you can set it as your question's answer if you consider it. Let's leave our discussion there, and apologize me if you felt bad vibes from my side. Just take my words as a suggestion for your future questions. Have a nice weekend.</span>
