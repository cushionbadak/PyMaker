<div class="post-text" itemprop="text">
<p>I get a tick by tick market data stream in a IP Address with a specified port in a TCP/IP packet format continuously. I want to log that in a csv file or work around the data stream for trading and data analysis.</p>
<p>Server sends all the packets in following format</p>
<pre><code>typedef struct
{
CHAR cCompOrNot
SHORT nDataSize;
SHORT iNoOfPackets;
}ST_COMP_BATCH_HEADER
typedef struct
{
SHORT iCode;
SHORT iLen;
LONG lSeqNo;
} ST_INFO_HEADER;
typedef struct
{
.
.
}ST_DATA_INFO;
typedef struct
{
SHORT iCheckSum;
CHAR cEOT;
} ST_INFO_TRAILER;
typedef struct
{
ST_INFO_HEADER stInfoHdr;
ST_DATA_INFO stDataInfo;
ST_INFO_TRAILER stInfoTrailer;
.
}ST_DATA_PACKET
</code></pre>
<p>All the packets received from server consist of compress batch header.
Compress batch header gives the information about the data packet
compressed or not, number of packets in the following data packet and the total size of data packet. Client needs to decompress the data packet using
LZO decompression algorithm. After decompression each data packet
consists of ST_INFO_HEADER, which has the iCode field to identify the type
of the packet. Using iCode field, data info packet is mapped to the respective
data packet.</p>
<p>So is there any way that I can decode the data in those packets using some Python Library and work around.</p>
<p>Thanks in advance!</p>
</div>
<div class="post-text" itemprop="text">
<p>Use the socket library.  Here is a sample of code to connect to the tcp/ip port and parse the data directly from Python's site (set HOST static to desired IP):</p>
<pre><code># Echo server program
import socket

HOST = ''                 # Symbolic name meaning all available interfaces
PORT = 50007              # Arbitrary non-privileged port
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((HOST, PORT))
s.listen(1)
conn, addr = s.accept()
print('Connected by', addr)
while True:
    data = conn.recv(1024)
    if not data: break
    conn.sendall(data)
conn.close()
</code></pre>
<p>For Python 2.x:</p>
<p><a href="https://docs.python.org/2/library/socket.html" rel="nofollow">https://docs.python.org/2/library/socket.html</a></p>
<p>For Python 3.x:</p>
<p><a href="https://docs.python.org/3/library/socket.html" rel="nofollow">https://docs.python.org/3/library/socket.html</a></p>
<p>LZO Library for Python:</p>
<p><a href="https://pypi.python.org/pypi/python-lzo/1.08" rel="nofollow">https://pypi.python.org/pypi/python-lzo/1.08</a></p>
</div>
<span class="comment-copy">Have you looked into <a href="http://www.secdev.org/projects/scapy/" rel="nofollow noreferrer">scapy</a> or <a href="https://github.com/KimiNewt/pyshark" rel="nofollow noreferrer">pyshark</a>? These questions are off-topic for SO, FYI.</span>
