<div class="post-text" itemprop="text">
<p>I'm using pickle for saving on disk my NLP classifier built with the TextBlob library.</p>
<p>I'm using pickle after a lot of searches related to <a href="https://stackoverflow.com/questions/33883976/python-textblob-and-text-classification?">this question</a>. At the moment I'm working locally and I have no problem loading the pickle file (which is 1.5Gb) with my i7 and 16gb RAM machine. But the idea is that my program, in the future, has to run on my server which only has 512Mb RAM installed.</p>
<p>Can pickle handle such a large file or  will I face memory issues?</p>
<p>On my server I've got Python 3.5 installed and it is a Linux server (not sure which distribution).</p>
<p>I'm asking because at the moment I can't access my server, so I can't just try and find out what happens, but at the same time I'm doubtful if I can keep this approach or I have to find other solutions.</p>
</div>
<div class="post-text" itemprop="text">
<p>Unfortunately this is difficult to accurately answer without testing it on your machine. </p>
<p>Here are some initial thoughts:</p>
<ol>
<li><p>There is no inherent size limit that the Pickle module enforces, but you're pushing the boundaries of its intended use. It's not designed for individual large objects. However, you since you're using Python 3.5, you will be able to take advantage of <a href="https://www.python.org/dev/peps/pep-3154/" rel="nofollow noreferrer">PEP 3154</a> which adds better support for large objects. You should specify <a href="https://docs.python.org/3.5/library/pickle.html#pickle.HIGHEST_PROTOCOL" rel="nofollow noreferrer">pickle.HIGHEST_PROTOCOL</a> when you <a href="https://docs.python.org/3.5/library/pickle.html#pickle.dumps" rel="nofollow noreferrer">dump</a> your data.</p></li>
<li><p>You will likely have a large performance hit because you're trying to deal with an object that is 3x the size of your memory. Your system will probably start swapping, and possibly even thrashing. RAM is so cheap these days, bumping it up to at least 2GB should help significantly.</p></li>
<li><p>To handle the swapping, make sure you have enough swap space available (a large swap partition if you're on Linux, or enough space for the swap file on your primary partition on Windows).</p></li>
<li><p>As <a href="https://stackoverflow.com/questions/33965021/can-pickle-handle-files-larger-than-the-ram-installed-on-my-machine/33965199#comment55687830_33965021">pal sch's comment shows</a>, Pickle is not very friendly to RAM consumption during the pickling process, so you may have to deal with Python trying to get even more memory from the OS than the 1.5GB we may expect for your object.</p></li>
</ol>
<p>Given these considerations, I don't expect it to work out very well for you. I'd strongly suggest upgrading the RAM on your target machine to make this work.</p>
</div>
<div class="post-text" itemprop="text">
<p>I don't see how you could <a href="https://docs.python.org/3/library/pickle.html#pickle.load" rel="nofollow">load</a> an object into RAM that exceeds the RAM. i.e. <code>bytes(num_bytes_greater_than_ram)</code> will always raise an <code>MemoryError</code>.</p>
</div>
<span class="comment-copy">Imho that you cannot even have variables which refer to things larger than RAM, can you?</span>
<span class="comment-copy">That's no dumb question. It's a really interesting one! +1</span>
<span class="comment-copy">@palsch Honestly i've got no idea, i'm not really expert on how pickle works, or if my machine can use virtual memory if ram ends.</span>
<span class="comment-copy">Hm... Could be.</span>
<span class="comment-copy">Is your solution here? <a href="http://deeplearning.net/software/theano/tutorial/python-memory-management.html#pickle" rel="nofollow noreferrer">deeplearning.net/software/theano/tutorial/â€¦</a></span>
<span class="comment-copy">Sadly my 'server' is a godaddy Deluxe shared hosting , so not a real server and i can't upgrade it or manage swap space. Thanks for you answer!</span>
<span class="comment-copy">Maybe pickle variables refer to the drive or so?</span>
<span class="comment-copy">By default <code>pickle</code> does not <a href="https://docs.python.org/3.5/library/pickle.html#what-can-be-pickled-and-unpickled" rel="nofollow noreferrer">pickle references</a>. If the object generated by the TextBlob library is disk backed and implements a custom pickling interface, then <i>maybe</i>.</span>
<span class="comment-copy">As an example try <code>pickle.loads(pickle.dumps(memoryview(b"abc")))</code>.</span>
<span class="comment-copy">Ok. So +1 from me. ;-)</span>
