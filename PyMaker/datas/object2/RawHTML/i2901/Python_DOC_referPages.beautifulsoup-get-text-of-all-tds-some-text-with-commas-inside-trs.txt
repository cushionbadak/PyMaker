<div class="post-text" itemprop="text">
<p>Im currently working on a table that is created in ASP, its very messy but with some code help I think Ill be getting what I need from this table.
I have an HTML code that I want the output to be one array for each tr with td's. I also do not want the "-" to be a part of the output in the arrays.</p>
<p>Some td's have 2 commas and some texts in the td's are separated by only an empty space " ":</p>
<p>The code is like this</p>
<pre><code>  &lt;tr bgcolor="#EFEFEF"&gt;
  &lt;td&gt;
   &lt;a href="free.asp?detail=hide&amp;amp;c_id=4342141"&gt;
    &lt;img align="absmiddle" border="0" hspace="0" src="pic/bullet.gif" vspace="0"/&gt;
   &lt;/a&gt;
  &lt;/td&gt;
  &lt;td&gt;
   4342141
  &lt;/td&gt;
  &lt;td width="10"&gt;
  &lt;/td&gt;
  &lt;td&gt;
   25.07.2018 09:00
  &lt;/td&gt;
  &lt;td width="10"&gt;
  &lt;/td&gt;
  &lt;td&gt;
   Golbasi Ankara, Turkey
  &lt;/td&gt;
  &lt;td width="10"&gt;
   -
  &lt;/td&gt;
  &lt;td&gt;
   Konya Havalimani Turkey
  &lt;/td&gt;
  &lt;td colspan="2"&gt;
  &lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr bgcolor="#EFEFEF" height="3"&gt;
  &lt;td colspan="10"&gt;
  &lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr bgcolor="#FFFFFF" height="1"&gt;
  &lt;td colspan="10"&gt;
  &lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr bgcolor="#DDDDDD" height="6"&gt;
  &lt;td colspan="10"&gt;
  &lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr bgcolor="#FFFFFF" height="1"&gt;
  &lt;td colspan="10"&gt;
  &lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr bgcolor="#DEE3E7" height="3"&gt;
  &lt;td colspan="10"&gt;
  &lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr bgcolor="#DEE3E7"&gt;
  &lt;td&gt;
   &lt;a href="free.asp?detail=hide&amp;amp;c_id=4134123"&gt;
    &lt;img align="absmiddle" border="0" hspace="0" src="pic/bullet.gif" vspace="0"/&gt;
   &lt;/a&gt;
  &lt;/td&gt;
  &lt;td&gt;
   4134123
  &lt;/td&gt;
  &lt;td width="10"&gt;
  &lt;/td&gt;
  &lt;td&gt;
   26.07.2018 09:00
  &lt;/td&gt;
  &lt;td width="10"&gt;
  &lt;/td&gt;
  &lt;td&gt;
   Kucuktepe, Van, Turkey
  &lt;/td&gt;
  &lt;td width="10"&gt;
   -
  &lt;/td&gt;
  &lt;td&gt;
   Maltepe, Istanbul, Turkey
  &lt;/td&gt;
  &lt;td colspan="2"&gt;
  &lt;/td&gt;
 &lt;/tr&gt;
</code></pre>
<p>Some td's have 2 commas and some texts in the td's are separated by only an empty space " ":</p>
<pre><code>[['4342141', '25.07.2018', '09:00', 'Golbasi Ankara, Turkey', '-', 'Konya Havalimani Turkey', 'free.asp?detail=hide&amp;c_id=4342141'], ['4134123', '26.07.2018', '09:00', 'Kucuktepe, Van, Turkey', '-', 'Maltepe, Istanbul, Turkey', 'free.asp?detail=hide&amp;c_id=4134123']]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Assuming <code>data</code> will hold the HTML text:</p>
<pre><code>from bs4 import BeautifulSoup
from pprint import pprint

soup = BeautifulSoup(data, 'lxml')
rows = []
for tr in soup.select('tr'):
    row = [td.text.strip() for td in tr.select('td') if td.text.strip() and td.text.strip() != '-']
    if row:
        rows.append(row)

pprint(rows, width=120)
</code></pre>
<p>This will print:</p>
<pre><code>[['4342141', '25.07.2018 09:00', 'Golbasi Ankara, Turkey', 'Konya Havalimani Turkey'],
 ['4134123', '26.07.2018 09:00', 'Kucuktepe, Van, Turkey', 'Maltepe, Istanbul, Turkey']]
</code></pre>
<p>For writing the <code>rows</code> list to csv you can use this script:</p>
<pre><code>import csv

with open('data.csv', 'w', newline='') as f:
    writer = csv.writer(f)
    writer.writerows(rows)
</code></pre>
<p>Then in <code>data.csv</code> file you will have:</p>
<pre><code>4342141,25.07.2018 09:00,"Golbasi Ankara, Turkey",Konya Havalimani Turkey
4134123,26.07.2018 09:00,"Kucuktepe, Van, Turkey","Maltepe, Istanbul, Turkey"
</code></pre>
</div>
<span class="comment-copy">Whats the "pprint" youre using here?</span>
<span class="comment-copy">@YasirAkdeniz <code>pprint</code> stands for pretty-print - <a href="https://docs.python.org/3/library/pprint.html" rel="nofollow noreferrer">docs.python.org/3/library/pprint.html</a>. It's just there for having the output more prettier. You can freely substitute it for <code>print()</code> - without the <code>width</code> parameter of course.</span>
<span class="comment-copy">would it be in handy when exporting to csv? ultimately I want to create a csv with 4 columns: "id", "date", "from", "to". but im afraid those commas will create trouble for me on Excel when doing "text to column" with delimited by commas....</span>
<span class="comment-copy">@YasirAkdeniz No, <code>pprint</code> doesn't solve exporting to csv. For that use <code>csv</code> module - <a href="https://docs.python.org/3/library/csv.html" rel="nofollow noreferrer">docs.python.org/3/library/csv.html</a></span>
<span class="comment-copy">thank you so much man, Ive been struggling with this for 2 days :S.</span>
