<div class="post-text" itemprop="text">
<p>I set proxy using</p>
<pre><code>import os
proxy = '123.456.11.22:80'

os.environ['http_proxy'] = proxy 
os.environ['HTTP_PROXY'] = proxy
os.environ['https_proxy'] = proxy
os.environ['HTTPS_PROXY'] = proxy
</code></pre>
<p>Sometimes my proxy drops down (throwing ProxyError) and in this case I need change variable "proxyError". I use this code:</p>
<pre><code>try:
    proxyError = 0
    connectFunction()
except ProxyError:
    logPrint("Connection lost. Reconnecting...")
    proxyError = 1
</code></pre>
<p>And I cant handle ProxyError because python says what "ProxyError" is uknown. I try this:</p>
<pre><code> try:
        proxyError = 0
        connectFunction()
    except os.ProxyError:
        logPrint("Connection lost. Reconnecting...")
        proxyError = 1
</code></pre>
<p>This dont work too. That I need to catch?</p>
</div>
<div class="post-text" itemprop="text">
<p><code>ProxyError</code> is nothing but a class in python and the namespace rule apply to it too, so you need to either import <code>ProxyError</code> or use it where it is located.</p>
<p>In <code>requests</code> library exceptions for the <code>requests</code> library are created at <a href="https://github.com/requests/requests/blob/master/requests/exceptions.py" rel="nofollow noreferrer">requests.exceptions</a></p>
<p>so if you want to handle exception as below:</p>
<pre><code>try:
    proxyError = 0
    connectFunction()
except ProxyError:
    logPrint("Connection lost. Reconnecting...")
    proxyError = 1
</code></pre>
<p>you need to import exception class as below:</p>
<pre><code>from requests.exceptions import ProxyError
</code></pre>
<p>otherwise you can handle it as below:</p>
<pre><code>try:
    proxyError = 0
    connectFunction()
except requests.exceptions.ProxyError:
    logPrint("Connection lost. Reconnecting...")
    proxyError = 1
</code></pre>
</div>
<span class="comment-copy">Figure out where you need to import <code>ProxyError</code> from and import it from there. It's not a standard exception. (Maybe the one from <code>requests.exceptions</code>?)</span>
<span class="comment-copy"><code>from requests.exceptions import ProxyError</code> should do the trick, as long as other code is working based on <code>requests</code> module</span>
<span class="comment-copy">try this <code>from requests.exceptions import ProxyError</code></span>
<span class="comment-copy">It works, but why i need use requests if I use "os" library for proxy?</span>
<span class="comment-copy">Thanks, it works. But why in need a requests lib if I use standart 'os' library?</span>
<span class="comment-copy">are you talking about use of <code>os.environ['HTTP_PROXY']</code> statement?</span>
<span class="comment-copy">Yes, I talking about this</span>
<span class="comment-copy">checkout this documentation part for it: <a href="https://docs.python.org/3/library/os.html#os.environ" rel="nofollow noreferrer">docs.python.org/3/library/os.html#os.environ</a></span>
