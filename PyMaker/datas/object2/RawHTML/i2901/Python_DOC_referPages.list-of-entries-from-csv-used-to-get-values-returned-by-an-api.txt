<div class="post-text" itemprop="text">
<p>I am trying to use a for loop to take a series of entries from a csv file, which contains price_id's, for which I want to download the corresponding values using an API. I imported the price_ids to a list but when I set the pnode_id parameter from the list entry, it seems to include the ['2751292'] and not just 2751292, which causes an error with the API. </p>
<pre><code>with open('Pnode_List.csv', 'r') as csv_file:
price_id = csv.reader(csv_file)
for line in price_id:
    params = urllib.parse.urlencode({
        'pnode_id': line,
        'format': 'csv',
    })
    print("GET", "/api/v1/rt_da_monthly_lmps?%s" % params)
</code></pre>
<p>The output I want is</p>
<pre><code> GET /api/v1/rt_da_monthly_lmps?pnode_id=2751292&amp;format=csv
</code></pre>
<p>but what I get is </p>
<pre><code>GET /api/v1/rt_da_monthly_lmps?pnode_id=%5B%2751292%27%5D&amp;format=csv
</code></pre>
<p>Any help would be much appreciated. Thanks!</p>
</div>
<div class="post-text" itemprop="text">
<p>The Python csv reader returns a list of values for each line, even if there is only one value. To get the first value you should do <code>'pnode_id': line[0]</code>. Though if this is a csv file, why is there only one item per line? Your code should really iterate over each value in each line:</p>
<pre><code>with open('Pnode_List.csv', 'r') as csv_file:
price_id = csv.reader(csv_file)
for line in price_id:
    for value in line:
        params = urllib.parse.urlencode({
            'pnode_id': value,
            'format': 'csv',
        })
        print("GET", "/api/v1/rt_da_monthly_lmps?%s" % params)
</code></pre>
<p>If it isn't really a csv file, but rather just values separated by new lines, you don't need the csv library at all.</p>
<p>Read the documentation here: <a href="https://docs.python.org/3/library/csv.html#csv.reader" rel="nofollow noreferrer">https://docs.python.org/3/library/csv.html#csv.reader</a></p>
</div>
<span class="comment-copy">Possible duplicate of <a href="https://stackoverflow.com/questions/9969099/python-list-bracket-removal">Python List Bracket Removal</a></span>
