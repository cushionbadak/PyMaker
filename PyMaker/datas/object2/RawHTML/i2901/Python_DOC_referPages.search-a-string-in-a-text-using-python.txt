<div class="post-text" itemprop="text">
<p>I have a list</p>
<pre><code>list=["John","Tanner",'Mary','Anna',"Oscar",'ID'] 
</code></pre>
<p>and a text file. Inside the text file looks like the following:</p>
<pre><code>  ID 'blablablabla...'
  V1 'John' 'blablablabla...'
  V2 'Anna' 'blablablabla...'
  V3 'Josh' 'blablablabla...'
  V4 'Mary' 'blablablabla...'
  V5 'Steven' 'blablablabla...'
</code></pre>
<p>I want to search the list inside the text file, and at the end I want to get the results as:</p>
<pre><code>RESULT=[1,'NA',4,2,'NA',0].
</code></pre>
<p>1,4 and 2 are the numbers extracted from V1, V4 and V2. Here is the code:</p>
<pre><code>start_time = time.time()
for item in list:
with open('C:/Mary/test.txt', 'r') as file:
    for line in file:
        if item in line:
            var_name=line.split()[0]
            if var_name=='ID':
                var_loc.append(0)
            else:
                var_loc.append(int(re.split('(\d+)',var_name)[1]))
            break
        #else:
         #   var_loc.append('NA')

total_time = time.time() - start_time
total_time
</code></pre>
<p>Question: When I pick an item from the list and search inside the text, and then it does not exist in the text, I want it to return 'NA'. But I couldn't figure it out to do it correctly. As I said I want the result looks like this at the end:</p>
<pre><code>RESULT=[1,'NA',4,2,'NA',0].
</code></pre>
<p>Thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can do it using regular expressions:</p>
<pre><code>with open('C:/Mary/test.txt', 'r') as f:
    s = f.read()
    for item in items:
        if item == 'ID':
            var_loc.append(0)
            continue

        m = re.search(f"^V(\d+) '{item}'", s, flags=re.MULTILINE)
        if m is None:
            var_loc.append('NA')
        else:
            var_loc.append(m.group(1))
</code></pre>
<p>Please, don't use <code>list</code> keyword as variable name - it's a keyword for python's <code>list</code> function (I replaced it with <code>items</code>).</p>
</div>
<span class="comment-copy">It's a bad habit that you open file on each iteration. Change <code>for</code> loop with <code>with</code> clause. Also fix indentation.</span>
<span class="comment-copy">Thanks. What is s in re.search()? s should be my text file, right?</span>
<span class="comment-copy">Yep, you'r right. Fixed.</span>
<span class="comment-copy">I think m.group(1) should be m.group(0). And there is something wrong with m = re.search(f"^V(\d+) '{item}'", s), specifically f"^V(\d+) '{item}'". It does not give the correct answer.</span>
<span class="comment-copy">Add <code>flags=re.MULTILINE</code> because of using start of line pattern <code>^</code>.</span>
<span class="comment-copy"><a href="https://docs.python.org/3/library/re.html#re.Match.group" rel="nofollow noreferrer">From docs</a> - <code>m.group(0)</code> returns the entire match.</span>
