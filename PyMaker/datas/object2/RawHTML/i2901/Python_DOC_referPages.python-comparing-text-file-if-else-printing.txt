<div class="post-text" itemprop="text">
<p>I have 4 text files in the following formats</p>
<p>keycountry.txt</p>
<pre><code>UK USA Germany
</code></pre>
<p>country.txt</p>
<pre><code>Brexit - UK
USA UK Relations
France win world cup
</code></pre>
<p>keylink.txt</p>
<pre><code>www.abc.com
www.ddd.com
www.eee.com
</code></pre>
<p>link.txt</p>
<pre><code>www.abc.com
www.eee.com
</code></pre>
<p>The code: </p>
<pre><code>import re

keycountryfile = "keycountry.txt"
countryfile = "country.txt"

links = open('links.txt', 'r')
links_data = links.read()
links.close()

keys = open('keylink.txt', 'r')
keys_data = keys.read()
keys.close()

keys_split = keys_data.splitlines()

print('LINKS')
for url in keys_split:
    if url in links_data:
        print(url)
        print("matching")
else:
    print("Not matching")   

keys = set(key.lower() for key in 
    re.findall(r'\w+', open(keycountryfile , "r").readline()))

print("COUNTRY")
with open(countryfile) as f:
    for line in f:
        words = set(word.lower() for word in re.findall(r'\w+', line))
        if keys &amp; words:
            print(line, end='')
            print("matching")
    else:
        print("Not matching")
</code></pre>
<p>In the code <code>print("matching")</code> is repeating multiple times. I know since it's inside the loop it will repeat, <code>print("Not matching")</code> is not displaying when there are no matches. I tried putting the print statements inside and outside the loop but I just wasn't able to rectify the problem. </p>
<p>The output, if it matches, should be like:</p>
<pre><code>LINKS
www.abc.com
www.eee.com
matching

COUNTRY
Brexit-UK
USA UK Relations
matching
</code></pre>
<p>The output, if it doesn't match, should be like:</p>
<pre><code>LINKS
Not matching
COUNTRY
Not matching
</code></pre>
<p>How to go about this?</p>
</div>
<div class="post-text" itemprop="text">
<p>Seems like your issue is on one hand related with the for-else construct. Else will always get executed in <strong>your</strong> code.</p>
<p>Moreover, building upon kaihami's answer, to achieve what you are describing you need to store the matching links/lines in a separate structure like a list and then check if that list is empty to print the matched entries or the string "Not matching", here is my proposed solution:</p>
<pre><code>import re

keycountryfile = "keycountry.txt"
countryfile = "country.txt"

with open('links.txt', 'r') as links:
    links_data = [line.strip() for line in links.readlines()]

with open('keylink.txt', 'r') as keys:
    keys_links = set([line.strip() for line in keys.readlines()])


matching_links = []
for url in links_data:
    if url in keys_links:
        matching_links.append(url)

print('LINKS')
if matching_links:
    print('\n'.join(matching_links))
    print("matching")
else:
    print("Not matching") 

print()

with open(keycountryfile , "r") as f:
    country_keys = set(key.lower() for key in 
                       re.findall(r'\w+', f.readline()))

matching_lines = []
with open(countryfile) as f:
    for line in f:
        words = set(word.lower() for word in re.findall(r'\w+', line))
        if country_keys &amp; words:
            matching_lines.append(line.strip())
    print("COUNTRY")
    if matching_lines:
        print('\n'.join(matching_lines))
        print("matching")
    else:            
        print("Not matching")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can save your results to a list and print the results after finding all matches.</p>
<pre><code>import re

keycountryfile = '''UK USA Germany'''
countryfile = '''Brexit - UK
USA UK Relations
France win world cup'''

links = '''www.abc.com
www.eee.com'''

links_data = links.split()

keys = '''www.abc.com
www.ddd.com
www.eee.com'''
keys_data = keys.split()


keys_split = keys_data

matching_links = []
not_links = []
for url in keys_split:
    if url in links_data:
        matching_links.append(url)
    else:
        not_links.append(url)

keys = set(keycountryfile.split())

matching_country = []
not_country = []
for line in countryfile.split():
    words = set(word.lower() for word in re.findall(r'\w+', line))
    if keys &amp; words:
        matching_country.append(line)
    else:
        not_country.append(line)

print('LINKS')
if matching_links:
    print('\n'.join(matching_links))
    print("matching")

print("COUNTRY")
print()
if matching_country:
    print('\n'.join(matching_country))
    print("matching")

print('LINKS')
if not_links:
    print('\n'.join(not_links))
print("Not matching")

print("COUNTRY")
if not_country:
    print('\n'.join(not_country))
print("Not matching")
</code></pre>
<p>You can try this code <a href="https://repl.it/@GilbertoHideo/HoneydewAzureTranslation" rel="nofollow noreferrer">here</a> </p>
</div>
<span class="comment-copy">The best way is to <b>debug</b> your script, there is builtin tool for it called <a href="https://docs.python.org/3/library/pdb.html" rel="nofollow noreferrer"><code>pdb</code></a>, or in some fance IDEs debugger is also builtin and easy and fun to use.</span>
<span class="comment-copy">Thanks a lot! @io_exception This exactly what I was looking for.</span>
<span class="comment-copy">this prints both for matching and not matching. I'm trying to print only one of them at a time. If items match then print the links and country that matches and if nothing matches then display 'not matching'. Also in your code for matching_country its not displaying the matching countries.</span>
