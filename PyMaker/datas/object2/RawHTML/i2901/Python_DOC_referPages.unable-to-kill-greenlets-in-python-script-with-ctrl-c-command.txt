<div class="post-text" itemprop="text">
<p>When I press <code>Ctrl+C</code> the call jumps into <code>signal_handler</code> as expected, but the <code>greenlets</code> are not getting killed as they continue the process.</p>
<pre><code># signal handler to process after catch ctrl+c command
def signal_handler(signum, frame):
    print("Inside Signal Handler")
    gevent.sleep(10)
    print("Signal Handler After sleep")
    gevent.joinall(maingreenlet)
    gevent.killall(maingreenlet,block=True,timeout=10)
    gevent.kill(block=True)
    sys.exit(0)

def main():
 signal.signal(signal.SIGINT, signal_handler) // Catching Ctrl+C

 try:
   maingreenlet = [] // Creating a list of greenlets
   while True:
    for key,profileval in profile.items():
      maingreenlet.append(gevent.spawn(key,profileval)) # appending all grrenlets to list
      gevent.sleep(0)
  except (Error) as e:
    log.exception(e)
    raise

if __name__ == "__main__":
    main()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The main reason your code is not working is because the variable <code>maingreenlet</code> is defined inside the <code>main</code> function, and is out of the scope of the <code>signal_handler</code> function which tries to access it. Your code should throw an error like this:</p>
<p><code>NameError: global name 'maingreenlet' is not defined</code></p>
<p>If you were to move the line <code>maingreenlet = []</code> into the global scope, i.e. anywhere outside of the two <code>def</code> blocks, the <code>greenlets</code> should get killed without problem.</p>
<p>Of course that's after you fix the other issues in your code, like using <code>//</code> instead of <code>#</code> to start the comments, or calling the function <code>gevent.kill</code> with the wrong parameter. (you didn't specify your <code>gevent</code> version but I assume the current version 1.3.7) Actually this function call is redundant after you call <code>gevent.killall</code>.</p>
<p>Learn to use a Python debugger liker <a href="https://docs.python.org/3/library/pdb.html" rel="nofollow noreferrer">pdb</a> or <a href="http://heather.cs.ucdavis.edu/~matloff/winpdb.html" rel="nofollow noreferrer">rpdb2</a> to help you debug your code. It'll save your precious time in the long run.</p>
</div>
