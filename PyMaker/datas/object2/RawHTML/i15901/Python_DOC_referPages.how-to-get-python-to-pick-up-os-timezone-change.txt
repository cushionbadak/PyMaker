<div class="post-text" itemprop="text">
<p>In a running instance of python, is there a function I can call to say "Hey python, refresh what you know about timezone information"?  So lets say I open python, and then I change /etc/localtime .  How can I get python to update to the new timezone?  My goal is to not mess around with the TZ environment variable or reference /etc/localtime directly or use any OS-specific commands.  I would also like to not restart python.  Is this possible?</p>
</div>
<div class="post-text" itemprop="text">
<p>The answer I was looking for was <a href="https://docs.python.org/2/library/time.html#time.tzset" rel="nofollow">time.tzset()</a>:</p>
<pre><code>&gt;&gt;&gt; time.tzname[time.daylight]
'CDT'
&gt;&gt;&gt; #Use dpkg-reconfigure tzdata
...
&gt;&gt;&gt; time.tzset()
&gt;&gt;&gt; time.tzname[time.daylight]
'EDT'
&gt;&gt;&gt; 
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/2/library/time.html" rel="nofollow">time</a> and <a href="https://pypi.python.org/pypi/tzlocal" rel="nofollow">tzlocal</a>:</p>
<pre><code>&gt;&gt;&gt; from datetime import datetime
&gt;&gt;&gt; from tzlocal import get_localzone
&gt;&gt;&gt; tz = get_localzone()
&gt;&gt;&gt; datetime.now(tz).tzinfo
&lt;DstTzInfo 'Europe/Warsaw' CEST+2:00:00 DST&gt;
</code></pre>
</div>
<span class="comment-copy">In what sense is it <i>not</i> refreshing its information? What modules are you using that have stale information? IIRC, all of the stdlib time and locale stuff (which is pretty minimal) reads it as needed on the fly—or, generally, calls C stdlib functions that do so—and doesn't cache anything, but I could be wrong. If you're using any third-party libraries, that could make a big difference, but without knowing which one(s) you use it's hard to comment…</span>
<span class="comment-copy">time.tzname will not refresh automatically, please see my answer and thank you for your help!</span>
<span class="comment-copy">Oh, you shouldn't be expecting <code>localtime</code>, etc. to rely on <code>$TZ</code> or on whatever it points to in <code>/usr/share/zoneinfo</code> in the first place if you haven't called <a href="https://docs.python.org/3/library/time.html#time.tzset" rel="nofollow noreferrer"><code>tzset</code></a>. So yes, call it again whenever you want to refresh.</span>
<span class="comment-copy"><code>get_localzone()</code> is not updated after <code>sudo dpkg-reconfigure tzdata</code>. You have to restart <code>python</code> that OP tries to avoid.</span>
