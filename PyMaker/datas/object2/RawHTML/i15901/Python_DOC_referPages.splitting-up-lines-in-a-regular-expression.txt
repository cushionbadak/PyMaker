<div class="post-text" itemprop="text">
<p>I'm trying to break up a long regex into smaller chunks. Is it possible/good practice to change A to B?</p>
<p><strong>A:</strong></p>
<pre><code>line = re.sub(r'\$\{([0-9]+)\}|\$([0-9]+)|\$\{(\w+?\=\w?+)\}|[^\\]\$(\w[^-]+)|[^\\]\$\{(\w[^-]+)\}',replace,line)
</code></pre>
<p><strong>B:</strong></p>
<pre><code>line = re.sub(r'\$\{([0-9]+)\}|'
              r'\$([0-9]+)|'
              r'\$\{(\w+?\=\w?+)\}|'
              r'[^\\]\$(\w[^-]+)|'
              r'[^\\]\$\{(\w[^-]+)\}',replace,line)
</code></pre>
<p><strong>Edit:</strong></p>
<p>I receive the following error when running this in Python 2:</p>
<pre><code>def main():
while(1):
    line = raw_input("(%s)$ " % ncmd)
    line = re.sub(r'''
                    \$\{([0-9]+)\}|
                    \$([0-9]+)|
                    \$\{(\w+?\=\w?+)\}|
                    [^\\]\$(\w[^-]+)|
                    [^\\]\$\{(\w[^-]+)\}
                  ''',replace,line,re.VERBOSE)
    print '&gt;&gt; ' + line
</code></pre>
<p><strong>Error:</strong></p>
<pre><code>(1)$ abc
Traceback (most recent call last):
  File "Test.py", line 4, in &lt;module&gt;
    main()
  File "Test.py", line 2, in main
    [^\\]\$\{(\w[^-]+)\}''',replace,line,re.VERBOSE)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py", line 151, in sub
    return _compile(pattern, flags).sub(repl, string, count)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py", line 242, in _compile
    raise error, v # invalid expression
sre_constants.error: multiple repeat
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use a <a href="https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals" rel="nofollow">triple-quoted (multi-line) string</a> and set the <a href="https://docs.python.org/3/library/re.html#re.VERBOSE" rel="nofollow"><code>re.VERBOSE</code></a> flag, which allows you to break a Regex pattern over multiple lines:</p>
<pre><code>line = re.sub(r'''
\$\{([0-9]+)\}|
\$([0-9]+)|
\$\{(\w+?\=\w?+)\}|
[^\\]\$(\w[^-]+)|
[^\\]\$\{(\w[^-]+)\}
''', replace, line, re.VERBOSE)
</code></pre>
<p>You can even include comments directly inside the string:</p>
<pre><code>line = re.sub(r'''
\$\{([0-9]+)\}|             # Pattern 1
\$([0-9]+)|                 # Pattern 2
\$\{(\w+?\=\w?+)\}|         # Pattern 3
[^\\]\$(\w[^-]+)|           # Pattern 4
[^\\]\$\{(\w[^-]+)\}        # Pattern 5
''', replace, line, re.VERBOSE)
</code></pre>
<p>Lastly, it should be noted that you can likewise activate the verbose flag by using <code>re.X</code> or by placing <code>(?x)</code> at the start of your Regex pattern.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can also separate your expression over multiple lines using double quotes, like the following:</p>
<pre><code>line = re.sub(r"\$\{([0-9]+)\}|\$([0-9]+)|"
              r"\$\{(.+-.+)\}|"
              r"\$\{(\w+?\=\w+?)\}|"
              r"\$(\w[^-]+)|\$\{(\w[^-]+)\}",replace,line)
</code></pre>
</div>
<span class="comment-copy">As far as I know, this is used often, sometimes with additional comments on each line explaining the regex part.</span>
<span class="comment-copy">You'd be better off using <code>expanded</code> mode. Also your regex has problems. For instance <code>\$(\w[^-]+)</code> and <code>\$\{(\w[^-]+)\}</code> are open ended.</span>
<span class="comment-copy">what is the triple ''' for?</span>
<span class="comment-copy">Multiline strings</span>
<span class="comment-copy">@asfadsfaf - You need that to have a string literal span multiple lines.  Give me a second and I'll include a docs link.</span>
<span class="comment-copy">@iCodez thanks so much!</span>
<span class="comment-copy">@iCodez I'm receiving a strange error when trying this, would you mind taking a look at my edit? Thank you.</span>
