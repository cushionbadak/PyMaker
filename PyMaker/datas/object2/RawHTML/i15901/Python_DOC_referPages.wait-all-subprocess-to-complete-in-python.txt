<div class="post-text" itemprop="text">
<p>I have a method which executes a command using subprocess,
I want to call that method "n" no of times and wait for all "n" subprocess to complete 
for example:</p>
<pre><code>import subprocess
class mysubprocess():
    def child_process(self,directory):
        self.process=subprocess.Popen('ls',cwd=directory)

    def execute(self):
        directory=['/home/suresh/Documents','/home/suresh/Downloads']
        for i in directory:
            print(i)
            self.child_process(directory)

        self.process.wait()

def main():
    myobject=mysubprocess()
    myobject.execute()

if __name__=='main':
    main()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You need to store references to the <code>Popen</code> objects to call <a href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen.wait" rel="nofollow"><code>wait</code> methods</a> of them later.
(The code in the question overwrites the <code>Popen</code> object with the last <code>Popen</code> object, and waits only the last sub-process.)</p>
<pre><code>import subprocess


class mysubprocess():

    def execute(self, directory_list):
        procs = []
        for d in directory:
            print(d)
            procs.append(subprocess.Popen('ls', cwd=d))  # &lt;---
        for proc in procs:
            proc.wait()


def main():
    myobject = mysubprocess()
    myobject.execute(['/home/suresh/Documents','/home/suresh/Downloads'])


if __name__ == '__main__':
    main()
</code></pre>
<hr/>
<p>Other issues</p>
<ul>
<li>The code is passing the entire list (<code>directory</code>) instead of item.</li>
<li>The last <code>if</code> statement should compare <code>__name__</code> with <code>'__main__'</code>.</li>
</ul>
</div>
