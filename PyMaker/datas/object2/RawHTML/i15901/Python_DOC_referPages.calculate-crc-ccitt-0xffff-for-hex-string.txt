<div class="post-text" itemprop="text">
<p>I'm trying to calulate CRC-CCITT (0xFFFF) for HEX string and get result back as HEX string. I tried <code>binascii</code> and <code>crc16</code> but I get int values and when I convert them to HEX it's not the value I expected. I need this:</p>
<pre><code>hex_string = "AA01"
crc_string = crccitt(hex_string)
print("CRC: ", crc_string)

&gt;&gt;&gt; CRC: FF9B
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/stdtypes.html#str.format" rel="nofollow"><code>str.format</code></a> / <a href="https://docs.python.org/3/library/functions.html#format" rel="nofollow"><code>format</code></a> to convert the int value to hexadecimal format: (used <a href="https://pypi.python.org/pypi/crc16" rel="nofollow"><code>crc16</code></a> to get crc)</p>
<pre><code>&gt;&gt;&gt; import binascii
&gt;&gt;&gt; import crc16
&gt;&gt;&gt; hex_string = 'AA01'
&gt;&gt;&gt; crc = crc16.crc16xmodem(binascii.unhexlify(hex_string), 0xffff)
&gt;&gt;&gt; '{:04X}'.format(crc &amp; 0xffff)
'FF9B'
&gt;&gt;&gt; format(crc &amp; 0xffff, '04X')
'FF9B'
</code></pre>
<p>or using <a href="https://docs.python.org/3/library/stdtypes.html#printf-style-string-formatting" rel="nofollow"><code>%</code> operator</a>:</p>
<pre><code>&gt;&gt;&gt; '%04X' % (crc &amp; 0xffff)
'FF9B'
</code></pre>
<hr/>
<pre><code>import binascii
import crc16

def crccitt(hex_string):
    byte_seq = binascii.unhexlify(hex_string)
    crc = crc16.crc16xmodem(byte_seq, 0xffff)
    return '{:04X}'.format(crc &amp; 0xffff)
</code></pre>
</div>
<span class="comment-copy">Is that literal <code>"AA01"</code> or hex <code>0xaa01</code>?</span>
<span class="comment-copy">I used this online calculator. <a href="http://www.lammertbies.nl/comm/info/crc-calculation.html" rel="nofollow noreferrer">lammertbies.nl/comm/info/crc-calculation.html</a> I'm trying to send that over UDP. So, I convert strings using <code>b16decode(hex_string)</code>.</span>
<span class="comment-copy">That's exactly what i need! Thank you very much!</span>
