<div class="post-text" itemprop="text">
<p>My problem is that pip won't update my Python Packages, even though there are no errors. </p>
<p>It is similar to <a href="https://stackoverflow.com/questions/21473600/matplotlib-version">this one</a>, but I am still now sure what to do. Basically, ALL my packages for python appear to be ridiculously outdated, even after updating everything via pip. Here are the details:</p>
<ul>
<li>I am using pip, version 1.5.6. </li>
<li>I am using Python, version 2.7.5</li>
<li>I am on a Mac OSX, verion 10.9.5.</li>
</ul>
<p>Using that, I have:</p>
<ul>
<li>My numpy version is 1.6.2.</li>
<li>My scipy version is 0.11.0.</li>
<li>My matplotlib version is 1.1.1.</li>
</ul>
<p>Even after I try:</p>
<pre><code>sudo pip uninstall numpy
</code></pre>
<p>Followed by:</p>
<pre><code>sudo pip install numpy
</code></pre>
<p>They both complete successfully, but when I go into python and check the version of numpy, it is still the old one. (As are all the other packages).</p>
<p>Not sure what is going on here?... How can this be fixed? P.S. I am new to this, so I might need explicit instructions. Thanks. Also, if anyone wants, I can provide a screenshot of pip as it is installing numpy.</p>
<p><strong>EDIT:</strong></p>
<p>Commands I ran as per the comments:</p>
<pre><code>$which -a pip
/usr/local/bin/pip
$ head -1 $(which pip)
#!/usr/bin/python
$ which -a python
/usr/bin/python
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>In OS X 10.9, Apple's Python comes with a bunch of pre-installed extra packages, in a directory named <code>/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python</code>. Including <code>numpy</code>.</p>
<p>And the way they're installed (as if by using <code>easy_install</code> with an ancient pre-0.7 version of <code>setuptools</code>, but not into either of the normal <code>easy_install</code> destinations), <code>pip</code> doesn't know anything about them.</p>
<p>So, what happens is that <code>sudo pip install numpy</code> installs a separate copy of <code>numpy</code> into <code>'/Library/Python/2.7/site-packages'</code>—but in your <code>sys.path</code>, the <code>Extras</code> directory comes before the <code>site-packages</code> directory, so <code>import numpy</code> still finds Apple's copy. I'm not sure why that is, but it's probably not something you want to monkey with.</p>
<hr/>
<p>So, how do you fix this?</p>
<p>The two best solutions are:</p>
<ul>
<li><p>Use <a href="https://pypi.python.org/pypi/virtualenv" rel="noreferrer"><code>virtualenv</code></a>, and install your <code>numpy</code> and friends into a virtual environment, instead of system-wide. This has the downside that you have to learn how to use <code>virtualenv</code>—but that's definitely worth doing at some point, and if you have the time to learn it now, go for it.</p></li>
<li><p>Upgrade to Python 3.x, either from a python.org installer or via Homebrew. Python 3.4 or later comes with <code>pip</code>, and doesn't come with any <code>pip</code>-unfriendly pre-installed packages. And, unlike installing a separate 2.7, it doesn't interfere with Apple's Python at all; <code>python3</code> and <code>python</code>, <code>pip3</code> and <code>pip</code>, etc., will all be separate programs, and you don't have to learn anything about how PATH works or any of that. This has the downside that you have to learn Python 3.x, which has <a href="https://docs.python.org/3/whatsnew/3.0.html" rel="noreferrer">some major changes</a>, so again, a bit of a learning curve, but again, definitely worth doing at some point.</p></li>
</ul>
<hr/>
<p>Assuming neither of those is possible, I think the simplest option is to use <code>easy_install</code> instead of <code>pip</code>, for the packages you want to install newer versions of any of Apple's "extras". You can get a full list of those by looking at what's in <code>/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python</code>. When you upgrade <code>numpy</code>, you probably also want to upgrade <code>scipy</code> and <code>matplotlib</code>; I think everything else there is unrelated. (You can of course upgrade <code>PyObjC</code> or <code>dateutil</code> or anything else you care about there, but you don't have to.)</p>
<p>This isn't an ideal solution; there are a lot of reasons <code>easy_install</code> is inferior to <code>pip</code> (e.g., not having an uninstaller, so you're going to have to remember where that <code>/Library/blah/blah</code> path is (or find it again by printout out <code>sys.path</code> from inside Python). I wouldn't normally suggest <code>easy_install</code> for anything except <code>readline</code> and <code>pip</code> itself (and then only with Apple's Python). But in this case, I think it's simpler than the other alternatives.</p>
</div>
<div class="post-text" itemprop="text">
<p>Old question, but I found it when trying to solve this issue, will post my solution.</p>
<p>I found @abarnert's diagnosis to be correct and helpful, but I don't like any of the solutions: I really want to upgrade the default version of numpy.  The challenge is that the directory these guys are in (which @abarnert mentioned) cannot be touched even by <code>sudo</code>, as they are in this "wheel" group. In fact, if you go there and do <code>sudo rm -rf blah</code>, it will give you a permission denied error.</p>
<p>To get around this, we have to take drastic action:</p>
<ol>
<li>Reboot the computer in recovery mode </li>
<li>Find the terminal and type <code>csrutil disable</code> </li>
<li>Reboot normally, then upgrade numpy with <code>pip2 install --user --upgrade numpy</code> (and same for any other packages that have this problem) </li>
<li>Repeat steps a and b, this time changing "disable" to "enable"</li>
</ol>
<p>Note: "csrutil disable" is serious business that can destabilize your machine, I would use it only when absolutely necessary and re-enable it ASAP.  But AFAIK it's the only way to upgrade Python packages in a wheel directory.</p>
</div>
<div class="post-text" itemprop="text">
<p>Rename the numpy and scipy versions installed by Apple in /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/ so it starts using the newer versions installed by Pip.</p>
</div>
<span class="comment-copy">You have more than one installation of <code>python</code> and your <code>pip</code> is bound to a different one.</span>
<span class="comment-copy">If you're not sure whether you installed an extra Python alongside Apple's, run all of the following commands and show us the output: <code>which -a pip</code>, <code>head -1 $(which pip)</code>, <code>which -a python</code>.</span>
<span class="comment-copy">Also, do you have Homebrew, MacPorts, Fink, or another package manager? How did you install all of the prereqs for <code>matplotlib</code> and friends?</span>
<span class="comment-copy">@abarnert I used homebrew for everything, except pip, which I did via <code>sudo easy_install pip</code>.</span>
<span class="comment-copy">@abarnert I added the information in the question. How do I og about fixing this issue? Cheers.</span>
<span class="comment-copy">I just deleted the default numpy folder and the system was able to find the one in "/Library/Python/2.7/site-packages/numpy/" and it works! Do you think this is safe to do?</span>
<span class="comment-copy">@Comptrol: If you're trying to use the Python whose site-packages that is, you may have left things screwed up, but if so, re-installing NumPy with that Python's <code>pip</code> should fix it (and, even if it doesn't, the error will tell you how to fix it manually). If you're trying to use a different Python, then that site-packages doesn't matter anyway, so it's safe.</span>
