<div class="post-text" itemprop="text">
<p>So I wrote a code on Python for my scale that is hooked up to my computer via an RS232 - port. Now I got that part working with the following code:</p>
<pre><code>import serial

while True:
    ser = serial.Serial('COM2', 9600, timeout = 1)
    print(ser.name)
    ser.write(b'w')
    line = ser.readline()
    print(line)
    ser.close()
</code></pre>
<p>Whenever I send 'w' in bytes to the scale it sends back the value. That looks like this:</p>
<pre><code>COM2
b'       0.000 kg \r\n'
</code></pre>
<p>It first prints the name of the com-port and on the next line the received data. However. I want to isolate the value(digits) as an int.</p>
<p>I tried using:</p>
<pre><code>line = ser.readline()[:-6]
int(line)
</code></pre>
<p>this gets rid of all the junk "kg  \r\n". And leaves us with just the digits. But of course, Python won't allow me to change a bytes string into an integer. It's probably a stupid beginners question, just like my other two posts but please bear with me, I have only been coding for about 2 weeks now.</p>
</div>
<div class="post-text" itemprop="text">
<p>You guessed that you have to convert (i.e. <em>decode</em>) the bytes returned by a serial binary read in to a string, that you can parse further. Using <code>bytes.decode("ascii")</code> should do here (no strange chars on sight).</p>
<p>Then, convert to <em>float</em>, not <em>int</em>. Also, using <code>str.split</code> is more robust to changes if you know that the first field is your value:</p>
<pre><code>&gt;&gt;&gt; line = b'       0.000 kg \r\n'
&gt;&gt;&gt; value = float(line.split()[0].decode("ascii"))
</code></pre>
<p>results in <code>0.0</code></p>
</div>
<span class="comment-copy">Look into the <a href="https://docs.python.org/3/library/struct.html" rel="nofollow noreferrer"><code>struct</code> module</a></span>
<span class="comment-copy">It worked! So you have to decode it in order to convert it. I had to change it up a bit because sometimes the scale sends an empty line when the measured value isn't stable. This would lead into an error.</span>
