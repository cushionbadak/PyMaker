<div class="post-text" itemprop="text">
<p>So I'm using tkinter to create a button that displays a random item from a list. When pressed, it displays a new item from said list, by looping a random number generator until it creates a number different to the old one. As they're tkinter buttons, the creation of a new number has to be a function, and the button itself is inside a function. </p>
<p>I've found that the variable for the current random number is not refreshing properly. The value is changing globally but not inside the function containing the button, so when said button runs the function to generate a new number, it checks it against the very first number generated, rather than the previous one.</p>
<pre><code>from tkinter import *
import random
global rnum

def Load():

    ListPath = (".\\Lists\\test.txt")
    f = open(ListPath, "r")
    LineList = f.readlines()
    rnum = random.randint(0,(LineList.__len__()-1))

    load = Tk()
    word = Button(load, text = LineList[rnum], command = lambda: NewRN(rnum, word, LineList), font = ("Calibri", 30))
    word.pack()



def NewRN(rnum, word, LineList):
    rnumold = rnum

    while(rnum == rnumold):
        rnum = random.randint(0,(LineList.__len__()-1))
        word.config(text = LineList[rnum])
    return(rnum)

Load()
</code></pre>
<p>When pressing the button, there is the chance it will display the same item from the list, as rnum is not being passed back into the function once it is already running. </p>
<p>Does anyone have a solution for this issue? Thanks in advance.</p>
</div>
<div class="post-text" itemprop="text">
<p>There is a lot of awkwardness in your code. You should respect the naming conventions. See <a href="https://www.python.org/dev/peps/pep-0008/#naming-conventions" rel="nofollow noreferrer">PEP8</a></p>
<p>Using <code>global</code>:</p>
<pre><code>global rnum
</code></pre>
<p>After analysis, It appears that <em>rnum</em> is not a global variable, or you don't use it as a global variable. Anyway, the <code>global</code> keyword is only useful inside a function. See this question <a href="https://stackoverflow.com/q/4693120/1513933">Use of “global” keyword in Python</a></p>
<pre><code>ListPath = (".\\Lists\\test.txt")
</code></pre>
<p>It sounds a <code>list</code>, but it is not! In fact, this is a string.
So, you can write it:</p>
<pre><code>ListPath = ".\\Lists\\test.txt"
</code></pre>
<p>To open a file, use a <code>with</code> statement. See <a href="https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files" rel="nofollow noreferrer">Reading and Writing files</a>.</p>
<pre><code>with open(ListPath, "r") as f:
    LineList = f.readlines()
</code></pre>
<p>To get the length of a list, use the <code>len()</code> function:</p>
<pre><code>rnum = random.randint(0, len(LineList) - 1)
</code></pre>
<p>I don't see any "main loop" in your program. See an <a href="https://docs.python.org/3/library/tkinter.html#a-simple-hello-world-program" rel="nofollow noreferrer">example</a> in the doc.</p>
</div>
<span class="comment-copy">It looks like your code in Load() only runs once, but it sounds like you want it to run repeatedly.  Is that accurate?</span>
<span class="comment-copy">I hadn't thought of it that way, thanks! I've solved the issue now by running a new function for every new random number.</span>
<span class="comment-copy">I've managed to solve the issue now by creating a new function that runs for every new random number. My code being awkward is due to never being properly taught python, I'm mostly self taught. Thanks for the link, I'll follow the naming conventions in the future. Can you explain the difference between using the 'with' statement versus just opening a file?</span>
<span class="comment-copy">@Pickselated: The with statement explained: <a href="https://stackoverflow.com/q/3012488/1513933">stackoverflow.com/q/3012488/1513933</a></span>
<span class="comment-copy">Do you need more explanation? I suggest you to upvote and <a href="https://meta.stackexchange.com/a/5235/344471">accept</a> my answer.</span>
