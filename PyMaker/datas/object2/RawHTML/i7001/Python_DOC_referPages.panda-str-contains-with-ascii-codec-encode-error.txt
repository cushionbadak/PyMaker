<div class="post-text" itemprop="text">
<p>I am getting the classic codex encoding error: </p>
<pre><code>UnicodeEncodeError: 'ascii' codec can't encode characters in position 11-12: ordinal not in range(128)
</code></pre>
<p>from the following code: </p>
<pre><code>def compare_handles(handle):
    new_df = df[df['Creation Specifications'].astype(str).str.contains(handle)]
</code></pre>
<p>the initial dataframe comes from an excel file, where the column contains both strings, special chars, and hyperlinks. I was having initial problems with this line until i added astype(str). However, further down in the code it threw the this error. </p>
<p>My question is how do i encode to a better codex when I am having to use the str.contains function? Given the <a href="https://docs.python.org/3/howto/unicode.html#the-unicode-type" rel="nofollow noreferrer">documentation</a> on the basics of this issue, the key is to drop the str part and add encode. However, because I am using the pandas function contains, its not really possible to "just drop the str".</p>
<p>I could create create a mapping, but I was wondering if there is a cleaner answer. </p>
<p>Note: i did try using encode utf-8 and latin in every possible position in the above code line.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can double str a pandas line. </p>
<pre><code>new_df = complete_df[complete_df['Creation Specifications'].str.encode('utf-8', errors='ignore').str.contains(handle)]
</code></pre>
</div>
