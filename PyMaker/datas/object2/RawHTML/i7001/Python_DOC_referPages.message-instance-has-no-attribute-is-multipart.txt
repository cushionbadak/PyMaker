<div class="post-text" itemprop="text">
<p>I am trying to write a script that gets me the contents of all the Mails in <code>~/Maildir</code>. So I basically copypasted code from <a href="https://stackoverflow.com/a/26567942/1329744">this question</a>. Here is the full content of <code>mailbox.py</code>:</p>
<pre><code>import mailbox
maildir = mailbox.Maildir("~/Maildir");
for message in maildir:
    print message["subject"]
    if message.is_multipart():
        print "ok"
</code></pre>
<p>It does print the subject of the first message, but instead of printing "ok" then, it dies stating</p>
<pre><code>AttributeError: Message instance has no attribute 'is_multipart'
</code></pre>
<p>What did I do wrong?</p>
</div>
<div class="post-text" itemprop="text">
<p>You have forgotten to name your Python version so let me guess â€” it's Python 2.7, right? In Python 2.7 <code>mailbox.Maildir</code> by default <a href="https://github.com/python/cpython/blob/2.7/Lib/mailbox.py#L247" rel="nofollow noreferrer">returns</a> instances of <a href="https://github.com/python/cpython/blob/2.7/Lib/rfc822.py" rel="nofollow noreferrer">rfc822.Messages</a>, not <code>email.Message</code>s; <code>rfc822.Message</code> has a completely different <a href="https://docs.python.org/2.7/library/rfc822.html" rel="nofollow noreferrer">API</a>.</p>
<p>If you want <code>mailbox.Maildir</code> to return <code>email.Message</code>s remove default <code>factory</code>:</p>
<pre><code>maildir = mailbox.Maildir("~/Maildir", factory=None)
</code></pre>
<p>In Python 3 <code>rfc822.Message</code> was removed so <code>mailbox.Maildir</code> returns <code>email.Message</code>s by default.</p>
</div>
<span class="comment-copy">could you give an example of a file in <code>~/MailDir</code>?</span>
<span class="comment-copy"><a href="https://docs.python.org/2/library/email.message.html#email.message.Message.is_multipart" rel="nofollow noreferrer"><code>is_multipart()</code></a> is a method of <a href="https://docs.python.org/2/library/email.message.html#email.message.Message" rel="nofollow noreferrer"><code>email.message.Message</code></a> so you need a <code>email.message.Message</code> object to apply it to. What's the type of  <code>message</code>?</span>
<span class="comment-copy">@user2314737: presumably this is the <a href="https://docs.python.org/3/library/mailbox.html" rel="nofollow noreferrer"><code>mailbox</code> module</a> in the stdlib, so <a href="https://docs.python.org/3/library/mailbox.html#mailbox.Message" rel="nofollow noreferrer">this class</a>, a subclass of <code>email.message.Message</code>..</span>
<span class="comment-copy">You got it. when I run it using <code>python3 mailbox.py</code> it works as expected. Thx for pointing me to it.</span>
