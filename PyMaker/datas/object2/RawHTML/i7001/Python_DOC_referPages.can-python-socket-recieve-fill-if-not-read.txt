<div class="post-text" itemprop="text">
<p>If you don't read from a python tcp socket, will it fill and cause an error ? 
In my code I use .send() and there seem to be an ack reply from the device I'm talking to. If i don't read these out, will they build up and create a problem ? Do it just keep storing them all infinitely ? Surely this would cause memory issue eventually ...
thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p>If you don't read from a tcp socket then the recv buffer on the receiving end and the send buffer on the seinding end will fill up, at which point your program will block on further <code>send()</code> calls.</p>
<p>How much memory each process will use depends on the size of those buffers, which depends on the operating system and socket options. For example, on linux you would get into a situation like this:</p>
<pre class="lang-none prettyprint-override"><code>$ ss -tpn
State  Recv-Q Send-Q  Local Address:Port Peer Address:Port   
ESTAB  0      2595384 127.0.0.1:3333     127.0.0.1:2222    users:(("python3",pid=13088,fd=3))
ESTAB  964588 0       127.0.0.1:2222     127.0.0.1:3333    users:(("python3",pid=13087,fd=4))
</code></pre>
<p>The first line shows the sending process (full send queue, ~2.6MB), the second line the receiving process (full recv queue, ~1MB).</p>
<p>This happens because during <a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol#Data_transfer" rel="nofollow noreferrer">data transfer</a> using TCP, with each ACK the receiver tells the sender how much data it is ready to accept for the next transmission. If the rec buffer is full, the send buffer will also fill up and then no more data can be sent.</p>
</div>
<span class="comment-copy">Sockets works with network buffers. What would happen is the buffer gets full, and no more data can be received.</span>
<span class="comment-copy">This means incoming traffic would be discarded, and new connections will probably fail.</span>
<span class="comment-copy">@Vinny no, incomming traffic will not be discarded automatically with tcp, <code>send()</code> will block.</span>
<span class="comment-copy">"at which point your program will block on further <code>send()</code>" -- by block you mean it will hang? or return an error?</span>
<span class="comment-copy">It will hang without error on <code>send()</code>, unless you use a <a href="https://docs.python.org/3/library/socket.html#socket-timeouts" rel="nofollow noreferrer">timeout</a> or nonblocking mode.</span>
