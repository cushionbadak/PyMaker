<div class="post-text" itemprop="text">
<p>I have a KML file with the following structure:</p>
<pre class="lang-xml prettyprint-override"><code>&lt;?xml version="1.0"?&gt;&lt;kml xmlns="http://earth.google.com/kml/2.1"&gt;
&lt;Document&gt;
&lt;name&gt;Test KML&lt;/name&gt;
&lt;description&gt;&lt;![CDATA[&lt;p&gt;This is a test version.&lt;/p&gt;]]&gt;&lt;/description&gt;
&lt;Style id="spstyle7"&gt;
    &lt;IconStyle&gt;
        &lt;color&gt;ff4DF6D8&lt;/color&gt;
        &lt;Icon&gt;&lt;href&gt;http://maps.google.com/mapfiles/kml/paddle/wht-blank.png&lt;/href&gt;&lt;/Icon&gt;
    &lt;/IconStyle&gt;
    &lt;LineStyle&gt;
        &lt;color&gt;ff4DF6D8&lt;/color&gt;
        &lt;width&gt;4&lt;/width&gt;
    &lt;/LineStyle&gt;
&lt;/Style&gt;
&lt;Folder&gt;
    &lt;name&gt;Track1&lt;/name&gt;
    &lt;visibility&gt;0&lt;/visibility&gt;
            &lt;name&gt;Test1&lt;/name&gt;
            &lt;description&gt;&lt;![CDATA[test1]]&gt;&lt;/description&gt;
            &lt;Placemark&gt;
                &lt;name&gt;test1&lt;/name&gt;
                &lt;description&gt;&lt;![CDATA[test1]]&gt;&lt;/description&gt;
                &lt;MultiGeometry&gt;
            &lt;LineString&gt;
                        &lt;tessellate&gt;true&lt;/tessellate&gt;
                        &lt;altitudeMode&gt;clampToGround&lt;/altitudeMode&gt;
                        &lt;coordinates&gt;
                            11.000,4.000 11.000,3.000
                        &lt;/coordinates&gt;
                    &lt;/LineString&gt;
            &lt;LineString&gt;
                        &lt;tessellate&gt;true&lt;/tessellate&gt;
                        &lt;altitudeMode&gt;clampToGround&lt;/altitudeMode&gt;
                        &lt;coordinates&gt;
                            11.000,4.000 12.000,4.000
                        &lt;/coordinates&gt;
                    &lt;/LineString&gt;
            &lt;LineString&gt;
                        &lt;tessellate&gt;true&lt;/tessellate&gt;
                        &lt;altitudeMode&gt;clampToGround&lt;/altitudeMode&gt;
                        &lt;coordinates&gt;
                            12.000,5.000 12.000,4.000
                        &lt;/coordinates&gt;
                    &lt;/LineString&gt;
                &lt;/MultiGeometry&gt;
            &lt;/Placemark&gt;
&lt;/Folder&gt;
&lt;Style id="spstyle7"&gt;
    &lt;IconStyle&gt;
        &lt;color&gt;ff4DF6D8&lt;/color&gt;
        &lt;Icon&gt;&lt;href&gt;http://maps.google.com/mapfiles/kml/paddle/wht-blank.png&lt;/href&gt;&lt;/Icon&gt;
    &lt;/IconStyle&gt;
    &lt;LineStyle&gt;
        &lt;color&gt;ff4DF6D8&lt;/color&gt;
        &lt;width&gt;4&lt;/width&gt;
    &lt;/LineStyle&gt;
&lt;/Style&gt;
&lt;Folder&gt;
    &lt;name&gt;Track2&lt;/name&gt;
    &lt;visibility&gt;0&lt;/visibility&gt;
            &lt;name&gt;Test2&lt;/name&gt;
            &lt;description&gt;&lt;![CDATA[test2]]&gt;&lt;/description&gt;
            &lt;Placemark&gt;
                &lt;name&gt;test2&lt;/name&gt;
                &lt;description&gt;&lt;![CDATA[test2]]&gt;&lt;/description&gt;
                &lt;MultiGeometry&gt;
            &lt;LineString&gt;
                        &lt;tessellate&gt;true&lt;/tessellate&gt;
                        &lt;altitudeMode&gt;clampToGround&lt;/altitudeMode&gt;
                        &lt;coordinates&gt;
                            8.000,8.000 8.000,7.000
                        &lt;/coordinates&gt;
                    &lt;/LineString&gt;
            &lt;LineString&gt;
                        &lt;tessellate&gt;true&lt;/tessellate&gt;
                        &lt;altitudeMode&gt;clampToGround&lt;/altitudeMode&gt;
                        &lt;coordinates&gt;
                            8.000,7.000 11.000,6.000
                        &lt;/coordinates&gt;
                    &lt;/LineString&gt;
            &lt;LineString&gt;
                        &lt;tessellate&gt;true&lt;/tessellate&gt;
                        &lt;altitudeMode&gt;clampToGround&lt;/altitudeMode&gt;
                        &lt;coordinates&gt;
                            9.000,1.000 10.000,1.000
                        &lt;/coordinates&gt;
                    &lt;/LineString&gt;
                &lt;/MultiGeometry&gt;
            &lt;/Placemark&gt;
&lt;/Folder&gt;
&lt;/Document&gt;
&lt;/kml&gt;
</code></pre>
<p>I want to get all the coordinates inside the <em>coordinates</em> tag, either into a list or into a list of lists (one for each folder).</p>
<p>As a start, I wrote the following code:</p>
<pre><code>import xml.etree.ElementTree as ET
tree = ET.parse("test.kml")
root = tree.getroot()
results = root.findall('Folder')
textnumbers = [r.find('Placemark/LineString/coordinates').text for r in results]
print textnumbers
</code></pre>
<p>But it returns an empty list. If I try to get only the <em>Folder</em> names, with the code below:</p>
<pre><code>for folder in root.findall('Folder'):
    name = folder.find('name')
    print name
</code></pre>
<p>I also get an empty string. Why the heck doesn't the parser find the <em>Folder</em> tag? Any hints?</p>
<p>Thanks in advance for any assistance you can provide.</p>
</div>
<div class="post-text" itemprop="text">
<p>Your root is <code>kml</code> node not <code>Document</code> node as you assume</p>
<p>When you do <code>tree.getroot()</code> you grab <code>kml</code> node. In this case if you just change your code to include <code>Document</code> as child node of root it should work.</p>
<p>Actually only line to change should be this:</p>
<pre><code>result = root.findall('Document/Folder')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>In fact, I found a fine solution here: <a href="https://gis.stackexchange.com/questions/89543/get-points-from-a-kml-linestring">https://gis.stackexchange.com/questions/89543/get-points-from-a-kml-linestring</a>.</p>
<p>Modyfing my code accordingly:</p>
<pre><code>import xml.etree.ElementTree as ET
tree = ET.parse("test.kml")
root = tree.getroot()

lineStrings = tree.findall('.//{http://earth.google.com/kml/2.1}LineString')

for attributes in lineStrings:
    for subAttribute in attributes:
        if subAttribute.tag == '{http://earth.google.com/kml/2.1}coordinates':
            print subAttribute.tag, subAttribute.text
</code></pre>
<p>I have been able to retrieve all the coordinate data.</p>
<p>Other possible solutions (not tested) can also be found here: <a href="https://programmingadvent.blogspot.com.br/2013/06/kmzkml-file-parsing-with-python.html" rel="nofollow noreferrer">https://programmingadvent.blogspot.com.br/2013/06/kmzkml-file-parsing-with-python.html</a> and here: <a href="http://gsp.humboldt.edu/olm_2016/courses/GSP_318/04_3_2_Parsing_XML.html" rel="nofollow noreferrer">http://gsp.humboldt.edu/olm_2016/courses/GSP_318/04_3_2_Parsing_XML.html</a></p>
<p>Best regards,</p>
</div>
<span class="comment-copy">@Wondercricket ... that is ill-advised. Namespaces should not have to be removed for XML parsing.</span>
<span class="comment-copy">And I fail to see what namespaces have to do with my problem.</span>
<span class="comment-copy">It is exactly your problem as you have a namespace with undeclared prefix but do not use in parsing and hence no results!</span>
<span class="comment-copy">Sure, I have not paid due attention to it. Thanks!</span>
<span class="comment-copy">Did you removed namespaces from the documents? If there are namespaces, you can read the XML easily</span>
<span class="comment-copy">Thanks, but unfortunately it does not work. I still got an empty list.</span>
<span class="comment-copy">Though you grabbed code and found your answer. The real issue is you need to explicitly declare the namespace (<code>xmlns</code>) as done here within the braces <code>{...}</code> and as shown in <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#parsing-xml-with-namespaces" rel="nofollow noreferrer">docs</a>. Also, you did not parse down to the <i>LineString</i> node with double <code>.//</code> XML operator to get all <i>coordinates</i>.</span>
<span class="comment-copy">Parfait, I did not understand. The above code iactually gets all coordinates inside the 'coordinates' tag, which is what I want. And it explicitly declares the namespace within braces.</span>
<span class="comment-copy">@maurobio I have added an answer that should address your issue. Take a look into it. Thanks.</span>
