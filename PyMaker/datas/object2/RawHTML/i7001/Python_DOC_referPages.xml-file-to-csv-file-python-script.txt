<div class="post-text" itemprop="text">
<p>I need a python script for extract data from xml file</p>
<p>I have a xml file as shoen below:</p>
<pre><code>&lt;software&gt;
    &lt;name&gt;Update Image&lt;/name&gt;
    &lt;Build&gt;22.02&lt;/Build&gt;
    &lt;description&gt;Firmware for Delta-M Series &lt;/description&gt;
    &lt;CommonImages&gt;  &lt;/CommonImages&gt;
&lt;ModelBasedImages&gt;
    &lt;ULT&gt;
        &lt;CNTRL_0&gt;
             &lt;file type="UI_APP" ver="2.35" crc="1234"/&gt;
             &lt;file type="MainFW" ver="5.01" crc="5678"/&gt;
             &lt;SIZE300&gt;
                &lt;file type="ParamTableDB" ver="1.1.4" crc="9101"/&gt;
             &lt;/SIZE300&gt;
        &lt;/CNTRL_0&gt;
        &lt;CNTRL_2&gt;
            &lt;file type="UI_APP" ver="2.35" crc="1234"/&gt;
            &lt;file type="MainFW" ver="5.01" crc="9158"/&gt;
        &lt;/CNTRL_2&gt;  
    &lt;/ULT&gt;
&lt;/ModelBasedImages&gt;
&lt;/software&gt;
</code></pre>
<p>I want the data in table format like:</p>
<p>type         ver    crc<br/>
UI_APP       2.35   1234<br/>
MainFW       5.01   5678<br/>
ParamTableDB 1.1.4  9101<br/>
UI_APP       2.35   1234<br/>
MainFW       5.01   9158</p>
<p>Extract into any type of file csv/doc....</p>
<p>I tried this code:</p>
<pre><code>import xml.etree.ElementTree as ET
import csv

tree = ET.parse("Build_40.01 (copy).xml")
root = tree.getroot()

# open a file for writing

Resident_data = open('ResidentData.csv', 'w')

# create the csv writer object

csvwriter = csv.writer(Resident_data)
resident_head = []

count = 0
for member in root.findall('file'):
    resident = []
    address_list = []
    if count == 0:
        name = member.find('type').tag
        resident_head.append(name)
        ver = member.find('ver').tag
        resident_head.append(ver)
        crc = member.find('crc').tag
        resident_head.append(crc)

        csvwriter.writerow(resident_head)
        count = count + 1

    name = member.find('type').text
    resident.append(name)
    ver = member.find('ver').text
    resident.append(ver)
    crc = member.find('crc').text
    resident.append(crc)

    csvwriter.writerow(resident)
Resident_data.close()
</code></pre>
<p>Thanks in advance
edited:xml code updated.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use the <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#xpath-support" rel="nofollow noreferrer">xpath</a> expression <code>.//file</code> to find all <code>&lt;file&gt;</code> elements in the XML document, and then use each element's attributes to populate the CSV file through a <a href="https://docs.python.org/3/library/csv.html#csv.DictWriter" rel="nofollow noreferrer"><code>csv.DictWriter</code></a>:</p>
<pre><code>import csv
import xml.etree.ElementTree as ET

tree = ET.parse("Build_40.01 (copy).xml")
root = tree.getroot()

with open('ResidentData.csv', 'w') as f:
    w = csv.DictWriter(f, fieldnames=('type', 'ver', 'crc'))
    w.writerheader()
    w.writerows(e.attrib for e in root.findall('.//file'))
</code></pre>
<p>For your sample input the output CSV file will look like this:</p>
<pre>
type,ver,crc
UI_APP,2.35,1234
MainFW,5.01,5678
ParamTableDB,1.1.4,9101
UI_APP,2.35,1234
MainFW,5.01,9158
</pre>
<p>which uses the default delimiter (comma) for a CSV file. You can change the delimiter using the <code>delimiter=' '</code> option to <code>DictWriter()</code>, however, you will not be able to obtain the same formatting as your sample output, which appears to use fixed width fields (but you might get away with using tab as the delimiter).</p>
</div>
<span class="comment-copy">What have you tried? Question is off-topic unless you mention some of your efforts to solving the problem.</span>
<span class="comment-copy"><code>xml.etree.ElementTree.ParseError: mismatched tag: line 13</code> for the <code>&lt;SIZE300&gt;</code> tag. Use <code>bs4</code> perhaps?</span>
<span class="comment-copy">That's not valid xml.</span>
<span class="comment-copy">its a type error, there is  "&lt;/SIZE300&gt;". consider it and help me out</span>
<span class="comment-copy">@SanjeevKumar: if it's a typo then edit the question to correct the invalid data so that others are not also mislead.</span>
