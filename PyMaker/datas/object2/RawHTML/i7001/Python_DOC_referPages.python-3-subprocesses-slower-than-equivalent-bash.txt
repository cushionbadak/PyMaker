<div class="post-text" itemprop="text">
<p>I'm using a python3 script to automatize  some jobs.
I need to measure the time of such external jobs. So I decided to use python 3 built-in time() combined with the subprocess module:</p>
<pre><code>with open(in_files[i],'r') as f, open(sol_files[i],'w') as f_sol:
        start = time.time()
        process = subprocess.run(['./'+src_files[i]], stdin = f, stdout=f_sol)
        end = time.time()
</code></pre>
<p>The calculated elapsed time by this python snippet is 0.73 seconds</p>
<p>However, the equivalent bash command:</p>
<pre><code>time ./file &lt; input_file &gt; output_file
</code></pre>
<p>Is significantly faster: 0.5 seconds</p>
<p>Which could be causing this huge discrepancy? Maybe the context switching with the python interpreter due the redirection usage? Maybe something related to buffering?</p>
<p>A similar code without the redirection usage does not show this behavior:</p>
<pre><code>start = time.time()
process = subprocess.run(['sleep','1'])
end = time.time()
</code></pre>
<p>The above code time is elapsed in 1s + negligible time.</p>
<p>Best regards </p>
</div>
<div class="post-text" itemprop="text">
<p>It was a stupid mistake.</p>
<p>time.time() does not have a good precision in most systems.</p>
<blockquote>
<p>Note that even though the time is always returned as a floating point number, not all systems provide time with a better precision than 1 second. While this function normally returns non-decreasing values, it can return a lower value than a previous call if the system clock has been set back between the two calls.
  <a href="https://docs.python.org/3/library/time.html" rel="nofollow noreferrer">Python 3 Time Module Documentation</a></p>
</blockquote>
<p>perf_counter() or process_time()  works just fine. Nothing wrong with subprocesses.</p>
</div>
<span class="comment-copy">I wouldn't consider 0.5 seconds <i>significantly faster</i> than 0.73 seconds. Have you repeated the measurement several times? Maybe the fluctuation in running times is even greater than the difference you have observed.</span>
<span class="comment-copy">Yes I did. The results were the same. The STDev was negligible. Best regards</span>
