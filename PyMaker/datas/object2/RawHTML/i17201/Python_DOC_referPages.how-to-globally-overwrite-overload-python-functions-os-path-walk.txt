<div class="post-text" itemprop="text">
<p><a href="https://github.com/benhoyt/scandir" rel="nofollow">scandir.walk() is a better alternative to os.walk()</a>.</p>
<p>I want to replace all instances of os.walk() with scandir.walk(). However, I also want to make sure all future devs will be using scandir.walk(). </p>
<p>This will be hard to enforce, and so I am wondering if it is possible to override the default os.walk() functionality.</p>
</div>
<div class="post-text" itemprop="text">
<h3>Python 3.5+</h3>
<p><a href="https://docs.python.org/3/library/os.html#os.walk" rel="nofollow"><code>os.walk</code></a> is now <code>scandir.walk</code>. Citing <a href="https://www.python.org/dev/peps/pep-0471/" rel="nofollow">PEP 471</a>:</p>
<blockquote>
<p>As part of this proposal, <em>os.walk()</em> will also be modified to use <em>scandir()</em> rather than <em>listdir()</em> and <em>os.path.isdir()</em>. </p>
</blockquote>
<p>It is</p>
<blockquote>
<p>now implemented using <em>os.scandir()</em>, which speeds it up by 3-5
  times on POSIX systems and by 7-20 times on Windows systems.
  [...] The implementation of this proposal was written by Ben Hoyt (initial &gt; version) and Tim Golden (who helped a lot with the C extension &gt; module). It lives on GitHub at <a href="https://github.com/benhoyt/scandir" rel="nofollow">benhoyt/scandir</a>.</p>
</blockquote>
<h3>Older Python</h3>
<p>Just patch it:</p>
<pre><code>&gt;&gt;&gt; import scandir
&gt;&gt;&gt; import os
&gt;&gt;&gt; os.walk
&lt;function walk at 0x7f3c02afc8c0&gt;
&gt;&gt;&gt; scandir.walk
&lt;function walk at 0x7f3c00fe28c0&gt;
&gt;&gt;&gt; os.walk = scandir.walk
&gt;&gt;&gt; os.walk is scandir.walk
True
&gt;&gt;&gt; os.walk('/')
&lt;generator object walk at 0x7f3c02b53500&gt;
</code></pre>
<p>because</p>
<blockquote>
<p>The API for <em>scandir.walk()</em> is exactly the same as <em>os.walk()</em></p>
</blockquote>
<p>(from the <a href="https://github.com/benhoyt/scandir#walk" rel="nofollow">GitHub page</a>)</p>
</div>
<div class="post-text" itemprop="text">
<p>If you really want permanence it may be worthwhile to actually modify <code>os.py</code> file in your Python installation.  To avoid a hassle if you ever want to revert,  I would recommend this sort of thing in that file:</p>
<pre><code>def walk(top, topdown=True, onerror=None, followlinks=False):
    """walk function doc string"""


    import scandir
    return scandir.walk(top, topdown, onerror, followlinks)
</code></pre>
<p>I think this will work, but I'm not entirely sure and I'm too paranoid about messing up <em>my company's</em> python install to test it.  So you may have to do some playing around, but I think modifying the actual <code>os</code> module is what you want.  Hope this helps</p>
</div>
<span class="comment-copy">Do you mean replace it for just one machine? Or everybody everywhere? (hint: the second one is <i>wrong</i>)</span>
<span class="comment-copy">Correction, future devs in my company :D</span>
