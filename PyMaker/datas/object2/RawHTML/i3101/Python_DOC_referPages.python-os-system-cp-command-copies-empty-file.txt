<div class="post-text" itemprop="text">
<p>Directory 1: I have some number of txt files and one xml file which I want to change in each iteration according to txt file content.</p>
<p>Directory 2: I want to copy altered xml file to this directory after each iteration.</p>
<p>After execution I can observe the altered xml file in directory 1 which contains last txt file content as expected. However, directory 2 contains empty files with expected names.
May be there is some issue in my cp command? Could you please help?</p>
<pre><code>os.system('cp /home/username/xmlFile.xml /home/username/NewFolder/%s.xml' % myString)
</code></pre>
<p>Entire script:</p>
<pre><code>#!/usr/bin/python
import os
import re
from shutil import copyfile

arr = os.listdir('/di/rec/to/ry')
newArr = []
for j in arr:
        m = re.search('.*txt', j)
        if m != None:
                newArr.append(m.group(0))
for i in newArr:
        myString = ""
        f = open('/home/username/xmlFile.xml', 'r+')
        i = i[:-4]
        data = f.readlines()
        myString += str(i)
        data[10] = data[10][:36] + i + data[10][64:]
        f.truncate(0)
        f.seek(0)
        f.writelines(data)
        #os.system('cp /home/username/xmlFile.xml /home/username/NewFolder/%s.xml' % myString)
        copyfile('/home/username/xmlFile.xml', '/home/username/NewFolder/%s.xml' % myString)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>It seems likely you're encountering synchronization issues. Files aren't immediately written to disk, but buffered in memory to increase overall throughput. This means that the <code>copyfile</code> call isn't seeing the latest changes you have made the files. Try calling <code>f.flush()</code> before <code>copyfile</code> to ensure the change is committed to disk.</p>
</div>
<span class="comment-copy">please post all content of python file and what is error did you get ?</span>
<span class="comment-copy">Did you check the return value from <code>os.system()</code>?  Why are you using an external program to copy a file instead of the python standard library?</span>
<span class="comment-copy">@cdarke I have imported python os library</span>
<span class="comment-copy"><code>os</code> doesn't copy files, and <code>os.system()</code> is deprecated anyway.  Look at <a href="https://docs.python.org/3/library/shutil.html?highlight=copyfile#shutil.copyfile" rel="nofollow noreferrer">docs.python.org/3/library/â€¦</a></span>
<span class="comment-copy">@ThanhNguyenVan Actually 1st part works as I expected but I have posted anyway</span>
<span class="comment-copy">That really helped, thanks a lot.</span>
