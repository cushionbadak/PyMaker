<div class="post-text" itemprop="text">
<p>I need help with getting the hostname of a client that's connecting with a socket</p>
<p>partial code:</p>
<pre><code>s = socket.socket()
host = ''
port = 5007
s.bind((host, port))
s.listen(100)
conn, addr = s.accept()
print('connected by: ', addr)
</code></pre>
<p>I want that instead of printing the ip address of the user it will print his hostname.</p>
<p>Thanks in advance.</p>
</div>
<div class="post-text" itemprop="text">
<p>If there is a DNS PTR record for the clients IP address then <a href="https://docs.python.org/3/library/socket.html#socket.gethostbyaddr" rel="nofollow noreferrer">gethostbyaddr</a> will give you the name which is setup with this record. Note that this call will  block until the DNS lookup is done (or failed), that there is no PTR record for all IP addresses and that you cannot really trust the contents of this record since the owner of the IP address can claim any hostname, even if the domain is owned by somebody else. </p>
</div>
<span class="comment-copy">@JamesKPolk: thanks for pointing this out. Of course it will block. I've fixed it in the answer.</span>
