<div class="post-text" itemprop="text">
<p>I have an Asyncio script I'm writing. Everything is working but I had a question about what I'm seeing in a tuple asyncio returns as the address.</p>
<p>This line of code returns two different things depending on weather I connect with a client using localhost or my local IP address.</p>
<pre><code>(Server code)
addr = writer.get_extra_info('peername')
print("Received %r from %r" % (message, addr))
</code></pre>
<p>With localhost as my connection in my client, I see this on my server</p>
<pre><code>(Client code)
reader, writer = await asyncio.open_connection('localhost', 8888, loop=asyncloop)

(Server prints)
Received 'Hello World!' from ('::1', 50402, 0, 0)
</code></pre>
<p>And with an IP address as my connection in my client,</p>
<pre><code>(Client code)
reader, writer = await asyncio.open_connection('192.168.147.200', 8888, loop=asyncloop)

(Server prints)
Received 'Hello World!' from ('192.168.147.139', 50313)
</code></pre>
<p>What are the meanings of the two zero's in the first tuple? And why aren't they there when I connect with an IP?</p>
</div>
<div class="post-text" itemprop="text">
<p>See <a href="https://docs.python.org/3.5/library/socket.html?highlight=socket#socket-families" rel="nofollow noreferrer">https://docs.python.org/3.5/library/socket.html?highlight=socket#socket-families</a></p>
<p>Your localhost connection is arriving via IPv6:</p>
<blockquote>
<p>For <code>AF_INET6</code> address family, a four-tuple <code>(host, port, flowinfo, scopeid)</code> is used, where <em>flowinfo</em> and <em>scopeid</em> represent the <code>sin6_flowinfo</code> and <code>sin6_scope_id</code> members in <code>struct sockaddr_in6</code> in C. For <code>socket</code> module methods, <em>flowinfo</em> and <em>scopeid</em> can be omitted just for backward compatibility. Note, however, omission of <em>scopeid</em> can cause problems in manipulating scoped IPv6 addresses.</p>
</blockquote>
<p>Your explicit IP address connection is an IPv4 connection, for which:</p>
<blockquote>
<p>A pair <code>(host, port)</code> is used for the <code>AF_INET</code> address family, where <em>host</em> is a string representing either a hostname in Internet domain notation like 'daring.cwi.nl' or an IPv4 address like '100.50.200.5', and <em>port</em> is an integer.</p>
</blockquote>
<p>The hostname <code>'localhost'</code> can be resolved to either an IPv6 or IPv4 address, whereas <code>'192.168.147.200'</code> is an explicit IPv4 address.</p>
</div>
<div class="post-text" itemprop="text">
<p>Additional fields seems to be related about the <a href="https://en.wikipedia.org/wiki/IPv6#Global_addressing" rel="nofollow noreferrer">IPv6 address scoping</a>.</p>
<p>See also <a href="https://docs.python.org/3/library/socket.html#socket.getnameinfo" rel="nofollow noreferrer">socket.getnameinfo</a> and <a href="https://docs.python.org/3/library/socket.html#socket.getpeername" rel="nofollow noreferrer">socket.getpeername</a>.</p>
</div>
