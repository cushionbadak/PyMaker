<div class="post-text" itemprop="text">
<p>I have written code to create frequency table. but it is breaking at the line  <code>ext_string = document_text.read().lower(</code>. I even put a try and except to catch the error but it is not helping.</p>
<pre><code>import re
import string
frequency = {}
file = open('EVG_text mining.txt', encoding="utf8")
document_text = open('EVG_text mining.txt', 'r')
text_string = document_text.read().lower()
match_pattern = re.findall(r'\b[a-z]{3,15}\b', text_string)
for word in match_pattern:
    try:
        count = frequency.get(word,0)
        frequency[word] = count + 1
    except UnicodeDecodeError:
        pass

frequency_list = frequency.keys()

for words in frequency_list:
    print (words, frequency[words])
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You are opening your file twice, the second time without specifying the encoding:</p>
<pre><code>file = open('EVG_text mining.txt', encoding="utf8")
document_text = open('EVG_text mining.txt', 'r')
</code></pre>
<p>You should open the file as follows:</p>
<pre><code>frequencies = {}
with open('EVG_text mining.txt', encoding="utf8", mode='r') as f:
    text = f.read().lower()

match_pattern = re.findall(r'\b[a-z]{3,15}\b', text)
...
</code></pre>
<p>The second time you were opening your file, you were not defining what encoding to use which is probably why it errored.
The with statement helps perform certain task linked with I/O for a file. You can read more about it here: <a href="https://www.pythonforbeginners.com/files/with-statement-in-python" rel="nofollow noreferrer">https://www.pythonforbeginners.com/files/with-statement-in-python</a></p>
<p>You should probably have a look at error handling as well as you were not enclosing the line that was actually causing the error: <a href="https://www.pythonforbeginners.com/error-handling/" rel="nofollow noreferrer">https://www.pythonforbeginners.com/error-handling/</a></p>
<p>The code ignoring all decoding issues:</p>
<pre><code>import re
import string  # Do you need this?

with open('EVG_text mining.txt', mode='rb') as f:  # The 'b' in mode changes the open() function to read out bytes.
    bytes = f.read()
    text = bytes.decode('utf-8', 'ignore') # Change 'ignore' to 'replace' to insert a '?' whenever it finds an unknown byte.

match_pattern = re.findall(r'\b[a-z]{3,15}\b', text)

frequencies = {}
for word in match_pattern:  # Your error handling wasn't doing anything here as the error didn't occur here but when reading the file.
    count = frequencies.setdefault(word, 0)
    frequencies[word] = count + 1

for word, freq in frequencies.items():
    print (word, freq)
</code></pre>
</div>
<span class="comment-copy">Hi @miquel please refer re edit. I implemented the change u said but I am getting a new error UnicodeDecodeError: 'utf-8' codec can't decode byte 0xc2 in position 71008: invalid continuation byte</span>
<span class="comment-copy">Are you sure the file is encoded in utf-8? Look here for info on encoding/decoding bytes: <a href="https://docs.python.org/3/howto/unicode.html" rel="nofollow noreferrer">docs.python.org/3/howto/unicode.html</a>.</span>
<span class="comment-copy">You can do two things. Check the file and try to find the right encoding. Or open the file as bytes and decode ignoring/replacing all bytes it doesn't recognise. I've edited your code to ignore all unknown bytes and refactored the rest of the code so it should work. Although the best way would still be to find out what characters it isn't decoding.</span>
<span class="comment-copy">Thank you Miquel. the re edit solved the problem. Also, do you know any other library in python except for WordCloud that could help visualize the frequency of words?</span>
<span class="comment-copy">@Joey No worries! No sorry I am not very familiar with visualisation tools in python.</span>
