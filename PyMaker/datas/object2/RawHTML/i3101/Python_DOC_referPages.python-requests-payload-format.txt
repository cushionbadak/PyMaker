<div class="post-text" itemprop="text">
<p>I am working on a POST request using requests library.</p>
<p>My post requests is working fine if I am using carriage returns in my payload, such as this:</p>
<pre><code>payload = "{\r\n        \"name\": \r\n        {\r\n            \"@action\": \"login\",\r\n            \"@appname\": \"app\",\r\n            \"@class\": \"login\",\r\n            \"@nocookie\": 1,\r\n            \"@code\": \"101\",\r\n            \"@psw\": \"12345\",\r\n            \"@relogin\": \"0\",\r\n            \"@username\": \"user123\"\r\n        }\r\n}\r\n"
</code></pre>
<p>But if I format it to make the payload look pretty the request is not working:</p>
<pre><code>payload = { 
    'name': 
        { 
            '@action': "login", 
            '@appname': "app", 
            '@class': "login", 
            'nocookie': 1, 
            '@code': "101", 
            'psw': "12345", 
            '@relogin': "0", 
            '@username': "user123" 
        } 
} 
</code></pre>
<p>I am getting 500 Error using the second payload. First payload works as expected. Any ideas? </p>
</div>
<div class="post-text" itemprop="text">
<p>Most likely, you just need to create a JSON string from your structure using the <a href="https://docs.python.org/3/library/json.html#json.dumps" rel="nofollow noreferrer">function <code>json.dumps</code></a> first:</p>
<pre><code>data = json.dumps(payload)
</code></pre>
<p>And then use the <code>data</code> variable instead of your original <code>payload</code>.</p>
</div>
<span class="comment-copy">Show also how are you actually making the request, please.</span>
<span class="comment-copy">You have two entirely different things here - one is a string, one is a dictionary.  Of course they work differently!</span>
<span class="comment-copy">Please approve my answer in case it solved your issue. It's more important than upvoting it because it signals the right answer to other users looking for the solution to the same issue. Some answers may be helpful but don't exactly solve the OP issue. Those may be upvoted but not marked as an accepted answer.</span>
<span class="comment-copy">Thanks for your answer, it solved my problem.</span>
