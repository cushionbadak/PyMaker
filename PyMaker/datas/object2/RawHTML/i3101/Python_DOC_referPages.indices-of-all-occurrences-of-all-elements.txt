<div class="post-text" itemprop="text">
<p>given a list I would like to see indices of all occurrences of all elements in a dictionary. I am looking for the Python implementation of function <a href="https://code.kx.com/q/ref/dictsandtables/#group" rel="nofollow noreferrer">group</a> offered by the Q programming language. I am expecting a simpler solution than code below</p>
<pre><code>l=[2, 1, 1, 7, 2]

d={}
for e, v in enumerate(l):
    if v in d.keys():
        d[v].append(e)
    else:
        d[v]= [e]

print(d)

{2: [0, 4], 1:[1, 2], 7: [3]}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You could use a <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="nofollow noreferrer"><code>defaultdict</code></a> to smoothen your code, but other than that, it's fine:</p>
<pre><code>from collections import defaultdict

d = defaultdict(list)
for i, x in enumerate(l):
    d[x].append(i)
</code></pre>
<p>Alternativey, you can use the <a href="https://docs.python.org/3/library/stdtypes.html#dict.setdefault" rel="nofollow noreferrer"><code>setdefault</code></a> method to access <code>dict</code> values:</p>
<pre><code>d = {}
for i, x in enumerate(l):
    d.setdefault(x, []).append(i)
</code></pre>
</div>
<span class="comment-copy">Your code looks fine to me.  What's the problem with it?  Just put this in a function <code>def group(it):</code> and you're done.</span>
<span class="comment-copy">Can simplify <code>v in d.keys()</code> to <code>v in d</code> (which is also very important for performance if you happen to use Python 2, but donâ€™t use Python 2).</span>
