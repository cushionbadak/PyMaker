<div class="post-text" itemprop="text">
<p>If one does <code>dir()</code> on some builtin callables (class constructors, methods, etc) on CPython 3.4, one finds out that many of them often have a special attribute called <code>__text_signature__</code>, for example:</p>
<pre><code>&gt;&gt;&gt; object.__text_signature__
'()'
&gt;&gt;&gt; int.__text_signature__
&gt;&gt;&gt; # was None
</code></pre>
<p>However the documentation for this is nonexistent. Furthermore, googling for the attribute name suggests that there is also another possible special attribute <code>__signature__</code>, though I did not find any built-in functions that would have it.</p>
<p>I do know they are related to the function argument signature, but nothing beyond that, what do their values signify and what is the use of them?</p>
</div>
<div class="post-text" itemprop="text">
<p>These attributes are there to enable introspection for Python objects defined in C code. The <a href="https://docs.python.org/3/howto/clinic.html" rel="noreferrer">C-API Argument Clinic</a> provides the data, to assist the <code>inspect</code> module when building <a href="https://docs.python.org/3/library/inspect.html#introspecting-callables-with-the-signature-object" rel="noreferrer"><code>Signature</code> objects</a>. Introspection of C-API functions was not supported before.</p>
<p>See the internal <a href="https://hg.python.org/cpython/file/0668b3daa84e/Lib/inspect.py#l1736" rel="noreferrer"><code>inspect._signature_fromstr()</code> function</a> on how the <code>__text_signature__</code> value is used.</p>
<p>Currently, the <code>__text_signature__</code> attribute is filled from the internal docstring set on objects in the C-API; a simple text search is done for <code>objectname(...)\n--\n\n</code>, where the <code>\n--\n\n</code> is typical of Attribute Clinic-generated documentation strings. Take a look at the <a href="https://hg.python.org/cpython/file/0668b3daa84e/Objects/typeobject.c#l6150" rel="noreferrer"><code>type</code> object slots</a> if you wanted to find some examples. Or you could look at the <a href="https://hg.python.org/cpython/file/fcf45ec7863e/Modules/audioop.c" rel="noreferrer"><code>audioop</code> module source</a> to see how the Argument Clinic is being used to define signatures; the <a href="https://hg.python.org/cpython/file/fcf45ec7863e/Tools/clinic/clinic.py" rel="noreferrer">Argument Clinic script</a> is run on those when building to generate the docstrings (in the accompanying <a href="https://hg.python.org/cpython/file/fcf45ec7863e/Modules/clinic/audioop.c.h" rel="noreferrer"><code>audioop.c.h</code> file</a>).</p>
<p>The <code>__signature__</code> attribute, if present, would be a <code>inspect.Signature()</code> object; instead of providing a text version a C-API can provide a fully parsed <code>Signature</code> instance instead.</p>
</div>
<span class="comment-copy">There is a grave error in your answer though, the C-API is called Argument Clinic, a reference to the Monty Python sketch by the same name ;)</span>
<span class="comment-copy">@Antti: <i>I've told you once</i>.</span>
<span class="comment-copy">The beginning still says "Attribute Clinic" :D</span>
<span class="comment-copy">@Antti: <i>No it doesn't</i>. I'm sorry, is this a 5 minute argument or a full half hour?</span>
<span class="comment-copy">oh... just the five minutes.</span>
