<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/10270970/python-how-do-i-capture-a-variable-declared-in-a-non-global-ancestral-outer-sco">python: How do I capture a variable declared in a non global ancestral outer scope?</a>
<span class="question-originals-answer-count">
                    5 answers
                </span>
</li>
</ul>
</div>
<p>I have a function nested inside an other function. I want to change a variable inside the first function from the nested one.</p>
<pre><code>def myfunc():
    step=0

    def increment():
        step+=1

    increment()
    increment()
    increment()
    print("Steps so far:", step)

myfunc()
</code></pre>
<p>Gives</p>
<blockquote>
<p>UnboundLocalError: local variable 'step' referenced before assignment</p>
</blockquote>
<p>If I try and use <code>global</code>, it won't work either since it tries to dereference to a variable <code>step</code> outside <code>myfunc</code> which doesn't exist.</p>
<p>Is there a way to do this without having a global variable?</p>
</div>
<div class="post-text" itemprop="text">
<p>Declare <code>step</code> as a <a href="https://docs.python.org/3/reference/simple_stmts.html#the-nonlocal-statement" rel="nofollow"><code>nonlocal</code></a> variable. It will make the identifier refer the variable in enclosing scope.</p>
<pre><code>def increment():
    nonlocal step
    step += 1
</code></pre>
<p><strong>NOTE</strong> Python 3.x only.</p>
</div>
<span class="comment-copy">@AshwiniChaudhary, You're right. I added a note in the answer accordingly.</span>
