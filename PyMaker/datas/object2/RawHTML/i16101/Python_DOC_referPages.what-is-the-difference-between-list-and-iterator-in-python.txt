<div class="post-text" itemprop="text">
<p>I am reading the book <a href="http://greenteapress.com/wp/think-python-2e/" rel="noreferrer">Think Python: How to think like a computer scientist</a>, which says that in Python 3.x, <code>dict([list of tuples])</code> returns an <code>iterator</code> instead of a <code>list</code> (as is the case in Python 2.7).</p>
<p>The book did not explain it any further, which has left me confused. In particular, I would like to know:</p>
<ol>
<li><p>How are iterators and lists different, and</p></li>
<li><p>What is the advantage of returning an iterator over a list?</p></li>
</ol>
</div>
<div class="post-text" itemprop="text">
<p>First of all, your book is wrong (or you've misunderstood it):</p>
<pre><code>&gt;&gt;&gt; dict([(1, 2), (3, 4), (5, 6)])
{1: 2, 3: 4, 5: 6}
</code></pre>
<p>As you can see, <code>dict([</code><em><code>list of tuples</code></em><code>])</code> returns a dictionary in both Python 2.x and 3.x.</p>
<p>The fundamental difference between a list and an iterator is that a list <em>contains</em> a number of objects in a specific order - so you can, for instance, pull one of them out from somewhere in the middle:</p>
<pre><code>&gt;&gt;&gt; my_list = ['a', 'b', 'c', 'd', 'e', 'f', 'g']
&gt;&gt;&gt; my_list
['a', 'b', 'c', 'd', 'e', 'f', 'g']
&gt;&gt;&gt; my_list[3]
'd'
</code></pre>
<p>... whereas an iterator <em>yields</em> a number of objects in a specific order, often creating them on the fly as requested:</p>
<pre><code>&gt;&gt;&gt; my_iter = iter(range(1000000000000))
&gt;&gt;&gt; my_iter
&lt;range_iterator object at 0x7fa291c22600&gt;
&gt;&gt;&gt; next(my_iter)
0
&gt;&gt;&gt; next(my_iter)
1
&gt;&gt;&gt; next(my_iter)
2
</code></pre>
<p>I'm using <a href="https://docs.python.org/3/library/functions.html#next" rel="noreferrer"><code>next()</code></a> here for demonstration purposes; in real code it's more common to iterate over an iterator with a for loop:</p>
<pre><code>for x in my_iter:
    # do something with x
</code></pre>
<p>Notice the trade-off: a list of a trillion integers would use more memory than most machines have available, which makes the iterator much more efficient ... at the cost of not being able to ask for an object somewhere in the middle:</p>
<pre><code>&gt;&gt;&gt; my_iter[37104]
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: 'range_iterator' object is not subscriptable
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>A list is a data structure that holds a sequence of values. An iterator is an object that provides an interface to retrieve values one at a time, via the <code>next</code> function.</p>
<p>An iterable object is one that provides a <code>__iter__</code> method, which is invoked when you pass an iterable to the <code>iter</code> function. You don't often need to do this explicitly; a <code>for</code> loop, for example, does it implicitly. A loop like</p>
<pre><code>for x in [1,2,3]:
    print x
</code></pre>
<p>automatically invokes the <code>list</code>'s <code>__iter__</code> method. You can do so explicitly with</p>
<pre><code>for x in iter([1,2,3]):
    print x
</code></pre>
<p>or even more explicitly with</p>
<pre><code>for x in [1,2,3].__iter__():
    print x
</code></pre>
<p>One way to see the difference is to create <em>two</em> iterators from a <em>single</em> list.</p>
<pre><code>l = [1, 2, 3, 4, 5]
i1 = iter(l)
i2 = iter(l)
print next(i1)   # 1
print next(i1)   # 2
print next(i2)   # 1 again; i2 is separate from i1
print l          # [1, 2, 3, 4, 5]; l is unaffected by i1 or i2
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The iterator is the mechanism by which you can iterate over a list or some other set of objects/values using <code>for</code>.  A list implements an iterator.  But you can also implement iterators that return number sequences, random strings, etc. </p>
<p>When you return an iterator, you are merely returning the iteration object; the receiving code doesn't know anything about the underlying container or generator algorithm.</p>
<p>Iterators are lazy; they only return the next element in the sequence or list when asked to do so.  You can therefore implement infinite sequences with them.</p>
<p><strong>Further Reading</strong><br/>
<a href="https://docs.python.org/2/library/stdtypes.html#iterator-types" rel="nofollow">Iterator Types</a><br/>
<a href="https://docs.python.org/2/reference/compound_stmts.html#the-for-statement" rel="nofollow">The <code>for</code> statement</a></p>
</div>
<div class="post-text" itemprop="text">
<p>The Critical definitions here are : </p>
<ul>
<li>List : Fully stored in memory, and it will also be an iterator - i.e. you can go from one element to the next.</li>
<li>Iterable : Any object which implements the Iterator protocol - i.e. allow you to go from one element to the next. It could use data stored in memory, it could be a file, or each step could be calculated. </li>
</ul>
<p>Many things are iterables which aren't lists, all lists are iterables</p>
</div>
<div class="post-text" itemprop="text">
<p>An iterator is an object that yields values, but is not necessarily associated to an in-memory datastructure containing all the values to be yielded.  A list, by contrast, is fully constructed and resident in memory.  Basically, iterators are usually more memory efficient, and often more performant than the same data created as an in-memory structure, as all per-element calculation can be done when the element is accessed instead of front-loaded, and all the elements don't need to be resident in memory.</p>
</div>
<div class="post-text" itemprop="text">
<p>You should read the Python documentation's guide to the iterator protocol here: <a href="https://docs.python.org/2/library/stdtypes.html#iterator-types" rel="nofollow">https://docs.python.org/2/library/stdtypes.html#iterator-types</a></p>
<p>Basically, iterators in Python are those which conform to a general <code>protocol</code> for iterating over elements in a container. A <code>list</code> is a specific container type that conforms to that protocol.</p>
</div>
<span class="comment-copy">Er... <code>dict(...)</code> returns a <code>dict</code>.  In both python versions.  Are you referring to <code>map</code>?</span>
<span class="comment-copy">I am new at Python. How do you call the object generated by the task: "range()"? Is it "task" the proper way to refer to "range()"?</span>
