<div class="post-text" itemprop="text">
<p>I'm working on a small Python script to clean up HTML documents.  It works by accepting a list of tags to KEEP and then parsing through the HTML code trashing tags that are not in the list  I've been using regular expressions to do it and I've been able to match opening tags and self-closing tags but not closing tags. </p>
<p>The pattern I've been experimenting with to match closing tags is <code>&lt;/(?!a)&gt;</code>.  This seems logical to me so why is not working?  The <code>(?!a)</code> should match on anything that is NOT an anchor tag (not that the "a" is can be anything-- it's just an example).</p>
<p>Edit: AGG! I guess the regex didn't show!</p>
</div>
<div class="post-text" itemprop="text">
<ol>
<li><p>Read:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags">RegEx match open tags except XHTML self-contained tags</a></li>
<li><a href="https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-rege">Can you provide some examples of why it is hard to parse XML and HTML with a regex?</a></li>
</ul></li>
<li><p>Repent.</p></li>
<li><p>Use a real HTML parser, like <a href="http://www.crummy.com/software/BeautifulSoup/" rel="nofollow noreferrer">BeautifulSoup</a>.</p></li>
</ol>
</div>
<div class="post-text" itemprop="text">
<pre><code>&lt;TAG\b[^&gt;]*&gt;(.*?)&lt;/TAG&gt; 
</code></pre>
<p>Matches the opening and closing pair of a specific HTML tag.</p>
<pre><code>&lt;([A-Z][A-Z0-9]*)\b[^&gt;]*&gt;(.*?)&lt;/\1&gt;
</code></pre>
<p>Will match the opening and closing pair of any HTML tag. </p>
<p>See <a href="http://www.regular-expressions.info/examples.html" rel="noreferrer">here</a>.</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454">Don't use regex to parse HTML</a>. It will only give you headaches.</p>
<p>Use an XML parser instead. Try <a href="http://www.crummy.com/software/BeautifulSoup/" rel="nofollow noreferrer">BeautifulSoup</a> or <a href="http://codespeak.net/lxml/" rel="nofollow noreferrer">lxml</a>.</p>
</div>
<div class="post-text" itemprop="text">
<p>You may also consider using the html parser that is built into python (Documentation for <a href="https://docs.python.org/2/library/htmlparser.html" rel="nofollow noreferrer">Python 2</a> and <a href="https://docs.python.org/3/library/html.parser.html" rel="nofollow noreferrer">Python 3</a>)</p>
<p>This will help you home in on the specific area of the HTML Document you would like to work on - and use regular expressions on it.</p>
</div>
<span class="comment-copy"><a href="http://stackoverflow.com/q/4231382/471272">use HTML::Parser || die</a>. :)</span>
<span class="comment-copy">...except if there are nested tags of the same type, e.g. <code>&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;</code> - then, the regex will think that the first <code>&lt;/div&gt;</code> is the closing tag for the first <code>&lt;div&gt;</code>. As the other authors pointed out, <i>you cannot parse HTML or any similar language using regular expressions</i>.</span>
<span class="comment-copy">Thanks pavanlimo, this regex    &lt;script[^&gt;]*&gt;(.*?)script&gt;      Is working perfectly for me to detect begin and end of javascripts</span>
<span class="comment-copy">I've seen BeautifulSoup but I'm also a minimalist, so I've preferred using only what ships with Python.  I think my issue here is enough to make me reconsider it.  Thanks!</span>
<span class="comment-copy">if you want a "batteries included" solution, look at HTMLParser in the stdlib.</span>
