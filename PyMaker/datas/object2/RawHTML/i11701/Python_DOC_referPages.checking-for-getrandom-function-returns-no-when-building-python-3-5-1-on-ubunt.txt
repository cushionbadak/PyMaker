<div class="post-text" itemprop="text">
<p>I'm trying to build Python 3.5.1 on a GCE Ubuntu 14.04 VM and when running ./configure inside the unzipped folder I get:</p>
<pre><code>checking for the Linux getrandom() syscall... no
checking for the getrandom() function... no
</code></pre>
<p>The <code>uname -a</code> command returns:</p>
<p><code>Linux server.mydomain.com 3.19.0-58-generic #64~14.04.1-Ubuntu SMP Fri Mar 18 19:05:43 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux</code></p>
<p>I don't why configure cannot detect getrandom(), on the Python 3.5.1 release documentation it says Python interpreter <a href="https://docs.python.org/3/whatsnew/3.5.html#os" rel="nofollow">will detect and use this function/system call in Linux Kernels above 3.17</a></p>
<p>What am I missing here? Anyone had the same issue?</p>
<p>Thanks in advance for any answers.</p>
<p>Danilo</p>
</div>
<div class="post-text" itemprop="text">
<p>The test program Python uses to determine whether you have <code>getrandom()</code> is here: <a href="https://hg.python.org/cpython/rev/4491bdb6527b/#l3.176" rel="nofollow">https://hg.python.org/cpython/rev/4491bdb6527b/#l3.176</a></p>
<pre><code>#include &lt;sys/syscall.h&gt;

int main() {
    const int flags = 0;
    char buffer[1];
    int n;
    /* ignore the result, Python checks for ENOSYS at runtime */
    (void)syscall(SYS_getrandom, buffer, sizeof(buffer), flags);
    return 0;
}
</code></pre>
<p>What do you get if you try to build that program on your system?  If it works, your Python should use <code>getrandom()</code>, otherwise you should see from the compiler output what the problem is.</p>
<p>Edit: Now that we see that indeed you do not have <code>SYS_getrandom</code>, we can say for certain what the problem is: your kernel is new enough to support <code>getrandom()</code>, but your <code>libc</code> is not.  The solution is to upgrade your <code>glibc-dev</code>.</p>
</div>
<span class="comment-copy">have you installed <code>python-dev</code> and <code>build-essential</code>?</span>
<span class="comment-copy">Yes, all installed and the latest version.</span>
<span class="comment-copy">I get <code>test_get_random.c:8:19: error: ‘SYS_getrandom’ undeclared (first use in this function)      (void)syscall(SYS_getrandom, buffer, sizeof(buffer), flags);</code> Looking for it online gave me no clues why the constant is missing on my sys call.h</span>
<span class="comment-copy">@DaniloRiecken: I've appended more detail to my answer.  You need a newer glibc.</span>
<span class="comment-copy">@JohnZwinck : how to install a newver glibc?</span>
<span class="comment-copy">@realtebo: Just Google the question you have just asked me.</span>
