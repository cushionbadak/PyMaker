<div class="post-text" itemprop="text">
<p>What is the best way to replicate <code>datetime.datetime.now().toordinal()</code> in java?
I tried using epoch but the results are nowhere near.</p>
</div>
<div class="post-text" itemprop="text">
<p>There isn't any direct way to query that information using the Java Time API but you can calculate it.</p>
<pre><code>public static void main(String[] args) {
    long ordinal = LocalDate.now().toEpochDay() + (146097 * 5L) - (31L * 365L + 7L);

    System.out.println(ordinal);
}
</code></pre>
<p>Run today, 19th April 2016, it outputs <code>736073</code>, which is consistent with Python's output.</p>
<p>From a <a href="https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html" rel="nofollow"><code>LocalDate</code></a>, you can get the Epoch day with <a href="https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#toEpochDay--" rel="nofollow"><code>toEpochDay()</code></a>. If you take a look <a href="http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/time/LocalDate.java#LocalDate.toEpochDay%28%29" rel="nofollow">inside the current implementation</a>, you'll find that it actually calculates the total number of days since year 0 and subtracts that with the constant</p>
<pre><code>static final long DAYS_0000_TO_1970 = (DAYS_PER_CYCLE * 5L) - (30L * 365L + 7L);
</code></pre>
<p>where <code>DAYS_PER_CYCLE = 146097</code> is the number of days in a 400 year cycle. That constant isn't public, so we can't reuse it directly.</p>
<p>From the Python documentation of <a href="https://docs.python.org/3/library/datetime.html#datetime.date.toordinal" rel="nofollow"><code>toordinal()</code></a>, it defines year 1 to have an ordinal of 1. The calculus above by the Java API supposes that it is year 0 instead so we just need to adjust for that.</p>
</div>
<span class="comment-copy">Can you post what you tried and the result?</span>
<span class="comment-copy">Here's the source of <a href="https://hg.python.org/cpython/file/3a9b47b062b9/Lib/datetime.py#l57" rel="nofollow noreferrer"><code>toordinal()</code></a>; you'll likely just want to port this to Java if you really need this behavior.</span>
