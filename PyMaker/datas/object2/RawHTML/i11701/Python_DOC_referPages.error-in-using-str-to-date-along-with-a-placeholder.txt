<div class="post-text" itemprop="text">
<p>Here's the query I'm trying to use:</p>
<pre><code>sql= """SELECT APPT_NBR, STR_TO_DATE(APPT_SCHD_ARVL_TS,'%M/%D/%Y')AS Schd,
                         STR_TO_DATE(APPT_ACTL_ARVL_TS,'%M/%D/%Y) AS actl,
        DEST_LOC_NBR, CARRIER_TYP_NBR,
        VND_NBR, VND_NBR_SUPPLIER, APPT_TYP_NBR, APPT_NBR_OF_CNTRS
        FROM mixeddata            
        WHERE DEST_LOC_NBR= (%s)"""

c.execute(sql, loc_nbr)
</code></pre>
<p>It keeps throwing this error:</p>
<pre><code> File "/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/PyMySQL3-0.5-py3.5.egg/pymysql/cursors.py", line 105, in execute
    query = query % escaped_args
ValueError: unsupported format character 'M' (0x4d) at index 95
</code></pre>
<p>The error does not come in when I'm not using a place holder for DEST_LOC_NBR, for eg. if I simply put DEST_LOC_NBR=3950 the query will work just fine. But I want to use a variable in that location for my code.</p>
</div>
<div class="post-text" itemprop="text">
<p>The <code>%</code> characters in the <code>'%M/%D/%Y'</code> format are interpreted at the Python level, where the <a href="https://docs.python.org/3/library/stdtypes.html#old-string-formatting" rel="nofollow">string formatting operation</a> then complains there is no <code>M</code> format (it would do the same for <code>%D</code> and <code>%Y</code>).</p>
<p>Double the <code>%</code> to escape them (single <code>%</code> characters will be sent to the database):</p>
<pre><code>'%%M/%%D/%%Y'
</code></pre>
<p>The full string definition would then be</p>
<pre><code>sql= """SELECT APPT_NBR, STR_TO_DATE(APPT_SCHD_ARVL_TS,'%%M/%%D/%%Y')AS Schd,
                         STR_TO_DATE(APPT_ACTL_ARVL_TS,'%%M/%%D/%%Y) AS actl,
        DEST_LOC_NBR, CARRIER_TYP_NBR,
        VND_NBR, VND_NBR_SUPPLIER, APPT_TYP_NBR, APPT_NBR_OF_CNTRS
        FROM mixeddata            
        WHERE DEST_LOC_NBR= (%s)"""
</code></pre>
</div>
