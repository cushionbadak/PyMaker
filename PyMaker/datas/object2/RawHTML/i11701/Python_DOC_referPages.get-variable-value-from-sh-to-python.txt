<div class="post-text" itemprop="text">
<p>I have an .sh file that produces a picture on Raspberry Pi. and inside this file I have the following:</p>
<p>Config.sh:</p>
<pre><code>#!/bin/bash
suffix=$(date +%H%M%S)  
cd /home/pi/photobooth_images/  
sudo cp image1.jpg /usb/photobooth_images/image-${suffix}-1.jpg  
sudo convert -size 1800x1200 xc:white \  
        image1.jpg -geometry 1536x1152+240+24 -composite \   
    /home/pi/template/logo.png -geometry 192x1152+24+24 -composite \  
        PB_${suffix}.jpg  
sudo cp PB_${suffix}.jpg /usb/photobooth_montage/PB_${suffix}.jpg  
sudo rm /home/pi/photobooth_images/*  
returnvalue=PB_${suffix}.jpg  
echo "$returnvalue"  
</code></pre>
<p>What I am trying to do here is get the <code>PB_${suffix}.jpg</code> "returnvalue"  value (file name) it generated into Python. Now my Python program has this line, it runs the .sh file above.</p>
<p>Main.py:</p>
<pre><code>return_value = subprocess.call("sudo ./" + config.sh, shell=True)  
print "The Value is: " + str(return_value) + " This value from Python"  

The output I get is this  
[08:33:02 04-10-2016] [PHOTO] Assembling pictures according to 1a template.  
PB_083302.jpg  
The Value is: 0 This value from Python  
The output I am expected should be something like "PB_070638.jpg"  
</code></pre>
<p>Any help is greatly appreciated.</p>
</div>
<div class="post-text" itemprop="text">
<p>That is because <code>subprocess.call</code> only returns the return code of executing the script (<a href="https://docs.python.org/3/library/subprocess.html" rel="nofollow">documentation</a>). You want the actual output of what your script returns, so you should be using <a href="https://docs.python.org/3/library/subprocess.html#subprocess.check_output" rel="nofollow">check_output</a>, and avoid using <code>shell=True</code> </p>
<pre><code>subprocess.check_output(["sudo", "./", config.sh])
</code></pre>
<p>You also might want to revise running your script without root permission via <code>sudo</code>. It does not seem like something that <em>should</em> run using root privileges. </p>
</div>
<div class="post-text" itemprop="text">
<p>Try using the Popen constructor the with stdout arg:</p>
<pre><code>subprocess.Popen(['"sudo ./" + config.sh'], stdout=subprocess.PIPE)
</code></pre>
<p>See also:
<a href="https://stackoverflow.com/questions/30135956/get-return-value-from-shell-command-in-python">Get return value from shell command in python</a></p>
<p>Also, here's more info on Popen in the Python docs.
<a href="https://docs.python.org/2/library/subprocess.html#popen-constructor" rel="nofollow noreferrer">https://docs.python.org/2/library/subprocess.html#popen-constructor</a></p>
</div>
<span class="comment-copy">you shouldn't use <code>sudo</code> for simple operations like this. sudo is reserved for running administrative commands.</span>
<span class="comment-copy">subprocess.check_output solved the issue,  thank you very much.</span>
