<div class="post-text" itemprop="text">
<p>I'm trying to find unique instances of IP addresses in a file using regex. I find them fine and try to append them to a list and later try to use <code>set()</code> on my list to remove duplicates. I'm finding each item okay and there are duplicates but I can't get the list to simplify. The output of printing my set is the same as printing ips as a list, nothing is removed.</p>
<pre><code>ips = [] # make a list
count = 0
count1 = 0
for line in f: #loop through file line by line
    match = re.search("\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}", line) #find IPs
    if match: #if there's a match append and keep track of the total number of Ips
        ips.append(match) #append to list
        count = count + 1
ipset = set(ips)
print(ipset, count)
</code></pre>
<p>This string <code>&lt;_sre.SRE_Match object; span=(0, 13), match='137.43.92.119'&gt;</code> shows up 60+ times in the output before and after trying to <code>set()</code> the list</p>
</div>
<div class="post-text" itemprop="text">
<p>You are not storing the matched strings. You are storing the <a href="https://docs.python.org/3/library/re.html#match-objects"><em><code>re.Match</code> objects</em></a>. These don't compare equal even if they matched the same text, so they are all seen as unique by a <code>set</code> object:</p>
<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; line = '137.43.92.119\n'
&gt;&gt;&gt; match1 = re.search("\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}", line)
&gt;&gt;&gt; match1
&lt;_sre.SRE_Match object; span=(0, 13), match='137.43.92.119'&gt;
&gt;&gt;&gt; match2 = re.search("\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}", line)
&gt;&gt;&gt; match2
&lt;_sre.SRE_Match object; span=(0, 13), match='137.43.92.119'&gt;
&gt;&gt;&gt; match1 == match2
False
</code></pre>
<p>Extract the matched text instead:</p>
<pre><code>ips.append(match.group()) #append to list
</code></pre>
<p><a href="https://docs.python.org/3/library/re.html#re.match.group"><code>matchobj.group()</code></a> without arguments returns the part of the string that was matched (group 0):</p>
<pre><code>&gt;&gt;&gt; match1.group()
'137.43.92.119'
&gt;&gt;&gt; match1.group() == match2.group()
True
</code></pre>
</div>
<span class="comment-copy">the syntax is correct..maybe you need to check <code>ips</code></span>
<span class="comment-copy">You're making a set of <i>match objects</i>.</span>
<span class="comment-copy">@rock321987 the list is printing the exact same output as I can tell if I print both</span>
<span class="comment-copy">@user2357112 is there a way to just add the actual matched string to the list? Would that change anything?</span>
<span class="comment-copy">I tried to accept the answer but cannot yet. That cleared it up, thanks a lot!</span>
