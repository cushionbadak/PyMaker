<div class="post-text" itemprop="text">
<p>I want to convert a list into a regular list using Python. How do I do that?</p>
<p>Before conversion:</p>
<pre><code>        [
            {
                "id": 10005,
                "pinyin": "Lianyiqun",
                "status": "created"
            },
            {
                "id": 10006,
                "pinyin": "Xizhuang",
                "status": "created"
            },
            {
                "id": 10009,
                "pinyin": "Banshenqun",
                "status": "created"
            },
            {
                "id": 10010,
                "pinyin": "Beixindiaodai",
                "status": "created"
            },
            {
                "id": 10032,

                "pinyin": "Banshenqun",
                "status": "created"
            }
        ]
</code></pre>
<p>Now I want it to have like this (key is the first uppercase letter of pinyin, list order by key):</p>
<pre><code>[
    {
        "key":"B",
        "data":[
            {
                "id": 10009,
                "pinyin": "Banshenqun",
                "status": "created"
            },
            {
                "id": 10010,
                "pinyin": "Beixindiaodai",
                "status": "created"
            },
            {
                "id": 10032,

                "pinyin": "Banshenqun",
                "status": "created"
            }
        ]
    },
    {
        "key":"L",
        "data":[
            {
                "id": 10005,
                "pinyin": "Lianyiqun",
                "status": "created"
            }
        ]
    },
    {
        "key":"X",
        "data":[
            {
                "id": 10006,
                "pinyin": "Xizhuang",
                "status": "created"
            }
        ]
    }
]
</code></pre>
<p>I've seen other threads in here with map used for such things, but I don't completely understand it. Can anyone provide insight as to the 'correct' python way of doing this?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can do it without any Python module:</p>
<pre><code>inList =  [
            {
                "id": 10005,
                "pinyin": "Lianyiqun",
                "status": "created"
            },
            {
                "id": 10006,
                "pinyin": "Xizhuang",
                "status": "created"
            },
            {
                "id": 10009,
                "pinyin": "Banshenqun",
                "status": "created"
            },
            {
                "id": 10010,
                "pinyin": "Beixindiaodai",
                "status": "created"
            },
            {
                "id": 10032,

                "pinyin": "Banshenqun",
                "status": "created"
            }
        ]

outList = [{'key': elem, 'data': [item for item in inList if item['pinyin'][0]==elem]} for elem in set(el['pinyin'][0] for el in inList)]
for elem in outList:
    print(elem)
</code></pre>
<p>Output:</p>
<pre><code>{'key': 'B', 'data': [{'id': 10009, 'pinyin': 'Banshenqun', 'status': 'created'}, {'id': 10010, 'pinyin': 'Beixindiaodai', 'status': 'created'}, {'id': 10032, 'pinyin': 'Banshenqun', 'status': 'created'}]}
{'key': 'L', 'data': [{'id': 10005, 'pinyin': 'Lianyiqun', 'status': 'created'}]}
{'key': 'X', 'data': [{'id': 10006, 'pinyin': 'Xizhuang', 'status': 'created'}]}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use <code>itertools.groupby</code>:</p>
<pre><code>grouped = [{'key': key, 'data': sorted(grouped, key=lambda dct: dct['id'])} for key, grouped in itertools.groupby(data, lambda dct: dct['pinyin'][0])]
</code></pre>
<p>So <code>grouped</code> looks like this:</p>
<pre><code> [{'data': [{'id': 10005, 'pinyin': 'Lianyiqun', 'status': 'created'}],
  'key': 'L'},
 {'data': [{'id': 10006, 'pinyin': 'Xizhuang', 'status': 'created'}],
  'key': 'X'},
 {'data': [{'id': 10009, 'pinyin': 'Banshenqun', 'status': 'created'},
           {'id': 10010, 'pinyin': 'Beixindiaodai', 'status': 'created'},
           {'id': 10032, 'pinyin': 'Banshenqun', 'status': 'created'}],
  'key': 'B'}]
</code></pre>
</div>
