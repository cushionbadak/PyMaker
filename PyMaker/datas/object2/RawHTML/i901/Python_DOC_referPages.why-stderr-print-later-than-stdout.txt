<div class="post-text" itemprop="text">
<p><code>stderr</code> is no buffer, and <code>stdout</code> has buffer.
<code>stderr</code> is no reason later than <code>stdout</code></p>
<p>I have tried:</p>
<pre class="lang-py prettyprint-override"><code>import sys
sys.stdout.write("stdout1 ")
sys.stderr.write("stderr1 ")
sys.stdout.write("stdout2 ")
sys.stderr.write("stderr2 ")
</code></pre>
<p>run <code>python test.py</code></p>
<p>result:</p>
<pre><code>stderr1 stderr2 stdout1 stdout2
</code></pre>
<p>It works as expected.</p>
<hr/>
<pre class="lang-py prettyprint-override"><code>import sys
sys.stdout.write("stdout1 ")
sys.stderr.write("stderr1 ")
sys.stdout.write("stdout2 ")
sys.stderr.write("stderr2 ")
</code></pre>
<p>run <code>python -u test.py</code></p>
<p>result:</p>
<pre><code>stdout1 stderr1 stdout2 stderr2
</code></pre>
<p>It works as expected.</p>
<hr/>
<pre class="lang-py prettyprint-override"><code>import sys
sys.stdout.write("stdout1\n")
sys.stderr.write("stderr1\n")
sys.stdout.write("stdout2\n")
sys.stderr.write("stderr2\n")
</code></pre>
<p>run <code>python test.py</code></p>
<p>result:</p>
<pre><code>stdout1
stderr1
stdout2
stderr2
</code></pre>
<p>It works as expected.</p>
<hr/>
<pre class="lang-py prettyprint-override"><code>import sys
sys.stdout.write("stdout1 ")
sys.stderr.write("stderr1 ")
sys.stdout.write("stdout2 ")
sys.stderr.write("stderr2 ")

print()
string = ""
for i in range(10):
    string = string + str(i) + "\n"
print(string)
</code></pre>
<p>Actual results:</p>
<pre><code>stdout1 stdout2
0
1
2
3
4
5
6
7
8
9

stderr1 stderr2
</code></pre>
<p>I think it should be:</p>
<pre><code>stderr1 stderr2 stdout1 stdout2
0
1
2
3
4
5
6
7
8
9
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>In Python3.x, stderr is line-buffer<br/>
In Python2.x, stderr is unbuffered   </p>
<p><a href="https://bugs.python.org/issue13597" rel="nofollow noreferrer">https://bugs.python.org/issue13597</a><br/>
<a href="https://docs.python.org/3/library/sys.html#sys.stderr" rel="nofollow noreferrer">https://docs.python.org/3/library/sys.html#sys.stderr</a> </p>
</div>
<span class="comment-copy">If you run <code>python test.py -u</code>?</span>
<span class="comment-copy">Yes. I have resolved this problem and thanks for your help. However, <a href="https://stackoverflow.com/questions/54266222/why-the-code-print-differently-between-windows-and-linux">Another problem</a> troubles me. Do you have free time to help me?</span>
