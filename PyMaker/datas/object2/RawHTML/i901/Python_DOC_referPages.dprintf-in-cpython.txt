<div class="post-text" itemprop="text">
<p>I want to check the log printed by <code>dprintf</code> in Cpython such as <a href="https://github.com/python/cpython/blob/3.6/Python/thread_pthread.h#L315" rel="nofollow noreferrer">this one</a>, but there is only one parameter for <code>dprintf</code> here, how to check those logs? Thanks a lot for your help. </p>
</div>
<div class="post-text" itemprop="text">
<p>If you've got a release version of Python, the <code>dprintf</code>s are stripped, and there is no logging by these statements. It is not possible to see the output from them.</p>
<p><code>dprintf</code> is a macro that is actually only defined in <a href="https://github.com/python/cpython/blob/3.6/Python/thread.c#L46" rel="nofollow noreferrer"><code>thread.c</code></a>. The definition is</p>
<pre><code>#ifdef Py_DEBUG
static int thread_debug = 0;
#define dprintf(args)   (void)((thread_debug &amp; 1) &amp;&amp; printf args)
#define d2printf(args)  ((thread_debug &amp; 8) &amp;&amp; printf args)
#else
#define dprintf(args)
#define d2printf(args)
#endif
</code></pre>
<p>i.e. <em>if</em> <code>Py_DEBUG</code> is set <strong>and</strong> <code>thread_debug &amp; 1</code>, then the log is printed using <code>printf</code>, to standard output. For this you would need a debug build of Python. Iff you have a debug build, the value of <code>thread_debug</code> can be controlled with the environment variable <a href="https://github.com/python/cpython/blob/3.6/Python/thread.c#L59" rel="nofollow noreferrer"><code>PYTHONTHREADDEBUG</code></a>:</p>
<pre><code>void
PyThread_init_thread(void)
{
#ifdef Py_DEBUG
    char *p = Py_GETENV("PYTHONTHREADDEBUG");

    if (p) {
        if (*p)
            thread_debug = atoi(p);
        else
            thread_debug = 1;
    }
#endif /* Py_DEBUG */
    if (initialized)
        return;
    initialized = 1;
    dprintf(("PyThread_init_thread called\n"));
    PyThread__init_thread();
}
</code></pre>
<p>i.e. the variable must be present for the variable set to a value of <code>1</code>, and if set to for example 9, this would enable both <code>dprintf</code> and <code>d2printf</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>I think you need to recompile Python to see those. When configuring, give the <code>--with-pydebug</code> option. It should come out on standard out. You may also need to set the environment variable PYTHONTHREADDEBUG to 1, but that shouldn't be nessesary.</p>
<p><a href="https://docs.python.org/3/using/cmdline.html#debug-mode-variables" rel="nofollow noreferrer">https://docs.python.org/3/using/cmdline.html#debug-mode-variables</a></p>
</div>
