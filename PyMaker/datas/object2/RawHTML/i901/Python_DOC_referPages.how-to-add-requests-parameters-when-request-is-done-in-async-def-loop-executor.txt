<div class="post-text" itemprop="text">
<p>How do I add parameters like <code>verify</code> and <code>proxies</code> to the below <code>requests.get</code>?</p>
<p>In a non-async setting I would just do <code>requests.get(url, proxies='some_proxy', verify=False)</code>, but I don't know how to put that in the below.</p>
<pre><code>import asyncio
import concurrent.futures
import requests

ids = [2048854772, 2042055933, 2036234693, 2007740886, 2006259847, 2003100744]
token = '111111'
max_workers = len(ids)

async def main():
    with concurrent.futures.ThreadPoolExecutor(max_workers=max_workers) as executor:
        loop = asyncio.get_event_loop()
        futures = [
            loop.run_in_executor(
                executor, 
                requests.get, 
                'https://www.strava.com/api/v3/activities/{id}?include_all_efforts=true&amp;access_token={token}'.format(id=id, token=token)
            )
            for id in ids
        ]
        for response in await asyncio.gather(*futures):
            print(response.text)
            pass

loop = asyncio.get_event_loop()
loop.run_until_complete(main())
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use a <a href="https://docs.python.org/3/library/functools.html#functools.partial" rel="nofollow noreferrer">partial</a> :</p>
<pre><code>from functools import partial

def sum(a, b):
    return a + b

sum_with_two = partial(sum, 2)
sum_with_two(5)
&gt;&gt;&gt; 7

sum_two_and_four = partial(sum, 2, 4)
sum_two_and_four()
&gt;&gt;&gt; 6
</code></pre>
<p>In your case :</p>
<pre><code>my_request = partial(requests.get, proxies='...', verify=False)

loop.run_in_executor(
    executor, 
    my_request,  # Arguments of the partials will be used 
    '...url...'
)
</code></pre>
</div>
<span class="comment-copy">this is answered right in the docs: <a href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio-pass-keywords" rel="nofollow noreferrer">docs.python.org/3/library/â€¦</a></span>
