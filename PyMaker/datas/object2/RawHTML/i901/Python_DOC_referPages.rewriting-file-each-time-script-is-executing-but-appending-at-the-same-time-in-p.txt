<div class="post-text" itemprop="text">
<p>So i have a main python script which essentially calls another python script with arguments provided. My question is , each time it loops through files and writes to the file , but it appends when doing so.</p>
<p>If i was to run the script again , providing the same test-data folder , it would append to the file again. I want to be able to at each time i run the script , rewrite the whole file so it is empty and then append each file name to the file. Is this possible ?</p>
<p>My code is as follows for my main script :</p>
<pre><code>def get_config():
    parser = argparse.ArgumentParser()
    parser.add_argument("-d", "--export-date", action="store", required=True)
    args = parser.parse_args()
    return [args.export_date]
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><strong>Update</strong>:
OK, I now understand you want to create a new file every time you run your main script. In this case I would just update the generate_json function:</p>
<pre><code>def generate_json(path = get_json_location()):
    open('/path/to/your/file', 'w').close()
    for yml in yml_directory :
        print("Running export for " + yml)
        os.system('python generate_json.py -p' + path + ' -e  yaml/'  + yml + ' -d ' + date)
</code></pre>
<p>Forget what I said about the following line in your generate_json.py and leave it there with the 'a' argument:</p>
<pre><code>with open('dates/' + current_day + '.json', 'a') as file:
</code></pre>
</div>
<span class="comment-copy">The problem is you're calling <code>with open('dates/' + current_day + '.json', 'a') as file</code>, but it should be <code>with open('dates/' + current_day + '.json', 'w') as file</code> if you want it to write the file fresh each time. Having <code>a</code> as the second argument in <code>open</code> will append, and <code>w</code> will write new. See <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer">this doc on open</a></span>
<span class="comment-copy">@TheStrangeQuark  Actually that will not work. If you take a look at my main.py , it loops through each file and calls the script generate_json.py so doing that will only write one line to the file</span>
<span class="comment-copy">Ahh, I see. Why are you using <code>os.system</code> to call the other python script instead of just importing it?</span>
<span class="comment-copy">@TheStrangeQuark  I am passing in arguments with it such as  -p , -e and -d which is required to be passed to generate_json.py. Is there a better way to do this</span>
<span class="comment-copy">Yes, but I'll have to look at the exact syntax for Py2.7. Why are you using Python 2.7 instead of 3.x?</span>
<span class="comment-copy">When doing so , it will only write one line to the file when changed it from 'a' to 'w'</span>
