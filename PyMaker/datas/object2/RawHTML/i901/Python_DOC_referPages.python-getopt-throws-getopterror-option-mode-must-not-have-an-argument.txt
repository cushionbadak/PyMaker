<div class="post-text" itemprop="text">
<p>GetOpt seems doesn't work when I specify a command line option, throws exception, this file named o.py:</p>
<pre><code>import getopt
import sys
opts,args = getopt.getopt(sys.argv[1:], "m:p:", ['mode', 'perf'])
for opt_name,opt_value in opts:
    if opt_name in ('--mode'):
        print opt_name
        continue
    if opt_name in ('--perf'):
        print opt_name
        continue
</code></pre>
<p>Then I get runtime exception when:</p>
<pre><code>python o.py --mode=a
Traceback (most recent call last):
File "o.py", line 3, in &lt;module&gt;
    opts,args = getopt.getopt(sys.argv[1:], "m:p:", ['mode', 'perf'])
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/getopt.py", line 88, in getopt
    opts, args = do_longs(opts, args[0][2:], longopts, args[1:])
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/getopt.py", line 159, in do_longs
    raise GetoptError('option --%s must not have an argument' % opt, opt)
getopt.GetoptError: option --mode must not have an argument
opts, args = do_longs(opts, args[0][2:], longopts, args[1:])
</code></pre>
<p>File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/getopt.py", line 159, in do_longs
    raise GetoptError('option --%s must not have an argument' % opt, opt)
getopt.GetoptError: option --mode must not have an argument</p>
<p>So where did I get wrong and how to fix it?</p>
</div>
<div class="post-text" itemprop="text">
<p>Your long option names are missing a trailing <code>=</code>. See <a href="https://docs.python.org/3/library/getopt.html#module-getopt" rel="nofollow noreferrer">docs</a>, namely:</p>
<blockquote>
<p>longopts, if specified, must be a list of strings with the names of the long options which should be supported. The leading '--' characters should not be included in the option name. <strong>Long options which require an argument should be followed by an equal sign ('=')</strong>...</p>
</blockquote>
<p>I.e.</p>
<pre class="lang-py prettyprint-override"><code>opts,args = getopt.getopt(sys.argv[1:], "m:p:", ['mode=', 'perf='])
</code></pre>
</div>
