<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/8116666/itertools-groupby-not-grouping-correctly">itertools.groupby() not grouping correctly</a>
<span class="question-originals-answer-count">
                    3 answers
                </span>
</li>
<li>
<a dir="ltr" href="/questions/39253395/python-how-to-group-a-list-of-objects-by-their-characteristics-or-attributes">Python: How to group a list of objects by their characteristics or attributes? [duplicate]</a>
<span class="question-originals-answer-count">
                    7 answers
                </span>
</li>
</ul>
</div>
<p>I am grouping string elements within a list by the first word and by the last word in the string. I am using <code>groupby</code> from <code>itertools</code> to do the grouping. The process seems to work fine for the last word, however it doesn't seem to do the same for the first one.</p>
<pre><code>from itertools import groupby

model_eval_cols = ['MAD model meFuelFlowStar', 'MedAD model meFuelFlowStar', 'MAD model rpmStar', 'MedAD model rpmStar']

for k, v in groupby(model_eval_cols, key=lambda x: x.split(' ')[2]):
    print(k, list(v))
</code></pre>
<p>The above outputs</p>
<pre><code>meFuelFlowStar ['MAD model meFuelFlowStar', 'MedAD model meFuelFlowStar']
rpmStar ['MAD model rpmStar', 'MedAD model rpmStar']
</code></pre>
<p>However if I try to get the strings grouped by the first word:</p>
<pre><code>for k, v in groupby(model_eval_cols, key=lambda x: x.split(' ')[0]):
    print(k, list(v))
</code></pre>
<p>It doesn't seem to work</p>
<pre><code>MAD ['MAD model meFuelFlowStar']
MedAD ['MedAD model meFuelFlowStar']
MAD ['MAD model rpmStar']
MedAD ['MedAD model rpmStar']
</code></pre>
<p>This surprises me as the keys are the same</p>
</div>
<div class="post-text" itemprop="text">
<p><code>groupby</code> assumes that the elements in the same group appear consecutively (i.e. basically the list is sorted). Right at the beginning of <a href="https://docs.python.org/3.7/library/itertools.html#itertools.groupby" rel="nofollow noreferrer"><code>groupby</code>'s documentation</a> it says:</p>
<blockquote>
<p>Make an iterator that returns <strong>consecutive keys and groups from the
  iterable.</strong> The key is a function computing a key value for each
  element. If not specified or is None, key defaults to an identity
  function and returns the element unchanged. <strong>Generally, the iterable
  needs to already be sorted on the same key function.</strong></p>
</blockquote>
<p>Your list is not sorted. So sort it before <code>groupby</code>. Define a key function to be used by <code>sorted</code> and <code>groupby</code>:</p>
<pre><code>def first_word(sentence):
    return sentence.split()[0]
</code></pre>
<p>And then:</p>
<pre><code>groupby(sorted(meFuelFlowStar, key=first_word), key=first_word)
</code></pre>
</div>
<span class="comment-copy">The documentation of <a href="https://docs.python.org/3/library/itertools.html#itertools.groupby" rel="nofollow noreferrer"><code>groupby</code></a> says: "Generally, the iterable needs to already be sorted on the same key function."</span>
