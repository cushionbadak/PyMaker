<div class="post-text" itemprop="text">
<p>I used the following python code to save an html file to local storage:</p>
<pre><code>url = "some_url.html
urllib.request.urlretrieve(url, 'save/to/path')
</code></pre>
<p>This successfully saves the file with a .html extension. When I attempt to open the file with:</p>
<pre><code>html_doc = open('save/to/path/some_url.html', 'r')
</code></pre>
<p>I get the following error:</p>
<pre><code>UnicodeDecodeError: 'ascii' codec can't decode byte 0xe5 in position 36255: ordinal not in range(128)
</code></pre>
<p>I think this means I am attempting to read a utf-8 file with a ascii codec. I attempted the solution found at:</p>
<p><a href="https://stackoverflow.com/questions/2365411/convert-unicode-to-ascii-without-errors-in-python">Convert Unicode to ASCII without errors in Python</a></p>
<p>But this, as well as other solutions I have found, only seem to work for encoding the file for immediate viewing and not saved files. I cannot find one that works for altering the encoding of a locally stored file. </p>
</div>
<div class="post-text" itemprop="text">
<p>The <code>open()</code> function has an optional <code>encoding</code> parameter.
Its default is platform dependent, but in your case it apparently defaults to UTF-8.</p>
<p>I you know the correct codec (eg. from a HTTTP header), you can specify it:</p>
<pre><code>html_doc = open('path/to/file.html', 'r', encoding='cp1252')
</code></pre>
<p>If you don't know it, chances are that it is written in the file.
You can open the file in binary mode:</p>
<pre><code>html_doc = open('path/to/file.html', 'rb')
</code></pre>
<p>and then try to find an encoding declaration and decode the whole thing in memory.</p>
<p>However, don't do that.
There's not much use in opening and processing HTML like a text file.
You should use an HTML parser to walk through the document tree and extract whatever you need.
Python's standard library <a href="https://docs.python.org/3/library/html.parser.html" rel="nofollow noreferrer">has one</a>, but you might find <a href="https://docs.python.org/3/library/html.parser.html" rel="nofollow noreferrer">Beautiful Soup</a> easier to use.</p>
</div>
