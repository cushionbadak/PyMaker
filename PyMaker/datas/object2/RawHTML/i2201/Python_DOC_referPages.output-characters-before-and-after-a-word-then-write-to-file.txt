<div class="post-text" itemprop="text">
<p>Im trying to get this code to find say 30 words before a specific word and 30 words after. then i want it to writ'e my output to a new file. i cant seem to figure out what i'm doing wrong as im pretty new to python. any suggestions are more than welcome.</p>
<pre><code>def extract_text(file_name, to_find):
    file_in = open('School.txt', 'r')

    all_lines = file_in.readlines()
    file_in.close()

    new_text = all_text.replace ('\n',  '|')

    width = 30



to_find = 'boy'
new_text = all_text.replace ('\n',  '|')
while new_text.find(to_find) != -1:
    start = all_text.find(to_find)
    begin = start - width
    end = start + len(to_find) + width



    print(new_text[begin:end])
    out_put = new_text[begin:end]

    f = open("School_boy.txt","w")
    f.write(out_put)

    f.close()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>For text parsing, I would recommend using regex:</p>
<pre><code>import re

# Read the File
with open("file.txt", "r") as file:
    text = file.read()

# replace newline with blank
text.replace('\n', '')

# parse the text
result = re.findall(r'(?P&lt;before&gt;\w+ ){30}target(P?&lt;after&gt;\w+ ){30}', text)
</code></pre>
<p>From there, all 30 words before are in a group called 'before' and all 30 words after are in a group called 'after' the target word -- in this example 'target'. RegEx can be really specific or really generic, depending on the pattern used. For example, the code above only allows for one space after a word and no punctuation. For a guide on python regex: <a href="https://docs.python.org/3/howto/regex.html" rel="nofollow noreferrer">https://docs.python.org/3/howto/regex.html</a></p>
</div>
<span class="comment-copy"><code>new_text = all_text.replace ('\n',  '|')</code>  where does all_text come from?</span>
<span class="comment-copy">is a <code>oboyfriend</code> counting as <code>boy</code>found?</span>
<span class="comment-copy">i suppose i was trying to find a way to make it replace all new lines but i never defined it and couldnt think how</span>
<span class="comment-copy">sorry i dont understand your second question but i am trying to print 30 words before boy and 30 words after so i need to look through the entire document for every mention f boy and print the words before and after then compile my output if that helps. otherwise please do ask the question again</span>
<span class="comment-copy">text: <code>There he was, a big boy.</code> - if splitting it at spaces you get <code>['There','he','was,','a','big','boy.']</code> - neither of these are <i>equal</i> to boy - take special care with punctuation. Nor is <code>boyfriend</code> (as word) equal to <code>boy</code> which you are looking for.</span>
<span class="comment-copy">i edited the code to include this and it just prints a empty string</span>
<span class="comment-copy">Like I said, regex can be a little particular. You might have to play around with different patterns to get it right. There is a nice testing tool online that I use to make sure my patterns fit my target data: <a href="https://regex101.com/" rel="nofollow noreferrer">regex101.com</a></span>
