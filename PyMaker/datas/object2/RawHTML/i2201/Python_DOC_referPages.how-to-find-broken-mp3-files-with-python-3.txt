<div class="post-text" itemprop="text">
<p>I have my personal mp3 collection which partially damaged after my HDD broken.
I need find names of damaged mp3s inside quite a lot (aprox. &gt;5k files) in folders and sub-folders.</p>
<p>Can you please give me a tip about python 3 libraries which can open mp3 file, read it and find bit rate issues in it.</p>
</div>
<div class="post-text" itemprop="text">
<p>For the various steps, I can give you the following hints.</p>
<h3>File names</h3>
<p>For obtaining mp3 file names the <a href="https://docs.python.org/3/library/glob.html" rel="nofollow noreferrer">glob</a> module is your friend: <code>glob.iglob('*.mp3', recursive=True)</code>.</p>
<h3>Dealing with mp3</h3>
<p>For dealing with mp3 files you can use practically any command line utility that serves your needs. A few examples:</p>
<ul>
<li><a href="https://askubuntu.com/a/249843/445311">avprobe</a></li>
<li><a href="https://askubuntu.com/a/303461/445311">exiftool, ffmpeg, mplayer</a></li>
<li><a href="https://superuser.com/a/595205/742396">mediainfo</a></li>
</ul>
<p>You can run these tools from within python via the <a href="https://docs.python.org/3/library/subprocess.html" rel="nofollow noreferrer">subprocess</a> module. For example:</p>
<pre><code>subprocess.check_output(['avprobe', 'path/to/file'])
</code></pre>
<p>Then you can parse the output as appropriate; how to detect if the file is broken needs to be explored though.</p>
<h3>Dive into mp3</h3>
<p>If you're feeling adventurous then you can also scan the mp3 files directly. <a href="https://en.wikipedia.org/wiki/MP3#File_structure" rel="nofollow noreferrer">Wikipedia</a> gives a hint about the file structure. So in order to get the bit rate the following should do:</p>
<pre><code>with open('path/to/file', 'rb') as fp:
    fp.read(2)  # Skip the first two bytes.
    bit_rate = fp.read(1) &amp; 0xf0
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>For my purposes ideally fits <a href="https://mutagen.readthedocs.io/en/latest/index.html" rel="nofollow noreferrer">mutagen</a> here is <a href="https://m5-web.com/blog/165" rel="nofollow noreferrer"><strong>solution</strong></a> with comments.
Everything is pretty simple.</p>
</div>
