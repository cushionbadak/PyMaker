<div class="post-text" itemprop="text">
<p>I am learning Python and I have an exercise to work through:</p>
<blockquote>
<p><em>Write a program which will read in lines from a file and select the first three fields (separated by blank space). The program should
  write a file called error which contains lines which look like Line
  362 did not have 3 fields, to identify those which did not have 3
  fields. The program should then write, into a file called output, the
  first three fields in the form of a string of width 10, followed by
  two floats of width 10 each with 3 places after the decimal point. In
  case this is not possible, the fields should be written as strings of
  width 10.</em></p>
</blockquote>
<p>I have done half of it, but I can't get the list items into the error exceptions report.  I don't get any error messages; I just get an empty file.  </p>
<p>My exceptions data is displayed in Python but the write output is missing.</p>
<p>This is my code:</p>
<pre><code>file = open("question3.txt",'r')
read = file.read()
file.close()
print(read)
#This is the list of sentences that form the list 'read'
#I need to analyse these list items.

array = read.splitlines()
print(array)
for item in array:
    if(item.count(" "))&lt;3:    
        exception = str(item)
        f = open('error.txt','w')
        f.write(exception)
        print(exception)
        f.close()
</code></pre>
<p>How can I resolve this? I don't need a full answer to the question, just a suggestion as to how I can get the 'short list fields' I have identified into the text file.</p>
<p>Thank you!</p>
</div>
<div class="post-text" itemprop="text">
<p>you can use </p>
<pre><code>for idx, item in enumerate(array):
</code></pre>
<p>to keep track of the line number, and write a more informative error message.</p>
</div>
<div class="post-text" itemprop="text">
<p>By default <code>open(file, 'w')</code> will delete any existing file with the name file and create a new file. So maybe you are iterating over these lines correctly, but with every loop you call <code>open(file, 'w')</code> erasing any lines you had. An easy fix for this would be to move it outside the for loop </p>
<pre><code>f = open('error.txt','w')
for item in array:
   ... #etc
</code></pre>
<p>or you could use <code>open(file, 'a')</code>
This will append to any existing file instead of rewriting it. See <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer">Python Doc</a> <a href="https://stackoverflow.com/questions/1466000/python-open-built-in-function-difference-between-modes-a-a-w-w-and-r" title="post">StackOverflow Post</a> for more details</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>file = open("question3.txt",'r') 
read = file.read() 
file.close() 
print(read)

array = read.splitlines()
print(array) 

# 1) Open in append mode using 'a' 
# 2) '+' tells python to create a file
# named error.txt if it does not exist.
# 3) Open file before initiating for loop

f = open('error.txt', 'a+') 

for item in array: 
    if item.count(" ") &lt; 3:
        exception = str(item) + '\n' # Separate two exceptions with a newline
        f.write(exception)
        print(exception)

# Now close the file after for loop is done
f.close()
</code></pre>
<p>This should work. Please note that opening of file error.txt is done before entering for loop. Reason: In every iteration you only need appending a line to file and not opening file, appending line and closing file. So open your file once, do your stuff and then finally close it. </p>
</div>
<span class="comment-copy">Opening the error file in <code>w</code> mode removes the existing contents and creates an empty file.  Try using <code>a</code> mode instead.</span>
<span class="comment-copy">Hello guys.  Thanks for your responses.  Very quick.  First time I have used stack overflow.  I have solved my problem.  Got past my immediate problem.  I moved the f.open and f. close lines from the for loop.    Sorry.  I am a beginner.  Second week of Python / Computer programmes</span>
<span class="comment-copy">I am hoping that just by replying to my question you all know I am OK now.  I don't see a general button to say problem solved.</span>
