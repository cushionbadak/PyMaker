<div class="post-text" itemprop="text">
<p>I'm trying to get data from a json link, but I'm getting this error: TypeError: can't concat str to bytes</p>
<p>This is my code: </p>
<pre><code>l = "https://www.off---white.com/en/IT/men/products/omch016f18d471431088s"
url = (l+".json"+"?porcoiddio")
req = urllib.request.Request(url, headers)
response = urllib.request.urlopen(req)

size_opts = json.loads(response.decode('utf-8'))['available_sizes']
</code></pre>
<p>How can I solve this error?</p>
</div>
<div class="post-text" itemprop="text">
<p>Your question answer is change your code to:</p>
<pre><code>size_opts = json.loads(response.read().decode('utf-8'))['available_sizes']
</code></pre>
<p>Change at 2018-10-02 22:55 : I view your source code and found <code>Response 503</code> , the reason why you got 503 is that request did not contain cookies:</p>
<pre><code>req = urllib.request.Request(url, headers=headers)
</code></pre>
<p>you have update your headers.</p>
<pre><code>headers.update({"Cookie":cookie_value})
req = urllib.request.Request(url, headers=headers) # !!!! you need a headers include cookies !!!!
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>you are providing the data argument by mistake â€¦</p>
<p>you'll have to use a keyword argument for headers as otherwise the second argument will be filled with positional input, which happens to be <em>data</em>, try this:</p>
<pre><code>req = urllib.request.Request(url, headers=headers)
</code></pre>
<p>See <a href="https://docs.python.org/3/library/urllib.request.html#urllib.request.Request" rel="nofollow noreferrer">https://docs.python.org/3/library/urllib.request.html#urllib.request.Request</a> for a documentation of <em>Request</em>s signature.</p>
</div>
<div class="post-text" itemprop="text">
<p>You could have a go using requests instead?</p>
<pre><code>import requests, json
l = "https://www.off---white.com/en/IT/men/products/omch016f18d471431088s"
url = (l+".json"+"?porcoiddio")
session = requests.Session()
session.mount('http://', requests.adapters.HTTPAdapter(max_retries=10))
size_opts = session.get(url, headers= {'Referer': 'off---white.com/it/IT/login', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'}).json()['available_sizes']
</code></pre>
<p>To check the response:</p>
<pre><code>size_opts = session.get(url, headers= {'Referer': 'off---white.com/it/IT/login', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'})
print(size_opts)
</code></pre>
<p>Gives</p>
<pre><code>&lt;Response [503]&gt;
</code></pre>
<p>This response means:  "503 Service Unavailable. The server is currently unable to handle the request due to a temporary overload or scheduled maintenance"</p>
<p>I would suggest the problem isn't the code but the server?</p>
</div>
<span class="comment-copy">what are your headers here? could you provide all code?</span>
<span class="comment-copy">@deif headers = {     'Referer': '<a href="https://www.off---white.com/it/IT/login" rel="nofollow noreferrer">off---white.com/it/IT/login</a>',     'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'     }</span>
<span class="comment-copy">how can you get json data,the website seem to using javascrip to detect if you are using browser</span>
<span class="comment-copy">I'm getting error using this cookies.</span>
<span class="comment-copy">I'm using <a href="https://github.com/Anorov/cloudflare-scrape" rel="nofollow noreferrer">github.com/Anorov/cloudflare-scrape</a> to bypass the CloudFlare</span>
<span class="comment-copy">because this cookie is associated with your network environment , first website response 503 and let you wait for 5 second to check if you are accessing with browser , then using javascrip to create url  by your begining cookies , this url will reset your cookies. btw how did you get json on your code(your question) @ChefTraian i think i should edit my post to let you know how it work? (i think you need selenium because it is very difficult to do without using javascrip)</span>
<span class="comment-copy"><a href="https://pastebin.com/gs3UnkUX" rel="nofollow noreferrer">pastebin.com/gs3UnkUX</a> here all my code, when cloudflare is offline on site works, when is on I get 503</span>
<span class="comment-copy">@ChefTraian i have run your code and fixed it, this is the code after fixed <a href="https://pastebin.com/rKJT2SNQ" rel="nofollow noreferrer">pastebin.com/rKJT2SNQ</a> , btw you have a right choice , cfscrape is better than selenium as solution</span>
<span class="comment-copy">Getting this error: raise JSONDecodeError("Expecting value", s, err.value) from None json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)</span>
<span class="comment-copy">Sorry did you <code>import json</code></span>
<span class="comment-copy">Nothing changed</span>
<span class="comment-copy">Its returning 503 Service Unavailable. The server is currently unable to handle the request due to a temporary overload or scheduled maintenance</span>
