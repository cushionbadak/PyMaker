<div class="post-text" itemprop="text">
<p>I am using an IPython 6.2.1 integration with Eclipse/PyDev on Ubuntu. Python version is 3.5.2.<br/>
I often see people timing a script like </p>
<pre><code>&gt;&gt;&gt;%timeit for _ in range(1000): True
10000 loops, best of 3: 37.8 µs per loop
</code></pre>
<p>When I perform the same operation, my output is</p>
<pre><code>&gt;&gt;&gt;%timeit for _ in range(1000): True
20.8 µs ± 353 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
</code></pre>
<p>Imho, "best of 3" is the better measure, so I would like to change my output. 
I read both, the <a href="https://ipython.org/ipython-doc/dev/interactive/magics.html#magic-timeit" rel="nofollow noreferrer">IPython</a> and the <a href="https://docs.python.org/3/library/timeit.html" rel="nofollow noreferrer">Python timeit</a> documentation. They both don't even mention, that the output could differ from "best of 3". Is this a question of Linux/Eclipse/PyDev implementation or is there a way to change the output of the <code>timeit</code> module?</p>
<p>P.S.: The same happens in the Eclipse console, when I use <code>timeit</code>, so IPython is probably irrelevant here. </p>
<pre><code>&gt;&gt;&gt;timeit '"-".join(str(n) for n in range(100))'
11 ns ± 0.0667 ns per loop (mean ± std. dev. of 7 runs, 100000000 loops each)
</code></pre>
<p>Unutbu pointed out that you can achieve the desired behaviour from within a program. Running the <a href="https://stackoverflow.com/a/19062244/8881141">first script calling <code>timeit.main()</code> here</a> indeed returns the best of 3. But I would prefer a version that I can run interactively in the Eclipse console.</p>
</div>
<div class="post-text" itemprop="text">
<p>The display is generated by a <code>TimeitResult</code> object (see the <code>timeit??</code> code listing).  With the -o option I get that object which I can examine:</p>
<pre><code>In [95]: %timeit -o np.einsum('bdc,ac-&gt;ab', a, b, optimize=False)
170 µs ± 27.5 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
Out[95]: &lt;TimeitResult : 170 µs ± 27.5 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)&gt;
In [96]: res = _
In [97]: print(res)
170 µs ± 27.5 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
In [98]: vars(res)
Out[98]: 
{'_precision': 3,
 'all_runs': [1.6981208299985155,
  1.6976570829865523,
  1.6978941220149864,
  1.6976559630129486,
  1.6976608499826398,
  1.697147795028286,
  1.6977746890042908],
 'best': 0.0001697147795028286,
 'compile_time': 0.0,
 'loops': 10000,
 'repeat': 7,
 'timings': [0.00016981208299985155,
  0.00016976570829865524,
  0.00016978941220149863,
  0.00016976559630129485,
  0.00016976608499826398,
  0.0001697147795028286,
  0.0001697774689004291],
 'worst': 0.00016981208299985155}
</code></pre>
<p>It looks like the information to generate the <code>best of 3</code> display is still there, but the formatter is gone.  It might be found in an older version.</p>
<pre><code>@property
def average(self):
    return math.fsum(self.timings) / len(self.timings)
</code></pre>
<p>Code is in <code>IPython/core/magics/execution.py</code></p>
</div>
<div class="post-text" itemprop="text">
<p>This syntax std/mean/dev was added to IPython in 5 Oct 2016. See the issue #9984 <a href="https://github.com/ipython/ipython/pull/9984" rel="nofollow noreferrer">https://github.com/ipython/ipython/pull/9984</a> about this improvement. And the implementation is here:</p>
<p>"Added mean + stdv to the %timeit magic - New tests pending - "</p>
<p><a href="https://github.com/ipython/ipython/commit/509d8539c555ede6222d13cf1693388429213853#diff-ee52fbe4422737ccaa3d6d0b15ea5189" rel="nofollow noreferrer">https://github.com/ipython/ipython/commit/509d8539c555ede6222d13cf1693388429213853#diff-ee52fbe4422737ccaa3d6d0b15ea5189</a></p>
<p>but syntax "best of 3" comes from python timeit module in main() function and this is generally the same in python2 and 3.</p>
</div>
<span class="comment-copy">The <code>best of 3</code> is an older style of display.  It probably changed in some <code>ipython</code> release.  There could be a change in the <code>timeit</code> module, but I"m still using Py 3.5.</span>
<span class="comment-copy">From <code>%timeit??</code> it appears that the display is generated by a <code>IPython.core.magics.execution.TimeitResult(loops, repeat, best, all_runs, compile_time, precision)</code> object.</span>
<span class="comment-copy">I don't use Eclipse, but my guess it's using <code>ipython</code>, not <code>timeit</code> directly.</span>
<span class="comment-copy">Does this mean that newer versions abandoned the "best of 3" concept? I found <a href="https://github.com/ipython/ipython/pull/9984" rel="nofollow noreferrer">this thread on github from 2016</a>. Well, I can live with the new concept, though I think it is less accurate. It would be nice, if they included an option to choose, which information is displayed. You clearly demonstrated, that the information is there.</span>
<span class="comment-copy">Someone has asked for the choice in display, <a href="https://github.com/ipython/ipython/issues/10712" rel="nofollow noreferrer">github.com/ipython/ipython/issues/10712</a></span>
