<div class="post-text" itemprop="text">
<p>When running a Python REPL, top-level statements sent to the console get auto-printed. For example, with:</p>
<pre><code>&gt;&gt;&gt; x = 1
&gt;&gt;&gt; x
1
&gt;&gt;&gt; |
</code></pre>
<p>The second line evaluating <code>x</code> caused the value to be 'auto-printed' However, we don't get the same behavior when <code>x</code> is evaluated in other contexts -- for example, if we use <code>exec</code>:</p>
<pre><code>&gt;&gt;&gt; exec('x')
&gt;&gt;&gt; |
</code></pre>
<p>Similarly, with <code>eval()</code>:</p>
<pre><code>&gt;&gt;&gt; code = compile('x = 1; x', '&lt;string&gt;', 'exec')
&gt;&gt;&gt; eval(code)
&gt;&gt;&gt; |
</code></pre>
<p>Is there a way to ask Python to auto-print statements run in this way, as it does at the top level of the REPL?</p>
<p>While this question describes Python code directly, I'd also love to know whether it's possible to accomplish this using the Python C API (e.g. with <code>PyRun_SimpleStringFlags()</code>).</p>
</div>
<div class="post-text" itemprop="text">
<p>This is discussed in some detail at <a href="https://stackoverflow.com/a/29456463/1342082">https://stackoverflow.com/a/29456463/1342082</a>. In particular:</p>
<blockquote>
<p>'single' is a limited form of 'exec' which accepts a source code containing a single statement (or multiple statements separated by ;) if the last statement is an expression statement, the resulting bytecode also prints the repr of the value of that expression to the standard output(!).</p>
</blockquote>
<p>So a pattern of this form will work:</p>
<pre><code>&gt;&gt;&gt; code = compile('x = 1; x', '&lt;string&gt;', 'single')
&gt;&gt;&gt; eval(code)
1
&gt;&gt;&gt; |
</code></pre>
<p>And also see the documentation described at <a href="https://docs.python.org/3/library/functions.html#eval" rel="nofollow noreferrer">https://docs.python.org/3/library/functions.html#eval</a>.</p>
</div>
<span class="comment-copy">Possible duplicate of <a href="https://stackoverflow.com/questions/2220699/whats-the-difference-between-eval-exec-and-compile-in-python">What's the difference between eval, exec, and compile in Python?</a></span>
<span class="comment-copy">tl;dr: the console only shows non-<code>None</code> results. <code>exec</code> always returns <code>None</code>. <code>eval</code>ing <code>exec</code> is still <code>None</code>.</span>
