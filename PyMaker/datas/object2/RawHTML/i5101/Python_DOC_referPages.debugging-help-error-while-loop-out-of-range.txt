<div class="post-text" itemprop="text">
<p>is my first post, sorry for the format</p>
<p>Problem:
I have a error in the output, the data output is correct but, the loop is out of range and I don't know how to fix it.</p>
<p><strong>Code:</strong></p>
<pre><code>exam_file=open('mean_text.txt', 'a+')
exam_file.write("Rio de Janeiro,Brazil,30.0,18.0\n")

exam_file.seek(0)
headings=exam_file.readline().split(",")

exam_file.seek(0,1)
city_temp=exam_file.readline().split(",")

while city_temp:
    print(headings[0].capitalize()+" of "+city_temp[0]+" "+ headings[2]+" is "+city_temp[2]+" Celsius")
    city_temp = exam_file.readline().split(",")

exam_file.close()
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>City of Beijing month ave: highest high is 30.9 Celsius
Traceback (most recent call last):
City of Cairo month ave: highest high is 34.7 Celsius
City of London month ave: highest high is 23.5 Celsius
  File "./Module4task.py", line 11, in &lt;module&gt;
City of Nairobi month ave: highest high is 26.3 Celsius
City of New York City month ave: highest high is 28.9 Celsius
    print(headings[0].capitalize()+" of "+city_temp[0]+" "+ headings[2]+" is "+city_temp[2]+" Celsius")
City of Sydney month ave: highest high is 26.5 Celsius
IndexError: list index out of range
City of Tokyo month ave: highest high is 30.8 Celsius
City of Rio de Janeiro month ave: highest high is 30.0 Celsius
</code></pre>
<p><strong>Content of .txt file:</strong></p>
<pre><code>city,country,month ave: highest high,month ave: lowest low
Beijing,China,30.9,-8.4
Cairo,Egypt,34.7,1.2
London,UK,23.5,2.1
Nairobi,Kenya,26.3,10.5
New York City,USA,28.9,-2.8
Sydney,Australia,26.5,8.7
Tokyo,Japan,30.8,0.9
</code></pre>
<p><strong>Expect:</strong> </p>
<pre><code>City of Beijing month ave: highest high is 30.9 Celsius
City of Cairo month ave: highest high is 34.7 Celsius
City of London month ave: highest high is 23.5 Celsius
City of Nairobi month ave: highest high is 26.3 Celsius
City of New York City month ave: highest high is 28.9 Celsius
City of Sydney month ave: highest high is 26.5 Celsius
City of Tokyo month ave: highest high is 30.8 Celsius
City of Rio De Janeiro month ave: highest high is 30.0 Celsius
</code></pre>
<p><strong>My Task:</strong></p>
<p>Add the weather for Rio</p>
<ol>
<li><p>Open the file in append plus mode ('a+')</p></li>
<li><p>Write a new line for Rio de Janeiro "Rio de Janeiro,Brazil,30.0,18.0\n"
Grab the column headings</p></li>
<li>use .seek() to move the pointer to the beginning of the file</li>
<li>read the first line of text into a variable called: headings</li>
<li>convert headings to a list using .split(',') which splits on each comma</li>
</ol>
<p>Read the remaining lines from the file using a while loop</p>
<ol>
<li>assign remaining lines to a city_temp variable</li>
<li>convert the city_temp to a list using .split(',') for each .readline() in the loop</li>
<li>print each city &amp; the highest monthly average temperature</li>
<li>close mean_temps</li>
</ol>
<p>Tips &amp; Hints:</p>
<p>•   print headings to determine indexes to use for the final output (what is in headings[0], [1], [2]..?)</p>
<p>•   the city_temp data follows the order of the headings (city_temp[0] is described by headings[0])</p>
<p>•   The output should look like: "month ave: highest high" for Beijing is 30.9 Celsius</p>
<p>•   convert city_temp to lists with .split(',')</p>
</div>
<div class="post-text" itemprop="text">
<p>Try changing the while loop so you have an endpoint </p>
<p>Like try adding a break statement after you reached the end of your file (using len to find how long it is)</p>
<p>Or you can add a condition to your while statement to check if the file is at the end </p>
</div>
<span class="comment-copy">You might start by changing your while loop to a for loop which is the idiomatic way to iterate over lines in a file: <code>for city_temp in exam_file: city_temp = city_temp.split(','); .....</code> <a href="https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files" rel="nofollow noreferrer">docs.python.org/3/tutorial/…</a></span>
<span class="comment-copy">Something is really strange because of the way the error message is intermixed with the output. How are you running the script?</span>
<span class="comment-copy">one of the requirements is that I must use while loop. I running script in PyCharm</span>
<span class="comment-copy">Your output is not compatible with your script: the text is different from what you're printing. Please update your post with the exact code you're running. As for your problem, my guess would be that you have a blank line at the end of your file. In that case, <code>exam_file.readline()</code> will give <code>\n</code>, which, when split, gives <code>['\n']</code>, which is still True as far as the while loop is concerned.</span>
<span class="comment-copy">If that's the case, you can fix (more or less) it by using <code>while len(city_temp) == len(headings):</code>.</span>
<span class="comment-copy">what I am trying but not getting at the moment, I don't understand why it gives me the error, whith correct result</span>
<span class="comment-copy">It reaches the end of the file but still keeps going thats why</span>
