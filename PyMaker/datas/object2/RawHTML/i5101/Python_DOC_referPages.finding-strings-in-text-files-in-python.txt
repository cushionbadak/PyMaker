<div class="post-text" itemprop="text">
<p>I need a program to find a string (S) in a file (P), and return the number of thimes it appears in the file, to do this i decided tocreate a function:</p>
<pre><code>def file_reading(P, S):
  file1= open(P, 'r')
  pattern = S
  match1 = "re.findall(pattern, P)"
    if match1 != None:
      print (pattern)
</code></pre>
<p>I know it doesn't look very good, but for some reason it's not outputing anything, let alone the right answer.  </p>
</div>
<div class="post-text" itemprop="text">
<p>There are multiple problems with your code. </p>
<p>First of all, calling <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer"><code>open()</code></a> returns a file object. It does not read the contents of the file. For that you need to use <code>read()</code> or iterate through the file object.</p>
<p>Secondly, if your goal is to count the number of matches of a string, you don't need regular expressions. You can use the string function <code>count()</code>. Even still, it doesn't make sense to put the regular expression call in quotes. </p>
<pre><code>match1 = "re.findall(pattern, file1.read())"
</code></pre>
<p>Assigns the string <code>"re.findall(pattern, file1.read())"</code> to the variable <code>match1</code>.</p>
<p>Here is a version that should work for you:</p>
<pre><code>def file_reading(file_name, search_string):
    # this will put the contents of the file into a string
    file1 = open(file_name, 'r')
    file_contents = file1.read()
    file1.close()  # close the file

    # return the number of times the string was found
    return file_contents.count(search_string)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can read line by line instead of reading the entire file and find the nunber of time the pattern is repeated and add it to the total count <code>c</code></p>
<pre><code>def file_reading(file_name, pattern):
  c = 0
  with open(file_name, 'r') as f:
    for line in f:
      c + = line.count(pattern)
  if c: print c 
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>There are a few errors; let's go through them one by one:</p>
<ol>
<li>Anything in quotes is a string.  Putting <code>"re.findall(pattern, file1.read())"</code> in quotes just makes a string.  If you actually want to call the re.findall function, no quotes are needed :)</li>
<li>You check whether <code>match1</code> is None or not, which is really great, but then you should return that matches, not the initial pattern.</li>
<li>The if-statement should not be indented.</li>
</ol>
<p>Also:</p>
<ul>
<li>Always a close a file once you have opened it!  Since most people forget to do this, it is better to use the <code>with open(filename, action)</code> <a href="https://stackoverflow.com/a/31334226/9222529">syntax</a>.</li>
</ul>
<p>So, taken together, it would look like this (I've changed some variable names for clarity):</p>
<pre><code>def file_reading(input_file, pattern):
    with open(input_file, 'r') as text_file:
        data = text_file.read()
        matches = re.findall(pattern, data)

        if matches:
            print(matches)  # prints a list of all strings found
</code></pre>
</div>
<span class="comment-copy">Why are you encapsulating your <code>re.findall()</code> call in quotation marks? And not using your input file?</span>
<span class="comment-copy">Fix your indentation. Badly indented Python code is nonsense.</span>
<span class="comment-copy">You never actually read the file.</span>
<span class="comment-copy">No. Your function isn't going to get called if it's a string. You are misremembering what you were taught.</span>
<span class="comment-copy">@j.evans please do not approve edits that drastically change how the code in your question performs. If you desire to make such changes please add them as an <a href="https://stackoverflow.com/posts/48749335/edit">edit</a> to the question so the necessary context for existing answers/comments is not lost.</span>
<span class="comment-copy">for GodOrWhoeverIsInChargeOrNot's sake, <b>close that file</b> !</span>
<span class="comment-copy">lol i'll be sure to close the file</span>
<span class="comment-copy">@brunodesthuilliers I made an update based on your suggestion- I agree it's better to be explicit, but my understanding was that the file object would close when it goes out of scope: <a href="https://stackoverflow.com/questions/2404430/does-filehandle-get-closed-automatically-in-python-after-it-goes-out-of-scope" title="does filehandle get closed automatically in python after it goes out of scope">stackoverflow.com/questions/2404430/â€¦</a> <b>EDIT</b>: I take that back, I just read the second answer which explains the case when exceptions are raised.</span>
<span class="comment-copy">The pythonic way to test against <code>None</code> is using identity testing, ie <code>if matches is not None:</code> (<code>None</code> is garanteed to be a singleton). But since <code>re.findall()</code> returns an empty list if nothing matches, the correct test here is a plain <code>if matches:</code></span>
<span class="comment-copy">@brunodesthuilliers thanks for pointing that out!  This is my first time editing an answer based on feedback.  Should I edit the code or add a note at the end?</span>
<span class="comment-copy">@Mario just edit the code.</span>
<span class="comment-copy">Made @brunodesthuilliers 's edits.</span>
