<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/14824522/dynamically-serving-a-matplotlib-image-to-the-web-using-python">Dynamically serving a matplotlib image to the web using python</a>
<span class="question-originals-answer-count">
                    6 answers
                </span>
</li>
</ul>
</div>
<p>I want to embed a figure generated by python matplotlib into a html file with other content. Is that possible?</p>
<p>What I have thought is saving figures as png file and then use <code>&lt;img&gt;</code> tag to refer to it.</p>
<p>Some code I was trying to use are like:</p>
<pre><code>import matplotlib.pyplot as plt
fig = plt.figure()
#plot sth
plt.savefig('test.png')

html = 'Some html head' + '&lt;img src=\'test.png\'&gt;' + 'Some more html'

with open('test.html','w') as f:
    f.write(html)
</code></pre>
<p>However, this will generate two files instead of one and I don't have a server to host the png file. Is that possible to embed the figure in the html? How do I do it in python.</p>
<p>Thank you.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can write the image into a temporary file and encode it with base64 and then embed the encoded base64 image into your html. Most modern browsers will correctly render the image.</p>
<p>A short example modified from your code will be:</p>
<pre><code>import matplotlib.pyplot as plt
import base64
from io import BytesIO

fig = plt.figure()
#plot sth

tmpfile = BytesIO()
fig.savefig(tmpfile, format='png')
encoded = base64.b64encode(tmpfile.getvalue())

html = 'Some html head' + '&lt;img src=\'data:image/png;base64,{}\'&gt;'.format(encoded) + 'Some more html'

with open('test.html','w') as f:
    f.write(html)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can convert the image using base64 encoding:
<a href="https://docs.python.org/3/library/base64.html#base64.encodebytes" rel="nofollow noreferrer">https://docs.python.org/3/library/base64.html#base64.encodebytes</a></p>
<p>and then embed the encoded string in the html like so:
<a href="https://stackoverflow.com/questions/8499633/how-to-display-base64-images-in-html">How to display Base64 images in HTML?</a></p>
</div>
<span class="comment-copy">What about use a base64 image? <a href="https://stackoverflow.com/questions/8499633/how-to-display-base64-images-in-html" title="how to display base64 images in html">stackoverflow.com/questions/8499633/â€¦</a></span>
