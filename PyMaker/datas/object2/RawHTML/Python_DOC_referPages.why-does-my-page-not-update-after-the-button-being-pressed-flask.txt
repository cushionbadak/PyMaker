<div class="post-text" itemprop="text">
<p>When I press either of these <code>&lt;input&gt;</code>'s, the <code>Led</code> does not get updated on the page.</p>
<p>.py:</p>
<pre><code>from flask import Flask, request, render_template

app = Flask(__name__)
default_val = True


@app.route('/switch_led', methods=['GET', 'POST'])
def led_handler():
    on = request.form.get('ON', default_val)
    off = request.form.get('OFF', default_val)
    if on:
        Led = 'ON'
    elif off:
        Led = 'Not ON'
    return render_template('index.html', Led=Led)

</code></pre>
<p>index.html:</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Test&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;{{ Led }}&lt;/h1&gt;
    &lt;form action="/switch_led" method="POST"&gt;
        &lt;p&gt;&lt;input type="submit" name="btnled" value="ON"&gt;&lt;/p&gt;
        &lt;p&gt;&lt;input type="submit" name="btnled" value="OFF"&gt;&lt;/p&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Any help is appreciated, thank you!!</p>
</div>
<div class="post-text" itemprop="text">
<p>Look closely:</p>
<pre><code>default_val = True # this is important!
...

on = request.form.get('ON', default_val)
off = request.form.get('OFF', default_val)
if on:
    Led = 'ON'
</code></pre>
<p>So, when you click the OFF button, <code>form.get('ON', default_val)</code> will fail to find the ON toggle and return the default instead... which equals <code>True</code>!</p>
<p>The first condition you check is <code>if on:</code>, but, according to the logic above <code>on</code> is <em>always</em> <code>True</code>, so your LED will always stay ON. The <code>elif</code> condition doesn’t matter because the first one is always satisfied.</p>
</div>
<span class="comment-copy">When I remove <code>default_val</code>, I get an UnboundLocalError saying: local variable 'Led' referenced before assignment. So the whole HTML page won't load.</span>
<span class="comment-copy">@5824, there’s also a flaw in your HTML, which can be fixed <a href="https://stackoverflow.com/questions/22579616/send-value-of-submit-button-when-form-gets-posted">like this</a>.</span>
<span class="comment-copy">could you explain, I do have the <code>name</code>s the same for both buttons</span>
<span class="comment-copy">@5824, you do, but you’re trying to get the values of the <i>names</i> ON and OFF, which don’t exist. You should pass the individual (unique!) names of your buttons to <code>request.form.get</code>.</span>
