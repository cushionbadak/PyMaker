<div class="post-text" itemprop="text">
<p>This is my first post here.
So I'm trying to write this recursive function [on Python 3.6.3] that takes three args, here is the exercise text:</p>
<p>"A dictionary <em>d</em> represents a tree (and we name it as <em>dictionary-tree</em>).
Each key of <em>d</em> is a tree's node_ID, and its attribute is the list (eventually empty) of node's "child(ren)'s" ID(s). Nodes' IDs inside lists are sorted in ascending alphabetical order.</p>
<p>Write generate_subtree(fname,x,fout) function that, taken:</p>
<ul>
<li>a JSON filename containing a dictionary-tree "d" (fname)</li>
<li>an "x" ID</li>
<li>a (new) JSON filename (fout)</li>
</ul>
<p>produces the dictionary-tree that represents the "subtree" of the "x" ID. If "x" ID is not in the original dictionary, then the output file will contain an empty dictionary.</p>
<p>e.g.</p>
<pre><code>d = {
'a':['b'],
'b':['c','d'],
'c':['i'],
'd':['e','l'],
'e':['f','g','h'],
'f':[],
'g':[],
'h':[],
'i':[],
'l':[]
}
</code></pre>
<p>executing <strong><em>generate_subtree(fname,'d',fout)</em></strong>, the output will contain the following dictionary:</p>
<pre><code>{'f': [], 'g': [], 'h': [], 'e': ['f', 'g', 'h'], 'l': [], 'd': ['e', 'l']}
</code></pre>
<p>This is my attempt:</p>
<pre><code>def generate_subtree(fname,x,fout):
    file = open(fname)
    tree = json.load(file)
    with open(fout, 'w') as out:
        ret={}
        if x not in tree:
            out.dump({})
        if alb[x] == []:
            ret[x]=[]
        ret[x]=tree[x]
        for i in alb[x]:
            generate_subtree(fname, i, fout)
        out.dump(ret)
    file.close()
</code></pre>
<p>'fout' is my problem: the JSON file does not actually exists, and the function has to create it in order to write the output dictionary in it, but I don't succeed (after many efforts) to make the function create a new file to write the output in it.</p>
<p>Any of you could please help me?</p>
<p>edit: since is an exercise, i <em>have</em> to do it using recursion</p>
<p>edit2: wrote the exercise text and edited the function as I coded it</p>
<p><strong>edit3: the code actually works, but the recursion stops after the analysis of the key given in the arg; did I placed the "for" cycle in the wrong place? [sure I did]</strong></p>
</div>
<div class="post-text" itemprop="text">
<p>I think you are writing</p>
<pre><code>{
'a':['b'],
'b':['c','d'],
'c':['i'],
'd':['e','l'],
'e':['f','g','h'],
'f':[],
'g':[],
'h':[],
'i':[],
'l':[]
}
</code></pre>
<p>from one <code>json</code> file to another <code>json</code> file. If you could do without a recursive function, try this:</p>
<pre><code>import json

def generate_subtree(f_in, f_out):
    with open(f_in) as in_file, open(f_out, 'w') as out_file:        
        json.dump(json.load(in_file), out_file)


generate_subtree('from.json', 'to.json')
</code></pre>
<p>Printing data written to <code>to.json</code> file:</p>
<pre><code>from pprint import pprint

with open('to.json') as f:
    pprint(json.load(f))

{'a': ['b'],
 'b': ['c', 'd'],
 'c': ['i'],
 'd': ['e', 'l'],
 'e': ['f', 'g', 'h'],
 'f': [],
 'g': [],
 'h': [],
 'i': [],
 'l': []}
</code></pre>
</div>
<span class="comment-copy"><a href="https://docs.python.org/3/library/json.html#basic-usage" rel="nofollow noreferrer"><code>json.dump()</code></a> is the writing counterpart to <code>json.load()</code>.</span>
<span class="comment-copy">it is probably bad form to open a file in a recursive function... maybe read the file and deserialize to a dict first?</span>
<span class="comment-copy">yep of course, but the function, when executed, does not create any output file, and that's the point of my question</span>
<span class="comment-copy">Then please provide more specific information on your issue. Are you getting an error? If so, please provide the traceback. If not, please describe exactly what the output of your program is and what you expected it to be.</span>
<span class="comment-copy">You are never writing to <code>outa</code></span>
<span class="comment-copy">Nope, I <i>have</i> to do it with a recursive function since is an exercise, and my problem is that output file does not exist before the execution, and it should be created and then written by the function</span>
