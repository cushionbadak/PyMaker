<div class="post-text" itemprop="text">
<p>I have a list of lists in Python with each list containing 5 elements. For example </p>
<pre><code>lists = [['x1', 'y1', 'z1', '10', ''],
         ['x1', 'y1', 'z1', '', '5'], 
         ['x2', 'y2', 'z2', '10', ''],
         ['x2', 'y2', 'z2', '10', ''],
         ['x1', 'y1', 'z1', '', '5'],
         ['x3', 'y3', 'z3', '', '40'],
         ['x2', 'y2', 'z2', '', '20']]
</code></pre>
<p>I wanted to compare the first 3 elements of each lists and if there is a match, then for the matched lists, I wanted to add the 4th column of every rows and compare it with the sum of 5th column of matched lists. I will need to output the rows if there is a match in the sum of 4th and 5th columns in the set of matched lists.</p>
<p>So in the above example, output should be</p>
<pre><code>output = [['x1', 'y1', 'z1', '10', '10'],
          ['x2', 'y2', 'z2', '20', '20']]           
</code></pre>
<p>Can someone provide a solution for this.</p>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>A one-line solution!</p>
<pre><code>output = [l[:4] + [str(sum(int(j[4]) for j in lists if j[:3] == l[:3] and j[4]))] for l in (l for l in lists if l[3])]
</code></pre>
<p>which gives <code>output</code> as:</p>
<pre><code>[['x1', 'y1', 'z1', '10', '10'], ['x2', 'y2', 'z2', '20', '20']]
</code></pre>
<hr/>
<p>Instead of trying to explain that line, I have expanded the process into a larger <code>for-loop</code> Scroll down for a proper explanation of how it is working.</p>
<pre><code>output = []
for l in (l for l in lists if l[3]):
    sm = 0
    for j in lists:
         if j[:3] == l[:3] and j[4]:
              sm += int(j[4])
    sm = str(sm)
    if sm == l[3]:
        output.append(l[:4] + [sm])
</code></pre>
<hr/>
<p><strong>how?</strong></p>
<p>Well, we are looping through the lists in the generator: <code>l for l in lists if l[3]</code>. Essentially, we just want to start looping through the lists that actually have a value in the third index so that we can sum up the other lists which have the same first three elements and compare this to <code>l[3]</code>.</p>
<p>We then declare a sum variable (<code>sm</code>) as <code>0</code> which we will add the other lists elements to.</p>
<p>Next we want to begin looping through the other lists in <code>lists</code> which may have the same first three elements.</p>
<p>We then check if the first three elements are the same (<code>j[:3] == l[:3]</code>) and also check if there is actually something to add to the sum in the fourth element (otherwise we will get an error when trying to convert an empty string to an <code>int</code>). Then, if it passes this test, we add <code>j[4]</code> to <code>sm</code> and continue onto the next list.</p>
<p>Next we convert the sum (<code>sm</code>) to a string since that is the data type it needs to be in the end and saves converting <code>l[3]</code> to an integer.</p>
<p>Finally we compare this string to the fourth element in our original list - if it is the same, then we append the original list along with the sum (using list concatenation) to the <code>output</code> list.</p>
</div>
<span class="comment-copy">Unfortunately this isn't a discussion forum or tutorial service. Please take the time to read <a href="https://stackoverflow.com/questions/how-to-ask">How to Ask</a> and the other links on that page.  You should invest some time working your way through <a href="https://docs.python.org/3/tutorial/index.html" rel="nofollow noreferrer">the Tutorial</a>, practicing the examples. It will give you an introduction to the tools Python has to offer and you may even start to get ideas for solving your problem.</span>
<span class="comment-copy">StackOverflow does not work this way. We can not provide you for a solution. We can only help you solve errors in your problem.</span>
<span class="comment-copy">Thanks Joe. But one case is missed here. I have edited the lists[]. I need to sum the 4th row elements and compare it with the sum of 5th row elements. The above solution doesn't add the 4th row elements. Could you please add that to the solution. Thanks</span>
