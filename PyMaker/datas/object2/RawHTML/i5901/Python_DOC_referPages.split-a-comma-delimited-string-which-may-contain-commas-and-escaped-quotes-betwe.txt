<div class="post-text" itemprop="text">
<p>How do you split a comma delimiter string. The string is a series of comma delimited numbers and words. Words are quoted with single quotes and numbers are not. Words may contain non-delimiting commas which should be fine inside quotes. Words may contain other kinds of quotes which must be escaped by a preceding backslash like so:</p>
<pre><code>'','some-mail@some-domain.org','f4c1bfd5-969d-\'4,7\"2a-,b1\'29-42de49eb4406',2827,1378614418
</code></pre>
<p>I have tried to use a regex <code>[^\']</code> to split but that also picks up escaped commas.</p>
<p>I have tried literally counting the characters as an alternative but that is deathly slow.</p>
<p>Also python's <code>csv</code> reader splits the string on the non-delimiting commas if there are escaped slashes in the string. Perhaps it's not valid CSV?</p>
<p>The sub-string list I should have as a result is:</p>
<pre><code>[ 
'', # empty string
'some-mail@some-domain.org', # text like email
'f4c1bfd5-969d-\'4,7\"2a-,b1\'29-42de49eb4406', # text, comma and escaped quotes
2827, # number
1378614418 # number
]
</code></pre>
<p>This is how I have used the csv module:</p>
<pre><code>reader = csv.reader(StringIO(values_string), delimiter=',', quotechar="'", quoting=csv.QUOTE_ALL,skipinitialspace=True)
</code></pre>
<p>But I get:</p>
<pre><code>['', 'some-mail@some-domain.org', 'f4c1bfd5-969d-\\4', '7\\"2a-', "b1\\'29-42de49eb4406'", '2827', '1378614418']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>with open(file_name) as fp:
    reader = csv.reader(fp, quotechar="'", doublequote=False, escapechar='\\')
</code></pre>
</div>
<span class="comment-copy">Use the <a href="https://docs.python.org/3/library/csv.html" rel="nofollow noreferrer"><code>csv</code> module</a> in the standard library with the appropriate dialect and/or formatting parameters. It seems like you could use the defaults but change the quote char from <code>"</code> to <code>'</code>.</span>
<span class="comment-copy">@Blurp - The csv reader splits across the commas in quotes if they contain escaped quotes</span>
<span class="comment-copy">Not if you set the options correctly</span>
<span class="comment-copy">What is the source of this data and how are you reading it in?</span>
<span class="comment-copy">I have included a snippet of how I have parsed with the csv module. If I don't have the right options, please enlighten me.</span>
<span class="comment-copy">You are right. I had to specify escapechar='\\'</span>
