<div class="post-text" itemprop="text">
<p>I am trying to update items in DynamoDB table. The code that I have written is updating the item but when I add a column with the header "source/target", it is giving a "ValidationException" Exception.</p>
<p>Code used to update - </p>
<pre><code>dynamodb = boto3.resource('dynamodb')
table = dynamodb.Table("test")
response = table.update_item(
        Key={
        'id': "test_id            
        },
        UpdateExpression="set source/target= :st, user_name= :usr",
        ExpressionAttributeValues={
            ':st' : event['source/target'],
            ':usr' : event['user_name']
                },
        ReturnValues="UPDATED_NEW"
    )
</code></pre>
<p>The error I get is - </p>
<blockquote>
<p>An error occurred (ValidationException) when calling the UpdateItem operation: Invalid UpdateExpression: Syntax error; token: \"/\", near: \"source/target\""</p>
</blockquote>
<p>How to solve this?</p>
</div>
<div class="post-text" itemprop="text">
<p>Hi you have to use ExpressionAttributeNames when u have any special character as follows</p>
<pre><code>dynamodb = boto3.resource('dynamodb')
table = dynamodb.Table("test")
response = table.update_item(
        Key={
        'id': "test_id            
        },
        UpdateExpression="set #colName= :st, user_name= :usr",
        ExpressionAttributeValues={
            ':st' : event['source/target'],
            ':usr' : event['user_name']
                },
        ExpressionAttributeNames={
            '#colName' : 'source/target'
                },
        ReturnValues="UPDATED_NEW"
    ) 
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>As you have used a special character in the attribute name, I think you will need to specify a <code>ExpressionAttributeNames</code>.</p>
<p>I don't know the exact syntax but it should be something like:</p>
<pre><code>dynamodb = boto3.resource('dynamodb')
table = dynamodb.Table("test")
response = table.update_item(
        Key={
        'id': "test_id            
        },
        UpdateExpression="set #src = :st, user_name = :usr",
        ExpressionAttributeValues={
            ':st' : event['source/target'],
            ':usr' : event['user_name']
                },
        ExpressionAttributeNames={
            '#src' : 'source/target'
                },
        ReturnValues="UPDATED_NEW"
    )
</code></pre>
</div>
