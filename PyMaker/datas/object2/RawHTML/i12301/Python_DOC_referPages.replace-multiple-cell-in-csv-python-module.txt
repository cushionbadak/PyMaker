<div class="post-text" itemprop="text">
<p>I've a large csv file(comma delimited). I would like to replace/rename few random cell with the value "NIL" to an empty string "". </p>
<p>I tried this to find the keyword <code>"NIL"</code> and replace with <code>''</code> empty
string. But it's giving me an empty csv file</p>
<pre class="lang-py prettyprint-override"><code>ifile = open('outfile', 'rb') 
reader = csv.reader(ifile,delimiter='\t') 
ofile = open('pp', 'wb') 
writer = csv.writer(ofile, delimiter='\t') 
findlist = ['NIL'] 
replacelist = [' '] 
s = ifile.read() 
for item, replacement in zip(findlist, replacelist): 
    s = s.replace(item, replacement) 
ofile.write(s)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>From seeing you code i fell you directly should </p>
<p>read the file </p>
<pre><code>with open("test.csv") as opened_file:
    data = opened_file.read()
</code></pre>
<p>then use regex to change all NIL to "" or " " and save back the data to the file.</p>
<pre><code>import re

data = re.sub("NIL"," ",data) # this code will replace NIL with " " in the data string
</code></pre>
<p>NOTE: you can give any regex instead of <code>NIL</code></p>
<p>for more info see <a href="https://docs.python.org/3/library/re.html" rel="nofollow">re</a> module.</p>
<p>EDIT 1: <code>re.sub</code> returns a new string so you need to return it to <code>data</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>A few tweaks and your example works. I edited your question to get rid of some indenting errors - assuming those were a cut/paste problem. The next problem is that you don't <code>import csv</code> ... but even though you create a reader and writer, you don't actually use them, so it could just be removed. So, opening in text instead of binary mode, we have</p>
<pre><code>ifile = open('outfile')  # 'outfile' is the input file... 
ofile = open('pp', 'w') 
findlist = ['NIL'] 
replacelist = [' '] 
s = ifile.read() 
for item, replacement in zip(findlist, replacelist): 
    s = s.replace(item, replacement) 
ofile.write(s)
</code></pre>
<p>We could add 'with' clauses and use a <code>dict</code> to make replacements more clear</p>
<pre><code>replace_this = { 'NIL': ' '}
with open('outfile') as ifile, open('pp', 'w') as ofile: 
    s = ifile.read() 
for item, replacement in replace_this.items: 
    s = s.replace(item, replacement) 
ofile.write(s)
</code></pre>
<p>The only real problem now is that it also changes things like "NILIST" to "IST". If this is a csv with all numbers except for "NIL", that's not a problem. But you could also use the csv module to only change cells that are exactly "NIL".</p>
<pre><code>with open('outfile') as ifile, open('pp', 'w') as ofile:
    reader = csv.reader(ifile)
    writer = csv.writer(ofile)
    for row in reader:
        # row is a list of columns. The following builds a new list
        # while checking and changing any column that is 'NIL'. 
        writer.writerow([c if c.strip() != 'NIL' else ' ' 
            for c in row])
</code></pre>
</div>
<span class="comment-copy">So what's stopping you?</span>
<span class="comment-copy">I just started learning python. So I'm unaware of python libraries. I'm trying to go through the whole csv file using this but it's not working.  ` ifile = open('outfile', 'rb') reader = csv.reader(ifile,delimiter='\t') ofile = open('pp', 'wb') writer = csv.writer(ofile, delimiter='\t')   findlist = ['NIL'] replacelist = [' ']         s = ifile.read() for item, replacement in zip(findlist, replacelist):     s = s.replace(item, replacement) ofile.write(s)  `</span>
<span class="comment-copy">just see my code below. I did this to find my exact keyword. In my previous actions I also tried to use 2D array to go through all the cells like we used to do in C. I can read the file but couldn't replace the file with matching keyword unfortunately. @EdChum</span>
<span class="comment-copy">The code you show fails because it doesn't <code>import csv</code>. If that is added in, it will write the file. When you say, the file isn't written... is it because the program crashes and you get a stack trace?</span>
<span class="comment-copy">Can you be please more specific? I'm really a newbie. I'm trying to solving it by my own. I don't have any mentor to help. If you can provide me the exact solution. @tdelaney</span>
<span class="comment-copy">Still not working. I tried this but the output file is same as before.@GIRISH RAMNANI</span>
<span class="comment-copy"><code>re.sub</code> doesnt do inplace change of data , it returns a new instance so you have to do something like  <code>new_data = re.sub("NIL","",data)</code></span>
<span class="comment-copy">Thanks. It works :) @GIRISH RAMNANI</span>
<span class="comment-copy">well then accept the ans : )</span>
