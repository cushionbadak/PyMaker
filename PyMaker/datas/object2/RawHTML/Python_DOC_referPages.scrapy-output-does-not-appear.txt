<div class="post-text" itemprop="text">
<p>Good morning everyone,</p>
<p>I have an issue when using Scrapy. I would like to get the data contained in the column "commune" of the table from this url: <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_Belgique_par_population" rel="nofollow noreferrer">https://fr.wikipedia.org/wiki/Liste_des_communes_de_Belgique_par_population</a></p>
<p>Here is my Spider:</p>
<pre><code>import scrapy
import json

class communes_spider(scrapy.Spider):
    name = "communes"

    def start_requests(self):
        urls = [
            'https://fr.wikipedia.org/wiki/Liste_des_communes_de_Belgique_par_population'
        ]
        for url in urls:
            yield scrapy.Request(url=url, callback=self.parse)

    def parse(self, response):
        yield response.css('table.wikitable td a::text').getall()
</code></pre>
<p>I'm using the terminal to crawl the page:</p>
<pre><code>scrapy crawl communes
</code></pre>
<p>However it does not output the data of the column "commune". Therefore I cannot store them on a json file. Does someone have an insight on what is going on here ? </p>
<p>Thanks in advance !</p>
</div>
<div class="post-text" itemprop="text">
<p>Spider must return Request, BaseItem, dict or None but you are returning a list </p>
<p>Please change your code into this </p>
<pre><code>import scrapy
import json

class communes_spider(scrapy.Spider):
    name = "communes"

    def start_requests(self):
        urls = [
            'https://fr.wikipedia.org/wiki/Liste_des_communes_de_Belgique_par_population'
        ]
        for url in urls:
            yield scrapy.Request(url=url, callback=self.parse)

    def parse(self, response):
        yield {'communes':response.css('table.wikitable td a::text').getall()}
</code></pre>
</div>
