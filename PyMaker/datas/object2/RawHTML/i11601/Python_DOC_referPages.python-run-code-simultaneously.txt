<div class="post-text" itemprop="text">
<p>I have an endpoint which get's some data then runs some code that takes about 30 seconds then gives back a response specific to the data. I need to be able to hit the endpoints multiple times with different data within 30 seconds but the code still needs to run and give back the correct data specific result. </p>
<p>Here's what I mean: </p>
<pre><code>class Foo(Controller):
    def POST(self, **kwargs):
        [Run Code That Takes 30 Seconds]
        Return [Result That Changes Bassed off POST request Sent]
</code></pre>
<p>When I run this right now and I hit the endpoint more than once in 30 seconds the code just restarts with the new data and completely ignore the old data and it's results.</p>
<p>How can I allow the endpoint to be hit more than once in the seconds but still give back the corresponding result? Happy to answer any questions! </p>
</div>
<div class="post-text" itemprop="text">
<p>You should first profile your script in order to see if your task is cpu or io bound.</p>
<p><strong>If your task is io bound</strong>:</p>
<p>Have a look at the asyncio library <a href="https://docs.python.org/3/library/asyncio.html" rel="nofollow">python 3</a>.</p>
<p>Or at the thread library <a href="https://docs.python.org/2/library/thread.html" rel="nofollow">python 2</a> + <a href="https://docs.python.org/3/library/thread.html" rel="nofollow">python 3</a>.</p>
<p><strong>If your task is cpu bound</strong></p>
<p>If your task is cpu bound, you can't use threads because of the <a href="https://wiki.python.org/moin/GlobalInterpreterLock" rel="nofollow">GIL</a>.</p>
<p>You will have the choice to:</p>
<ul>
<li><p>use the multiprocessing library: <a href="https://docs.python.org/2/library/multiprocessing.html" rel="nofollow">python2</a> + <a href="https://docs.python.org/3/library/multiprocessing.html" rel="nofollow">python3</a>.</p></li>
<li><p>run an instance of python per cpu core, each one running a different task.</p></li>
<li><p>use a task queue like <a href="http://www.celeryproject.org/" rel="nofollow">Celery</a>.</p></li>
</ul>
</div>
