<div class="post-text" itemprop="text">
<p>For example, I have a <code>Series</code> object whose values are the filenames of waveform dumps. Say, I want to take the average of each waveform.</p>
<p>Why do I want to parallelize this? These waveform dumps can only be read by proprietary software.  I need to call that program to do its analysis (it can output to <code>stdout</code>, so no problem with that).</p>
<p>In code, this is how it might look like:</p>
<pre class="lang-python prettyprint-override"><code>from subprocess import check_output

def get_average(filename_str):
    average = check_output(['proprietary_mean_calculator', filename_str])
    return float(average)

# waveform_dumps is a pandas Series object
waveform_averages = waveform_dumps.map(get_average)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>It probably doesn't matter whether you are using pandas or not. What you are looking for is simple parallel execution.</p>
<p>Try <a href="https://docs.python.org/3/library/concurrent.futures.html" rel="nofollow">concurrent.futures</a></p>
<pre><code>from subprocess import check_output
import concurrent.futures
import pandas as pd

def get_average(filename_str):
    average = check_output(['proprietary_mean_calculator', filename_str])
    return float(average)

with concurrent.futures.ThreadPoolExecutor(max_workers=2) as executor:
    waveform_averages = executor.map(get_average, waveform_dumps)

# to make the result a pd.Series, if desired:
waveform_averages = pd.Series(waveform_averages, index=waveform_dumps.index)
</code></pre>
</div>
<span class="comment-copy">It appears I cannot run this from a script that I import from Jupyter Notebook (i.e. the code snippet is in an external script that I call from Notebook). Seems to be waiting to acquire a lock or something. If I run the code FROM the Notebook itself, it does fine. Anyway, thanks! This is what I was looking for.</span>
<span class="comment-copy">@Kit maybe it's better if you wrap the concurrent execution into a function, then call the function in the notebook, given the script is not to be run as main.</span>
<span class="comment-copy">Great! Works like a charm.</span>
