<div class="post-text" itemprop="text">
<p>I have a dictionary inside another dictionary i.e. I have a dictionary of stock (like a supermarket) that contains dictionaries of the products (like apples) that have their name, amount etc. I need to sort it by key and print it as a table.</p>
<p>Currently I have, </p>
<pre><code>stock = load_stock_from_file() 
print("{0} | {1:&lt;35} | {2:^11} | {3:^12} ".format("Ident", "Product", "Price", "Amount"))
print("-" * 6 + "+" + "-"*37+"+"+"-"*13+"+"+"-"*12)

for key in sorted(stock):
print("{name:&lt;35} | {price:^11} | {amount:^12} ".format(**key))
</code></pre>
<p>This is what I want (below) but I get the error 'TypeError: format() argument after ** must be a mapping, not str'</p>
<pre><code>Ident | Product                             |   Price   |   Amount
-------+-------------------------------------+-----------+-------------
10000 | Granny Smith Apples Loose           |    0.32 £ |    6 pieces
10001 | Watermelon Fingers 90G              |    0.50 £ |   17 pieces
10002 | Mango And Pineapple Fingers 80G     |    0.50 £ |    2 pieces
10003 | Melon Finger Tray 80G               |    0.50 £ |   10 pieces
10004 | Bananas Loose                       |    0.68 £ |    2.2 kg
10005 | Conference Pears Loose              |    2.00 £ |    1.6 kg
</code></pre>
<p>My keys are the 10000 numbers and the rest are part of that dictionary.</p>
<p>Thanks. </p>
</div>
<div class="post-text" itemprop="text">
<p>That error indicates that your key variable is a str. I guess you need to format the value instead of element. You can try that:</p>
<pre><code>for key in sorted(stock):
    print("{name:&lt;35} | {price:^11} | {amount:^12} ".format(**stock[key]))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You're passing the key (which is a string) to the format method which expects a dictionary in this case because of the double stars. You just need to replace <code>key</code> with <code>stock[key]</code> in the loop. </p>
<p>There's also the <a href="https://docs.python.org/3/library/stdtypes.html#str.format_map" rel="nofollow"><code>format_map</code></a> string method that you can use here, then you don't need to unpack the dictionary with double stars. </p>
<pre><code>for key in sorted(stock):
    print(key, end='   ')
    print("{name:&lt;35} | {price:^11} | {amount:^12} ".format_map(stock[key]))
</code></pre>
<p>And if you want to sort by price or other values, you can do something like this:</p>
<pre><code>for ident, dicti in sorted(stock.items(), key=lambda item: item[1]['price']):
    print(ident, end='   ')
    print("{name:&lt;35} | {price:^11} | {amount:^12} ".format_map(dicti))
</code></pre>
</div>
