<div class="post-text" itemprop="text">
<p>I was wondering if there is an easy way of knowing whether a connection to an FTP server is still active using ftplib. </p>
<p>So if you have an active connection like this: </p>
<pre><code>import ftplib
ftp = ftplib.FTP("ftp.myserver.com", "admin", "pass123")
</code></pre>
<p>is there something like the following pseudo code that can be queried to check if the connection is still active?</p>
<pre><code>if ftp.is_connected() == True:
    print "Connection still active"
else:
    print "Disconnected"
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You could try retrieving something from the server, and catching any exceptions and returning whether or not it's connected based on that. </p>
<p>For example:</p>
<pre><code>def is_connected(ftp_conn):
    try:
        ftp_conn.retrlines('LIST')
    except (socket.timeout, OSError):
        return False
    return True
</code></pre>
<p>This simple example will print the 'LIST' results to stdout, you can change that by putting your own callback into the <a href="https://docs.python.org/3/library/ftplib.html#ftplib.FTP.retrlines" rel="nofollow" title="retrlines method">retrlines method</a></p>
<hr/>
<p>(Make sure you set a timeout in the initial FTP object construction, as the default is for it to be None.)</p>
<pre><code>ftp = ftplib.FTP("ftp.gnu.org", timeout=5, user='anonymous', passwd='')
</code></pre>
</div>
<span class="comment-copy">Oh right, that's actually a pretty simple way of doing it. Thanks.</span>
