<div class="post-text" itemprop="text">
<p>So, the main question is on the title. I'm trying to find out if it is correct to say that python <a href="https://docs.python.org/3/library/unittest.mock.html" rel="nofollow">mock</a> module uses dependency injection pattern for mocking object calls. </p>
<p>I'm not familiar with DI pattern but from what I've read and what I saw with debugger in <code>mock</code> module underhood look like mock() uses DI.</p>
<p>Am I right and mock() is DI or I'm missing something about this pattern and mocking?</p>
</div>
<div class="post-text" itemprop="text">
<p><strong>The <code>mock</code> module does not use dependency injection.</strong></p>
<p><code>mock</code> replaces some objects with customized ones.</p>
<p>For dependency injection to be used, there would have to be some top level process, which would search for functions to be called, detected arguments to pass to them, instantiate them and finally made the call.</p>
<p><code>mock</code> only modifies the object and the call to this objects is done as usual - direct call to that object.</p>
<p>If you want to find example of dependency injection, check <code>pytest</code> and it's fixtures - they use it a lot and it is fun to use that.</p>
</div>
<div class="post-text" itemprop="text">
<p>I suppose you are primarily concerned with mocking out an object's attributes with <a href="https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch" rel="nofollow"><code>unittest.mock.patch</code></a>.</p>
<p><code>patch</code> is a function which does little more than return an instance of the class <code>unittest.mock._patch</code>. <code>_patch</code> is a context manager, which monkeypatches an attribute upon <code>__enter__</code> and unpatches it upon <code>__exit__</code>.</p>
</div>
<span class="comment-copy">Thanks! So, looks like mock uses some 'monkeypatching' approach?</span>
<span class="comment-copy">@Paul Yes, you are correct.</span>
