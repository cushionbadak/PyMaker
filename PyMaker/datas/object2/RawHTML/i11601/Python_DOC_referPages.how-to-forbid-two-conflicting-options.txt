<div class="post-text" itemprop="text">
<p>Is there a way to specify to Python's ArgumentParser that two optional flags are conflicting?</p>
<pre><code>arg_parser.add_argument('-c', '--clean', action='store_true')
arg_parser.add_argument('-d', '--dirty', action='store_true')
</code></pre>
<p>I want the user to be able to specify either none of those, or only one.</p>
<p>Is it achievable without further conditions?</p>
</div>
<div class="post-text" itemprop="text">
<p>How about adding a <a href="https://docs.python.org/3/library/argparse.html#mutual-exclusion" rel="noreferrer">mutually exclusive group</a>:</p>
<pre><code>group = arg_parser.add_mutually_exclusive_group()
group.add_argument('-c', '--clean', action='store_true')
group.add_argument('-d', '--dirty', action='store_true')
</code></pre>
<p>with this I get the following behaviour:</p>
<pre><code>&gt;&gt;&gt; arg_parser.parse_args(['--clean']) 
Namespace(clean=True, dirty=False)
&gt;&gt;&gt; arg_parser.parse_args(['--dirty']) 
Namespace(clean=False, dirty=True)
&gt;&gt;&gt; arg_parser.parse_args(['--dirty','--clean']) 
usage: PROG [-h] [-c | -d] PROG: error: argument -c/--clean: not allowed with argument -d/--dirty
</code></pre>
</div>
<span class="comment-copy">I tried the same, but for arguments which are defined to get a value, but it didn't work: group.add_argument("-v", "--verbose", type=str, nargs='?') group.add_argument("-q", "--quiet", type=str, nargs='?') Any idea why?</span>
