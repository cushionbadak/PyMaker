<div class="post-text" itemprop="text">
<p><strong>tl;dr</strong> I can pass <code>prog.py a b -opt 1</code> and <code>prog.py -opt 1 a b</code>.  I cannot pass <code>prog.py a -opt 1 b</code>. I would like to.</p>
<p><br/></p>
<p>Given an <code>ArgumentParser</code> setup like</p>
<pre><code>parser = argparse.ArgumentParser()
parser.add_argument(dest='arg', action='append', nargs='+')
parser.add_argument('-opt', dest='opt', action='store')
</code></pre>
<p>I want arguments to by-default be appended to <code>arg</code></p>
<pre><code>prog.py a -opt 1 b
</code></pre>
<p>I would like this to return argument tuple <code>(arg=[['a', 'b']], opt='1')</code>. But passing arguments with intermixed options will fail with error message <code>error: unrecognized arguments: b</code>.</p>
<p>However, passing arguments in this order succeeds:</p>
<pre><code>prog.py a b -opt 1
prog.py -opt 1 a b
</code></pre>
<p><br/></p>
<p>I cannot intermix the position of the arguments intended for <code>arg</code>.</p>
<p>How can I have the <code>ArgumentParser</code> fallback to appending to one argument parameter?</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.parse_intermixed_args" rel="nofollow noreferrer"><code>argparse.parse_intermixed_args</code></a>.</p>
<p>Thanks <a href="https://stackoverflow.com/users/901925/hpaulj">@hpaulj</a>.</p>
</div>
<span class="comment-copy">This seems confusing. Why wouldn't you keep your arguments in order?</span>
<span class="comment-copy">A positional argument can be used once.  In aappend action doesn't make sense with a positional (unless is shares dest with another.</span>
<span class="comment-copy">Newer versions have an <code>intermixed</code> parser that might so what you want.</span>
