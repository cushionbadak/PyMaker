<div class="post-text" itemprop="text">
<p>I have large json file with two lists of json objects.</p>
<p>example data:</p>
<h1>data.json</h1>
<pre><code>[{"a":1}][{"b":2}]
</code></pre>
<h1>parser.py</h1>
<pre><code>import json

message = json.load(open("data.json"))

for m in message:
    print m
</code></pre>
<p>As expected, I get ValueError.</p>
<pre><code>File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py", line 290, in load
    **kw)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py", line 338, in loads
    return _default_decoder.decode(s)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py", line 369, in decode
    raise ValueError(errmsg("Extra data", s, end, len(s)))
ValueError: Extra data: line 1 column 10 - line 1 column 19 (char 9 - 18)
</code></pre>
<p>I thought of splitting the file by tracking the character count.
What would be the pythonic way to handle this issue?</p>
</div>
<div class="post-text" itemprop="text">
<p>You could use <a href="https://docs.python.org/3/library/json.html#json.JSONDecoder.raw_decode" rel="nofollow noreferrer"><code>json.JSONDecoder.raw_decode()</code></a> which will parse one complete object and return it with the character position it ended at, allowing you to iterate through each one:</p>
<pre><code>from json import JSONDecoder, JSONDecodeError

decoder = JSONDecoder()
data = '[{"a":1}][{"b":2}]'

pos = 0
while True:
    try:
        o, pos = decoder.raw_decode(data, pos)
        print(o)
    except JSONDecodeError:
        break
</code></pre>
<p>Result:</p>
<pre><code>[{'a': 1}]
[{'b': 2}]
</code></pre>
</div>
