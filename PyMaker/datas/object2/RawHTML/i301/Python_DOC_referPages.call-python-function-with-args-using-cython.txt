<div class="post-text" itemprop="text">
<p>I use Cython to use Python functions inside C code. I need to call Python funcs with arguments from C, but compilers says I need use PyObject, when i'm calling Python function. How I must do this if I need to pass an integer to Python function for example? </p>
<pre><code>#include &lt;Python.h&gt;
#include "hello.h"

int main (int argc, char **argv)
{
    printf ("Initializing Python Runtime...\n");
    Py_Initialize ();

    inithello();

    PyObject *a;
    start_app(a);

    printf ("Cleanup...\n");
    Py_Finalize ();
    return 0;
}
</code></pre>
<p>I'm doing something like this.
start_app is a function in python which take PyObject argument, how i can initialize PyObject to use it inside python? Cause now, when i try to print(a) inside python, a have Segfault</p>
</div>
<div class="post-text" itemprop="text">
<p>As I understand your question you have a Cython module called "hello" with <a href="https://cython.readthedocs.io/en/latest/src/userguide/external_C_code.html#public-declarations" rel="nofollow noreferrer"><code>cdef public</code></a> functions so that you can call the functions from C:</p>
<pre><code>cdef public void start_app(arg):
    # do something...
</code></pre>
<p>You want to know how to pass <code>arg</code>. You have two options:</p>
<ol>
<li><p>Define the type of <code>arg</code> to be a C type (in Cython):</p>
<pre><code>cdef public void start_app(int arg):
</code></pre>
<p>This is probably the easiest solution - you can just pass a C int.</p></li>
<li><p>Create a Python integer in C:</p>
<pre><code>PyObject* arg = PyLong_FromLong(5); // in Python2 this would be PyInt_FromLong
start_app(arg);
Py_DECREF(arg); // drop our reference to it
</code></pre></li>
</ol>
<hr/>
<p>Note that I've assumed that <code>start_app</code> returns <code>void</code>. If it returns a Python object (which it does by default unless you tell it otherwise) you must check that <code>PyObject*</code> against NULL (it's NULL if there's an error) and then handle the reference counting of that <code>PyObject*</code> (DECREF it when you're done with it)</p>
</div>
<span class="comment-copy">You need to add a <a href="https://stackoverflow.com/help/mcve">Minimal, Complete, and Verifiable example</a> to make your question clearer.</span>
<span class="comment-copy">I suspect this should be tagged <a href="https://stackoverflow.com/questions/tagged/python-c-api">python-c-api</a> and possibly not <a href="https://stackoverflow.com/questions/tagged/cython">cython</a> (since I don't see how you'd do this from C with Cython) but it really isn't clear.</span>
<span class="comment-copy">My best guess is that you're looking for something like <a href="https://docs.python.org/3/c-api/object.html#c.PyObject_CallFunction" rel="nofollow noreferrer"><code>PyObject_CallFunction</code></a>.</span>
<span class="comment-copy">Your example isnâ€™t complete (what is hello.h?) and what has cython to do with it?</span>
