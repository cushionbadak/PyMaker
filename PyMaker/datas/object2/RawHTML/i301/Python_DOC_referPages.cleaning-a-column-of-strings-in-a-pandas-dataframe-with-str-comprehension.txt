<div class="post-text" itemprop="text">
<p>I have a dataframe (df1) constructed from a survey in which participants entered their gender as a string and so there is a gender column that looks like: </p>
<pre><code>id       gender       age
1        Male         19
2        F            22
3        male         20
4        Woman        32
5        female       26
6         Male        22
7        make         24
</code></pre>
<p>etc.</p>
<p>I've been using</p>
<pre><code>df1.replace('male', 'Male')
</code></pre>
<p>for example, but this is really clunky and involves knowing the exact format of each response to fix it.</p>
<p>I've been trying to use various string comprehensions and string operations in Pandas, such as .split(), .replace(), and .capitalize(), with np.where() to try to get: </p>
<pre><code>id       gender       age
1        Male         19
2        Female       22
3        Male         20
4        Female       32
5        Female       26
6        Male         22
7        Male         24
</code></pre>
<p>I'm sure there must be a way to use regex to do this but I can't seem to get the code right. </p>
<p>I know that it is probably a multi-step process of removing " ", then capitalising the entry, then replacing the capitalised values. </p>
<p>Any guidance would be much appreciated pythonistas!</p>
<p>Kev</p>
</div>
<div class="post-text" itemprop="text">
<p>Adapt the code in my comment to replace every record that starts with an f with the word Female:</p>
<pre class="lang-py prettyprint-override"><code>df1["gender"] = df1.gender.apply(lambda s: re.sub(
                                    "(^F)([A-Za-z]+)*",  # pattern
                                    "Female",            # replace
                                    s.strip().title())   # string
                                )
</code></pre>
<p>Similarly for F with M in the pattern and replace with Male for Male.</p>
<p>Relevant <a href="https://docs.python.org/3/library/re.html#re.sub" rel="nofollow noreferrer">regex docs</a><br/>
<a href="https://regexr.com" rel="nofollow noreferrer">Regex help</a></p>
</div>
<span class="comment-copy">You may need to know your data , then you can fix it</span>
<span class="comment-copy">Removing what ""? In your example there are none.</span>
<span class="comment-copy">Apologies, in row 6 the "Male" is preceded by a space, which is why it's out of line with the rest of the values. Sorry if I didn't make that clear enough.</span>
<span class="comment-copy">You can do <code>df1["gender"] = df1.gender.apply(lambda s: s.strip().title()</code> to remove the spaces and capitalise. As Wen-Ben says you then need to know what values are possible to turn them into male/female</span>
<span class="comment-copy">Thanks a million, @iuvbio. That helped a lot, once I've done that is it best to just use a      df.replace()  on each of the options to replace each "bad" value with what I want?</span>
<span class="comment-copy">Amazing answer,   Thanks a whole million.</span>
