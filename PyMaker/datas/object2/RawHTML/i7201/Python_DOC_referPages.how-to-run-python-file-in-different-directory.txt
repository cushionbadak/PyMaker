<div class="post-text" itemprop="text">
<p>I have several python files, and I want to run in a different directory where it will search for a particular pattern from 100s of files. Let's say I have the python file in <code>/home/jay</code> directory, and I have 100s of files in <code>/home/jay/data</code> directory. </p>
<p>What can I do to achieve this?</p>
<p><strong>My python code is :</strong></p>
<pre><code>import re
import os

os.chdir(r'/home/jay/data/')
files = open('*')
for line in files :
    line = line.rstrip()
    if re.search('Model' , line):
        print(line)
</code></pre>
<p><strong>I'm getting following error</strong>:</p>
<pre><code>Traceback (most recent call last):
  File "/home/jay/test.py", line 4, in ?
    files = open('*')
IOError: [Errno 2] No such file or directory: '*'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You are looking for <a href="https://docs.python.org/3/library/os.html#os.listdir" rel="nofollow noreferrer"><code>os.listdir</code></a>. It will give you a list of all the file names in the specified directory, which defaults to the current directory. The reason that <code>'*'</code> does not work is that it is a command-line construct that is expanded by your shell. You can only really use it in a shell or script that supports that sort of expansion. Since <code>open</code> does not go through the shell, it tries to find a file actually named <code>*</code>. Also, <code>open</code> can only deal with one file at a time.</p>
<pre>
import os, <b>os.path</b>, re

os.chdir(r'/home/jay/data/')
files = os.listdir()
<b>for name in files:
    # Skip directories
    if os.path.isdir(name):
        continue
    with open(name) as file:</b>
        for line in file:
            line = line.rstrip()
            if re.search('Model' , line):
                print(line)
</pre>
<p>That being said, as a matter of personal preference, I generally avoid using <code>os.chdir</code>. Instead, I prefer specifying full paths using <a href="https://docs.python.org/3/library/os.path.html#os.path.join" rel="nofollow noreferrer"><code>os.path.join</code></a>. Here is your example rewritten to do that:</p>
<pre><code>from os import listdir
from os.path import join, isdir

folder = '/home/jay/data'
files = listdir(folder)
for name in files:
    name = join(folder, name)
    # Skip directories
    if isdir(name):
        continue
    with open(name) as file:
        for line in file:
            line = line.rstrip()
            if 'Model' in line:
                print(line)
</code></pre>
<p>I took the liberty of removing the regex completely since it only serves to slow things down in you have many files. If you do use a regex for some more complicated scenario, compile if before you use it using <a href="https://docs.python.org/3/library/re.html#re.compile" rel="nofollow noreferrer"><code>re.compile</code></a>.</p>
<p>Furthermore, you are free to use relative paths here if you want. For example, if you are always running from <code>/home/jay</code>, you can set <code>folder = 'data'</code> instead of <code>folder = '/home/jay/data'</code> in the second example.</p>
</div>
<span class="comment-copy">Go into your Python site-packages folder and open up a setup.py from NumPy or other to see how they are getting all the file names good luck</span>
<span class="comment-copy">don't see setup.py file in site-packages. not sure which files i should look for. there other module imported such as BeautifulSoup, requests etc.. beginner in python, so pardon if this is silly question.</span>
<span class="comment-copy">If you really wrote <code>files = open(*)</code> you wouldn't be getting an <code>IOError</code> but rather a <code>SyntaxError</code>. Please post your actual code.</span>
<span class="comment-copy"><code>print(line)`</code> is also  syntax error.</span>
<span class="comment-copy">Also, you can't get an error saying <code>No such file or directory: '/home/jay/Data/*'</code> if your line really reads <code>os.chdir(r'/home/jay/data/')</code>. Please fix your code!</span>
<span class="comment-copy">@YakymPirozhenko. Thanks for that.</span>
<span class="comment-copy">Try that code. gave me syntax error: File "test.py", line 6     with open(name) as file:             ^ SyntaxError: invalid syntax</span>
<span class="comment-copy">Tired your 2nd exapmple without regex :  File "test.py", line 7     with open(join(folder, name)) as file:             ^ SyntaxError: invalid syntax</span>
<span class="comment-copy">Odd, I just ran the code, didn't have any issues.</span>
<span class="comment-copy">@Jay. It looks like you are having issues with <code>with</code>. I have no problem running this code. How are you running your script exactly?</span>
