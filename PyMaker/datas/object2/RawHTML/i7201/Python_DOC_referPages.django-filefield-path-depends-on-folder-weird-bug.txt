<div class="post-text" itemprop="text">
<p>When I run shell from project's root category I get the following result:</p>
<pre><code>&gt;&gt;&gt; from generations.models import *
&gt;&gt;&gt; Generation.objects.all().first().file.path
'/Users/marijus/workspace/preeti/media/data/58/input/IRIS.csv'
</code></pre>
<p>Which is good and what I want. </p>
<p>However when I run shell or any other script with django context from other directory I get the following result:</p>
<pre><code>─$ cd scripts 
╰─$ python ../manage.py shell
&gt;&gt;&gt; from generations.models import *
&gt;&gt;&gt; Generation.objects.all().first().file.path
'/Users/marijus/workspace/preeti/scripts/media/data/58/input/IRIS.csv'
</code></pre>
<p>notice scripts appended before /media which results in an error when I try to access the file from scripts directory.</p>
<p>my models:</p>
<pre><code>def get_upload_path(instance, filename):
    return "media/data/%s/input/%s" % (instance.id, filename)

class Generation(models.Model):
    file = models.FileField(upload_to=get_upload_path, blank=True, null=True)
</code></pre>
<p>Is this some kind of bug or is FileField's path supposed to depend on folder from which I'm trying to access it.</p>
</div>
<div class="post-text" itemprop="text">
<p>Django's <code>FileStorage</code> <a href="https://github.com/django/django/blob/master/django/core/files/storage.py#L202" rel="nofollow noreferrer">uses <code>os.abspath</code></a> to get files location. On the other hand <code>os.abspath</code> <a href="https://docs.python.org/3/library/os.path.html#os.path.abspath" rel="nofollow noreferrer">calls <code>os.getcwd</code></a> to get the path. This is what causes path to be relative to current directory, which is useful in local environment.</p>
<p>If you want to set it to some absolute location you need to set <a href="https://docs.djangoproject.com/en/1.11/ref/settings/#media-root" rel="nofollow noreferrer"><code>MEDIA_ROOT</code> setting</a>.</p>
</div>
<span class="comment-copy">Can you your media settings in settings</span>
