<div class="post-text" itemprop="text">
<p>i'm new to logging and python and have found a library called <code>logbook</code> that i would like to use. i'm trying some kind of wrapper that <code>intiliaze</code> the log file and i then can call it from different files.</p>
<p>but i keep getting below error. What am i doing wrong?</p>
<pre><code>self.stream = io.open(self._filename, mode, encoding=self.encoding)
TypeError: expected str, bytes or os.PathLike object, not NoneType
</code></pre>
<p><strong>logger.py</strong></p>
<pre><code>from logbook import Logger, StreamHandler
from logbook import FileHandler
import sys
import os

log = Logger()

initialized = False

def make_log_dir_if_missing(log_dir):
    import cheetax.utils.system
    cheetax.system.make_directory(log_dir)

def initialize_logger(path=None):
    global initialized, log

    if initialized:
        return

    if path is not None:
        make_log_dir_if_missing(path)
        log_path = os.path.join(path, 'logger.log')

    log_handler = FileHandler(path)
    log_handler.push_application()


    initialized = True


GLOBAL_LOGGER = log
</code></pre>
<p><strong>cli.py</strong></p>
<pre><code>def main():
    initialize_logger()
</code></pre>
<p><strong>other files</strong></p>
<pre><code>logger.info(welcome)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The issue is that you are not providing a default logging directory, so the line <code>log_handler = FileHandler(path)</code> will fail when you don't pass anything to <code>initialize_logger()</code>. Simply add and else to the <code>if path is None</code> statement that sets <code>path</code> to some location :)</p>
<hr/>
<p>Even better, simply change <code>path=None</code> to <code>path='/path/to/default.log'</code> or something.</p>
</div>
<span class="comment-copy">Any reason you're not using the standard Python <a href="https://docs.python.org/3/library/logging.html" rel="nofollow noreferrer"><code>logging</code></a> library?</span>
<span class="comment-copy">not really if u can provide any minimal solution like above im open for it</span>
<span class="comment-copy">Here is a quick example that writes to a file. <a href="https://docs.python.org/2/howto/logging.html#logging-to-a-file" rel="nofollow noreferrer">docs.python.org/2/howto/logging.html#logging-to-a-file</a></span>
