<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/3305561/how-to-query-mongodb-with-like">How to query MongoDB with “like”?</a>
<span class="question-originals-answer-count">
                    33 answers
                </span>
</li>
</ul>
</div>
<p>I have researched this but can not find why what I am trying is not working, and will warn that I am somewhat new to python and very new to mongodb. I have a mongo database of tweets in JSON which I am trying to query through Python and pymongo. I want returned the 'text' and 'created_at' fields for all tweets that contain "IP".</p>
<p>I have tried the following, which works perfectly when I do this through the terminal:</p>
<pre><code>db.tweets.find({text:/IP/},{text:1,created_at:1})
</code></pre>
<p>In Python, after experimenting I have found that I need to put the field names between quotes. I have gotten the following similar query to work:</p>
<pre><code>cursor = db.tweets.find({'created_at':"Thu Apr 28 09:55:57 +0000 2016"},{'text':1,'created_at':1})
</code></pre>
<p>But when I try: </p>
<pre><code>db.tweets.find({"text": /.*IP.*/},{'text':1,'created_at':1})
</code></pre>
<p>or </p>
<pre><code>cursor = db.tweets.find({'text':/IP/},{'text':1,'created_at':1})
</code></pre>
<p>I get a </p>
<pre><code>'SyntaxError: invalid syntax' at the "/IP/" part of the code.
</code></pre>
<p>I am using mongo 3.4.6 and python 3.5.2</p>
</div>
<div class="post-text" itemprop="text">
<p>Python does not have special syntax for regexes like JavaScript has.</p>
<h1>Using <code>re</code></h1>
<p>You need to <strong>compile the regex</strong> with the <a href="https://docs.python.org/3/library/re.html#module-re" rel="nofollow noreferrer"><strong><code>re</code> module</strong></a>:</p>
<pre><code>import re

<b>rgx = re.compile('.*IP.*', re.IGNORECASE)</b>  # compile the regex

cursor = db.tweets.find({'text':<b>rgx</b>},{'text':1,'created_at':1})</code></pre>
<p>You can use <code>re.IGNORECASE</code> as flag if you want to match <code>iP</code>, <code>Ip</code> and <code>ip</code> as well. If you do not want that, you can drop the <code>re.IGNORECASE</code> part.</p>
<h1>Using <code>'$regex'</code> notation</h1>
<p>Or you can specify that you are working with a regex with:</p>
<pre><code>cursor = db.tweets.find({'text':<b>{'$regex':'IP'}</b>},{'text':1,'created_at':1})</code></pre>
</div>
