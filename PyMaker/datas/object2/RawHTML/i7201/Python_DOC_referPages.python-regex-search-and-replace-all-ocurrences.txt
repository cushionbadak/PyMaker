<div class="post-text" itemprop="text">
<p>I hope you can help me with this. I'm writing a code in python to replace all occurrences on a string that includes: @[username](user: id) </p>
<p>I tried with the following code, but only works if my string is something like this:</p>
<pre><code>mystring = '@[otheruser](id: 100)' and match and replace it's ok. But if I pass a string like this:

mystring = 'He is @[otheruser](id: 100) and he is @[newuser](id: 20)' doesn't work, nothing gets replaced.
</code></pre>
<p>Code:</p>
<pre><code>import re

mystring = 'He is @[otheruser](id: 100) and he is @[newuser](id: 20)'

regex = re.compile(r'^@\[([a-zA-Z0-9]+)\]\((id: ([0-9]+))\)', re.S)
iter = re.finditer(regex, mystring)

    for result in iter:
        match = result.group()
        g1 = result.group(1)
        g2 = result.group(2)
        g3 = result.group(3)

        print(match) # full match
        print(g1) # otheruser
        print(g2) # id: number_id
        print(g3)  # number_id

        parsed_string = re.sub(p, '&lt;a href="view/'+g3+'"&gt;@'+g1+'&lt;/a&gt;' , mystring)
</code></pre>
<p><strong>Output should be something like:</strong></p>
<pre><code>He is &lt;a href="view/100"&gt;@otheruser&lt;/a&gt; and he is &lt;a href="view/20"&gt;@newuser&lt;/a&gt; doesn't work, nothing gets replaced.
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>As the docs for the <a href="https://docs.python.org/3/library/re.html#re.sub" rel="nofollow noreferrer"><code>sub</code></a> method say:</p>
<blockquote>
<p>Backreferences, such as \6, are replaced with the substring matched by group 6 in the pattern.</p>
</blockquote>
<p>So, change to this:</p>
<pre><code>import re

mystring = 'He is @[otheruser](id: 100) and he is @[newuser](id: 20)'
my_re = r'@\[([a-zA-Z0-9]+)\]\((id: ([0-9]+))\)'  # note the missing ^ at start

regex = re.compile(my_re, re.S)
iter = re.finditer(regex, mystring)

for result in iter:
    match = result.group()
    g1 = result.group(1)
    g2 = result.group(2)
    g3 = result.group(3)

    print(match) # full match
    print(g1) # otheruser
    print(g2) # id: number_id
    print(g3)  # number_id

    # we make use of \1 to match the first matched group (which is the number_id 
    # and \3 which is the username
    parsed_string = re.sub(my_re, 
                           r'&lt;a href="view/\3"&gt;@\1&lt;/a&gt;', 
                           mystring)
    print(parsed_string)
    # prints
    # He is &lt;a href="view/100"&gt;@otheruser&lt;/a&gt; and he is &lt;a href="view/20"&gt;@newuser&lt;/a&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I don't know what your code does but substituting the string in python using re is as simple as this:</p>
<pre><code>import re

mystring = 'He is @[otheruser](id: 100) and he is @[newuser](id: 20)'
regex = re.compile(r'@\[(\w+)\]\(id\:\s(\d+)\)', re.I)
r_p = r'&lt;a href="view/\2"&gt;@\1&lt;/a&gt;'
print(regex.sub(p, mystring))
</code></pre>
<p>Please see that I removed <code>^</code> (caret) as it denotes starting of the string which is not the case in your case.
<a href="https://regex101.com/r/fUztdt/1" rel="nofollow noreferrer">https://regex101.com/r/fUztdt/1</a></p>
</div>
<span class="comment-copy">this for markdown syntax?</span>
<span class="comment-copy">Awesome, thanks for your help, works great, I think I misunderstood the use of ^</span>
<span class="comment-copy">@ElrosRomeo. If my answer helped you to solve your issue, please accept it. It's a good practice in StackOverflow. Also, if you really liked it, upvote it too :)</span>
<span class="comment-copy">Most of the functions under <code>re</code> work with both string or already compiled pattern object.</span>
<span class="comment-copy">My bad. Thanks for clarification.</span>
<span class="comment-copy">Thanks for your help too.</span>
