<div class="post-text" itemprop="text">
<p>I'm having a problem accessing Gmail account. Currently, I'm using <a href="https://github.com/charlierguo/gmail" rel="nofollow noreferrer">this</a> library written in python 2.7+ to log in and to read Gmail messages. To use the library, I had to enable Google 'insecure app'. Everything is working fine with this lib.</p>
<p>Now, I'm moving to python 3+, and I cannot use the lib anymore. Whenever I import the lib, it throws the following error:</p>
<pre><code>import gmail
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/usr/local/lib/python3.6/site-packages/gmail-0.0.5-py3.6.egg/gmail/__init__.py", line 16, in &lt;module&gt;
  File "/usr/local/lib/python3.6/site-packages/gmail-0.0.5-py3.6.egg/gmail/gmail.py", line 5, in &lt;module&gt;
ModuleNotFoundError: No module named 'utf'
</code></pre>
<p>I tried to overcome this problem by looking at a replacement module for 'utf' in python 3+ but I couldn't figure out what it is. How can I fix that?</p>
<p>Another problem is that I tried the official python lib provided by Google. <a href="https://developers.google.com/gmail/api/quickstart/python" rel="nofollow noreferrer">Here</a> is the link for the tutorial. I successfully completed the quick start example, but the script opened my browser, and I had to allow the access via the browser. In fact, I just want to create a cronjob to run my script periodically on my server without an UI. Does Google allow it?</p>
<p>Thank you very much.</p>
</div>
<div class="post-text" itemprop="text">
<p>The official API for Gmail that works in python 3
and there are a lot of guides for using it, for example:</p>
<p><a href="https://github.com/abhishekchhibber/Gmail-Api-through-Python" rel="nofollow noreferrer">https://github.com/abhishekchhibber/Gmail-Api-through-Python</a></p>
<p>But if you feel this is too complicated (I do), instead you may want to activate access using POP3 or IMAP from the Gmail settings panel.</p>
<p>Then use poplib or imaplib.</p>
<p>Example: <a href="https://docs.python.org/3/library/poplib.html#pop3-example" rel="nofollow noreferrer">https://docs.python.org/3/library/poplib.html#pop3-example</a></p>
<p>This is in general easier, more portable and uses packages already found in default python installs.</p>
<hr/>
<p>Edit:</p>
<p>The library you were using used IMAP access, not oauth.</p>
<p>Also to answer your "UTF" question: every string in python 3 is UTF8 by default, if you want to decode raw data, you should use 'mystring'.decode('utf-7'), etc. </p>
<p>Edit 2: looks like someone already did the work: <a href="https://github.com/charlierguo/gmail/pull/48" rel="nofollow noreferrer">https://github.com/charlierguo/gmail/pull/48</a></p>
<hr/>
<p>OK, I just saw the problem in <a href="https://developers.google.com/gmail/api/quickstart/python" rel="nofollow noreferrer">the instructions</a>:</p>
<p><a href="https://i.stack.imgur.com/cWa7N.png" rel="nofollow noreferrer"><img alt=" " src="https://i.stack.imgur.com/cWa7N.png"/></a></p>
<p>So, I guess your only alternative is to stick with POP3/IMAP (which your program was already using).</p>
</div>
<span class="comment-copy">Some libraries are just not compatible between the 2 versions.</span>
<span class="comment-copy">But is there a replacement for 'utf' in python 3+?</span>
<span class="comment-copy">There may be but the <code>gmail</code> module would have to use it. Simply installing it wouldn't be enough.</span>
<span class="comment-copy">I've tried the official library, and it employs oauth2 authentication mechanism as my understanding. That means it requires the permission of user, and the access token will expire.</span>
<span class="comment-copy">Please see the updated answer, hopefully it helps.</span>
<span class="comment-copy">Interesting, I'm gonna check the pull request</span>
