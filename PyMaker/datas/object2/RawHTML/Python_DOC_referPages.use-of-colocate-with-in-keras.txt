<div class="post-text" itemprop="text">
<p>Is there another use of colocate_with in Keras? The Keras Model API code documented here: <a href="https://keras.io/models/model/" rel="nofollow noreferrer">https://keras.io/models/model/</a> and here: <a href="https://www.tensorflow.org/api_docs/python/tf/keras/models/Model" rel="nofollow noreferrer">https://www.tensorflow.org/api_docs/python/tf/keras/models/Model</a> results in a deprecation warning. The referenced code does not directly use colocate_with (though perhaps the API uses colocate_with). Will this Model API be deprecated or is the warning in error?</p>
<p>Example code from Keras documentation:</p>
<pre><code>from keras.models import Model
from keras.layers import Input, Dense

a = Input(shape=(32,))
b = Dense(32)(a)
model = Model(inputs=a, outputs=b)
</code></pre>
<p>Example code from TensorFlow documentation:</p>
<pre><code>import tensorflow as tf

inputs = tf.keras.Input(shape=(3,))
x = tf.keras.layers.Dense(4, activation=tf.nn.relu)(inputs)
outputs = tf.keras.layers.Dense(5, activation=tf.nn.softmax)(x)
model = tf.keras.Model(inputs=inputs, outputs=outputs)
</code></pre>
<p>Both of these examples result in a deprecation warning:</p>
<pre><code>...deprecation.py:323] From ~/.local/lib/python3.6/site-packages/tensorflow/python/ops/resource_variable_ops.py:435: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
</code></pre>
<p>This warning and use of colocate_with appears to be different than that referenced in "<a href="https://stackoverflow.com/questions/45341067/what-is-colocate-with-used-for-in-tensorflow">What is colocate_with used for in tensorflow?</a>"</p>
<p>Will the documented method of using the Model API be deprecated? Will there be an alternative short of using a Sequential model?</p>
</div>
<div class="post-text" itemprop="text">
<p>The current master branch has yet to clean out the deprecated code. The nightly has already fixed a fair amount of these warnings, and it will take effect in the next release.</p>
<p>See this for more details:
<a href="https://github.com/tensorflow/tensorflow/issues/25996" rel="nofollow noreferrer">https://github.com/tensorflow/tensorflow/issues/25996</a></p>
</div>
