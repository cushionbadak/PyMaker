<div class="post-text" itemprop="text">
<p>I'm trying to delete files from a folder where the date modified is greater than 3 days. </p>
<pre><code>    numdays = 86400 * 3  # Seconds in a day times 3 days
from datetime import datetime
a = datetime.now()
for delete_f in os.listdir(src1):
    file_path = os.path.join(src1, delete_f)
    try:
        if (a - datetime.fromtimestamp(os.path.getmtime(file_path)) &gt;   numdays):

      os.unlink(file_path)
except Exception as e:
    print (e)
</code></pre>
<p>I get the error
unorderable types: datetime.timedelta() &gt; int()</p>
<p>I'm not really sure how to go about getting the numdays part, anyone have suggestions? TIA</p>
</div>
<div class="post-text" itemprop="text">
<p>You want to make numdays a timedelta object.</p>
<pre><code>numdays = datetime.timedelta(days=3)
</code></pre>
<p>So you are now comparing two datetime objects.</p>
</div>
<div class="post-text" itemprop="text">
<p>Don't use <code>datetime.now()</code> -- it returns the current local time as a naive datetime object that may be ambiguous. Use <code>time.time()</code> instead:</p>
<pre><code>#!/usr/bin/env python
import os
import time

cutoff = time.time() - 3 * 86400 # 3 days ago
for filename in os.listdir(some_dir):
    path = os.path.join(some_dir, filename)
    try:
        if os.path.getmtime(path) &lt; cutoff: # too old
            os.unlink(path) # delete file
    except EnvironmentError as e:
        print(e)
</code></pre>
<p>See more details on why you should not use <code>datetime.now()</code> in <a href="https://stackoverflow.com/q/26313520/4279">Find if 24 hrs have passed between datetimes - Python</a></p>
<hr/>
<p>Unrelated: here's <a href="http://docs.python.org/3/library/pathlib" rel="nofollow noreferrer"><code>pathlib</code></a>-based solution:</p>
<pre><code>#!/usr/bin/env python3
import time
from pathlib import Path

cutoff = time.time() - 3 * 86400 # 3 days ago
for path in Path(some_dir).iterdir():
    try:
        if path.lstat().st_mtime &lt; cutoff: #NOTE: don't follow symlinks
            path.unlink() # delete old files or links
    except OSError as e:
        print(e)
</code></pre>
</div>
