<div class="post-text" itemprop="text">
<p>I have 2 tables:</p>
<ul>
<li><strong>Kanji</strong> with <em>framenum</em> INT and <em>character</em> STRING</li>
<li><strong>learnAlg</strong> with <em>framenum</em> INT and <em>framekanji</em> STRING</li>
</ul>
<p><em>framekanji</em> currently has in every row the value 'NULL' and has to be filled with <strong>Kanji</strong>.<em>character</em> with the same <em>framenum</em>. E.g. 二 from table <strong>Kanji</strong> (2, '二') has to be filled in in table <strong>learnAlg</strong> where <em>framenum</em> = 2.</p>
<p>The following code works:</p>
<pre><code>c.execute("SELECT MAX(rowid) FROM learnAlg")
max = c.fetchone()[0]

for fn in range(max):
    fn += 1
    # !! Add framekanji !!
    c.execute("UPDATE learnAlg SET framekanji=(SELECT character FROM Kanji WHERE "
              "framenum = learnAlg.framenum) WHERE framenum = ?", (fn,))
</code></pre>
<h2>Question</h2>
<p>I was wondering if it was also possible to update every row in 1 go with code similar to:</p>
<pre><code>c.executemany("UPDATE learnAlg SET framekanji=(SELECT character FROM Kanji WHERE "
              "framenum = learnAlg.framenum) WHERE framenum = self")
</code></pre>
<p>However this results in the error: "TypeError: function takes exactly 2 arguments (1 given)"</p>
</div>
<div class="post-text" itemprop="text">
<p><code>executemany()</code> is used when you want to execute the same SQL statement multiple times with different sets of parameters.
In this case, this would be used if you wanted to update each frame individually:</p>
<pre><code>c.executemany("UPDATE ... WHERE framenum = ?",
              [(fn + 1,) for fn in range(max)])
</code></pre>
<p>However, to run a single SQL statement, just use <code>execute()</code>.
SQL has no <code>self</code>; you could use <code>framenum = framenum</code>, or just omit the WHERE clause:</p>
<pre><code>c.execute("""UPDATE learnAlg
             SET framekanji = (SELECT character
                               FROM Kanji
                               WHERE framenum = learnAlg.framenum);""")
</code></pre>
</div>
<span class="comment-copy"><code>executemany</code> takes a second argument (as the error message says), which should be something it can iterate over. The <a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Cursor.executemany" rel="nofollow noreferrer">documentation with examples</a> is pretty clear on this.</span>
