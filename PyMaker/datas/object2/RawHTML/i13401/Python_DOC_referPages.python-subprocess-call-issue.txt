<div class="post-text" itemprop="text">
<p>When I run the following in Python 3.2.3 in Linux it does nothing...</p>
<pre><code>subprocess.call("export TZ=Australia/Adelaide", shell=True)
</code></pre>
<p>However if I run it in the terminal it works...</p>
<pre><code>export TZ=Australia/Adelaide
</code></pre>
<p>I haven't had an issue with using subprocess.call before. Just seems to be this one. I'm running as a superuser so it's not a sudo thing, and I've also tried putting an r in front of the string to make it a raw string.</p>
<p>Any ideas? Thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://stackoverflow.com/q/20524797/4279">A subprocess (shell in this case) can't</a> (<a href="https://stackoverflow.com/a/211064/4279">normally</a>) <a href="https://stackoverflow.com/q/20524797/4279">modify its parent environment.</a></p>
<p>To set the local timezone for the script and its children in Python (on Unix):</p>
<pre><code>#!/usr/bin/env python3
import os
import time
from datetime import datetime, timezone

os.environ['TZ'] = 'Australia/Adelaide'
time.tzset()
print(datetime.now(timezone.utc).astimezone())
# -&gt; 2015-09-25 05:02:52.784404+09:30
</code></pre>
<p>If you want to modify the environment for a single command then you could pass <code>env</code> parameter:</p>
<pre><code>#!/usr/bin/env python
import os
import subprocess

subprocess.check_call('date', env=dict(os.environ, TZ='Australia/Adelaide'))
# -&gt; Fri Sep 25 05:02:34 ACST 2015
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Export modifies the environment of the shell.</p>
<p>When you run it through subprocess, a new shell is created, the environment modified and then immediately destroyed.</p>
<p>When you run it in a shell, it modifies the environment of that shell so you can see the effect.</p>
</div>
<span class="comment-copy">If you want to modify environment variables within Python read up on <a href="https://docs.python.org/3/library/os.html#os.environ" rel="nofollow noreferrer"><code>os.environ</code></a>.</span>
<span class="comment-copy">@metatoaster I've got this but it is still only a local scope within the program. When I exit the program it remains as it was. Is there a way to make the OS update permanently?      os.environ['TZ'] = 'Australia/Adelaide'     time.tzset()</span>
<span class="comment-copy">You need to invoke OS/shell specific method of modifying this, such as modifying <code>.bashrc</code>, <code>/etc/environment</code>, or <code>/etc/timezone</code> if your Linux distribution supports that.</span>
<span class="comment-copy">related: <a href="http://stackoverflow.com/q/7040592/4279">Calling the “source” command from subprocess.Popen</a></span>
