<div class="post-text" itemprop="text">
<p>I'm writing a python script that is compressed. I managed to extract the file and within one of the sub directories there are more compressed files. I want my script to find the newest compressed file available and extract it.</p>
<p>I broke my scripts into different sections for troubleshooting. Below is the second section that contains the part I'm having trouble with:</p>
<pre><code>import os
import time
import glob

path = "/home/user/scripts/logs/old" #logs was the original compressed file. Old is
#where the other compressed files are.

for file in glob.glob( os.path.join(path, '*.tar.gz') ):
    filename = os.path.basename(file)
    statinfo = os.stat(file)
    print file + "  " + time.ctime(os.path.getmtime(file))
</code></pre>
<p>The script just lists the file name and then the timestamp the compressed files were last modified. How do I tell python to get the name of the last modified file so I can continue with extracting it?</p>
</div>
<div class="post-text" itemprop="text">
<p>If you've got the file list (by whatever means, e.g. globbing) in a variable named <code>files_to_check</code>, just use <a href="https://docs.python.org/3/library/functions.html#max"><code>max</code></a> with <code>os.path.getmtime</code> as the key:</p>
<pre><code>files_to_check = glob.glob(os.path.join(path, '*.tar.gz'))
most_recent_file = max(files_to_check, key=os.path.getmtime)
</code></pre>
</div>
<span class="comment-copy">What do you mean by "the last modified file"? A file that was modified since you last looked (so you'd have to keep track of the "last-looked-time")? Or the most recently changed file out of a list of files (which, if nothing changes between runs of the script, may be the same file several times)? In the latter case, collect the timestamps and sort by them.</span>
<span class="comment-copy">@Evert - The most recently changed file. Script after running should delete the files therefore should never see the same file again. If I do get the timestamps and sort, how do I go back to correlating the name and times together?</span>
<span class="comment-copy">Good answer, elegant use of key parameter!</span>
<span class="comment-copy">Agreed! This is elegant its stupid simple! Too bad I spent 3 days trying to figure it out! Thanks @ShadowRanger</span>
<span class="comment-copy">@user3808507: for completeness: call<code>shutil.unpack_archive(most_recent_file)</code>, to unzip.</span>
