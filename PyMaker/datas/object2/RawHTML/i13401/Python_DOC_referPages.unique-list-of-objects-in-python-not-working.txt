<div class="post-text" itemprop="text">
<p>I am trying to create a unique list of objects using Python and I am failing. It doesn't matter whether I use a list or a set, it does not seem to work. When I printed the list/set I noticed a couple of non-unique objects in the list. I realised that was the case because some of those objects had a 'space' at the start of the word. I looked around and thought using the ·lstrip(' ')· would help my cause, but sadly it doesn't.</p>
<p>The weirdest thing is that the 'number of unique objects' is correct, but the list of unique objects created at the end is wrong. Can anyone please point to me where I'm going wrong?</p>
<p>The column I'm interested in is 'Object' and the unique list should contain <em>Owl</em>, <em>Cat</em>, <em>Fox</em>, <em>Cow</em>, <em>Goat</em>, <em>Dog</em>, <em>Ant</em>, <em>Buffalo</em>, <em>Lion</em> and <em>tiger</em>. </p>
<p>Sample data:</p>
<pre><code>Key    ID    Name    Code    State    Object
01     NULL  NULL   NULL    NULL      Athletics, Light,Netball
02     NULL  NULL   NULL    NULL      BMX Track, Gridiron, Oval
05     NULL  NULL   NULL    NULL      Dog park, Cricket, Soccer
10     NULL  NULL   NULL    NULL      Netball, Oval, Softball
21     NULL  NULL   NULL    NULL      Seat, Playground, Ping Pong Table
13     NULL  NULL   NULL    NULL      Bench, Bike Rack, Seat
</code></pre>
<p>My working code is attached below:</p>
<pre><code>import csv

fOpen1=open('C:\Data.csv')
uniqueList=csv.writer(open('C:\UniqueList.csv', 'wb'))

Master=csv.reader(fOpen1)
Master.next()

unique=[]

for row in Master:
    for item in row[5].split(','):
        item.strip(' ')
        if item not in unique:
            unique.append(item)
uniqueList.writerow(unique)
</code></pre>
<p>What I'm getting at the end of this is duplicates including 2 foxes and missing a few unique entries as well. Of course this is just dummy data but I hope I am clear in explaining what's going on.</p>
<p><strong>UPDATE1:</strong>
I have updated the script and it works okay however another issue has cropped up. I have updated the column with real data that I'm working with. The unique items that are NOT being added to the final list include:</p>
<pre><code>Gridiron
Cricket
Ping Pong Table
Softball
</code></pre>
<p><strong>UPDATE2:</strong></p>
<p>I have reverted to the original 'wrong' script because it works okay now. There was something wrong with the csv file I was working off.</p>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/stdtypes.html#str.lstrip" rel="nofollow"><code>str.lstrip(' ')</code></a> is not an in-place method, it returns the stripped string. You need to assign it back to <code>object</code> -</p>
<pre><code>object = object.lstrip(' ')
</code></pre>
<p>Assuming Python 2.7+ (or 3.1+) , a faster way would be to use <code>set</code> , and maybe <code>set comprehension</code> . Example -</p>
<pre><code>unique = {obj.lstrip() for row in Master for obj in row[5].split(',')}
uniqueList.writerow(list(unique))
</code></pre>
<p>Please note, this would not preserve any order , since <code>set</code>s are not ordered. If order is important, you can use a <code>set</code> to store the values that are already seen. Example -</p>
<pre><code>unique=[]
seen_set = set()
for row in Master:
    for obj in row[5].split(','):
        obj = obj.lstrip(' ')
        if obj not in seen_set:
            unique.append(obj)
            seen_set.add(obj)
</code></pre>
<p>Also, I would like to advice that you should not use <code>object</code> as a variable name as that is the name of the built-in class (that is extended by all other classes) .</p>
<hr/>
<p>Also, seems like there are some strings with whitespaces at the end, so it would be better to use <code>.strip()</code> or <code>.strip(' ')</code> instead of <code>.lstrip(' ')</code> . Example of <code>strip</code> with set comprehension -</p>
<pre><code>unique = {obj.strip() for row in Master for obj in row[5].split(',')}
uniqueList.writerow(list(unique))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>edit your code something like this:</p>
<pre><code>for object in row[5].split(','):
        object=object.strip()
        if object not in unique:
            unique.append(object)
</code></pre>
<p>strip will remove all spaces from right and left.and assign the object into new object as </p>
<pre><code>object = object .strip()  
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>A set comprehension would serve you well. </p>
<p>First off, let's get rid of that open file by using a context manager:</p>
<pre><code>import csv

with open('C:\Data.csv') as raw:
    master = csv.reader(raw)
    master.next()  # Ignore the header
    unique = {y.strip() for row in master for y in row[-1].split(',')}
</code></pre>
<p>Ok, lets go over what we did there. We opened the file using a context manager so the file will be closed automatically. Then we read in the csv using csv.reader and iterated past the first row.</p>
<p>Here's where it gets tricky - we created a set by iterating over the lists in the csv, then iterating over the contents of those lists. A more verbose way:</p>
<pre><code>unique = set()
for row in master:
    for item in row[-1].split(','):
        unique.add(item.strip())
</code></pre>
<p>This accomplishes much the same thing, possibly in an easier to understand format. Also, note that I used -1 to slice to the last column in the csv.</p>
</div>
<span class="comment-copy">@AnandSKumar- Thank you for your insight. However now I've another problem at hand. Although I've gotten rid of the trailing spaces the number of unique entries is incomplete in my final list. In my file that I'm working off, there are 30 unique entries. After making the changes as suggested it has come down to 21. Any idea what may be going on here? Thank you once again!</span>
<span class="comment-copy">Did you check to find out which specific entries are missing? Do they seem to have any connection? Maybe they are not in the <code>Object</code> field?</span>
<span class="comment-copy">@AnandSKumar- I manually checked and cannot see a general link between the missing entries i.e. no connection to speak of. They are all definitely in the    Object field when I check the source file I'm working off. It is bewildering.</span>
<span class="comment-copy">Can you give example in quesiton for the csv row as well the entry that is missing.</span>
<span class="comment-copy">is the csv tab delimited? if so are you openning the csv file with tab as delimiter?</span>
