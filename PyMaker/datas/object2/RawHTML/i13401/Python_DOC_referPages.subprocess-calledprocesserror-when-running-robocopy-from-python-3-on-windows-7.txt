<div class="post-text" itemprop="text">
<p>I am trying to robocopy media from one windows machine to another on a network using robocopy and python 3.</p>
<p>I have tried just about every combination I can of <code>subprocess</code> and <code>robocopy</code> but I am still getting errors.</p>
<p>Here is my most recent try:</p>
<pre><code>print(subprocess.check_output(["robocopy", "\\172.21.81.23\c\media\\ \\172.21.81.10\c\media\videos\\"], shell=True))
</code></pre>
<p>I ma not sure if it is the backslashes, or what, but I always get the following response:</p>
<pre><code>Traceback (most recent call last):
  File "",line 7, in tableChange
  File "C:\Program Files  line 586, in check_output
    raise CalledProcessError(retcode, process.args, output=output)
subprocess.CalledProcessError: Command '['robocopy', '\\172.21.81.23\\c\\media\\cmsupload\\ \\172.21.81.10\\c\\media\\videos\\']' returned non-zero exit status 16
</code></pre>
<p>Does anyone have any suggestions?</p>
</div>
<div class="post-text" itemprop="text">
<p>You either don't split the arguments (and use <code>shell=True</code>) or split them completely (and don't use <code>shell=True</code>), you can't split only the command from the arguments. Also, for Windows paths, you want to use raw strings to avoid problems with ASCII escapes being processed in paths by accident (prefixed with an <code>r</code>, e.g. <code>r'\\foo\bar'</code>, and don't include the trailing slash or things get weird) so you might do:</p>
<pre><code>print(subprocess.check_output(['robocopy', r'\\172.21.81.23\c\media', r'\\172.21.81.10\c\media\videos']))
</code></pre>
</div>
<span class="comment-copy">This clarification should be in the python documents. I was wondering about splitting or not.</span>
<span class="comment-copy">See the <a href="https://docs.python.org/3/library/subprocess.html#frequently-used-arguments" rel="nofollow noreferrer">documentation of <code>Popen</code>'s <code>args</code></a>. Quoting: "should be a string, or a sequence of program arguments ... If passing a single string, either shell must be True (see below) or else the string must simply name the program to be executed without specifying any arguments."</span>
<span class="comment-copy">Running your exact code gives me <code>returned non-zero exit status 2</code></span>
<span class="comment-copy">Take a look at <a href="http://ss64.com/nt/robocopy-exit.html" rel="nofollow noreferrer">the docs on <code>robocopy</code>'s exit codes</a>. It looks like there were "extra" files detected; the log should give more information.</span>
