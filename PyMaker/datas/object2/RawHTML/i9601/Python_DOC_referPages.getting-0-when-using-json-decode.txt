<div class="post-text" itemprop="text">
<p>I am a beginner in Django as well as Python.</p>
<p>I first generate 50 random numbers and store them in a list and then in a text field in model User.</p>
<pre><code>def generate(request, user_id):
    easy = [] * 55
    cnt = 0
    while cnt &lt; 50:
        random_id = random.randint(1, 200)
        if random_id not in easy:
            easy.append(random_id)
            cnt += 1
    current_user = User.objects.get(pk=user_id)
    current_user.question_array = json.dumps(easy)
    return render(request, 'comp/question.html', {'easy': easy[0], 'question_id': 1,'user_id':user_id})
</code></pre>
<p>But when I try to retrieve the value from field I get only 0.</p>
<p>When I try to use it as a list it shows an error of "int object cannot be subscript".</p>
<p>This is the code to retrieve it:</p>
<pre><code>def next(request,user_id, question_id):
    current_user = User.objects.get(pk=user_id)
    jsonDec = json.decoder.JSONDecoder()
    easy = jsonDec.decode(current_user.question_array)
    return render(request, 'comp/question.html',
                  {'easy': easy, 'question_id': int(question_id) + 1,'user_id':user_id})
</code></pre>
<p>I have used the answer to <a href="https://stackoverflow.com/questions/1110153/what-is-the-most-efficent-way-to-store-a-list-in-the-django-models">this</a> question given by mindthief to store a list in a table.</p>
<p>Edit:</p>
<p>My main problem is that the list is not getting stored in database. Any ideas why?</p>
</div>
<div class="post-text" itemprop="text">
<p>You need to add a <code>.save()</code> call to save the data to the db:</p>
<pre><code>current_user = User.objects.get(pk=user_id)
current_user.question_array = json.dumps(easy)
current_user.save()
...
</code></pre>
<p>BTW, you can also use <a href="https://docs.python.org/3/library/random.html#random.sample" rel="nofollow noreferrer"><code>random.sample()</code></a>:</p>
<pre><code>easy = random.sample(range(200), 50)  # in python 2.x use xrange() 
</code></pre>
<p>and <code>json.loads()</code>:</p>
<pre><code>easy = json.loads(current_user.question_array)
</code></pre>
<p>If you use PostgreSQL (highly recommended) you can even use a <a href="https://docs.djangoproject.com/en/1.10/ref/contrib/postgres/fields/#jsonfield" rel="nofollow noreferrer">JsonField</a>.</p>
<p>And finally, if the questions are stored in another model (<code>Question</code>), consider using a <code>ManyToManyField</code> instead.</p>
</div>
<span class="comment-copy">i don't know much about database. Just started learning from youtube from thenewboston django tutorials. So dont know anything about sqlite3 or PostgresSQL. Thanks for random.sample really helped me reduce the code!</span>
