<div class="post-text" itemprop="text">
<p>I wrote a program in Python 3 with bs4 to get the subcategories of Wikipedia successfully. Now, I can see the results as print, but I am unable to write the results in a file.</p>
<pre><code>from bs4 import BeautifulSoup
import requests
import csv

url = 'https://en.wikipedia.org/wiki/Category:proprietary software'
content = requests.get(url).content
soup = BeautifulSoup(content,'lxml')
noOFsubcategories = soup.find('p')
print('------------------------------------------------------------------') 
print(noOFsubcategories.text+'------------------------------------------------------------------')
tag = soup.find('div', {'class' : 'mw-category'})
links = tag.findAll('a')
#print(links)

counter = 1
for link in links:
    print ( str(counter) + "  " + link.text)
    counter = counter + 1

with open('subcategories.csv', 'a') as f:
    f.write(links)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>just a little change, put write under the loop, and each loop will write a link to file</p>
<pre><code>counter = 1
for link in links:
    print ( str(counter) + "  " + link.text)
    counter = counter + 1
    with open('subcategories.csv', 'a') as f:
        f.write(link['href'].split(':')[1]+'\n')
</code></pre>
<p>out:</p>
<pre><code>/wiki/Category:Formerly_proprietary_software
/wiki/Category:Freeware
/wiki/Category:Oracle_software
/wiki/Category:Proprietary_cross-platform_software
/wiki/Category:Proprietary_database_management_systems
/wiki/Category:Proprietary_operating_systems
/wiki/Category:Proprietary_version_control_systems
/wiki/Category:Proprietary_wiki_software
/wiki/Category:Shareware
/wiki/Category:VMware
/wiki/Category:Warez
</code></pre>
<p>better:</p>
<pre><code># do not need to open file in each loop, just put it above loop
counter = 1
with open('subcategories.csv', 'a') as f:
    for link in links:
        print ( str(counter) + "  " + link.text)
        counter = counter + 1
        f.write(link['href']+'\n')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>First of all, initialize a list of lists with indexes and link texts and then use the <a href="https://docs.python.org/3/library/csv.html#csv.writer" rel="nofollow noreferrer"><code>csv.writer</code></a> to write to a csv file. Note the use of <a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow noreferrer"><code>enumerate()</code></a> below:</p>
<pre><code>links = [[index, a.get_text()] for index, a in enumerate(tag.find_all('a'), start=1)]

with open('subcategories.csv', 'a') as f:
    writer = csv.writer(f)
    writer.writerows(links)
</code></pre>
<hr/>
<p>And, you can improve the way you are locating the subcategories by using a single <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors" rel="nofollow noreferrer">CSS selector</a>:</p>
<pre><code>soup.select("div.mw-category a")
</code></pre>
<hr/>
<p>The complete code I'm executing:</p>
<pre><code>import csv

from bs4 import BeautifulSoup
import requests


url = 'https://en.wikipedia.org/wiki/Category:proprietary software'
content = requests.get(url).content
soup = BeautifulSoup(content, 'lxml')
noOFsubcategories = soup.find('p')

tag = soup.find('div', {'class': 'mw-category'})

links = [[index, a.get_text()] for index, a in enumerate(tag.find_all('a'), start=1)]

with open('subcategories.csv', 'a') as f:
    writer = csv.writer(f)
    writer.writerows(links)
</code></pre>
<p>After running this code the contents of <code>subcategories.csv</code> would be:</p>
<pre><code>1,Formerly free software
2,Formerly proprietary software
3,Freeware
4,Oracle software
5,Proprietary cross-platform software
6,Proprietary database management systems
7,Proprietary operating systems
8,Proprietary version control systems
9,Proprietary wiki software
10,Shareware
11,VMware
12,Warez
</code></pre>
</div>
<span class="comment-copy">Could you be more precise about the problem. What happens? What did you expect instead?</span>
<span class="comment-copy">when i execute the above code in python3, the output file is empty. so, i posted the above question.</span>
<span class="comment-copy">i solved the issue by the following answers and get informed as a learner.  sorry for my English. i never no to type except my language.</span>
<span class="comment-copy">how to get the above out, without "/wiki/Category:" ?</span>
<span class="comment-copy">I update my code</span>
<span class="comment-copy">wow! how simple!! i used to remove the data by this method. filedata = filedata.replace('/wiki/wiki/Category:', '') Thanks indeed brother!.</span>
<span class="comment-copy">but the first line of the output file is as follows. "F,o,r,m,e,r,l,y, ,f,r,e,e, ,s,o,f,t,w,a,r,e"  how can i avoid the commas?</span>
<span class="comment-copy">@info-farmer are you sure you've used <code>writerows()</code>?</span>
<span class="comment-copy">@info-farmer I've updated with the complete code I'm executing. Hope that helps.</span>
<span class="comment-copy">i am learning python 3 for the past one week. I am from non computer science background. i learned about 'the use of enumerate()' thanks for the above guide lines.</span>
