<div class="post-text" itemprop="text">
<p>I tried a few searches but I didn't really know how to ask. I understand short form for loops but this portion within a dictionary is confusing me.</p>
<pre><code>resistances = {k: v if random.random() &gt; self.mutProb else
    not v for k, v in self.resistances.items()}
</code></pre>
<p>Is it setting <code>k</code> as the key initially and then cycling through it later on? I'm having difficulty imagining what the 'long hand' would be.</p>
</div>
<div class="post-text" itemprop="text">
<p>You have a <em>dictionary comprehension</em>, and for each iteration of the <code>for</code> loop, <strong>two</strong> expressions are executed. One for the key, and one for the value.</p>
<p>So in the expression:</p>
<pre><code>{k: v if random.random() &gt; self.mutProb else not v
 for k, v in self.resistances.items()}
</code></pre>
<p>both <code>k</code> and <code>v if random.random() &gt; self.mutProb else not v</code> are expressions, and the first produces the key, the second the value of each key-value pair for the resulting dictionary.</p>
<p>If you were to use a <code>for</code> loop, the above would be implemented as:</p>
<pre><code>resistances = {}
for k, v in self.resistances.items():
    key = k
    value = v if random.random() &gt; self.mutProb else not v
    resistances[key] = value
</code></pre>
<p>In your example, the key is simply set to the value of the variable <code>k</code>, but you can use more complex expressions too.</p>
<p>Dictionary comprehensions are a specialisation of <a href="https://docs.python.org/3/reference/expressions.html#dictionary-displays" rel="nofollow noreferrer"><em>Dictionary Displays</em></a>; the other form produces a dictionary without looping, from a static list of key-value pairs, and is perhaps more familiar to you:</p>
<pre><code>d = {key1: value1, key2: value2}
</code></pre>
<p>but the documentation states:</p>
<blockquote>
<p>A dict comprehension, in contrast to list and set comprehensions, needs two expressions separated with a colon followed by the usual “for” and “if” clauses. When the comprehension is run, the resulting key and value elements are inserted in the new dictionary in the order they are produced.</p>
</blockquote>
</div>
<span class="comment-copy">This is called a dictionary comprehension, or dict-comp for short. It follows the same conceptual ideas behind a list-comp. Check <a href="http://stackoverflow.com/q/3766711/198633">this</a> out</span>
<span class="comment-copy">Wow... amazing response. Cheers!</span>
