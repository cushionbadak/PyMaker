<div class="post-text" itemprop="text">
<p>I have a table with 2 columns: student_ids and teacher_ids.I want to take a list of student_id let's say student_ids = [1,2,3,4,5,6] and a teacher id: teacher_id = 2 and add them to my table.What is the best option?I have to create a list of objects: </p>
<p>obj1.student_id = 1</p>
<p>obj1.teacher_id = 2</p>
<p>obj2.student_id = 2</p>
<p>obj2.teacher_id = 2</p>
<p>etc...</p>
<p>then add_all()</p>
<p>Is there any better way?I am new to sqlalchemy and i didn't find any solution in documentation.</p>
</div>
<div class="post-text" itemprop="text">
<p>If you're using the SQLAlchemy ORM, you can use Python's <a href="https://docs.python.org/3/library/itertools.html#itertools.product" rel="nofollow noreferrer">itertools.product</a> to simplify the assignment:</p>
<pre><code>from itertools import product

# assuming teacher_obj, student_obj, and db is already created here
teacher_ids = [1, 2]      # just as an example
student_ids = [1, 2, 3, 4, 5, 6]    # ditto
for tid, sid in product(teacher_ids, student_ids):
    teacher_obj.id = tid
    student_obj.id = sid

db.session.commit()
</code></pre>
<p>If you're on SQLAlchemy Core, you can use the connection's <code>execute</code> method:</p>
<pre><code>conn = engine.connect()

ins = users.insert()
conn.execute(
    users.insert(),
    [{"teacher_id": 1, "student_id": 2},
     {"teacher_id": 1, "student_id": 3}])
</code></pre>
<p>Of course, that assumes you have done the necessary setup, for example:</p>
<pre><code>from sqlalchemy import create_engine, Column, Integer, Table, MetaData

engine = create_engine('sqlite:///:memory:', echo=True)
metadata = MetaData()

users = Table('users', metadata,
              Column('teacher_id', Integer),
              Column('student_id', Integer))

metadata.create_all(engine)
conn = engine.connect()
</code></pre>
</div>
