<div class="post-text" itemprop="text">
<p>I'm trying to test if a simple list of urls exists, the code works when I'm just testing one url, but when I try add a array of urls, it's breaks. </p>
<p>Any idea what i'm doing wrong? </p>
<p><strong>Single URL Code</strong></p>
<pre><code>import httplib
c = httplib.HTTPConnection('www.example.com')
c.request("HEAD", '')
if c.getresponse().status == 200:
   print('web site exists')
</code></pre>
<p><strong>Broken Array Code</strong></p>
<pre><code>import httplib
Urls = ['www.google.ie', 'www.msn.com', 'www.fakeniallweb.com', 'www.wikipedia.org', 'www.galwaydxc.com', 'www.foxnews.com', 'www.blizzard.com', 'www.youtube.com']
for x in Urls:
    c = httplib.HTTPConnection(x)
    c.request("HEAD", '')
    if c.getresponse().status == 200:
        print('web site exists')
    else:
        print('web site' + x + 'un-reachable')

#To prevent code from closing
input ()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The problem is not that you do it as an array, it is that one of your urls (www.fakeniallweb.com) has a different problem than your other urls.</p>
<p>I think because the DNS cannot be resolved, you cannot request the HEAD as you do. So you need an additional check other than just checking for response code 200.</p>
<p>Maybe you could do something like this:</p>
<pre><code>try:
c.request("HEAD", '')
if c.getresponse().status == 200:
    print('web site exists')
else:
    print('website does not exist')
except gaierror as e:
    print('Error resolving DNS')
</code></pre>
<p>Honestly I suspect you will find other cases where a website returns different status codes. For example a website might return something in the 3xx range for a redirect, or a 403 if you cannot access it. That does not mean the website does not exist.</p>
<p>Hope this helps you on your way!</p>
</div>
<div class="post-text" itemprop="text">
<p>@Dries De Rydt</p>
<p>Thanks for your help , it was a unresolved dns error causing it to crash out. </p>
<p>I ended up <a href="https://docs.python.org/3/library/socket.html#socket.gethostbyname" rel="nofollow noreferrer">Lib/socket.py</a></p>
<p><strong>solution</strong></p>
<pre><code>import socket
Urls = ['www.google.ie', 'www.msn.com', 'www.fakeniallweb.com', 'www.wikipedia.org', 'www.galwaydxc.com', 'www.foxnews.com', 'www.blizzard.com', 'www.youtube.com']
for x in Urls:
    try:
        url = socket.gethostbyname(x)
        print x + ' was reachable '
    except socket.gaierror, err:
        print "cannot resolve hostname: ", x, err
#To prevent code from closing
input ()
</code></pre>
<p>Thanks for all the help.</p>
</div>
<span class="comment-copy">What error are you getting?</span>
<span class="comment-copy">Also it's better if you use real variable names in SO as a courtesy to others.</span>
