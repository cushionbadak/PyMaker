<div class="post-text" itemprop="text">
<p>Ive been trying to create a profile page for a project, where the user can upload a profile pic and some basic personal information using Django as framework.</p>
<p>The text based information I pass in my code seem to work, but I cant get the user to upload a profile pic from the profile page. But if I go to django-admin page, I can upload and display the profile pic from there. So to models.py file seem to work, and the issue seem to be in forms.py file... Ive search the net for some time and various turtorials, but nothing seem to work. Please help :)</p>
<p>models.py file</p>
<pre><code>class Profile(models.Model):
user = models.OneToOneField(User, on_delete=models.CASCADE)
bio = models.TextField(max_length=500, blank=True)
location = models.CharField(max_length=30, blank=True)
birth_date = models.DateField(null=True, blank=True)
email_confirmed = models.BooleanField(default=False)
image= models.ImageField(upload_to='profile_image', blank=True)

def __str__(self):
    return self.user.username
</code></pre>
<p>forms.py file </p>
<pre><code>class ProfileUpdateForm(forms.ModelForm):
YEARS= [x for x in range(1900,2021)]
birth_date = forms.DateField( initial="21-06-1995", widget=forms.SelectDateWidget(years=YEARS))
image = models.ImageField(upload_to='profile_image',blank=True)
class Meta:
    model = Profile
    fields = ('bio','birth_date','location','image')
</code></pre>
<p>views.py file </p>
<pre><code>@login_required
def profile_edit(request):
form = ProfileUpdateForm(request.POST)

if request.method == 'POST':

    if form.is_valid():
        user = request.user
        user.profile.bio = form.cleaned_data.get("bio")
        user.profile.birth_date = form.cleaned_data.get("birth_date")
        user.profile.location = form.cleaned_data.get("location")
        user.save()
        return redirect('profile')
    else:
        form = ProfileUpdateForm()

context = {
    'form' : form

}
return render(request, 'webside/profile_edit.html', context)
</code></pre>
<p>Static root/url and Media root/url has been implemented in settings and Ive added the static url to the urls.py file. Any help would be greatly appreciated :)</p>
</div>
<div class="post-text" itemprop="text">
<p>You're only passing the data to the form, not the files:</p>
<pre><code>form = ProfileUpdateForm(request.POST)
</code></pre>
<p>Change to:</p>
<pre><code>form = ProfileUpdateForm(data=request.POST, files=request.FILES)
</code></pre>
<p>And save your form instead of assigning the data to a <code>user</code> object. You're not saving the <code>user.profile</code> when you do <code>user.save()</code>:</p>
<pre><code>profile = form.save(commit=False)
profile.user = request.user
profile.save()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You did not save your image in view after posting from your form object. You save it like this if form is valid</p>
<pre><code>if 'image' in request.FILES:

            user.profile.image = request.FILES['image']
</code></pre>
</div>
<span class="comment-copy">Read <a href="https://docs.djangoproject.com/en/2.1/topics/http/file-uploads/" rel="nofollow noreferrer">this</a>. You'll learn how to pass the files to your form and how to save your form.</span>
<span class="comment-copy">But equally as bad, OP is not using the form.save().</span>
<span class="comment-copy">Thanks for the help! :D</span>
<span class="comment-copy">Wow! Thank you so much!! That fixed it :DDD</span>
