<div class="post-text" itemprop="text">
<p>My code works, and asks to name the file, and how many numbers. But it just keeps asking for numbers, and if I put zero then it does what it is supposed to do. any help at all is appreciated very much. I just don't know how to fix the code, and it is really bugging me.</p>
<pre><code>import random
def generateRandomNumber(myfile):
    try:
        fileToBeWrittenTo = open(myfile,"w")
        numberOfRandomNumbers = int(input("How many numbers" + \
                                      " should the random file hold?:" ))
    except Exception as potentialError:
        print("An error has occured:", potentialError )
    else:
        for randomNumberCount in range(1, numberOfRandomNumbers + 1 ):
            randomNumber = generateRandomNumber(myfile)
            fileToBeWrittenTo.write(str( randomNumber ) + '\n' )
        print( numberOfRandomNumbers, "numbers have been written" + \
               " to the file ")
    finally:
        fileToBeWrittenTo.close()
        print("\nEnd of program")
    displayNumber(myfile)
    randomNumber = random.randint(1,500)
    return randomNumber

def main():
    myfile = str(input("Enter file name here "))
    with open(myfile, 'w+') as f:
        generateRandomNumber(myfile)

    return f
    myfile.close    

def displayNumber(myfile):
    try:
        myfile = open(myfile,'r')
        total = 0
        NORN = 0
        Avg = 0
        line = myfile.readline()
        while line != "":
            randomNumber = int(line)
            total += randomNumber
            NORN += 1
            Avg = total / NORN
            print( randomNumber )
        line = myfile.readline()
    except IOError:
        print("Problem with file being opened")
    else:
        print("The average of the numbers is " + str(Avg))
        print("The total of all the numbers is " + str(total)+\
          "\nThere are " + str(NORN)+\
          " in the file")
        myfile.close()
    finally:
        print("End of program")

main()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The <code>generateRandomNumber</code> function calls itself recursively in the <code>randomNumber = generateRandomNumber(myfile)</code> statement, which is skipped if you input a 0.</p>
<p>Also, your <code>main</code> contains an unused <code>with open</code> and the <code>myfile.close</code> statement is neither executed nor needed. Try shortening it.</p>
<pre><code>def main():
    myfile = str(input("Enter file name here "))
    generateRandomNumber(myfile)
</code></pre>
<p>You can also simplify the <code>generateRandomNumber</code> and <code>displayNumber</code> functions significantly by using <a href="https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files" rel="nofollow noreferrer">with open</a>.</p>
<blockquote>
<p>It is good practice to use the <em>with</em> keyword when dealing with file
  objects. The advantage is that the file is properly closed after its
  suite finishes, even if an exception is raised at some point. Using
  <em>with</em> is also much shorter than writing equivalent try-finally blocks</p>
</blockquote>
<p>Finally, <code>displayNumber</code> contains an infinite loop, try indenting the second <code>line = myfile.readline()</code> one step or rewrite the function to read the full file at once and use a simple <code>for</code> loop.</p>
<pre><code>with open(myfile) as myfilehandle:
    lines = myfilehandle.readlines()

for line in lines:
    # do things
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>using <code>try-except-else-finally</code> is good but I see it make you confused, try to learn <code>try-except</code> first.</p>
<p>you have no ending loop in</p>
<pre><code>def generateRandomNumber(myfile):
    ....
            randomNumber = generateRandomNumber(myfile)
</code></pre>
<p>and</p>
<pre><code>while line != "":
    ....
    print( randomNumber )
line = myfile.readline()
</code></pre>
<p>it should be</p>
<pre><code>while line != "":
    ....
    print( randomNumber )
    line = myfile.readline()
</code></pre>
<p>And here your working code</p>
<pre><code>import random

def generateRandomNumber():
    randomNumber = random.randint(1,500)
    return randomNumber

def writeRandom(myfile):
    try:
        fileToBeWrittenTo = open(myfile, "w")
        numberOfRandomNumbers = int(input("How many numbers" + \
                                      " should the random file hold?:" ))
    except Exception as potentialError:
        print("An error has occured:", potentialError )
    else:
        for randomNumberCount in range(1, numberOfRandomNumbers + 1 ):
            randomNumber = generateRandomNumber()
            fileToBeWrittenTo.write(str( randomNumber ) + '\n' )
        print( numberOfRandomNumbers, "numbers have been written" + \
               " to the file ")
        fileToBeWrittenTo.close()
        displayNumber(myfile)
    finally:
        print("\nEnd of program")

def main():
    myfile = str(input("Enter file name here "))
    writeRandom(myfile)  

def displayNumber(myfile):
    try:
        my_file = open(myfile,'r')
        total = 0
        NORN = 0
        Avg = 0
        line = my_file.readline()
        while line != "":
            randomNumber = int(line)
            total += randomNumber
            NORN += 1
            Avg = total / NORN
            print( randomNumber )
            line = my_file.readline()
    except IOError:
        print("Problem with file being opened")
    else:
        print("The average of the numbers is " + str(Avg))
        print("The total of all the numbers is " + str(total)+\
          "\nThere are " + str(NORN)+\
          " in the file")
        my_file.close()
    finally:
        print("End of program")

main()
</code></pre>
</div>
<span class="comment-copy">Please fix your python indentation</span>
<span class="comment-copy">So I fixed that. I got rid of it. and now the code works, but when I put a number in it turns to an ifinite loop</span>
<span class="comment-copy">If I put a 0 in, it does not go as an ifinite loop. Do I need to get rid of the randomNumber = generateRandomNumber(myfile)  completly or modify it?</span>
<span class="comment-copy">It looks like you are keeping <code>myfile</code> open by switching between <code>with open</code> statements and regular <code>open</code> statements. The <code>with open</code> in <code>main</code> will not close the file until the function returns.</span>
<span class="comment-copy">So I assume I need to change it to a regular open.</span>
<span class="comment-copy">I have updated my answer with an example <code>main</code>. You probably should simplify <code>generateRandomNumber</code> by using <code>with open</code> to make the code easier to follow.</span>
