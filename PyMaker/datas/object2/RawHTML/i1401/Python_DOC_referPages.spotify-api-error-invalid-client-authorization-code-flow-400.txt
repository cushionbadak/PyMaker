<div class="post-text" itemprop="text">
<p>This is one of my many attempts at making a POST request to <a href="https://accounts.spotify.com/api/token" rel="nofollow noreferrer">https://accounts.spotify.com/api/token</a>. </p>
<p>Scope was set to 'playlist-modify-public, playlist-modify-private'.</p>
<p>I'm using Python 3.7, Django 2.1.3.</p>
<p>No matter what I do, response_data returns {'error': 'invalid_client'}</p>
<p>I've tried many things, including passing the client_id/client_secret inside the body of the request as per the <a href="https://developer.spotify.com/documentation/general/guides/authorization-guide/" rel="nofollow noreferrer">official Spotify documentation</a> for this particular request... to no avail. </p>
<p>Please help!</p>
<pre><code>def callback(request):

    auth_token = request.GET.get('code')     # from the URL after user has clicked accept
    code_payload = {
        'grant_type': 'authorization_code',
        'code': str(auth_token),
        'redirect_uri': REDIRECT_URI,
    }

    auth_str = '{}:{}'.format(CLIENT_ID, CLIENT_SECRET)
    b64_auth_str = base64.b64encode(auth_str.encode()).decode()

    headers = {
        'Content-Type': 'application/x-www-form-urlencoded',
        'Authorization': 'Basic {}'.format(b64_auth_str)
    }

    post_request = requests.post(SPOTIFY_TOKEN_URL, data=code_payload, headers=headers)

    response_data = json.loads(post_request.text)
        # ==&gt; {'error': 'invalid_client'}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I suspect the issue is with invalid characters in your <code>Authorization</code> header. Try using <a href="https://docs.python.org/3/library/base64.html#base64.urlsafe_b64encode" rel="nofollow noreferrer"><code>urlsafe_b64encode</code></a> instead of <code>b64encode</code> to prepare that header value:</p>
<pre><code>b64_auth_str = base64.urlsafe_b64encode(auth_str.encode()).decode()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Thanks for your response @solarissmoke! I found out what was wrong... I had reset my Spotify client_secret on the Spotify Dashboard and completely forgot to modify my code accordingly... I feel real smart :|</p>
</div>
