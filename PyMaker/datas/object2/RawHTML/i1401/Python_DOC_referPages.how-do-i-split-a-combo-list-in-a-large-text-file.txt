<div class="post-text" itemprop="text">
<p>my problem is that I have a very large database of emails and passwords and I need to send it to a mysql database.</p>
<p>The .txt file format is something like this:</p>
<pre><code>emailnumberone@gmail.com:password1
emailnumbertwo@gmail.com:password2
emailnumberthree@gmail.com:password3
emailnumberfour@gmail.com:password4
emailnumberfive@gmail.com:password5
</code></pre>
<p>My idea is to make a loop that takes the line and make it a variable, search the ":" and pick the text before, send it to the db and then the same with the after part of the line. How do I do this?</p>
</div>
<div class="post-text" itemprop="text">
<p>Short program with some error handling:</p>
<p>Create demo data file:</p>
<pre><code>t = """
emailnumberone@gmail.com:password1
emailnumbertwo@gmail.com:password2
emailnumberthree@gmail.com:password3
emailnumberfour@gmail.com:password4
emailnumberfive@gmail.com:password5
k
: """

with open("f.txt","w") as f: f.write(t)
</code></pre>
<p>Parse data / store:        </p>
<pre><code>def store_in_db(email,pw):
    # replace with db access code 
    # see    http://bobby-tables.com/python
    # for parametrized db code in python (or the API of your choice)
    print("stored: ", email, pw)


with open("f.txt") as r:
    for line in r:
        if line.strip():  # weed out empty lines
            try:
                email, pw = line.split(":",1) # even if : in pw: only split at 1st :
                if email.strip() and pw.strip(): # only if both filled
                    store_in_db(email,pw)
                else:
                    raise ValueError("Something is empty: '"+line+"'")

            except Exception as ex:
                print("Error: ", line, ex)
</code></pre>
<p>Output:</p>
<pre><code>stored:  emailnumberone@gmail.com password1

stored:  emailnumbertwo@gmail.com password2

stored:  emailnumberthree@gmail.com password3

stored:  emailnumberfour@gmail.com password4

stored:  emailnumberfive@gmail.com password5

Error:  k
 not enough values to unpack (expected 2, got 1)
Error:  :  Something is empty: ': '
</code></pre>
<hr/>
<p>Edit: According to <a href="https://stackoverflow.com/questions/2049502/what-characters-are-allowed-in-an-email-address">What characters are allowed in an email address?</a> - a <code>':'</code> may be part of the first part of an email if quoted. </p>
<p>This would theoretically allow inputs as </p>
<pre><code>`"Cool:Emailadress@google.com:coolish_password"` 
</code></pre>
<p>which will get errors with this code. See <a href="https://stackoverflow.com/a/53548860/7505395">Talip Tolga Sans answer</a> for how to break down the splitting differently to avoid this problem. </p>
</div>
<div class="post-text" itemprop="text">
<p>This can be done through simple <code>split()</code> method of the strings in python.</p>
<pre><code>&gt;&gt;&gt; a = 'emailnumberone@gmail.com:password1'
&gt;&gt;&gt; b = a.split(':')
&gt;&gt;&gt; b
['emailnumberone@gmail.com', 'password1']
</code></pre>
<p>To accomodate  @PatrickArtner's complex password fail this can be done:</p>
<pre><code>atLocation = a.find('@')
realSeperator = atLocation + a[atLocation:].find(':')
emailName = a[0:atLocation]
emailDomain = a[atLocation:realSeperator]
email = emailName + emailDomain
password = a[realSeperator + 1:]

print(email, password)

&gt;&gt;&gt; emailnumberone@gmail.com com:plex:PassWord:fail
</code></pre>
<p>str.find() returns the first occurrence location of the given character in the given string. Emails can have <code>:</code> in their name field but they can not have <code>@</code>. So first locating the <code>@</code> then locating the <code>:</code> would give you the correct separation locations. After that splitting the string will be piece of cake.</p>
</div>
<div class="post-text" itemprop="text">
<p>Open file as context manager (with open(...)), You can iterate over the lines with a for loop, then regex match(re Module)(or just split on ":") and use sqlite3 to insert your values to DB.</p>
<p>So the file:</p>
<pre><code>with open("file.txt", "r") as f:
    for line in f:
        pass #manipulation
</code></pre>
<p>Sqlite3 Docs: <a href="https://docs.python.org/2/library/sqlite3.html" rel="nofollow noreferrer">https://docs.python.org/2/library/sqlite3.html</a></p>
</div>
<span class="comment-copy">what is your problem? splitting? db-access? storage? file reading?</span>
<span class="comment-copy">splitting @PatrickArtner</span>
<span class="comment-copy"><code>'emailnumberone@gmail.com:com:plex:PassWord:fail'</code></span>
<span class="comment-copy">@PatrickArtner Thanks for the mental workout :)</span>
<span class="comment-copy"><code>b = a.split(':',1)</code> ?   <a href="https://docs.python.org/3/library/stdtypes.html#str.split" rel="nofollow noreferrer">docs.python.org/3/library/stdtypes.html#str.split</a>  - I was more concerned about a password having a <code>:</code> in it .. I am unsure wether emails can actually contain a <code>:</code> - seems they could if quoted: <a href="https://stackoverflow.com/questions/2049502/what-characters-are-allowed-in-an-email-address" title="what characters are allowed in an email address">stackoverflow.com/questions/2049502/â€¦</a></span>
<span class="comment-copy">from  <a href="https://en.wikipedia.org/wiki/Email_address" rel="nofollow noreferrer">wiki page</a> it says this about the local part so I made sure first  ':' is not in the local part "space and "(),:;&lt;&gt;@[] characters are allowed with restrictions (they are only allowed inside a quoted string, as described in the paragraph below, and in addition, a backslash or double-quote must be preceded by a backslash);" However your solution is more elegant then mine</span>
<span class="comment-copy">but the simple split(":",1) is less exact - it does not allow for any ":" in the local part even if quoted - yours got my upvote</span>
