<div class="post-text" itemprop="text">
<p>I'm trying to install twisted 
    pip install <a href="https://pypi.python.org/packages/18/85/eb7af503356e933061bf1220033c3a85bad0dbc5035dfd9a97f1e900dfcb/Twisted-16.2.0.tar.bz2#md5=8b35a88d5f1a4bfd762a008968fddabf" rel="nofollow">https://pypi.python.org/packages/18/85/eb7af503356e933061bf1220033c3a85bad0dbc5035dfd9a97f1e900dfcb/Twisted-16.2.0.tar.bz2#md5=8b35a88d5f1a4bfd762a008968fddabf</a></p>
<p>This is for a <code>django-channels</code> project and I'm having the following error problem</p>
<pre><code>Exception:
Traceback (most recent call last):
  File "/home/petarp/.virtualenvs/ErasmusCloneFromGitHub/lib/python3.5/tarfile.py", line 1655, in bz2open
    import bz2
  File "/usr/local/lib/python3.5/bz2.py", line 22, in &lt;module&gt;
    from _bz2 import BZ2Compressor, BZ2Decompressor
ImportError: No module named '_bz2'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/petarp/.virtualenvs/CloneFromGitHub/lib/python3.5/site-packages/pip/basecommand.py", line 215, in main
    status = self.run(options, args)
  File "/home/petarp/.virtualenvs/ErasmusCloneFromGitHub/lib/python3.5/site-packages/pip/commands/install.py", line 310, in run
    wb.build(autobuilding=True)
  File "/home/petarp/.virtualenvs/ErasmusCloneFromGitHub/lib/python3.5/site-packages/pip/wheel.py", line 750, in build
    self.requirement_set.prepare_files(self.finder)
  File "/home/petarp/.virtualenvs/ErasmusCloneFromGitHub/lib/python3.5/site-packages/pip/req/req_set.py", line 370, in prepare_files
    ignore_dependencies=self.ignore_dependencies))
  File "/home/petarp/.virtualenvs/ErasmusCloneFromGitHub/lib/python3.5/site-packages/pip/req/req_set.py", line 587, in _prepare_file
    session=self.session, hashes=hashes)
  File "/home/petarp/.virtualenvs/ErasmusCloneFromGitHub/lib/python3.5/site-packages/pip/download.py", line 810, in unpack_url
    hashes=hashes
  File "/home/petarp/.virtualenvs/ErasmusCloneFromGitHub/lib/python3.5/site-packages/pip/download.py", line 653, in unpack_http_url
    unpack_file(from_path, location, content_type, link)
  File "/home/petarp/.virtualenvs/ErasmusCloneFromGitHub/lib/python3.5/site-packages/pip/utils/__init__.py", line 605, in unpack_file
    untar_file(filename, location)
  File "/home/petarp/.virtualenvs/ErasmusCloneFromGitHub/lib/python3.5/site-packages/pip/utils/__init__.py", line 538, in untar_file
    tar = tarfile.open(filename, mode)
  File "/home/petarp/.virtualenvs/ErasmusCloneFromGitHub/lib/python3.5/tarfile.py", line 1580, in open
    return func(name, filemode, fileobj, **kwargs)
  File "/home/petarp/.virtualenvs/ErasmusCloneFromGitHub/lib/python3.5/tarfile.py", line 1657, in bz2open
    raise CompressionError("bz2 module is not available")
tarfile.CompressionError: bz2 module is not available
</code></pre>
<p>Clearly I'm missing <code>bz2</code> module, so I've tried to installed it manually, but that didn't worked out for <code>python 3.5</code>, so how can I solved this?</p>
<p>I've did what @e4c5 suggested but I did it for <code>python3.5.1</code>, the output is</p>
<pre><code>➜  ~ python3.5                               
Python 3.5.1 (default, Apr 19 2016, 22:45:11) 
[GCC 4.8.4] on linux
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import bz2
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/usr/local/lib/python3.5/bz2.py", line 22, in &lt;module&gt;
    from _bz2 import BZ2Compressor, BZ2Decompressor
ImportError: No module named '_bz2'
&gt;&gt;&gt; 
[3]  + 18945 suspended  python3.5
➜  ~ dpkg -S /usr/local/lib/python3.5/bz2.py
dpkg-query: no path found matching pattern /usr/local/lib/python3.5/bz2.py
</code></pre>
<p>I am on Ubuntu 14.04 LTS and I have installed python 3.5 from source.</p>
</div>
<div class="post-text" itemprop="text">
<p>I don't seem to have any problem with <code>import bz2</code> on my python 3.4 installation. So I did </p>
<pre><code>import bz2
print (bz2.__file__)
</code></pre>
<p>And found that it's located at <code>/usr/lib/python3.4/bz2.py</code> then I did</p>
<pre><code>dpkg -S /usr/lib/python3.4/bz2.py
</code></pre>
<p>This reveals:</p>
<blockquote>
<p>libpython3.4-stdlib:amd64: /usr/lib/python3.4/bz2.py</p>
</blockquote>
<p>Thus the following command should hopefully fix this:</p>
<pre><code>apt-get install libpython3.4-stdlib
</code></pre>
<p><strong>Update:</strong></p>
<p>If you have compiled python 3.5 from sources, it's very likely the bz2 hasn't been compiled in. Please reinstall by first doing</p>
<pre><code>./configure --with-libs='bzip' 
</code></pre>
<p>The same applies for python 3.6 as well. Note that this will probably complain about other missing dependencies. You will have to install the missing dependencies one by one until everything is covered.</p>
</div>
<div class="post-text" itemprop="text">
<p>I was able to solve it by removing the <code>_</code> and changing the import to </p>
<pre><code>from bz2 import BZ2Compressor, BZ2Decompressor
</code></pre>
</div>
<span class="comment-copy">how did you try to install it manually and what is meant by it didn't work out?</span>
<span class="comment-copy">maybe I didn't expressed it well, by manually I mean that I've installed it with <code>sudo apt-get install libbz2-dev</code>, but that didn't installed it for <code>python3.5</code>, I've still missing this module when I import it inside the python shell</span>
<span class="comment-copy">I've edited my question, I still have a problem with <code>python 3.5</code>, and yes this works for 3.4 version, and I have <code>bz2</code> on it</span>
<span class="comment-copy">what is your version of Ubuntu (or corresponding Ubuntu version for your distro)</span>
<span class="comment-copy">I'm using Ubuntu 14.04 tls</span>
<span class="comment-copy">but that comes wth python 3.4 if  am not mistaken. What was the process for your python 3.5 installation?</span>
<span class="comment-copy">I'm not understanding you well, I've installed python3.5 from the source, but should this module be in python3.5, it's in python3.4, and the docs covers it <a href="https://docs.python.org/3/library/bz2.html" rel="nofollow noreferrer">docs.python.org/3/library/bz2.html</a></span>
