<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/3304642/unit-test-problem-with-assertraises">Unit Test Problem with assertRaises</a>
<span class="question-originals-answer-count">
                    2 answers
                </span>
</li>
</ul>
</div>
<p>This code does not work as expected. I'm getting pass when expecting fail; and fail when expecting pass for assertRaises(). </p>
<p><code>test_db.py:</code></p>
<pre><code>import unittest

class TestConnectDatabase(unittest.TestCase):
    def test_close(self):
        self.assertRaises(ReferenceError, self.close_database()) # &lt;--- Problem #1
        pass

    # Just a stub for brevity...
    def close_database(self):
        #raise Exception(ReferenceError)                         # &lt;--- Problem #2
        pass

if __name__ == '__main__':
    unittest.main()
</code></pre>
<p>In this example the code passes the unit test even though the exception was not raised. If <code>#raise</code> is uncommented, the exception is just passed to command line and the test fails when it should pass.</p>
<p>Executing test using: 
<code>python -m test_db</code> or <code>python test_db.py</code></p>
</div>
<div class="post-text" itemprop="text">
<p>You're calling the method <code>self.close_database</code>, when you should just be passing a reference to it. Remove the parentheses e.g.</p>
<pre><code>def test_close(self):
    self.assertRaises(ReferenceError, self.close_database)
</code></pre>
<p>Check out <a href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertRaises" rel="nofollow">the docs</a> for more details.</p>
</div>
<div class="post-text" itemprop="text">
<p>Remove the parentheses after <code>self.close_database</code>:</p>
<pre><code>class TestConnectDatabase(unittest.TestCase):
    def test_close(self):
        self.assertRaises(ReferenceError, self.close_database)
        pass
</code></pre>
<p>You are calling <code>self.close_database</code> which means its result (<code>None</code>) gets passed to <code>assertRaises</code>. See the documentation for <a href="https://docs.python.org/2.7/library/unittest.html#unittest.TestCase.assertRaises]" rel="nofollow"><code>assertRaises</code></a>.</p>
</div>
<span class="comment-copy">@Mark, @DavidCullen: Making sure what's passed in is a reference seems to fix the issue of it not flagging the exception. However, if I uncomment <code>#raise Exception(ReferenceError)</code> the test still fails!? <code>Traceback (most recent call last):   File "C:\...\test_db.py", line 5, in test_close     self.assertRaises(ReferenceError, self.close_database)   File "C:\Anaconda2\lib\unittest\case.py", line 473, in assertRaises     callableObj(*args, **kwargs)   File "C:\...\test_db.py", line 9, in close_database     raise Exception(ReferenceError) Exception: &lt;type 'exceptions.ReferenceError'&gt;</code></span>
<span class="comment-copy">Have you tried <code>raise ReferenceError("This is an error.")</code> instead of <code>raise Exception(ReferenceError)</code>? @kashiraja</span>
<span class="comment-copy"><b>That does seems to work...awesome!</b> I'm really in new territory here.. Thx for your help!</span>
<span class="comment-copy">That's not a problem, happy to help!  :) @kashiraja</span>
<span class="comment-copy">@alecxe This question should probably not be marked duplicate anylonger?</span>
