<div class="post-text" itemprop="text">
<p>Is there any correct type hint to use for a file or file-like object in Python? For example, how would I type-hint the return value of this function?</p>
<pre><code>def foo():
    return open('bar')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use either the <code>typing.TextIO</code> or <code>typing.BinaryIO</code> types, for files opened in text mode or binary mode respectively.</p>
<p>From <a href="https://docs.python.org/3/library/typing.html#typing.io" rel="noreferrer">the docs</a>:</p>
<blockquote>
<h3><em>class</em> <code>typing.io</code></h3>
<p>Wrapper namespace for I/O stream types.</p>
<p>This defines the generic type <code>IO[AnyStr]</code> and aliases <code>TextIO</code> and <code>BinaryIO</code> for respectively <code>IO[str]</code> and <code>IO[bytes]</code>. These representing the types of I/O streams such as returned by <code>open()</code>.</p>
</blockquote>
</div>
<span class="comment-copy">Generically, maybe typing.IO as the type description?</span>
<span class="comment-copy">None of these seem to work for me: <code>def f() -&gt; IO: return open('test')</code> gives "Expected type 'IO', got 'TextIOWrapper[str]' instead" in PyCharm.</span>
<span class="comment-copy">@Marein what about <code>IO[str]</code>?</span>
<span class="comment-copy">The same I'm afraid. I'm also noticing that iterating over the lines in a file gives "Expected 'collections.iterable'".</span>
<span class="comment-copy">Reproduced @Marein's issue in PyCharm community 2017.2: <a href="https://i.imgur.com/Ai4sVQl.jpg" rel="nofollow noreferrer">i.imgur.com/Ai4sVQl.jpg</a></span>
