<div class="post-text" itemprop="text">
<p>I created the following program to try to work through what I believe to be a unicode issue:</p>
<pre><code>s = '7/02/16;07:30:00;São Paulo-8;Reachability: 18.5%'
s_type = type(s)
print ("variable s contains: ",s)
print ("variable s type is: ", s_type)
text_file = open("test_file.txt", "w")
text_file.write(s)
text_file.close()
</code></pre>
<p>The print statements provide the following output when the program is run:</p>
<pre class="lang-none prettyprint-override"><code>variable s contains:  7/02/16;07:30:00;São Paulo-8;Reachability: 18.5%
variable s type is:  &lt;class 'str'&gt;
</code></pre>
<p>When it comes time to write to the file, I get the following error:</p>
<pre class="lang-none prettyprint-override"><code>Traceback (most recent call last):
  File "/Users/tglund/Projects/Python/thousandeyes/unicode.py", line 6, in &lt;module&gt;
     text_file.write(s)
UnicodeEncodeError: 'ascii' codec can't encode character '\xe3' in position 18: ordinal not in range(128)
</code></pre>
<p>I have read the unicode documentation from beginning to end at <a href="https://docs.python.org/3/howto/unicode.html" rel="nofollow">https://docs.python.org/3/howto/unicode.html</a></p>
<p>but have not successfully cracked the code.</p>
<p>I can copy the string assigned to the variable <code>s</code> and paste it into a file, save the file, then 'more' the file. I am on a Mac, and the string shows on my screen correctly.  The Python print statement shows the string correctly.</p>
<p>My goal of all this is to create a csv text file where the delimiter is ";".  The issue appears to be the accented second character in the location field.  The string for <code>s</code> contains the following fields:  Date, Location, Message</p>
<p>Any assistance in how to resolve the issue would be greatly appreciated.</p>
</div>
<div class="post-text" itemprop="text">
<p>Your error can be reproduced, even on systems that have different defaults, with something like:</p>
<pre><code>text_file = open("test_file.txt", "w", encoding='ascii')
text_file.write('\xe3')
</code></pre>
<p>The issue is that your default text encoding is ascii.  Or at least that's what Python is understanding it to be.  See "encoding" under <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow"><code>open()</code></a>, and <a href="https://docs.python.org/3/library/locale.html#locale.getpreferredencoding" rel="nofollow"><code>locale.getpreferredencoding()</code></a>.</p>
<p>The easiest way to fix this is to tell Python to open your file with a compatible encoding.  For example UTF-8 (because your character is unicode encoded):</p>
<pre><code>text_file = open("test_file.txt", "w")
# Becomes
text_file = open("test_file.txt", "w", encoding='utf_8')
</code></pre>
<p>And you should be done.</p>
</div>
<span class="comment-copy">That did the trick and now I understand why.  Thank You.</span>
