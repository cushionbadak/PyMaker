<div class="post-text" itemprop="text">
<p>My goal is to use a code that another researcher gave to me. I am on Python 3.7 on Windows 10. I assume that the code is written for Python 2 and Linux OS. </p>
<p>I need to translate some of the old Python 2 commands to my new 3.7 version. I cannot use another Python version, or change my OS. I have started the job, and some of the translation are quite obvious, but I need your help for this one.</p>
<p>The old command is:</p>
<pre><code>subprocess.call(["cp", "-r", WD + "Albedo", WD + "CIE_data",
                 WD + "Gases", WD + "Solar", ProcessDir[ProcessNumber]])
</code></pre>
<p><code>WD</code> and <code>ProcessDir[ProcessNumber]</code> are both file paths. </p>
<p>I need a new command for Python 3.7 on Window 10. I assume that <code>"cp -r"</code> is equivalent to the Windows command <code>xcopy</code>, but my problem is the following: <code>WD + "Albedo"</code>, <code>+ "CIE_data"</code>, etc. How to <code>xcopy</code> several files in one command with <code>subprocess.call</code>?</p>
</div>
<div class="post-text" itemprop="text">
<p>Frankly, there's no good reason to use <em>any</em> OS-provided tool for this when Python's <code>shutil</code> module gives you an OS-independent way to copy a directory tree. Thus:</p>
<pre><code>import shutil, os.path

for subdir in ['Albedo' 'CIE_data' 'Gases', 'Solar']:
  shutil.copytree(os.path.join(WD, subdir),
                  os.path.join(ProcessDir[ProcessNumber], subdir))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I would seriously recommend not copying files like that. As you see in your current situation, you are not guaranteed to have the same program available on different machines. On the other hand, you have Python, which has all the cross-platform file-copying utilities you will likely need.</p>
<p>For generic file operations, the <a href="https://docs.python.org/3/library/shutil.html" rel="nofollow noreferrer"><code>shutil</code></a> module is your friend. In particular, <a href="https://docs.python.org/3/library/shutil.html#shutil.copytree" rel="nofollow noreferrer"><code>shutil.copytree</code></a> does what you want almost exactly. The only difference is that the destination may not already exist, and you have to copy one source folder at a time.</p>
<p>Another point is that you generally don't want to concatenate paths that may or may not contain a trailing slash with <code>+</code>. Use <a href="https://docs.python.org/3/library/os.path.html#os.path.join" rel="nofollow noreferrer"><code>os.join</code></a> instead. It will not only handle such differences, but make sure that the path separator it inserts is correct for your OS.</p>
<p>In total you have:</p>
<pre><code>from shutil import copytree
from os.path import join

for folder in ('Albedo', 'CIE Data', 'Gasses', 'Solar'):
    copytree(join(WD, folder), join(ProcessDir[ProcessNumber], folder))
</code></pre>
<p>If something goes wrong along the way, you may want to pre-clean your output using <a href="https://docs.python.org/3/library/shutil.html#shutil.rmtree" rel="nofollow noreferrer"><code>shutil.rmtree</code></a>. Before calling <code>copytree</code>, do</p>
<pre><code>rmtree(join(ProcessDir[ProcessNumber], folder), ignore_errors=True)
</code></pre>
</div>
<span class="comment-copy">Showing what you tried <i>and how it failed</i> (meaning the specific error message you get from xcopy, or the exception you get when trying to use it if an exception is thrown) would be helpful. Also, keep in mind that many of your readers here in the Python tag are not Windows users, may have never heard of <code>xcopy</code>, and are not likely to know how it's supposed to be called.</span>
<span class="comment-copy">Just to be clear, you're trying to copy multiple folders under <code>WD</code> to <code>ProcessDir[ProcessNumber]</code>?</span>
<span class="comment-copy">@MadPhysicist ; yes I trying to copy multipke folders under WD with ProcessDir ; using subprocess.call</span>
<span class="comment-copy">The proper way to show thanks is to select an answer and remove your question from the unanswered queue. That being said, you're welcome.</span>
<span class="comment-copy">Beat me to it. I'm still going to post though</span>
<span class="comment-copy">Is it worth noting that the files copied with <code>shutil</code> lose owner, group and other metadata?</span>
<span class="comment-copy">@cody, so do files copied with <code>cp -r</code> without <code>-a</code>, so that was original behavior as well.</span>
<span class="comment-copy">@CharlesDuffy Ah, good call.</span>
<span class="comment-copy">@MadPhysicist, ...usually, I consider posting an answer with essentially-duplicative code bad form, but you did a great job at adding useful explanations; no room to begrudge.</span>
<span class="comment-copy">Thank you for all answers ^^</span>
