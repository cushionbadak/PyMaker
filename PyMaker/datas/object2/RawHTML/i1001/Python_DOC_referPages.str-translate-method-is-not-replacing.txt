<div class="post-text" itemprop="text">
<p>I'm working with income data from this site: <a href="https://nces.ed.gov/programs/digest/d17/tables/dt17_502.30.asp" rel="nofollow noreferrer">https://nces.ed.gov/programs/digest/d17/tables/dt17_502.30.asp</a> </p>
<p>Which is quite messy, on the the task on working on is to remove the puntuation fro text like this: </p>
<pre><code>'  High school completion\\1\\ ....................................;32,610;;(360);34,840;;(275);34,200;;(943);33,480;;(16);32,970;;(18);32,010;;(#);31,320;;(16);30,900;;(2);30,410;;(4);30,930;;(968);31,830;;(143);\n'
</code></pre>
<p>But keeping the semicolon, since I'll use it to separate the fields later on. </p>
<p>My aproach to solve is: </p>
<p>1) Replace the #  for "0" since this is been used for missing values</p>
<p>row = row.replace("#","0")</p>
<p>2) Create a dict to map all the puntuacion to None or empty, except for the semicolon.</p>
<pre><code>translation = dict((c,"") if c != ";" else (c,";") for c in string.punctuation )
</code></pre>
<p>3) Make the translation</p>
<p>This is the step is not working: </p>
<pre><code>row.translate(translation)
</code></pre>
<p>retruns the exact same output:</p>
<pre><code>'  High school completion\\1\\ ....................................;32,610;;(360);34,840;;(275);34,200;;(943);33,480;;(16);32,970;;(18);32,010;;(0);31,320;;(16);30,900;;(2);30,410;;(4);30,930;;(968);31,830;;(143);\n'
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You're missing a stepâ€”building the translation table using <a href="https://docs.python.org/3/library/stdtypes.html#str.maketrans" rel="nofollow noreferrer"><code>str.maketrans</code></a>:</p>
<pre><code>tab = text.maketrans(dict.fromkeys(string.punctuation.replace(';',''), ''))
text.translate(tab)
# '  High school completion1 ;32610;;360;34840;;275;34200;;943;33480;;16;32970;;18;32010;;;31320;;16;30900;;2;30410;;4;30930;;968;31830;;143;\n'
</code></pre>
</div>
<span class="comment-copy">Do I need to create a new table for each string I want to translate? is not clear to me what "text.maketrans" does</span>
<span class="comment-copy">Just to note you can use a dictionary as the input to <code>str.translate</code> if you want, you just have to make sure its keys are the <code>ord</code> of the characters... eg: <code>d = {ord(ch): None for ch in string.punctuation if ch != ';'}</code> - you can then use <code>text.translate(d)</code> to get the same results...</span>
<span class="comment-copy">@LuisRamonRamirezRodriguez it creates a table mapping ascii values to their replacements. You can skip the call by building it yourself as JC noted.</span>
