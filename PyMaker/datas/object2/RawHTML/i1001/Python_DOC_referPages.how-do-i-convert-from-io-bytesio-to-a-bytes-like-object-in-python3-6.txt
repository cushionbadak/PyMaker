<div class="post-text" itemprop="text">
<p>I am using this function to uncompress the body or a HTTP response if it is compressed with gzip, compress or deflate. </p>
<pre><code>def uncompress_body(self, compression_type, body):
    if compression_type == 'gzip' or compression_type == 'compress':
        return zlib.decompress(body)
    elif compression_type == 'deflate':
        compressor = zlib.compressobj(9, zlib.DEFLATED, -zlib.MAX_WBITS)
        compressed = compressor.compress(body)
        compressed += compressor.flush()
        return base64.b64encode(compressed)

    return body
</code></pre>
<p>However python throws this error message.</p>
<pre><code>TypeError: a bytes-like object is required, not '_io.BytesIO'
</code></pre>
<p>on this line:</p>
<pre><code>return zlib.decompress(body)
</code></pre>
<p>Essentially, how do i convert from '_io.BytesIO' to a bytes-like object?</p>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>It's a file-like object.  Read them:</p>
<pre><code>&gt;&gt;&gt; b = io.BytesIO(b'hello')
&gt;&gt;&gt; b.read()
b'hello'
</code></pre>
<p>If the data coming in from <code>body</code> is too large to read into memory, you'll want to refactor your code and use <a href="https://docs.python.org/3/library/zlib.html#zlib.decompressobj" rel="nofollow noreferrer"><code>zlib.decompressobj</code></a> instead of <code>zlib.decompress</code>.</p>
</div>
