<div class="post-text" itemprop="text">
<p><strong>PROBLEM:</strong></p>
<p>I'm following a tutorial and trying to do a re.search on a csv file, which contains tweet (date, username, the tweet itself, the tweet id, and whether it's true or false).<br/>
<br/>
This is my original code:</p>
<pre><code>import pandas as pd
import re

filename = 'sample.csv'
data = pd.read_csv(filename, encoding='utf-8')

print(data.info())

def word_in_text(word,text):
     match = re.search(word,text)

     if match:
         return True
     return False

[kai, hatsu] = [0, 0]

for index, row in data.iterrows():
    kai += word_in_text('会', row['text'])
    hatsu += word_in_text('初', row['text'])
</code></pre>
<p>And this is the error it throws:</p>
<pre><code>Traceback (most recent call last):
File "C:\Python\enkousaiTF.py", line 28, in &lt;module&gt;
kai += word_in_text('会', row['text'])
File "C:\Python\enkousaiTF.py", line 19, in word_in_text
match = re.search(word,text)
File "C:\Python\Python36-32\lib\re.py", line 182, in search
return _compile(pattern, flags).search(string)
TypeError: expected string or bytes-like object
</code></pre>
<p><br/>
<strong>WHAT I TRIED TO FIX THE PROBLEM:</strong></p>
<p>When I tried to find out what type the dataframe is, I got this:</p>
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 1001 entries, 0 to 1000
Data columns (total 5 columns):
date        1000 non-null object
username    1000 non-null object
text        1000 non-null object
id          1000 non-null float64
enko        1000 non-null object
dtypes: float64(1), object(4)
memory usage: 23.5+ KB
</code></pre>
<p>So, I figured maybe the float64 type was the problem, so I tried to add str here:</p>
<pre><code>match = re.search(str(word,text))
</code></pre>
<p>But it just throws another error:</p>
<pre><code>TypeError: decoding str is not supported
</code></pre>
<p><br/>
And then I tried changing the data type with</p>
<pre><code>dtype_dic= {'date': str, 
            'username' : str,
            'text': str,
            'id': str,
            'enko': str}
</code></pre>
<p>But it's still throws the <code>TypeError: expected string or bytes-like object</code>, even though when I checked the data type it's all <code>object</code></p>
<p>How can I fix this problem?</p>
</div>
<div class="post-text" itemprop="text">
<p>Likely your text file is not unicode supported. Check this <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">link</a> and check for formatting. </p>
</div>
<span class="comment-copy">What happens when you change the <code>'会'</code> by some other "normal" string like <code>'foo'</code>? Is the error still showing up on the same line?</span>
<span class="comment-copy">@JosuéCortina yes, sadly it still does throw the same error on the same line</span>
<span class="comment-copy">And if you replace <code>row['text']</code> by <code>'foo'</code>?. Also, tell me what is the output of <code>type(row['text'])</code>?</span>
<span class="comment-copy">the <code>type(row['text'])</code> is <code>&lt;class 'str'&gt;</code>. I think maybe something is wrong with the data, because when I try to print how many times 会 is in the document, it shows the correct number(190), but then <b>after that</b> it throws the error so.. I checked the data and found the problem there. For some reason at the end of the data there's this three comma <code>,,,</code> and when I deleted it everything works just fine.... Really sorry for this</span>
