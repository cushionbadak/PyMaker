<div class="post-text" itemprop="text">
<p>Is there an easy way to create a log record in Python where instead of sending a message, you just send a list of attributes? </p>
<p>From what I understand, methods like <a href="https://github.com/python/cpython/blob/902196d867a34cc154fa9c861c883e69232251c6/Lib/logging/__init__.py#L1726" rel="nofollow noreferrer"><code>logger.info</code></a> and <a href="https://github.com/python/cpython/blob/902196d867a34cc154fa9c861c883e69232251c6/Lib/logging/__init__.py#L1720" rel="nofollow noreferrer"><code>logger.debug</code></a> are just methods to create log records at specific levels. These methods call the <a href="https://github.com/python/cpython/blob/902196d867a34cc154fa9c861c883e69232251c6/Lib/logging/__init__.py#L1496" rel="nofollow noreferrer"><code>self._log</code></a> method, which itself calls the <a href="https://github.com/python/cpython/blob/902196d867a34cc154fa9c861c883e69232251c6/Lib/logging/__init__.py#L1481" rel="nofollow noreferrer"><code>self.makeRecord</code></a> method. </p>
<p>If I wanted to create records where the message attribute is none, could I just call <code>logger.makeRecord</code>, passing <code>None</code> to message and a dictionary of attributes to the <code>extra</code> keyword argument? Or should I call <code>self._log</code> and pass those arguments? Or do neither of these work? Can I instead just pass <code>extra</code> to the <code>logger.info</code> method too?</p>
<p>Also, if this is possible, why is it not done more often? It seems like the ideal workflow would have only attributes being passed into a log record, and then the message would be compiled by the formatter after.</p>
<p>Sorry for so many mini-questions in this post.</p>
</div>
<div class="post-text" itemprop="text">
<p>Why can't you format your logging string to take those extra args? The <code>extra</code> kwarg is for this purpose explicitly. From their <a href="https://docs.python.org/3/library/logging.html" rel="nofollow noreferrer">docs</a>:</p>
<pre><code>FORMAT = '%(asctime)-15s %(clientip)s %(user)-8s %(message)s'
logging.basicConfig(format=FORMAT)
d = {'clientip': '192.168.0.1', 'user': 'fbloggs'}
logger = logging.getLogger('tcpserver')
logger.warning('Protocol problem: %s', 'connection reset', extra=d)

# which prints this
2006-02-08 22:20:02,165 192.168.0.1 fbloggs  Protocol problem: connection reset
</code></pre>
<p><code>extra</code> is for kwarg mapping, so if you wanted it to build a string for you, it can. 'message' is positional, so there's no ignoring it. However, there's nothing stopping you from providing an empty string <code>''</code> as the <code>message</code> positional arg</p>
</div>
<span class="comment-copy">You may be in the <a href="https://en.wikipedia.org/wiki/XY_problem" rel="nofollow noreferrer">XY Problem</a>, could you explain <i>why</i> you want <code>makeRecord</code> to take <code>extra</code> attrs?</span>
