<div class="post-text" itemprop="text">
<p>I have the most recent sqlite3 installed on my machine:</p>
<pre><code>$ sqlite3 --version
3.26.0 2018-12-01 12:34:55 bf8c1b2b7a5960c282e543b9c293686dccff272512d08865f4600fb58238b4f9
</code></pre>
<p>And, in python, the sqlite3 module is using this version of sqlite3:</p>
<pre><code>$ python
Python 3.4.9 (default, Jan  5 2019, 18:35:56)
[GCC 5.5.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import sqlite3 as sq
&gt;&gt;&gt; sq.sqlite_version_info
(3, 26, 0)
&gt;&gt;&gt; sq.version_info
(2, 6, 0)
</code></pre>
<p>However, I cannot open a database file using URIs, even though that feature has been present in sqlite since version 3.7:</p>
<pre><code>&gt;&gt;&gt; import sqlite3 as sq
&gt;&gt;&gt; c = sq.connect('file://test', uri=True)
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
sqlite3.NotSupportedError: URIs not supported
</code></pre>
<p>What is going on here?  What have I done wrong?</p>
</div>
<div class="post-text" itemprop="text">
<p>OK, I figured out what was going on by reading the source code.  When pyenv compiled my version of Python, the _sqlite module was compiled against the ridiculously old CentOS version of the "sqlite3.h" file.  Because of this, the Python module didn't have the SQLITE_OPEN_URI macro defined, which causes it give a hard-coded "URIs not supported" Python exception.</p>
<p>To get around this, I had to set the following environment variable:</p>
<pre><code># This is to direct pyenv to the linuxbrew include and library directories, when building versions of Python
export PYTHON_CONFIGURE_OPTS="LD_RUN_PATH=/home/linuxbrew/.linuxbrew/lib/ LDFLAGS=-L/home/linuxbrew/.linuxbrew/lib/ CPPFLAGS=-I/home/linuxbrew/.linuxbrew/include/"
</code></pre>
</div>
<span class="comment-copy">Does simply <code>/test</code> work? And do you have a link for the URI support?</span>
<span class="comment-copy">The error message is generated directly from the Python module, not the sqlite library. What OS is this on and how have you installed Python? URI support is supposed to be in the sqlite3 module <a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.connect" rel="nofollow noreferrer">since Python 3.4</a></span>
<span class="comment-copy">I'm running on bluehost's VPS system, so here is my full version string (from /proc/version):  Linux version 2.6.32-754.6.3.el6.x86_64 (mockbuild@x86-01.bsys.centos.org) (gcc version 4.4.7 20120313 (Red Hat 4.4.7-23) (GCC) ) #1 SMP Tue Oct 9 17:27:49 UTC 2018  I've installed this version of Python using pyenv, which was in turn installed using the linuxbrew package manager.  I'm not using the system's yum package manager because its "latest" version of SQLite is from 2009.  What makes no sense to me is that the Python library is complaining, and yet it does see the new SQLite version.</span>
