<div class="post-text" itemprop="text">
<p>I used to use year and week number to convert to date for some propose.
it works well before 2019, but when i tried to import 2019 wk1 data, it wired.</p>
<p>2019 wk1 becomes between 2019-01-07 ~ 2019-01-03</p>
<p>But on the contrary, if i use date to convert to year and wk, it's correct.</p>
<p>May I know what's wrong with my code? thanks</p>
<pre><code>d = {'year': [2018, 2018, 2018, 2019, 2019, 2019], 'week': [0, 1, 52, 0, 1, 2]}
df = pd.DataFrame(data=d)
df['date'] = pd.to_datetime(df['year'].map(str) + df['week'].map(str) + '-4', format='%Y%W-%w')
df['yearwk'] = pd.to_datetime(df['date'], format='%Y-%M-%D').dt.strftime('%YW%V')
print(df)

   year  week       date   yearwk
0  2018     0 2018-01-04  2018W01
1  2018     1 2018-01-04  2018W01
2  2018    52 2018-12-27  2018W52
3  2019     0 2019-01-03  2019W01
4  2019     1 2019-01-10  2019W02
5  2019     2 2019-01-17  2019W03
</code></pre>
<p>I use given year and weeknum to convert to date. ideally, 2019WK1 should be between 2018-12-31 to 2019-01-05, but it became 2019-01-06 to 2019-01-13.
then I use that date to convert to year and wk, the result is what's I expected.</p>
</div>
<div class="post-text" itemprop="text">
<p>According to <a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior" rel="nofollow noreferrer">strftime() and strptime() Behavior</a>,</p>
<blockquote>
<p>%W: Week number of the year (Monday as the first day of the week) as a decimal number. All days in a new year preceding the first Monday are considered to be in week 0.</p>
<p>%w: Weekday as a decimal number, where 0 is Sunday and 6 is Saturday.</p>
</blockquote>
<p>You put 4 as %w, indicating you want date of Thursday of the week number you provide.</p>
<p>First week (<code>%W</code>=1) of 2018 that starts with Monday is: Jan 1 - Jan 7 or Jan 4 (Thursday)</p>
<p>First week (<code>%W</code>=1) of 2019 that starts with Monday is: Jan 7 - Jan 13 or Jan 10 (Thursday)</p>
<p>For 2018, there's no Thursday the week before, so <code>%W</code>=0 will output the same as <code>%W</code>=1. However, for 2019, there is a Thursday the week before, so <code>%W</code>=0 will output Jan 3.</p>
</div>
<span class="comment-copy">It wired? Really?</span>
