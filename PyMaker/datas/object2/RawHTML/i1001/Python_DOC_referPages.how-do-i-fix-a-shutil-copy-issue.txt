<div class="post-text" itemprop="text">
<p>I keep getting an error that says 
"IOError: [Errno 2] No such file or directory: 'C:\Temp\test2_empty\Storage\Poly1.kml'"</p>
<p>What I want to do is copy a file from a directory move it to a temporary storage folder and rename the file and then move that file to another folder. What is the best way to fix this issue?</p>
<pre><code>from qgis.core import*
import glob, os, shutil, time, qgis

path = r"C:\Temp\test2_kml"
dest = r"C:\Temp\test2_empty"
storage = r"C:\Temp\test2_empty\Storage"


for root,d_names,f_names in os.walk(path):
    if not f_names:
        continue
    prefix = os.path.basename(root)
    for f in f_names:
        if f.endswith('.kml'):
            src = os.path.join(root,f)
            print("...")
            print(time.strftime('%m/%d/%Y', time.gmtime(os.path.getmtime(src))))
            print(os.path.realpath(src))
            print(f)
            shutil.copy2(src, storage)
            for root2,d_names2,f_names2 in os.walk(storage):
                for f2 in f_names2:
                    src2= os.path.join(root2,f2)
                    os.rename(os.path.join(root2,f2), os.path.join(root2, "{}_{}".format(prefix,f2)))
                    shutil.move(src2, dest)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Create your destination directory - <code>os.makedirs(storage)</code> before calling shutil copy.</p>
<p>If you want to accept the pre-existence of this directory, you can:</p>
<ul>
<li>for python 3.2+ - add keyword argument <code>exist_ok=True</code></li>
<li>for python &lt;3.2 - add try / except block for OSError exception.</li>
</ul>
</div>
<span class="comment-copy">Do I need to create a variable called "exist_ok" or import a library that contains "exist_ok"?</span>
<span class="comment-copy">No, it's a keyword argument passed to this <a href="https://docs.python.org/3/library/os.html#os.makedirs" rel="nofollow noreferrer">function</a>; if you want your script to fail if this directory exists, you can remove that part. But from my experience at least while you are still testing this solution it will be useful to have it for consecutive runs.</span>
<span class="comment-copy">I realized I was running the program in python 2 not 3. "exist_ok" is only in python 3</span>
<span class="comment-copy">In this case you might want to add try/except block if you want to handle this directory existence gracefully. Sorry for not adding the version disclaimer.</span>
