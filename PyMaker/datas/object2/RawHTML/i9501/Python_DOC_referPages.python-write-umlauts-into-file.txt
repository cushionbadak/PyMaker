<div class="post-text" itemprop="text">
<p>i have the following output, which i want to write into a file:</p>
<pre><code>l  = ["Bücher", "Hefte, "Mappen"]
</code></pre>
<p>i do it like:</p>
<pre><code>f = codecs.open("testfile.txt", "a", stdout_encoding)
f.write(l)
f.close()
</code></pre>
<p>in my Textfile i want to see: ["Bücher", "Hefte, "Mappen"] instead of B\xc3\xbccher</p>
<p>Is there any way to do so without looping over the list and decode each item ? Like to give the <code>write()</code> function any parameter?</p>
<p>Many thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>First, make sure you use <strong>unicode</strong> strings: add the "u" prefix to strings:</p>
<pre><code>l  = [u"Bücher", u"Hefte", u"Mappen"]
</code></pre>
<p>Then you can write or append to a file:</p>
<p>I recommend you to use the <a href="https://docs.python.org/3/library/io.html" rel="nofollow noreferrer">io</a> module which is Python 2/3 compatible.</p>
<pre><code>with io.open("testfile.txt", mode="a", encoding="UTF8") as fd:
    for line in l:
        fd.write(line + "\n")
</code></pre>
<p>To read your text file in one piece:</p>
<pre><code>with io.open("testfile.txt", mode="r", encoding="UTF8") as fd:
    content = fd.read()
</code></pre>
<p>The result <em>content</em> is an Unicode string.</p>
<p>If you decode this string using UTF8 encoding, you'll get <em>bytes</em> string like this:</p>
<pre><code>b"B\xc3\xbccher"
</code></pre>
<p><strong>Edit</strong> using <code>writelines</code>. </p>
<p>The method <code>writelines()</code> writes a sequence of strings to the file. The sequence can be any iterable object producing strings, typically a list of strings. There is no return value.</p>
<pre><code># add new lines
lines = [line + "\n" for line in l]

with io.open("testfile.txt", mode="a", encoding="UTF8") as fd:
    fd.writelines(lines)
</code></pre>
</div>
<span class="comment-copy">What's <code>stdout_encoding</code>?</span>
<span class="comment-copy">sorry its utf-8</span>
<span class="comment-copy">Thank you. In a case if i should have an output which contains more then one list i need to encode the items in lists seperately. I have no opportunity to do it in one step for ALL output without knowing which list could contain umlauts and which does not? I was looking for a solution which allows me to write output in file without seperately looping over the list and encode strings seperately.</span>
<span class="comment-copy">It's not clear what you really want to do. Encoding (or decoding) is only required when you write (or read) to a file. Because text files are bytes streams: the internal representation is always an array of bytes. The classic usage is to use UTF8 encoding for that.</span>
<span class="comment-copy">i want to write informations to a .txt file and i have the problem that some strings are correctly shown in the textfile like Bücher and other strings, which are inside a list are shown like B\xc3\xbcer.</span>
<span class="comment-copy">If you "write" a Python list directly to a file, Python use the <code>repr</code> function which performs a ASCII encoding with backslash escaping. You need to write line by line as I suggested you. You can also use <b>writelines</b> but you need to add a délimiter like a newline. See my edit.</span>
