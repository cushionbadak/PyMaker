<div class="post-text" itemprop="text">
<p>I am trying to implement multiprocessing in my code, and so, I thought that I would start my learning with some examples.  I used the first example found in this <a href="https://docs.python.org/3/library/multiprocessing.html#introduction" rel="noreferrer">documentation</a>.</p>
<pre><code>from multiprocessing import Pool
def f(x):
    return x*x

if __name__ == '__main__':
    with Pool(5) as p:
        print(p.map(f, [1, 2, 3]))
</code></pre>
<p>When I run the above code I get an <code>AttributeError: can't get attribute 'f' on &lt;module '__main__' (built-in)&gt;</code>.  I do not know why I am getting this error.  I am also using Python 3.5 if that helps.</p>
</div>
<div class="post-text" itemprop="text">
<p>This problem seems to be a design feature of multiprocessing.Pool. See <a href="https://bugs.python.org/issue25053" rel="noreferrer">https://bugs.python.org/issue25053</a>. For some reason Pool does not always work with objects not defined in an imported module. So you have to write your function into a different file and import the module.</p>
<p>File: <strong>defs.py</strong></p>
<pre><code>def f(x):
    return x*x
</code></pre>
<p>File: <strong>run.py</strong></p>
<pre><code>from multiprocessing import Pool
import defs

 if __name__ == '__main__':
    with Pool(5) as p:
        print(p.map(defs.f, [1, 2, 3]))
</code></pre>
<p>If you use print or a different built-in function, the example should work. If this is not a bug (according to the link), the given example is chosen badly.</p>
</div>
<span class="comment-copy">works perfectly for me (also on python 3.5).</span>
<span class="comment-copy">Yep, also works for me on Python 3.5</span>
<span class="comment-copy">I should add that I am also using Jupyter Notebook and anaconda as my interpreter.  But anaconda is using python 3.5.</span>
<span class="comment-copy">working fine for me in anaconda notebook. Python 3.5</span>
<span class="comment-copy">I get the error on Windows 10 with Anaconda using Python 3.6.</span>
<span class="comment-copy">When I run the scripts, I got: AttributeError: <b>exit</b>. Turned out the problem was with the "with" statement, which requires an object with "_ _ enter <b>" and "</b> exit __" method. So I had to change it to: p = Pool(5) and it worked. Thank you very much!</span>
<span class="comment-copy">That works, thank you</span>
