<div class="post-text" itemprop="text">
<p>I have a datetime list and would like to convert it into a date using the following code:</p>
<pre><code>dates = (datetime.strptime(ts, '%Y-%m-%d %H:%M:%S') for ts in timestamps)
date_strings = [datetime.strftime(d, '%m-%d-%Y') for d in dates]
</code></pre>
<p>The datetime list looks like the following:</p>
<blockquote>
<p>[datetime.datetime(2016, 11, 21, 0, 0), datetime.datetime(2016, 11,
  22, 0, 0), datetime.datetime(2016, 11, 23, 0, 0)]</p>
</blockquote>
<p>I receive the following error message:</p>
<blockquote>
<p>TypeError: strptime() argument 1 must be str, not datetime.datetime</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>It appears the values in your <code>timestamps</code> sequence are <em>not strings</em>; they are already <code>datetime</code> objects. You don't need to parse these any further. It is also possible you have a mix of strings and <code>datetime</code> objects; the exception you see is thrown because <em>at least one of the values</em> in <code>timestamps</code> is a <code>datetime</code> instance already.</p>
<p>Just call the <a href="https://docs.python.org/3/library/datetime.html#datetime.datetime.strftime" rel="nofollow noreferrer"><code>datetime.strftime()</code> <em>method</em></a> on all objects in <code>ts</code> to format them:</p>
<pre><code>date_strings = [d.strftime('%m-%d-%Y') for d in timestamps]
</code></pre>
<p>Demo:</p>
<pre><code>&gt;&gt;&gt; import datetime
&gt;&gt;&gt; timestamps = [datetime.datetime(2016, 11, 21, 0, 0), datetime.datetime(2016, 11, 22, 0, 0), datetime.datetime(2016, 11, 23, 0, 0)]
&gt;&gt;&gt; [d.strftime('%m-%d-%Y') for d in timestamps]
['11-21-2016', '11-22-2016', '11-23-2016']
</code></pre>
<p>In the event that you have a <em>mix</em> of strings and <code>datetime</code> instances in <code>timestamps</code>, you'll have to do some extra processing:</p>
<pre><code>def convert_as_needed(ts):
    try:
        # parse strings
        datetime.strptime(ts, '%Y-%m-%d %H:%M:%S')
    except TypeError:
        # assume it is already a datetime object
        return ts

dates = map(convert_as_needed, timestamps)
date_strings = [d.strftime('%m-%d-%Y') for d in dates]
</code></pre>
</div>
<span class="comment-copy"><code>timestamps</code> is already a list of <code>datetime</code> objects; or more precisely, <i>at least one object in that list</i> is a <code>datetime</code> object. You can't use <code>datetime.strptime()</code> (note the <i><code>p</code></i> in there) to parse them to <code>datetime</code> objects <i>again</i>.</span>
<span class="comment-copy">Your  <code>for d in dates</code> list comprehension needlessly uses an unbound <code>datetime.strftime()</code> method; just call the method directly on the <code>datetime</code> instances.</span>
<span class="comment-copy">thanks a lot. That helped.</span>
<span class="comment-copy">one more question. After the conversion how can I add a day to the date? Using datetime.timedelta(1) does not work because it is a string now. Is there a easy workaroung?</span>
<span class="comment-copy">Add your timedelta <i>before</i> converting to a string. <code>(d + timedelta(days=1)).strftime('%m-%d-%Y')</code> would let you do both in one expression.</span>
<span class="comment-copy">Thanks a lot that is what I was looking for</span>
