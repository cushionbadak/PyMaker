<div class="post-text" itemprop="text">
<p>I'm writing the file to csv, but it says list index is out of range. Here is my code. I have a directory with 85 files.</p>
<pre><code>import os
import os.path
import csv
import re
import calendar
path = 'C:\\Users\\akhilpriyatam.k\\Desktop\\xls'
text_files = [os.path.splitext(f)[0] for f in os.listdir(path)]
for v in text_files:
    os.chdir('C:\\Users\\akhilpriyatam.k\\Desktop\\xls')
with open('file1.csv', 'wb') as csvfile:
    thedatawriter = csv.writer(csvfile,delimiter=',')
    for v in text_files:
        months = list(calendar.month_name[1:])
        regex = re.compile('|'.join(months))
        iter = re.finditer(regex, v)
        if iter:
            idx = [i for i in iter][0].start()
            filename, timestamp = v[:idx],v[idx:-4]
            print filename, timestamp
            thedatawriter.writerow([filename,timestamp])
</code></pre>
<p>Here is the error.</p>
<pre><code>IndexError                                    Traceback (most recent call last)
&lt;ipython-input-145-0b1c3f1407ed&gt; in &lt;module&gt;()
     15         iter = re.finditer(regex, v)
     16         if iter:
---&gt; 17             idx = [i for i in iter][0].start()
     18             filename, timestamp = v[:idx],v[idx:-4]
     19             print filename, timestamp

IndexError: list index out of range
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><a href="https://docs.python.org/3/library/re.html#re.finditer" rel="nofollow noreferrer"><code>finditer()</code></a> returns an <em>iterator</em> and it's <em>always truthy</em>:</p>
<pre><code>In [1]: import re

In [2]: iter = re.finditer(r'[0-9]+', 'no digits here')

In [3]: bool(iter)
Out[3]: True
</code></pre>
<p>In other words, the <code>if iter:</code> check would always pass - even if there are no matches. And, when there are no matches, you are getting an <code>IndexError</code> while accessing the first element of an empty list here: <code>[i for i in iter][0]</code>.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>iter = re.finditer(regex, v)
        if iter:
</code></pre>
<p>Iterator should not be used as test condition, it will always return True.</p>
<p>You should change you code to:</p>
<pre><code>iter = re.findall(regex, v)
            if iter:
</code></pre>
<p><code>findall</code> will return a list which can be used as test condition.</p>
</div>
<span class="comment-copy">always add in question <b>FULL</b> error message (Traceback) - there are many usefull inforamtions - ie. which line makes problem, etc.</span>
<span class="comment-copy">IndexError                                Traceback (most recent call last) &lt;ipython-input-145-0b1c3f1407ed&gt; in &lt;module&gt;()      15         iter = re.finditer(regex, v)      16         if iter: ---&gt; 17             idx = [i for i in iter][0].start()      18             filename, timestamp = v[:idx],v[idx:-4]      19             print filename, timestamp  IndexError: list index out of range</span>
<span class="comment-copy">add <code>Traceback</code> in question - it will be more readable and everyone will read it.</span>
<span class="comment-copy">I'm sorry but i have not quite understood how to make use of finditer() in my code.</span>
<span class="comment-copy">@Akhil Kodicherla iterator should not be used as test condition, it will always return True.</span>
