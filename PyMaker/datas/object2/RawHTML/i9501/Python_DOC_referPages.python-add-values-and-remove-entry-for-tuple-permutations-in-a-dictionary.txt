<div class="post-text" itemprop="text">
<p>I have a dictionary where the key is a tuple. Some of these tuples are permutations of each other (e.g. <code>(1, 2)</code> vs <code>(2, 1)</code>). I want to add the value of one permutation to the other, and then get rid of the second permutation. </p>
<pre><code>d = {(1, 3): 14, (1, 4): 13, (1, 2): 10, (11, 11): 19, (3, 1): 50, (4, 1): 5, ...}
</code></pre>
<p>should be </p>
<pre><code>{(1, 3): 64, (1, 4): 18, (1, 2): 10, (11, 11): 19, ...}
</code></pre>
<p>I thought about sorting them and then doing something based on position in the dictionary, but this is not very easy to scale up. Input is welcome!</p>
</div>
<div class="post-text" itemprop="text">
<p>As @wim suggested, you should probably use a <code>frozenset</code>, then you can use <code>collections.Counter</code> and <code>sum</code> to cumulate the values into a new dictionary:</p>
<pre><code>from collections import Counter

d = {(1, 3): 14, (1, 4): 13, (1, 2): 10, (11, 11): 19, (3, 1): 50, (4, 1): 5}

r = sum((Counter({frozenset(k): v}) for k, v in d.items()), Counter())
print(r)
# Counter({frozenset({1, 3}): 64, frozenset({11}): 19, frozenset({1, 4}): 18, frozenset({1, 2}): 10})
</code></pre>
<p>You may turn the <code>Counter</code> object into a vanilla dict and the keys back to tuples if you so wish using a dictionary comprehension.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use a <a href="https://docs.python.org/3/library/stdtypes.html#frozenset" rel="nofollow noreferrer"><code>frozenset</code></a> for the dict key instead of a tuple.  Then you can just add them as you go along, without worrying about ordering.  </p>
</div>
