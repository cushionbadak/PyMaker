<div class="post-text" itemprop="text">
<p>I'm trying to call the <a href="https://slurm.schedmd.com/squeue.html" rel="nofollow noreferrer">SLURM squeue</a> from a python script.  The command,</p>
<p><code>/usr/bin/squeue --Format=username,jobid,name,timeleft</code></p>
<p>Works fine from the command line, but fails from <a href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" rel="nofollow noreferrer"><code>subprocess.Popen</code></a> with:</p>
<pre><code>    p = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
  File "/n/home00/DilithiumMatrix/.conda/envs/py35/lib/python3.5/subprocess.py", line 947, in __init__
    restore_signals, start_new_session)
  File "/n/home00/DilithiumMatrix/.conda/envs/py35/lib/python3.5/subprocess.py", line 1551, in _execute_child
    raise child_exception_type(errno_num, err_msg)
FileNotFoundError: [Errno 2] No such file or directory: '/usr/bin/squeue --Format=username,jobid,name,timeleft'
</code></pre>
<p>MWE:</p>
<pre><code>import subprocess
command = "/usr/bin/squeue --Format=username,jobid,name,timeleft"
p = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
text = p.stdout.read()
print(text)
</code></pre>
<p><code>/usr/bin/squeue</code> works fine from both the command line or <code>Popen</code>.</p>
<p>Could it be failing because it requires some information about the user/group that's executing the  <code>squeue</code> command and that is (somehow) lost when running via python?  What else could be causing this?</p>
</div>
<div class="post-text" itemprop="text">
<p>The first argument to <code>subprocess.Popen</code> is either a String, or a list of Strings. If it is a single String, it will be interpreted as a filename. This is the reason for the error you get.
To pass a list of Strings, it should match how a shell would pass your arguments to the process. A standard shell will split your command line by whitespace, so instead of this:</p>
<pre><code>command = "/usr/bin/squeue --Format=username,jobid,name,timeleft"
</code></pre>
<p>You need this:</p>
<pre><code>command = ["/usr/bin/squeue", "--Format=username,jobid,name,timeleft"]
</code></pre>
<p>Splitting the second argument at the "=" as you mentioned in your comment just confuses squeue, which would then see two arguments.</p>
</div>
<span class="comment-copy">What does your call to <code>subprocess.Popen</code> look like? How does it fail?</span>
<span class="comment-copy">@MarkkuK. woops, sorry --- MWE and error message included.</span>
<span class="comment-copy">You need to pass your command as a list of strings: <code>command = ["/usr/bin/squeue", "--Format=username,jobid,name,timeleft"]</code></span>
<span class="comment-copy">Damn.  I tried both <code>"/usr/bin/squeue --Format=username,jobid,name,timeleft"</code> and <code>["/usr/bin/squeue", "--Format=", "username,jobid,name,timeleft"]</code>, but not the compromise case... do you know why it doesn't work otherwise?  I'd be happy to accept your answer if you submitted one!  Thanks so much</span>
<span class="comment-copy">Thanks, I submitted an answer. Your second form would be like calling <code>/usr/bin/squeue</code> on the command line with a space after the <code>=</code>.</span>
