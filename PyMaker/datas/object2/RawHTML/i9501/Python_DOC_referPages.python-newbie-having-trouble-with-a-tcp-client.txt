<div class="post-text" itemprop="text">
<p>Basically I'm just starting out with python networking and python in general and I can't get my TCP client to send data. It says:</p>
<pre><code>Traceback (most recent call last):
  File "script.py", line 14, in &lt;module&gt;
    client.send(data) #this is where I get the error
TypeError: a bytes-like object is required, not 'str'
</code></pre>
<p>The code is as follows: </p>
<pre><code>import socket

target_host = "www.google.com"
target_port = 80 

#create socket object
client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

#connect the client
client.connect((target_host,target_port))

#send some data
data = "GET / HTTP/1.1\r\nHost: google.com\r\n\r\n"
client.send(data) #this is where I get the error

#receive some data
response = client.recv(4096)

print(response)
</code></pre>
<p>Thanks for your help in advance!</p>
</div>
<div class="post-text" itemprop="text">
<p>You are probably using Python 3.X. <a href="https://docs.python.org/3.5/library/socket.html#socket.socket.send" rel="nofollow noreferrer"><code>socket.send()</code></a> expected a bytes type argument but <code>data</code> is an unicode string. You must encode the string using <a href="https://docs.python.org/3/library/stdtypes.html#str.encode" rel="nofollow noreferrer"><code>str.encode()</code></a> method. Similarly you would use <a href="https://docs.python.org/3/library/stdtypes.html#bytes.decode" rel="nofollow noreferrer"><code>bytes.decode()</code></a> to receive the data:</p>
<pre><code>import socket

target_host = "www.google.com"
target_port = 80

client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client.connect((target_host,target_port))

data = "GET / HTTP/1.1\r\nHost: google.com\r\n\r\n"
client.send(data.encode('utf-8'))

response = client.recv(4096).decode('utf-8')

print(response)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If you are using python2.x your code is correct. As in the documentation for  python2 <a href="https://docs.python.org/2/library/socket.html#socket.socket.send" rel="nofollow noreferrer"><code>socket.send()</code></a> takes a string parameter. But if you are using python3.x you can see that <a href="https://docs.python.org/3.6/library/socket.html#socket.socket.send" rel="nofollow noreferrer"><code>socket.send()</code></a> takes a bytes parameter. Thus you have to convert your string <code>data</code> into bytes using <a href="https://docs.python.org/3/library/stdtypes.html#str.encode" rel="nofollow noreferrer"><code>str.encode()</code></a>. So your code might look like this instead.</p>
<pre><code>import socket

target_host = "www.google.com"
target_port = 80 

#create socket object
client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

#connect the client
client.connect((target_host,target_port))

#send some data
data = "GET / HTTP/1.1\r\nHost: google.com\r\n\r\n"
client.send(data.encode('utf-8'))

#receive some data
response = client.recv(4096)

print(response)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>So I encoded the data with utf-8 as was suggested by a few people and rewrote my code which fixed the odd syntax error. Now my code works perfectly. Thank you to everyone who posted but especially to @FJSevilla. The working code is as follows:</p>
<pre><code>import socket

target_host = "www.google.com"
target_port = 80

client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client.connect((target_host,target_port))

data = "GET / HTTP/1.1\r\nHost: google.com\r\n\r\n"
client.send(data.encode('utf-8'))

response = client.recv(4096).decode('utf-8')

print(response)
</code></pre>
</div>
<span class="comment-copy">Whats the traceback you are getting?</span>
<span class="comment-copy">4096 is not a string</span>
<span class="comment-copy">You are using python3.x use python2.x and it will work</span>
<span class="comment-copy">You can also use <code>client.send(data.encode('utf-8'))</code> rather than <code>client.send(data)</code></span>
<span class="comment-copy">thanks everyone I really appreciate the help.</span>
<span class="comment-copy">Thanks. You fixed my encoding error but the receive code now gives me a syntax error. It isn't apparent to me where the error is, I have the same code you have.</span>
<span class="comment-copy">@tjwilkins I have tested my code and its  run without errors in Python 3.5.2 and Python 2.7.12. Copy and paste all my code and try, i can't reproduce your error.</span>
<span class="comment-copy">I'll be damned, yours works. Perhaps I have an error with mixing spaces and indents but I don't think so. I'll just rewrite my code from scratch. Thanks for all the help.</span>
<span class="comment-copy">I used the code you suggested and it works but now I get a syntax error in the receive code.</span>
<span class="comment-copy">data = "GET / HTTP/1.1\r\nHost: google.com\r\n\r\n"     client.send(data.encode(('utf-8')) #  &lt;--- This is where I changed the     code      #receive some data     response = client.recv(4096).decode('utf-8')       &lt;--- I get a  syntax_error here     print(response)</span>
