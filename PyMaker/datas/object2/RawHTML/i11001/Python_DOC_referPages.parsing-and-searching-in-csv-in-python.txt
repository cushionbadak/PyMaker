<div class="post-text" itemprop="text">
<p>I am using python 3.5.x </p>
<p>In python i am trying to parse a csv file which has lot of paragrah in it and identity and get couple of matches and create new csv file out of it</p>
<p>lets imaging i have 2 rows but in real time will have more rows</p>
<p><strong>Description.</strong></p>
<pre><code>Welcom new joinee  User1.  your initial login id : and you get access to Depart "Accounting" applciation.  with below access

         acount user1 access modify
         account user1  access  readonly

Thank you. any issue contact helpdesk

Welcom new joinee  User2.  your initial login id : and you get access to Depart  "Finance"  Applciation.  with below access

            acount  user2 access write
            account user2   access read

Thank you. any issue contact helpdesk
</code></pre>
<p>Now i use "re.search" to get what i want and store in a vailable</p>
<p>Example lets imagine that i used re.search and getting the 3 below matches and storing in a variable successfully</p>
<pre><code>row 1 
        user_name  =User1
        Departement = Accounting 
        account =User1
        access = modify and readyonly

row 2 
        user_name  =User2
        Departement = Finance 
        account =User
        access = write and read
</code></pre>
<p>What i want in the csv file is to look like below </p>
<pre><code>Accounting,user1|modify\nuser1|readonly
Finance    ,User2|write\nuser2|Modify
</code></pre>
<p>Note: there is '|' as delimiter  and '\n' as newline in user_name and access valiables"</p>
<p>Instead what i get is like this</p>
<pre><code>Accounting,user1|modify\nuser1|readonly\nFinance,User2|write\nuser2|Modify
</code></pre>
<p>Below is my code. I might be doing soemthing in the wrong way. Any better way to achieve my results</p>
<pre><code>import csv
import re
import string
file =open('test_input.csv','r')
out_file=open('test_out.csv','w')
lines = file.readlines()
for x in lines :
    app_name=re.search('-------',x)
    user_name=re.search('------',x)
    department=re.search('......',x)
    account=re.search('----',x)
    access=re.search('-----',x)
    if user_name:
        e= user_name.group(1).strip()
        e=e+","
        out_file.write(e)
    if departement:
        b = Departement.group(1).strip()
        b=b + ","
        out_file.write(b)
    if  account:
        c = account.group(1).strip()
        c=c +"|"
        out_file.write(c)
        if  access:
            d = access.group(1).strip()
            d=d + "\\n" 
            out_file.write(d)


file.close()
out_file.close()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Simplify your process by using <a href="https://docs.python.org/3/library/string.html#format-string-syntax" rel="nofollow">string formatting</a> to construct the line you are going to write:</p>
<pre><code>s = '{},{}|{}\n{}|{}'
</code></pre>
<p>Assign the data to variable names</p>
<pre><code>if user_name:
    user_name = user_name.group(1).strip()
if Departement:
    Departement = Departement.group(1).strip()
if  account:
    account = account.group(1).strip()
if  access:
    access = access.group(1).strip()
</code></pre>
<p>Use the variable names with the format string</p>
<pre><code>    out_file.write(s.format(Departement, user_name,
                            access1, user_name,
                            access2)
</code></pre>
<p>Seems you have two <code>access</code>'s - it's not clear, from your post, how you extract them... I'll let you handle that.</p>
</div>
<span class="comment-copy">Could you include the regex search values too? <code>Department</code> is also not defined. There are also a lot of typos in your data file. Are they supposed to be there?</span>
<span class="comment-copy">I changed my actually data with random example so there might be some typo's.. i dont have the regex for the search for this example. but my regex for my data getting validate match</span>
<span class="comment-copy">Thank you wwii... it worked..</span>
