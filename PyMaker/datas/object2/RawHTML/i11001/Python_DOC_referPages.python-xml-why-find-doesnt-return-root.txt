<div class="post-text" itemprop="text">
<p>Why doesn't <code>element.find("..")</code> return <code>root</code> when <code>root.findall("*")</code> returns <code>element</code>?</p>
<pre><code>def XML_Extract_Node_Tags(Tree, Node_Tags):
    """
    :param Tree: xml.etree.ElementTree
    :param Node_Tags: list
    :return: ReturnVal:
    """

    for el in Tree.findall("//"):
        if el.tag not in Node_Tags:
            print(el.tag)
            # Need to remove the element and set its children equal to parent
            for subel in el.findall("*"):
                ## Add subel to grandparent (if exists)
                grand_parent = subel.find('../..')
                if grand_parent:
                    # If it has a grand parent
                    grand_parent.append(subel)
            # Remove el from tree
            if not el.find(".."):
                print(el.tag, el.attrib)
            else:
                el.find("..").remove(el)

    ReturnVal = Tree
    return ReturnVal
</code></pre>
<p>First 5 lines of XML file</p>
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE build SYSTEM "build.dtd"&gt;
&lt;build id="58" localAgents="true" cm="usl000348:80" start="6/1/2016 3:31:19 PM"&gt;
&lt;properties&gt;
&lt;property name="CommandLine"&gt;emake all --emake-annodetail=waiting,registry,md5,lookup,history,file,env --emake-annofile=../Emake-2agents-1st.xml --emake-root=../&lt;/property&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Python's <code>xml.etree.ElementTree</code> implementation doesn't record the parent of an <code>Element</code>. Consequently, <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#supported-xpath-syntax" rel="nofollow">the documentation for XPath</a> includes this:</p>
<blockquote>
<p><code>..</code>  Selects the parent element. Returns <code>None</code> if the path attempts to reach the ancestors of the start element (the element find was called on).</p>
</blockquote>
</div>
<span class="comment-copy"><code>el.find('..')</code> means "in all child elements of this element, find the parent", right?  Wouldn't that just point back to the element itself, instead of the element's parent?</span>
<span class="comment-copy">@JohnGordon touche. Yes you're right: <a href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.find" rel="nofollow noreferrer">Finds the first <b>subelement</b> matching match</a></span>
<span class="comment-copy">See also: <a href="http://stackoverflow.com/questions/2170610/access-elementtree-node-parent-node" title="access elementtree node parent node">stackoverflow.com/questions/2170610/â€¦</a></span>
<span class="comment-copy"><code>lxml.etree.ElementTree</code> does keep track of parents, and may be a good alternative. I tested OPs syntax and it works as expected.</span>
<span class="comment-copy">I was going to add that info to my answer, but couldn't word it right and find the right doc link. Feel free to edit, if you want.</span>
