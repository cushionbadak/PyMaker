<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/3906137/why-cant-i-call-read-twice-on-an-open-file">Why can't I call read() twice on an open file?</a>
<span class="question-originals-answer-count">
                    7 answers
                </span>
</li>
</ul>
</div>
<p>I have the following function, the second function <code>count_forbid(a)</code> can only work 1 time. In this example it count the right value of the word that do not contain letter <code>'c'</code>, but for <code>y</code> it return zero. So it means the code can only do right first time and for all other time it return zero:</p>
<pre><code>import string
fin = open('words.txt')
def forbid_or_not(word,forb):
    for letter in word:
        if letter in forb:
            return False
    return True

def count_forbid(a):
    count = 0
    for line in fin:
        word1 = line.strip()
        if forbid_or_not(word1,a):
            count += 1
    return count

x = count_forbid('c')
y = count_forbid('d')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>After you iterate through the file with:</p>
<pre><code>    for line in fin:
</code></pre>
<p><em>it is going to reach the end</em> and trying to re-iterate will have no effect. </p>
<p>Either change the function to use a <a href="https://docs.python.org/3/library/io.html#io.IOBase" rel="nofollow"><strong>context manager</strong></a> that re-opens the file when the function is called:</p>
<pre><code>def count_forbid(a):
    count = 0
    with open('words.txt') as fin:  # closes the file automatically
        for line in fin:
            word1 = line.strip()
            if forbid_or_not(word1,a):
                count += 1
    return count
</code></pre>
<p>which is the preferred way of opening files in python. </p>
<p>Or, add <a href="https://docs.python.org/3/library/io.html#io.TextIOBase.seek" rel="nofollow"><code>fin.seek(0)</code></a> in between your calls in order to get the file to point to the beginning:</p>
<pre><code>x = count_forbid('c')
fin.seek(0)
y = count_forbid('d')
</code></pre>
</div>
<span class="comment-copy">Instead of using the context manager you can also just "manually" open and close the file.</span>
<span class="comment-copy">Of course, but that relies on the fact that you're vigilant and always remember to close it. That's why context managers are such a nice construct, they do that for you and let you worry about more important things :-).</span>
<span class="comment-copy">WOW, super effective, thank a lot.</span>
<span class="comment-copy">@AnhHoang if this solved your issue you can mark it as the accepted answer by clicking on the tick mark next to the answer :-)</span>
<span class="comment-copy">@Jim I marked it, thanks, I am just a newbie first time use stackoverflow so very sorry for the delay tick.</span>
