<div class="post-text" itemprop="text">
<p>I have been trying to write a python scripts used for checks on IP address to www.blacklistalert.com. The goal is to run the script on one or multiple IP addresses as standard input. Then have the standard output from the site be printed on the command line. </p>
<pre><code>import urllib.parse
import urllib.request

ip = str(urllib.request'[$1]')

url = 'http://www.blacklistalert.org/'
values = { 'query': '$1' }

data = urllib.parse.urlencode(values)
url = '?'.join([url, data])
req = urllib.request.Request(url, binary_data)
response = urllib.request.urlopen(req)
the_page = response.read()

print (the_page)
</code></pre>
<p>I am running into the problem of sending the query to the page, and getting results, which come on a separate page. I am currently getting the error:</p>
<pre><code>ip = str(urllib.request'[$1]')
SyntaxError: invalid syntax
</code></pre>
<p>Whats the best approach to run the IP address query, and get the response in standard output? Thanks in advance.</p>
</div>
<div class="post-text" itemprop="text">
<p>Python is not bash, and does not process arguments on stdin automatically into variables like <code>$1</code> (hint: the only place <code>$</code> is used in Python is when dealing with currency based on the dollar). Instead, Python places command-line arguments in the <a href="https://docs.python.org/3/library/sys.html#sys.argv" rel="nofollow"><code>sys.argv</code></a> list. You can either read them from there (<code>sys.argv[0]</code> is the script's name, <code>sys.argv[1]</code> and so on are the command-line parameters - read the docs for the full story), or use something like the <a href="https://docs.python.org/3/library/argparse.html" rel="nofollow"><code>argparse</code></a> module, which I recommend. There's a bit more code involved, but it'll be worth it in the end.</p>
</div>
<span class="comment-copy">Please explain the nature of the "problem"; at least identify the step in the process that isn't working, and in what <i>way</i> is it not working.</span>
<span class="comment-copy">I am having some syntax error with line 4: ip = str(urllib.request'[$1]'). I would like this line to send the variable, which is an IPV4 address. The next section would be getting the result from the site, and send it to standard output on the command line.</span>
