<div class="post-text" itemprop="text">
<p>I am getting this error when trying to get the GET and POST data.</p>
<pre><code>Exception happened during processing of request from ('127.0.0.1', 62635)
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 295, in _handle_request_noblock
    self.process_request(request, client_address)
  File "/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 321, in process_request
    self.finish_request(request, client_address)
  File "/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 334, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 655, in __init__
    self.handle()
  File "/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/BaseHTTPServer.py", line 340, in handle
    self.handle_one_request()
  File "/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/BaseHTTPServer.py", line 328, in handle_one_request
    method()
  File "server1.py", line 30, in do_GET
    print form.getvalue["foo"]
TypeError: 'instancemethod' object has no attribute '__getitem__'
</code></pre>
<p>The code</p>
<pre><code>from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer
import SocketServer
import cgitb; cgitb.enable()
import cgi


class GP(BaseHTTPRequestHandler):
    def _set_headers(self):
        self.send_response(200)
        self.send_header('Content-type', 'text/html')
        self.end_headers()
    def do_HEAD(self):
        self._set_headers()
    def do_GET(self):
        self._set_headers()
        form = cgi.FieldStorage()
        print form.getvalue["foo"]
        self.wfile.write("&lt;html&gt;&lt;body&gt;&lt;h1&gt;Get Request Received!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;")
    def do_POST(self):
        self._set_headers()
        form = cgi.FieldStorage()
        print form.getvalue["foo"]
        self.wfile.write("&lt;html&gt;&lt;body&gt;&lt;h1&gt;POST Request Received!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;")

def run(server_class=HTTPServer, handler_class=GP, port=8088):
    server_address = ('', port)
    httpd = server_class(server_address, handler_class)
    print 'Server running at localhost:8088...'
    httpd.serve_forever()

run()
</code></pre>
<p>Running the code and I got the above errors. What's wrong in this code?</p>
<pre><code>python server1.py
curl http://localhost:8088?foo=bar
curl -d "foo=bar" http://localhost:8088
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>To solve the immediate error, you can use:</p>
<pre><code>form.getvalue("foo")
</code></pre>
<p>instead of:</p>
<pre><code>form.getvalue["foo"]
</code></pre>
<p>which was causing:</p>
<pre><code>TypeError: 'instancemethod' object has no attribute '__getitem__'
</code></pre>
<p>In addition (as suggested in <a href="https://stackoverflow.com/a/25091973">https://stackoverflow.com/a/25091973</a>), you may want to use:</p>
<pre><code>form = cgi.FieldStorage(
    fp=self.rfile,
    headers=self.headers,
    environ={'REQUEST_METHOD': 'POST'}
)
</code></pre>
<p>instead of:</p>
<pre><code>form = cgi.FieldStorage()
</code></pre>
<p>in the <code>POST</code> request handler.</p>
<p>In the <code>GET</code> request handler, you may want to use <a href="https://docs.python.org/2/library/urlparse.html#urlparse.parse_qs" rel="nofollow noreferrer"><code>urlparse.parse_qs</code></a> (for Python 2) or <a href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.parse_qs" rel="nofollow noreferrer"><code>urllib.parse.parse_qs</code></a> (for Python 3) instead of <code>cgi.FieldStorage</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>The working version based on the answer from Binary Birch Tree</p>
<pre><code>from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer
from urlparse import parse_qs
import cgi

class GP(BaseHTTPRequestHandler):
    def _set_headers(self):
        self.send_response(200)
        self.send_header('Content-type', 'text/html')
        self.end_headers()
    def do_HEAD(self):
        self._set_headers()
    def do_GET(self):
        self._set_headers()
        print parse_qs(self.path[2:])
        self.wfile.write("&lt;html&gt;&lt;body&gt;&lt;h1&gt;Get Request Received!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;")
    def do_POST(self):
        self._set_headers()
        form = cgi.FieldStorage(
            fp=self.rfile,
            headers=self.headers,
            environ={'REQUEST_METHOD': 'POST'}
        )
        print form.getvalue("foo")
        self.wfile.write("&lt;html&gt;&lt;body&gt;&lt;h1&gt;POST Request Received!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;")

def run(server_class=HTTPServer, handler_class=GP, port=8088):
    server_address = ('', port)
    httpd = server_class(server_address, handler_class)
    print 'Server running at localhost:8088...'
    httpd.serve_forever()

run()
</code></pre>
</div>
