<div class="post-text" itemprop="text">
<p>I am trying to read data from a file and then build a dictionary out of the file. With this dictionary, I want to plot a graph with the keys of the dictionary as the X graph and the values of the dictionary as the markup values. However, the key values are strings and I just need to label them. I tried the following code, which throws an error stating that the key value is a string. </p>
<pre><code>The data from the data.txt file reads as follows:
new:10,not new:30,10:40,a:5.0

from matplotlib import pyplot as plt
import numpy as np

fileopen=open("data.txt", "r")
for a in fileopen.readlines():
b= a.split(",")
fileopen.close()
newdict={}
for c in b:
 newdict.update({c.rstrip("\',\",").split(":")[0]:eval(c.rstrip("\',\",").split(":")[1])})


plt.figure(figsize=(8,6), dpi=80)
x=[i for i in newdict]
plt.xticks(np.linspace(0,4,1, endpoint=True))
y=[newdict[j] for j in newdict]
plt.plot(y, color="blue", linewidth=1.0, linestyle="-")
plt.show()
</code></pre>
<p>And this is the error that I get on my console.</p>
<pre><code>File "C:\Users\Annakoppad\Anaconda2\lib\site-packages\numpy\core\numeric.py", line 474, in asarray
return array(a, dtype, copy=False, order=order)

ValueError: could not convert string to float: a
</code></pre>
<p>I am unable to proceed further, can someone help in this regard?</p>
<p>Thanks in advance!!!</p>
</div>
<div class="post-text" itemprop="text">
<p>Try using <code>csv</code> if this is truly csv data. <code>csv.DictReader</code> might be able to help you. Ideally key names aren't mixed through the data, but would be defined positionally based on the first row, with rows like:</p>
<pre><code>new,not new,10,a
10,30,40,5.0
</code></pre>
<p>if you don't want to put keys in the csv at all, you could define a sequence of the key names:</p>
<pre><code>keys=("new","not new",10,"a")
</code></pre>
<p>Remember that when working with csv (and also readlines), each value is read as a string, so if rows contain different data types you'll have to convert the individual keys to get ints or floats.</p>
<p>ref: csv <a href="https://docs.python.org/3/library/csv.html?highlight=csv#csv.DictReader" rel="nofollow">https://docs.python.org/3/library/csv.html?highlight=csv#csv.DictReader</a></p>
</div>
