<div class="post-text" itemprop="text">
<pre><code>def c():
    csvfile = 'example.csv'
    with open(csvfile, 'r') as fin, open('new_'+csvfile, 'w') as fout:
        reader = csv.reader(fin, newline='', lineterminator='\n')
        writer = csv.writer(fout, newline='', lineterminator='\n')
        if you_have_headers:
            writer.writerow(next(reader) + [new_heading])
        for row, val in zip(reader, data):
            writer.writerow(row + [data])
</code></pre>
<p>Above is some code that I have used to create a column for a CSV file. I keep getting the following error</p>
<pre><code>TypeError: 'newline' is an invalid keyword argument for this function
</code></pre>
<p>How do I fix this? Thanks in advance. </p>
</div>
<div class="post-text" itemprop="text">
<p>The <code>newline</code> argument should be included within the <code>open</code> function, not the csv <code>reader</code> and <code>writer</code> functions.</p>
<p>See <a href="https://docs.python.org/3/library/csv.html#csv.reader" rel="noreferrer">here</a> for examples.</p>
</div>
<div class="post-text" itemprop="text">
<p>To avoid this error , open the file in 'wb' mode instead of 'w' mode.
This will eliminate the need for newline = "",
Look below the the corrected code.</p>
<p><div class="snippet" data-babel="false" data-console="true" data-hide="false" data-lang="js">
<div class="snippet-code">
<pre class="snippet-code-css lang-css prettyprint-override"><code>def c():
    csvfile = 'example.csv'
    with open(csvfile, 'r') as fin, open('new_'+csvfile, 'wb') as fout:
        reader = csv.reader(fin, newline='', lineterminator='\n')
        writer = csv.writer(fout, lineterminator='\n')
        if you_have_headers:
            writer.writerow(next(reader) + [new_heading])
        for row, val in zip(reader, data):
            writer.writerow(row + [data])</code></pre>
</div>
</div>
</p>
</div>
<span class="comment-copy">take a look at <a href="https://docs.python.org/3/library/csv.html" rel="nofollow noreferrer">the documentation</a> the only references to <code>newline=''</code> is when opening the file.</span>
<span class="comment-copy">so you would want the <code>newline=''</code> in the <code>with open(csvfile,'r', newline='') .. </code></span>
<span class="comment-copy">Thanks! That fixed it.</span>
<span class="comment-copy">Firstly thanks for the help. It worked fine. I have one extra question. I essentially have 2 more copies of this that add 2 extra columns excluding this one. When I run the code, they later ones override the previous one. They all create a column in the same place. How do I make one create a column after the other (so they create a column on the next one over)?</span>
<span class="comment-copy">@NasifRob what exactly are you trying to do?</span>
<span class="comment-copy">You're welcome @NasifRob. Please create a new question for the other problems though, it isn't very easy to help out using the comment section only</span>
