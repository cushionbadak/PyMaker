<div class="post-text" itemprop="text">
<p>I am trying to properly split words to fit my corpus. To do this I already found the following:</p>
<p><a href="https://stackoverflow.com/questions/51012476/spacy-custom-tokenizer-to-include-only-hyphen-words-as-tokens-using-infix-regex">Spacy custom tokenizer to include only hyphen words as tokens using Infix regex</a></p>
<p>Which fixes hyphenated words, what I can't seem to figure out is how to keep words with apostrophes for contractions like: can't, won't, don't, he's, etc
together as one token in spacy. More specifically I am searching how to do this for dutch words: zo'n, auto's, massa's, etc. but this problem should be language independent.</p>
<p>I have the following tokenizer:</p>
<pre><code>def custom_tokenizer(nlp):
    prefix_re = compile_prefix_regex(nlp.Defaults.prefixes)
    suffix_re = compile_suffix_regex(nlp.Defaults.suffixes)
    infix_re = re.compile(r'''[.\,\?\:\;\...\‘\’\'\`\“\”\"\'~]''')

    return Tokenizer(nlp.vocab, prefix_search=prefix_re.search,
                     suffix_search=suffix_re.search,
                     infix_finditer=infix_re.finditer,
                     token_match=None)
nlp = spacy.load('nl_core_news_sm')
nlp.tokenizer = custom_tokenizer(nlp)
</code></pre>
<p>with this the tokens are:</p>
<p>'Mijn','eigen','huis','staat',<strong>'zo',"'",'n'</strong>,'zes','meter','onder','het','wateroppervlak','van','de','Noordzee','.'</p>
<p>Adn the tokens should be:</p>
<p>'Mijn','eigen','huis','staat',<strong>"zo'n"</strong>,'zes','meter','onder','het','wateroppervlak','van','de','Noordzee','.'</p>
<p>I know it is possible to add custom rules like:</p>
<pre><code>case = [{ORTH: "zo"}, {ORTH: "'n", LEMMA: "een"}]
tokenizer.add_special_case("zo'n",case)
</code></pre>
<p>But I am looking for a more general solution.</p>
<p>I've tried editing the infix_re regex from the other thread, but I doesn't seem to have any impact on the issue. Is there any setting or change I can do to fix this? Any help would be greatly appreciated.</p>
</div>
<div class="post-text" itemprop="text">
<p>There is a very recent Work in Progress in <code>spaCy</code> to fix these type of lexical forms for Dutch. More information in today's Pull Request: <a href="https://github.com/explosion/spaCy/pull/3409" rel="nofollow noreferrer">https://github.com/explosion/spaCy/pull/3409</a></p>
<p>More specifically, <code>nl/punctuation.py</code> (<a href="https://github.com/explosion/spaCy/pull/3409/files#diff-84f02ed25ff9e44641672ca0ba5c1839" rel="nofollow noreferrer">https://github.com/explosion/spaCy/pull/3409/files#diff-84f02ed25ff9e44641672ca0ba5c1839</a>) shows how this can be solved by altering the suffixes:</p>
<p><a href="https://i.stack.imgur.com/1wjfW.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/1wjfW.png"/></a></p>
</div>
