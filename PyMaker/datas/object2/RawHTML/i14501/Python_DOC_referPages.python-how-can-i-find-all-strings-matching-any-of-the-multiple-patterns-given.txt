<div class="post-text" itemprop="text">
<p>I am new to Python and have been trying to find all the strings which match multiple patterns. I did some google search and found some posts which suggest to compile all the patterns into one. However they were using the <code>re.search()</code> function which only returns the first matched instance. I need to search all instances of strings which match any of the patterns in the order of their occurrence. Any direction/suggestion is welcome.</p>
<p>More specifically I am looking for something similar to this grep command</p>
<pre><code>grep -i "[0-9' '-:A-Za-z].* ERROR.*Job failed\|Caused by:\|^      *at\|ERROR\|more$" &lt;file-name&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><code>re.findall(combined_regex, your_string)</code> is probably what you're looking for.</p>
<p>If you plan on doing this many times in the same program, consider compiling the regex as follows for better performance:</p>
<pre><code>compiled = re.compile(combined_regex)
results = compiled.findall(your_string)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>If I understood you right, you're looking for smth like this:</p>
<pre><code>import re

l_string="""gfrwrfr
gerqgeq
ERROR gferagqe
hello ERROR
smth more
more smth
Caused by: gferg
"""

pattern_strings =['[0-9" "-:A-Za-z].*ERROR.*Job run failed', 'Caused by:','^ *at','ERROR','more$']
pattern_string = '|'.join(pattern_strings)
pattern = re.compile(pattern_string)

for line in l_string.split("\n"):
    result = pattern.search(line)
    if result:
        print result.string
</code></pre>
<p>But of course, as we're already in the loop over lines, we can print line instead of match_obj.string.</p>
<p>Program output:</p>
<pre><code>$  ./multiple_re.py
ERROR gferagqe
hello ERROR
smth more
Caused by: gferg
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use <a href="https://pypi.python.org/pypi/multi_pattern_search" rel="nofollow">multi_pattern_search</a>. Example follows.</p>
<pre><code>from multi_pattern_search import MultiPatternSearch

search = MultiPatternSearch()

search.add_keyword("foo")
search.add_keyword("bar")

print search.exist("apple tree foo john doe")

for k, v in search.count("apple tree foo bar foobar john doe").iteritems():
    print k, v
</code></pre>
</div>
<span class="comment-copy">There is also the re.findall, which finds all instances. See the documentation for python's regex <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">docs.python.org/3/library/re.html</a></span>
<span class="comment-copy">Thanks, but I am facing another issue and the command is only returning the match. Is there a way to return the entire line containing the match. This is what I am doing. pattern_strings =['[0-9" "-:A-Za-z].*ERROR.*Job run failed', 'Caused by:','^        *at','ERROR','more$'] ; pattern_string = '|'.join(pattern_strings); pattern = re.compile(pattern_string);results = pattern.findall(&lt;my_multi line string&gt;)</span>
<span class="comment-copy">In that case, looping over lines via <code>splitlines</code> is your best bet.</span>
