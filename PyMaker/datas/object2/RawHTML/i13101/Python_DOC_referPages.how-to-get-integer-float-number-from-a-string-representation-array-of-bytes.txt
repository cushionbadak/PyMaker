<div class="post-text" itemprop="text">
<p>I'm using a C++ server and a few Python clients with <code>zmq</code> ( ZeroMQ ) lib. I would like to send a <strong><code>float</code></strong> and an <strong><code>integer</code></strong> to the clients.</p>
<p>I have read through the manual for <code>zmq</code>, but I have a problem sending anything else than a <strong><code>char array</code></strong> from the C++ code, which can not be interpreted by the <code>python</code> client as <code>integer</code> or <code>float</code>.</p>
<p>My C++ code looks like this:</p>
<pre><code>//  Socket to talk to clients
void *context = zmq_ctx_new();
void *responder = zmq_socket(context, ZMQ_REP);
int rc = zmq_bind(responder, "tcp://*:5555");
int msg_cnt = 0;

while (1) {     
    char data[] = "M3:155";
    sendCommand(responder, data);
}

static void sendCommand(void* r, char* cmd) {

    static int n;
    char buffer[10];
    zmq_recv(r, buffer, 10, 0);

    zmq_send(r, cmd, sizeof(cmd), 0);
    std::cout &lt;&lt; std::to_string(n++) &lt;&lt; ". command sent." &lt;&lt; std::endl;

    Sleep(1);
}
</code></pre>
<p>And the python client is something like this:</p>
<pre><code>context = zmq.Context()

#  Socket to talk to server
print("Connecting to hello world server")
socket = context.socket(zmq.REQ)
socket.connect("tcp://localhost:5555")

#print("Sending request %s ")
socket.send(b"I am here.")

#  Get the reply.
message = socket.recv()
#message = b"M5:-"
print("Received reply [%s]" % (message))

match = re.match(b'.*(M\d+):(\d+)', message)

print ("Command is: ", match.group())
print ("Motor: ", match.group(1))
print ("Target Angle: ", match.group(2))
</code></pre>
<p><strong>Output for python:</strong></p>
<p>Received reply <code>[b'M3:155\x00\xcc']</code><br/>
Command is: <code>b'M3:155'</code><br/>
Motor: <code>b'M3'</code><br/>
Target Angle: <code>b'155'</code><br/></p>
<p>How can I parse the <code>b'155'</code> as an <code>int</code> or <code>float</code>?</p>
<p>Thank you in advance!</p>
</div>
<div class="post-text" itemprop="text">
<p>Erm...</p>
<pre><code>3&gt;&gt; float(b'155')
155.0
</code></pre>
</div>
<span class="comment-copy">I have forgot to mention that I am a Python lame, using it for about 4 hours. :) Thanks for the quick answer!</span>
<span class="comment-copy">@ToMmY_hun: Then I would recommend taking the time to go through <a href="https://docs.python.org/3/tutorial/index.html" rel="nofollow noreferrer">the tutorial</a>, seeing as how you already have some skill in at least one other programming language.</span>
<span class="comment-copy">Yeah I will do that, but now I have to finish a project until Friday. Thank you for your help!</span>
