<div class="post-text" itemprop="text">
<p>Is there a way to apply a patch (in the form of a diff file) to a repo using only the gitpython library?</p>
<p>In other words, is there a gitpython equivalent of the git-apply command?</p>
</div>
<div class="post-text" itemprop="text">
<p>Solution is to do</p>
<pre><code>r = Repo('path-to-repo')
r.git.execute(['git','apply','patch.diff'])
</code></pre>
<p>I had tried this before but I had omitted the 'git' at the beginning of the argument list, which gave an error about the command not existing.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use git directly, like this:</p>
<pre><code> repo = git.Repo('repository_path') 

 repo.git.apply(['-3', 'patch-file'])
</code></pre>
<p>this will perform the git command: </p>
<pre><code>git apply -3 patch-file
</code></pre>
</div>
<span class="comment-copy">Is there no API in gitpython to do this directly? I am asking this because, most of the time we have a string which contains diff. In that case we will have to first write the diff to a file - then run <code>r.git.execute</code> and then clean up the file.</span>
<span class="comment-copy">as far as i know there is nothing in the API. are you familiar with <a href="https://docs.python.org/3/library/tempfile.html" rel="nofollow noreferrer">tempfile</a>, I think that will make your scenario fairly painless</span>
<span class="comment-copy">Please try to explain what your code is doing.</span>
<span class="comment-copy">Don't use links directly, try to paste some of the content to your answer!</span>
