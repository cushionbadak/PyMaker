<div class="post-text" itemprop="text">
<p>I want to write the HTML of a website to the file I created, tough I decode to utf-8 but still it puts up a error like this, I use <code>print(data1)</code> and the html is printed properlyand I am using <em>python 3.5.0</em></p>
<pre><code>import re
import urllib.request

city = input("city name")   
url = "http://www.weather-forecast.com/locations/"+city+"/forecasts/latest"
data  = urllib.request.urlopen(url).read()
data1 = data.decode("utf-8")
f = open("C:\\Users\\Gopal\\Desktop\\test\\scrape.txt","w")
f.write(data1)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You've opened a file with the <em>default system encoding</em>:</p>
<pre><code>f = open("C:\\Users\\Gopal\\Desktop\\test\\scrape.txt", "w")
</code></pre>
<p>You need to specify your encoding explicitly:</p>
<pre><code>f = open("C:\\Users\\Gopal\\Desktop\\test\\scrape.txt", "w", encoding='utf8')
</code></pre>
<p>See the <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow"><code>open()</code> function documentation</a>:</p>
<blockquote>
<p>In text mode, if encoding is not specified the encoding used is platform dependent: <code>locale.getpreferredencoding(False)</code> is called to get the current locale encoding.</p>
</blockquote>
<p>On your system, the default is a codec that cannot handle your data.</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>f = open("C:\\Users\\Gopal\\Desktop\\test\\scrape.txt","w",encoding='utf8')


f.write(data1)
</code></pre>
<p>This should work, it did for me</p>
</div>
<span class="comment-copy">unrelated: (1) use <code>urllib.parse.quote(city, safe='')</code> (2) in general, the server may use a different character encoding, see <a href="http://stackoverflow.com/q/14592762/4279">A good way to get the charset/encoding of an HTTP response in Python</a> (3) use <code>with</code>-statement to close the file, otherwise nothing might be written to disk due to buffering.</span>
<span class="comment-copy">This does not seem to add anything to a previously posted answer.</span>
