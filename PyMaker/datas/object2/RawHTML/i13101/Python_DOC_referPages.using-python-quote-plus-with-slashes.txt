<div class="post-text" itemprop="text">
<p>I'm using <code>quote_plus</code> from <code>urllib</code> which works great along with its cousin <code>unquote_plus</code>, for making pluses between the spaces such that: <code>The Cat Sat</code> becomes <code>The+Cat+Sat</code> which is great. However now the issue is that using this effects the path when I have <code>/description/id/34/the cat sat on</code> becomes something like this</p>
<pre><code>%2Fdescription%2F274%2Fthe+cat+sat+on
</code></pre>
<p>What should I do. I really want the plusses for the spaces, but I'm torn between doing just a replace on spaces for plusses. Is there a proper treatment in building up the path to start with. I really want to preserve the slashes and the plusses.</p>
<p>Flask template view:</p>
<pre><code>&lt;a href="{{animal.url|quote_plus}}"&gt;{{animal.title}}&lt;/a&gt;
</code></pre>
<p>in the code.py:</p>
<pre><code>animal["url"] = "/description/"+str(animal["id"]) + "/" + animal["title"]
</code></pre>
<p>also:</p>
<pre><code>app.jinja_env.filters['quote_plus'] = lambda u: quote_plus(u)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>When you call quote_plus, set safe='/', which is what you are asking for.</p>
<p>Check out the docs at <a href="https://docs.python.org/3/library/urllib.parse.html" rel="nofollow">https://docs.python.org/3/library/urllib.parse.html</a>
Notice that quote has a default parameter safe='/'
wherease quote_plus has a default safe=''</p>
<pre><code>urllib.parse.quote(string, safe='/', encoding=None, errors=None)
urllib.parse.quote_plus(string, safe='', encoding=None, errors=None)
</code></pre>
<p>The difference is illustrated here:</p>
<pre><code>url = '/description/id/34/the cat sat on'
print 'quote: ', urllib.quote(url)
print 'quote_plus: ', urllib.quote_plus(url)
print 'quote_plus with safe set: ', urllib.quote_plus(url, safe='/')
</code></pre>
<p>output</p>
<pre><code>quote:  /description/id/34/the%20cat%20sat%20on
quote_plus:  %2Fdescription%2Fid%2F34%2Fthe+cat+sat+on
quote_plus with safe set:  /description/id/34/the+cat+sat+on
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>How about using <code>urllib.quote</code> instead of <code>urllib.quote_plus</code>? It will quote '+' with '%20' and leave slash unchanged. I think it is not customisable, because it should conform with certain url standard. </p>
</div>
<span class="comment-copy">Can you share the actual snippet of code you're using?</span>
<span class="comment-copy">I really wanted plus, as this looks so much nicer when a website is indexed and more human readable too.</span>
<span class="comment-copy">Then have try to replace '%20' with '+', then still use unquote_plus to convert it back. I just tried and it works.</span>
