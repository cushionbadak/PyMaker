<div class="post-text" itemprop="text">
<p>I want to split my text into contexts and captures where I have rules like:</p>
<pre><code>&lt;abc&gt; e f &lt;ghi&gt;
&lt;abc&gt; e f
e f &lt;ghi&gt;
</code></pre>
<p>Here I want to create rules that only affect strings inside of the markers <code>&lt;&gt;</code>
and example would be the output:</p>
<pre><code>&lt;aabbcc&gt; e f &lt;gghhii&gt;
&lt;axyzbxyzcxyz&gt; e f 
e f &lt;g_h_i_&gt;
</code></pre>
<p>using <code>line.split('')[i]</code> doesn't cut it because I have two different separators</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/re.html#re.sub" rel="nofollow"><code>re.sub</code></a> to replace the parts within <code>&lt;...&gt;</code>, using a replacement callback function:</p>
<pre><code>def replace_function(match):
    return '&lt;' + ''.join(c + c for c in match.group(1)) + '&gt;'

text = re.sub(r"&lt;(.*?)&gt;", replace_function, text)
</code></pre>
<p>This will duplicate the chars in each of the tags, but you can extend the function any way you want to perform more complex substitutions.</p>
</div>
<span class="comment-copy">Don't use <code>split</code>. Use <code>re.search</code> using <code>r'&lt;([^&gt;]*)&gt;'</code> regex and get captured group #1</span>
<span class="comment-copy">maybe this expression in re.findall?</span>
<span class="comment-copy">Yes that regex will work fine in <code>re.findall</code></span>
