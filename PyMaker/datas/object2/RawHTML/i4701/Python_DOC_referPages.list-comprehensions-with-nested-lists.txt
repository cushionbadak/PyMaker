<div class="post-text" itemprop="text">
<p>Would like to ask question related to nested lists in Python. </p>
<p>I have a nested list </p>
<pre><code>list_1 = [[1,3,0,1], [1,1,0,2,3,0,4,], [2,1,2,2,3,4]]
</code></pre>
<p>I want to perform rounding and dision operation on nested list but keep it grouped as it is now (to make it more clear I need to flatten list perform operations and that unflatten it again in same groups).</p>
<p>For example the result for list 'list_1' after division by 2 shoud be</p>
<pre><code>list_2 = [[0.5,1.5,0,0.5],[0.5,0.5,0,1,1.5,0,2],[1,0.5,1,1,1.5,2]]
</code></pre>
<p>The code I use to perform this for signle list is below:</p>
<pre><code>list_2 = [round(b,2) for b in [a / 2 for a in list_1]]
</code></pre>
<p>Could you please suggest way to solve this issue. Currently I am getting error </p>
<pre><code>"unsupported operand type(s) for /: 'list' and 'float'"
</code></pre>
<p>Thank you.</p>
</div>
<div class="post-text" itemprop="text">
<p>Fixing your code -</p>
<pre><code>[[j / 2. for j in i] for i in list_1] 
</code></pre>
<p>If you're worried about performance, you could multiply by .5 instead of dividing by 2 (you may not see <em>significant</em> differences considering this is a quadratic solution, but it should count for <em>something</em>).</p>
<pre><code>[[j * .5 for j in i] for i in list_1] 
</code></pre>
<p>The docs have a section just for <a href="https://docs.python.org/3/tutorial/datastructures.html#nested-list-comprehensions" rel="nofollow noreferrer">Nested List Comprehensions</a>, please consider having a read through.</p>
</div>
<span class="comment-copy">Have you considered using <code>NumPy</code>? Alternatively (especially if your lists are not rectangular), use nested list comprehension. Python itself does not allow to broadcast arithmetic operations.</span>
<span class="comment-copy">Your <code>list_2</code> output seems to be missing an element in the first sublist?</span>
<span class="comment-copy">Thank you for reply. Could you please suggest a link, where I can see sample of using NumPy for this type of operations? I couldn't find similar case myself.</span>
<span class="comment-copy">Delirious Lettuce, good catch. Corrected.</span>
<span class="comment-copy">@Delirious Lettuce  - should be 0.5. Corrected. list_2 results I wrtoe by hand, just to make what I want to get more clear. Thanks.</span>
<span class="comment-copy">Thanks. Works. And thank you for link.</span>
<span class="comment-copy">@cᴏʟᴅsᴘᴇᴇᴅ community wiki: classy. BTW if OP is using python 2 the result will be incorrect.</span>
<span class="comment-copy">@Jean-FrançoisFabre Oops, thanks :)</span>
<span class="comment-copy">multiplication is faster than division: <code>j * 0.5</code> is probably slightly faster :)</span>
