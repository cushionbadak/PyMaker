<div class="post-text" itemprop="text">
<p>I am pretty new to python and I was wondering if anyone could help me out...
I am trying to write a script that checks if I have admin on my TS3 server. However I just can't figure it out after a whole day.</p>
<p>The api I use is linked here:
<a href="http://py-ts3.readthedocs.io/en/latest/index.html" rel="nofollow noreferrer">http://py-ts3.readthedocs.io/en/latest/index.html</a></p>
<pre><code>    import time
    import ts3


    def admincheck(nickname, id):
        while True:
            client = ts3conn.clientdbfind(pattern=nickname)
            group = ts3conn.servergroupclientlist(sgid=id)
            for client in client:
                print("client db id:\n" + (client["cldbid"]))
            for group in group:
                print("client db ids with admin:\n" + (group["cldbid"]))
                time.sleep(1.5)
            if int(client["cldbid"]) in range(int(group["cldbid"])):
                print("client has admin")
            else:
                print("client does not admin")



    with ts3.query.TS3Connection("localhost") as ts3conn:
            ts3conn.login(
                    client_login_name="serveradmin",
                    client_login_password="&lt;ommited&gt;"
            )
            ts3conn.use(sid=1)
            admincheck("test", "6")
</code></pre>
<p>I think my problem is in this part: </p>
<pre><code>    if int(client["cldbid"]) in range(int(group["cldbid"])):
            print("client has admin")
        else:
            print("client does not admin")
</code></pre>
<p>It would be great if someone could help :)
Thanks in advance!</p>
<p><strong>EDIT</strong>
Since I didn't state the question at hand (noob here), this is a sample output:</p>
<pre><code>    client db id:
    2
    client db ids with admin:
    2
    client db ids with admin:
    3
    client db ids with admin:
    4
    client does not admin
</code></pre>
<p>As you can see, the output says that the client does not have admin, eventhough the client db id corresponds with an entry in the list with ids that have admin.</p>
</div>
<div class="post-text" itemprop="text">
<p>Great read: <a href="https://ericlippert.com/2014/03/05/how-to-debug-small-programs/" rel="nofollow noreferrer">How to debug small programs</a></p>
<p>Problems:</p>
<pre><code>def admincheck(nickname, id):
    while True:
        client = ts3conn.clientdbfind(pattern=nickname)
        group = ts3conn.servergroupclientlist(sgid=id)

        # you are overwriting your client-list with its first element
        # both have the same name
        for client in client:
            print("client db id:\n" + (client["cldbid"]))

        # you are overwriting your group-list with its first element
        # both have the same name
        for group in group:
            print("client db ids with admin:\n" + (group["cldbid"]))
            time.sleep(1.5)

        # you should check if any client-id is equal to any inside group-ids
        # instead you do something with range - wich does not make much sense?
        if int(client["cldbid"]) in range(int(group["cldbid"])):
            print("client has admin")
        else:
            print("client does not admin")
</code></pre>
<p>If you need to convert multiple numbers, use map:</p>
<pre><code>text = [ "1","12","123","1234","12345"]
asInt = list( map(int,text))  # apply int() to each part of text, returns iterable 

print(asInt)  #   [1, 12, 123, 1234, 12345]

ids = ["5","7","1"] 
idNums = list(map(int,text))  # same 

print(any(x in asInt for x in idNums))   # checks if any x from idNums is 
                                         # inside asInt (your groupIds) 
</code></pre>
<p>Output:</p>
<pre><code>[1, 12, 123, 1234, 12345]
True
</code></pre>
<p>Doku: <a href="https://docs.python.org/3/library/functions.html#any" rel="nofollow noreferrer">any()</a> and <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow noreferrer">map()</a></p>
</div>
<span class="comment-copy">Fix your indentation and describe what happens. Do you get an error? Incorrect results?</span>
<span class="comment-copy"><i>I think my problem is in this part</i> What problem? You haven't described a problem or asked a question.</span>
<span class="comment-copy">Sorry guys, The problem is the output. It is supposed to check if a user is admin based on the database ID, what happens however is that it says not admin no matter what.</span>
<span class="comment-copy">this is an output example: client db id: 2 client db ids with admin: 2 client db ids with admin: 3 client db ids with admin: 4 client does not admin</span>
<span class="comment-copy">Please edit your question when answering things from comments and place the answers as edit into the question itself. Comments are ill fitted for code.</span>
