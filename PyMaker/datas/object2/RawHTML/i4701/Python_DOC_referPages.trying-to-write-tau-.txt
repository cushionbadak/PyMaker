<div class="post-text" itemprop="text">
<p>I'm trying to write html into a text file and running into problems. At first I couldn't print it but setting up a translate helped,</p>
<pre><code>non_bmp_map = dict.fromkeys(range(0x10000, sys.maxunicode + 1), 0xfffd)
</code></pre>
<p>(found on this site).</p>
<p>It is annoying that printing and writing text can be 'different deals' with Python; here is code that fails:</p>
<pre><code>#--------*---------*---------*---------*---------*---------*---------*---------*
# Desc: writing tau = 'τ'
#--------*---------*---------*---------*---------*---------*---------*---------*
import os, sys

while True:
    tau = 'τ'
    os.chdir("C:\\Users\\Mike\\Desktop")
    dd = open('tmp.txt', 'w')
    dd.write(tau + '\n')
    dd.close()
    sys.exit()
</code></pre>
<p>OUTPUT:</p>
<pre><code>Traceback (most recent call last):
  File "C:\Users\Mike\AppData\Local\Programs\Python\Python36-32\board.py", line 11, in &lt;module&gt;
    dd.write(tau + '\n')
  File "C:\Users\Mike\AppData\Local\Programs\Python\Python36-32\lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
UnicodeEncodeError: 'charmap' codec can't encode character '\u03c4' in position 0: character maps to &lt;undefined&gt;
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You’ll need to specify an encoding when opening the file. UTF-8 is pretty much always the right choice here.</p>
<pre><code>import os

tau = "τ"
os.chdir(r"C:\Users\Mike\Desktop")

with open("tmp.txt", "w", encoding='utf-8') as dd:
    print(tau, file=dd)
</code></pre>
<p>This is something a lot of people forget when using <code>open</code>, but it’s important.</p>
</div>
<div class="post-text" itemprop="text">
<p>It sounds like you need to specify an encoding when you open your file. From the <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow noreferrer"><code>open</code> documentation</a>:</p>
<blockquote>
<p>The default encoding is platform dependent (whatever
  <a href="https://docs.python.org/3/library/locale.html#locale.getpreferredencoding" rel="nofollow noreferrer"><code>locale.getpreferredencoding()</code></a> returns</p>
</blockquote>
<p>If your default system encoding doesn't include the <code>τ</code> character, then you will get this error. Try specifying UTF-8. Assuming you are on Python 3:</p>
<pre><code>dd = open('tmp.txt', 'w', encoding = 'utf-8')
</code></pre>
</div>
<span class="comment-copy">I researched this for hours and started putting the encode on the write statement with lower case 'utf-8' - it failed.. Anyway it all looks good now!</span>
