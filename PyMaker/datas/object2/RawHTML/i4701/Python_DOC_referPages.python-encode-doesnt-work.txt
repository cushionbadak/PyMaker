<div class="post-text" itemprop="text">
<p>I've tried <code>encode()</code> and it doesn't work. I keep getting <code>TypeError: must be str, not bytes</code> because normally I'd get <code>TypeError: a bytes-like object is required, not 'str'</code>.</p>
<pre><code>ip = socket.gethostbyname("google.com")
port = 80
robot = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
payload = "Hello world"
try:
    robot.connect((ip, port)))
    robot.send('GET '+payload.encode()+' HTTP/1.1\n\n')
except socket.error:
    print("connection lost")
robot.close()
</code></pre>
<p>I dont understand what I did wrong?</p>
</div>
<div class="post-text" itemprop="text">
<p>If you look at the documentation for <a href="https://docs.python.org/3/library/socket.html#socket.socket.send" rel="nofollow noreferrer"><code>socket.send</code></a>, you can see that the first argument is <code>bytes</code>, not a string. You <code>encode</code> a string with a particular encoding to turn it into bytes, and you <code>decode</code> bytes with a particular encoding to turn them into a string:</p>
<pre><code>robot.send(b'GET ' + payload.encode() + b' HTTP/1.1\n\n')
</code></pre>
<p><code>str.encode</code> and <code>str.decode</code> default to <code>utf-8</code>.</p>
</div>
