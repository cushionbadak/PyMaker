<div class="post-text" itemprop="text">
<p>when I put / or \ between '' it seems <strong>replace method</strong> can't catch the slash.
I tried to use "" instead of it but failed again.</p>
<p><code>h = marshal.dumps(func.__code__).replace(b'\', b'/')</code></p>
<pre><code>code=h.decode('raw_unicode_escape')
</code></pre>
<p>I am using python 3.6 version.
function from <strong>keras generic_utils.py</strong></p>
<pre><code>def func_dump(func):
    """Serializes a user defined function.`

    # Arguments
        func: the function to serialize.

    # Returns
        A tuple `(code, defaults, closure)`.
    """
    h = marshal.dumps(func.__code__).replace(b str(\), b str(/))
    code=h.decode('raw_unicode_escape')


    defaults = func.__defaults__
    if func.__closure__:
        closure = tuple(c.cell_contents for c in func.__closure__)
    else:
        closure = None
    return code, defaults, closure
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>A single backslash <code>'\'</code> is <a href="https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals" rel="nofollow noreferrer">interpreted as an escape character</a>. To specify a backslash character you need to use a double backslash:</p>
<pre><code>h = marshal.dumps(func.__code__).replace(b'\\', b'/')
</code></pre>
<p>Or if using Python 3.3+ use a raw binary literal:</p>
<pre><code>h = marshal.dumps(func.__code__).replace(rb'\', b'/')
</code></pre>
</div>
<span class="comment-copy">Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href="http://stackoverflow.com/help/mcve">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described.</span>
<span class="comment-copy">@Prune I have uploaded it with the full function. It will be hard to upload the full code of the script but I think the function description while be good for describing the problem.</span>
<span class="comment-copy">Your question still lacks a clear problem statement. "it seems like I didn't do anything" and "it failed again" aren't clear problem statements. You should describe what you expected to happen, what happened instead, and if there's an error message you should include it in your question.</span>
<span class="comment-copy">@Aran-Fey now is clear enough I think.</span>
<span class="comment-copy">Since Python 3.3, also the "raw binary literal" can be used -- like <code>rb'\'</code> or <code>br'\'</code>.</span>
