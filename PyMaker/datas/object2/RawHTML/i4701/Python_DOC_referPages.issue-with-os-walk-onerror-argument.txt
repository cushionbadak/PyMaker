<div class="post-text" itemprop="text">
<p>i searched everywhere but I could not find one explanation on how os.walk(onerror) works.</p>
<p>os.walk is defautly ignoring listdir() errors but I need to recieve at least alert, in better case path of directory which caused this error. How should I set up this argument?</p>
<p>Thank you for help.</p>
</div>
<div class="post-text" itemprop="text">
<p>The error handler should be a callable.  It will be called with one argument, the exception instance.</p>
<pre><code>def walk_error_handler(exception_instance):
    print("uh-oh!")  # you probably want to do something more substantial here..

for root, dirs, files in os.walk(dirname, onerror=walk_error_handler):
    ...
</code></pre>
<p><code>os.walk</code> ignoring errors by default is by design.  This allows the walk to continue to traverse other directories even after, for example, one subdirectory encountered in the walk could not be listed due to insufficient permissions.</p>
<p>When handling the exception instance, all the information you are interested in is likely contained in the <code>exception_instance.args</code> and the <code>type(exception_instance)</code>.  Since it's an <code>OSError</code> (or a subtype), the <code>errno</code> will be a useful attribute.  </p>
<p>You can make comparisons against the constants of the stdlib <a href="https://docs.python.org/3/library/errno.html" rel="nofollow noreferrer"><code>errno</code></a> module.  For example, permission denied is <a href="https://docs.python.org/3/library/errno.html#errno.EACCES" rel="nofollow noreferrer"><code>errno.EACCES</code></a> (13).  That's the error you'd get if you tried to list <code>/root</code> as a normal user.</p>
</div>
<span class="comment-copy">Please. seach SO before posting your question. Chances are it is already answered. See the dupes answers.</span>
<span class="comment-copy">@PatrickArtner  That's not a duplicate, in my opinion.  It asks why the error is ignored by default, this asks how to set up an error handler.</span>
<span class="comment-copy">@wim The answers are. They cite the api on how to set up an errorhandler.?</span>
<span class="comment-copy">@PatrickArtner  Are you looking at a different one than I am?  They don't show any code on how to setup a handler..</span>
<span class="comment-copy">Why don't you post the message you mean as a comment  @PatrickArtner</span>
<span class="comment-copy">Is there any way to get atributes of error? I tried to call strerror() but it returned "TypeError: 'member_descriptor' object is not callable"</span>
<span class="comment-copy">One more question. Is there any way to find out which file it was trying to open?</span>
<span class="comment-copy">Yes: check the <code>exception_instance.filename</code> attribute.</span>
<span class="comment-copy">Thank you, it helped me a lot. I hope it will help more people in similar situation.</span>
