<div class="post-text" itemprop="text">
<p>I am a python noob trying to parse through an XML API response using Elementtree. The response contains custom data from a form and I am having trouble trying to access some of the nested elements. Below is my code:</p>
<pre><code>response = requests.get("https://crm.zoho.com/crm/private/xml/Deals/getCVRecords?newFormat=1&amp;authtoken=authtoken&amp;scope=crmapi&amp;cvName=Open Deals")
tree = ElementTree.fromstring(response.content)
print (response.text)
</code></pre>
<p>Through this call I am able to get this response: </p>
<pre><code>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;response uri="/crm/private/xml/Deals/getCVRecords"&gt;
&lt;result&gt;
    &lt;Deals&gt;
        &lt;row no="1"&gt;
            &lt;FL val="DEALID"&gt;123456789&lt;/FL&gt;
            &lt;FL val="SMOWNERID"&gt;0000000000&lt;/FL&gt;
            &lt;FL val="Deal Owner"&gt;&lt;![CDATA[helpme]]&gt;&lt;/FL&gt;
        &lt;/row&gt;
    &lt;/Deals&gt;
&lt;/result&gt;
&lt;/response&gt;
</code></pre>
<p>I am trying to access the DEALID# (123456789) as well as HELPME inside [CDATA[helpme]] elements. Any help is greatly appreciated. Thanks!</p>
</div>
<div class="post-text" itemprop="text">
<p>I highly recommend you check out <a href="https://github.com/martinblech/xmltodict" rel="nofollow noreferrer">https://github.com/martinblech/xmltodict</a>. I've used this for massive XML processing and it is very reliable. </p>
<pre><code>&gt;&gt;&gt; xml = """
... &lt;root xmlns="http://defaultns.com/"
...       xmlns:a="http://a.com/"
...       xmlns:b="http://b.com/"&gt;
...   &lt;x&gt;1&lt;/x&gt;
...   &lt;a:y&gt;2&lt;/a:y&gt;
...   &lt;b:z&gt;3&lt;/b:z&gt;
... &lt;/root&gt;
... """
&gt;&gt;&gt; xmltodict.parse(xml, process_namespaces=True) == {
...     'http://defaultns.com/:root': {
...         'http://defaultns.com/:x': '1',
...         'http://a.com/:y': '2',
...         'http://b.com/:z': '3',
...     }
... }
True
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Code below should find and print out each deal id that it finds.</p>
<pre><code>import xml.etree.ElementTree as ET
import requests

root = ET.fromstring(requests.get(your_link).content)

# find 'result' element
result = root.find('result')
# then, find 'Deals' which was nested in 'result'
deals = result.find('Deals')

# this can be simplified:
deals = root.find('result').find('Deals')

for row in deals.findall('row'):  # go through all rows (I assumed there can be more than one)
    deal_id_elem = row.find('FL[@val="DEALID"]')
    print('Found ID', deal_id_elem.text)
</code></pre>
<p><code>deal_id_elem = row.find('FL[@val="DEALID"]')</code> finds element which has an attribute <code>val</code> equal to <code>DEALID</code>. This is example use of 
<a href="https://docs.python.org/3/library/xml.etree.elementtree.html#supported-xpath-syntax" rel="nofollow noreferrer">Xpath syntax</a></p>
</div>
<span class="comment-copy">What have you tried? Do you know about using XPATH queries with <code>tree.find</code>?</span>
<span class="comment-copy">If you're bewildered by XPATH, <code>.//FL[@val='DEALID']</code> handles your first question, or <code>./result/Deals/row/FL[@val='DEALID']</code>. You should be able to decide whether you want the first one, the second one, or something more explicit than the first but not quite as explicit as the second. And from there, figuring out how to get the text out of the node, and how to do the other search, should be pretty easy. But if you get stuck, you'll have a good, specific question to ask.</span>
