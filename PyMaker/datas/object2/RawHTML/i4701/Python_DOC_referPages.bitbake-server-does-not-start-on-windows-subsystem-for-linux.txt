<div class="post-text" itemprop="text">
<p>I am following the <a href="https://www.yoctoproject.org/docs/2.4.2/yocto-project-qs/yocto-project-qs.html" rel="nofollow noreferrer">Quick Start Guide for Yocto Project</a> on <strong>Windows Subsystem for Linux</strong>.</p>
<p>I cloned all the necessary stuff:</p>
<pre><code>sudo apt-get install gawk wget git-core diffstat unzip texinfo gcc-multilib \
 build-essential chrpath socat cpio python python3 python3-pip python3-pexpect \
 xz-utils debianutils iputils-ping libsdl1.2-dev xterm
</code></pre>
<p>cloned the repository to a directory in the <code>/mnt/c/Users/&lt;myUser&gt;/Yocto</code> directory</p>
<p>created a branch as mentioned in the manual</p>
<pre><code> cd poky/ &amp;&amp; git checkout tags/yocto_2.4.2 -b poky_2.4.2
</code></pre>
<p>and executed the file</p>
<pre><code> source oe-init-build-env
</code></pre>
<p>Once I execute <code>bitbake core-image-sato</code> I get the following Error:</p>
<pre><code>Previous bitbake instance shutting down?, waiting to retry...
Previous bitbake instance shutting down?, waiting to retry...                                                 
NOTE: Retrying server connection... (Traceback (most recent call last):                                                                                                                                     
File "/mnt/c/Users/&lt;user&gt;/Yocto/poky/bitbake/lib/bb/main.py", 
line 441, in setup_bitbake                                          
server = bb.server.process.BitBakeServer(lock, sockname, configuration, featureset)
File "/mnt/c/Users/&lt;user&gt;/Yocto/poky/bitbake/lib/bb/server/process.py", 
line 385, in __init__                                                                                                      
self.sock.bind(os.path.basename(sockname)) 
PermissionError: [Errno 1] Operation not permitted 
                                                                                                                                               )                                                                                                                                                                                                         
WARNING: /mnt/c/Users/des/Development/Yocto/poky/bitbake/lib/bb/main.py:476:
 ResourceWarning: unclosed &lt;socket.socket fd=14, 
family=AddressFamily.AF_UNIX, type=SocketKind.SOCK_STREAM, proto=0&gt;            
logger.info("Retrying server connection... (%s)" % traceback.format_exc())                                                                                                                                                                                                                                                                                                                                        
NOTE: Reconnecting to bitbake server...                                                                                                                                                                   
NOTE: Retrying server connection...                                                                                                                                                                       
ERROR: Unable to connect to bitbake server, or start one                                                                                                                                                  
</code></pre>
<p>I stumbled upon some GitHub Issue from the WSL Issue Tracker that this might have something to do with <code>inotify</code>.</p>
<p>I can't figure out what is wrong here and which socket is the error really about?</p>
</div>
<div class="post-text" itemprop="text">
<p>First off, good for you trying out Yocto on the Windows Subsystem for Linux! You are a brave individual.</p>
<p>The problem you are running into is probably filesystem related.</p>
<p>The socket it is trying to create is <code>bitbake.sock</code> referenced in <code>lib/bb/main.py</code>. This is pretty much the first thing bitbake does, so if it cannot bind to that socket the server won't start.</p>
<p>I should mention that you probably saw a warning that you were not using a "supported distribution". Still, it is interesting seeing someone try this idea out.</p>
<p>For serious development I'd recommend using virtualization until WSL is mature enough to support applications as complex as bitbake.</p>
<p>If you are interested in contributing to the Yocto Project and getting bitbake working on any platform check out the <a href="https://wiki.yoctoproject.org/wiki/Newcomers" rel="nofollow noreferrer">newcomers page</a>, submit a feature request in the <a href="https://bugzilla.yoctoproject.org/" rel="nofollow noreferrer">buzilla</a>, and join us for the <a href="https://www.yoctoproject.org/monthly-technical-call/" rel="nofollow noreferrer">monthly technical call</a>. The project is always interested in using new and exciting technologies, and patches are always welcomed.</p>
</div>
<div class="post-text" itemprop="text">
<p>I have also tried this and had the same issue when building from within the /mnt/c/../poky/build location. As of Win ver. 1803 Build#17134.1 I can't seem to get pyinotify and the bitbake scripts to work from the widows directory.</p>
<p>However bitbake works from WSL when inside the WSL directory structure, when did this I simply</p>
<p><code>cp -a -r /mnt/c/linux/. ~/</code> </p>
<p>But this was a mistake as I had already attempted to compile and had just copied my symbolic links to a new location. </p>
<p>I have added mc (<a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwie6Nj9jtfeAhWPG3wKHf4gBF4QFjAAegQIBxAB&amp;url=https%3A%2F%2Fmidnight-commander.org%2F&amp;usg=AOvVaw3ylNsUqoYeqj5lTBbm43aW" rel="nofollow noreferrer">Midnight Commander</a>) to my WSL because I am too lazy to type everything every time and use mcedit as my default editor, because it has syntax highlighting, mouse, go to line, search support and more (but the point is get used to the terminal editor of your choice) .  My first run completed with errors, because of the fore mentioned copy path error, but after double checking the log and resetting my links I will compile again (more to come).</p>
<pre><code> ### Shell environment set up for builds. ###

You can now run 'bitbake &lt;target&gt;'

Common targets are:
    core-image-minimal
    core-image-sato
    meta-toolchain
    meta-ide-support

You can also run generated qemu images with a command like 'runqemu qemux86'
~/poky/build $ (wsl-test-yocto-2.5) bitbake core-image-sato
Parsing recipes: 100% |##################################################################################################| Time: 0:00:26
Parsing of 814 .bb files complete (0 cached, 814 parsed). 1282 targets, 46 skipped, 0 masked, 0 errors.
NOTE: Resolving any missing task queue dependencies

Build Configuration:
BB_VERSION           = "1.37.0"
BUILD_SYS            = "x86_64-linux"
NATIVELSBSTRING      = "ubuntu-16.04"
TARGET_SYS           = "i586-poky-linux"
MACHINE              = "qemux86"
DISTRO               = "poky"
DISTRO_VERSION       = "2.5"
TUNE_FEATURES        = "m32 i586"
TARGET_FPU           = ""
meta
meta-poky
meta-yocto-bsp       = "wsl-test-yocto-2.5:da3625c52e1ab8985fba4fc3d133edf92142f182"

NOTE: Fetching uninative binary shim from http://downloads.yoctoproject.org/releases/uninative/1.9/x86_64-nativesdk-libc.tar.bz2;sha256sum=c26622a1f27dbf5b25de986b11584b5c5b2f322d9eb367f705a744f58a5561ec
WARNING: The Linux kernel on your build host was not configured to provide process I/O statistics. (CONFIG_TASK_IO_ACCOUNTING is not set)
Initialising tasks: 100% |###############################################################################################| Time: 0:00:05
Checking sstate mirror object availability: 100% |#######################################################################| Time: 0:01:00
NOTE: Executing SetScene Tasks
Currently  6 running tasks (1111 of 2266)  48% |##########################################                                             |
0: nettle-3.4-r0 do_populate_lic_setscene (pid 8617) 100% |####################################################################| 1012K/s
1: mpfr-native-3.1.5-r0 do_populate_lic_setscene (pid 8614) 100% |##############################################################| 970K/s
2: grep-3.1-r0 do_populate_lic_setscene (pid 8637) 100% |######################################################################| 1.54M/s
</code></pre>
</div>
<span class="comment-copy">Did you get any further on this? Tried the same with the same result ;-)</span>
<span class="comment-copy">I think it wont work. You can use docker with windows and pull a docker image for yocto. WSL is not meant to be used for Yocto</span>
<span class="comment-copy">but <a href="https://github.com/Microsoft/WSL/issues/1291" rel="nofollow noreferrer">this WSL Issue</a> says that someone is also using yocto on WSL. And I am not the <a href="https://github.com/Microsoft/WSL/search?p=1&amp;q=yocto&amp;type=Issues&amp;utf8=%E2%9C%93" rel="nofollow noreferrer">only one</a></span>
<span class="comment-copy">Sure, plenty of people are trying, but no one currently supports it. Is your goal to support Yocto on WSL or just do a build and be done? If you want to help support WSL that is awesome. If you just want to do a build I'd recommend virtualization.</span>
<span class="comment-copy">I thought of giving it a try. I have a <i>powerful</i> laptop and wanted to give it a spin with WSL and Yocto. But How can I contribute towards WSL and Yocto together?</span>
<span class="comment-copy">See my post for contributing. There have been efforts to get docker working (CROPS), but I do not believe any team has stepped up to get WSL working yet.</span>
<span class="comment-copy">So mean to say that <code>cp -a -r /mnt/c/linux. ~/</code> before I download Poky should do the trick?</span>
<span class="comment-copy">No, I wouldn't recommend that at all. Also not sure what you would be copying if you haven't downloaded poky yet. I was saying that running bitbake from within WSL seems to work if you are inside your Linux directory. This means that you won't be able to edit using windows apps.  I would stick with cloning into pocky from your home (~/) directory using 'git clone git://git.yoctoproject.org/poky'</span>
<span class="comment-copy"><b>Update,</b> wanted to add that  I was eventually able to get the demo/ tutorial poky bitbake to compile, after struggling with permission issues <a href="https://github.com/Microsoft/WSL/issues?utf8=%E2%9C%93&amp;q=+Errno+13+" rel="nofollow noreferrer">see this wsl issues list on github</a> and <a href="https://docs.python.org/3/library/os.html" rel="nofollow noreferrer">python manual page about os paths</a>. The <b>bake took 9 hours!!</b>   --&gt; I <b>love</b> what the wsl team is doing and think it is incredible, but (baring a complete failure of setup on my end) it doesn't seem ready for Linux production tasks. The build on the same machine (in Linux dual boot) 47 minutes!</span>
