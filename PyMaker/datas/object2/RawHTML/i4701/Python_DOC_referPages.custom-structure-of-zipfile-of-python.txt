<div class="post-text" itemprop="text">
<p>I'd like to create a new zip file using python. 
I'd like to zip files from different directories and put it in one zip file with custom folder structure.</p>
<p>My source will come from</p>
<pre><code>/mydir/sample1.txt
/mydir/data/sample1_data.txt
</code></pre>
<p>The desired zip structure looks like this</p>
<pre><code>sample1.txt
/Data/sample1_data.txt
</code></pre>
<p>Please let me know if you have a solution.</p>
</div>
<div class="post-text" itemprop="text">
<p>As @sciroccorics suggested everything is in the <a href="https://docs.python.org/3/library/zipfile.html" rel="nofollow noreferrer">documentation</a>.</p>
<p>A short example would be something like:</p>
<pre><code>from zipfile import ZipFile

with ZipFile('out.zip', 'w') as z:
    z.write('/mydir/sample1.txt', 'sample1.txt')
    z.write('/mydir/data/sample1_data.txt', '/Data/sample1_data.txt')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Python has a built in zip library</p>
<pre><code>mydir = 'mydir'
myzipfile = 'fancy.zip'
from zipfile import ZipFile
import os
with ZipFile(myzipfile, 'w') as zipout:
    for dirpath, dirnames, filenames in os.walk(mydir):
        for filename in filenames:
            with open(os.path.join(dirpath[len(mydir)+1:], filename), 'r') as fin:
                with zipout.open(os.path.join(dirpath, filename), 'w') as fout:
                    fout.write(fin.read())
</code></pre>
<p>This will take all the files from mydir and copy them into fancy.zip
It will also recurse into subdirectories of mydir and copy those files as well.</p>
</div>
<span class="comment-copy">All information you need could be found in the documentation of the standard <code>zipfile</code> module: <a href="https://docs.python.org/3/library/zipfile.html" rel="nofollow noreferrer">docs.python.org/3/library/zipfile.html</a></span>
<span class="comment-copy">I think the question was how to write a file to zip using a <i>different</i> structure than the operating system file structure</span>
<span class="comment-copy">This does use a slightly different structure, the dirpath[len(mydir)+1:] bit chops off the root directory</span>
