<div class="post-text" itemprop="text">
<p>I am trying to fill-up page numbers of a Book in  <a href="https://ta.wikisource.org/s/5be" rel="nofollow noreferrer">its Index Wikisource page</a>. The following code writes well in the specific pageNumber parameter.
If the page is empty, it looks fine. But if i run the code another time, due to the concatenation the 67 becomes 6767. How can i know that the  pageNumber parameter (<code>'|Number of pages='</code>) is empty? or If the parameter already filled how can i set the skip option in the code.</p>
<p>The writing code;-</p>
<pre><code>#!/usr/bin/env python
# -*- coding: utf-8 -*- 
import pywikibot

indexTitle = 'அட்டவணை:தமிழ் நாடகத் தலைமை ஆசிரியர்-2.pdf'
indexPages = '67'
site1 = pywikibot.Site('ta', 'wikisource')
page = pywikibot.Page(site1, indexTitle)
indexTitlePage = page.text.replace('|Number of pages=','|Number of pages='+indexPages)
page.save(summary='67')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>you can use <code>re</code> - the regular expression library to search for a pattern:</p>
<pre><code>#!/usr/bin/env python
# -*- coding: utf-8 -*-
import pywikibot
import re

indexTitle = 'அட்டவணை:தமிழ் நாடகத் தலைமை ஆசிரியர்-2.pdf'
indexPages = '67'
site1 = pywikibot.Site('ta', 'wikisource')
page = pywikibot.Page(site1, indexTitle)
print(page.text)
res = re.compile('\|Number of pages= *(\d+)').search(page.text)
if res:
    print("number of pages is already assign to %s" % res.group(1))
else:
    indexTitlePage = page.text.replace('|Number of pages=','|Number of pages='+indexPages)
    page.save(summary='67')
</code></pre>
<p>Also, if you are dealing with processing utf8 text, it's better to move to python3 as it has much better support for that.</p>
</div>
<div class="post-text" itemprop="text">
<p>I've came across a similar situation,
Parsing templates with pywikibot seems to me not good enough (using 'extract_templates_and_params_regex_simple' and 'glue_template_and_params' from textlib).</p>
<p>My solution finally used - <a href="https://github.com/earwig/mwparserfromhell" rel="nofollow noreferrer">mwparserfromhell</a>.
This library is more convenient while trying to parse/change templates (and their arguments).</p>
<p>There is a potentially problem in your code, you are not searching for any template, so if somehow two templates will use the same argument you will change both (you can still ignore that, but jfyi).</p>
<p>Using mwparserfromhell + pywikibot will be like (using 'page' from your code):</p>
<pre><code>parsed_mw = mwparserfromhell.parse(page.text)
my_template = parsed_mw.filter_templates(my_template_name)[0]  # Taking the first template
my_template.get('Number of pages').value=67

page.text = parsed_mw
</code></pre>
</div>
<span class="comment-copy">Now i am using python3. The above code skips well. Thanks indeed. What is the regex for replace. Because, few books to be corrected by a new data.</span>
<span class="comment-copy">Hi, use <code>re.sub</code> <a href="https://docs.python.org/3/library/re.html#re.sub" rel="nofollow noreferrer">docs.python.org/3/library/re.html#re.sub</a></span>
<span class="comment-copy">The code's regex works fine for numbers. My native language is Tamil. If the parameter is non-latin, what regex, i should use to set the skip option.? For example, '|Category= மின்னூல்கள்'</span>
