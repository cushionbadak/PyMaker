<div class="post-text" itemprop="text">
<p>I have a nested tuple in the form:</p>
<pre><code>nested_tup = [('15MAR18 103000', '15MAR18 103758'), ('15MAR18 120518', '15MAR18 121308')] etc...
</code></pre>
<p>The 1st element in each tuple is the start date and the 2nd element in each tuple is the end date. </p>
<p>I want to find the difference in time between the 2 dates and then append the answer as a 3rd element in each tuple... So far I have the following:</p>
<pre><code>for start, end in nested_tup:
     after = datetime.strptime(end, '%d%b%y %H%M%S')
     before = datetime.strptime(start, '%d%b%y %H%M%S')
     duration = after - before
</code></pre>
<p>I need this duration value to be appended as the 3rd element in each tuple.. I don't know how though..</p>
<p>Any help appreciated.</p>
</div>
<div class="post-text" itemprop="text">
<p>Here is one way:</p>
<pre><code>for i, (start, end) in enumerate(nested_tup):
     after = datetime.strptime(end, '%d%b%y %H%M%S')
     before = datetime.strptime(start, '%d%b%y %H%M%S')
     duration = after - before
     nested_tup[i] += (duration, )
</code></pre>
<p>which could be slightly easier to read as:</p>
<pre><code>f = '%d%b%y %H%M%S'
for i, (start, end) in enumerate(nested_tup):
     nested_tup[i] += (datetime.strptime(end, f) - datetime.strptime(start, f), )
</code></pre>
<p>Even though you cannot mutate <code>tuple</code> objects to append a new component, you can concatenate <code>tuple</code> objects using <code>+</code>, which creates a new <code>tuple</code> from the constituent <code>tuple</code> objects, and this is perfectly good for your problem at hand.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use map in combination with a conversion function. </p>
<pre><code>def convert(tup):
  after = datetime.strptime(tup[1], '%d%b%y %H%M%S')
  before = datetime.strptime(tup[0], '%d%b%y %H%M%S')
  duration = after - before
  return (tup[0], tup[1], duration)

ans = list(map(convert, nested_tup))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Tuples are immutable data structure. So you cannot append values to tuple. 
<a href="https://docs.python.org/3/library/stdtypes.html#immutable-sequence-types" rel="nofollow noreferrer">Check out immutable sequence types.</a></p>
<p>This may work for you,</p>
<pre><code>strptime = lambda dt: datetime.strptime(dt, f)
[(start, end, strptime(end) - strptime(start)) for start, end in nested_tup]
</code></pre>
</div>
<span class="comment-copy">Your 'nested tuple' is a list containing tuples, since you can't add values to a tuple, I'd suggest you to just replace your tuples by lists and add the third value to those lists.</span>
