<div class="post-text" itemprop="text">
<p>Following the <a href="https://www.python.org/dev/peps/pep-3101/#explicit-conversion-flag" rel="nofollow noreferrer">PEP 3101</a>, I try to use as often as possible the format() method.
In the Explicit Conversion Flag chapter, it is possible to read:</p>
<blockquote>
<p>!r - convert the value to a string using
  repr().</p>
</blockquote>
<p>Indeed:</p>
<pre><code>&gt;&gt;&gt; "{0!r:10}".format('Hello')
"'Hello'   "
</code></pre>
<p>But:</p>
<pre><code>&gt;&gt;&gt; "{0.__repr__():10}".format('Hello')
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
AttributeError: 'str' object has no attribute '__repr__()'
</code></pre>
<p>I don't understand why this exception is raised, because a string have always the <strong>repr</strong>() method !!??</p>
<pre><code>&gt;&gt;&gt; type('Hello')
&lt;type 'str'&gt;
&gt;&gt;&gt; dir('Hello')
['__add__', '__class__', '__contains__', '__delattr__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getnewargs__', '__getslice__', '__gt__', '__hash__', '__init__', '__le__', '__len__', '__lt__', '__mod__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__rmod__', '__rmul__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '_formatter_field_name_split', '_formatter_parser', 'capitalize', 'center', 'count', 'decode', 'encode', 'endswith', 'expandtabs', 'find', 'format', 'index', 'isalnum', 'isalpha', 'isdigit', 'islower', 'isspace', 'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip', 'partition', 'replace', 'rfind', 'rindex', 'rjust', 'rpartition', 'rsplit', 'rstrip', 'split', 'splitlines', 'startswith', 'strip', 'swapcase', 'title', 'translate', 'upper', 'zfill']
</code></pre>
<p>I think I miss something ...</p>
</div>
<div class="post-text" itemprop="text">
<p>It's not saying there is no <code>__repr__</code> method; it's saying the value used for this placeholder has no attribute named <code>__repr__()</code>. The format string is not an arbitrary Python expression.</p>
<p><code>"{0.foo}".format(x)</code> is roughly the same as <code>str(x.foo)</code>, not <code>str(x).foo</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>Read carefully the error message. It says <code>__repr__()</code> was not found. Note the parenthesis in the attribute name. It is an invalid indentifier.</p>
<p>The reason is here:</p>
<pre><code>"{0.__repr__():10}".format('Hello')
</code></pre>
<p>The expression inside curly brackets is a format string and it has its own <a href="https://docs.python.org/3/library/string.html#formatstrings" rel="nofollow noreferrer">syntax</a>. You can access items and attributes, but not call functions or build arbitrary expressions.</p>
</div>
