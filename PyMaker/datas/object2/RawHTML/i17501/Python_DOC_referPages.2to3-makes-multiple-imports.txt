<div class="post-text" itemprop="text">
<p>I'm writing python2 code that will be be portable for python3 as well (by running <a href="http://docs.python.org/3/howto/pyporting.html#during-installation" rel="nofollow">2to3 during user installation</a>).</p>
<p>But 2to3 sometimes makes multiple imports:</p>
<pre><code>-import urlparse
-import urllib
-import urllib2
+import urllib.parse
+import urllib.request, urllib.parse, urllib.error
+import urllib.request, urllib.error, urllib.parse
</code></pre>
<p>How can I make 2to3 aware of duplicates?</p>
</div>
<div class="post-text" itemprop="text">
<p>This might be the reason <a href="http://www.diveinto.org/python3/porting-code-to-python-3-with-2to3.html" rel="nofollow">http://www.diveinto.org/python3/porting-code-to-python-3-with-2to3.html</a></p>
<p>Specifically, the urllib library changes between python 2 and python 3.  Here are the specific changes</p>
<pre class="lang-none prettyprint-override"><code>Python 2                                Python 3
import urllib                           import urllib.request, urllib.parse, urllib.error
import urllib2                          import urllib.request, urllib.error
import urlparse                         import urllib.parse
import robotparser                      import urllib.robotparser   
from urllib import FancyURLopener       from urllib.request import FancyURLopener
from urllib import urlencode            from urllib.parse import urlencode
from urllib2 import Request             from urllib.request import Request
from urllib2 import HTTPError           from urllib.error import HTTPError 
</code></pre>
<p>As far as I can tell there is no way to avoid this without parsing of some kind - if you want to pursue that method then <code>isort</code> (as suggested in the comments to your question) is likely your best bet.  Alternatively you could parse the code on your own, or just accept that you can't easily fix this issue and it is unlikely to cause any real problems in your code.</p>
</div>
<span class="comment-copy">Do you have to? As far as I know, importing standard library modules is free of side-effects, so there's no harm in importing them multiple times.</span>
<span class="comment-copy">@Cairnarvon Well, I can get away with it, but I thought there might be a better way</span>
<span class="comment-copy">This obviously doesn't answer your question directly but you could try passing the results of 2to3 through the <a href="https://github.com/timothycrosley/isort" rel="nofollow noreferrer">isort</a> module.</span>
