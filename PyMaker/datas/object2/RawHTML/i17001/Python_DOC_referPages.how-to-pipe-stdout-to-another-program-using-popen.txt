<div class="post-text" itemprop="text">
<p>Apologies if this question has been asked before, I've googled a bunch and haven't found an answer to it.</p>
<p>I have a sequence of system calls that a script I'm writing makes, one of which is of the following form:</p>
<pre><code>cat file | /some/program o &gt; output.txt
</code></pre>
<p>In essence, outing a file to standard out which is piped to some program, which then runs on it and puts the output to some other file. The usage of /some/program in this case is pretty inflexible, I have to cat a file into it and use the argument o &gt; some_out_file in order to use it.</p>
<p>Passing the shlex.split() of that line to the args of popen() just prints file, the binary of /some/program, and output.txt if it exists, which is obviously not what I'm looking for.</p>
<p>I'm fairly new to using this part of python in general so sorry if the answer is obvious, and if there's some other way of making this system call rather than trying to used subprocess.popen() or the like I'm open to this as well, and any help is appreciated!</p>
<p>Alternatively I could just call os.system(...) for this but for consistency's sake with the rest of the script I'd rather not use a specific exception in this case.</p>
</div>
<div class="post-text" itemprop="text">
<p>Is this what you are looking for?</p>
<p><a href="https://docs.python.org/2/library/subprocess.html#subprocess.Popen.communicate" rel="nofollow"><strong>Popen.communicate</strong></a></p>
<blockquote>
<p>Interact with process: Send data to stdin. Read data from stdout and stderr, until end-of-file is reached. Wait for process to terminate. The optional input argument should be a string to be sent to the child process, or None, if no data should be sent to the child.</p>
</blockquote>
<p>This is similar to calling <code>cat file | head -n 10 &gt; out.txt</code> </p>
<pre><code>#!/usr/bin/env python
# -*- coding: utf-8 -*-
import subprocess

program="head"
args=["-n", "10"]
popen_args = [program] + args #["head", "-n", "10"]

p = subprocess.Popen(popen_args, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
# sample stdin
stdin = "\n".join(["line %s" % x for x in xrange(0, 100)])
out, err = p.communicate(stdin)

# save to file
with open('out.txt', 'w') as f: f.write(out)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>To emulate <code>&lt; file /some/program o &gt; output.txt</code> shell command in Python:</p>
<pre><code>from subprocess import check_call

with open('file', 'rb', 0) as file, open('output.txt', 'wb', 0) as output_file:
    check_call(['/some/program', 'o'], stdin=file, stdout=output_file)
</code></pre>
<p>To answer the question in the title, you could use <a href="https://docs.python.org/3/library/subprocess.html#replacing-shell-pipeline" rel="nofollow">"Replacing shell pipeline" example from the docs</a>:</p>
<pre><code>from subprocess import Popen, PIPE

# cat file | /some/program o &gt; output.txt
p1 = Popen(["cat", "file"], stdout=PIPE)
with open('output.txt', 'wb', 0) as output_file:
    p2 = Popen(["/some/program", "o"], stdin=p1.stdout, stdout=output_file)
p1.stdout.close()  # Allow p1 to receive a SIGPIPE if p2 exits.
p1.wait()
p2.wait()
</code></pre>
<p>If the shell command comes from a trusted input, you could use <code>shell=True</code> to create a pipeline:</p>
<pre><code>check_call("/bin/a b c | /bin/d 'e f'", shell=True)
</code></pre>
</div>
<span class="comment-copy">you could <a href="http://stackoverflow.com/a/23050802/4279">pass files to Popen directly</a></span>
