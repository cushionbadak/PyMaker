<div class="post-text" itemprop="text">
<p>I have a function that reads multiple files. Like this:</p>
<pre><code>try:
    a = open("1.txt", "r")
    b = open("2.txt", "r")
    c = open("3.txt", "r")
except IOError:
    print("File {:s} failed".format(a, b or c))
</code></pre>
<p>I want that I can see which file failed during reading it. Can I somehow specify the IOError for specified file? I mean that if IOError appears in file a, do "command1", if in file b, do "command2" and so on?</p>
</div>
<div class="post-text" itemprop="text">
<p>The <code>IOError</code> exception is an alias of the <a href="https://docs.python.org/3/library/exceptions.html#OSError" rel="nofollow"><code>OSError</code> exception</a>, which has a <code>filename</code> attribute. You can use that to switch behaviour based on the file that failed:</p>
<pre><code>try:
    a = open("1.txt", "r")
    b = open("2.txt", "r")
    c = open("3.txt", "r")
except OSError as error:
    print("File {:s} failed".format(error.filename))
</code></pre>
<p>I used the name <code>OSError</code>; <code>IOError</code> is deprecated and only kept around for backwards compatibility, see <a href="http://www.python.org/dev/peps/pep-3151/" rel="nofollow">PEP 3151</a>.</p>
<p>Demo:</p>
<pre><code>&gt;&gt;&gt; try:
...     open('Nonesuch.txt')
... except OSError as error:
...     print('File {:s} failed'.format(error.filename))
... 
File Nonesuch.txt failed
</code></pre>
<p>Note that it is the <code>open()</code> call that throws the exception, so no assignment has taken place. And because a file object can be referenced from multiple places, including from a list, there is no way to map a file object or filename back to the name you were going to assign it to. If you wanted to know which of <code>a</code>, <code>b</code> or <code>c</code> the file object would have been bound to, you'd have to create your own mapping:</p>
<pre><code>filenames = {'1.txt': 'a', '2.txt': 'b', '3.txt': 'c'}
print("File {} failed".format(filenames[error.filename]))
</code></pre>
</div>
<span class="comment-copy">But how can I print, which was the file (a, b or c) that caused the error?</span>
<span class="comment-copy">@Masza: No, because when the <code>open()</code> call fails and throws an exception, the assignment isn't executed. If you need to map filenames to variable names by some other means, like a dictionary or <code>if</code> statements.</span>
<span class="comment-copy">But does the <code>filename</code> tell the name of the file that failed, for example <code>1.txt</code> if it fails?</span>
<span class="comment-copy">@Masza: Yes, that's what <code>filename</code> contains; <code>1.txt</code>, or <code>2.txt</code>, or <code>3.txt</code>, etc.</span>
<span class="comment-copy">So, can I use like <code>if filename == "1.txt": do #command1</code> ?</span>
