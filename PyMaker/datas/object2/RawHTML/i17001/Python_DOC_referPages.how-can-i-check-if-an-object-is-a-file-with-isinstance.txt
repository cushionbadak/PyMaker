<div class="post-text" itemprop="text">
<p>How can I check if an object is a file?</p>
<pre><code>&gt;&gt;&gt; f = open("locus.txt", "r")
&gt;&gt;&gt; type(f)
&lt;class '_io.TextIOWrapper'&gt;
&gt;&gt;&gt; isinstance(f, TextIOWrapper)
Traceback (most recent call last):
  File "&lt;pyshell#7&gt;", line 1, in &lt;module&gt;
    isinstance(f, TextIOWrapper)
NameError: name 'TextIOWrapper' is not defined
&gt;&gt;&gt; isinstance(f, _io.TextIOWrapper)
Traceback (most recent call last):
  File "&lt;pyshell#8&gt;", line 1, in &lt;module&gt;
    isinstance(f, _io.TextIOWrapper)
NameError: name '_io' is not defined
&gt;&gt;&gt; isinstance(f, _io)
Traceback (most recent call last):
  File "&lt;pyshell#9&gt;", line 1, in &lt;module&gt;
    isinstance(f, _io)
NameError: name '_io' is not defined
&gt;&gt;&gt; 
</code></pre>
<p>I have the variable <code>f</code> that is a text file.  When I print the type of <code>f</code> the Python3 interpreter shows '_io.TextIOWrapper', but if I check it with <code>isinstance()</code> function throws exception: NameError.</p>
</div>
<div class="post-text" itemprop="text">
<p><code>_io</code> is the C implementation for the <a href="https://docs.python.org/3/library/io.html" rel="noreferrer"><code>io</code> module</a>. Use <a href="https://docs.python.org/3/library/io.html#io.IOBase" rel="noreferrer"><code>io.IOBase</code></a> for direct subclasses, after importing the module:</p>
<pre><code>&gt;&gt;&gt; import io
&gt;&gt;&gt; f = open("tests.py", "r")
&gt;&gt;&gt; isinstance(f, io.IOBase)
True
</code></pre>
</div>
<span class="comment-copy"><code>_io</code> and <code>TextIOWrapper</code> are not global variables, so you cannot use them directly. Hence the error.</span>
<span class="comment-copy">I wonder how <code>2to3</code> handles this?</span>
<span class="comment-copy">@smci: I am pretty sure it doesn't. The <code>fix_types</code> fixer even has the <code>FileType</code> mapping <i>commented out</i>.</span>
<span class="comment-copy">Is there any good 2-to-3 guide on how to port type-checking?</span>
<span class="comment-copy">Thanks a lot @MartijnPieters</span>
<span class="comment-copy">If I want to close the range for only text files can I use <code>io.TextIOBase</code>?</span>
<span class="comment-copy">Yup, see the <a href="https://docs.python.org/3/library/io.html#class-hierarchy" rel="nofollow noreferrer">class hierarchy section</a>, that's what the base classes are there for (they are ABCs, so they test for <i>functionality</i>, not just subclasses).</span>
