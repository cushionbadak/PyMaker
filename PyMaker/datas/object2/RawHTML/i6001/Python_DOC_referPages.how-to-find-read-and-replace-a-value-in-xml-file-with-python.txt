<div class="post-text" itemprop="text">
<p>This is my example XML file:</p>
<pre><code>&lt;CATALOG&gt;
&lt;CD&gt;
&lt;DATA key="title"&gt;Hide your heart&lt;/DATA&gt;
&lt;DATA key="artist"&gt;Bonnie Tyler&lt;/DATA&gt;
&lt;DATA key="country"&gt;UK&lt;/DATA&gt;
&lt;DATA key="company"&gt;CBS Records&lt;/DATA&gt;
&lt;DATA key="price"&gt;9.90&lt;/DATA&gt;
&lt;DATA key="year"&gt;1988&lt;/DATA&gt;
&lt;DATA key="times"&gt;1&lt;/DATA&gt;
&lt;/CD&gt;
&lt;/CATALOG&gt;
</code></pre>
<p>I want to change the value in the the tag data with key "times" and add 1 to it every time I start the script from the terminal.</p>
<p>I tried first of all to read the element with:</p>
<pre><code>import xml.etree.ElementTree
e = xml.etree.ElementTree.parse('test.xml').getroot()

for atype in e.findall('data'):
    times=(atype.get('times'))
</code></pre>
<p>But i'm already stuck because it doesn't work. If I try to print "times"
I get no output from the terminal.<br/></p>
<p>My Idea was to read it, with a function add to this value 1 and replace it with the total of the sum (2 in this case). And save the modified XML file.</p>
<p>It should be easy to do but I can't figure it out.</p>
<p>EDIT
I had to read better the documentation, I tried with:</p>
<pre><code>import xml.etree.ElementTree as ET
tree = ET.parse('test.xml')
root = tree.getroot()

times = root[0][7].text

newTimes = int(times) + 1

times = newTimes

tree.write('test.xml')
</code></pre>
<p>It read correctly the value, add 1 but gives an error if I try to write the file. What am I doing wrong?</p>
<p>EDIT 2 <br/>
I found the solution, read below my own answer.</p>
</div>
<div class="post-text" itemprop="text">
<p>Very simply:</p>
<pre><code>&gt;&gt;&gt; e.findall('CD')
[&lt;Element 'CD' at 0x7fc0a22c1778&gt;]
&gt;&gt;&gt; e.findall('DATA')
[]
</code></pre>
<p>Wrong level of chacking ...</p>
</div>
<div class="post-text" itemprop="text">
<p>I found the solution, I only had to first read the value, turn it in an integer, add 1 and replace the value turning it again into a string:</p>
<pre><code>import xml.etree.ElementTree as ET
tree = ET.parse('test.xml')
root = tree.getroot()

newTimes = int(root[0][7].text) + 1
root[1][6].text = str(newTimes)

tree.write('test.xml')
</code></pre>
<p>That's all.</p>
</div>
<span class="comment-copy">This is clearly explained in the <a href="https://docs.python.org/3/library/xml.etree.elementtree.html" rel="nofollow noreferrer">ElementTree documentation</a>. You're trying to read the attributes of a DATA element. IOW, you're trying to identify the <code>DATA</code> element which has an attribute <code>key</code> which has the value <code>times</code>.</span>
<span class="comment-copy">You're right, my bad, I had to read better the documentation.. I edited my answer if you would like to help me.</span>
