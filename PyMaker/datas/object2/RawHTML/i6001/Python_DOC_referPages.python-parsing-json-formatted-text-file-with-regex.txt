<div class="post-text" itemprop="text">
<p>I have a text file formatted like a JSON file however everything is on a single line (could be a MongoDB File). Could someone please point me in the direction of how I could extract values using a Python regex method please? </p>
<p>The text shows up like this: </p>
<pre><code>{"d":{"__type":"WikiFileNodeContent:http:\/\/samplesite.com.‌​au\/ns\/business\/wi‌​ki","author":null,"d‌​escription":null,"fi‌​leAssetId":"034b9317‌​-60d9-45c2-b6d6-0f24‌​b59e1991","filename"‌​:"Reports.pdf"},"cre‌​atedBy":1531,"create‌​dByUsername":"John Cash","icon":"\/Assets10.37.5.0\/pix\/16x16\/page_white_acro‌​bat.png","id":3041,"‌​inheritedPermissions‌​":false,"name":"map"‌​,"permissions":[23,8‌​7,35,49,65],"type":3‌​,"viewLevel":2},{"__‌​type":"WikiNode:http‌​:\/\/samplesite.com.‌​au\/ns\/business\/wi‌​ki","children":[],"c‌​ontent": 
</code></pre>
<p>I am wanting to get the "fileAssetId" and filename". Ive tried to load the like with Pythons JSON module but I get an error</p>
<p>For the FileAssetid I tried this regex:  </p>
<pre><code>regex = re.compile(r"([0-9a-f]{8})\S*-\S*([0-9a-f]{4})\S*-\S*([0-9a-f]{4})\S*-\S*([0-9a-f]{4})\S*-\S*([0-9a-f]{12})")
</code></pre>
<p>But i get the following 034b9317‌​, 60d9, 45c2, b6d6, 0f24‌​b59e1991</p>
<p>Im not to sure how to get the data as its displayed.</p>
</div>
<div class="post-text" itemprop="text">
<p>How about using positive lookahead and lookbehind:</p>
<pre><code>(?&lt;=\"fileAssetId\":\")[a-fA-F0-9-]+?(?=\")
</code></pre>
<p>captures the <code>fileAssetId</code> and</p>
<pre><code>(?&lt;=\"filename\":\").+?(?=\")
</code></pre>
<p>matches the filename. </p>
<p>For a detailed explanation of the regex have a look at the <a href="https://regex101.com/r/0OhB7x/1/" rel="nofollow noreferrer">Regex101</a>-Example. (Note: I combined both in the example with an OR-Operator | to show both matches at once)</p>
<p>To get a list of all matches use <code>re.findall</code> or <code>re.finditer</code> instead of <code>re.match</code>.</p>
<p><code>re.findall(pattern, string)</code> returns a list of matching strings.</p>
<p><code>re.finditer(pattern, string)</code> returns an iterator with the objects.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use python's <a href="https://docs.python.org/2/library/os.html#os.walk" rel="nofollow noreferrer">walk method</a> and check each entry with <a href="https://docs.python.org/3/library/re.html#re.match" rel="nofollow noreferrer">re.match</a>.</p>
<p>In case that the string you got is not convertable to a python dict, you can use just regex:</p>
<pre><code>print re.match(r'.*fileAssetId\":\"([^\"]+)\".*', your_pattern).group(1)
</code></pre>
<p>Solution for your example:</p>
<pre><code>import re

example_string = '{"d":{"__type":"WikiFileNodeContent:http:\/\/samplesite.com.u\/ns\/business\/wiki","author":null,"description":null,"fileAssetId":"034b9317-60d9-45c2-b6d6-0f24b59e1991","filename":"Reports.pdf"},"createdBy":1531,"createdByUsername":"John Cash","icon":"\/Assets10.37.5.0\/pix\/16x16\/page_white_acrobat.png","id":3041,"inheritedPermissions":false,"name":"map","permissions":[23,87,35,49,65],"type":3,"viewLevel":2},{"__type":"WikiNode:http:\/\/samplesite.com.au\/ns\/business\/wiki","children":[],"content"'

regex_pattern = r'.*fileAssetId\":\"([^\"]+)\".*'
match = re.match(regex_pattern, example_string)
fileAssetId = match.group(1)
print('fileAssetId: {}'.format(fileAssetId))
</code></pre>
<p>executing this yields: </p>
<pre><code>34b9317‌​-60d9-45c2-b6d6-0f24‌​b59e1991
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Try adding \n to the string that you are entering in to the file (\n means new line)</p>
</div>
<span class="comment-copy">can you put some data of your file here?</span>
<span class="comment-copy">The text shows up like this:   {"d":{"__type":"WikiFileNodeContent:http:\/\/samplesite.com.au\/ns\/business\/wiki","author":null,"description":null,"fileAssetId":"034b9317-60d9-45c2-b6d6-0f24b59e1991","filename":"Reports.pdf"},"createdBy":1531,"createdByUsername":"John Cash","icon":"\/Assets10.37.5.0\/pix\/16x16\/page_white_acrobat.png","id":3041,"inheritedPermissions":false,"name":"map","permissions":[23,87,35,49,65],"type":3,"viewLevel":2},{"__type":"WikiNode:http:\/\/samplesite.com.au\/ns\/business\/wiki","children":[],"content":  I am wanting to get the "fileAssetId" and filename"</span>
<span class="comment-copy">the dictionary is not completed. You are missgin <code>[</code> at the beginning and <code>}]</code> and the end</span>
<span class="comment-copy">I would love to extract the value after "fileAssetId": and the value after the filename, but I'm not to sure how to do it.</span>
<span class="comment-copy">Using a JSON parser must be a better option?</span>
<span class="comment-copy">That works, thank you so much, but its only showing the first, not all the values, im doing it this way:   import re f=open("jsonfile.txt") f=f.readlines() for line in f:     m = re.search(r'(?&lt;=\"fileAssetId\":\")[a-fA-F0-9-]+?(?=\")|(?&lt;=\"filename\":\").+?(?=\")', line)     print m.group()</span>
<span class="comment-copy">As i said in my answer edit, use findall or finditer not search.</span>
<span class="comment-copy">That works a treat, thank you. Is there a way i could store all the values for "filename" and "fileAssetId" so i could do something like  wget = urllib.urlopen('<a href="http://samplewebsite.com" rel="nofollow noreferrer">samplewebsite.com</a>' + fileAssetId_value + filename_value) ??? Thank you for your help.</span>
<span class="comment-copy">If one asset id is always associated with one filename, I would try to fix your json data and load it instead of using regex as it'll be a very complex regex to get the associated values. Can you do <code>with open('jsonfile', 'r') as f: distros_dict = json.load(f) for distro in distros_dict: print(distro)</code> and share the output? Then I can maybe tell you why you can't access the filename.</span>
<span class="comment-copy">I've made them separate:      fileAssetId = re.findall(r'(?&lt;=\"fileAssetId\":\")[a-fA-F0-9-]+?(?=\")', line)     filename = re.findall(r'(?&lt;=\"filename\":\").+?(?=\")', line)  but now the Id and the file name dont match together, i guess i need the AND operator to keep them together?</span>
<span class="comment-copy">coming up red in sublime text \":\"([^\"]+)\".*`).group(1)</span>
<span class="comment-copy">File "test2.py", line 18     fileAsset = re.match(r<code>.*fileAssetId\":\"([^\"]+)\".*</code>, regex).group(1)                           ^ SyntaxError: invalid syntax</span>
<span class="comment-copy">you are missing <code>'</code></span>
<span class="comment-copy">Thank you, that's better but errors out.  return _compile(pattern, flags).match(string) TypeError: expected string or buffer</span>
<span class="comment-copy">As a one complete regex request, i get:      fileAsset = re.match(r'.*fileAssetId\":\"([^\"]+)\".*', r"([0-9a-f]{8})\S*-\S*([0-9a-f]{4})\S*-\S*([0-9a-f]{4})\S*-\S*([0-9a-f]{4})\S*-\S*([0-9a-f]{12})").group(1)  AttributeError: 'NoneType' object has no attribute 'group'</span>
