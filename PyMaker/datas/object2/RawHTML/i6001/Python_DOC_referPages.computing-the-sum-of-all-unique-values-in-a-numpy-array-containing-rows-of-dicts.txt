<div class="post-text" itemprop="text">
<p>I have a large numpy array, with each row containing a dict of words, in a similar format to below:</p>
<pre><code>data = [{'a': 1, 'c': 2}, {'ba': 3, 'a': 4}, ... }
</code></pre>
<p>Could someone please point me in the right direction for how would I go about computing the sum of all the unique values of the dicts in each row of the numpy array? From the example above, I would hope to obtain something like this:</p>
<pre><code>result = {'a': 5, 'c': 2, 'ba': 3, ...}
</code></pre>
<p>At the moment, the only way I can think to do it is iterating through each row of the data, and then each key of the dict, if a unique key is found then append it to the new dict and set the value, if a key that's already contained in the dict is found then add the value of that key to the key in the 'result'. Although this seems like an inefficient way to do it.</p>
</div>
<div class="post-text" itemprop="text">
<p>You could use a <code>Counter()</code> and update it with each dictionary contained in <code>data</code>, in a loop:</p>
<pre><code>from collections import Counter

data = [{'a': 1, 'c': 2}, {'ba': 3, 'a': 4}]
c = Counter()
for d in data:
    c.update(d)
</code></pre>
<h3>output:</h3>
<pre><code>Counter({'a': 5, 'ba': 3, 'c': 2})
</code></pre>
<h3>alternate one liner:</h3>
<p>(as proposed by @AntonVBR in the comments)</p>
<pre><code>sum((Counter(dict(x)) for x in data), Counter())
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><strong>A pure Python solution using <code>for-loops</code>:</strong></p>
<pre><code>data = [{'a': 1, 'c': 2}, {'ba': 3, 'a': 4}]
result = {}
for d in data:
    for k, v in d.items():
        if k in result:
            result[k] += v
        else:
            result[k] = v
</code></pre>
<p>output:</p>
<pre><code>{'c': 2, 'a': 5, 'ba': 3}
</code></pre>
</div>
<span class="comment-copy">You might want to check out some of the ideas in here: <a href="https://stackoverflow.com/questions/16458340/python-equivalent-of-zip-for-dictionaries" title="python equivalent of zip for dictionaries">stackoverflow.com/questions/16458340/…</a></span>
<span class="comment-copy">Would it be possible to use <a href="https://docs.python.org/3/library/collections.html#collections.Counter" rel="nofollow noreferrer"><code>Counter</code>s</a> instead?  Then this could be as simple as <code>sum(data, Counter())</code></span>
<span class="comment-copy">That looks like a list, not a numpy array. If it is indeed an array, why are you using an array to hold dicts?</span>
<span class="comment-copy">Perfect solution, thank you very much!</span>
<span class="comment-copy">Can be written in one line like this: <code>sum((Counter(dict(x)) for x in data),Counter())</code> according to <a href="https://stackoverflow.com/questions/11290092/python-elegantly-merge-dictionaries-with-sum-of-values" title="python elegantly merge dictionaries with sum of values">stackoverflow.com/questions/11290092/…</a></span>
