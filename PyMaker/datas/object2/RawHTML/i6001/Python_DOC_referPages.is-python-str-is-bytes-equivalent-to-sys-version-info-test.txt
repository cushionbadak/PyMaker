<div class="post-text" itemprop="text">
<p>Is it correct to use</p>
<pre><code>if str is bytes: ...
</code></pre>
<p>instead of</p>
<pre><code>if sys.version_info &lt; (3,): ...
</code></pre>
<p>to distinguish python2 from python3?  Especially when the version dependent code is required precisely because of the possibility that str is not unicode, the former sometimes seems clearer to me (and avoids an often gratuitous import sys), yet I've never seen python code which uses this test.  Is "str is bytes" true only as a quirk of version 2 CPython, or is it guaranteed in all python2s?</p>
</div>
<div class="post-text" itemprop="text">
<p>Please use <code>sys.version_info &lt; (3,)</code> to tell readers that you're trying to identify the python2 case.</p>
</div>
<span class="comment-copy">You and I have wildly different definitions for "clearer".</span>
<span class="comment-copy"><a href="https://docs.python.org/3/whatsnew/2.6.html#pep-3112-byte-literals" rel="nofollow noreferrer">"Python 2.6 adds <code>bytes</code> as a synonym for the <code>str</code> type"</a>.  So it looks like this is not just an implementation detail.  It's still very confusing.  Python imports are cheap, I wouldn't worry about it.</span>
<span class="comment-copy">@PatrickHaugh: that history suggests that it's <i>not</i> equivalent, because <code>str is bytes</code> will only work in &gt;= 2.6, and the question asked about distinguishing python <i>2</i> from python 3.  <code>version_info</code> was introduced in 2.0. ;-)</span>
<span class="comment-copy">@Mephy: Okay, I'm chastened; sys.version_info is certainly the very definition of the difference between python 2 and 3, and I'll use it.  My reasoning was that <code>PY2 = str is bytes</code> amounts to duck-typing the whole environment.  Subsequent branches don't really care if it's called python 2 or 3, only whether str is going to be treated as bytes.  But I bow to the will of the voters.</span>
<span class="comment-copy">@PatrickHaugh: This link answers my question; make it an answer and I'll accept it.</span>
