<div class="post-text" itemprop="text">
<p>Hi I got a folder with color images in folder a that I want to change them to gray-scale images and save in folder b</p>
<pre><code>from PIL import Image 
import os
# Changing image to gray and scaling to 256x128
WORK_DIR = 'D:/folder/data/' #working folder 

source = WORK_DIR + 'a'
target = WORK_DIR +'b'

for dirpath, filenames in os.walk(source):
    for file in filenames:
        image_file = Image.open(os.path.join(dirpath, file))
        image_file.draft('L', (256, 128)) #convert to gray and 256x128
        image_file.save(os.path.join(target, file))
</code></pre>
<p>I received below error, I am not sure what it means and how can I fix it?</p>
<pre><code>----&gt; 7 for dirpath, filenames in os.walk(source):
      8         for file in filenames:
      9                 image_file = Image.open(os.path.join(dirpath, file))

ValueError: too many values to unpack (expected 2)
</code></pre>
<p>Thanks!</p>
</div>
<div class="post-text" itemprop="text">
<p>You have gotten this error because os.walk() returns 3 items in a tuple (root, directories, files).</p>
<p>Just change</p>
<pre><code>for dirpath, filenames in os.walk(source):
</code></pre>
<p>to</p>
<pre><code>for root, dirpath, filenames in os.walk(source):
</code></pre>
<p>as Dan d. pointed out, you should change </p>
<pre><code>os.path.join(dirpath, file)
</code></pre>
<p>to </p>
<pre><code>os.path.join(root, file)
</code></pre>
</div>
<span class="comment-copy">"Generate the file names in a directory tree by walking the tree either top-down or bottom-up. For each directory in the tree rooted at directory top (including top itself), it yields a <b>3-tuple</b> (dirpath, dirnames, filenames)." from <a href="https://docs.python.org/3/library/os.html#os.walk" rel="nofollow noreferrer">the docs</a></span>
<span class="comment-copy">cv2 might be better than PIL for this, if you're able to use a different library.</span>
<span class="comment-copy">Thank you. I also removed the "/" from <code>WORK_DIR = 'D:/folder/data/'</code> so the data type is correct. However, I didn't get any pictures in the target folder, neither error messages</span>
<span class="comment-copy">does WORK_DIR + 'b' exist?  If not, you can do os.makedirs(target, exist_ok=True).  It will create one if not already done and ignore if it does exist.  Also you shouldn't remove that '/' since you are going to be adding 'b' and 'a' to it.</span>
<span class="comment-copy">do source = os.path.join(WORK_DIR, 'a') and target = os.path.join(WORK_DIR, 'b')  then os.makedirs(target, exist_ok=True)</span>
<span class="comment-copy">Don't forget to change <code>os.path.join(dirpath, file)</code> to <code>os.path.join(root, file)</code>.</span>
