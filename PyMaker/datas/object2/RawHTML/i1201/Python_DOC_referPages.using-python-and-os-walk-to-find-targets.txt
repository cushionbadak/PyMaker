<div class="post-text" itemprop="text">
<p>I am currently working on a script to sift through filesystems (both Linux and Windows), to search for specific strings in text files. With what I have below I can select where I want to start, get the full paths to the files with the extensions I want, but the stringstofind does not seem to iterate correctly. I will eventually make this to where I can select the file extensions to search, and enter what strings I am looking for, but for now, I just need this to work so I can understand what I am doing wrong. Thanks in advance!</p>
<p>so far I have:</p>
<pre><code>import os

userinput = input("What directory to search?")
stringstofind = ["String1", "String2", "String3"]
for roots,subdir, files in os.walk(userinput):
   for fname in files:
      #I know this if line is ugly, but like with stringstofind I had a hard 
      #time getting it to iterate through right.
      if ".txt" in fname or ".rtf" in fname or ".doc" in fname:
         filepath = os.path.join(roots,fname)
         with open(filepath, 'r') as f:
            for lines in f:
               if stringstofind in lines:
                  print("found target")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I think it's just a bit of a type mismatch:</p>
<ul>
<li>every <code>lines</code> variable produced by <code>for lines in f:</code> loop is actually a string</li>
<li><code>stringstofind</code> is defined as a list</li>
</ul>
<p>You are trying to do <code>if stringstofind in lines:</code> checking if a list of strings is inside a string.</p>
<hr/>
<p>What you probably meant was to check if any of the strings defined in the <code>stringstofind</code> list is a part of a line. You could use <a href="https://docs.python.org/3/library/functions.html#any" rel="nofollow noreferrer"><code>any()</code></a> for that:</p>
<pre><code>for line in f:
   if any(item in line for item in stringstofind):
      print("found target")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>instead of</p>
<pre><code>if stringstofind in lines:
    print("found target")
</code></pre>
<p>use:</p>
<pre><code>for string in stringstofind:
    if string in lines:
        print("found target")
</code></pre>
</div>
<span class="comment-copy">This actually should produce an <b>error</b>, and if so, then you should <a href="https://stackoverflow.com/posts/53826803/edit">edit</a> your question so that it contains the actual error message in it.</span>
