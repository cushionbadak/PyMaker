<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/53823733/how-to-solve-an-eof-error-when-reading-a-binary-file">How to solve an EOF error when reading a binary file</a>
<span class="question-originals-answer-count">
                    2 answers
                </span>
</li>
</ul>
</div>
<p>I am learning to write and read from a binary file and am copying code out of a book to illustrates how this is done. I have put together two pieces of code from the book to complete this task. On compilation of my code I get an EOF error and am not sure what is causing it. Can you help? The code I am writing is listed below.</p>
<pre><code>class CarRecord:                    # declaring a class without other methods
    def init (self):                # constructor
        self .VehicleID = ""
        self.Registration = ""
        self.DateOfRegistration = None
        self.EngineSize = 0
        self.PurchasePrice = 0.00

import pickle                       # this library is required to create binary f iles
ThisCar = CarRecord()
Car = [ThisCar for i in range (100)]

CarFile = open ('Cars.DAT', 'wb')   # open file for binary write

for i in range (100) :              # loop for each array element
    pickle.dump (Car[i], CarFile)   # write a whole record to the binary file

CarFile.close() # close file

CarFile = open( 'Cars.DAT','rb')    # open file for binary read
Car = []                            # start with empty list
while True:                         # check for end of file
    Car.append(pickle.load(CarFile))# append record from file to end of l i st

CarFile.close()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The issue is the last traversal of file object, which has ended.
<strong>Always use <code>with</code></strong> command in case of reading/writing of a file, by this you don't have to worry about any of such issues. Also it will automatically close it for you</p>
<pre><code>Car = []
with open('Cars.DAT', 'rb') as CarFile:
    Car.append(pickle.load(CarFile))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You are reading cars from the file in an infinite loop:</p>
<pre><code>while True:                         # check for end of file
    Car.append(pickle.load(CarFile))# append record from file to end of l i st
</code></pre>
<p>At the end of the file, this will correctly throw an EOF exception. There are two ways to handle this:</p>
<ol>
<li><p>Instead of loading in an infinite loop, write the whole array as a pickle, then load it back:</p>
<pre><code>CarFile = open ('Cars.DAT', 'wb')   # open file for binary write
pickle.dump(Car, CarFile)           # write the whole list to a binary file
...
CarFile = open('Cars.DAT', 'rb')    # open file for binary read
Car = pickle.load(CarFile)          # load whole list from file
</code></pre></li>
<li><p>Catch the exception, and move on. This style is called <a href="https://docs.python.org/3/glossary.html?highlight=eafp#term-eafp" rel="nofollow noreferrer">EAFP</a>.</p>
<pre><code>Car = []                            # start with empty list
while True:                         # check for end of file
    try:
       Car.append(pickle.load(CarFile)) # append record from file to end of list
    except EOFError:
        break                       # break out of loop
</code></pre></li>
</ol>
</div>
<span class="comment-copy">Can you please edit your question to form a structured code</span>
<span class="comment-copy">You already have some good answer in your previous identical question.</span>
