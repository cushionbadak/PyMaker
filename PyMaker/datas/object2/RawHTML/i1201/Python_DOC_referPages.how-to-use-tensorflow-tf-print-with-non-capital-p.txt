<div class="post-text" itemprop="text">
<p>I have some tensorflow code in a custom loss function.</p>
<p>I'm using tf.Print(node, [debug1, debug2], "print my debugs: ")</p>
<p>It works fine but TF says tf.Print is depricated and will be removed once i update tensorflow and that i should be using tf.<strong>p</strong>rint(), with small p.</p>
<p>I've tried using tf.print the same way i would tf.Print() but it's not working. Once i fit my model in keras, i get an error. unlike tf.Print, tf.print seems to take in anything **kwargs, so what am i suppose to give it? and unlike tf.Print it do not seem to return something that i can inject into the computational graph.</p>
<p>It's really difficult to search because all the information online is about tf.Print().</p>
<p>Can someone explain how to use tf.print()?</p>
<p>Edit: Example code</p>
<pre><code>def custom_loss(y_true, y_pred):
    loss = K.mean(...)
    print_no_op = tf.Print(loss, [loss, y_true, y_true.shape], "Debug output: ")
    return print_no_op

model.compile(loss=custom_loss)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Both the documentation of <a href="https://www.tensorflow.org/api_docs/python/tf/print" rel="nofollow noreferrer"><code>tf.print</code></a> and <a href="https://www.tensorflow.org/api_docs/python/tf/Print" rel="nofollow noreferrer"><code>tf.Print</code></a> mention that <code>tf.print</code> returns an operation with no output, so it cannot be evaluated to any value. The syntax of <code>tf.print</code> is meant to be more similar to Python's builtin <a href="https://docs.python.org/3/library/functions.html#print" rel="nofollow noreferrer"><code>print</code></a>. In your case, you could use it as follows:</p>
<pre><code>def custom_loss(y_true, y_pred):
    loss = K.mean(...)
    print_op = tf.print("Debug output:", loss, y_true, y_true.shape)
    with tf.control_dependencies([print_op]):
        return K.identity(loss)
</code></pre>
<p>Here <a href="https://keras.io/backend/#identity" rel="nofollow noreferrer"><code>K.identity</code></a> creates a new tensor identical to <code>loss</code> but with a control dependency to <code>print_op</code>, so evaluating it will force executing the printing operation. Note that Keras also offers <a href="https://keras.io/backend/#print_tensor" rel="nofollow noreferrer"><code>K.print_tensor</code></a>, although it is less flexible than <code>tf.print</code>.</p>
</div>
<span class="comment-copy">How would i use that in a custom loss function using Keras? would i just include the print_op variable in the some calculation like i would with tf.Print?</span>
<span class="comment-copy">@CodeMonkey No, <code>print_op</code> does not have any value, it only really make sense to use it with <code>tf.control_dependencies</code> to ensure it gets executed (I changed a bit the code example). If you post some of your code maybe it's easier to explain how to make the change.</span>
<span class="comment-copy">I've added an example function. Note I'm using Keras, so i'm not really sure how that fits into the inner workings of TensorFlow. The print_no_op would return the loss variable once evaluated but also print the debug output in the list.</span>
<span class="comment-copy">@CodeMonkey I have updated the answer.</span>
<span class="comment-copy">Thank you, i will try it first thing when i get home, and get back to you :)</span>
