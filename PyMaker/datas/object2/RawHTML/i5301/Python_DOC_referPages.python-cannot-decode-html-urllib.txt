<div class="post-text" itemprop="text">
<p>I'm trying to write html from webpage to file, but I have problem with decode characters:</p>
<pre><code>import urllib.request

response = urllib.request.urlopen("https://www.google.com")

charset = response.info().get_content_charset()
print(response.read().decode(charset))
</code></pre>
<p>Last line causes error:</p>
<pre><code>Traceback (most recent call last):
  File "script.py", line 7, in &lt;module&gt;
    print(response.read().decode(charset))
UnicodeEncodeError: 'ascii' codec can't encode character '\u015b' in 
position 6079: ordinal not in range(128)
</code></pre>
<p><code>response.info().get_content_charset()</code> returns <code>iso-8859-2</code>, but if i check content of response without decoding (<code>print(resposne.read())</code>) there is "utf-8" encoding as html metatag. If i use "utf-8" in decode function there is also similar problem:</p>
<pre><code>Traceback (most recent call last):
  File "script.py", line 7, in &lt;module&gt;
    print(response.read().decode("utf-8"))
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xb6 in position 
6111: invalid start byte
</code></pre>
<p>What's going on?</p>
</div>
<div class="post-text" itemprop="text">
<p>You can ignore invalid characters using</p>
<pre><code>response.read().decode("utf-8", 'ignore')
</code></pre>
<p>Instead of <code>ignore</code> there are other options, e.g. <code>replace</code></p>
<p><a href="https://www.tutorialspoint.com/python/string_encode.htm" rel="nofollow noreferrer">https://www.tutorialspoint.com/python/string_encode.htm</a></p>
<p><a href="https://docs.python.org/3/howto/unicode.html#the-string-type" rel="nofollow noreferrer">https://docs.python.org/3/howto/unicode.html#the-string-type</a></p>
<p>(There is also <code>str.encode(encoding='UTF-8',errors='strict')</code> for strings.)</p>
</div>
<span class="comment-copy">Simply <code>print(response.read())</code> should work.</span>
<span class="comment-copy">@theausome Not if i use file.write() function which expect string.</span>
<span class="comment-copy">Why don't you open the file in binary mode?</span>
