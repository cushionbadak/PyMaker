<div class="post-text" itemprop="text">
<p>How can the amount of available lines in a terminal be found?</p>
<p>Preferably in a cross-platform manner but any suggestions (even OS-specific) are welcome.</p>
<p>The height and length of a terminal can be found using the <a href="https://docs.python.org/3/library/os.html#querying-the-size-of-a-terminal" rel="nofollow noreferrer"><code>os</code></a> module however this does not take into account the amount of lines that may already have been used.  </p>
<p>To clarify things here is an example:</p>
<p><img src="https://i.stack.imgur.com/XmAHp.png"/></p>
<p>In this example the height of the terminal here is 33 however since 3 lines have been used, only 30 lines are available.  </p>
</div>
<div class="post-text" itemprop="text">
<p>Determining by that screen shot, you are on Windows</p>
<p>This is from <a href="http://code.activestate.com/recipes/440694-determine-size-of-console-window-on-windows/" rel="noreferrer">http://code.activestate.com/recipes/440694-determine-size-of-console-window-on-windows/</a></p>
<pre><code>from ctypes import windll, create_string_buffer

# stdin handle is -10
# stdout handle is -11
# stderr handle is -12

h = windll.kernel32.GetStdHandle(-12)
csbi = create_string_buffer(22)
res = windll.kernel32.GetConsoleScreenBufferInfo(h, csbi)

if res:
    import struct
    (bufx, bufy, curx, cury, wattr,
     left, top, right, bottom, maxx, maxy) = struct.unpack("hhhhHhhhhhh", csbi.raw)
    sizex = right - left + 1
    sizey = bottom - top + 1
else:
    sizex, sizey = 80, 25 # can't determine actual size - return default values

print sizex, sizey, curx, cury
</code></pre>
<p>That will give you screen size, and the cursor position.</p>
<p><code>cury</code> is the line, so you can calculate the number of lines left.</p>
<p>However, you may want to re-check the console window size as you progress, as the user may resize the window at any time.</p>
</div>
<span class="comment-copy">Interesting question. Probably OS specific. Perhaps you could add the <code>cmd</code> tag.</span>
<span class="comment-copy">@JohnColeman  I would like it to be cross platform ideally but if you think I should I will.</span>
<span class="comment-copy">I'm not certain this is possible unless you keep track of all output to the console manually</span>
<span class="comment-copy">There is a <code>GetConsoleScreenBufferInfo</code> function in the Windows API. Don't know if there is anything simpler than that.</span>
<span class="comment-copy">like <a href="http://code.activestate.com/recipes/440694-determine-size-of-console-window-on-windows/" rel="nofollow noreferrer">this</a> ?</span>
<span class="comment-copy">doesn't curx and cury allow right away for the calculation OP wants?</span>
<span class="comment-copy">@progmatico ... oh that is right... well spotted. cury will give you the line. Answer updated. Thanks !!</span>
<span class="comment-copy">Thank you for your answer.  Just one problem.  I am running Python 3 (and I don't know Python 2).  If I add the <code>()</code> to print statement I get the error:<code>NameError: name 'curx' is not defined</code>.</span>
<span class="comment-copy">The only thing to change is ( ) for the print statement on the last line. The problem error you are getting is because you are running it on an IDE and not an actual console... try running in an actual console.</span>
<span class="comment-copy"><b>Just what I was after thank you</b>.  However just a note.  It counts text and  not new lines, so if I used 30 new lines it would still say 33 are available, for this reason I will wait a day or so until I accept this answer. In any case this is worthy of an up-vote.  Thank you once again for the quick reply.</span>
