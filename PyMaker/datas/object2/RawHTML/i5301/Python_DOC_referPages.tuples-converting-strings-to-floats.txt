<div class="post-text" itemprop="text">
<p>I'm following along with a Great Course tutorial for learning Python, and this code doesn't seem to work.</p>
<pre><code>#Open File
filename = input("Enter the name of the data file: ")
infile = open(filename, 'r')

#Read in file
datalist = []

for line in infile:
    #Get data from line
    date, l, h, rf = (line.split(','))
    rainfall = float(rf)
    max_temp = float(h)
    min_temp = float(l)
    m, d, y = (date.split('/'))
    month = int(m)
    day= int(d)
    year=int(y)
    #Put data into list
    datalist.append([day,month,year,min_temp,max_temp,rainfall])
</code></pre>
<p>I'm trying to import a csv file, then create a tuple. The problem occurs when I'm converting the values in the tuple to floats. It works fine until it runs through the file. Then it presents me with this error:</p>
<blockquote>
<p>Traceback (most recent call last): File
  "C:/Users/Devlin/PycharmProjects/untitled3/James'
  Programs/Weather.py", line 16, in  rainfall = float(rf)
  ValueError: could not convert string to float:`</p>
</blockquote>
<p>Any ideas on what am doing wrong?</p>
</div>
<div class="post-text" itemprop="text">
<p>It's hard to tell what exactly are you doing wrong without seeing the input file itself, but what seems to be wrong here (besides the fact that your values in a file seem to be comma-separated and that you might have been better off using Python stdlib's <a href="https://docs.python.org/3/library/csv.html" rel="nofollow noreferrer"><code>csv</code></a> module) is that you're encountering a string somewhere when iterating over the lines, and are trying to convert that to float which is a no go:</p>
<pre><code>&gt;&gt;&gt; float('spam')
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
ValueError: could not convert string to float: 'spam'
</code></pre>
<p>One of the solutions would be to simply skip the strings you're encountering, and you can choose between two approaches there (<a href="https://docs.python.org/2/glossary.html#term-lbyl" rel="nofollow noreferrer">LBYL (Look Before You Leap)</a> vs <a href="https://docs.python.org/2/glossary.html#term-eafp" rel="nofollow noreferrer">EAFP (Easier to Ask for Forgiveness than Permission)</a>), and, in a nutshell, I suggest you go with the latter since it's generally preferred due to the gap that exists between checking and using, which means that things can change out from under you, and oftentimes you'll have to handle the error in any case, even if you check first. Apart from that, instead of manually closing file-like objects later on (which you seem to have forgotten to do), I suggest using <a href="https://www.python.org/dev/peps/pep-0343/" rel="nofollow noreferrer"><code>with</code></a> statement as a context manager which automatically manages that for you. So, taking all that into account, something along the following lines should do the trick (disclaimer: not thoroughly tested):</p>
<pre><code>import csv

data = []

filename = input('Enter the name of the data file: ')

with open(filename) as f:
    reader = csv.reader(f, delimiter=',', skipinitialspace=True)
    for line in reader:
        try:
            date, (l, h, rf) = line[0], map(float, line[1:])
            m, d, y = map(int, date.split('/'))
        except ValueError as e:
            print('Skipping line: %s [because of: %s]' % (line, e))
            continue
        data.append([d, m, y, l, h, rf])
</code></pre>
<p>Hopefully this is enough to get you back on track ;-)</p>
</div>
<div class="post-text" itemprop="text">
<p>Review your csv file.</p>
<p>It is hard to say without seeing what's in the file, but the most likely explanation (according to the error message) is that you have a line for which the forth value is empty, e.g:</p>
<p><code>2018-01-30,5,12,</code> </p>
<p>So the <code>rf</code> variable would be empty when parsing that line, and the you would get that <code>ValueError</code> when trying to cast the value as a float.</p>
<p>Also, some advice on how to do it better:</p>
<ul>
<li>You may want to split your line first, then count how many data fields it has, and then discarding it before assigning the whole line to <code>date, l, h, rf</code>. Something like this:</li>
</ul>
<p>`</p>
<pre><code>for line in infile:
    # Get data from line. Use strip() to avoid whitespace
    items = line.strip().split(',')
    if len(items) != 4:
        # skip the iteration - do nothing with that malformed line
        continue
    date, l, h, rf = items
</code></pre>
<p>`</p>
<ul>
<li>You may want to have a look at the <a href="https://docs.python.org/3/library/csv.html" rel="nofollow noreferrer">csv module</a> for reading/writing csv files easily.</li>
</ul>
</div>
<div class="post-text" itemprop="text">
<p>The error means you that the string you are trying to cast a float is actually not a number. In your case, it looks like it's an empty string. It's probably because the last line of your file is empty, so you can check it at the beginning of your loop and break or continue if it is. An other strategy would be to catch the error, but it would then ignore a malformed line when you could want to be alerted of it, so it's up to you to pick the one that suites you.</p>
<p>Using square brackets also puts your values in a list, not in a tuple. You need parenthesis for that.</p>
<p>And you should also close your files when you are done.</p>
<p>Python also has a <a href="https://docs.python.org/3.6/library/csv.html" rel="nofollow noreferrer">CSV module</a> you may find useful.</p>
<pre><code>#Open File
filename = input("Enter the name of the data file: ")
infile = open(filename, 'r')

#Read in file
datalist = []

for line in infile:
    if line.strip() == '': # If the line only contains spaces
        continue           # Then, just skip it

    # Some stuff ...

    # Put everything in a tuple that we add to our list
    datalist.append((day,month,year,min_temp,max_temp,rainfall))

infile.close() # Close the file
</code></pre>
</div>
