<div class="post-text" itemprop="text">
<p>I am taking user input to get historical data of a particular stock and I want to handle 2 possible errors, 1 being an error generated due to bad inputs and the code generating an error and 2nd if the input is bad but the code gets executed and I get an empty dataframe</p>
<pre><code>while True:
    try:
        us = input('Enter the symbol of your stock :')
        us_sd = input('Enter the start date in yyyy-mm-dd :')
        year, month, day = map(int, us_sd.split("-"))
        us_sd = datetime.date(year,month,day)
        data = ns.get_history(symbol=us.upper(), start=us_sd, end=date.today())
        print(data)
        break
    except Exception as e:
        print('there was an error with your input :{0}'.format(e))
</code></pre>
<p>The above code handles if any systematic error happens but when an user inputs wrong stock symbol, example for SBI symbol is SBIN but if someone enters SBINSE or lets say someone enters ZOO as stock symbol, data returns an empty dataframe without any errors, I want to put a condition that if the dataframe returned is empty then the loop should keep on going. Please help.</p>
<p>In the above code ns is nsepy module. My python ver is 3.6.4</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>if data.empty:
    print('no results, please alter search and try again...')
    continue
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Thanks David A for pointing me to right direction.</p>
<p>This is the change that I implemented on my code and now it seems to handle all empty dataframe issue when a wrong symbol of a stock is entered</p>
<pre><code>while True:

    try:
        us = input('Enter the name of your stock :')
        us_sd = input('Enter the start date in yyyy-mm-dd :')
        year, month, day = map(int, us_sd.split("-"))
        us_sd = datetime.date(year,month,day)
        data = ns.get_history(symbol=us.upper(), start=us_sd, end=date.today())
        if data.empty == True:
            raise RuntimeError('Symbol doesn\'t exist')
        break
    except Exception as e:
        print('There was an error in your input, please try again :{0}'.format(e))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<pre><code>while True:
    try:
        us = input('Enter the symbol of your stock :')
        us_sd = input('Enter the start date in yyyy-mm-dd :')
        year, month, day = map(int, us_sd.split("-"))
        us_sd = datetime.date(year,month,day)
        data = ns.get_history(symbol=us.upper(), start=us_sd, end=date.today())
        if data == None or data.length == 0: // a check that is empty
            raise Exception("Data is empty")

        print(data)
        break
    except Exception as e:
        print('there was an error with your input :{0}'.format(e))
</code></pre>
<p>This should work, I haven't tested it though. You can als make your own exception, but it' not necessary. </p>
</div>
<span class="comment-copy">By "error", do you mean an exception as in title? If so, have a look at <a href="https://docs.python.org/3/reference/simple_stmts.html#raise" rel="nofollow noreferrer"><code>raise</code></a></span>
<span class="comment-copy">You capitalized <code>try</code>, which will not work.</span>
<span class="comment-copy">sorry capital Try was a mistake at typing here. that is not the issue here though.</span>
<span class="comment-copy">Thank you, this helps a lot.</span>
<span class="comment-copy">Yes this works, also the answer posted above by Jonas. Thank you.</span>
