<div class="post-text" itemprop="text">
<p>I am trying to write a query in Django but I'm not sure whats the best way to write this.  Also assuming that the database is mySQL.  This matters if distinct is used.</p>
<pre><code>  class Homework(models.Model):
    title = TextField()


  class Assignment(models.Model):
      homework_id = Foreignkey(Homework, on_delete=models.CASCADE)
      task = IntegerField(default=1)
      version = IntegerField(default=1)

</code></pre>
<p>Given the models above I want to get all the assignments in a particular homework where the assignments are the latest version of the task.
example:</p>
<pre><code>Homework_id: 1
    assignment v1, t1
    assignment v2, t1
    assignment v1, t2
</code></pre>
<p>If I have one homework object where the assignment with task 1 and assignment task 2 are in it then the result query should return <code>Assignment t1, v2  and  Assignment t2, v1</code></p>
<pre><code>v refers to version
t refers to task
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You could try annotating the tasks with the max version number like this:</p>
<pre><code>Assignment.objects.filter(homework_id=1).values('task').annotate(version=Max('version'))
</code></pre>
<p>Which would get you something like:</p>
<pre><code>&lt;QuerySet [{'task': 1, 'version': 2}, {'task': 2, 'version': 1}]&gt;
</code></pre>
</div>
<span class="comment-copy">What have you tried so far? any Django query that is giving error ?</span>
<span class="comment-copy">I haven't tried anything I just can't wrap my head around doing a query like this in django. please help.  I could easily just grab the list of assignments and loop through selecting the latest version of each task but there has to be a better way.</span>
