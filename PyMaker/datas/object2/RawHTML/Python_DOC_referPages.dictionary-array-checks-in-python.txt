<div class="post-text" itemprop="text">
<p>I have 2 dictionaries with arrays. I want the dictionary from the primary list only if 'buckets' show up  in the secondary list of dictionary 'buckets' while 'labels' are a match.</p>
<pre><code>primary = [{'buckets': [165, 27],
   'label': 'Andrew'}, {'buckets': [1364],
   'label': 'Matt'},{'buckets':[500, 60, 888], 'label':'John'}]

secondary = [{'buckets': [165, 1447],
  'label': 'Andrew'}, {'buckets': [1365, 15, 16],
  'label': 'Matt'}, {'buckets':[12,10,15], 'label':'Max'}]

data = {}

for x in primary:
    found = False
    for i in secondary:

        for num in x['buckets']:
            if x['label'] == i['label']:
                if num in i['buckets']:
                    found =True
                    break
    if found:
        data[x['label']] = x['buckets']
    else:
        data[i['label']] = i['buckets']

pprint.pprint(data)
</code></pre>
<p>If I change the matches around/ numbers in the array I do not get the right results. Any help would be greatly appreciated. </p>
<pre><code>Desired output:
{'Andrew': [165, 27], 'Matt': [1365, 15, 16]}
</code></pre>
<p>This occurs sometimes but if i change Andrews numbers in secondary It may end up just this. </p>
<pre><code>{'Matt': [1365, 15, 16]}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Here is a solution. The major point which I use here is <code>intersection</code> to check if there is a common value between two lists. If there is, then I take the list from <code>primary</code>. If not, then you take the list from <code>secondary</code> as you explained in the comment below. You don't need a <code>found</code> tag now</p>
<pre><code>data = {}

for x in primary:
    for i in secondary:
        if x['label'] == i['label']:
            if list(set(x['buckets']).intersection(i['buckets'])):
                    data[x['label']] = x['buckets']
                    break
            else:
                data[x['label']] = i['buckets']

print(data)
# {'Andrew': [165, 27], 'Matt': [1365, 15, 16]}
</code></pre>
</div>
<span class="comment-copy"><b>The goal is to return the primary list dictionary if the primary dictionary shows up in then return secondary list dictionary if not return the secondary dictionary.</b>...... This statement is highly confusing and unclear... "shows up in" where?</span>
<span class="comment-copy">@Bazingaa i edited the statement. When labels match i want to check if buckets from primary are in secondary. if that is yes return the dict in primary if that is is a no return the dict in secondary.</span>
<span class="comment-copy">In such problems, it is often helpful for people who want to answer to have a desired sample output. How would the desired output look like in your case? Can you include that in the question?</span>
<span class="comment-copy">@Bazingaa thank you good point i added a desired output plus the issue output.</span>
<span class="comment-copy">The desired solution should be <code>{'Andrew': [165, 1447], 'Matt': [1365, 15, 16]}</code>. You want the lists from the secondary dictionaries, right?</span>
<span class="comment-copy">It also needs to confirm if one of the primary key['buckets'] are in secondary key['buckets'] so to return primary Andrew 165 or 27 needs to be in secondary buckets otherwise take Secondary Andrew</span>
<span class="comment-copy">yes thank you so much !!!!!</span>
