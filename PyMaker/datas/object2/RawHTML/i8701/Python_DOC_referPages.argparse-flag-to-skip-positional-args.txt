<div class="post-text" itemprop="text">
<p>I have a script which normally requires a positional argument: <code>some-script POS</code>. However, when the "--version" flag is present, I would like to be able to "waive" the positional arg requirement: <code>some-script --version</code>. </p>
<p>Is there a proper way to do this within the argparse framework? </p>
<p>I can optionally use <code>"--version" in sys.argv</code>, but I would like to be able to use argparse.</p>
</div>
<div class="post-text" itemprop="text">
<p>There's a <a href="https://docs.python.org/3/library/argparse.html#action" rel="nofollow noreferrer"><code>version</code> action</a> that makes this possible:</p>
<pre><code>parser.add_argument('--version', action='version', version='%(prog)s 1.0')
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You'll have to make the positional argument optional by setting <code>nargs='?'</code> and instead raise an error in your code if it's not present. For example:</p>
<pre><code>parser.add_argument('POSITIONAL', dest='positional', nargs='?')
...
if parsed.positional is None:
    print('Positional argument "POSITIONAL" is required')
    sys.exit(1)
</code></pre>
</div>
<span class="comment-copy">What's supposed to happen with <code>version</code>?  Print a message and exit (like <code>help</code>), or set some values in <code>args</code> (e.g. 'store_true')</span>
<span class="comment-copy">unfortunately, in my case the positional argument is required, and I'm counting on argparse to catch this and throw an error if it is not provided. so I cannot make it optional. also, this won't scale if one has multiple required positional arguments or other complex logic</span>
