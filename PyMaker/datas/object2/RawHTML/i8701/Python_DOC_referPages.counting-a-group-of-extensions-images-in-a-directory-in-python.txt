<div class="post-text" itemprop="text">
<p>I have folders with a mix of files and only want a count of the image type files.  The following is returning the total files in the directory, not just the images. What did I do wrong?</p>
<pre><code>extensions = ['.jpg','.png','.gif']
DL_path = os.getcwd()
for dirpath, dirnames, files in os.walk(DL_path):
    for original_file in files:
        todays_files = sum(1 for x in files if any(needle in original_file for needle in extensions))
        print(todays_files)
</code></pre>
<p>If I have one jpg, one png, and two txt files. todays_files should be returning a 2, but it is returning a 4.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use <a href="https://docs.python.org/3/library/stdtypes.html#set" rel="nofollow noreferrer"><code>set</code></a> to avoid duplicated items:</p>
<pre><code>&gt;&gt;&gt; found_extensions = set()
&gt;&gt;&gt; found_extensions.add('.png')
&gt;&gt;&gt; found_extensions.add('.png')  # try to add .png again
&gt;&gt;&gt; found_extensions
{'.png'}   # &lt;-- appear only once
</code></pre>
<hr/>
<pre><code>import os

extensions = {'.jpg','.png','.gif'}  # set literal

found_extensions = set()
for dirpath, dirnames, files in os.walk(os.getcwd()):
    for f in files:
        found_extensions.add(os.path.splitext(f)[-1])
        # ^-- duplicated item is not added

print(extensions &amp; found_extensions)  # to get itersection (&amp;) =&gt; filter
print(len(extensions &amp; found_extensions))
</code></pre>
<hr/>
<p><strong>UPDATE</strong> To get the number of matched file counts for each directory:</p>
<pre><code>import os

extensions = {'.jpg','.png','.gif'}  # set literal

for dirpath, dirnames, files in os.walk(os.getcwd()):
    count = sum(os.path.splitext(f)[-1] in extensions for f in files)
    print(dirpath, count)
</code></pre>
<p><code>os.path.splitext(f)[-1] in extensions</code> will check whether a file has the wanted extension, and returns <code>True</code> (= 1) / <code>False</code> (= 0). Summing them will give you want.</p>
<pre><code>&gt;&gt;&gt; True == 1
True
&gt;&gt;&gt; False == 0
True
&gt;&gt;&gt; sum([True, False, False, True, False])
2
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p><s>Iterating over <code>original_file</code> is looping each character in the file name. Since non-empty strings evaluate to <code>True</code> the <code>any</code> function is always returning <code>True</code>. So you're counting each file.</s> I miss read the contents of the loop.</p>
<p>Instead you can get the extension for each file, then check if it's in your list of file types you care about.</p>
<pre><code>import os
extensions = ['.jpg','.png','.gif']
DL_path = os.getcwd()
todays_files = []
for dirpath, dirnames, files in os.walk(DL_path):
    for original_file in files:
        filename, file_extension = os.path.splitext(original_file)
        if file_extension in extensions:
            todays_files.append(original_file)
    print(dirpath, len(todays_files))
</code></pre>
</div>
<span class="comment-copy">When I do that in the 1 jpg, 1 gif, 2 txt in the directory, it does return a 2, but the next directory, with 1 jpg, 2 gifs, and 1 txt, it still returns a 2, when what I need is for it to return a 3.</span>
<span class="comment-copy">@ScottC, I misunderstood your question. I updated the answer. Please check it out again.</span>
<span class="comment-copy">Thanks. That worked.</span>
