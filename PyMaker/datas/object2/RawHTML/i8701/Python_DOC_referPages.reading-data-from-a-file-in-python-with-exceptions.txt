<div class="post-text" itemprop="text">
<p>I have to write a program that will read data from a file, convert it to an integer and total the amount. So far here is what i have. The numbers from the data file "numdata.txt" are: 78,93,85,100,81,76,94,77. </p>
<pre><code>def main():
total = 0

try:
    NumberFile = open('numdata.txt', 'r')

    for line in NumberFile:
        amount = float(line)
        total += amount
        print(format(total, ',.2f'))

except IOError:
    print('An error occurred trying to read the file.')

except ValueError:
    print('Non-numeric data found in the file.')

except:
    print('An error has occurred.')

finally:
     NumberFile.close()


main()
</code></pre>
<p>When i run the program the first number (78) gets displayed and then one of the exception error messages comes up, the weird thing is that it's different sometimes. If someone could help point me in the right direction I'd appreciate it. I'm still very new to this so please bear with me.</p>
<p>I tried and tried but could not get the loop to work correctly so i ended up going this route:</p>
<pre><code>def main ():
infile = open('numdata.txt', 'r')
num1 = int(infile.readline())
num2 = int(infile.readline())
num3 = int(infile.readline())
num4 = int(infile.readline())
num5 = int(infile.readline())
num6 = int(infile.readline())
num7 = int(infile.readline())
num8 = int(infile.readline())
infile.close()
total = num1+num2+num3+num4+num5+num6+num7+num8
average = total/8
print('the total: ', total)
print('the average: ', average)
</code></pre>
<p>main()</p>
<p>It's not pretty but it works i guess lol</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>total = 0    

try:
    NumberFile = open('numdata.txt', 'r')

    for line in NumberFile:
        amount = float(line)
        total += amount
        print(format(total, ',.2f'))
except IOError:
    print('An error occurred trying to read the file.')
except ValueError:
    print('Non-numeric data found in the file.')
except:
    print('An error has occurred.')
finally:
    NumberFile.close()
</code></pre>
<p>The exception occurs because you're closing the file immediately after the first iteration, leaving you unable to iterate over the rest of it.</p>
<p>Moving <code>NumberFile.close()</code> to a finally clause ensures the file is closed no matter what goes wrong.  However, a much better way to read / write files in Python is to use the <a href="https://docs.python.org/2/reference/compound_stmts.html#with" rel="nofollow noreferrer"><code>with</code> keyword</a>, which is a built-in method of ensuring the same thing.</p>
<pre><code>total = 0

with open('numdata.txt', 'r') as f:
    for line in f:
        try:
            total += float(line)
        except ValueError:
            print('Non-numeric data found in the file.')
            continue
        finally:
            print('{:.2f}'.format(total, ',.2f'))
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>you are closing the file in first iteration <code>NumberFile.close()</code> is not indented properly</p>
</div>
<span class="comment-copy">Can you please reformat your code?</span>
<span class="comment-copy">sorry i didnt see your comment, i think i did what you asked?</span>
<span class="comment-copy">Thanks for the feedback, I appreciate it. I'm stiill having a small issue, once the numbers are all totaled I get the value error message appearing at the end, any way to get that to not show up? Again thanks for the help :)</span>
<span class="comment-copy">What sort of values do you have in your file?  I suspect you'd be better off moving the <code>try: / except ValueError:</code> inside the the for loop.  If there's an exception, maybe print out the value so you know what cause the problem, then <code>continue</code> onto the next iteration.</span>
<span class="comment-copy">the file is just a regular notepad file. i'll try moving the exception error and see if i can get it to work. i was also thinking maybe of having it total the sum, find an average and display it as a percentage. Would i just need to add in some coding for finding the average and then converting it to percentage? or would the format function take care of the percentage part?</span>
<span class="comment-copy">Format just looks after the formatting of a given variable.  Use <code>{:.2%}</code> to display a value with a percentage symbol.  Check out the statistics module if you're looking for an easy way to find average values: <a href="https://docs.python.org/3/library/statistics.html" rel="nofollow noreferrer">docs.python.org/3/library/statistics.html</a>  Please mark the answer as accepted if you're happy with it.  :)</span>
<span class="comment-copy">just marked it. thanks again for all the help, take care - dan</span>
