<div class="post-text" itemprop="text">
<p>I wonder how to substitute group 1 with certain string by regex in python.</p>
<p><strong>Question1:</strong></p>
<pre><code>str = "aaa bbb ccc"
regex = "\baaa (bbb)\b"
repl = "111 bbb 222"
</code></pre>
<p>Use regex to match str, matched "aaa bbb", and replace group1 "bbb" with "111 bbb 222", and get the result "aaa 111 bbb 222 ccc"</p>
<pre><code>str_repl = "aaa 111 bbb 222 ccc"
</code></pre>
<p>Thanks for @RomanPerekhrest and @janos 's lookbehind method.</p>
<p>And I wonder how to solve a more general scenario:</p>
<p><strong>Question2:</strong></p>
<pre><code>s1 = "bBb"
regex = "(?&lt;=\baaa )" + s1 + "\b"  # may not suitable
repl = "XxX " + s1 + " YyY"
</code></pre>
<p>target:</p>
<pre><code>s0 = "aaa bBb ccc"
s0_repl = "aaa XxX bBb YyY ccc"

s1 = "aaa bbb ccc"
no match

s2 = "AAA bBb ccc"
s2_repl = "AAA XxX bBb YyY ccc"
</code></pre>
<p>Ignore the case for substring except of s1 when matching in original string.</p>
<p><strong>Question3:</strong></p>
<pre><code>s1 = "bbb"
regex = "(?&lt;=\baaa )" + s1 + "\b"  # may not suitable
repl = "XxX " + s1 + " YyY"
</code></pre>
<p>target:</p>
<pre><code>s0 = "aaa bBb ccc"
s0_repl = "aaa XxX bBb YyY ccc"

s1 = "aaa bbb ccc"
s1_repl = "aaa XxX bbb YyY ccc"

s2 = "AAA BBB ccc"
s2_repl = "AAA XxX BBB YyY ccc"
</code></pre>
<p>Ignore the case for substring except of s1 when matching &amp; substituting in original string.</p>
<p><strong>Question4:</strong></p>
<p>If there is a way to substitute group 1 on original string by regex on python?</p>
</div>
<div class="post-text" itemprop="text">
<p>To replace sequence <code>bbb</code> which should be preceded by sequence <code>aaa</code> use the following approach:</p>
<pre><code>s = "aaa bbb ccc"
regex = r"(?&lt;=aaa )bbb\b"
repl = "111 bbb 222"

str_replaced = re.sub(regex, repl, s)
print(str_replaced)
</code></pre>
<p>The output:</p>
<pre><code>aaa 111 bbb 222 ccc
</code></pre>
<hr/>
<p><code>(?&lt;=aaa )</code> - lookbehind positive assertion, ensures that <code>"bbb"</code> is preceded by <code>"aaa "</code></p>
<p><a href="http://www.regular-expressions.info/lookaround.html" rel="nofollow noreferrer">http://www.regular-expressions.info/lookaround.html</a></p>
</div>
<div class="post-text" itemprop="text">
<p>You can use the <code>re</code> package, and positive look-behind:</p>
<pre><code>import re
s = "aaa bbb ccc"
regex = r"\b(?&lt;=aaa )(bbb)\b"
repl = "111 bbb 222"
print(re.sub(regex, repl, s))
</code></pre>
<p>This will produce:</p>
<pre><code>aaa 111 bbb 222 ccc
</code></pre>
<p>Notice the changes I did there:</p>
<ul>
<li>The <code>aaa</code> prefix in the regex is wrapped in <code>(?&lt;=...)</code>. This means, match <code>bbb</code> if it follows <code>aaa</code>, without including <code>aaa</code> in the pattern to replace. This is called <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">positive lookbehind</a>. Without this change to your regex, the <code>aaa</code> would disappear together with <code>bbb</code></li>
<li>Regular expression strings should be written as <code>r"..."</code>, to make them raw strings, in order to avoid problems with escape sequences</li>
<li>I renamed the <code>str</code> variable to <code>s</code>, because <code>str</code> is a reserved word in Python, as @elena also pointed out.</li>
</ul>
</div>
<div class="post-text" itemprop="text">
<p>First of all, don't use <code>str</code> as a variable name. It's a reserved keyword in Python.</p>
<pre><code>import re

str1 = "aaa bbb ccc"
re.sub("bbb", "111 bbb 222", str1)
Out[11]: 'aaa 111 bbb 222 ccc'
</code></pre>
</div>
<span class="comment-copy">your <i>general scenario</i> sounds simple and complex simultaneously. Can you elaborate to make it more clear?</span>
<span class="comment-copy">Sorry for deleted some descriptions just now. Please check the question's details again.</span>
<span class="comment-copy">Check <a href="http://ideone.com/yTUgsS" rel="nofollow noreferrer">this demo</a>.</span>
<span class="comment-copy">@Wiktor, thanks for your demo, I added question 2-4 above.</span>
<span class="comment-copy">Thank you! So could I replace group1 by python's regex or I could just use this way?</span>
<span class="comment-copy">in your simple case you don't even need to enclose <code>bbb</code> into capturing group, just use lookbehind and word boundary as shown above. I will match sequence <code>bbb</code> as a separate word which is preceded by <code>"aaa "</code></span>
<span class="comment-copy">I have updated the question details. : )</span>
<span class="comment-copy">your code also replaces 'bbb' in s="aas bbb ccc"</span>
<span class="comment-copy">I just want to match the "bbb" start with "aaa ", so this answer may not be suitable.</span>
