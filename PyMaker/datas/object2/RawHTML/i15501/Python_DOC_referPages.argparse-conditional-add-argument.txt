<div class="post-text" itemprop="text">
<p>I am just new with Python and I am trying out argparse. I want to add an argument if the first argument is equal to something. </p>
<pre><code>import argparse

class ArgsParser :
    def __init__(self):
        parser = argparse.ArgumentParser()
        parser.add_argument('command')
        args = parser.parse_args()
        if args.command == 'a' :
            parser.add_argument('-b', required=True)
            args = parser.parse_args()
            self.b = args.b

def main():
    parser = ArgsParser();
    print parser.b

if __name__ == '__main__':
    main()
</code></pre>
<p>When I run the script using </p>
<blockquote>
<p>prog.py a -b="abc"</p>
</blockquote>
<p>It gives an error</p>
<blockquote>
<p>prog.py: error: unrecognized arguments: -b=abc</p>
</blockquote>
<p>But if I run the script using</p>
<blockquote>
<p>prog.py a</p>
</blockquote>
<p>The result would be</p>
<blockquote>
<p>prog.py: error: argument -b is required</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>I think you can do this with subparsers:</p>
<pre><code>&gt;&gt;&gt; import argparse
&gt;&gt;&gt; parse = argparse.ArgumentParser()
&gt;&gt;&gt; subparsers = parse.add_subparsers()
&gt;&gt;&gt; parse_a = subparsers.add_parser('a')
&gt;&gt;&gt; parse_a.add_argument('-b', required=True)
_StoreAction(option_strings=['-b'], dest='b', nargs=None, const=None, default=None, type=None, choices=None, help=None, metavar=None)
&gt;&gt;&gt; parse.parse_args(['a'])
usage:  a [-h] -b B
 a: error: argument -b is required
</code></pre>
</div>
<span class="comment-copy">It looks to me like you want to make <code>-b</code> a required argument of a subcommand -- <a href="https://docs.python.org/3/library/argparse.html#sub-commands" rel="nofollow noreferrer">docs.python.org/3/library/argparse.html#sub-commands</a></span>
<span class="comment-copy">Thanks! This is exactly what I needed. :)</span>
