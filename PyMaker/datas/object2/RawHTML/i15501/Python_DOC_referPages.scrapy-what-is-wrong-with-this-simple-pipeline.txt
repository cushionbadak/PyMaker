<div class="post-text" itemprop="text">
<p>I have two scrapy spiders, let's say <code>spider1</code> and <code>spider2</code>. <code>spider1</code> crawls some pages and collects urls in a file. Here is the code:</p>
<pre><code>class FileWriterPipeline(object):

    def __init__(self):
        self.file = open('somefile.txt'), 'wb')

    def process_item(self, item, spider):
        if spider.name == 'spider1':
            line = item['url'] + "\n"
            self.file.write(line)
            return item
</code></pre>
<p>The problem is that as soon as I run <code>spider2</code>, <code>somefile.txt</code> is getting wiped clean. Would anyone know what is wrong here?</p>
</div>
<div class="post-text" itemprop="text">
<p>Regardless of what you do later, as soon as you call:</p>
<pre><code>open('somefile.txt', 'wb')
</code></pre>
<p>with the <code>'wb'</code> argument, the <a href="https://docs.python.org/3/library/functions.html#open" rel="nofollow">file is erased completely</a>.  If you want to append, you should instead use <code>'ab'</code>.</p>
</div>
<span class="comment-copy">ah.. and <code>__init__</code> is called before <code>process_item</code> so regardless of which spider it is it would erase it, right? let me check.`</span>
<span class="comment-copy">It <i>has</i> to be otherwise your file wouldn't be open!</span>
