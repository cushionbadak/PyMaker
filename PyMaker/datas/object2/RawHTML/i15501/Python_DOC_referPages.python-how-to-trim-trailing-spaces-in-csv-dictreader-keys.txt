<div class="post-text" itemprop="text">
<p>I am using python (2.6) csv DictReader. My input file has a header line where the column names have trailing spaces:</p>
<pre><code>colname1,      colname2     ,col3, etc.
XX, YY, ZZ
</code></pre>
<p>The returned dict object has key() = <code>['colname1', 'colname2     ', 'col3']</code></p>
<p>Is there an option to trim leading and trailing spaces from the keys?</p>
<p>--edit</p>
<p>The problem arises in processing by key names:</p>
<pre><code>with open(fname) as f:
   r = csv.DictReader(f)
   for row in r:
      print "processing", r["column1"], r["column2"]
</code></pre>
<p>The files are database dumps. And the dump program is way too smart - it adjust the output column width depending on data -- which means different sets of selects are going to have different column width and different key lengths. Sometimes I must use <code>r['column2    ']</code> and sometimes pad or reduce spaces. ouch!</p>
</div>
<div class="post-text" itemprop="text">
<p>Just read the first line manually and pass it along to the <code>DictReader</code>.</p>
<pre><code>with open('file.csv') as fh:
    header = [h.strip() for h in fh.next().split(',')]
    reader = csv.DictReader(fh, fieldnames=header)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You need to register a custom dialect in the csv module</p>
<pre><code>csv.register_dialect('MyDialect', quotechar='"', skipinitialspace=True, quoting=csv.QUOTE_NONE, lineterminator='\n', strict=True)
</code></pre>
<p>then use the dialect when creating the DictReader:</p>
<pre><code>my_reader = csv.DictReader(trip_file, dialect='MyDialect')
</code></pre>
<p>Here's all the <a href="https://docs.python.org/3/library/csv.html#dialects-and-formatting-parameters" rel="nofollow noreferrer">Dialect Options</a></p>
</div>
<span class="comment-copy">I wish this were an option in csv.DictReader. (is there a place to express such wishlists?)</span>
<span class="comment-copy">You could try requesting the feature but chances are they won't add it. To be fair, your csv is broken ;)</span>
<span class="comment-copy">yes that CSV is <i>unusual</i> but it is a database dump and each vendor has its personality. But I know the outcome of not asking :) Where does one ask?</span>
<span class="comment-copy">The Python bug tracker is the place: <a href="http://bugs.python.org" rel="nofollow noreferrer">bugs.python.org</a></span>
<span class="comment-copy">Doesn't work in python 3, FWIW. What does, though is <a href="https://stackoverflow.com/a/12934129/588437">redefining <code>reader.fieldnames</code></a>.</span>
<span class="comment-copy">this only removes leading whitespace, but there's no option for trailing whitespace.</span>
