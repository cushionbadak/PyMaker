<div class="post-text" itemprop="text">
<p>This has bothered me for a while. I have large amounts of data exported from other programs or Internet sources. I try to separate these data into strings or rstrings and then filter the strings.</p>
<p>I cannot copy any "illegal characters" into this field, so I can't put any example code. I also cannot copy these characters into the Python3 interpreter (they're switched to '?').</p>
<p>I can copy/import them into Vim, though they appear as black squares. Copying the imported data into Notebook and saving as *.txt eliminates most of the problems, but not all. I don't care--much--about saving the characters. Deleting them would be fine, although simply ignoring them would be even better.</p>
</div>
<div class="post-text" itemprop="text">
<p>Let's assume your data is in UTF-8.  If this is wrong, we'll probably lose a lot of valid Unicode characters, so you may need to change this assumption.  In particular, if every other character looks invalid, try UTF-16 (both LE and BE).</p>
<pre><code>with open('path/to/file.txt', mode='rt', encoding='utf_8', errors='ignore') as file:
    contents = file.read()
</code></pre>
<p>That will pull the entire contents of the file into a string, ignoring anything that's not valid UTF-8.  You can then do with the string as you please.</p>
<p>If the file is very large, you may want to open a new file for writing and pass both files to <a href="https://docs.python.org/3/library/shutil.html#shutil.copyfileobj" rel="nofollow"><code>shutil.copyfileobj()</code></a>; that will push the data into the new file without consuming massive amounts of memory.</p>
</div>
<span class="comment-copy">How is this text encoded?  UTF-8, Latin-1, UTF-16, something else?</span>
<span class="comment-copy">I'm guessing UTF-8. I'm not sure. The data usually come from Microsoft Silverlight applications.</span>
<span class="comment-copy">Still having problems. Will edit original question.</span>
<span class="comment-copy">@Shay: When you're opening the file for writing, make sure you specify the encoding explicitly rather than letting Python guess.  Pass <code>encoding='utf_8'</code> to your second <code>open()</code> call.</span>
<span class="comment-copy">That's it. Thank you.</span>
