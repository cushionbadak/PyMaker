<div class="post-text" itemprop="text">
<p>I am trying to get Ardinput to pass into the <code>if "(Ardinput == stagecode):"</code> but it seems like Ardinput loses it's contents </p>
<p>here is my output for the code</p>
<pre><code>Start capture
b'STAGE\r\n'
STAGE
 Befor CR
STAGE
</code></pre>
<p>Code:</p>
<pre><code>url = config.url()

stagecode = "STAGE "

ser = serial.Serial(
 port='COM3',
 baudrate=9600, 
)

def stage():
    urllib.request.urlopen(url + 'f.stage')

def capture():
    global Ardinput
    print ("Start capture")
    while (1):           
        line = ser.readline()
        if (line != ""):
            print (line)
            Ardinput = line
            Ardinput = Ardinput.decode("utf-8")
            print (Ardinput + ' Befor CR')
            Ardinput = Ardinput[:-1]
            print (Ardinput)
            if (Ardinput == stagecode):       
                print (stagecode + ' IN IF FUNCTION')
                stage()
capture()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You removed just the <code>\n</code> newline but left the <code>\r</code> carriage return in place.</p>
<p>Use <a href="https://docs.python.org/3/library/stdtypes.html#str.strip" rel="nofollow"><code>str.strip()</code></a> instead to remove <em>all</em> whitespace from start and end:</p>
<pre><code>Ardinput = line.decode('utf8').strip()
</code></pre>
<p>and remove the space from <code>stagecode</code>:</p>
<pre><code>stagecode = "STAGE"
</code></pre>
<p>For future reference, it is far easier to spot these differences if you use the <a href="https://docs.python.org/3/library/functions.html#repr" rel="nofollow"><code>repr()</code></a> or even <a href="https://docs.python.org/3/library/functions.html#ascii" rel="nofollow"><code>ascii()</code></a> functions to produce a string literal version of the value:</p>
<pre><code>&gt;&gt;&gt; line = b'STAGE\r\n'
&gt;&gt;&gt; Ardinput = line.decode('utf8')[:-1]
&gt;&gt;&gt; print(Ardinput)
STAGE
&gt;&gt;&gt; print(repr(Ardinput))
'STAGE\r'
</code></pre>
<p>Note how the latter shows that there is still a <code>\r</code> carriage return character in the value.</p>
<p><code>\r</code> and <code>\n</code> are considered whitespace, as are spaces and tabs and the <a href="http://en.wikipedia.org/wiki/Non-breaking_space" rel="nofollow">non-break space</a>:</p>
<pre><code>&gt;&gt;&gt; '\t\t   Hello world!  \xa0\r\n'.strip()
'Hello world!'
</code></pre>
<p>Note that the space in the middle was not removed; <code>str.strip()</code> works on the lead and trail ends of a string only.</p>
</div>
<div class="post-text" itemprop="text">
<p><code>\r\n</code> represents a carriage return with a new line (hence:</p>
<pre><code>STAGE
Befor CR
</code></pre>
<p>and not <code>STAGE Befor CR</code>). You will have to strip it for instance with  <code>Ardinput.decode('utf-8').strip()</code> to remove the newline, or remove the last 2 characters with <code>Ardinput.decode('utf-8')[:-2]</code>).</p>
</div>
<span class="comment-copy">Wow also thank you for shorting my function with Ardinput = line.decode('utf8').strip()! Very handy to know.</span>
<span class="comment-copy">I cannot believe Ardinput = Ardinput[:-1 ] was the problem. I added 2 there and it all worked, Great work thank you!</span>
