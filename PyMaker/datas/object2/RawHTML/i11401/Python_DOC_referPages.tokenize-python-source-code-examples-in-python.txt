<div class="post-text" itemprop="text">
<p>Looking to gain understanding in Python's<a href="https://docs.python.org/3/library/tokenize.html" rel="nofollow">tokenize</a> module. I am interested in calling the <code>tokenize.tokenize</code> method on a given python source file (like the one below) and get its tokenized output with the 5-tuple as mentioned in the docs.</p>
<pre><code># Python source file
import os

class Test():
    """
    This class holds latitude, longitude, depth and magnitude data.
    """

    def __init__(self, latitude, longitude, depth, magnitude):
        self.latitude = latitude
        self.longitude = longitude
        self.depth = depth
        self.magnitude = magnitude

    def __str__(self):
        # -1 is for detection of missing data
        depth = self.depth
        if depth == -1:
            depth = 'unknown'

        magnitude = self.magnitude
        if magnitude == -1:
            depth = 'unknown'

        return "M{0}, {1} km, lat {2}\N{DEGREE SIGN} lon {3}\N{DEGREE SIGN}".format(magnitude, depth, self.latitude, self.longitude)
</code></pre>
<p>Unfortunately, the <a href="https://docs.python.org/3/library/tokenize.html#examples" rel="nofollow">example</a> in the docs is not clear enough given my inexperience in Python to make it work. Also, I could not find any related useful example code online.</p>
<p>Any simple workable code examples will be greatly appreciated.
Also, if you know of useful online material with examples/explanations of the <code>tokenize</code> module and its methods that would be great.</p>
</div>
<div class="post-text" itemprop="text">
<p><code>tokenize.tokenize</code> is a generator, and it will <code>yield</code> multiple 5-tuples corresponding to each token in the source.</p>
<pre><code>with open('/path/to/src.py', 'rb') as f:
    for five_tuple in tokenize.tokenize(f.readline):
        print(five_tuple.type)
        print(five_tuple.string)
        print(five_tuple.start)
        print(five_tuple.end)
        print(five_tuple.line)
</code></pre>
</div>
<span class="comment-copy">Thanks for your answer. However, I am not getting the name of the tokens, e.g. <code>STRING</code>, <code>OP</code> etc. . Am I missing something?</span>
<span class="comment-copy">They are the first item in the tuple, but they are an int, not a string.  You'll have to compare them to the global statics in the <code>tokenize</code> module to <code>if five_tuple.type == tokenize.OP</code></span>
<span class="comment-copy">I see, and how can I compare against more structural tokens (e.g. for an if statement and other keywords)??</span>
<span class="comment-copy">You're going to have to do some work yourself.  Just print out all the token tuples and see what the types are for <code>if</code> statements.  The token tuples include the code string <i>and</i> the entire line the token appears on.</span>
