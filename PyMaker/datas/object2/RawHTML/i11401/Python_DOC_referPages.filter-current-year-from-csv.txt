<div class="post-text" itemprop="text">
<p>How can I use <code>dateime</code> to automatically input the current year into my filter and have the file that's created from the filter named with the current year too?</p>
<p>Where it says "2015" I'm trying to have that change with the current year. The data in the csv is in a M/DD/YYYY format </p>
<pre><code>import csv
import time
from datetime import date

reader = csv.reader(open(r"input.csv"),delimiter=',')
filtered = filter(lambda p: '2015' == p[7], reader)
csv.writer(open(r'output\Year\2015.csv','w', newline =''),delimiter=',').writerows(filtered)
time.sleep(0.1)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use <code>date.today().year</code>:</p>
<pre><code>import csv
import time
from datetime import date

year = str(date.today().year)
filename = r'output\Year\{}.csv'.format(year)
reader = csv.reader(open(r"input.csv"),delimiter=',')
filtered = filter(lambda p: year == p[7], reader)
csv.writer(open(filename, 'w', newline=''), delimiter=',').writerows(filtered)
time.sleep(0.1)
</code></pre>
</div>
<span class="comment-copy"><a href="https://docs.python.org/3/library/datetime.html#datetime.datetime.now" rel="nofollow noreferrer">datetime.now()</a> with subsequent <code>.year</code> property</span>
<span class="comment-copy">What about <code>year</code> in the <code>lambda</code> passed to <code>filter</code>?</span>
<span class="comment-copy">I actually completely missed that <code>year</code> was used twice, good catch</span>
<span class="comment-copy">@malbarbo the date in row 7 is in a MM/DD/YYYY format, does <code>(lambda p: year == p[7], reader)</code> need to be changed to read the year properly? Its generating the files with the year but with no data. Everything else is working now though, thanks so much.</span>
<span class="comment-copy">Get the last 4 chars <code>p[7][-4:]</code></span>
