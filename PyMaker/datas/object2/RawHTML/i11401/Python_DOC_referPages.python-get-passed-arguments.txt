<div class="post-text" itemprop="text">
<p>I'm working on a project which allows the user to set a path to upload files to by adding the necessary argument but for whatever reason, the upload_destination variable is always empty!
Here's my code</p>
<pre><code>def main():
  global listen
  global port
  global execute
  global command
  global upload_destination
  global target

  if not len(sys.argv[1:]):
     usage()
  try:
     opts, args = getopt.getopt(sys.argv[1:], "hle:t:p:cu", ["help", "listen", "execute", "target", "port", "command", "upload"])
  except getopt.GetoptError as err:
     print str(err)
     usage()

  for o,a in opts:
     if o in ("-h", "--help"):
         usage()
     elif o in ("-l", "--listen"):
         listen = True
     elif o in ("-e", "--execute"):
         execute = True
     elif o in ("-c", "--commandshell"):
         command = True
     elif o in ("-u", "--upload"):
         #Here's the problem, a is empty even though I include a path
         upload_destination = a
     elif o in ("-t", "--target"):
         target = a
     elif o in ("-p", "--port"):
         port = int(a)
     else:
         assert False, "Unhandled Option"

  if not listen and len(target) and port &gt; 0:
     buffer = sys.stdin.read()
     client_sender(buffer)

  if listen:
     server_loop()
</code></pre>
<p>I call the programm by entering </p>
<pre><code>C:\Users\Asus\Desktop\PythonTest&gt;python test.py -l -c -p 3500 -u C:\Users\Asus\Desktop\Test
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>It's a simple missing colon <code>:</code>.</p>
<p><a href="https://docs.python.org/2/library/getopt.html" rel="nofollow">https://docs.python.org/2/library/getopt.html</a></p>
<blockquote>
<p>options is the string of option letters that the script wants to recognize, with options that require an argument followed by a colon (':'; i.e., the same format that Unix getopt() uses).</p>
</blockquote>
<p>Change the <code>"hle:t:p:cu"</code> to <code>"hle:t:p:cu:"</code> and it should work (at least it did work for me with Win7/Python3.5).</p>
<p>When you execute <code>print(opts, args)</code> with your code, you get:</p>
<pre><code>([('-l', ''), ('-c', ''), ('-p', '3500'), ('-u', '')], ['C:UsersAsusDesktopTest'])
</code></pre>
<p>with the added colon it becomes:</p>
<pre><code>([('-l', ''), ('-c', ''), ('-p', '3500'), ('-u', 'C:UsersAsusDesktopTest')], [])
</code></pre>
<p>Without the colon <code>C:\Users\...</code> becomes a new argument.</p>
</div>
<span class="comment-copy">Why not to use <code>argparse</code> (<a href="https://docs.python.org/3/library/argparse.html" rel="nofollow noreferrer">docs.python.org/3/library/argparse.html</a>)?</span>
<span class="comment-copy">May not be related at all, but try use forward slashes instead. Like if you were to have <code>s = "something/new"</code>, it'd end up as <code>s = "something(newline)ew"</code></span>
<span class="comment-copy">@Peter I also thought of this so I tried by simply entering Test and it still was empty</span>
<span class="comment-copy">Are you completely certain that the <code>elif</code> block is executing at all? If you put a <code>print("about to change upload destination")</code> on the line before <code>upload_destination = a</code>, does it get printed?</span>
<span class="comment-copy">@Kevin Yes it does, I tried it multiple times</span>
<span class="comment-copy">Thank you very much! This solved my problem.</span>
