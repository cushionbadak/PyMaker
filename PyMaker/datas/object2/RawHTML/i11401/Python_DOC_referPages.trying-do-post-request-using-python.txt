<div class="post-text" itemprop="text">
<p>I'm trying to make http post request using python. Also I need <code>totp</code> authentication and for this I'm using <code>pyotp</code>. For the request I'm using Requests library. But the code doesn't work and I don't know where the mistake is. Do you have ideas? I'm using python 3.5.</p>
<p>This is the code:</p>
<pre><code>import requests
import json
from requests.auth import HTTPDigestAuth
import pyotp

totp = pyotp.TOTP('base32secret3232')

url = 'http://3425325325664364345365'

datas = {
"github_url": "https://gist.github.com/323332/333333",
"contact_email": "354353634643@gmail.com"
}

headers = {
'Accept': '*/*',
'Content-Length': '134',
'Content-Type': 'application/json',
'Host': '45654645654756456457547547',}

AUTH = HTTPDigestAuth('57457457447547@gmail.com4575475745745', 'totp')

r = requests.post(url, json = datas, headers = headers, auth = AUTH)

print (r.status_code)
</code></pre>
<p>This is the error:</p>
<p><a href="https://i.stack.imgur.com/28jej.jpg" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/28jej.jpg"/></a></p>
<p>This is the second error:</p>
<p><a href="https://i.stack.imgur.com/CLL9A.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/CLL9A.png"/></a></p>
</div>
<div class="post-text" itemprop="text">
<p>After I read your question 1 more time I've realized that I missed the last part.</p>
<p>I might be wrong because I've never used this package but you are using python 3.5 but <code>pyotp</code> only supports 2.7 --&gt; <a href="https://pypi.python.org/pypi/pyotp" rel="nofollow">pypi</a></p>
</div>
<div class="post-text" itemprop="text">
<p>using python3.5 have you tried the following library? (<a href="https://docs.python.org/3/library/http.client.html" rel="nofollow">https://docs.python.org/3/library/http.client.html</a>) 
view below an example:</p>
<pre><code>import http.client
from base64 import b64encode

username= username.encode('utf-8')
password=password..encode('utf-8')
separator = (':').encode('utf-8') 

something = b64encode(username+separator+password).decode("ascii")
header = {'Authorization': 'Basic %s' % something}

connect = http.client.HTTPSConnection("url") 
response = connect.getresponse() 
print(response.status) #to validate the response code

connect.request('PUT', 'target_REST', headers=headers)
</code></pre>
<p>you can also add the body i just chose to omit it - HTTPConnection.request(method, url, body=None, headers={})</p>
<p>I hope this porivdes usefull</p>
</div>
<span class="comment-copy">Maybe you have a file called <code>pyotp.py</code> in your project directory which shadows the library? It's often the cause for the <i>module ... has no attribute ...</i> error.</span>
<span class="comment-copy">What you mean "shadow library"?</span>
<span class="comment-copy">In this context means: hide, override, replace, being found first and imported instead of any other pyotp module. If you <code>print(pyotp)</code> right after importing it you should see where it is imported from.</span>
<span class="comment-copy">Ohhh, how I missed it. I m trying one more time using python 2.7</span>
<span class="comment-copy">I tried and it still doesn`t work. I add the photo of the second mistake to post above.</span>
<span class="comment-copy">it should be post request and I wanna generate four numbers time-based one time password. So, I think it doesn`t fit me.</span>
<span class="comment-copy">you can use POST rather than PUT, this is just for reference purposes. anyways, were you able to find another library, or switched to python versions?</span>
<span class="comment-copy">Yeah, of course it is possible.</span>
