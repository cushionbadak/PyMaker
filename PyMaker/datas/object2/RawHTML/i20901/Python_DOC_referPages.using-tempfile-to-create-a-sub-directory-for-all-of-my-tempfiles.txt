<div class="post-text" itemprop="text">
<p>I've been using <code>tempfile.mkdtemp</code> with a prefix to create my temp files. This results in a lot of different directory in my tmp folder with '<code>tmp/myprefix{uniq-string}/</code>'. </p>
<p>I would like to change this and have a subdirectory so that my the temp folders I create are all under one main directory so that the prefix is actually a subfolder of <code>tmp</code> '<code>tmp/myprefix/{uniq-string}/</code>'. </p>
<p>Also, I don't want to override <code>tempfile</code>'s system for defining a default tmp directory. </p>
<p>I tried playing with the '<code>prefix</code>' and '<code>dir</code>' parameters but with no success.</p>
</div>
<div class="post-text" itemprop="text">
<p>To use the dir argument you have to ensure the dir folder exists.  Something like this should work:</p>
<pre><code>import os
import tempfile

#define the location of 'mytemp' parent folder relative to the system temp
sysTemp = tempfile.gettempdir()
myTemp = os.path.join(sysTemp,'mytemp')

#You must make sure myTemp exists
if not os.path.exists(myTemp):
    os.makedirs(myTemp)

#now make your temporary sub folder
tempdir = tempfile.mkdtemp(suffix='foo',prefix='bar',dir=myTemp)

print tempdir
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Works for me. Did you create the <code>tmp</code> folder beforehand?</p>
<pre><code>&gt;&gt;&gt; import tempfile
&gt;&gt;&gt; tempfile.mkdtemp(dir="footest", prefix="fixpre")
OSError: [Errno 2] No such file or directory: 'footest/fixpregSSaFg'
</code></pre>
<p>Looks like it does try to create a subfolder of <code>footest</code>....</p>
</div>
<span class="comment-copy">I forgot about gettempdir(). Thanks!</span>
<span class="comment-copy">actually, by <code>os.makedirs(myTemp, exist_ok=True)</code>, you can drop the if check by yourself</span>
<span class="comment-copy">The exist_ok parameter was added at <a href="https://docs.python.org/3/library/os.html#os.makedirs" rel="nofollow noreferrer">3.2</a></span>
