<div class="post-text" itemprop="text">
<p>Could you help to check what's going on with subprocess, it performs differently on different machines with same Python version, but one is on Ubuntu docker and one is on Windows.</p>
<h3>Ubuntu docker</h3>
<p>I use subprocess to execute an external Python script with parameter <code>shell=True</code>, actually it opens a new process for me without executing the specified script, so I have to remove the parameter <code>shell=True</code> and then everything works as expected.</p>
<p>You can see from the screenshot below, I need to <code>exit()</code> after executing the first subprocess, and ran the second subprocess without <code>shell=True</code>.</p>
<p><img alt="screenshot in ubuntu" src="https://i.stack.imgur.com/TmClO.png"/></p>
<h3>Windows</h3>
<p>In Windows, <code>shell=True</code> works same as I execute subprocess in Ubuntu without <code>shell=True</code> parameter.</p>
<p><img alt="screenshot in windows" src="https://i.stack.imgur.com/cH3Cq.png"/></p>
</div>
<div class="post-text" itemprop="text">
<p>Quoting <a href="https://docs.python.org/3/library/subprocess.html#popen-constructor" rel="nofollow noreferrer">https://docs.python.org/3/library/subprocess.html#popen-constructor</a>:</p>
<blockquote>
<p>On POSIX with shell=True, the shell defaults to /bin/sh. If args is a
  string, the string specifies the command to execute through the shell.
  This means that the string must be formatted exactly as it would be
  when typed at the shell prompt. This includes, for example, quoting or
  backslash escaping filenames with spaces in them. <strong>If args is a
  sequence, the first item specifies the command string, and any
  additional items will be treated as additional arguments to the shell
  itself.</strong></p>
</blockquote>
<p>(emphasis mine)</p>
<p>That means, in your first example with <code>run(['python', 'script.py'], shell=True)</code> you are actually only starting an interactive Python session and not passing the script to the interpreter.</p>
<p>Further:</p>
<blockquote>
<p>The only time you need to specify shell=True on Windows is when the
  command you wish to execute is built into the shell (e.g. dir or
  copy). You do not need shell=True to run a batch file or console-based
  executable.</p>
</blockquote>
<p>Conclusion: Whenever possible, pass the arguments as a list (as you did), but do not use <code>shell=True</code>.</p>
</div>
<span class="comment-copy">Thanks a lot mkrieger1! Great answer!</span>
