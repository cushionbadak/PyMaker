<div class="post-text" itemprop="text">
<p>I have json file something like this one.</p>
<pre><code>{
    "SomethingA": {
        "SomethingB": {
            "SomethingC": {
                "C-property": "something",
                "C-property2": {}
            }
        }
   }
}
</code></pre>
<p>I want to add some new data top of the the "Something C" as "NEWSomethingC"</p>
<p>so It should be </p>
<pre><code>{
    "SomethingA": {
        "SomethingB": {
            "NEWSomethingC": {
                "NEWC-property": "NEWsomething",
                "NEWC-property2": {}
            },
            "SomethingC": {
                    "C-property": "something",
                    "C-property2": {}
                }
        }
}
}
</code></pre>
<p>Okay, here is the problem. I can't add new value top of the keys. Always, NEWSomethingC is going to appear below the SomethingC.</p>
<p>The code I use for adding...</p>
<pre><code>with open(credantials.init['config'], 'r+') as f:
        data = json.load(f)


        try:
            old_data = data['SomethingA'][SomethingB]
            append_data = data['SomethingA'][SomethingB]

            old_data = {NEWSomethingC :{'C-property':something, 'C-Property2':{}}}  

        except KeyError:
            print ('There is no key you want to search here')



        append_data.update(old_data)
        print(append_data)
        f.seek(0) 
        json.dump(data,f, indent=4)
        f.truncate()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>As already pointed out dictionaries in python are unorderd. Therefore we have to use <a href="https://docs.python.org/3/library/collections.html#collections.OrderedDict" rel="nofollow noreferrer"><code>OrderedDict</code></a>
As explained in this <a href="https://stackoverflow.com/questions/6921699/can-i-get-json-to-load-into-an-ordereddict">answer</a> we can use the <code>object_pairs_hook</code>
argument in <code>json.loads()</code> to load as <code>OrderdDicts</code>. Then we can add a new dictionary to our "OrderdJsonDictionary" and use the <a href="https://docs.python.org/3/library/collections.html#collections.OrderedDict.move_to_end" rel="nofollow noreferrer"><code>move_to_end</code></a> function to move our added dictionary to the begin</p>
<pre><code>with open(credantials.init['config'], 'r+') as f:
    data = json.load(f, object_pairs_hook=OrderedDict)
    new_data = {'newc':{
                    "NEWC-property": "NEWsomething",
                    "NEWC-property2": {}
                    }
                }
    data["SomethingA"]["SomethingB"].update(new_data)
    # last=False moves to the beginning 
    data["SomethingA"]["SomethingB"].move_to_end(list(new_data.keys())[0], last=False)  
    f.seek(0) 
    json.dump(data,f, indent=4)
    f.truncate()
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>So what you would want to do is read the data, search for the data to the point where you wish to make an insertion. 
1. Write that data to a new file
2. add your new insertion to the new file
3. add the rest of the file contents to the new file
4. delete the old file</p>
<p>So in order to write to file you would want to insert the following into your code.</p>
<pre><code>outfile = open('file.json')
json.dump(data, outfile)
outfile.close()
</code></pre>
</div>
<span class="comment-copy">It's a dict. It doesn't have an order. Top or bottom doesn't matter. If the order is important, use a list - or don't use json.</span>
<span class="comment-copy">I know... I have searched a lot. However, This is for changing another program's config file. It is using json so I have to use json. The new data must be the top of the other keys because other program is reading it from top to bottom. Any other solution ?</span>
<span class="comment-copy">I imagine you'll need a custom json encoder, then.</span>
<span class="comment-copy">What if we thought it as normal text ? Can we do something about it then ? I know its not pythonic way but makaroni code is also okay for me.</span>
<span class="comment-copy">Hello,   I didn't know about OrderedDicts thank you it was really helpful. However, the code you wrote did not actually worked.  I have large json file with many nested keys. It writes what I want but the bottom of the file after the original file  Like this: <a href="https://paste.ee/p/irzAy" rel="nofollow noreferrer">paste.ee/p/irzAy</a></span>
<span class="comment-copy">Sorry, I'm don't quite understand what you mean.</span>
<span class="comment-copy">Alright edited my answer</span>
<span class="comment-copy">Yeah, seek(0) is important detail... I think it worked ! Thanks a lot.</span>
