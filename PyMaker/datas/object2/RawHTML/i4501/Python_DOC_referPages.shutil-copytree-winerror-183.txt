<div class="post-text" itemprop="text">
<p>I am trying to copy an entire directory to a newly created directory. When running this, it does everything correctly and to what I can see actually does copy everything from the source folder. However, it will still return [WinError 183] - Cannot create a file that already exists despite the fact that the file does not exist. Not sure what I'm doing wrong.</p>
<p>EDIT: After checking it <em>is</em> copying everything over before the error hits -- every file, every folder, so not sure what is going wrong</p>
<pre><code>import os
import shutil

#Directory Definitions
root_dir = "C:\\Users\\Gabe Weiner\\Desktop\\GMImport" #os.getcwd()
source_dir = root_dir + "\source"
target_dir = root_dir + "\\target"

#Target Duplicate
for root, dirs, files in os.walk(str(target_dir)):
   shutil.copytree(root, root_dir + "\\Backup")
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Use this, shutil not work.</p>
<pre><code>import os
from distutils.dir_util import copy_tree    &lt;&lt;&lt;-----

def CopyFolder( in_fold, out_fold):
    copy_tree(in_fold, out_fold)     &lt;&lt;&lt;&lt;&lt;&lt;--------

#Directory Definitions
root_dir = r"C:\00_JOB\1_SVN\TullONE\4-Post_Production\t" #os.getcwd()
target_dir = root_dir + "\\target"

#Target Duplicate
for root, dirs, files in os.walk(target_dir):
    CopyFolder(root, root_dir + "\\Backup")      &lt;&lt;&lt;&lt;&lt;&lt;-----.
</code></pre>
</div>
<span class="comment-copy">Try a <code>os.path.exists</code> on the backup directory before copying to see if it exists or not</span>
<span class="comment-copy">Doesn't change anything, when <code>shutil.copytree()</code> starts the directory doesn't exist, but at some point during its run (seemingly at the end?) it hits that error</span>
<span class="comment-copy">You're always copying your current dir <code>root</code> to the same directory <code>root_dir</code>, thus after the first execution of the loop, you're going to end up with that precise error, the documentation is clear on this: <a href="https://docs.python.org/3/library/shutil.html#shutil.copytree" rel="nofollow noreferrer">docs.python.org/3/library/shutil.html#shutil.copytree</a></span>
<span class="comment-copy">Forgive me if I'm misunderstanding (only just started picking up python), but doesn't it appear that the loop is already running more than once, since it seems like it has copied everything? After running this my "Backup" folder has all 13 folders + one file as it should, but the error hits after this. If I am misunderstanding something, what would I have to do to fix this to still duplicate a directory?</span>
