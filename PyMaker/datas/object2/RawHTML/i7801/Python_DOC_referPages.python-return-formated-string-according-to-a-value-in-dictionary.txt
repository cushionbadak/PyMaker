<div class="post-text" itemprop="text">
<p>In Python, I have a script which receives input from external sources with the name of 1 or more variables, it then looks for the current values on a PLC and returns them to the client.</p>
<p>On the script I define all possible variables and the required format and unit to display to client.</p>
<pre><code>given_variable = "temp1"  #Client needs current value of temp1
vars_format = {
    "temp1":["%0.1f","C"],
    "press1":["%0.2f","bar"],
    "temp2":["%d","K"],
    "distance":["%0.3f","km"],
    "switch":["%d",""]
}

# Logic for finding current plc_value of given_variable
# plc_value is a string that looks like a real number
# ("3.14159"), an integer "3" or a string "Running"

return "%s %s" % ( plc_value, vars_format[ given_variable ][1] )
</code></pre>
<p>How to dynamically (according to dictionary) return the plc_value in the required format?
In the example, how to get "23.4 C" instead of "23.39999 C" for "temp1" or "45.21 bar" instead of "42.21248 bar" for "press1"?</p>
</div>
<div class="post-text" itemprop="text">
<p>Well, apply your value to what <code>vars_format</code> returns:</p>
<pre><code>return "%s %s" % (vars_format[given_variable][0] % plc_value, vars_format[given_variable][1])
</code></pre>
<p>But that's ugly as hell. Why don't you just define everything as a nice source string that you can swap based on the <code>given_variable</code>:</p>
<pre><code>vars_format = {
    "temp1": "%0.1f C",
    "press1":"%0.2f bar",
    "temp2": "%d K",
    "distance": "%0.3f km",
    "switch": "%d"
}

return vars_format[given_variable] % plc_value
</code></pre>
<p>Or even better, use <a href="https://docs.python.org/3/library/stdtypes.html#str.format" rel="nofollow noreferrer"><code>str.format()</code></a> for more flexibility and more modern string substitution options.</p>
</div>
<span class="comment-copy">I changed my vars to "nice source string".. Thanks!</span>
