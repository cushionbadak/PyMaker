<div class="post-text" itemprop="text">
<p>I have a text like this</p>
<pre><code>Alabama[STATE]
Auburn (Auburn University)[14]
Florence (University of North Alabama)
Huntsville (University of Alabama, Huntsville)
Jacksonville (Jacksonville State University)[15]
Livingston (University of West Alabama)[15]
Montevallo (University of Montevallo)[15]
Troy (Troy University)[15]
Tuskegee (Tuskegee University)[18]
Alaska[STATE]
Fairbanks (University of Alaska Fairbanks)[15]
Arizona[STATE]
Flagstaff (Northern Arizona University)[19]
Prescott (Embry–Riddle Aeronautical University)
Tempe (Arizona State University)
</code></pre>
<p>I am trying to read the state and university list into two named groups using python regex.
My code is</p>
<pre><code>UNIV_LIST = r"(?P&lt;state&gt;(\w)+)\[.*\n(?P&lt;region&gt;(.*?).*)"
RE_COMMIT = re.compile(UNIV_LIST)
text = open(UFILE).read()
each_group = RE_COMMIT.finditer(text)
for rc in each_group:
    state = rc.groups()[0]
    regions = rc.groups()[1]
    print ('State is %s' %(state))
    print ('regions are %s' %(regions))        
</code></pre>
<p>Expected output is</p>
<pre><code>State is : Alabama
Regions are : Auburn (Auburn University)[14]
Florence (University of North Alabama)
Huntsville (University of Alabama, Huntsville)
Jacksonville (Jacksonville State University)[15]
Troy (Troy University)[15]
Tuskegee (Tuskegee University)[18]
State is : Alaska
Regions are : Fairbanks (University of Alaska Fairbanks)[15]
State is : Arizona
Regions are : Flagstaff (Northern Arizona University)[19]
Prescott (Embry–Riddle Aeronautical University)
Tempe (Arizona State University)
</code></pre>
<p>But the current output is </p>
<pre><code>UNIV_LIST = r"(?P&lt;state&gt;(\w+))\[edit\]\n(?P&lt;region&gt;(.*))\n+")

State is Alabama
regions are Auburn (Auburn University)[1]
State is Alaska
regions are Fairbanks (University of Alaska Fairbanks)[2]
State is Arizona
regions are Flagstaff (Northern Arizona University)[6]
</code></pre>
<p>Any suggestions on how to get the region named group correctly ?</p>
<p>[EDIT]
The actual text is</p>
<pre><code>Alabama[STATE]
Auburn (Auburn University)[14]
Florence (University of North Alabama)
Huntsville (University of Alabama, Huntsville)
Jacksonville (Jacksonville State University)[15]
Livingston (University of West Alabama)[15]
Montevallo (University of Montevallo)[15]
Montgomery (Alabama State University, Huntingdon College, Auburn University at Montgomery, H. Councill Trenholm State Technical College,     Faulkner University)
Troy (Troy University)[15]
Tuscaloosa (University of Alabama, Stillman College, Shelton State)[6][17]
Tuskegee (Tuskegee University)[18]
Alaska[STATE]
Fairbanks (University of Alaska Fairbanks)[15]
Arizona[STATE]
Flagstaff (Northern Arizona University)[19]
Prescott (Embry–Riddle Aeronautical University)
Tempe (Arizona State University)
Tucson (University of Arizona)
Arkansas
Arkadelphia (Henderson State University, Ouachita Baptist University)[15]
Conway (Central Baptist College, Hendrix College, University of Central  Arkansas)[15]
Fayetteville (University of Arkansas)[20]
Jonesboro (Arkansas State University)[21]
Magnolia (Southern Arkansas University)[15]
Monticello (University of Arkansas at Monticello)[15]
Russellville (Arkansas Tech University)[15]
Searcy (Harding University)[18]
California[STATE]
</code></pre>
<p>the below regex:</p>
<pre><code>UNIV_LIST = r"(?P&lt;state&gt;^(\w+\[STATE\]))\r?\n?(?P&lt;region&gt;((^[^[]+)(\[\d+\])?(?!\[STATE\])$\r?\n?)+)"
</code></pre>
<p>Is provided the most of the expected result but is missing some regions</p>
<pre><code>State is : Alabama
Regions are : Auburn (Auburn University)[14]
Florence (University of North Alabama)
Huntsville (University of Alabama, Huntsville)
Jacksonville (Jacksonville State University)[15]
Livingston (University of West Alabama)[15]
Montevallo (University of Montevallo)[15]
Montgomery (Alabama State University, Huntingdon College, Auburn University at Montgomery, H. Councill Trenholm State Technical College,     Faulkner University)
Troy (Troy University)[15]
Tuscaloosa (University of Alabama, Stillman College, Shelton State)[6][17]
Tuskegee (Tuskegee University)[18]
State is : Alaska
Regions are : Fairbanks (University of Alaska Fairbanks)[15]
State is : Arizona
Regions are : Flagstaff (Northern Arizona University)[19]
Prescott (Embry–Riddle Aeronautical University)
Tempe (Arizona State University)
</code></pre>
<p>I get the result but </p>
<pre><code>Montgomery (Alabama State University, Huntingdon College, Auburn University at Montgomery, H. Councill Trenholm State Technical College,     Faulkner University)
Tuscaloosa (University of Alabama, Stillman College, Shelton State)[6][17]
Tuskegee (Tuskegee University)[18]
</code></pre>
<p>are missing.
Any suggestion on what is wrong ?</p>
<p>[EDIT]</p>
<pre><code>UNIV_LIST = r"(?P&lt;state&gt;^(\w+\s*\w*\[edit\]))\r?\n?(?P&lt;region&gt;((^[^[]+)(\[\d+\]){0,}?(?!\[edit\])$\r?\n?)+)"
</code></pre>
<p>This handles states with two words like New Mexico.
But there is one case which still fails</p>
<pre><code>Pomona (Cal Poly Pomona, WesternU)[9][10][11] and formerly Pomona College
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>The following regex work.</p>
<pre><code>UNIV_LIST = r"(?P&lt;state&gt;^(\w+\[STATE\]))\r?\n?(?P&lt;region&gt;((^[^[]+)(\[\d+\]){0,}?(?!\[STATE\])$\r?\n?)+)"
RE_COMMIT = re.compile(UNIV_LIST,re.IGNORECASE | re.MULTILINE)
each_group = RE_COMMIT.finditer(text)
for rc in each_group:
    print('State is : %s' %(rc.group('state')))
    print('Region are : %s' %rc.group('region'))
    print('-'*40)
</code></pre>
<h2>Output</h2>
<pre><code>State is : Alabama[STATE]
Region are : Auburn (Auburn University)[14]
Florence (University of North Alabama)
Huntsville (University of Alabama, Huntsville)
Jacksonville (Jacksonville State University)[15]
Livingston (University of West Alabama)[15]
Montevallo (University of Montevallo)[15]
Troy (Troy University)[15]
Tuskegee (Tuskegee University)[18]

----------------------------------------
State is : Alaska[STATE]
Region are : Fairbanks (University of Alaska Fairbanks)[15]

----------------------------------------
State is : Arizona[STATE]
Region are : Flagstaff (Northern Arizona University)[19]
Prescott (Embry–Riddle Aeronautical University)
Tempe (Arizona State University)
----------------------------------------
</code></pre>
</div>
<span class="comment-copy"><a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer">docs.python.org/3/library/re.html</a></span>
<span class="comment-copy">What is a region?</span>
<span class="comment-copy">Can you give your current output and expected output?</span>
<span class="comment-copy">i have updated with expected result and current result.</span>
<span class="comment-copy">can you please suggest what is missing in the regex - it's missing some string,</span>
<span class="comment-copy">add a <code>{0,}</code> after the capture group of <code>[]</code>. see my updated answer.</span>
<span class="comment-copy">HI Aaron, thanks for the help. It's working now except one case where there are additional word after [\d] in the string. can you please help.</span>
<span class="comment-copy">If there are additional word after <code>[\d]</code>, you can just add <code>\w+</code> to match it.</span>
