<div class="post-text" itemprop="text">
<p>I'm attempting to execute this command within my python script:</p>
<pre><code>avprobeCommand = "avprobe -of json -show_streams {0} | grep '\"duration\"' | sed -n 1p | sed 's/ //g'".format(hiOutput)
output = subprocess.check_output([avprobeCommand])
</code></pre>
<p>and I keep getting:</p>
<pre><code>    Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 552, in __bootstrap_inner
    self.run()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 505, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/Users/jmakaila/Documents/Development/Present/Web/video_dev/present-live-transcoder/Transcoder.py", line 60, in transcode
    output = subprocess.check_output([avprobeCommand])
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 537, in check_output
    process = Popen(stdout=PIPE, *popenargs, **kwargs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 1228, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory
</code></pre>
<p>I've already tried splitting the args up, but I keep getting an error for the -of json -show_streams part, which, for the record, looked like this:</p>
<pre><code>subprocess.check_output(["avprobe", "-of json", "-show_streams", "{0}".format(hiOutput)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Pass the command as string, and pass <code>shell=True</code>:</p>
<pre><code>import pipes
import subprocess

avprobeCommand = """avprobe -of json -show_streams {0} | grep '"duration"' | sed -n 1p | sed 's/ //g'""".format(pipes.quote(hiOutput))
output = subprocess.check_output(avprobeCommand, shell=True)
</code></pre>
<p><strong>UPDATE</strong>: argument should be escaped using <a href="http://docs.python.org/2/library/pipes.html#pipes.quote" rel="nofollow"><code>pipes.quote</code></a>. (Use <a href="http://docs.python.org/3/library/shlex.html#shlex.quote" rel="nofollow"><code>shlex.quote</code></a> if you use Python 3.3+).</p>
</div>
<div class="post-text" itemprop="text">
<p>In your case, you could move the post-processing into Python:</p>
<pre><code>import json
from subprocess import check_output as qx

data = json.loads(qx(["avprobe", "-of", "json", "-show_streams", hiOutput]))
result = data["duration"]         # grep '"duration"'
             .partition("\n")[0]  # sed -n 1p
             .replace(" ", "")    # sed 's/ //g'
</code></pre>
<p>For a more general case, see <a href="https://stackoverflow.com/q/295459/4279">How do I use subprocess.Popen to connect multiple processes by pipes?</a></p>
</div>
<span class="comment-copy">Alternative approaches are listed here: <a href="http://stackoverflow.com/q/295459/1858225">stackoverflow.com/q/295459/1858225</a> I recommend using the <code>pipes</code> module: <a href="https://docs.python.org/2/library/pipes.html" rel="nofollow noreferrer">docs.python.org/2/library/pipes.html</a></span>
<span class="comment-copy">@J.F.Sebastian, Thank you for comment. I updated the answer according to your comment.</span>
