<div class="post-text" itemprop="text">
<p>What is the best way to copy django objects for bulk creating, when multiple fields may vary between instances?</p>
<p>for example i have:</p>
<pre><code>objects_to_create = []
for i in range(5):
    new_obj = obj
    new_obj.pk = None
    new_obj.foo = i
    objects_to_create.append(new_obj)
M.objects.bulk_create(objects_to_create)
</code></pre>
<p>However, for all of these newly created objects, foo will have value 4, because bulk create is saving 5 instances of new_obj as it is at the end of the loop. Is there a way to create copies that can then be modified before saving?
Thanks.</p>
</div>
<div class="post-text" itemprop="text">
<p>Try to use <a href="https://docs.python.org/3/library/copy.html" rel="nofollow noreferrer"><code>deepcopy</code></a> to create object's copy:</p>
<pre><code>import copy
objects_to_create = []
for i in range(5):
   new_obj = copy.deepcopy(obj)
   new_obj.pk = None
   new_obj.foo = i
   objects_to_create.append(new_obj)
M.objects.bulk_create(objects_to_create)
</code></pre>
</div>
<span class="comment-copy">Works well, thanks!</span>
