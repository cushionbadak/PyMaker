<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/4674473/valueerror-setting-an-array-element-with-a-sequence">ValueError: setting an array element with a sequence</a>
<span class="question-originals-answer-count">
                    6 answers
                </span>
</li>
</ul>
</div>
<p>My code is as follows (there's about 100 lines before of setting values for the loop which seem to be working so I've just included necessary values):</p>
<pre><code>fraction=np.array([0.5, 0.3, 0.2])
tauC=np.array([30.,300.,100000.])

dC_memory=np.zeros((1,3))
dC_frac=np.zeros((1,3))    

for j in range(0,ens_num):

    dC_memory=np.zeros((1,3))
    for n in range(0,N-1):


                # C02 Concentration

                for m in range(0,3):

                    dC_frac[m]=fraction[m]*E[j,n+1]-dC_memory[m]/(tauC[m])
                    dC_memory[m]=dC_memory[m]+dC_frac[m]*dt
                    dC[j,n]=dC[j,n]+dC_frac[m]*dt



                C[j,n+1]=C[j,n]+dC[j,n]

                # Temperature

                dT[j,n]=((T2eq*math.log(C[j,n+1]/Cpi)/math.log(2))-T[j,n])*(dt/tauT)
                T[j,n+1]=T[j,n]+dT[j,n]

                # Adaptation

                dTadp[j,n]=(T[j,n]-Tadp[j,n])*dt/tauA
                Tadp[j,n+1]=Tadp[j,n]+dTadp[j,n]
                Tdiff[j,n+1]=0.5*(abs(T[j,n]-Tadp[j,n+1])+T[j,n]-Tadp[j,n+1])



                if yi[j,n+1]+xi0[k]&lt;=mu:


                    count[j]=count[j]+1/N
</code></pre>
<p>When I run this I get the error on the line <code>dC[j,n]=dC[j,n]+dC_frac[m]*dt</code> saying</p>
<blockquote>
<p>ValueError: setting an array element with a sequence.  </p>
</blockquote>
<p>I'm new to python but I know that python indexing starts from 0, but I cant understand why this code stops here.</p>
</div>
<div class="post-text" itemprop="text">
<p>Your example code is not complete. But I think the bug is clear.</p>
<p>By defining</p>
<pre><code> dC_frac=np.zeros((1,3))
</code></pre>
<p>You <code>dC_frac</code> is a <em>multidimensional</em> array of shape <code>(1,  3)</code>. Use <code>dC_frac.shape</code> you will find it's <code>(1, 3)</code>, <em>not</em>, <code>(3,)</code>. </p>
<p>Thus in </p>
<pre><code>for m in range(0,3):
    dC_frac[m]=fraction[m]*E[j,n+1]-dC_memory[m]/(tauC[m])
    ...
</code></pre>
<p>Your <code>dC_frac[m]</code> is an array of 3 elements, <em>not</em> a scalar.</p>
<p>If your <code>dC[j, n]</code> and <code>dt</code> are scalars, </p>
<pre><code>dC[j,n]=dC[j,n]+dC_frac[m]*dt
</code></pre>
<p>This will assign an array of 3 elements to an entry. Thus the error.</p>
<p>To fix, just use</p>
<pre><code>dC_memory=np.zeros(3)
dC_frac=np.zeros(3) 
</code></pre>
</div>
<span class="comment-copy">What exactly is <code>dC</code>?  You never initialize it in the code you posted.  I suspect it's an ordinary Python list (instead of a numpy array), in which case <code>dC[j,n]</code> is not valid  (you'd have to use <code>dC[j][n]</code> for multidimensional indexing).</span>
<span class="comment-copy">Printing data, (conditional) expression results, anything relevant,  is an effective debugging technique.  You can print stuff just before the offending line or <a href="https://docs.python.org/3/tutorial/errors.html#handling-exceptions" rel="nofollow noreferrer">catch the error</a> and print in the except suite. It will give you more clues to what is happening.</span>
