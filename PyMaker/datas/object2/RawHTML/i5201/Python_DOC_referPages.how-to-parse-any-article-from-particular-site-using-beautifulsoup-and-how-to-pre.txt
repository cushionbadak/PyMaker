<div class="post-text" itemprop="text">
<p>I'm trying to parse a news article from a sports website from there html feed, I tried using following code, I am getting 'key error'</p>
<p>code that I tried:</p>
<pre><code>def get_cric_info_articles():

    cricinfo_article_link = "http://www.espncricinfo.com/ci/content/story/news.html"

    r = requests.get(cricinfo_article_link)
    cricinfo_article_html = r.text

    soup = BeautifulSoup(cricinfo_article_html, "html.parser")
    # print(soup.prettify())

    cric_info_items = soup.find_all("h2",
                                      {"class": "story-title"})

    cricinfo_article_dict = {}

    for div in cric_info_items:
      cricinfo_article_dict[div.find('a')['story-title']] = div.find('a')['href']

    return cricinfo_article_dict
</code></pre>
<p>error message:</p>
<blockquote>
<p>KeyError: 'story-title'</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p>The value you looking for is inside <code>a</code> tag</p>
<pre><code>import requests
from bs4 import BeautifulSoup


def get_cric_info_articles():

    cricinfo_article_link = "http://www.espncricinfo.com/ci/content/story/news.html"

    r = requests.get(cricinfo_article_link)
    cricinfo_article_html = r.text

    soup = BeautifulSoup(cricinfo_article_html, "html.parser")
    # print(soup.prettify())

    cric_info_items = soup.find_all("h2",
                                    {"class": "story-title"})
    cricinfo_article_dict = {}

    for div in cric_info_items:
        cricinfo_article_dict[div.find('a').string] = div.find('a')['href']

    return cricinfo_article_dict


print(get_cric_info_articles())
</code></pre>
<p>Output:</p>
<blockquote>
<p>{'Bell-Drummond leads MCC in curtain-raiser': '/ci/content/story/1135157.html', 'Scotland pick Brad Wheal, Chris Sole for World Cup qualifiers': '/scotland/content/story/1135152.html', 'Newlands working to be water independent': '/southafrica/content/story/1135120.html', 'Scorchers bow out after Hurricanes pile up 210': '/australia/content/story/1135117.html', "'Strong evidence' of corruption in Ajman All Stars League - ICC ": '/ci/content/story/1135108.html', 'Du Plessis 120 powers South Africa to 269': '/south-africa-v-india-2018/content/story/1135099.html', "Plan is to expose India's middle, lower order - Harris": '/australia/content/story/1135091.html', 'Top order, King fire Scorchers into WBBL final': '/australia/content/story/1135084.html', 'Technical change brings prolific run for Mominul': '/bangladesh/content/story/1135077.html', 'Dhananjaya, Mendis lead strong Sri Lanka reply': '/bangladesh/content/story/1135075.html'}</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p><code>div.find('a')['story-title']</code> won't give you the story title, since the <code>&lt;a&gt;</code> tag doesn't have that attribute. That's the reason you're getting <code>KeyError</code>.</p>
<p>Use <code>.text</code> for the <code>&lt;a&gt;</code> tag as the title is located here: <code>&lt;a&gt; ... &lt;/a&gt;</code>.</p>
<pre><code>for h2 in cric_info_items:
    cricinfo_article_dict[h2.find('a').text] = h2.find('a')['href']

for item in cricinfo_article_dict.items():
    print(item)
</code></pre>
<p>Output:</p>
<pre><code>('Bell-Drummond leads MCC in curtain-raiser', '/ci/content/story/1135157.html')
('Scotland pick Brad Wheal, Chris Sole for World Cup qualifiers', '/scotland/content/story/1135152.html')
('Newlands working to be water independent', '/southafrica/content/story/1135120.html')
('Scorchers bow out after Hurricanes pile up 210', '/australia/content/story/1135117.html')
("'Strong evidence' of corruption in Ajman All Stars League - ICC ", '/ci/content/story/1135108.html')
('Du Plessis 120 powers South Africa to 269', '/south-africa-v-india-2018/content/story/1135099.html')
("Plan is to expose India's middle, lower order - Harris", '/australia/content/story/1135091.html')
('Top order, King fire Scorchers into WBBL final', '/australia/content/story/1135084.html')
('Technical change brings prolific run for Mominul', '/bangladesh/content/story/1135077.html')
('Dhananjaya, Mendis lead strong Sri Lanka reply', '/bangladesh/content/story/1135075.html')
</code></pre>
<p>Also, calling the same method (here, <code>h2.find('a')</code>) multiple times is not a good idea as it will take more time. In this case, it won't show any difference in run time as the <code>&lt;h2&gt;</code> tag has only one child - <code>&lt;a&gt;</code>. But in other cases where the parent has many children, it is a good idea to save the tag you find in a variable and then use it. Something like this:</p>
<pre><code>a = h2.find('a')
cricinfo_article_dict[a.text] = a['href']
</code></pre>
<hr/>
<p><strong>EDIT:</strong></p>
<p>To get the title, link, and the image link, you can create a list of dictionaries for individual news items with title, link, image as its items.</p>
<p>Try this:</p>
<pre><code>cricinfo_article_list = []

for item in cric_info_items:
    item_dict = {}
    item_title = item.find('h2', {'class': 'story-title'}).find('a')
    item_dict['title'] = item_title.text
    item_dict['link'] = item_title['href']
    item_dict['image'] = item.find('img', {'class': 'img-full'})['src']
    cricinfo_article_list.append(item_dict)

for item in cricinfo_article_list:
    print(item)
</code></pre>
<p>Output: </p>
<pre><code>{'title': 'Bell-Drummond leads MCC in curtain-raiser', 'link': '/ci/content/story/1135157.html', 'image': 'http://p.imgci.com/db/PICTURES/CMS/265700/265759.4.jpg'}
{'title': 'Scotland pick Brad Wheal, Chris Sole for World Cup qualifiers', 'link': '/scotland/content/story/1135152.html', 'image': 'http://p.imgci.com/db/PICTURES/CMS/251500/251571.4.jpg'}
{'title': 'Newlands working to be water independent', 'link': '/southafrica/content/story/1135120.html', 'image': 'http://p.imgci.com/db/PICTURES/CMS/271700/271734.5.jpg'}
{'title': 'Scorchers bow out after Hurricanes pile up 210', 'link': '/australia/content/story/1135117.html', 'image': 'http://p.imgci.com/db/PICTURES/CMS/271700/271769.5.jpg'}
{'title': "'Strong evidence' of corruption in Ajman All Stars League - ICC ", 'link': '/ci/content/story/1135108.html', 'image': 'http://p.imgci.com/db/PICTURES/CMS/263200/263221.4.jpg'}
{'title': 'Du Plessis 120 powers South Africa to 269', 'link': '/south-africa-v-india-2018/content/story/1135099.html', 'image': 'http://p.imgci.com/db/PICTURES/CMS/272700/272763.5.jpg'}
{'title': "Plan is to expose India's middle, lower order - Harris", 'link': '/australia/content/story/1135091.html', 'image': 'http://p.imgci.com/db/PICTURES/CMS/272300/272388.5.jpg'}
{'title': 'Top order, King fire Scorchers into WBBL final', 'link': '/australia/content/story/1135084.html', 'image': 'http://p.imgci.com/db/PICTURES/CMS/272700/272734.5.jpg'}
{'title': 'Technical change brings prolific run for Mominul', 'link': '/bangladesh/content/story/1135077.html', 'image': 'http://p.imgci.com/db/PICTURES/CMS/272700/272718.5.jpg'}
{'title': 'Dhananjaya, Mendis lead strong Sri Lanka reply', 'link': '/bangladesh/content/story/1135075.html', 'image': 'http://p.imgci.com/db/PICTURES/CMS/270600/270602.2.jpg'}
</code></pre>
</div>
<span class="comment-copy">thanks, this is what I was trying to get</span>
<span class="comment-copy">How can I embed image link along with that, so I can show image of that post when I render?</span>
<span class="comment-copy">I wanted those to be callable link, so whenever I press that link it will take to that respective website page,Nylon Calculus: Game Control and a new take on team metrics': '<a href="https://fansided.com/2018/01/30/nylon-calculus-game-control-score/" rel="nofollow noreferrer">fansided.com/2018/01/30/nylon-calculus-game-control-score</a>', like this</span>
<span class="comment-copy">Thank's for correcting my mistake and detail explanation,  I wanted to output in dictionary format, so I'm choosing another answer. I liked your approach.</span>
<span class="comment-copy">Actually, this is a dictionary, I just printed the items individually :) But it's fine that you selected the other answer. Select the answer that solves your question with the most accuracy.</span>
<span class="comment-copy"><code>.items()</code> is a method for a dictionary. Have a look at <a href="https://docs.python.org/3/tutorial/datastructures.html#looping-techniques" rel="nofollow noreferrer">Looping Techniques for dictionaries</a> if you weren't aware of that.</span>
<span class="comment-copy">How can I embed image link along with that article link, so I can show an image of that post when I render on webpage?</span>
<span class="comment-copy">Add that in the question, or create a new question and I'll edit my answer and add that part.</span>
