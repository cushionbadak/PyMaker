<div class="post-text" itemprop="text">
<p>Haven't worked in Python much and I'm obviously not sending the proper signature being asked for. How do I hash it and pass it in properly?</p>
<pre><code>SIGNED endpoints require an additional parameter, signature, to be sent in the query string or request body.
Endpoints use HMAC SHA256 signatures. The HMAC SHA256 signature is a keyed HMAC SHA256 operation. Use your secretKey as the key and totalParams as the value for the HMAC operation.
The signature is not case sensitive.
totalParams is defined as the query string concatenated with the request body.
</code></pre>
<p>Full Documentation:
<a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md" rel="nofollow noreferrer">https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md</a></p>
<pre><code>import requests, json, time, hashlib


apikey = "myactualapikey"
secret = "myrealsecret"
test = requests.get("https://api.binance.com/api/v1/ping")
servertime = requests.get("https://api.binance.com/api/v1/time")

servertimeobject = json.loads(servertime.text)
servertimeint = servertimeobject['serverTime']

hashedsig = hashlib.sha256(secret)

userdata = requests.get("https://api.binance.com/api/v3/account",
    params = {
        "signature" : hashedsig,
        "timestamp" : servertimeint,
    },
    headers = {
        "X-MBX-APIKEY" : apikey,
    }
)
print(userdata)
</code></pre>
<p>I am getting</p>
<pre><code>{"code":-1100,"msg":"Illegal characters found in parameter 'signature'; legal range is '^[A-Fa-f0-9]{64}$'."}
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>This:</p>
<pre><code>hashedsig = hashlib.sha256(secret)
</code></pre>
<p>Gives you a hash object, not a string.  You need to get the string in hex form:</p>
<pre><code>hashedsig = hashlib.sha256(secret).hexdigest()
</code></pre>
<p>You could have figured this out by comparing the documentation you linked (which shows they require hex strings) with your original <code>hashedsig</code> and the functions it provides.</p>
<p>Secondly, as a  commenter pointed out, you need to apply HMAC, not just SHA256:</p>
<pre><code>params = urlencode({
    "signature" : hashedsig,
    "timestamp" : servertimeint,
})
hashedsig = hmac.new(secret.encode('utf-8'), params.encode('utf-8'), hashlib.sha256).hexdigest()
</code></pre>
<p>You can find similar code here: <a href="http://python-binance.readthedocs.io/en/latest/_modules/binance/client.html" rel="nofollow noreferrer">http://python-binance.readthedocs.io/en/latest/_modules/binance/client.html</a></p>
</div>
<span class="comment-copy">You'll have to use <a href="https://docs.python.org/3/library/hmac.html" rel="nofollow noreferrer"><code>hmac</code></a></span>
