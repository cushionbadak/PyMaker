<div class="post-text" itemprop="text">
<p>First time stack overflow-er here. I'm trying to create some new features for this data science project that I'm working on (categorizing bank transaction data). For instance, I have transaction categories like "Auto Payments", "Gas", "Parking", etc. and I want to create a new feature called "Car" where any category with any of those words will be given a value of 1 (and all other categories will be given a 0).</p>
<p>I tried to write a function for "car", but I can't figure out how to create a new feature based on the results of this function. I feel like there must be a simple way to do this, but I'm a bit new at python and having trouble figuring it out!</p>
<p>Here's my function for car:</p>
<pre><code>def car():
    df.category.apply(lambda x: "Auto" in x)
    df.category.apply(lambda x: "Gas" in x)
    df.category.apply(lambda x: "Parking" in x)
    df.category.apply(lambda x: "Service &amp; Parts" in x)
</code></pre>
<p>Here's the code for how I tried to create a new column of "car":</p>
<pre><code>df['car'] = "1" if car==True else "0"
</code></pre>
<p>Here's what the df looks like:</p>
<pre><code>Date  Description   Amount  Category

2017-01-02  Tacos   8.34    Restaurants
2017-01-02  Transfer to Free Checking   800.00  Transfer
2016-12-30  Shell   26.26   Gas &amp; Fuel
2016-12-29  Sunoco  22.59   Gas &amp; Fuel
</code></pre>
<p>Thanks! I appreciate any input that you might have.</p>
</div>
<div class="post-text" itemprop="text">
<p>In Pandas try to use vectorized methods as much as possible... In this case you can use the suite of vectorized string manipulation methods. Here is <a href="https://pandas.pydata.org/pandas-docs/stable/text.html" rel="nofollow noreferrer">a good tutorial on them</a> from the docs.</p>
<p>In particular we can use <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.contains.html" rel="nofollow noreferrer"><code>.str.contains</code></a> which checks to see if a regular expression is inside each element of a Series. <a href="https://docs.python.org/3/howto/regex.html" rel="nofollow noreferrer">Here</a> is the Python tutorial on regular expressions.</p>
<p>Because <code>str.contains</code> return a <code>bool</code> you can use <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.astype.html" rel="nofollow noreferrer"><code>.astype</code></a> to convert it to an <code>int</code> (either 0 or 1).</p>
<pre><code>df['car'] = df['Category'].str.contains('(Auto)|(Gas)|(Parking)|(Service &amp; Parts)').astype(int)
print(df)
</code></pre>
<p>outputs</p>
<pre><code>         Date                Description  Amount     Category  car
0  2017-01-02                      Tacos    8.34  Restaurants    0
1  2017-01-02  Transfer to Free Checking  800.00     Transfer    0
2  2016-12-30                      Shell   26.26   Gas &amp; Fuel    1
3  2016-12-29                     Sunoco   22.59   Gas &amp; Fuel    1
</code></pre>
</div>
<span class="comment-copy">consider tagging this question "pandas"; DataFrames are not part of Python itself.</span>
<span class="comment-copy">This works - thank you so much :-)</span>
