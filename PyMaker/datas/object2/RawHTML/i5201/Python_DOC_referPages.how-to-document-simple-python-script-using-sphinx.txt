<div class="post-text" itemprop="text">
<p>I have gone through numerous Sphinx tutorials, but I still can't figure out how to make Sphinx document a simple Python script like this one:</p>
<pre><code>def addNumbers(a):
    """This function adds one to the given number.

    :param a: The name to use
    :type a: int

    """
    b = a + 1
    print b

addNumbers(5)
</code></pre>
<p>Below are the steps that I make. What am I missing?</p>
<p>Install Sphinx:</p>
<pre><code>pip install sphinx
</code></pre>
<p>Create a documentation directory within my project directory:</p>
<pre><code>mkdir docs
</code></pre>
<p>Run <code>sphinx-quickstart</code> from inside of the new <code>doc</code> directory and hit Enter to answer every question except for these two:</p>
<pre><code>Separate source and build directories (y/n) [n]: y
autodoc: automatically insert docstrings from modules (y/n) [n]: y
</code></pre>
<p>This makes my project directory structure become this:</p>
<pre><code>myproject/ 
|-- docs/
    |-- build/
    |-- source/
    make.bat
    Makefile
|-- mycode/ 
    myscript.py 
</code></pre>
<p>Open <code>conf.py</code>, uncomment the following lines, and add the path of the folder where my code is located:</p>
<pre><code>import os
import sys
sys.path.insert(0, os.path.abspath('C:\myproject\mycode'))
</code></pre>
<p>Run the following command from my <code>docs</code> directory:</p>
<pre><code>make html
</code></pre>
<p>Which gave me the following confirmation with no errors:</p>
<p><a href="https://i.stack.imgur.com/u5euX.jpg" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/u5euX.jpg"/></a></p>
<p>Now when I open C:\myproject\docs\build\html\index.html, all I see is the following and no info from the docstrings that I inserted in my original script. Clicking on Module Index gives a file not found error. Why is that?</p>
<p><a href="https://i.stack.imgur.com/iodHq.jpg" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/iodHq.jpg"/></a></p>
<p><strong>EDIT:</strong>
After doing all the above steps, I added a folder <code>mypackage</code> and copied the file with my code in there making the directory content look like this:</p>
<pre><code>myproject/ 
|-- docs/
    |-- build/
    |-- source/
    make.bat
    Makefile
|-- mycode/ 
    myscript.py 
|-- mypackage/ 
    myscript.py 
</code></pre>
<p>I then ran the following commands from <code>doc</code> directory:</p>
<pre><code>sphinx-apidoc -f -o source/ ../mypackage/
make html
</code></pre>
<p>Now clicking through Module Index gives me the following:</p>
<p><a href="https://i.stack.imgur.com/VTZFq.jpg" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/VTZFq.jpg"/></a></p>
<p>And clicking on <code>myscript</code> gives this:
<a href="https://i.stack.imgur.com/fBesv.jpg" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/fBesv.jpg"/></a></p>
<p>Now the question is why is my main script myscript.py is listed under modules and not listed on the home page of the documentations?</p>
</div>
<div class="post-text" itemprop="text">
<p>An <code>__init__.py</code> file is required to make Python treat the directories as containing packages. See <a href="https://docs.python.org/3/tutorial/modules.html#packages" rel="nofollow noreferrer">Python tutorial documentation of packages</a>.</p>
<p>My guess is that <code>sphinx-apidoc</code> recognizes your script as a script, not a package, because you omitted a <code>__init__.py</code> file.  According to the docs for <a href="http://www.sphinx-doc.org/en/stable/man/sphinx-apidoc.html#description" rel="nofollow noreferrer"><code>sphinx-apidoc</code></a>:</p>
<blockquote>
<p><em>sourcedir</em> must point to a Python package.</p>
</blockquote>
<p>There's also a warning just below that in the docs:</p>
<blockquote>
<p>If you document scripts (as opposed to library modules), make sure their main routine is protected by a <code>if __name__ == '__main__'</code> condition.</p>
</blockquote>
<p>Without seeing your code, I'd start with the <code>__init__.py</code> file and see if that takes care of it.</p>
</div>
<span class="comment-copy">Is there anything in docs/source?</span>
<span class="comment-copy">Yes. Folders  _static and _templates, and files conf.py and index.rst.</span>
<span class="comment-copy">I think its index.rst (which is <code>re-structured text</code>) that provides the index page maybe. Anyway, clicking on Module Index would maybe get you a list including <code>myscript.py</code></span>
<span class="comment-copy">Clicking on the link for Module Index give me an error "Your file was not found".</span>
<span class="comment-copy">I added a folder <code>mypackage</code> under <code>myproject' and run </code>sphinx-apidoc -f -o source/ ../mypackage/` and then <code>make html</code>. Now I see <code>myscript</code> under Module Index under m. Is it how it is supposed to be? I thought <code>myscript</code> was supposed to be a part of the home page of the documentation.</span>
<span class="comment-copy">I added an empty <code>__init__.py</code> to the root of <code>myproject</code>, but now when I run <code>sphinx-apidoc -f -o source/ ../mypackage/</code> and then <code>make html</code>, I get an error <code>No module named mypackage.myscript</code> and <code>No module named mypackage</code>. Also, when checking consistency, it shows an error <code>\myproject\docs\source\modules.rst: WARNING: document isn't included in any toctree</code> and <code>\myproject\docs\source\mypackage.rst: WARNING: document isn't included in any toctree</code> Why is it?</span>
<span class="comment-copy"><code>myproject</code> is not a Python package (it's just a directory), so remove <code>__init__.py</code> from there, and put one each in <code>mycode</code> and <code>mypackage</code>.</span>
<span class="comment-copy">I removed <code>__init__.py</code> from <code>myproject</code>, and added it to <code>mycode</code> and <code>mypackage</code>. Still, when I run <code>make html</code>, I get the same errors that I described above.</span>
<span class="comment-copy">At this point, I would suggest you create a public repo of the project, share it, and document the steps to install the project and reproduce the issue.</span>
