<div class="post-text" itemprop="text">
<p>Some background</p>
<p>I am working on a small program for a friend's business. In his business he manually goes through a website that has a list of company websites he works with. The list has hundreds of companies. All he does is get the contact info and puts it into an excel.</p>
<p>again, he does this manually... He said he will spend hours doing this.</p>
<p>I want to try to automate this with Python. I am self taught with about a month of experience.</p>
<p>Right now I have a program that successfully scrapes a website for just the text. However, it puts the text into a list of unicode strings, but for some reason wont convert the list to utf-8 so i can work with it.</p>
<pre><code>import re
import urllib
from bs4 import BeautifulSoup

#url = raw_input("Please enter a url: ")

html = urllib.urlopen("http://www.cerecor.com/contact")
soup = BeautifulSoup(html, "lxml")
data = soup.findAll(text=True)

def visible(element):
    if element.parent.name in ['style', 'script', '[document]', 'head', 'title']:
        return False
    elif re.match('&lt;!--.*--&gt;', str(element.encode('utf-8'))):
        return False
    return True

result = filter(visible, data)

[x.encode('UTF8') for x in result]
#result = ','.join(result)
number = u"(\+?1?.?\d{3}[-\.\s]??\d{3}[-\.\s]??\d{4}|\(\d{3}\)\s*\d{3}[-
\.\s]??\d{4}|\d{3}[-\.\s]??\d{4})"

print result

#numbers = [re.findall(number, x) for x in result]
</code></pre>
<p>and the output
[u' ',s u'\n', u' ', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n'
\n', u'Home', u'\n', u'\n', u'About', u'\n', u'\n', u'Overview', u'\n', u'Management Team', u'\n', u'Board of Directors', u'\n', u
 u'Pipeline', u'\n', u'\n', u'Overview', u'\n', u'CERC-301', u'\n', u'CERC-611', u'\n', u'CERC-406', u'\n', u'Related Publications
' ', u'\n', u'Patient Resources', u'\n', u' ', u'\n', u'Investors', u'\n', u'\n', u'Overview', u'\n', u'News / Events', u'\n', u'C
', u'\n', u'Analyst Coverage', u'\n', u'Stock Data', u'\n', u'SEC Filings', u'\n', u'Corporate Governance', u'\n', u'\n', u' ', u'
s', u'\n', u' ', u'\n', u'Careers', u'\n', u' ', u'\n', u'Contact', u'\n', u' ', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n',
s', u'\n', u"We'd love to hear from you", u'\n', u'\n', u'\n', u'\n', u'\n', u'Contact', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n',
n', u'Name', u'\n', u'\n', u'\n', u'\n', u'Email', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'Company', u'\n', u'\n', u'\n', u'\n
', u'\n', u'\n', u'Select Option', u'\n', u'General Inqueries', u'\n', u'Partnerships', u'\n', u'Licensing', u'\n', u'Public Relat
vestor Relations', u'\n', u'\n', u'\n', u'\n', u'\n', u'Message', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u
, u'\n', u'\n', u'\n', u'Cerecor, Inc.', u'\n', u'\r\n                        400 East Pratt Street', u'                        Su
          \t\tBaltimore, MD                        21202                                    \t\t', u'\n', u'\r\n                \t
    Tel: 410-522-8707    \r\n                \t                \t', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n',
n', u'\n', u'\n', u'\n', u'\n', u'\n', u'About us', u'\n', u'\n', u'\n', u'\n', u'\n', u'Pipeline', u'\n', u'\n', u'\n', u'\n', u'
 u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\r\n\t\t\t\xa9 2017 ', u'Cerecor, Inc.', u' ', u'\n', u'\n', u'Privacy
Disclaimer', u'\n', u'Sitemap', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u'\n', u' ', u' //general-wrapper', u'\n', u'\n']</p>
<p>any and all advice would be helpful. i just want to get it down to either a string with all of that text or a list so i can search it with regex.</p>
</div>
<div class="post-text" itemprop="text">
<p>Since string types are immutable in python, <code>x.encode()</code> does not modify the unicode strings in-place, but rather returns the encoded version.</p>
<p>You can try:</p>
<pre><code>result = [x.encode('UTF8') for x in result]
</code></pre>
</div>
<span class="comment-copy">The default encoding is UTF-8 already... see: <a href="https://docs.python.org/3/howto/unicode.html" rel="nofollow noreferrer">docs.python.org/3/howto/unicode.html</a></span>
<span class="comment-copy">You should make sure the type of regex pattern is same as the type of string. In your case, number is unicode but x is str(bytes).</span>
<span class="comment-copy">yeah you're right, i put it in unicode just to dick around with it because i couldn't figure out why they weren't converting to a string</span>
<span class="comment-copy">you are a life saver. it's always the simplest things that block you from developing, thanks again!</span>
