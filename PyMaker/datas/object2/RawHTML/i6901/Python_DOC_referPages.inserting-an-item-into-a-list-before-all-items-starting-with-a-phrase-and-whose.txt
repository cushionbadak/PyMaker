<div class="post-text" itemprop="text">
<p>Suppose I have something like the list:</p>
<pre><code>["Monkey: 1", "Banana Cake: First Time", "Random Line: {Stuff}", "Monkey: 2", "Orange Juice", "Monkey: 3", "Banana Cake: Again"]
</code></pre>
<p>I'd like to know how to insert a list element, say <code>"Good Monkey"</code>, after all elements starting with <code>"Monkey"</code> such that the next item in the list starts with <code>"Banana"</code>, in a way that generalizes to huge lists.</p>
<p>In other words, if I have a list, I want to be able to insert an item after every item beginning with a certain phrase whose proceeding item begins with another given phrase.</p>
<p>A sample output would be: </p>
<p>["Monkey: 1", "Good Monkey", "Banana Cake: First Time", "Random Line: {Stuff}", "Monkey: 2", "Orange Juice", "Monkey: 3", "Good Monkey", "Banana Cake: Again"]</p>
</div>
<div class="post-text" itemprop="text">
<p>Here's a solution using the <a href="https://docs.python.org/3/library/itertools.html#itertools-recipes" rel="nofollow noreferrer"><code>pairwise</code> itertools recipe</a></p>
<pre><code>from itertools import tee    

def pairwise(iterable):
    "s -&gt; (s0,s1), (s1,s2), (s2, s3), ..."
    a, b = tee(iterable)
    next(b, None)
    return zip(a, b)

l = ["Monkey: 1", "Banana Cake: First Time", "Random Line: {Stuff}", "Monkey: 2", "Orange Juice", "Monkey: 3", "Banana Cake: Again"]

l = [x for a, b in pairwise(l) for x in ((a, 'Good Monkey') if a.startswith('Monkey') and b.startswith('Banana') else (a,))] + [l[-1]]
</code></pre>
<p>This works, and is O(n), but I'm not thrilled with the kludgy <code>+ [l[-1]]</code> at the end of the last line </p>
</div>
<div class="post-text" itemprop="text">
<p>Here's one possible solution:</p>
<pre><code>def insert_between(lst, preceding_prefix, following_prefix, item):
    i = 0
    while i &lt; len(lst) - 1:
        if lst[i].startswith(preceding_prefix) and lst[i+1].startswith(following_prefix):
            lst.insert(i+1, item)
            i += 2  # Advance twice to skip over the item we just inserted
        else:
            i += 1

lst = ["Monkey: 1", "Banana Cake: First Time", "Random Line: {Stuff}", "Monkey: 2", "Orange Juice", "Monkey: 3", "Banana Cake: Again"]
insert_between(lst, "Monkey", "Banana", "Good Monkey")
print(lst)

# Output;
# ['Monkey: 1', 'Good Monkey', 'Banana Cake: First Time', 'Random Line: {Stuff}', 'Monkey: 2', 'Orange Juice', 'Monkey: 3', 'Good Monkey', 'Banana Cake: Again']
</code></pre>
</div>
<span class="comment-copy">Could you provide some sample output to demonstrate what you mean?  The way I read this is as placing the new item between all <code>Monkey...</code> and <code>Banana...</code> elements</span>
<span class="comment-copy">I edited the post to include one example too add the phrase "Good Monkey" after all items starting with "Monkey" whose proceeding items start with "Banana."</span>
<span class="comment-copy">Why did this get a down vote?</span>
