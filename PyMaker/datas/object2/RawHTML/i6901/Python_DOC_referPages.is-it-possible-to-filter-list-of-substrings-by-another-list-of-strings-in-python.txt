<div class="post-text" itemprop="text">
<p>To filter list of strings by another list of strings in Python we can use the following code:</p>
<pre><code>result = [x for x in strings1 if x in strings2]
</code></pre>
<p>But how can we filter list of substrings by another list of strings? For example:</p>
<pre><code>substrings = ['a', 'b', 'c']
strings = ['_b_', '_c_', '_d_']
</code></pre>
<p>Result should be:</p>
<pre><code>result = ['b', 'c']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can use something like that:</p>
<pre><code>[x for x in substrings if [y for y in strings if x in y]]
</code></pre>
<p><br/></p>
<pre><code>In [1]: substrings = ['a', 'b', 'c']

In [2]: strings = ['_b_', '_c_', '_d_']

In [3]: [x for x in substrings if [y for y in strings if x in y]]
Out[3]: ['b', 'c']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Elegant way to achieve this is via using <a href="https://docs.python.org/3/library/functions.html#any" rel="nofollow noreferrer"><strong><code>any</code></strong></a> with a <em>list comprehension</em> as:</p>
<pre><code>&gt;&gt;&gt; substrings = ['a', 'b', 'c']
&gt;&gt;&gt; my_strings = ['_b_', '_c_', '_d_']

&gt;&gt;&gt; [s for s in substrings if any(s in i for i in my_strings)]
['b', 'c']
</code></pre>
<p>Here <code>any</code> will return <code>True</code> if any of string in <code>substrings</code> is present as substring in <code>my_strings</code>. As soon as it finds the match, it will short-circuit the iteration (without checking for other matches) and will return the result as <code>True</code>. Due to the short-circuiting property of <code>any</code>, it won't make the unnecessary iteration across the entire list, resulting in better performance.</p>
</div>
<span class="comment-copy">with a simple list comprehension: <code>[i for i in substrings for j in strings if i in j]</code></span>
