<div class="post-text" itemprop="text">
<p>I have a file with following format:</p>
<pre><code>device={
   id=1
   tag=10
   name=device1
}
device={
   id=2
   tag=20
   name=device2
}
device={
   id=3
   tag=30
   name=device3
}
</code></pre>
<p>So let's say I am only interested in device with <code>id=2</code> and I want to extract its tag number(this is configurable and will be changed from some other code). So I need to extract tag number of the device id 2. How can I do this in python. I have done following:</p>
<pre><code>ID='id=2'

with open("file.txt") as file:
          for line in file:
              if line.strip() ==  ID:
                  #Here I do not know what to write 
                  # to extract 20
</code></pre>
<p>Thanks</p>
</div>
<div class="post-text" itemprop="text">
<p>You can read the next line using <code>line.readline()</code> try to use this code:</p>
<pre><code>ID='id=2'

with open("file.txt") as file:
    while True:
        line = file.readline()
        if line.strip() == ID:
            nextline = file.readline()
            result = nextline.strip().split('=')[1]
       if line == '':
            break
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>With <a href="https://docs.python.org/3/library/re.html#re.search" rel="nofollow noreferrer"><strong><em>re.search</em></strong></a> function:</p>
<pre><code>import re

with open('file.txt', 'r') as f:
    id_num = 'id=2'
    tag_num = re.search(r'' + id_num + '\s+tag=([0-9]+)', f.read())
    print(tag_num.group(1))
</code></pre>
<p>The output:</p>
<pre><code>20
</code></pre>
<hr/>
<ul>
<li><p><code>f.read()</code> - reads the file contents (as text)</p></li>
<li><p><code>r'' + id_num + '\s+tag=([0-9]+)'</code> - constructing regex pattern, so it would become <code>id=2\s+tag=([0-9]+)</code> where <code>\s</code> is one or many whitespace characters(including newlines) and <code>([0-9]+)</code> is the 1st captured group containing <strong><em>tag</em></strong> number</p></li>
<li><p><code>tag_num.group(1)</code> - extracting the value of the 1st captured/parenthesized group <code>1</code> from the <a href="https://docs.python.org/3/library/re.html#match-objects" rel="nofollow noreferrer"><em>match</em></a> object <code>tag_num</code></p></li>
</ul>
</div>
<div class="post-text" itemprop="text">
<pre><code>with open("") as file:
    #print file.read()

    for line in file:
        #print line.split()
        if line.strip()==ID:
          d=file.next()              #reads next line
          print d.split('=')[1]
          break
</code></pre>
</div>
<span class="comment-copy">Parse the whole file into a dict of dicts, with the ids as top-level keys.</span>
<span class="comment-copy">Why you are using <code>file.readline()</code> and what does this line means <code>result = nextline.strip().split('=')[1]</code> What exactly <code>[1]</code> do in this.? Also when you are doing <code>if line.strip() == '':</code> Dont you think it will break early because it may find blank space</span>
<span class="comment-copy"><code>nextline.strip().split('=')[1]</code> this is mean that we split our string by '=' and this is return list, so we get second item of this list. About end of file i edit my code, becouse strip is not needed. If we get the end of file '' is returned, but if we get blank line '\n' is returned</span>
<span class="comment-copy">Thanks. But when I tried it, it says <code>TypeError: descriptor 'readline' of 'file' object needs an argument</code></span>
<span class="comment-copy">Look at your code, maybe you do some mistake when copy, because this code works fine when i run it</span>
<span class="comment-copy">Yes it was because of my mistake.</span>
<span class="comment-copy">Thankyou. Its a bit high level for me. It would be great if you add comment, specially on 5th line. Thanks</span>
<span class="comment-copy">@SAndrew, welcome, see my details</span>
