<div class="post-text" itemprop="text">
<p>I have a <code>s="gh3wef2geh4ht"</code>. How can I receive <code>s="gh333wef22geh4444ht"</code> by using sub. I have tried this <strong>regexp</strong>. what I am doing wrong?</p>
<pre><code>s=re.sub(r"(\d)",r"\1{\1}",s)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You cannot use a regular expression pattern in the replacement pattern. The <code>{...}</code> does not copy the text captured in Group 1 <em>n</em> times. You need to use a lambda expression or a callback method in the <a href="https://docs.python.org/3/library/re.html#re.sub" rel="nofollow noreferrer"><code>re.sub</code></a> to achieve what you want:</p>
<pre><code>import re
s = 'gh3wef2geh4ht'
s=re.sub(r"\d", lambda m: m.group() * int(m.group()), s)
print(s)
</code></pre>
<p>See the <a href="https://ideone.com/bNa1L4" rel="nofollow noreferrer">Python demo</a></p>
<p>Note you do not need any capturing groups here, as the whole match is already available in Group 0.</p>
<p>Here, <code>m</code> is assigned with the curren match object, <code>m.group()</code> is the text value of the match and <code>int(m.group())</code> is the digit cast to an <code>int</code>. Thus, when <code>3</code> is matched, the lambda expression does just <code>"3" * 3</code> and returns as the replacement.</p>
</div>
<div class="post-text" itemprop="text">
<p>You can use a <code>lambda</code> function to capture the matched digits and repeat it:</p>
<pre><code>s="gh3wef2geh4ht"
â€‹
re.sub(r'(\d)', lambda m: m.group(1) * int(m.group(1)), s)
# 'gh333wef22geh4444ht'
</code></pre>
</div>
