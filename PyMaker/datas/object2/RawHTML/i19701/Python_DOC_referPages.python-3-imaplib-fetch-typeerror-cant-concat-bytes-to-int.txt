<div class="post-text" itemprop="text">
<p>I have some code which fetches IMAP emails and works completely well in Python 2. In Python3  I get the following error:</p>
<blockquote>
<p>Traceback (most recent call last):<br/>
        File "./mail.py", line 295, in <br/>
          item=return_message(x)<br/>
        File "./mail.py", line 122, in return_message<br/>
          result, data = mail.fetch(message_id, "(RFC822)")<br/>
        File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/imaplib.py", line 460, in fetch<br/>
          typ, dat = self._simple_command(name, message_set, message_parts)<br/>
        File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/imaplib.py", line 1113, in _simple_command<br/>
          return self._command_complete(name, self._command(name, *args))<br/>
        File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/imaplib.py", line 883, in _command<br/>
          data = data + b' ' + arg<br/>
      TypeError: can't concat bytes to int<br/></p>
</blockquote>
<p>The code from the return_message function:</p>
<pre><code>result, data = mail.fetch(message_id, "(RFC822)")
raw_email = data[0][1]
email_message = email.message_from_string(raw_email)
</code></pre>
<p>Runtime Information:</p>
<blockquote>
<p>3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 01:25:11) <br/>
      [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]</p>
</blockquote>
</div>
<div class="post-text" itemprop="text">
<p><code>message_set</code> is a string, not an int. From the <a href="http://docs.python.org/3/library/imaplib.html" rel="noreferrer">documentation</a>:</p>
<blockquote>
<p>The <code>message_set</code> options to commands below is a string specifying one or more messages to be acted upon. It may be a simple message number (<code>'1'</code>), a range of message numbers (<code>'2:4'</code>), or a group of non-contiguous ranges separated by commas (<code>'1:3,6:9'</code>). A range can contain an asterisk to indicate an infinite upper bound (<code>'3:*'</code>).</p>
</blockquote>
<p>Converting it to string directly should be enough:</p>
<pre><code>result, data = mail.fetch(str(message_id), "(RFC822)")
</code></pre>
</div>
<span class="comment-copy">Is <code>message_id</code> an int?</span>
<span class="comment-copy">Yes. message id comes via x = (int(len(id_list)) - int(indexCounter))</span>
<span class="comment-copy">This did it. I however now get another error, should I post that there or create a new question?</span>
<span class="comment-copy">Let's make that a new post, it's a new problem after all.</span>
