<div class="post-text" itemprop="text">
<p>So I want to remove all user mentions and urls in a tweet/string.</p>
<p>For example, if I have a tweet like this:</p>
<pre><code>@username1: some tweet here, http://www.url.com, aaaaa @username2
</code></pre>
<p>I want to get something like this:</p>
<pre><code>some tweet here, aaaaa
</code></pre>
<p>I want to user regular expression but I'm really new to python and don't know how to do it.</p>
<p>Also, tweets are stored in a JSON file (a list of dictionaries), and each tweet (a dictionary) has a key called "entities" which stores information about "user_mentions", "urls", and "hashtags" in a format like the following:</p>
<pre><code>{u'user_mentions': [{u'indices': [3, 18],
                     u'screen_name': u'username1',
                     u'id': 1234567,
                     u'name': u'user name 1',
                     u'id_str': u'1234567'},

                    {u'indices': [108, 116],
                     u'screen_name': u'username2',
                     u'id': 112233,
                     u'name': u'user name 2',
                     u'id_str': u'112233'}],

 u'hashtags': [],
 u'urls': [{u'url': u'http://www.url.com',
            u'indices': [83, 103],
            u'expanded_url': u'http://www.url.com',
            u'display_url': u'http://www.url.com'}]
}
</code></pre>
<p>Does anyone know how to remove user mentions and urls?
Thanks so much!</p>
</div>
<div class="post-text" itemprop="text">
<pre><code>from itertools import chain

result = []
for text, entries in ((t["text"], t["entries"]) for t in tweets):
    urls = (e["url"] for e in entries["urls"])
    users = ("@"+e["screen_name"] for e in entries["user_mentions"])
    text = reduce(lambda t,s: t.replace(s, ""), chain(urls, users), text)
    result.append(text)
</code></pre>
<p>Or using a regex (it also removes trailing non-whitespace characters):</p>
<pre><code>text = re.sub(r"(?:\@|https?\://)\S+", "", text)
</code></pre>
<p>Or a combination of the two methods:</p>
<pre><code>text = re.sub(r"(?:%s)\S*" % "|".join(map(re.escape, chain(urls, users))), "", text)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>I think for the first answer it should read "entities" not "entries". Also, don't forget urls within media if you are trying to exclude that as well.</p>
<p><a href="https://dev.twitter.com/overview/api/entities-in-twitter-objects" rel="nofollow">https://dev.twitter.com/overview/api/entities-in-twitter-objects</a></p>
<p>For Python 3, stripping out media urls as well:</p>
<pre><code>    from itertools import chain
    from functools import reduce

    result = []
    for text, entities in ((t["text"], t["entities"]) for t in user_timeline):
        urls = (e["url"] for e in entities["urls"])
        users = ("@" + e["screen_name"] for e in entities["user_mentions"])
        media_urls = ()
        if 'media' in entities:
            media_urls = (e["url"] for e in entities["media"])
        text = reduce(lambda t, s: t.replace(s, ""), chain(urls, media_urls, users), text)
        result.append(text)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>First off I hope you are able to access the tweets &gt;&gt;&gt;</p>
<pre><code>import json
import glob
for filename in glob.glob('*.json'):
with open("plain text - preprocess.txt",'a') as outfile ,open(filename, 'r') as f:
    for line in f:
        if line=='\n':
            pass
        else:
            tweet = json.loads(line) 
            ###NOW DO SOMETHING WITH tweet['text']
</code></pre>
<p>Use Regex to remove unwanted # or http links within the tweet. Here's how I did it &gt;&gt;&gt;</p>
<pre><code>import re
stringwithouthash = re.sub(r'#\w+ ?', '', tweet['text'])
stringwithoutlink = re.sub(r'http\S+', '', tweet['text'])
</code></pre>
<p>\S takes in all characters except whitespace.</p>
<p>\w takes in A-Z,a-z,0-9</p>
<p>Refer to <a href="https://docs.python.org/3/library/re.html" rel="nofollow">this link</a> for more on regex.</p>
</div>
<span class="comment-copy">"I want to user regular expression but I'm really new to python and don't know how to do it." What have you tried so far? You know what tool to use--regexes--so what are you stuck on?</span>
<span class="comment-copy">Why not use the supplied indices to remove the username and url?</span>
<span class="comment-copy">Thank you very much!!</span>
