<div class="post-text" itemprop="text">
<p>I have a [program:x] running and it prints / sys.stdout.writes a lot of things. None of which comes up in either in the AUTO childlogdir of [supervisord] or in stdout_logfile of [program:x] 
Am I missing something?</p>
<p>How do I capture all that is printed or stdout-ed from [program:x] ?</p>
<p>In my program I am explicitly doing both,</p>
<pre><code>print "something"
sys.stdout.write("something") 
</code></pre>
<p>Relevant supervisord.conf file</p>
<pre><code>[supervisord]
childlogdir = %(here)s/../logs/supervisord/
logfile = %(here)s/../logs/supervisord/supervisord.log
logfile_maxbytes = 100MB
logfile_backups = 10
loglevel = info
pidfile = %(here)s/../logs/supervisord/supervisord.pid
umask = 022
nodaemon = false
nocleanup = false

[program:x]
directory = %(here)s/../
command = python file.py
autostart=true
autorestart=true
redirect_stderr=true  
stdout_logfile = /appropriate-path/to/access.log
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>Python output is buffered. Setting the <a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONUNBUFFERED" rel="nofollow noreferrer">environment variable <code>PYTHONUNBUFFERED=1</code></a> in you <code>supervisord.conf</code> will disable buffering and show log messages sooner:</p>
<pre><code>[program:x]
environment = PYTHONUNBUFFERED=1
</code></pre>
<p>or add the <a href="https://docs.python.org/3/using/cmdline.html#cmdoption-u" rel="nofollow noreferrer"><code>-u</code> command-line switch</a> to <code>python</code> command:</p>
<pre><code>[program:x]
command = python -u file.py
</code></pre>
<p>Alternatively you can flush the <code>sys.stdout</code> handler explicitly:</p>
<pre><code>sys.stdout.flush()
</code></pre>
<p>On python 3.3 and up, you can add the <code>flush=True</code> parameter to have the function do this for you:</p>
<pre><code>print(something, flush=True)
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can run your program like this:</p>
<pre><code>python -u file.py
</code></pre>
<p>this will produce unbuffered output</p>
</div>
<div class="post-text" itemprop="text">
<p>If you have python based script that you can't or don't want to change to flush output on a regular base then you can use <a href="https://linux.die.net/man/1/unbuffer" rel="nofollow noreferrer">unbuffer</a> from the Expect package.</p>
<p>For a Django application in a docker container I've lately used it like that (from a shell script run from supervisord):</p>
<pre><code>unbuffer python -u manage.py runserver 0.0.0.0:11000 2&gt;&amp;1 &gt;&gt; /var/log/django.log
</code></pre>
</div>
<span class="comment-copy">Are you certain the program prints to <code>stdout</code> and not <code>stderr</code>?</span>
<span class="comment-copy">edited the question with more info. When I do a sys.stdout.write, it should be printing to stdout</span>
<span class="comment-copy">And what is your supervisord config for that <code>[program:..]</code>? Oh, and try a <code>sys.stdout.flush()</code> as well to make sure it's not the buffer.</span>
<span class="comment-copy">I put in the entire conf file. Also, I tried putting a <code>sys.stdout.flush()</code> at the end of my file.py but no luck.</span>
<span class="comment-copy">If you check your supervisord log file, do you actually see that your process was started? If the program never ran, it cannot output anything.</span>
<span class="comment-copy">Proper (15char)</span>
