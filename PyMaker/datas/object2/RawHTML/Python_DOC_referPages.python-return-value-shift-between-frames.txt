<div class="post-text" itemprop="text">
<p>In the following code, I have some difficulties in understanding how the return value is shifted between the scopes of the functions. </p>
<pre><code>def x(y):
    def y(z):
        x = lambda x: x**2
        y = lambda x: x+2
        def z(x):
            return x(5)
        return z(y)
    return y(x)
print(x(lambda x: x+1))
</code></pre>
<p>I understand that the return value is evaluated to be 7 since <code>y = lambda x: x+2</code> is passed into <code>z(x)</code> where 5+2 = 7. I ran my code through Visualize Python to understand how it works and I do not understand the last three steps.</p>
<p>Step 16 of 18:
<a href="https://i.stack.imgur.com/R9oQJ.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/R9oQJ.png"/></a></p>
<p>Step 17 of 18:
<a href="https://i.stack.imgur.com/BixJn.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/BixJn.png"/></a></p>
<p>Step 18 of 18:
<a href="https://i.stack.imgur.com/QTV8G.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/QTV8G.png"/></a></p>
<p>Would really appreciate it if someone could enlighten me on what is going on here. Thank you.</p>
</div>
<div class="post-text" itemprop="text">
<ol start="16">
<li><p><code>z</code> returns <code>7</code> because in the scope of <code>f2</code>(or in the <code>def y(z):</code> zone), <code>y</code> points to
<code>lambda x: x+2</code>, and <code>z</code> returns <code>y(5)</code>. <code>y</code> was assigned in line 4. (This is represented by the blue arrow in the first image)</p></li>
<li><p><code>y</code> (or <code>f2</code>) simply returns what the function <code>z</code> (belonging to the frame of <code>y</code>/<code>f2</code>) returns. Don't be tricked by the notation <code>z(y)</code>. Because the <code>y</code> in the parenthesis is <code>lambda x: x+2</code>, as <code>y</code> has been reassigned to that value. So <code>y</code> returns also <code>7</code>.</p></li>
<li><p><code>x</code> (or <code>f1</code>) returns what the <code>y</code> belonging to the scope of <code>x</code> (or <code>f1</code>) returns. <code>y</code> in the scope of <code>x</code> (or <code>f1</code>) happens to be <code>f2</code> and it returns <code>7</code>.
So <code>x</code> or <code>f1</code>, will return <code>7</code>.</p></li>
</ol>
<p>If something is still unclear, let me know what part.</p>
</div>
<span class="comment-copy">Okay, this made it a lot clearer for me to understand. Thank you for your explanation :)</span>
