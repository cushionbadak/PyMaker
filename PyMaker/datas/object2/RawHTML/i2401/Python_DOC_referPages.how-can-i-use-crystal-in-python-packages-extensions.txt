<div class="post-text" itemprop="text">
<p>Is it possible to use <a href="https://crystal-lang.org/" rel="nofollow noreferrer">Crystal</a> in Python3 packages/extensions?</p>
</div>
<div class="post-text" itemprop="text">
<p><code>dl</code> has been deprecated in python3, look at <code>ctypes</code>.</p>
<p>It might be possible as highlighted here: <a href="https://github.com/hyronx/crystal-shared-lib" rel="nofollow noreferrer">https://github.com/hyronx/crystal-shared-lib</a></p>
<p>What this might look like in <code>python3</code>:</p>
<pre><code>from ctypes import *

cdll.LoadLibrary("libcrystal-shared-lib.so")

crystal = CDLL("libcrystal-shared-lib.so") 

crystal.test(None) 
</code></pre>
<p><strong>note</strong></p>
<p>I am not sure at the moment how the primitives convert from Python's <code>None</code> to C's None to Crystal's <code>Nil</code>, but nil returns a <code>0_u64</code>, so it's a hint, of some sort.</p>
<ul>
<li><a href="https://docs.python.org/3/library/ctypes.html#fundamental-data-types" rel="nofollow noreferrer">https://docs.python.org/3/library/ctypes.html#fundamental-data-types</a></li>
<li><a href="https://github.com/crystal-lang/crystal/blob/391785249f66aaf5929b787b29810aeb4af0e1e8/src/nil.cr#L42" rel="nofollow noreferrer">https://github.com/crystal-lang/crystal/blob/391785249f66aaf5929b787b29810aeb4af0e1e8/src/nil.cr#L42</a></li>
</ul>
<p>related posts:</p>
<ul>
<li><a href="https://github.com/crystal-lang/crystal/issues/921" rel="nofollow noreferrer">https://github.com/crystal-lang/crystal/issues/921</a></li>
<li><a href="https://github.com/hyronx/crystal-shared-lib" rel="nofollow noreferrer">https://github.com/hyronx/crystal-shared-lib</a></li>
<li><a href="https://docs.python.org/3.7/library/ctypes.html#module-ctypes" rel="nofollow noreferrer">https://docs.python.org/3.7/library/ctypes.html#module-ctypes</a></li>
</ul>
</div>
<span class="comment-copy">I don't know if there are specific crystal bindings for Python. You <i>can</i> make <a href="https://stackoverflow.com/questions/89228/calling-an-external-command-in-python">arbitrary system calls</a> that could run Crystal programs.  A more important question may be: What specific task are you trying to accomplish?</span>
<span class="comment-copy">I want to use bindings to another faster system programming language. System calls are no option for me. Crystal, Rust and D are possible candidates.</span>
<span class="comment-copy">I don't think crystal is "plumbed" to created shared libraries yet, maybe ask on the google group...</span>
