<div class="post-text" itemprop="text">
<p>I would like to write a number of Python Arrays into a txt file, with one array per line. After which I would like to read the Arrays line by line. </p>
<p>My work in progress code below. The problem I am working on involves about 100,000 arrays (length of L)</p>
<pre><code>from __future__ import division
from array import array

M = array('I',[1,2,3])
N = array('I',[10,20,30])

L = [M,N]

with open('manyArrays.txt','w') as file:
    for a in L:
        sA = a.tostring()
        file.write(sA + '\n')

with open('manyArrays.txt','r') as file:
    for line in file:   
        lineRead = array('I', [])
        lineRead.fromstring(line)
        print MRead
</code></pre>
<p>The error message I get is </p>
<pre><code>lineRead.fromstring(line)
ValueError: string length not a multiple of item size
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>You can either use numpy function for this, or code lines yourself:</p>
<p>You could concatenate your arrays in one 2D array and save it directly with np.savetxt, load it with np.genfromtext : </p>
<pre><code>M = np.array([1,2,3],dtype='I')
N = np.array([10,20,30],dtype='I')
data= np.array([M,N])

file='test.txt'
np.savetxt(file,data)
M2,N2 = np.genfromtxt(file)
</code></pre>
<p>Or do :</p>
<pre><code>file2='test2.txt'
form="%i %i %i \n"
with open(file2,'w') as f:
    for i in range(len(data)):
        f.write(form % (data[i,0],data[i,1],data[i,2]))
</code></pre>
</div>
<span class="comment-copy"><code>array.array</code> has a method called literally <a href="https://docs.python.org/3/library/array.html" rel="nofollow noreferrer"><code>array.tostring</code></a>.</span>
<span class="comment-copy"><code>array.array</code> that OP use is <i>not</i> <code>numpy.array</code>.</span>
