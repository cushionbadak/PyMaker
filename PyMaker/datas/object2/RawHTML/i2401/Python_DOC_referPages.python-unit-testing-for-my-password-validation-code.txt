<div class="post-text" itemprop="text">
<p>I have this functional code:</p>
<pre><code>class PasswordChecker(object):

 passwords = ["aD23"]

 def check(self, passwords):
     if not passwords:
         raise NameError('You have not entered any password')
     else:
         pass
</code></pre>
<p>And this test code:</p>
<pre><code>import unittest

from app.passwordchecker import PasswordChecker

class TestPasswordChecker(unittest.TestCase):
  def setUp(self):
    self.pswd = PasswordChecker()

  def test_password_checker_raises_nameerror_for_noargs(self):
    self.assertRaises(NameError, self.pswd.check, [])
</code></pre>
<p>I expect that when the test is made to fail by replacing <code>[]</code> with <code>[items]</code> in <code>self.assertRaises()</code>, it should throw a <code>NameError - You have not entered any password</code>. However, it throws a different error meaning my code has a problem. Please help</p>
</div>
<div class="post-text" itemprop="text">
<p>The behavior you are seeing seems correct:</p>
<pre><code>self.assertRaises(NameError, self.pswd.check, [])
</code></pre>
<p>You call <code>check</code> with empty list <code>not passwords</code> is <code>True</code> and <code>NameError</code> is raised. That is expected behavior as far as the test is concerned and all is well.</p>
<p>Now if you've changed the line to for instance:</p>
<pre><code>self.assertRaises(NameError, self.pswd.check, ['123'])
</code></pre>
<p>You would see:</p>
<pre><code>======================================================================
FAIL: test_password_checker_raises_nameerror_for_noargs (test_check.TestPasswordChecker)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/tmp/so/test_check.py", line 10, in test_password_checker_raises_nameerror_for_noargs
    self.assertRaises(NameError, self.pswd.check, ['123'])
AssertionError: NameError not raised
</code></pre>
<hr/>
<p>Because the method ran, and returned <code>None</code>, but the test states it expected <code>NameError</code> exception to be raised.</p>
<p>As is, your test could look like this:</p>
<pre><code>...
def test_password_checker_raises_nameerror_for_noargs(self):
    self.assertRaises(NameError, self.pswd.check, [])

def test_password_checker_returns_none_with_args(self):
    self.assertIsNone(self.pswd.check(['123']))
...
</code></pre>
<p>For no args, we expect <code>NameError</code> to be raised. With passed argument, we expect <code>None</code> to be returned.</p>
<hr/>
<p>Side note: <a href="https://docs.python.org/3/library/exceptions.html#NameError" rel="nofollow noreferrer"><code>NameError</code></a> has a usual meanings of trying to use unknown variable. Perhaps <code>ValueError</code> would be more appropriate. Or you may want to define your own exception.</p>
</div>
<span class="comment-copy">Isn't that the expected result?  <code>check</code> doesn't do anything <code>if passwords</code>, and raises a <code>NameError</code> <code>if not passwords</code>.  If the list in your assert has values, then <code>passwords</code> will be truthy, and thus not raise an error.</span>
<span class="comment-copy">Have you tried manipulating the test code so that it produces an NameError with the argument i have given it i.e 'You have not....? You'll see my issue.</span>
<span class="comment-copy">When I ran this test, it passed.</span>
<span class="comment-copy">Yeah it passes, but now make it fail according to how it has been defined to fail</span>
<span class="comment-copy">When I pass <code>['a']</code> instead of <code>[]</code>, the test fails.  Could you be more clear about what you expect to happen?</span>
<span class="comment-copy">I just noted I was failing the test in the wrong way and that's why I got mixed up. I was supposed to change the exception to any other built-in exception( eg TypeError) for NameError to be raised. Anyway thank you.</span>
