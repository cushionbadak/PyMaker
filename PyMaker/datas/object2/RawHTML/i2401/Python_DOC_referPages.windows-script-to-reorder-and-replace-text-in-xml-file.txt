<div class="post-text" itemprop="text">
<p>i have found several similar questions but none quite reach my goal, im tying to edit multiple lines in an xml file. My knowledge of scripts is at best very basic so please include some details my basic brain will understand</p>
<p>im trying to convert this</p>
<pre><code>    &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;channels&gt;
    &lt;channel update="i" site="openwebif" site_id="1:0:1:D32E:836:2:11A0000:0:0:0:" xmltv_id="&amp;amp;TV"&gt;&amp;amp;TV&lt;/channel&gt;
    &lt;channel update="i" site="openwebif" site_id="1:0:1:2F17:7EF:2:11A0000:0:0:0:" xmltv_id="4Music"&gt;4Music&lt;/channel&gt;
    &lt;channel update="i" site="openwebif" site_id="1:0:1:5302:814:2:11A0000:0:0:0:" xmltv_id="4seven"&gt;4seven&lt;/channel&gt;
</code></pre>
<p>into this</p>
<pre><code>    &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;channels&gt;
&lt;!-- vermin --&gt;&lt;channel id="&amp;amp;TV"&gt;1:0:1:D32E:836:2:11A0000:0:0:0:&lt;/channel&gt;&lt;!-- VM --&gt;
&lt;!-- vermin --&gt;&lt;channel id="4Music"&gt;1:0:1:2F17:7EF:2:11A0000:0:0:0:&lt;/channel&gt;&lt;!-- VM --&gt;
&lt;!-- vermin --&gt;&lt;channel id="4seven"&gt;1:0:1:5302:814:2:11A0000:0:0:0:&lt;/channel&gt;&lt;!-- VM --&gt;
</code></pre>
<p>im not even sure what would work best? Can this be done with python ? batch?</p>
<p>TIA</p>
</div>
<div class="post-text" itemprop="text">
<pre class="lang-none prettyprint-override"><code>import re

# Open the xml file.
with open('test1.xml', encoding='utf-8') as r:

    # Read the file contents whole.
    content = r.read()

    # Do replacements using regex.
    content = re.sub(r'^\s*(&lt;channel)\s+.*?\s+site_id="(.*?)"\s+xmltv_id="(.*?)"&gt;.*?(&lt;/channel&gt;)',
                     r'&lt;!-- vermin --&gt;\1 id="\3"&gt;\2\4&lt;!-- VM --&gt;', content, 0, re.I + re.M)

    # Open and write the changed xml file.
    with open('test2.xml', 'w', encoding='utf-8') as w:
        w.write(content)
</code></pre>
<p>Python 3 is used since you mentioned Python in the summary of your question.</p>
<p>This is using Regular Expressions to modify the XML.
If the XML has a reasonable constant structure as with the example posted,
then this may meet your goal.</p>
<p><code>test1.xml</code> is read and the modifications are done using
a Regular Expression pattern with <code>re.sub()</code>.</p>
<p><code>test2.xml</code> is the XML file with the changes applied.</p>
<p>Both files are treated as <code>utf-8</code>.</p>
<p>Read the Python help file about the <a href="https://docs.python.org/3/library/re.html" rel="nofollow noreferrer"><code>re</code></a> module.</p>
<p>Brief overview of Regular Expressions used.</p>
<ul>
<li><code>^</code> match start of line.</li>
<li><code>\s</code> match whitespace characters.</li>
<li><code>*</code> match 0 or more of previous pattern|character.</li>
<li><code>+</code> match 1 or more of previous pattern|character.</li>
<li><code>(.*?)</code> capture any character as a group being not greedy.</li>
<li><code>\1</code> is 1st group as replacement. <code>\2</code> is 2nd group...</li>
<li><code>re.I</code> is insensitive flag.</li>
<li><code>re.M</code> is multiline flag so line anchors <code>^</code> and <code>$</code> can be used.</li>
</ul>
<p>Suggest you read the Python help file as it is more
comprehensive for learning.</p>
</div>
<span class="comment-copy">I am surprised that none of those similar questions didn't lead you to using a different scripting language like Powershell, Vbscript, or Jscript which all have native methods to read and write XML files. If you do it in a batch file it is like brute Force.</span>
<span class="comment-copy">Thank you very much for your detailed answer i will try this when home tonight</span>
