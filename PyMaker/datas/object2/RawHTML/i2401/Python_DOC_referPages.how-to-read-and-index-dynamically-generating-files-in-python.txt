<div class="post-text" itemprop="text">
<p>How can we read and index dynamically generating files, from a source folder, in python and append index with the newly added or unread files, in the folder, upon code refresh?</p>
<p>An automation tool is continuously putting files (say xlsx) to the source folder, a python program will then read and plot a graph from all the files present in the folder, to optimize the performance of the code, we are planning to not to read all the files once the code/ application is refreshed but to only append the index with the unread files.</p>
<p>An index could be a local variable/ table, which contains information about the input files, say which all files are already loaded/ read so that the system knows which one to read now and which all are already read. The idea is to read a file only once, not all the files after every refresh.</p>
</div>
<div class="post-text" itemprop="text">
<p>Following code will help you to give the list of new file names with their index.</p>
<p>These variables are used:</p>
<ul>
<li>bag_of_file : Content list of file names which already proceed</li>
<li>curr_files : Contents list of file names which are in source folder</li>
<li>new_files : Contents list of file names which you are interested in.</li>
</ul>
<p>Run this code for first time when you have bag_of_file is empty.</p>
<pre><code>import os
curr_dir = "D:/2018/Address Matching/Data/Statewise Output/"
bag_of_files = [] #Comment out this line after using 1st time
curr_files = os.listdir(curr_dir)
new_files = []
for file in curr_files:
    if file not in bag_of_files:
        new_files.append(file)
        bag_of_files.append(file)

new_files
</code></pre>
<p>Output:</p>
<pre><code>['AP Output.csv',
'Delhi Output.csv',
'Gujrat Output.csv',
'Haryana Output.csv',
'Jharkhand Output V1.csv',
'Jharkhand Output V1.xlsx',
'Jharkhand Output.csv',
'Karnataka Output.csv']
</code></pre>
<p>Next time always run following code. Difference is only in line no. 3 where we used previous version of bag_of_files. Every time I added some new files in same folder.</p>
<pre><code>curr_dir = "D:/2018/Address Matching/Data/Statewise Output/"
#bag_of_files = [] #Comment out this line after using 1st time
curr_files = os.listdir(curr_dir)
new_files = []
for file in curr_files:
    if file not in bag_of_files:
        new_files.append(file)
        bag_of_files.append(file)
new_files
</code></pre>
<p>Output:</p>
<pre><code>['Maharashtra Output.csv',
 'MP Output.csv',
 'Punjab Output.csv',
 'Rajsthan Output.csv']
</code></pre>
<p>Run it again :)</p>
<p>Output:</p>
<pre><code>['Bihar Output.csv',
 'Tamilnadu Output.csv',
 'Telangana Output.csv',
 'WB Output.csv']
</code></pre>
</div>
<div class="post-text" itemprop="text">
<p>To keep the answer simple, you could use <a href="https://docs.python.org/3/library/os.html" rel="nofollow noreferrer">os.listdir()</a> to monitor the directory content.  The to watch for modified files that the program has already indexed, check the modified time on these with <a href="https://docs.python.org/3/library/os.html" rel="nofollow noreferrer">os.stat()</a>.</p>
</div>
<span class="comment-copy">What do you mean by "index"?</span>
<span class="comment-copy">an index could be a local variable/ table, which contains information about the input files, say which all files are already loaded/ read so that the system knows which one to read now which all are already read. The idea is to read a file only once, not all the files after every refresh.</span>
<span class="comment-copy">You can maintain a log file containing the file names of the file which are already processed and read this log file before processing a file to check , whether it has been already processed or not</span>
