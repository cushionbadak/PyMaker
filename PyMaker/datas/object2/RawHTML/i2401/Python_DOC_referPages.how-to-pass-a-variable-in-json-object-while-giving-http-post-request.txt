<div class="post-text" itemprop="text">
<p>I am trying to pass the json object to one of my URLs which accepts the JSON data. </p>
<p>The below works:</p>
<pre><code>payload='{"message": "hello"}'
headers = {'content-type': 'application/json', 'Accept-Charset': 'UTF-8'}
r = requests.post(url, data=payload, headers=headers)
</code></pre>
<p>r.text is giving me "hello"</p>
<p>But when I tried to pass the variable</p>
<pre><code>s="hello"
payload='{"message":' +str(s)+ '}'
headers = {'content-type': 'application/json', 'Accept-Charset': 'UTF-8'}
r = requests.post(url, data=payload, headers=headers)
</code></pre>
<p>The above didnt work. When I tried to load as a JSON, it is throwing me error as well</p>
<pre><code>payload=json.loads(payload)
JSONDecodeError: Expecting value: line 1 column 12 (char 11)
</code></pre>
<p>Also I wanted to pass b'blahblah' as a JSON message. Since passing a string didnt work for me, I didnt attempt to pass bytes format.</p>
<p>Please advice</p>
</div>
<div class="post-text" itemprop="text">
<p>You should include double quotes around the string in your JSON object:</p>
<pre><code>payload='{"message":"' +str(s)+ '"}'
</code></pre>
<p>so that <code>payload</code> would become <code>'{"message": "hello"}'</code>.</p>
<p>Otherwise <code>payload</code> would become <code>'{"message": hello}'</code> with your current code.</p>
</div>
<div class="post-text" itemprop="text">
<p>Use <code>json.dumps</code>:</p>
<pre><code>payloads = {"message": s}

r = requests.post(url, data=json.dumps(payloads), headers=headers)
</code></pre>
</div>
<span class="comment-copy">I dont know why this was down voted. This worked for me :) . Is it possible to send the bytes in JSON object ? For me the image is going to be my JSON. Is there any way to send bytes to JSON?</span>
<span class="comment-copy">JSON is meant for texts. You can encode images into texts with <a href="https://docs.python.org/3/library/base64.html" rel="nofollow noreferrer"><code>base64</code></a> if you insist though.</span>
