<div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/34835951/what-does-list-comprehension-mean-how-does-it-work-and-how-can-i-use-it">What does “list comprehension” mean? How does it work and how can I use it?</a>
<span class="question-originals-answer-count">
                    4 answers
                </span>
</li>
</ul>
</div>
<p>I'm a python newbie. I come from a C/C++ background and it's really difficult for me to get my head around some of python's concepts. I have stumbled upon this block of code which just plain confuses me:</p>
<pre><code>file_names = [os.path.join(label_directory, f)
                   for f in os.listdir(label_directory) 
                   if f.endswith(".ppm")]
</code></pre>
<p>So, it's an array that joins <code>label_directory</code> with a variable <code>f</code> (both strings), which is initially uninitialized. The for loop then populates the variable <code>f</code> if the condition <code>f.endswith(".ppm")</code> is true.</p>
<p>Now, from my C/C++ perspective I see this:</p>
<p>A for loop that has an if statement that returns <code>True</code> or <code>False</code>. Where is the logic that excludes all the files that don't end with <code>".ppm"</code> extension?</p>
</div>
<div class="post-text" itemprop="text">
<p>This syntax is called list comprehension. It constructs a list by evaluating expression after the opening square bracket for each element of the embedded <code>for</code> loop that meets criteria of the <code>if</code>.</p>
</div>
<div class="post-text" itemprop="text">
<p>This is called a list comprehension. Python defines list comprehensions as</p>
<blockquote>
<p>A list comprehension consists of brackets containing an expression followed by a for clause, then zero or more for or if clauses. The result will be a new list resulting from evaluating the expression in the context of the for and if clauses which follow it.</p>
</blockquote>
<p>Syntactically, the code you gave is the same as </p>
<pre><code>file_names = []
for f in os.listdir(label_directory):
    if f.endswith(".ppm"):
        file_names.append(os.path.join(label_directory, f))
</code></pre>
<p>If you want to learn more about list comprehensions, you can find out more here: <a href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions" rel="nofollow noreferrer">https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions</a></p>
</div>
<span class="comment-copy">In Python what you are seeing is called a "list comprehension". That is a broad subject, so I recommend doing an internet search for "Python list comprehension" and you will find numerous explanations.</span>
<span class="comment-copy">The <code>join</code> is only executed for the items that pass the condition. In <code>c</code> terms, think about the <code>join</code> as if it was placed at the end of the statement instead of the start.</span>
<span class="comment-copy">@mrunion Thank you guys, doing research as of now!</span>
<span class="comment-copy">This is a list comprehension. The first set of code on the right hand side is the code you put inside the if statement that you want to execute if the condition is True. The next set of code is the for loop over all the directories and then you check using if statement for your condition. Please note that if you would have had both if and else in this code, then the if and else will be placed before the for loop. If you expand the code above in different lines, you would first write for loop, then the if statement and then the <code>os.path.join(label_directory, f)</code></span>
<span class="comment-copy">For starters: <a href="http://treyhunner.com/2015/12/python-list-comprehensions-now-in-color/" rel="nofollow noreferrer">treyhunner.com/2015/12/python-list-comprehensions-now-in-color</a>  .</span>
<span class="comment-copy">you meant "Semantically", not "Syntactically".</span>
