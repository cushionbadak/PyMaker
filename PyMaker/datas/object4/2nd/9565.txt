link:
library/code.html#code.compile_command

docs:


(source, filename="<input>", symbol="single")¶
This function is useful for programs that want to emulate Python’s interpreter
main loop (a.k.a. the read-eval-print loop).  The tricky part is to determine
when the user has entered an incomplete command that can be completed by
entering more text (as opposed to a complete command or a syntax error).  This
function almost always makes the same decision as the real interpreter main
loop.
source is the source string; filename is the optional filename from which
source was read, defaulting to ; and symbol is the optional
grammar start symbol, which should be either  (the default) or
.
Returns a code object (the same as ) if the
command is complete and valid;  if the command is incomplete; raises
 if the command is complete and contains a syntax error, or
raises  or  if the command contains an
invalid literal.
