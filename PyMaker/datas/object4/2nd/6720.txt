link:
library/urllib.request.html#examples

docs:

Examples¶
In addition to the examples below, more examples are given in
HOWTO Fetch Internet Resources Using The urllib Package.
This example gets the python.org main page and displays the first 300 bytes of
it.


Note that urlopen returns a bytes object.  This is because there is no way
for urlopen to automatically determine the encoding of the byte stream
it receives from the HTTP server. In general, a program will decode
the returned bytes object to string once it determines or guesses
the appropriate encoding.
The following W3C document, https://www.w3.org/International/O-charset, lists
the various ways in which an (X)HTML or an XML document could have specified its
encoding information.
As the python.org website uses utf-8 encoding as specified in its meta tag, we
will use the same for decoding the bytes object.


It is also possible to achieve the same result without using the
context manager approach.


In the following example, we are sending a data-stream to the stdin of a CGI
and reading the data it returns to us. Note that this example will only work
when the Python installation supports SSL.


The code for the sample CGI used in the above example is:


Here is an example of doing a  request using :


Use of Basic HTTP Authentication:


 provides many handlers by default, including a
.  By default,  uses the environment
variables named , where  is the URL scheme
involved.  For example, the  environment variable is read to
obtain the HTTP proxy’s URL.
This example replaces the default  with one that uses
programmatically-supplied proxy URLs, and adds proxy authorization support with
.


Adding HTTP headers:
Use the headers argument to the  constructor, or:


 automatically adds a User-Agent header to
every .  To change this:


Also, remember that a few standard headers (Content-Length,
Content-Type and Host)
are added when the  is passed to  (or
).
Here is an example session that uses the  method to retrieve a URL
containing parameters:


The following example uses the  method instead. Note that params output
from urlencode is encoded to bytes before it is sent to urlopen as data:


The following example uses an explicitly specified HTTP proxy, overriding
environment settings:


The following example uses no proxies at all, overriding environment settings:


