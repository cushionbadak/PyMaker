link:
library/unittest.mock-examples.html#mocking-a-generator-method

docs:

Mocking a Generator Method¶
A Python generator is a function or method that uses the  statement
to return a series of values when iterated over [1].
A generator method / function is called to return the generator object. It is
the generator object that is then iterated over. The protocol method for
iteration is , so we can
mock this using a .
Here’s an example class with an “iter” method implemented as a generator:


How would we mock this class, and in particular its “iter” method?
To configure the values returned from the iteration (implicit in the call to
), we need to configure the object returned by the call to .





[1]There are also generator expressions and more advanced uses of generators, but we aren’t
concerned about them here. A very good introduction to generators and how
powerful they are is: Generator Tricks for Systems Programmers.


