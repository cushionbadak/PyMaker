link:
library/test.html#module-test.support.script_helper

docs:

 — Utilities for the Python execution tests¶
The  module provides support for Python’s
script execution tests.


()¶
Return  if  requires environment
variables in order to be able to run at all.
This is designed to be used with  to annotate tests
that need to use an  function to launch an isolated
mode () or no environment mode () sub-interpreter process.
A normal build & test does not run into this situation but it can happen
when trying to run the standard library test suite from an interpreter that
doesn’t have an obvious home with Python’s current home finding logic.
Setting  is one way to get most of the testsuite to run
in that situation.   or  are
other common environment variables that might impact whether or not the
interpreter can start.



(*args, **env_vars)¶
Set up the environment based on env_vars for running the interpreter
in a subprocess.  The values can include , ,
, and .



(*args, **env_vars)¶
Assert that running the interpreter with args and optional environment
variables env_vars succeeds () and return a  tuple.
If the  keyword is set, env_vars is used as a fresh
environment.
Python is started in isolated mode (command line option ),
except if the  keyword is set to .



(*args, **env_vars)¶
Assert that running the interpreter with args and optional environment
variables env_vars fails () and return a  tuple.
See  for more options.



(*args, stdout=subprocess.PIPE, stderr=subprocess.STDOUT, **kw)¶
Run a Python subprocess with the given arguments.
kw is extra keyword args to pass to . Returns a
 object.



(p)¶
Run the given  process until completion and return
stdout.



(script_dir, script_basename, source, omit_suffix=False)¶
Create script containing source in path script_dir and script_basename.
If omit_suffix is , append  to the name.  Return the full
script path.



(zip_dir, zip_basename, script_name, name_in_zip=None)¶
Create zip file at zip_dir and zip_basename with extension  which
contains the files in script_name. name_in_zip is the archive name.
Return a tuple containing .



(pkg_dir, init_source='')¶
Create a directory named pkg_dir containing an  file with
init_source as its contents.



(zip_dir, zip_basename, pkg_name, script_basename, source, depth=1, compiled=False)¶
Create a zip package directory with a path of zip_dir and zip_basename
containing an empty  file and a file script_basename
containing the source.  If compiled is , both source files will
be compiled and added to the zip package.  Return a tuple of the full zip
path and the archive name for the zip file.

