link:
library/contextlib.html#contextlib.ContextDecorator

docs:


class Â¶
A base class that enables a context manager to also be used as a decorator.
Context managers inheriting from  have to implement
 and  as normal.  retains its optional
exception handling even when used as a decorator.
 is used by , so you get this
functionality automatically.
Example of :


This change is just syntactic sugar for any construct of the following form:


 lets you instead write:


It makes it clear that the  applies to the whole function, rather than
just a piece of it (and saving an indentation level is nice, too).
Existing context managers that already have a base class can be extended by
using  as a mixin class:



Note
As the decorated function must be able to be called multiple times, the
underlying context manager must support use in multiple 
statements. If this is not the case, then the original construct with the
explicit  statement inside the function should be used.


New in version 3.2.

