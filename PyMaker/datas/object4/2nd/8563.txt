link:
library/unittest.mock.html#unittest.mock.Mock

docs:


class (spec=None, side_effect=None, return_value=DEFAULT, wraps=None, name=None, spec_set=None, unsafe=False, **kwargs)¶
Create a new  object.  takes several optional arguments
that specify the behaviour of the Mock object:

spec: This can be either a list of strings or an existing object (a
class or instance) that acts as the specification for the mock object. If
you pass in an object then a list of strings is formed by calling dir on
the object (excluding unsupported magic attributes and methods).
Accessing any attribute not in this list will raise an .
If spec is an object (rather than a list of strings) then
 returns the class of the spec object. This
allows mocks to pass  tests.

spec_set: A stricter variant of spec. If used, attempting to set
or get an attribute on the mock that isn’t on the object passed as
spec_set will raise an .

side_effect: A function to be called whenever the Mock is called. See
the  attribute. Useful for raising exceptions or
dynamically changing return values. The function is called with the same
arguments as the mock, and unless it returns , the return
value of this function is used as the return value.
Alternatively side_effect can be an exception class or instance. In
this case the exception will be raised when the mock is called.
If side_effect is an iterable then each call to the mock will return
the next value from the iterable.
A side_effect can be cleared by setting it to .

return_value: The value returned when the mock is called. By default
this is a new Mock (created on first access). See the
 attribute.

unsafe: By default if any attribute starts with assert or
assret will raise an . Passing 
will allow access to these attributes.

New in version 3.5.


wraps: Item for the mock object to wrap. If wraps is not  then
calling the Mock will pass the call through to the wrapped object
(returning the real result). Attribute access on the mock will return a
Mock object that wraps the corresponding attribute of the wrapped
object (so attempting to access an attribute that doesn’t exist will
raise an ).
If the mock has an explicit return_value set then calls are not passed
to the wrapped object and the return_value is returned instead.

name: If the mock has a name then it will be used in the repr of the
mock. This can be useful for debugging. The name is propagated to child
mocks.


Mocks can also be called with arbitrary keyword arguments. These will be
used to set attributes on the mock after it is created. See the
 method for details.


(*args, **kwargs)¶
Assert that the mock was called at least once.



New in version 3.6.




(*args, **kwargs)¶
Assert that the mock was called exactly once.



New in version 3.6.




(*args, **kwargs)¶
This method is a convenient way of asserting that calls are made in a
particular way:





(*args, **kwargs)¶
Assert that the mock was called exactly once and that that call was
with the specified arguments.





(*args, **kwargs)¶
assert the mock has been called with the specified arguments.
The assert passes if the mock has ever been called, unlike
 and  that
only pass if the call is the most recent one, and in the case of
 it must also be the only call.





(calls, any_order=False)¶
assert the mock has been called with the specified calls.
The  list is checked for the calls.
If any_order is false (the default) then the calls must be
sequential. There can be extra calls before or after the
specified calls.
If any_order is true then the calls can be in any order, but
they must all appear in .





()¶
Assert the mock was never called.



New in version 3.5.




(*, return_value=False, side_effect=False)¶
The reset_mock method resets all the call attributes on a mock object:



Changed in version 3.6: Added two keyword only argument to the reset_mock function.

This can be useful where you want to make a series of assertions that
reuse the same object. Note that  doesn’t clear the
return value,  or any child attributes you have
set using normal assignment by default. In case you want to reset
return_value or , then pass the corresponding
parameter as . Child mocks and the return value mock
(if any) are reset as well.

Note
return_value, and  are keyword only
argument.




(spec, spec_set=False)¶
Add a spec to a mock. spec can either be an object or a
list of strings. Only attributes on the spec can be fetched as
attributes from the mock.
If spec_set is true then only attributes on the spec can be set.



(mock, attribute)¶
Attach a mock as an attribute of this one, replacing its name and
parent. Calls to the attached mock will be recorded in the
 and  attributes of this one.



(**kwargs)¶
Set attributes on the mock through keyword arguments.
Attributes plus return values and side effects can be set on child
mocks using standard dot notation and unpacking a dictionary in the
method call:


The same thing can be achieved in the constructor call to mocks:


 exists to make it easier to do configuration
after the mock has been created.



()¶
 objects limit the results of  to useful results.
For mocks with a spec this includes all the permitted attributes
for the mock.
See  for what this filtering does, and how to
switch it off.



(**kw)¶
Create the child mocks for attributes and return value.
By default child mocks will be the same type as the parent.
Subclasses of Mock may want to override this to customize the way
child mocks are made.
For non-callable mocks the callable variant will be used (rather than
any custom subclass).



¶
A boolean representing whether or not the mock object has been called:





¶
An integer telling you how many times the mock object has been called:





¶
Set this to configure the value returned by calling the mock:


The default return value is a mock object and you can configure it in
the normal way:


 can also be set in the constructor:





¶
This can either be a function to be called when the mock is called,
an iterable or an exception (class or instance) to be raised.
If you pass in a function it will be called with same arguments as the
mock and unless the function returns the  singleton the
call to the mock will then return whatever the function returns. If the
function returns  then the mock will return its normal
value (from the ).
If you pass in an iterable, it is used to retrieve an iterator which
must yield a value on every call.  This value can either be an exception
instance to be raised, or a value to be returned from the call to the
mock ( handling is identical to the function case).
An example of a mock that raises an exception (to test exception
handling of an API):


Using  to return a sequence of values:


Using a callable:


 can be set in the constructor. Here’s an example that
adds one to the value the mock is called with and returns it:


Setting  to  clears it:





¶
This is either  (if the mock hasn’t been called), or the
arguments that the mock was last called with. This will be in the
form of a tuple: the first member is any ordered arguments the mock
was called with (or an empty tuple) and the second member is any
keyword arguments (or an empty dictionary).


, along with members of the lists ,
 and  are  objects.
These are tuples, so they can be unpacked to get at the individual
arguments and make more complex assertions. See
calls as tuples.



¶
This is a list of all the calls made to the mock object in sequence
(so the length of the list is the number of times it has been
called). Before any calls have been made it is an empty list. The
 object can be used for conveniently constructing lists of
calls to compare with .


Members of  are  objects. These can be
unpacked as tuples to get at the individual arguments. See
calls as tuples.



¶
As well as tracking calls to themselves, mocks also track calls to
methods and attributes, and their methods and attributes:


Members of  are  objects. These can be
unpacked as tuples to get at the individual arguments. See
calls as tuples.



¶
 records all calls to the mock object, its methods,
magic methods and return value mocks.


Members of  are  objects. These can be
unpacked as tuples to get at the individual arguments. See
calls as tuples.

Note
The way  are recorded means that where nested
calls are made, the parameters of ancestor calls are not recorded
and so will always compare equal:






¶
Normally the  attribute of an object will return its type.
For a mock object with a ,  returns the spec class
instead. This allows mock objects to pass  tests for the
object they are replacing / masquerading as:


 is assignable to, this allows a mock to pass an
 check without forcing you to use a spec:



