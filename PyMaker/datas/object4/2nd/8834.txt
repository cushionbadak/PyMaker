link:
library/test.html#test.support.find_unused_port

docs:


(family=socket.AF_INET, socktype=socket.SOCK_STREAM)¶
Returns an unused port that should be suitable for binding.  This is
achieved by creating a temporary socket with the same family and type as
the  parameter (default is ,
),
and binding it to the specified host address (defaults to )
with the port set to 0, eliciting an unused ephemeral port from the OS.
The temporary socket is then closed and deleted, and the ephemeral port is
returned.
Either this method or  should be used for any tests
where a server socket needs to be bound to a particular port for the
duration of the test.
Which one to use depends on whether the calling code is creating a Python
socket, or if an unused port needs to be provided in a constructor
or passed to an external program (i.e. the  argument to
openssl’s s_server mode).  Always prefer  over
 where possible.  Using a hard coded port is
discouraged since it can make multiple instances of the test impossible to
run simultaneously, which is a problem for buildbots.
