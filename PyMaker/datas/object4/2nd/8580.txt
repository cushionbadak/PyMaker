link:
library/unittest.mock.html#unittest.mock.Mock.side_effect

docs:


¶
This can either be a function to be called when the mock is called,
an iterable or an exception (class or instance) to be raised.
If you pass in a function it will be called with same arguments as the
mock and unless the function returns the  singleton the
call to the mock will then return whatever the function returns. If the
function returns  then the mock will return its normal
value (from the ).
If you pass in an iterable, it is used to retrieve an iterator which
must yield a value on every call.  This value can either be an exception
instance to be raised, or a value to be returned from the call to the
mock ( handling is identical to the function case).
An example of a mock that raises an exception (to test exception
handling of an API):


Using  to return a sequence of values:


Using a callable:


 can be set in the constructor. Here’s an example that
adds one to the value the mock is called with and returns it:


Setting  to  clears it:


