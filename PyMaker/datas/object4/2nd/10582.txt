link:
library/optparse.html#callback-example-6-variable-arguments

docs:

Callback example 6: variable arguments¶
Things get hairy when you want an option to take a variable number of arguments.
For this case, you must write a callback, as  doesn’t provide any
built-in capabilities for it.  And you have to deal with certain intricacies of
conventional Unix command-line parsing that  normally handles for
you.  In particular, callbacks should implement the conventional rules for bare
 and  arguments:

either  or  can be option arguments
bare  (if not the argument to some option): halt command-line
processing and discard the 
bare  (if not the argument to some option): halt command-line
processing but keep the  (append it to )

If you want an option that takes a variable number of arguments, there are
several subtle, tricky issues to worry about.  The exact implementation you
choose will be based on which trade-offs you’re willing to make for your
application (which is why  doesn’t support this sort of thing
directly).
Nevertheless, here’s a stab at a callback for an option with variable
arguments:


