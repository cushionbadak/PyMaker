link:
library/contextlib.html#cleaning-up-in-an-enter-implementation

docs:

Cleaning up in an  implementation¶
As noted in the documentation of , this
method can be useful in cleaning up an already allocated resource if later
steps in the  implementation fail.
Here’s an example of doing this for a context manager that accepts resource
acquisition and release functions, along with an optional validation function,
and maps them to the context management protocol:


