link:
library/email.parser.html#feedparser-api

docs:

FeedParser API¶
The BytesFeedParser, imported from the email.feedparser module,
provides an API that is conducive to incremental parsing of email messages,
such as would be necessary when reading the text of an email message from a
source that can block (such as a socket).  The BytesFeedParser can of
course be used to parse an email message fully contained in a bytes-like
object, string, or file, but the BytesParser API may be more
convenient for such use cases.  The semantics and results of the two parser
APIs are identical.
The BytesFeedParser’s API is simple; you create an instance, feed it a
bunch of bytes until there’s no more to feed it, then close the parser to
retrieve the root message object.  The BytesFeedParser is extremely
accurate when parsing standards-compliant messages, and it does a very good job
of parsing non-compliant messages, providing information about how a message
was deemed broken.  It will populate a message object’s
defects attribute with a list of any
problems it found in a message.  See the email.errors module for the
list of defects that it can find.
Here is the API for the BytesFeedParser:


class email.parser.BytesFeedParser(_factory=None, *, policy=policy.compat32)¶
Create a BytesFeedParser instance.  Optional _factory is a
no-argument callable; if not specified use the
message_factory from the policy.  Call
_factory whenever a new message object is needed.
If policy is specified use the rules it specifies to update the
representation of the message.  If policy is not set, use the
compat32 policy, which maintains backward
compatibility with the Python 3.2 version of the email package and provides
Message as the default factory.  All other policies
provide EmailMessage as the default _factory. For
more information on what else policy controls, see the
policy documentation.
Note: The policy keyword should always be specified; The default will
change to email.policy.default in a future version of Python.

New in version 3.2.


Changed in version 3.3: Added the policy keyword.


Changed in version 3.6: _factory defaults to the policy message_factory.



feed(data)¶
Feed the parser some more data.  data should be a bytes-like
object containing one or more lines.  The lines can be partial and the
parser will stitch such partial lines together properly.  The lines can
have any of the three common line endings: carriage return, newline, or
carriage return and newline (they can even be mixed).



close()¶
Complete the parsing of all previously fed data and return the root
message object.  It is undefined what happens if feed() is called
after this method has been called.




class email.parser.FeedParser(_factory=None, *, policy=policy.compat32)¶
Works like BytesFeedParser except that the input to the
feed() method must be a string.  This is of limited
utility, since the only way for such a message to be valid is for it to
contain only ASCII text or, if utf8 is
True, no binary attachments.

Changed in version 3.3: Added the policy keyword.


