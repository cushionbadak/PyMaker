link:
library/test.html#test.support.swap_item

docs:

<dt id="test.support.swap_item">
<code class="descclassname">test.support.</code><code class="descname">swap_item</code><span class="sig-paren">(</span><em>obj</em>, <em>attr</em>, <em>new_val</em><span class="sig-paren">)</span><a class="headerlink" href="#test.support.swap_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager to swap out an item with a new object.</p>
<p>Usage:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">swap_item</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">"item"</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This will set <code class="docutils literal notranslate"><span class="pre">obj["item"]</span></code> to 5 for the duration of the <code class="docutils literal notranslate"><span class="pre">with</span></code> block,
restoring the old value at the end of the block. If <code class="docutils literal notranslate"><span class="pre">item</span></code> doesn’t
exist on <code class="docutils literal notranslate"><span class="pre">obj</span></code>, it will be created and then deleted at the end of the
block.</p>
<p>The old value (or <code class="docutils literal notranslate"><span class="pre">None</span></code> if it doesn’t exist) will be assigned to the
target of the “as” clause, if there is one.</p>
</dd>