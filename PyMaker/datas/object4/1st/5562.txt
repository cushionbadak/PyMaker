link:
library/email.generator.html#email.generator.Generator.flatten

docs:


flatten(msg, unixfrom=False, linesep=None)Â¶
Print the textual representation of the message object structure rooted
at msg to the output file specified when the Generator
instance was created.
If the policy option cte_type
is 8bit, generate the message as if the option were set to 7bit.
(This is required because strings cannot represent non-ASCII bytes.)
Convert any bytes with the high bit set as needed using an
ASCII-compatible Content-Transfer-Encoding.  That is,
transform parts with non-ASCII Content-Transfer-Encoding
(Content-Transfer-Encoding: 8bit) to an ASCII compatible
Content-Transfer-Encoding, and encode RFC-invalid non-ASCII
bytes in headers using the MIME unknown-8bit character set, thus
rendering them RFC-compliant.
If unixfrom is True, print the envelope header delimiter used by
the Unix mailbox format (see mailbox) before the first of the
RFC 5322 headers of the root message object.  If the root object has
no envelope header, craft a standard one.  The default is False.
Note that for subparts, no envelope header is ever printed.
If linesep is not None, use it as the separator character between
all the lines of the flattened message.  If linesep is None (the
default), use the value specified in the policy.

Changed in version 3.2: Added support for re-encoding 8bit message bodies, and the
linesep argument.

